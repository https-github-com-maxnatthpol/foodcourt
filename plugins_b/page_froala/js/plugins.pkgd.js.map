/*!
 * froala_editor v3.2.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2021 Froala Labs
 */

{"version":3,"file":"plugins.pkgd.js","sources":["../../src/js/plugins/align.js","../../src/js/plugins/char_counter.js","../../src/js/plugins/code_beautifier.js","../../src/js/plugins/code_view.js","../../src/js/plugins/colors.js","../../src/js/plugins/draggable.js","../../src/js/plugins/edit_in_popup.js","../../src/js/plugins/emoticons.js","../../src/js/plugins/entities.js","../../src/js/plugins/file.js","../../src/js/plugins/files_manager.js","../../src/js/plugins/cryptojs.js","../../src/js/plugins/font_family.js","../../src/js/plugins/font_size.js","../../src/js/plugins/forms.js","../../src/js/plugins/fullscreen.js","../../src/js/plugins/help.js","../../src/js/plugins/image.js","../../src/js/plugins/image_manager.js","../../src/js/plugins/inline_class.js","../../src/js/plugins/inline_style.js","../../src/js/plugins/line_breaker.js","../../src/js/plugins/line_height.js","../../src/js/plugins/link.js","../../src/js/plugins/lists.js","../../src/js/plugins/paragraph_format.js","../../src/js/plugins/paragraph_style.js","../../src/js/plugins/print.js","../../src/js/plugins/quick_insert.js","../../src/js/plugins/quote.js","../../src/js/plugins/save.js","../../src/js/plugins/special_characters.js","../../src/js/plugins/table.js","../../src/js/plugins/url.js","../../src/js/plugins/video.js","../../src/js/plugins/word_paste.js","../../src/js/plugins.pkgd.js"],"sourcesContent":["import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.align = function (editor) {\r\n\r\n  const { $ } =  editor\r\n\r\n  function apply(val) {\r\n\r\n    const el = editor.selection.element()\r\n\r\n    if ($(el).parents('.fr-img-caption').length) {\r\n      $(el).css('text-align', val)\r\n    }\r\n    else {\r\n      // Wrap.\r\n      editor.selection.save()\r\n      editor.html.wrap(true, true, true, true)\r\n      editor.selection.restore()\r\n\r\n      const blocks = editor.selection.blocks()\r\n\r\n      for (let i = 0; i < blocks.length; i++) {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/674\r\n\r\n        $(blocks[i]).css('text-align', val).removeClass('fr-temp-div')\r\n\r\n        if ($(blocks[i]).attr('class') === '') $(blocks[i]).removeAttr('class')\r\n\r\n        if ($(blocks[i]).attr('style') === '') $(blocks[i]).removeAttr('style')\r\n      }\r\n\r\n      editor.selection.save()\r\n      editor.html.unwrap()\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  function refresh($btn) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      $btn.find('> *').first().replaceWith(editor.icon.create(`align-${alignment}`))\r\n    }\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      $dropdown.find(`a.fr-command[data-param1=\"${alignment}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  function refreshForToolbar($btn) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      let alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      // Capitalize.\r\n      alignment = alignment.charAt(0).toUpperCase() + alignment.slice(1)\r\n\r\n      if (`align${alignment}` === $btn.attr('data-cmd')) {\r\n        $btn.addClass('fr-active')\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refresh: refresh,\r\n    refreshOnShow: refreshOnShow,\r\n    refreshForToolbar: refreshForToolbar\r\n  }\r\n}\r\n\r\nFE.DefineIcon('align', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('align-center', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.DefineIcon('align-justify', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\nFE.RegisterCommand('align', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'Align Center',\r\n    right: 'Align Right',\r\n    justify: 'Align Justify'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { options } = FE.COMMANDS.align\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"align\"data-param1=\"\r\n        ${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`align-${val}`)}<span class=\"fr-sr-only\">\r\n        ${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.align.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.align.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignLeft', {\r\n  type: 'button',\r\n  icon: 'align-left',\r\n  title: 'Align Left',\r\n  callback: function () {\r\n    this.align.apply('left')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignRight', {\r\n  type: 'button',\r\n  icon: 'align-right',\r\n  title: 'Align Right',\r\n  callback: function () {\r\n    this.align.apply('right')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignCenter', {\r\n  type: 'button',\r\n  icon: 'align-center',\r\n  title: 'Align Center',\r\n  callback: function () {\r\n    this.align.apply('center')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignJustify', {\r\n  type: 'button',\r\n  icon: 'align-justify',\r\n  title: 'Align Justify',\r\n  callback: function () {\r\n    this.align.apply('justify')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  charCounterMax: -1,\r\n  charCounterCount: true\r\n})\r\n\r\nFE.PLUGINS.charCounter = function (editor) {\r\n  const { $ } =  editor\r\n  let $counter\r\n\r\n  /**\r\n   * Get the char number.\r\n   */\r\n  const count = () => (editor.el.textContent || '').replace(/\\u200B/g, '').length\r\n\r\n  /**\r\n   * Check chars on typing.\r\n   */\r\n  function _checkCharNumber(e) {\r\n\r\n    // Continue if infinite characters.\r\n    if (editor.opts.charCounterMax < 0) return true\r\n\r\n    // Continue if enough characters.\r\n    if (count() < editor.opts.charCounterMax) return true\r\n\r\n    // Stop if the key will produce a new char.\r\n    const keyCode = e.which\r\n\r\n    if ((!editor.keys.ctrlKey(e) && editor.keys.isCharacter(keyCode)) || (keyCode === FE.KEYCODE.IME)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      editor.events.trigger('charCounter.exceeded')\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Check chars on paste.\r\n   */\r\n  function _checkCharNumberOnPaste(html) {\r\n    if (editor.opts.charCounterMax < 0) return html\r\n\r\n    const len = $('<div>').html(html).text().length\r\n\r\n    if (len + count() <= editor.opts.charCounterMax) return html\r\n\r\n    editor.events.trigger('charCounter.exceeded')\r\n\r\n    return ''\r\n  }\r\n\r\n  /**\r\n   * Update the char counter.\r\n   */\r\n  function _updateCharNumber() {\r\n    if (editor.opts.charCounterCount) {\r\n      const chars = count() + (editor.opts.charCounterMax > 0 ? '/' + editor.opts.charCounterMax : '')\r\n\r\n      $counter.text(`${editor.language.translate('Characters')} : ${chars}`)\r\n\r\n      if (editor.opts.toolbarBottom) {\r\n        $counter.css('margin-bottom', editor.$tb.outerHeight(true))\r\n      }\r\n\r\n      // Scroll size correction.\r\n      const scroll_size = editor.$wp.get(0).offsetWidth - editor.$wp.get(0).clientWidth\r\n\r\n      if (scroll_size >= 0) {\r\n        if (editor.opts.direction == 'rtl') {\r\n          $counter.css('margin-left', scroll_size)\r\n        }\r\n        else {\r\n          $counter.css('margin-right', scroll_size)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    if (!editor.opts.charCounterCount) return false\r\n\r\n    $counter = $(document.createElement('span')).attr('class', 'fr-counter')\r\n    $counter.css('bottom', editor.$wp.css('border-bottom-width'))\r\n\r\n    // Append char counter only if second toolbar exists\r\n    if (editor.$second_tb) {\r\n      editor.$second_tb.append($counter)\r\n    }\r\n\r\n    editor.events.on('keydown', _checkCharNumber, true)\r\n    editor.events.on('paste.afterCleanup', _checkCharNumberOnPaste)\r\n    editor.events.on('keyup contentChanged input', function () {\r\n      editor.events.trigger('charCounter.update')\r\n    })\r\n\r\n    editor.events.on('charCounter.update', _updateCharNumber)\r\n    editor.events.trigger('charCounter.update')\r\n\r\n    editor.events.on('destroy', function () {\r\n      $(editor.o_win).off(`resize.char${editor.id}`)\r\n      $counter.removeData().remove()\r\n      $counter = null\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    count: count\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.codeBeautifier = function () {\r\n  /**\r\n     * HTML BEAUTIFIER\r\n     *\r\n     * LICENSE: The MIT License (MIT)\r\n     *\r\n     * Written by Nochum Sossonko, (nsossonko@hotmail.com)\r\n     *\r\n     * Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\r\n     * http://jsbeautifier.org/\r\n     *\r\n     */\r\n  /* jshint ignore:start */\r\n  /* jscs:disable */\r\n\r\n\r\n  const acorn = {};\r\n\r\n  (function (exports) {\r\n    /* jshint curly: false */\r\n    // This section of code is taken from acorn.\r\n    //\r\n    // Acorn was written by Marijn Haverbeke and released under an MIT\r\n    // license. The Unicode regexps (for identifiers and whitespace) were\r\n    // taken from [Esprima](http://esprima.org) by Ariya Hidayat.\r\n    //\r\n    // Git repositories for Acorn are available at\r\n    //\r\n    //     http://marijnhaverbeke.nl/git/acorn\r\n    //     https://github.com/marijnh/acorn.git\r\n\r\n    // ## Character categories\r\n\r\n    // Big ugly regular expressions that match characters in the\r\n    // whitespace, identifier, and identifier-start categories. These\r\n    // are only applied when a character is found to actually have a\r\n    // code point above 128.\r\n\r\n    const nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/ // jshint ignore:line\r\n    const nonASCIIidentifierStartChars = '\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc'\r\n    const nonASCIIidentifierChars = '\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f'\r\n    const nonASCIIidentifierStart = new RegExp(`[${nonASCIIidentifierStartChars}]`)\r\n    const nonASCIIidentifier = new RegExp(`[${nonASCIIidentifierStartChars} ${nonASCIIidentifierChars}]`)\r\n\r\n    // Whether a single character denotes a newline.\r\n\r\n    exports.newline = /[\\n\\r\\u2028\\u2029]/\r\n\r\n    // Matches a whole line break (where CRLF is considered a single\r\n    // line break). Used to count lines.\r\n\r\n    // in javascript, these two differ\r\n    // in python they are the same, different methods are called on them\r\n    exports.lineBreak = new RegExp(`\\r\\n|${exports.newline.source}`)\r\n    exports.allLineBreaks = new RegExp(exports.lineBreak.source, 'g')\r\n\r\n\r\n    // Test whether a given character code starts an identifier.\r\n\r\n    exports.isIdentifierStart = function (code) {\r\n      // permit $ (36) and @ (64). @ is used in ES7 decorators.\r\n      if (code < 65) return code === 36 || code === 64\r\n      // 65 through 91 are uppercase letters.\r\n      if (code < 91) return true\r\n      // permit _ (95).\r\n      if (code < 97) return code === 95\r\n      // 97 through 123 are lowercase letters.\r\n      if (code < 123) return true\r\n      return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code))\r\n    }\r\n\r\n    // Test whether a given character is part of an identifier.\r\n\r\n    exports.isIdentifierChar = function (code) {\r\n      if (code < 48) return code === 36\r\n      if (code < 58) return true\r\n      if (code < 65) return false\r\n      if (code < 91) return true\r\n      if (code < 97) return code === 95\r\n      if (code < 123) return true\r\n      return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code))\r\n    }\r\n  })(acorn)\r\n\r\n  function run(html_source, options) {\r\n    function ltrim(s) {\r\n      return s.replace(/^\\s+/g, '')\r\n    }\r\n\r\n    function rtrim(s) {\r\n      return s.replace(/\\s+$/g, '')\r\n    }\r\n\r\n    let multi_parser\r\n    let indent_inner_html\r\n    let indent_size\r\n    let indent_character\r\n    let wrap_line_length\r\n    let brace_style\r\n    let unformatted\r\n    let preserve_newlines\r\n    let max_preserve_newlines\r\n    let indent_handlebars\r\n    let wrap_attributes\r\n    let wrap_attributes_indent_size\r\n    let end_with_newline\r\n    let extra_liners\r\n\r\n    options = options || {}\r\n\r\n    // backwards compatibility to 1.3.4\r\n    if ((options.wrap_line_length === undefined || parseInt(options.wrap_line_length, 10) === 0) &&\r\n            (options.max_char !== undefined && parseInt(options.max_char, 10) !== 0)) {\r\n      options.wrap_line_length = options.max_char\r\n    }\r\n\r\n    indent_inner_html = (options.indent_inner_html === undefined) ? false : options.indent_inner_html\r\n    indent_size = (options.indent_size === undefined) ? 4 : parseInt(options.indent_size, 10)\r\n    indent_character = (options.indent_char === undefined) ? ' ' : options.indent_char\r\n    brace_style = (options.brace_style === undefined) ? 'collapse' : options.brace_style\r\n    wrap_line_length = parseInt(options.wrap_line_length, 10) === 0 ? 32786 : parseInt(options.wrap_line_length || 250, 10) \r\n    unformatted = options.unformatted || ['a', 'span', 'img', 'bdo', 'em', 'strong', 'dfn', 'code', 'samp', 'kbd',\r\n      'const', 'cite', 'abbr', 'acronym', 'q', 'sub', 'sup', 'tt', 'i', 'b', 'big', 'small', 'u', 's', 'strike',\r\n      'font', 'ins', 'del', 'address', 'pre'\r\n    ]\r\n    preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines \r\n    max_preserve_newlines = preserve_newlines ?\r\n      (isNaN(parseInt(options.max_preserve_newlines, 10)) ? 32786 : parseInt(options.max_preserve_newlines, 10)) : 0 \r\n    indent_handlebars = (options.indent_handlebars === undefined) ? false : options.indent_handlebars \r\n    wrap_attributes = (options.wrap_attributes === undefined) ? 'auto' : options.wrap_attributes \r\n    wrap_attributes_indent_size = (options.wrap_attributes_indent_size === undefined) ? indent_size : parseInt(options.wrap_attributes_indent_size, 10) || indent_size \r\n    end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    extra_liners = Array.isArray(options.extra_liners) ?\r\n      options.extra_liners.concat() : (typeof options.extra_liners === 'string') ?\r\n        options.extra_liners.split(',') : 'head,body,/html'.split(',') \r\n\r\n    if (options.indent_with_tabs) {\r\n      indent_character = '\\t' \r\n      indent_size = 1 \r\n    }\r\n\r\n    function Parser() {\r\n\r\n      this.pos = 0  //Parser position\r\n      this.token = '' \r\n      this.current_mode = 'CONTENT'  //reflects the current Parser mode: TAG/CONTENT\r\n      this.tags = { //An object to hold tags, their position, and their parent-tags, initiated with default values\r\n        parent: 'parent1',\r\n        parentcount: 1,\r\n        parent1: ''\r\n      } \r\n      this.tag_type = '' \r\n      this.token_text = this.last_token = this.last_text = this.token_type = '' \r\n      this.newlines = 0 \r\n      this.indent_content = indent_inner_html \r\n\r\n      this.Utils = { //Uilities made available to the various functions\r\n        whitespace: '\\n\\r\\t '.split(''),\r\n        single_token: 'br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed'.split(','), //all the single tags for HTML\r\n        extra_liners: extra_liners, //for tags that need a line of whitespace before them\r\n        in_array: function (what, arr) {\r\n          for (let i = 0;    i < arr.length;   i++) {\r\n            if (what === arr[i]) {\r\n              return true \r\n            }\r\n          }\r\n          return false \r\n        }\r\n      } \r\n\r\n      // Return true if the given text is composed entirely of whitespace.\r\n      this.is_whitespace = function (text) {\r\n        for (const n = 0;  n < text.length;  text++) {\r\n          if (!this.Utils.in_array(text.charAt(n), this.Utils.whitespace)) {\r\n            return false \r\n          }\r\n        }\r\n        return true \r\n      } \r\n\r\n      this.traverse_whitespace = function () {\r\n        let input_char = '' \r\n\r\n        input_char = this.input.charAt(this.pos) \r\n        if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n          this.newlines = 0 \r\n          while (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n            if (preserve_newlines && input_char === '\\n' && this.newlines <= max_preserve_newlines) {\r\n              this.newlines += 1 \r\n            }\r\n\r\n            this.pos++ \r\n            input_char = this.input.charAt(this.pos) \r\n          }\r\n          return true \r\n        }\r\n        return false \r\n      } \r\n\r\n      // Append a space to the given content (string array) or, if we are\r\n      // at the wrap_line_length, append a newline/indentation.\r\n      this.space_or_wrap = function (content) {\r\n        if (this.line_char_count >= this.wrap_line_length) { //insert a line when the wrap_line_length is reached\r\n          this.print_newline(false, content) \r\n          this.print_indentation(content) \r\n        } else {\r\n          this.line_char_count++ \r\n          content.push(' ') \r\n        }\r\n      } \r\n\r\n      this.get_content = function () { //function to capture regular content between tags\r\n        let input_char = '',\r\n          content = [] \r\n\r\n        while (this.input.charAt(this.pos) != '<') {\r\n          if (this.pos >= this.input.length) {\r\n            return content.length ? content.join('') : ['', 'TK_EOF'] \r\n          }\r\n\r\n          if (this.traverse_whitespace()) {\r\n            this.space_or_wrap(content) \r\n            continue \r\n          }\r\n\r\n          if (indent_handlebars) {\r\n            // Handlebars parsing is complicated.\r\n            // {{#foo}} and {{/foo}} are formatted tags.\r\n            // {{something}} should get treated as content, except:\r\n            // {{else}} specifically behaves like {{#if}} and {{/if}}\r\n            const peek3 = this.input.substr(this.pos, 3) \r\n            if (peek3 === '{{#' || peek3 === '{{/') {\r\n              // These are tags and not content.\r\n              break \r\n            } else if (peek3 === '{{!') {\r\n              return [this.get_tag(), 'TK_TAG_HANDLEBARS_COMMENT'] \r\n            } else if (this.input.substr(this.pos, 2) === '{{') {\r\n              if (this.get_tag(true) === '{{else}}') {\r\n                break \r\n              }\r\n            }\r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n          this.line_char_count++ \r\n          content.push(input_char)  //letter at-a-time (or string) inserted to an array\r\n        }\r\n        return content.length ? content.join('') : '' \r\n      } \r\n\r\n      this.get_contents_to = function (name) { //get the full content of a script or style to pass to js_beautify\r\n        if (this.pos === this.input.length) {\r\n          return ['', 'TK_EOF'] \r\n        }\r\n        let content = '' \r\n        const reg_match = new RegExp(`</${name}\\\\s*>`, 'igm') \r\n        reg_match.lastIndex = this.pos \r\n        const reg_array = reg_match.exec(this.input) \r\n        const end_script = reg_array ? reg_array.index : this.input.length  //absolute end of script\r\n        if (this.pos < end_script) { //get everything in between the script tags\r\n          content = this.input.substring(this.pos, end_script) \r\n          this.pos = end_script \r\n        }\r\n        return content \r\n      } \r\n\r\n      this.record_tag = function (tag) { //function to record a tag and its parent in this.tags Object\r\n        if (this.tags[`${tag}count`]) { //check for the existence of this tag type\r\n          this.tags[`${tag}count`]++ \r\n          this.tags[tag + this.tags[`${tag}count`]] = this.indent_level  //and record the present indent level\r\n        } else { //otherwise initialize this tag type\r\n          this.tags[`${tag}count`] = 1 \r\n          this.tags[tag + this.tags[`${tag}count`]] = this.indent_level  //and record the present indent level\r\n        }\r\n        this.tags[tag + this.tags[`${tag}count`] + 'parent'] = this.tags.parent  //set the parent (i.e. in the case of a div this.tags.div1parent)\r\n        this.tags.parent = tag + this.tags[`${tag}count`]  //and make this the current parent (i.e. in the case of a div 'div1')\r\n      } \r\n\r\n      this.retrieve_tag = function (tag) { //function to retrieve the opening tag to the corresponding closer\r\n        if (this.tags[`${tag}count`]) { //if the openener is not in the Object we ignore it\r\n          let temp_parent = this.tags.parent  //check to see if it's a closable tag.\r\n          while (temp_parent) { //till we reach '' (the initial value) \r\n            if (tag + this.tags[`${tag}count`] === temp_parent) { //if this is it use it\r\n              break \r\n            }\r\n            temp_parent = this.tags[`${temp_parent}parent`]  //otherwise keep on climbing up the DOM Tree\r\n          }\r\n          if (temp_parent) { //if we caught something\r\n            this.indent_level = this.tags[tag + this.tags[`${tag}count`]]  //set the indent_level accordingly\r\n            this.tags.parent = this.tags[temp_parent + 'parent']  //and set the current parent\r\n          }\r\n          delete this.tags[tag + this.tags[`${tag}count`] + 'parent']  //delete the closed tags parent reference...\r\n          delete this.tags[tag + this.tags[`${tag}count`]]  //...and the tag itself\r\n          if (this.tags[`${tag}count`] === 1) {\r\n            delete this.tags[`${tag}count`] \r\n          } else {\r\n            this.tags[`${tag}count`]-- \r\n          }\r\n        }\r\n      } \r\n\r\n      this.indent_to_tag = function (tag) {\r\n        // Match the indentation level to the last use of this tag, but don't remove it.\r\n        if (!this.tags[`${tag}count`]) {\r\n          return \r\n        }\r\n        let temp_parent = this.tags.parent \r\n        while (temp_parent) {\r\n          if (tag + this.tags[`${tag}count`] === temp_parent) {\r\n            break \r\n          }\r\n          temp_parent = this.tags[`${temp_parent}parent`] \r\n        }\r\n        if (temp_parent) {\r\n          this.indent_level = this.tags[tag + this.tags[`${tag}count`]] \r\n        }\r\n      } \r\n\r\n      this.get_tag = function (peek) { //function to get a full tag and parse its type\r\n        let input_char = '',\r\n          content = [],\r\n          comment = '',\r\n          space = false,\r\n          first_attr = true,\r\n          tag_start, \r\n          tag_end,\r\n          tag_start_char,\r\n          orig_pos = this.pos,\r\n          orig_line_char_count = this.line_char_count \r\n\r\n        peek = peek !== undefined ? peek : false \r\n\r\n        do {\r\n          if (this.pos >= this.input.length) {\r\n            if (peek) {\r\n              this.pos = orig_pos \r\n              this.line_char_count = orig_line_char_count \r\n            }\r\n            return content.length ? content.join('') : ['', 'TK_EOF'] \r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n\r\n          if (this.Utils.in_array(input_char, this.Utils.whitespace)) { //don't want to insert unnecessary space\r\n            space = true \r\n            continue \r\n          }\r\n\r\n          if (input_char === '\\'' || input_char === '\"') {\r\n            input_char += this.get_unformatted(input_char) \r\n            space = true \r\n\r\n          }\r\n\r\n          if (input_char === '=') { //no space before =\r\n            space = false \r\n          }\r\n\r\n          if (content.length && content[content.length - 1] != '=' && input_char != '>' && space) {\r\n            //no space after = or before >\r\n            this.space_or_wrap(content) \r\n            space = false \r\n            if (!first_attr && wrap_attributes === 'force' && input_char != '/') {\r\n              this.print_newline(true, content) \r\n              this.print_indentation(content) \r\n              for (let count = 0;  count < wrap_attributes_indent_size;  count++) {\r\n                content.push(indent_character) \r\n              }\r\n            }\r\n            for (let i = 0;  i < content.length;  i++) {\r\n              if (content[i] === ' ') {\r\n                first_attr = false \r\n                break \r\n              }\r\n            }\r\n          }\r\n\r\n          if (indent_handlebars && tag_start_char === '<') {\r\n            // When inside an angle-bracket tag, put spaces around\r\n            // handlebars not inside of strings.\r\n            if ((input_char + this.input.charAt(this.pos)) === '{{') {\r\n              input_char += this.get_unformatted('}}') \r\n              if (content.length && content[content.length - 1] != ' ' && content[content.length - 1] != '<') {\r\n                input_char = ` ${input_char}` \r\n              }\r\n              space = true \r\n            }\r\n          }\r\n\r\n          if (input_char === '<' && !tag_start_char) {\r\n            tag_start = this.pos - 1 \r\n            tag_start_char = '<' \r\n          }\r\n\r\n          if (indent_handlebars && !tag_start_char) {\r\n            if (content.length >= 2 && content[content.length - 1] === '{' && content[content.length - 2] === '{') {\r\n              if (input_char === '#' || input_char === '/' || input_char === '!') {\r\n                tag_start = this.pos - 3 \r\n              } else {\r\n                tag_start = this.pos - 2 \r\n              }\r\n              tag_start_char = '{' \r\n            }\r\n          }\r\n\r\n          this.line_char_count++ \r\n          content.push(input_char)  //inserts character at-a-time (or string)\r\n\r\n          if (content[1] && (content[1] === '!' || content[1] === '?' || content[1] === '%')) { //if we're in a comment, do something special\r\n            // We treat all comments as literals, even more than preformatted tags\r\n            // we just look for the appropriate close tag\r\n            content = [this.get_comment(tag_start)] \r\n            break \r\n          }\r\n\r\n          if (indent_handlebars && content[1] && content[1] === '{' && content[2] && content[2] === '!') { //if we're in a comment, do something special\r\n            // We treat all comments as literals, even more than preformatted tags\r\n            // we just look for the appropriate close tag\r\n            content = [this.get_comment(tag_start)] \r\n            break \r\n          }\r\n\r\n          if (indent_handlebars && tag_start_char === '{' && content.length > 2 && content[content.length - 2] === '}' && content[content.length - 1] === '}') {\r\n            break \r\n          }\r\n        } while (input_char != '>') \r\n\r\n        const tag_complete = content.join('') \r\n        let tag_index \r\n        let tag_offset \r\n\r\n        if (tag_complete.indexOf(' ') != -1) { //if there's whitespace, thats where the tag name ends\r\n          tag_index = tag_complete.indexOf(' ') \r\n        } else if (tag_complete[0] === '{') {\r\n          tag_index = tag_complete.indexOf('}') \r\n        } else { //otherwise go with the tag ending\r\n          tag_index = tag_complete.indexOf('>') \r\n        }\r\n        if (tag_complete[0] === '<' || !indent_handlebars) {\r\n          tag_offset = 1 \r\n        } else {\r\n          tag_offset = tag_complete[2] === '#' ? 3 : 2 \r\n        }\r\n        const tag_check = tag_complete.substring(tag_offset, tag_index).toLowerCase() \r\n        if (tag_complete.charAt(tag_complete.length - 2) === '/' ||\r\n                    this.Utils.in_array(tag_check, this.Utils.single_token)) { //if this tag name is a single tag type (either in the list or has a closing /)\r\n          if (!peek) {\r\n            this.tag_type = 'SINGLE' \r\n          }\r\n        } else if (indent_handlebars && tag_complete[0] === '{' && tag_check === 'else') {\r\n          if (!peek) {\r\n            this.indent_to_tag('if') \r\n            this.tag_type = 'HANDLEBARS_ELSE' \r\n            this.indent_content = true \r\n            this.traverse_whitespace() \r\n          }\r\n        } else if (this.is_unformatted(tag_check, unformatted)) { // do not reformat the \"unformatted\" tags\r\n          comment = this.get_unformatted(`</${tag_check}>`, tag_complete)  //...delegate to get_unformatted function\r\n          content.push(comment) \r\n          tag_end = this.pos - 1 \r\n          this.tag_type = 'SINGLE' \r\n        } else if (tag_check === 'script' &&\r\n                    (tag_complete.search('type') === -1 ||\r\n                        (tag_complete.search('type') > -1 &&\r\n                            tag_complete.search(/\\b(text|application)\\/(x-)?(javascript|ecmascript|jscript|livescript)/) > -1))) {\r\n          if (!peek) {\r\n            this.record_tag(tag_check) \r\n            this.tag_type = 'SCRIPT' \r\n          }\r\n        } else if (tag_check === 'style' &&\r\n                    (tag_complete.search('type') === -1 ||\r\n                        (tag_complete.search('type') > -1 && tag_complete.search('text/css') > -1))) {\r\n          if (!peek) {\r\n            this.record_tag(tag_check) \r\n            this.tag_type = 'STYLE' \r\n          }\r\n        } else if (tag_check.charAt(0) === '!') { //peek for <! comment\r\n          // for comments content is already correct.\r\n          if (!peek) {\r\n            this.tag_type = 'SINGLE' \r\n            this.traverse_whitespace() \r\n          }\r\n        } else if (!peek) {\r\n          if (tag_check.charAt(0) === '/') { //this tag is a double tag so check for tag-ending\r\n            this.retrieve_tag(tag_check.substring(1))  //remove it and all ancestors\r\n            this.tag_type = 'END' \r\n          } else { //otherwise it's a start-tag\r\n            this.record_tag(tag_check)  //push it on the tag stack\r\n            if (tag_check.toLowerCase() != 'html') {\r\n              this.indent_content = true \r\n            }\r\n            this.tag_type = 'START' \r\n          }\r\n\r\n          // Allow preserving of newlines after a start or end tag\r\n          if (this.traverse_whitespace()) {\r\n            this.space_or_wrap(content) \r\n          }\r\n\r\n          if (this.Utils.in_array(tag_check, this.Utils.extra_liners)) { //check if this double needs an extra line\r\n            this.print_newline(false, this.output) \r\n            if (this.output.length && this.output[this.output.length - 2] != '\\n') {\r\n              this.print_newline(true, this.output) \r\n            }\r\n          }\r\n        }\r\n\r\n        if (peek) {\r\n          this.pos = orig_pos \r\n          this.line_char_count = orig_line_char_count \r\n        }\r\n\r\n        return content.join('')  //returns fully formatted tag\r\n      } \r\n\r\n      this.get_comment = function (start_pos) { //function to return comment content in its entirety\r\n        // this is will have very poor perf, but will work for now.\r\n        let comment = '',\r\n          delimiter = '>',\r\n          matched = false \r\n\r\n        this.pos = start_pos \r\n        let input_char = this.input.charAt(this.pos) \r\n        this.pos++ \r\n\r\n        while (this.pos <= this.input.length) {\r\n          comment += input_char \r\n\r\n          // only need to check for the delimiter if the last chars match\r\n          if (comment[comment.length - 1] === delimiter[delimiter.length - 1] &&\r\n                        comment.indexOf(delimiter) != -1) {\r\n            break \r\n          }\r\n\r\n          // only need to search for custom delimiter for the first few characters\r\n          if (!matched && comment.length < 10) {\r\n            if (comment.indexOf('<![if') === 0) { //peek for <![if conditional comment\r\n              delimiter = '<![endif]>' \r\n              matched = true \r\n            } else if (comment.indexOf('<![cdata[') === 0) { //if it's a <[cdata[ comment...\r\n              delimiter = ']]>' \r\n              matched = true \r\n            } else if (comment.indexOf('<![') === 0) { // some other ![ comment? ...\r\n              delimiter = ']>' \r\n              matched = true \r\n            } else if (comment.indexOf('<!--') === 0) { // <!-- comment ...\r\n              delimiter = '-->' \r\n              matched = true \r\n            } else if (comment.indexOf('{{!') === 0) { // {{! handlebars comment\r\n              delimiter = '}}' \r\n              matched = true \r\n            } else if (comment.indexOf('<?') === 0) { // {{! handlebars comment\r\n              delimiter = '?>' \r\n              matched = true \r\n            } else if (comment.indexOf('<%') === 0) { // {{! handlebars comment\r\n              delimiter = '%>' \r\n              matched = true \r\n            }\r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n        }\r\n\r\n        return comment \r\n      } \r\n\r\n      this.get_unformatted = function (delimiter, orig_tag) { //function to return unformatted content in its entirety\r\n\r\n        if (orig_tag && orig_tag.toLowerCase().indexOf(delimiter) != -1) {\r\n          return '' \r\n        }\r\n        let input_char = '' \r\n        let content = '' \r\n        let min_index = 0 \r\n        let space = true \r\n        do {\r\n\r\n          if (this.pos >= this.input.length) {\r\n            return content \r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n\r\n          if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n            if (!space) {\r\n              this.line_char_count-- \r\n              continue \r\n            }\r\n            if (input_char === '\\n' || input_char === '\\r') {\r\n              content += '\\n' \r\n              /*  Don't change tab indention for unformatted blocks.  If using code for html editing, this will greatly affect <pre> tags if they are specified in the 'unformatted array'\r\n                          for (const i=0  i<this.indent_level  i++) {\r\n                            content += this.indent_string \r\n                          }\r\n                          space = false  //...and make sure other indentation is erased\r\n                          */\r\n              this.line_char_count = 0 \r\n              continue \r\n            }\r\n          }\r\n          content += input_char \r\n          this.line_char_count++ \r\n          space = true \r\n\r\n          if (indent_handlebars && input_char === '{' && content.length && content[content.length - 2] === '{') {\r\n            // Handlebars expressions in strings should also be unformatted.\r\n            content += this.get_unformatted('}}') \r\n            // These expressions are opaque.  Ignore delimiters found in them.\r\n            min_index = content.length \r\n          }\r\n        } while (content.toLowerCase().indexOf(delimiter, min_index) === -1) \r\n        return content \r\n      } \r\n\r\n      this.get_token = function () { //initial handler for token-retrieval\r\n        let token \r\n\r\n        if (this.last_token === 'TK_TAG_SCRIPT' || this.last_token === 'TK_TAG_STYLE') { //check if we need to format javascript\r\n          const type = this.last_token.substr(7) \r\n          token = this.get_contents_to(type) \r\n          if (typeof token != 'string') {\r\n            return token \r\n          }\r\n          return [token, `TK_${type}`] \r\n        }\r\n        if (this.current_mode === 'CONTENT') {\r\n          token = this.get_content() \r\n          if (typeof token != 'string') {\r\n            return token \r\n          } else {\r\n            return [token, 'TK_CONTENT'] \r\n          }\r\n        }\r\n\r\n        if (this.current_mode === 'TAG') {\r\n          token = this.get_tag() \r\n          if (typeof token != 'string') {\r\n            return token \r\n          } else {\r\n            const tag_name_type = `TK_TAG_${this.tag_type}` \r\n            return [token, tag_name_type] \r\n          }\r\n        }\r\n      } \r\n\r\n      this.get_full_indent = function (level) {\r\n        level = this.indent_level + level || 0 \r\n        if (level < 1) {\r\n          return '' \r\n        }\r\n\r\n        return (new Array(level + 1)).join(this.indent_string) \r\n      } \r\n\r\n      this.is_unformatted = function (tag_check, unformatted) {\r\n        //is this an HTML5 block-level link?\r\n        if (!this.Utils.in_array(tag_check, unformatted)) {\r\n          return false \r\n        }\r\n\r\n        if (tag_check.toLowerCase() != 'a' || !this.Utils.in_array('a', unformatted)) {\r\n          return true \r\n        }\r\n\r\n        //at this point we have an  tag  is its first child something we want to remain\r\n        //unformatted?\r\n        const next_tag = this.get_tag(true /* peek. */) \r\n\r\n        // test next_tag to see if it is just html tag (no external content)\r\n        const tag = (next_tag || '').match(/^\\s*<\\s*\\/?([a-z]*)\\s*[^>]*>\\s*$/) \r\n\r\n        // if next_tag comes back but is not an isolated tag, then\r\n        // let's treat the 'a' tag as having content\r\n        // and respect the unformatted option\r\n        if (!tag || this.Utils.in_array(tag, unformatted)) {\r\n          return true \r\n        } else {\r\n          return false \r\n        }\r\n      } \r\n\r\n      this.printer = function (js_source, indent_character, indent_size, wrap_line_length, brace_style) { //handles input/output and some other printing functions\r\n\r\n        this.input = js_source || ''  //gets the input for the Parser\r\n        this.output = [] \r\n        this.indent_character = indent_character \r\n        this.indent_string = '' \r\n        this.indent_size = indent_size \r\n        this.brace_style = brace_style \r\n        this.indent_level = 0 \r\n        this.wrap_line_length = wrap_line_length \r\n        this.line_char_count = 0  //count to see if wrap_line_length was exceeded\r\n\r\n        for (let i = 0;  i < this.indent_size;  i++) {\r\n          this.indent_string += this.indent_character \r\n        }\r\n\r\n        this.print_newline = function (force, arr) {\r\n          this.line_char_count = 0 \r\n          if (!arr || !arr.length) {\r\n            return \r\n          }\r\n          if (force || (arr[arr.length - 1] != '\\n')) { //we might want the extra line\r\n            if ((arr[arr.length - 1] != '\\n')) {\r\n              arr[arr.length - 1] = rtrim(arr[arr.length - 1]) \r\n            }\r\n            arr.push('\\n') \r\n          }\r\n        } \r\n\r\n        this.print_indentation = function (arr) {\r\n          for (let i = 0;  i < this.indent_level;  i++) {\r\n            arr.push(this.indent_string) \r\n            this.line_char_count += this.indent_string.length \r\n          }\r\n        } \r\n\r\n        this.print_token = function (text) {\r\n          // Avoid printing initial whitespace.\r\n          if (this.is_whitespace(text) && !this.output.length) {\r\n            return \r\n          }\r\n          if (text || text !== '') {\r\n            if (this.output.length && this.output[this.output.length - 1] === '\\n') {\r\n              this.print_indentation(this.output) \r\n              text = ltrim(text) \r\n            }\r\n          }\r\n          this.print_token_raw(text) \r\n        } \r\n\r\n        this.print_token_raw = function (text) {\r\n          // If we are going to print newlines, truncate trailing\r\n          // whitespace, as the newlines will represent the space.\r\n          if (this.newlines > 0) {\r\n            text = rtrim(text) \r\n          }\r\n\r\n          if (text && text !== '') {\r\n            if (text.length > 1 && text[text.length - 1] === '\\n') {\r\n              // unformatted tags can grab newlines as their last character\r\n              this.output.push(text.slice(0, -1)) \r\n              this.print_newline(false, this.output) \r\n            } else {\r\n              this.output.push(text) \r\n            }\r\n          }\r\n\r\n          for (let n = 0;  n < this.newlines;  n++) {\r\n            this.print_newline(n > 0, this.output) \r\n          }\r\n          this.newlines = 0 \r\n        } \r\n\r\n        this.indent = function () {\r\n          this.indent_level++ \r\n        } \r\n\r\n        this.unindent = function () {\r\n          if (this.indent_level > 0) {\r\n            this.indent_level-- \r\n          }\r\n        } \r\n      } \r\n      return this \r\n    }\r\n\r\n    /*_____________________--------------------_____________________*/\r\n\r\n    multi_parser = new Parser()  //wrapping functions Parser\r\n    multi_parser.printer(html_source, indent_character, indent_size, wrap_line_length, brace_style)  //initialize starting values\r\n\r\n    while (true) {\r\n      const t = multi_parser.get_token() \r\n      multi_parser.token_text = t[0] \r\n      multi_parser.token_type = t[1] \r\n\r\n      if (multi_parser.token_type === 'TK_EOF') {\r\n        break \r\n      }\r\n\r\n      switch (multi_parser.token_type) {\r\n      case 'TK_TAG_START':\r\n        multi_parser.print_newline(false, multi_parser.output) \r\n        multi_parser.print_token(multi_parser.token_text) \r\n        if (multi_parser.indent_content) {\r\n          multi_parser.indent() \r\n          multi_parser.indent_content = false \r\n        }\r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_STYLE':\r\n      case 'TK_TAG_SCRIPT':\r\n        multi_parser.print_newline(false, multi_parser.output) \r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_END':\r\n        // Print new line only if the tag has no content and has child\r\n        if (multi_parser.last_token === 'TK_CONTENT' && multi_parser.last_text === '') {\r\n          const tag_name = multi_parser.token_text.match(/\\w+/)[0] \r\n          let tag_extracted_from_last_output = null \r\n          if (multi_parser.output.length) {\r\n            tag_extracted_from_last_output = multi_parser.output[multi_parser.output.length - 1].match(/(?:<|{{#)\\/?\\s*(\\w+)/)\r\n          }\r\n          if (tag_extracted_from_last_output === null ||\r\n                            (tag_extracted_from_last_output[1] != tag_name && !multi_parser.Utils.in_array(tag_extracted_from_last_output[1], unformatted))) {\r\n            multi_parser.print_newline(false, multi_parser.output) \r\n          }\r\n        }\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_SINGLE':\r\n        // Don't add a newline before elements that should remain unformatted.\r\n        const tag_check = multi_parser.token_text.match(/^\\s*<([a-z-]+)/i) \r\n        if (!tag_check || !multi_parser.Utils.in_array(tag_check[1], unformatted)) {\r\n          multi_parser.print_newline(false, multi_parser.output) \r\n        }\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_HANDLEBARS_ELSE':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        if (multi_parser.indent_content) {\r\n          multi_parser.indent() \r\n          multi_parser.indent_content = false \r\n        }\r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_HANDLEBARS_COMMENT':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      case 'TK_CONTENT':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      case 'TK_STYLE':\r\n      case 'TK_SCRIPT':\r\n        if (multi_parser.token_text !== '') {\r\n          multi_parser.print_newline(false, multi_parser.output) \r\n          let { token_text : text } = multi_parser \r\n          let _beautifier \r\n          let script_indent_level = 1 \r\n\r\n          if (multi_parser.token_type === 'TK_SCRIPT') {\r\n            _beautifier = typeof js_beautify === 'function' && js_beautify \r\n          } else if (multi_parser.token_type === 'TK_STYLE') {\r\n            _beautifier = typeof css_beautify === 'function' && css_beautify \r\n          }\r\n\r\n          if (options.indent_scripts === 'keep') {\r\n            script_indent_level = 0 \r\n          } else if (options.indent_scripts === 'separate') {\r\n            script_indent_level = -multi_parser.indent_level \r\n          }\r\n\r\n          const indentation = multi_parser.get_full_indent(script_indent_level) \r\n          if (_beautifier) {\r\n            // call the Beautifier if avaliable\r\n            text = _beautifier(text.replace(/^\\s*/, indentation), options) \r\n          } else {\r\n            // simply indent the string otherwise\r\n            const white = text.match(/^\\s*/)[0] \r\n            const _level = white.match(/[^\\n\\r]*$/)[0].split(multi_parser.indent_string).length - 1 \r\n            const reindent = multi_parser.get_full_indent(script_indent_level - _level) \r\n\r\n            text = text.replace(/^\\s*/, indentation)\r\n              .replace(/\\r\\n|\\r|\\n/g, '\\n' + reindent)\r\n              .replace(/\\s+$/, '') \r\n          }\r\n          if (text) {\r\n            multi_parser.print_token_raw(text) \r\n            multi_parser.print_newline(true, multi_parser.output) \r\n          }\r\n        }\r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      default:\r\n        // We should not be getting here but we don't want to drop input on the floor\r\n        // Just output the text and move on\r\n        if (multi_parser.token_text !== '') {\r\n          multi_parser.print_token(multi_parser.token_text) \r\n        }\r\n        break \r\n      }\r\n      multi_parser.last_token = multi_parser.token_type \r\n      multi_parser.last_text = multi_parser.token_text \r\n    }\r\n    let sweet_code = multi_parser.output.join('').replace(/[\\r\\n\\t ]+$/, '') \r\n    if (end_with_newline) {\r\n      sweet_code += '\\n' \r\n    }\r\n    return sweet_code \r\n  }\r\n\r\n  function css_beautify(source_text, options) {\r\n    const NESTED_AT_RULE = {\r\n      '@page': true,\r\n      '@font-face': true,\r\n      '@keyframes': true,\r\n      // also in CONDITIONAL_GROUP_RULE below\r\n      '@media': true,\r\n      '@supports': true,\r\n      '@document': true\r\n    } \r\n    const CONDITIONAL_GROUP_RULE = {\r\n      '@media': true,\r\n      '@supports': true,\r\n      '@document': true\r\n    } \r\n\r\n    options = options || {} \r\n    source_text = source_text || '' \r\n    // HACK: newline parsing inconsistent. This brute force normalizes the input.\r\n    source_text = source_text.replace(/\\r\\n|[\\r\\u2028\\u2029]/g, '\\n')\r\n\r\n    let indentSize = options.indent_size || 4 \r\n    let indentCharacter = options.indent_char || ' ' \r\n    const selectorSeparatorNewline = (options.selector_separator_newline === undefined) ? true : options.selector_separator_newline \r\n    const end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    const newline_between_rules = (options.newline_between_rules === undefined) ? true : options.newline_between_rules \r\n    let eol = options.eol ? options.eol : '\\n' \r\n\r\n    // compatibility\r\n    if (typeof indentSize === 'string') {\r\n      indentSize = parseInt(indentSize, 10) \r\n    }\r\n\r\n    if (options.indent_with_tabs) {\r\n      indentCharacter = '\\t' \r\n      indentSize = 1 \r\n    }\r\n\r\n    eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n')\r\n\r\n\r\n    // tokenizer\r\n    const whiteRe = /^\\s+$/ \r\n    const wordRe = /[\\w$\\-_]/ \r\n\r\n    let pos = -1,\r\n      ch \r\n    let parenLevel = 0 \r\n\r\n    function next() {\r\n      ch = source_text.charAt(++pos) \r\n      return ch || '' \r\n    }\r\n\r\n    function peek(skipWhitespace) {\r\n      let result = '' \r\n      const prev_pos = pos \r\n      if (skipWhitespace) {\r\n        eatWhitespace() \r\n      }\r\n      result = source_text.charAt(pos + 1) || '' \r\n      pos = prev_pos - 1 \r\n      next() \r\n      return result \r\n    }\r\n\r\n    function eatString(endChars) {\r\n      const start = pos \r\n      while (next()) {\r\n        if (ch === '\\\\') {\r\n          next() \r\n        } else if (endChars.indexOf(ch) !== -1) {\r\n          break \r\n        } else if (ch === '\\n') {\r\n          break \r\n        }\r\n      }\r\n      return source_text.substring(start, pos + 1) \r\n    }\r\n\r\n    function peekString(endChar) {\r\n      const prev_pos = pos \r\n      const str = eatString(endChar) \r\n      pos = prev_pos - 1 \r\n      next() \r\n      return str \r\n    }\r\n\r\n    function eatWhitespace() {\r\n      let result = '' \r\n      while (whiteRe.test(peek())) {\r\n        next() \r\n        result += ch \r\n      }\r\n      return result \r\n    }\r\n\r\n    function skipWhitespace() {\r\n      let result = '' \r\n      if (ch && whiteRe.test(ch)) {\r\n        result = ch \r\n      }\r\n      while (whiteRe.test(next())) {\r\n        result += ch \r\n      }\r\n      return result \r\n    }\r\n\r\n    function eatComment(singleLine) {\r\n      const start = pos \r\n      singleLine = peek() === '/' \r\n      next() \r\n      while (next()) {\r\n        if (!singleLine && ch === '*' && peek() === '/') {\r\n          next() \r\n          break \r\n        } else if (singleLine && ch === '\\n') {\r\n          return source_text.substring(start, pos) \r\n        }\r\n      }\r\n\r\n      return source_text.substring(start, pos) + ch \r\n    }\r\n\r\n\r\n    function lookBack(str) {\r\n      return source_text.substring(pos - str.length, pos).toLowerCase() ===\r\n                str \r\n    }\r\n\r\n    // Nested pseudo-class if we are insideRule\r\n    // and the next special character found opens\r\n    // a new block\r\n    function foundNestedPseudoClass() {\r\n      let openParen = 0 \r\n      for (let i = pos + 1;  i < source_text.length;  i++) {\r\n        const ch = source_text.charAt(i) \r\n        if (ch === '{') {\r\n          return true \r\n        } else if (ch === '(') {\r\n          // pseudoclasses can contain ()\r\n          openParen += 1 \r\n        } else if (ch === ')') {\r\n          if (openParen === 0) {\r\n            return false \r\n          }\r\n          openParen -= 1 \r\n        } else if (ch === ' ' || ch === '}') {\r\n          return false \r\n        }\r\n      }\r\n      return false \r\n    }\r\n\r\n    // printer\r\n    let basebaseIndentString = source_text.match(/^[\\t ]*/)[0] \r\n    const singleIndent = new Array(indentSize + 1).join(indentCharacter) \r\n    let indentLevel = 0 \r\n    let nestedLevel = 0 \r\n\r\n    function indent() {\r\n      indentLevel++ \r\n      basebaseIndentString += singleIndent \r\n    }\r\n\r\n    function outdent() {\r\n      indentLevel-- \r\n      basebaseIndentString = basebaseIndentString.slice(0, -indentSize) \r\n    }\r\n\r\n    const print = {} \r\n    print['{'] = function (ch) {\r\n      print.singleSpace() \r\n      output.push(ch) \r\n      print.newLine() \r\n    } \r\n    print['}'] = function (ch) {\r\n      print.newLine() \r\n      output.push(ch) \r\n      print.newLine() \r\n    } \r\n\r\n    print._lastCharWhitespace = function () {\r\n      return whiteRe.test(output[output.length - 1]) \r\n    } \r\n\r\n    print.newLine = function (keepWhitespace) {\r\n      if (output.length) {\r\n        if (!keepWhitespace && output[output.length - 1] !== '\\n') {\r\n          print.trim() \r\n        }\r\n\r\n        output.push('\\n') \r\n\r\n        if (basebaseIndentString) {\r\n          output.push(basebaseIndentString) \r\n        }\r\n      }\r\n    } \r\n    print.singleSpace = function () {\r\n      if (output.length && !print._lastCharWhitespace()) {\r\n        output.push(' ') \r\n      }\r\n    } \r\n\r\n    print.preserveSingleSpace = function () {\r\n      if (isAfterSpace) {\r\n        print.singleSpace() \r\n      }\r\n    } \r\n\r\n    print.trim = function () {\r\n      while (print._lastCharWhitespace()) {\r\n        output.pop() \r\n      }\r\n    } \r\n\r\n\r\n    const output = [] \r\n    /*_____________________--------------------_____________________*/\r\n\r\n    let insideRule = false \r\n    let insidePropertyValue = false \r\n    let enteringConditionalGroup = false \r\n    let top_ch = '' \r\n    let last_top_ch = '' \r\n    let isAfterSpace\r\n\r\n    while (true) {\r\n      const whitespace = skipWhitespace() \r\n      isAfterSpace = whitespace !== '' \r\n      const isAfterNewline = whitespace.indexOf('\\n') !== -1 \r\n      last_top_ch = top_ch \r\n      top_ch = ch \r\n\r\n      if (!ch) {\r\n        break \r\n      } else if (ch === '/' && peek() === '*') { /* css comment */\r\n        const header = indentLevel === 0 \r\n\r\n        if (isAfterNewline || header) {\r\n          print.newLine() \r\n        }\r\n\r\n        output.push(eatComment()) \r\n        print.newLine() \r\n        if (header) {\r\n          print.newLine(true) \r\n        }\r\n      } else if (ch === '/' && peek() === '/') { // single line comment\r\n        if (!isAfterNewline && last_top_ch !== '{') {\r\n          print.trim() \r\n        }\r\n        print.singleSpace() \r\n        output.push(eatComment()) \r\n        print.newLine() \r\n      } else if (ch === '@') {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n\r\n        // strip trailing space, if present, for hash property checks\r\n        let variableOrRule = peekString(': , {}()[]/=\\'\"') \r\n\r\n        if (variableOrRule.match(/[ :]$/)) {\r\n          // we have a variable or pseudo-class, add it and insert one space before continuing\r\n          next() \r\n          variableOrRule = eatString(': ').replace(/\\s$/, '') \r\n          output.push(variableOrRule) \r\n          print.singleSpace() \r\n        }\r\n\r\n        variableOrRule = variableOrRule.replace(/\\s$/, '')\r\n\r\n        // might be a nesting at-rule\r\n        if (variableOrRule in NESTED_AT_RULE) {\r\n          nestedLevel += 1 \r\n          if (variableOrRule in CONDITIONAL_GROUP_RULE) {\r\n            enteringConditionalGroup = true \r\n          }\r\n        }\r\n      } else if (ch === '#' && peek() === '{') {\r\n        print.preserveSingleSpace() \r\n        output.push(eatString('}')) \r\n      } else if (ch === '{') {\r\n        if (peek(true) === '}') {\r\n          eatWhitespace() \r\n          next() \r\n          print.singleSpace() \r\n          output.push('{}') \r\n          print.newLine() \r\n          if (newline_between_rules && indentLevel === 0) {\r\n            print.newLine(true) \r\n          }\r\n        } else {\r\n          indent() \r\n          print['{'](ch) \r\n          // when entering conditional groups, only rulesets are allowed\r\n          if (enteringConditionalGroup) {\r\n            enteringConditionalGroup = false \r\n            insideRule = (indentLevel > nestedLevel) \r\n          } else {\r\n            // otherwise, declarations are also allowed\r\n            insideRule = (indentLevel >= nestedLevel) \r\n          }\r\n        }\r\n      } else if (ch === '}') {\r\n        outdent() \r\n        print['}'](ch) \r\n        insideRule = false \r\n        insidePropertyValue = false \r\n        if (nestedLevel) {\r\n          nestedLevel-- \r\n        }\r\n        if (newline_between_rules && indentLevel === 0) {\r\n          print.newLine(true) \r\n        }\r\n      } else if (ch === ':') {\r\n        eatWhitespace() \r\n        if ((insideRule || enteringConditionalGroup) &&\r\n                    !(lookBack('&') || foundNestedPseudoClass())) {\r\n          // 'property: value' delimiter\r\n          // which could be in a conditional group query\r\n          insidePropertyValue = true \r\n          output.push(':') \r\n          print.singleSpace() \r\n        } else {\r\n          // sass/less parent reference don't use a space\r\n          // sass nested pseudo-class don't use a space\r\n          if (peek() === ':') {\r\n            // pseudo-element\r\n            next() \r\n            output.push('::') \r\n          } else {\r\n            // pseudo-class\r\n            output.push(':') \r\n          }\r\n        }\r\n      } else if (ch === '\"' || ch === '\\'') {\r\n        print.preserveSingleSpace() \r\n        output.push(eatString(ch)) \r\n      } else if (ch === ' ') {\r\n        insidePropertyValue = false \r\n        output.push(ch) \r\n        print.newLine() \r\n      } else if (ch === '(') { // may be a url\r\n        if (lookBack('url')) {\r\n          output.push(ch) \r\n          eatWhitespace() \r\n          if (next()) {\r\n            if (ch !== ')' && ch !== '\"' && ch !== '\\'') {\r\n              output.push(eatString(')')) \r\n            } else {\r\n              pos-- \r\n            }\r\n          }\r\n        } else {\r\n          parenLevel++ \r\n          print.preserveSingleSpace() \r\n          output.push(ch) \r\n          eatWhitespace() \r\n        }\r\n      } else if (ch === ')') {\r\n        output.push(ch) \r\n        parenLevel-- \r\n      } else if (ch === ',') {\r\n        output.push(ch) \r\n        eatWhitespace() \r\n        if (selectorSeparatorNewline && !insidePropertyValue && parenLevel < 1) {\r\n          print.newLine() \r\n        } else {\r\n          print.singleSpace() \r\n        }\r\n      } else if (ch === ']') {\r\n        output.push(ch) \r\n      } else if (ch === '[') {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n      } else if (ch === '=') { // no whitespace before or after\r\n        eatWhitespace()\r\n        ch = '=' \r\n        output.push(ch) \r\n      } else {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n      }\r\n    }\r\n\r\n\r\n    let sweetCode = '' \r\n    if (basebaseIndentString) {\r\n      sweetCode += basebaseIndentString \r\n    }\r\n\r\n    sweetCode += output.join('').replace(/[\\r\\n\\t ]+$/, '') \r\n\r\n    // establish end_with_newline\r\n    if (end_with_newline) {\r\n      sweetCode += '\\n' \r\n    }\r\n\r\n    if (eol != '\\n') {\r\n      sweetCode = sweetCode.replace(/[\\n]/g, eol) \r\n    }\r\n\r\n    return sweetCode \r\n  }\r\n\r\n  function in_array(what, arr) {\r\n    for (let i = 0 ; i < arr.length;  i += 1) {\r\n      if (arr[i] === what) {\r\n        return true \r\n      }\r\n    }\r\n    return false \r\n  }\r\n\r\n  function trim(s) {\r\n    return s.replace(/^\\s+|\\s+$/g, '') \r\n  }\r\n\r\n  function ltrim(s) {\r\n    return s.replace(/^\\s+/g, '') \r\n  }\r\n\r\n  function rtrim(s) {\r\n    return s.replace(/\\s+$/g, '') \r\n  }\r\n\r\n  function js_beautify(js_source_text, options) {\r\n    'use strict' \r\n    const beautifier = new Beautifier(js_source_text, options) \r\n    return beautifier.beautify() \r\n  }\r\n\r\n  const MODE = {\r\n    BlockStatement: 'BlockStatement', // 'BLOCK'\r\n    Statement: 'Statement', // 'STATEMENT'\r\n    ObjectLiteral: 'ObjectLiteral', // 'OBJECT',\r\n    ArrayLiteral: 'ArrayLiteral', //'[EXPRESSION]',\r\n    ForInitializer: 'ForInitializer', //'(FOR-EXPRESSION)',\r\n    Conditional: 'Conditional', //'(COND-EXPRESSION)',\r\n    Expression: 'Expression' //'(EXPRESSION)'\r\n  } \r\n\r\n  function Beautifier(js_source_text, options) {\r\n    'use strict' \r\n    let output\r\n    let tokens = [], token_pos \r\n    let Tokenizer \r\n    let current_token \r\n    let last_type, last_last_text, indent_string \r\n    let flags, previous_flags, flag_store \r\n    let prefix \r\n\r\n    let handlers, opt \r\n    let baseIndentString = '' \r\n\r\n    handlers = {\r\n      'TK_START_EXPR': handle_start_expr,\r\n      'TK_END_EXPR': handle_end_expr,\r\n      'TK_START_BLOCK': handle_start_block,\r\n      'TK_END_BLOCK': handle_end_block,\r\n      'TK_WORD': handle_word,\r\n      'TK_RESERVED': handle_word,\r\n      'TK_SEMICOLON': handle_semicolon,\r\n      'TK_STRING': handle_string,\r\n      'TK_EQUALS': handle_equals,\r\n      'TK_OPERATOR': handle_operator,\r\n      'TK_COMMA': handle_comma,\r\n      'TK_BLOCK_COMMENT': handle_block_comment,\r\n      'TK_COMMENT': handle_comment,\r\n      'TK_DOT': handle_dot,\r\n      'TK_UNKNOWN': handle_unknown,\r\n      'TK_EOF': handle_eof\r\n    } \r\n\r\n    function create_flags(flags_base, mode) {\r\n      let next_indent_level = 0 \r\n      if (flags_base) {\r\n        next_indent_level = flags_base.indentation_level \r\n        if (!output.just_added_newline() &&\r\n                    flags_base.line_indent_level > next_indent_level) {\r\n          next_indent_level = flags_base.line_indent_level \r\n        }\r\n      }\r\n\r\n      const next_flags = {\r\n        mode: mode,\r\n        parent: flags_base,\r\n        last_text: flags_base ? flags_base.last_text : '', // last token text\r\n        last_word: flags_base ? flags_base.last_word : '', // last 'TK_WORD' passed\r\n        declaration_statement: false,\r\n        declaration_assignment: false,\r\n        multiline_frame: false,\r\n        if_block: false,\r\n        else_block: false,\r\n        do_block: false,\r\n        do_while: false,\r\n        in_case_statement: false, // switch(..){ INSIDE HERE }\r\n        in_case: false, // we're on the exact line with \"case 0:\"\r\n        case_body: false, // the indented case-action block\r\n        indentation_level: next_indent_level,\r\n        line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\r\n        start_line_index: output.get_line_number(),\r\n        ternary_depth: 0\r\n      } \r\n      return next_flags \r\n    }\r\n\r\n    // Some interpreters have unexpected results with foo = baz || bar \r\n    options = options ? options : {} \r\n    opt = {} \r\n\r\n    // compatibility\r\n    if (options.braces_on_own_line !== undefined) { //graceful handling of deprecated option\r\n      opt.brace_style = options.braces_on_own_line ? 'expand' : 'collapse' \r\n    }\r\n    opt.brace_style = options.brace_style ? options.brace_style : (opt.brace_style ? opt.brace_style : 'collapse') \r\n\r\n    // graceful handling of deprecated option\r\n    if (opt.brace_style === 'expand-strict') {\r\n      opt.brace_style = 'expand' \r\n    }\r\n\r\n\r\n    opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4 \r\n    opt.indent_char = options.indent_char ? options.indent_char : ' ' \r\n    opt.eol = options.eol ? options.eol : '\\n' \r\n    opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines \r\n    opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods \r\n    opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10) \r\n    opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren \r\n    opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren \r\n    opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy \r\n    opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function \r\n    opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation \r\n    opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional \r\n    opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings \r\n    opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10) \r\n    opt.e4x = (options.e4x === undefined) ? false : options.e4x \r\n    opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first \r\n\r\n    // For testing of beautify ignore:start directive\r\n    opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw \r\n\r\n    // force opt.space_after_anon_function to true if opt.jslint_happy\r\n    if (opt.jslint_happy) {\r\n      opt.space_after_anon_function = true \r\n    }\r\n\r\n    if (options.indent_with_tabs) {\r\n      opt.indent_char = '\\t' \r\n      opt.indent_size = 1 \r\n    }\r\n\r\n    opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n')\r\n\r\n    //----------------------------------\r\n    indent_string = '' \r\n    while (opt.indent_size > 0) {\r\n      indent_string += opt.indent_char \r\n      opt.indent_size -= 1 \r\n    }\r\n\r\n    let preindent_index = 0 \r\n    if (js_source_text && js_source_text.length) {\r\n      while ((js_source_text.charAt(preindent_index) === ' ' ||\r\n                js_source_text.charAt(preindent_index) === '\\t')) {\r\n        baseIndentString += js_source_text.charAt(preindent_index) \r\n        preindent_index += 1 \r\n      }\r\n      js_source_text = js_source_text.substring(preindent_index) \r\n    }\r\n\r\n    last_type = 'TK_START_BLOCK'  // last token type\r\n    last_last_text = ''  // pre-last token text\r\n    output = new Output(indent_string, baseIndentString) \r\n\r\n    // If testing the ignore directive, start with output disable set to true\r\n    output.raw = opt.test_output_raw \r\n\r\n\r\n    // Stack of parsing/formatting states, including MODE.\r\n    // We tokenize, parse, and output in an almost purely a forward-only stream of token input\r\n    // and formatted output.  This makes the beautifier less accurate than full parsers\r\n    // but also far more tolerant of syntax errors.\r\n    //\r\n    // For example, the default mode is MODE.BlockStatement. If we see a '{' we push a new frame of type\r\n    // MODE.BlockStatement on the the stack, even though it could be object literal.  If we later\r\n    // encounter a \":\", we'll switch to to MODE.ObjectLiteral.  If we then see a \" \",\r\n    // most full parsers would die, but the beautifier gracefully falls back to\r\n    // MODE.BlockStatement and continues on.\r\n    flag_store = [] \r\n    set_mode(MODE.BlockStatement) \r\n\r\n    this.beautify = function () {\r\n\r\n      /*jshint onevar:true */\r\n      let local_token, sweet_code \r\n      Tokenizer = new tokenizer(js_source_text, opt, indent_string) \r\n      tokens = Tokenizer.tokenize() \r\n      token_pos = 0 \r\n\r\n      while (local_token = get_token()) {\r\n        for (let i = 0;  i < local_token.comments_before.length;  i++) {\r\n          // The cleanest handling of inline comments is to treat them as though they aren't there.\r\n          // Just continue formatting and the behavior should be logical.\r\n          // Also ignore unknown tokens.  Again, this should result in better behavior.\r\n          handle_token(local_token.comments_before[i]) \r\n        }\r\n        handle_token(local_token) \r\n\r\n        last_last_text = flags.last_text \r\n        last_type = local_token.type \r\n        flags.last_text = local_token.text \r\n\r\n        token_pos += 1 \r\n      }\r\n\r\n      sweet_code = output.get_code() \r\n      if (opt.end_with_newline) {\r\n        sweet_code += '\\n' \r\n      }\r\n\r\n      if (opt.eol != '\\n') {\r\n        sweet_code = sweet_code.replace(/[\\n]/g, opt.eol) \r\n      }\r\n\r\n      return sweet_code \r\n    } \r\n\r\n    function handle_token(local_token) {\r\n      let { newlines } = local_token \r\n      const keep_whitespace = opt.keep_array_indentation && is_array(flags.mode) \r\n\r\n      if (keep_whitespace) {\r\n        for (let i = 0;  i < newlines;  i += 1) {\r\n          print_newline(i > 0) \r\n        }\r\n      } else {\r\n        if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\r\n          newlines = opt.max_preserve_newlines \r\n        }\r\n\r\n        if (opt.preserve_newlines) {\r\n          if (local_token.newlines > 1) {\r\n            print_newline() \r\n            for (let i = 1;  i < newlines;  i += 1) {\r\n              print_newline(true) \r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      current_token = local_token \r\n      handlers[current_token.type]() \r\n    }\r\n\r\n    // we could use just string.split, but\r\n    // IE doesn't like returning empty strings\r\n    function split_newlines(s) {\r\n      //return s.split(/\\x0d\\x0a|\\x0a/) \r\n      let idx\r\n      s = s.replace(/\\x0d/g, '') \r\n      const out = []\r\n      idx = s.indexOf('\\n') \r\n      while (idx !== -1) {\r\n        out.push(s.substring(0, idx)) \r\n        s = s.substring(idx + 1) \r\n        idx = s.indexOf('\\n') \r\n      }\r\n      if (s.length) {\r\n        out.push(s) \r\n      }\r\n      return out \r\n    }\r\n\r\n    function allow_wrap_or_preserved_newline(force_linewrap) {\r\n      force_linewrap = (force_linewrap === undefined) ? false : force_linewrap \r\n\r\n      // Never wrap the first token on a line\r\n      if (output.just_added_newline()) {\r\n        return\r\n      }\r\n\r\n      if ((opt.preserve_newlines && current_token.wanted_newline) || force_linewrap) {\r\n        print_newline(false, true) \r\n      } else if (opt.wrap_line_length) {\r\n        const proposed_line_length = output.current_line.get_character_count() + current_token.text.length +\r\n                    (output.space_before_token ? 1 : 0) \r\n        if (proposed_line_length >= opt.wrap_line_length) {\r\n          print_newline(false, true) \r\n        }\r\n      }\r\n    }\r\n\r\n    function print_newline(force_newline, preserve_statement_flags) {\r\n      if (!preserve_statement_flags) {\r\n        if (flags.last_text !== ' ' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\r\n          while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\r\n            restore_mode() \r\n          }\r\n        }\r\n      }\r\n\r\n      if (output.add_new_line(force_newline)) {\r\n        flags.multiline_frame = true \r\n      }\r\n    }\r\n\r\n    function print_token_line_indentation() {\r\n      if (output.just_added_newline()) {\r\n        if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\r\n          output.current_line.push(current_token.whitespace_before) \r\n          output.space_before_token = false \r\n        } else if (output.set_indent(flags.indentation_level)) {\r\n          flags.line_indent_level = flags.indentation_level \r\n        }\r\n      }\r\n    }\r\n\r\n    function print_token(printable_token) {\r\n      if (output.raw) {\r\n        output.add_raw_token(current_token)\r\n        return \r\n      }\r\n\r\n      if (opt.comma_first && last_type === 'TK_COMMA'\r\n                && output.just_added_newline()) {\r\n        if (output.previous_line.last() === ',') {\r\n          output.previous_line.pop() \r\n          print_token_line_indentation() \r\n          output.add_token(',') \r\n          output.space_before_token = true \r\n        }\r\n      }\r\n\r\n      printable_token = printable_token || current_token.text \r\n      print_token_line_indentation() \r\n      output.add_token(printable_token) \r\n    }\r\n\r\n    function indent() {\r\n      flags.indentation_level += 1 \r\n    }\r\n\r\n    function deindent() {\r\n      if (flags.indentation_level > 0 &&\r\n                ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level))\r\n        flags.indentation_level -= 1 \r\n    }\r\n\r\n    function set_mode(mode) {\r\n      if (flags) {\r\n        flag_store.push(flags) \r\n        previous_flags = flags \r\n      } else {\r\n        previous_flags = create_flags(null, mode) \r\n      }\r\n\r\n      flags = create_flags(previous_flags, mode) \r\n    }\r\n\r\n    function is_array(mode) {\r\n      return mode === MODE.ArrayLiteral \r\n    }\r\n\r\n    function is_expression(mode) {\r\n      return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]) \r\n    }\r\n\r\n    function restore_mode() {\r\n      if (flag_store.length > 0) {\r\n        previous_flags = flags \r\n        flags = flag_store.pop() \r\n        if (previous_flags.mode === MODE.Statement) {\r\n          output.remove_redundant_indentation(previous_flags) \r\n        }\r\n      }\r\n    }\r\n\r\n    function start_of_object_property() {\r\n      return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && (\r\n        (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))) \r\n    }\r\n\r\n    function start_of_statement() {\r\n      if (\r\n        (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const']) && current_token.type === 'TK_WORD') ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'do') ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'return' && !current_token.wanted_newline) ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'else' && !(current_token.type === 'TK_RESERVED' && current_token.text === 'if')) ||\r\n                (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) ||\r\n                (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement\r\n                    && !flags.in_case\r\n                    && !(current_token.text === '--' || current_token.text === '++')\r\n                    && last_last_text !== 'function'\r\n                    && current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') ||\r\n                (flags.mode === MODE.ObjectLiteral && (\r\n                  (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))\r\n      ) {\r\n\r\n        set_mode(MODE.Statement) \r\n        indent() \r\n\r\n        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const']) && current_token.type === 'TK_WORD') {\r\n          flags.declaration_statement = true \r\n        }\r\n\r\n        // Issue #276:\r\n        // If starting a new statement with [if, for, while, do], push to a new line.\r\n        // if (a) if (b) if(c) d()  else e()  else f() \r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline(\r\n            current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while'])) \r\n        }\r\n\r\n        return true \r\n      }\r\n      return false \r\n    }\r\n\r\n    function all_lines_start_with(lines, c) {\r\n      for (let i = 0;  i < lines.length;  i++) {\r\n        const line = trim(lines[i]) \r\n        if (line.charAt(0) !== c) {\r\n          return false \r\n        }\r\n      }\r\n      return true \r\n    }\r\n\r\n    function each_line_matches_indent(lines, indent) {\r\n      let i = 0,\r\n        len = lines.length,\r\n        line \r\n      for ( ; i < len;  i++) {\r\n        line = lines[i] \r\n        // allow empty lines to pass through\r\n        if (line && line.indexOf(indent) !== 0) {\r\n          return false \r\n        }\r\n      }\r\n      return true \r\n    }\r\n\r\n    function is_special_word(word) {\r\n      return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']) \r\n    }\r\n\r\n    function get_token(offset) {\r\n      const index = token_pos + (offset || 0) \r\n      return (index < 0 || index >= tokens.length) ? null : tokens[index] \r\n    }\r\n\r\n    function handle_start_expr() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      let next_mode = MODE.Expression \r\n      if (current_token.text === '[') {\r\n\r\n        if (last_type === 'TK_WORD' || flags.last_text === ')') {\r\n          // this is array index specifier, break immediately\r\n          // a[x], fn()[x]\r\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\r\n            output.space_before_token = true \r\n          }\r\n          set_mode(next_mode) \r\n          print_token() \r\n          indent() \r\n          if (opt.space_in_paren) {\r\n            output.space_before_token = true \r\n          }\r\n          return \r\n        }\r\n\r\n        next_mode = MODE.ArrayLiteral \r\n        if (is_array(flags.mode)) {\r\n          if (flags.last_text === '[' ||\r\n                        (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\r\n            // ], [ goes to new line\r\n            // }, [ goes to new line\r\n            if (!opt.keep_array_indentation) {\r\n              print_newline() \r\n            }\r\n          }\r\n        }\r\n\r\n      } else {\r\n        if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\r\n          next_mode = MODE.ForInitializer \r\n        } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\r\n          next_mode = MODE.Conditional \r\n        } else {\r\n          // next_mode = MODE.Expression \r\n        }\r\n      }\r\n\r\n      if (flags.last_text === ' ' || last_type === 'TK_START_BLOCK') {\r\n        print_newline() \r\n      } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\r\n        // TODO: Consider whether forcing this is required.  Review failing tests when removed.\r\n        allow_wrap_or_preserved_newline(current_token.wanted_newline) \r\n        // do nothing on (( and )( and ][ and ]( and .(\r\n      } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\r\n        output.space_before_token = true \r\n      } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) ||\r\n                (flags.last_text === '*' && last_last_text === 'function')) {\r\n        // function() vs function ()\r\n        if (opt.space_after_anon_function) {\r\n          output.space_before_token = true \r\n        }\r\n      } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\r\n        if (opt.space_before_conditional) {\r\n          output.space_before_token = true \r\n        }\r\n      }\r\n\r\n      // Should be a space between await and an IIFE\r\n      if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\r\n        output.space_before_token = true \r\n      }\r\n\r\n      // Support of this kind of newline preservation.\r\n      // a = (b &&\r\n      //     (c || d)) \r\n      if (current_token.text === '(') {\r\n        if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n          if (!start_of_object_property()) {\r\n            allow_wrap_or_preserved_newline() \r\n          }\r\n        }\r\n      }\r\n\r\n      set_mode(next_mode) \r\n      print_token() \r\n      if (opt.space_in_paren) {\r\n        output.space_before_token = true \r\n      }\r\n\r\n      // In all cases, if we newline while inside an expression it should be indented.\r\n      indent() \r\n    }\r\n\r\n    function handle_end_expr() {\r\n      // statements inside expressions are not valid syntax, but...\r\n      // statements must all be closed when their container closes\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n\r\n      if (flags.multiline_frame) {\r\n        allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation) \r\n      }\r\n\r\n      if (opt.space_in_paren) {\r\n        if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\r\n          // () [] no inner space in empty parens like these, ever, ref #320\r\n          output.trim() \r\n          output.space_before_token = false \r\n        } else {\r\n          output.space_before_token = true \r\n        }\r\n      }\r\n      if (current_token.text === ']' && opt.keep_array_indentation) {\r\n        print_token() \r\n        restore_mode() \r\n      } else {\r\n        restore_mode() \r\n        print_token() \r\n      }\r\n      output.remove_redundant_indentation(previous_flags) \r\n\r\n      // do {} while () // no statement required after\r\n      if (flags.do_while && previous_flags.mode === MODE.Conditional) {\r\n        previous_flags.mode = MODE.Expression \r\n        flags.do_block = false \r\n        flags.do_while = false \r\n\r\n      }\r\n    }\r\n\r\n    function handle_start_block() {\r\n      // Check if this is should be treated as a ObjectLiteral\r\n      const next_token = get_token(1)\r\n      const second_token = get_token(2)\r\n      if (second_token && (\r\n        (second_token.text === ':' && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED']))\r\n                || (in_array(next_token.text, ['get', 'set']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED']))\r\n      )) {\r\n        // We don't support TypeScript,but we didn't break it for a very long time.\r\n        // We'll try to keep not breaking it.\r\n        if (!in_array(last_last_text, ['class', 'interface'])) {\r\n          set_mode(MODE.ObjectLiteral) \r\n        } else {\r\n          set_mode(MODE.BlockStatement) \r\n        }\r\n      } else {\r\n        set_mode(MODE.BlockStatement) \r\n      }\r\n\r\n      const empty_braces = !next_token.comments_before.length && next_token.text === '}' \r\n      const empty_anonymous_function = empty_braces && flags.last_word === 'function' &&\r\n                last_type === 'TK_END_EXPR' \r\n\r\n      if (opt.brace_style === 'expand' ||\r\n                (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n        if (last_type !== 'TK_OPERATOR' &&\r\n                    (empty_anonymous_function ||\r\n                        last_type === 'TK_EQUALS' ||\r\n                        (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\r\n          output.space_before_token = true \r\n        } else {\r\n          print_newline(false, true) \r\n        }\r\n      } else { // collapse\r\n        if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\r\n          if (last_type === 'TK_START_BLOCK') {\r\n            print_newline() \r\n          } else {\r\n            output.space_before_token = true \r\n          }\r\n        } else {\r\n          // if TK_OPERATOR or TK_START_EXPR\r\n          if (is_array(previous_flags.mode) && flags.last_text === ',') {\r\n            if (last_last_text === '}') {\r\n              // }, { in array context\r\n              output.space_before_token = true \r\n            } else {\r\n              print_newline()  // [a, b, c, {\r\n            }\r\n          }\r\n        }\r\n      }\r\n      print_token() \r\n      indent() \r\n    }\r\n\r\n    function handle_end_block() {\r\n      // statements must all be closed when their container closes\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n      const empty_braces = last_type === 'TK_START_BLOCK' \r\n\r\n      if (opt.brace_style === 'expand') {\r\n        if (!empty_braces) {\r\n          print_newline() \r\n        }\r\n      } else {\r\n        // skip {}\r\n        if (!empty_braces) {\r\n          if (is_array(flags.mode) && opt.keep_array_indentation) {\r\n            // we REALLY need a newline here, but newliner would skip that\r\n            opt.keep_array_indentation = false \r\n            print_newline() \r\n            opt.keep_array_indentation = true \r\n\r\n          } else {\r\n            print_newline() \r\n          }\r\n        }\r\n      }\r\n      restore_mode() \r\n      print_token() \r\n    }\r\n\r\n    function handle_word() {\r\n      if (current_token.type === 'TK_RESERVED' && flags.mode !== MODE.ObjectLiteral &&\r\n                in_array(current_token.text, ['set', 'get'])) {\r\n        current_token.type = 'TK_WORD' \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && flags.mode === MODE.ObjectLiteral) {\r\n        const next_token = get_token(1) \r\n        if (next_token.text === ':') {\r\n          current_token.type = 'TK_WORD' \r\n        }\r\n      }\r\n\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      } else if (current_token.wanted_newline && !is_expression(flags.mode) &&\r\n                (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) &&\r\n                last_type !== 'TK_EQUALS' &&\r\n                (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const', 'set', 'get'])))) {\r\n\r\n        print_newline() \r\n      }\r\n\r\n      if (flags.do_block && !flags.do_while) {\r\n        if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\r\n          // do {} ## while ()\r\n          output.space_before_token = true \r\n          print_token() \r\n          output.space_before_token = true \r\n          flags.do_while = true \r\n          return \r\n        } else {\r\n          // do {} should always have while as the next word.\r\n          // if we don't see the expected while, recover\r\n          print_newline() \r\n          flags.do_block = false \r\n        }\r\n      }\r\n\r\n      // if may be followed by else, or not\r\n      // Bare/inline ifs are tricky\r\n      // Need to unwind the modes correctly: if (a) if (b) c()  else d()  else e() \r\n      if (flags.if_block) {\r\n        if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\r\n          flags.else_block = true \r\n        } else {\r\n          while (flags.mode === MODE.Statement) {\r\n            restore_mode() \r\n          }\r\n          flags.if_block = false \r\n          flags.else_block = false \r\n        }\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\r\n        print_newline() \r\n        if (flags.case_body || opt.jslint_happy) {\r\n          // switch cases following one another\r\n          deindent() \r\n          flags.case_body = false \r\n        }\r\n        print_token() \r\n        flags.in_case = true \r\n        flags.in_case_statement = true \r\n        return \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\r\n        if (in_array(flags.last_text, ['}', ' ']) || (output.just_added_newline() && !in_array(flags.last_text, ['[', '{', ':', '=', ',']))) {\r\n          // make sure there is a nice clean space of at least one blank line\r\n          // before a new function definition\r\n          if (!output.just_added_blankline() && !current_token.comments_before.length) {\r\n            print_newline() \r\n            print_newline(true) \r\n          }\r\n        }\r\n        if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\r\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\r\n            output.space_before_token = true \r\n          } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\r\n            output.space_before_token = true \r\n          } else {\r\n            print_newline() \r\n          }\r\n        } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\r\n          // foo = function\r\n          output.space_before_token = true \r\n        } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {\r\n          // (function\r\n        } else {\r\n          print_newline() \r\n        }\r\n      }\r\n\r\n      if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['function', 'get', 'set'])) {\r\n        print_token() \r\n        flags.last_word = current_token.text \r\n        return \r\n      }\r\n\r\n      prefix = 'NONE' \r\n\r\n      if (last_type === 'TK_END_BLOCK') {\r\n        if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally']))) {\r\n          prefix = 'NEWLINE' \r\n        } else {\r\n          if (opt.brace_style === 'expand' ||\r\n                        opt.brace_style === 'end-expand' ||\r\n                        (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n            prefix = 'NEWLINE' \r\n          } else {\r\n            prefix = 'SPACE' \r\n            output.space_before_token = true \r\n          }\r\n        }\r\n      } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\r\n        // TODO: Should this be for STATEMENT as well?\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\r\n        prefix = 'SPACE' \r\n      } else if (last_type === 'TK_STRING') {\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' ||\r\n                (flags.last_text === '*' && last_last_text === 'function')) {\r\n        prefix = 'SPACE' \r\n      } else if (last_type === 'TK_START_BLOCK') {\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_END_EXPR') {\r\n        output.space_before_token = true \r\n        prefix = 'NEWLINE' \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\r\n        if (flags.last_text === 'else' || flags.last_text === 'export') {\r\n          prefix = 'SPACE' \r\n        } else {\r\n          prefix = 'NEWLINE' \r\n        }\r\n\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\r\n        if (last_type !== 'TK_END_BLOCK' ||\r\n                    opt.brace_style === 'expand' ||\r\n                    opt.brace_style === 'end-expand' ||\r\n                    (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n          print_newline() \r\n        } else {\r\n          output.trim(true) \r\n          const line = output.current_line \r\n          // If we trimmed and there's something other than a close block before us\r\n          // put a newline back in.  Handles '} // comment' scenario.\r\n          if (line.last() !== '}') {\r\n            print_newline() \r\n          }\r\n          output.space_before_token = true \r\n        }\r\n      } else if (prefix === 'NEWLINE') {\r\n        if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n          // no newline between 'return nnn'\r\n          output.space_before_token = true \r\n        } else if (last_type !== 'TK_END_EXPR') {\r\n          if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['const', 'let', 'const']))) && flags.last_text !== ':') {\r\n            // no need to force newline on 'const': for (const x = 0...)\r\n            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\r\n              // no newline for } else if {\r\n              output.space_before_token = true \r\n            } else {\r\n              print_newline() \r\n            }\r\n          }\r\n        } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\r\n          print_newline() \r\n        }\r\n      } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\r\n        print_newline()  // }, in lists get a newline treatment\r\n      } else if (prefix === 'SPACE') {\r\n        output.space_before_token = true \r\n      }\r\n      print_token() \r\n      flags.last_word = current_token.text \r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'do') {\r\n        flags.do_block = true \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'if') {\r\n        flags.if_block = true \r\n      }\r\n    }\r\n\r\n    function handle_semicolon() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n        // Semicolon can be the start (and end) of a statement\r\n        output.space_before_token = false \r\n      }\r\n      while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\r\n        restore_mode() \r\n      }\r\n      print_token() \r\n    }\r\n\r\n    function handle_string() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n        // One difference - strings want at least a space before\r\n        output.space_before_token = true \r\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\r\n        output.space_before_token = true \r\n      } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      } else {\r\n        print_newline() \r\n      }\r\n      print_token() \r\n    }\r\n\r\n    function handle_equals() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (flags.declaration_statement) {\r\n        // just got an '=' in a const-line, different formatting/line-breaking, etc will now be done\r\n        flags.declaration_assignment = true \r\n      }\r\n      output.space_before_token = true \r\n      print_token() \r\n      output.space_before_token = true \r\n    }\r\n\r\n    function handle_comma() {\r\n      if (flags.declaration_statement) {\r\n        if (is_expression(flags.parent.mode)) {\r\n          // do not break on comma, for(const a = 1, b = 2)\r\n          flags.declaration_assignment = false \r\n        }\r\n\r\n        print_token() \r\n\r\n        if (flags.declaration_assignment) {\r\n          flags.declaration_assignment = false \r\n          print_newline(false, true) \r\n        } else {\r\n          output.space_before_token = true \r\n          // for comma-first, we want to allow a newline before the comma\r\n          // to turn into a newline after the comma, which we will fixup later\r\n          if (opt.comma_first) {\r\n            allow_wrap_or_preserved_newline() \r\n          }\r\n        }\r\n        return \r\n      }\r\n\r\n      print_token() \r\n      if (flags.mode === MODE.ObjectLiteral ||\r\n                (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\r\n        if (flags.mode === MODE.Statement) {\r\n          restore_mode() \r\n        }\r\n        print_newline() \r\n      } else {\r\n        // EXPR or DO_BLOCK\r\n        output.space_before_token = true \r\n        // for comma-first, we want to allow a newline before the comma\r\n        // to turn into a newline after the comma, which we will fixup later\r\n        if (opt.comma_first) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    function handle_operator() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n        // \"return\" had a special handling in TK_WORD. Now we need to return the favor\r\n        output.space_before_token = true \r\n        print_token() \r\n        return \r\n      }\r\n\r\n      // hack for actionscript's import .* \r\n      if (current_token.text === '*' && last_type === 'TK_DOT') {\r\n        print_token() \r\n        return \r\n      }\r\n\r\n      if (current_token.text === ':' && flags.in_case) {\r\n        flags.case_body = true \r\n        indent() \r\n        print_token() \r\n        print_newline() \r\n        flags.in_case = false \r\n        return \r\n      }\r\n\r\n      if (current_token.text === '::') {\r\n        // no spaces around exotic namespacing syntax operator\r\n        print_token() \r\n        return \r\n      }\r\n\r\n      // Allow line wrapping between operators\r\n      if (last_type === 'TK_OPERATOR') {\r\n        allow_wrap_or_preserved_newline() \r\n      }\r\n\r\n      let space_before = true \r\n      let space_after = true \r\n\r\n      if (in_array(current_token.text, ['--', '++', '!', '~']) || (in_array(current_token.text, ['-', '+']) && (in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) || in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === ','))) {\r\n        // unary operators (and binary +/- pretending to be unary) special cases\r\n\r\n        space_before = false \r\n        space_after = false \r\n\r\n        // http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1\r\n        // if there is a newline between -- or ++ and anything else we should preserve it.\r\n        if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\r\n          print_newline(false, true) \r\n        }\r\n\r\n        if (flags.last_text === ' ' && is_expression(flags.mode)) {\r\n          // for (   ++i)\r\n          //        ^^^\r\n          space_before = true \r\n        }\r\n\r\n        if (last_type === 'TK_RESERVED') {\r\n          space_before = true \r\n        } else if (last_type === 'TK_END_EXPR') {\r\n          space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++')) \r\n        } else if (last_type === 'TK_OPERATOR') {\r\n          // a++ + ++b \r\n          // a - -b\r\n          space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']) \r\n          // + and - are not unary when preceeded by -- or ++ operator\r\n          // a-- + b\r\n          // a * +b\r\n          // a - -b\r\n          if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\r\n            space_after = true \r\n          }\r\n        }\r\n\r\n        if ((flags.mode === MODE.BlockStatement || flags.mode === MODE.Statement) && (flags.last_text === '{' || flags.last_text === ' ')) {\r\n          // { foo  --i }\r\n          // foo()  --bar \r\n          print_newline() \r\n        }\r\n      } else if (current_token.text === ':') {\r\n        if (flags.ternary_depth === 0) {\r\n          // Colon is invalid javascript outside of ternary and object, but do our best to guess what was meant.\r\n          space_before = false \r\n        } else {\r\n          flags.ternary_depth -= 1 \r\n        }\r\n      } else if (current_token.text === '?') {\r\n        flags.ternary_depth += 1 \r\n      } else if (current_token.text === '*' && last_type === 'TK_RESERVED' && flags.last_text === 'function') {\r\n        space_before = false \r\n        space_after = false \r\n      }\r\n      output.space_before_token = output.space_before_token || space_before \r\n      print_token() \r\n      output.space_before_token = space_after \r\n    }\r\n\r\n    function handle_block_comment() {\r\n      if (output.raw) {\r\n        output.add_raw_token(current_token)\r\n        if (current_token.directives && current_token.directives['preserve'] === 'end') {\r\n          // If we're testing the raw output behavior, do not allow a directive to turn it off.\r\n          if (!opt.test_output_raw) {\r\n            output.raw = false \r\n          }\r\n        }\r\n        return \r\n      }\r\n\r\n      if (current_token.directives) {\r\n        print_newline(false, true) \r\n        print_token() \r\n        if (current_token.directives['preserve'] === 'start') {\r\n          output.raw = true \r\n        }\r\n        print_newline(false, true) \r\n        return \r\n      }\r\n\r\n      // inline block\r\n      if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\r\n        output.space_before_token = true \r\n        print_token() \r\n        output.space_before_token = true \r\n        return \r\n      }\r\n\r\n      const lines = split_newlines(current_token.text) \r\n      let j  // iterator for this case\r\n      let javadoc = false \r\n      let starless = false \r\n      const { whitespace_before : lastIndent } = current_token \r\n      const { length : lastIndentLength } = lastIndent \r\n\r\n      // block comment starts with a new line\r\n      print_newline(false, true) \r\n      if (lines.length > 1) {\r\n        if (all_lines_start_with(lines.slice(1), '*')) {\r\n          javadoc = true \r\n        }\r\n        else if (each_line_matches_indent(lines.slice(1), lastIndent)) {\r\n          starless = true \r\n        }\r\n      }\r\n\r\n      // first line always indented\r\n      print_token(lines[0]) \r\n      for (j = 1;  j < lines.length;  j++) {\r\n        print_newline(false, true) \r\n        if (javadoc) {\r\n          // javadoc: reformat and re-indent\r\n          print_token(` ${ltrim(lines[j])}`) \r\n        } else if (starless && lines[j].length > lastIndentLength) {\r\n          // starless: re-indent non-empty content, avoiding trim\r\n          print_token(lines[j].substring(lastIndentLength)) \r\n        } else {\r\n          // normal comments output raw\r\n          output.add_token(lines[j]) \r\n        }\r\n      }\r\n\r\n      // for comments of more than one line, make sure there's a new line after\r\n      print_newline(false, true) \r\n    }\r\n\r\n    function handle_comment() {\r\n      if (current_token.wanted_newline) {\r\n        print_newline(false, true) \r\n      } else {\r\n        output.trim(true) \r\n      }\r\n\r\n      output.space_before_token = true \r\n      print_token() \r\n      print_newline(false, true) \r\n    }\r\n\r\n    function handle_dot() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n        output.space_before_token = true \r\n      } else {\r\n        // allow preserved newlines before dots in general\r\n        // force newlines on dots after close paren when break_chained - for bar().baz()\r\n        allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods) \r\n      }\r\n\r\n      print_token() \r\n    }\r\n\r\n    function handle_unknown() {\r\n      print_token() \r\n\r\n      if (current_token.text[current_token.text.length - 1] === '\\n') {\r\n        print_newline() \r\n      }\r\n    }\r\n\r\n    function handle_eof() {\r\n      // Unwind any open statements\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  function OutputLine(parent) {\r\n    let _character_count = 0 \r\n    // use indent_count as a marker for lines that have preserved indentation\r\n    let _indent_count = -1 \r\n\r\n    const _items = [] \r\n    let _empty = true \r\n\r\n    this.set_indent = function (level) {\r\n      _character_count = parent.baseIndentLength + level * parent.indent_length\r\n      _indent_count = level \r\n    }\r\n\r\n    this.get_character_count = function () {\r\n      return _character_count \r\n    }\r\n\r\n    this.is_empty = function () {\r\n      return _empty \r\n    }\r\n\r\n    this.last = function () {\r\n      if (!this._empty) {\r\n        return _items[_items.length - 1] \r\n      } else {\r\n        return null \r\n      }\r\n    }\r\n\r\n    this.push = function (input) {\r\n      _items.push(input) \r\n      _character_count += input.length \r\n      _empty = false \r\n    }\r\n\r\n    this.pop = function () {\r\n      let item = null \r\n      if (!_empty) {\r\n        item = _items.pop() \r\n        _character_count -= item.length \r\n        _empty = _items.length === 0 \r\n      }\r\n      return item \r\n    }\r\n\r\n    this.remove_indent = function () {\r\n      if (_indent_count > 0) {\r\n        _indent_count -= 1 \r\n        _character_count -= parent.indent_length\r\n      }\r\n    }\r\n\r\n    this.trim = function () {\r\n      while (this.last() === ' ') {\r\n        _items.pop() \r\n        _character_count -= 1 \r\n      }\r\n      _empty = _items.length === 0 \r\n    }\r\n\r\n    this.toString = function () {\r\n      let result = '' \r\n      if (!this._empty) {\r\n        if (_indent_count >= 0) {\r\n          result = parent.indent_cache[_indent_count] \r\n        }\r\n        result += _items.join('')\r\n      }\r\n      return result \r\n    }\r\n  }\r\n\r\n  function Output(indent_string, baseIndentString) {\r\n    baseIndentString = baseIndentString || '' \r\n    this.indent_cache = [baseIndentString] \r\n    this.baseIndentLength = baseIndentString.length \r\n    this.indent_length = indent_string.length \r\n    this.raw = false \r\n\r\n    const lines = [] \r\n    this.baseIndentString = baseIndentString \r\n    this.indent_string = indent_string \r\n    this.previous_line = null \r\n    this.current_line = null \r\n    this.space_before_token = false \r\n\r\n    this.add_outputline = function () {\r\n      this.previous_line = this.current_line \r\n      this.current_line = new OutputLine(this) \r\n      lines.push(this.current_line) \r\n    }\r\n\r\n    // initialize\r\n    this.add_outputline() \r\n\r\n\r\n    this.get_line_number = function () {\r\n      return lines.length \r\n    }\r\n\r\n    // Using object instead of string to allow for later expansion of info about each line\r\n    this.add_new_line = function (force_newline) {\r\n      if (this.get_line_number() === 1 && this.just_added_newline()) {\r\n        return false  // no newline on start of file\r\n      }\r\n\r\n      if (force_newline || !this.just_added_newline()) {\r\n        if (!this.raw) {\r\n          this.add_outputline() \r\n        }\r\n        return true \r\n      }\r\n\r\n      return false \r\n    }\r\n\r\n    this.get_code = function () {\r\n      const sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '') \r\n      return sweet_code \r\n    }\r\n\r\n    this.set_indent = function (level) {\r\n      // Never indent your first output indent at the start of the file\r\n      if (lines.length > 1) {\r\n        while (level >= this.indent_cache.length) {\r\n          this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string) \r\n        }\r\n\r\n        this.current_line.set_indent(level) \r\n        return true \r\n      }\r\n      this.current_line.set_indent(0) \r\n      return false \r\n    }\r\n\r\n    this.add_raw_token = function (token) {\r\n      for (let x = 0;  x < token.newlines;  x++) {\r\n        this.add_outputline() \r\n      }\r\n      this.current_line.push(token.whitespace_before) \r\n      this.current_line.push(token.text) \r\n      this.space_before_token = false \r\n    }\r\n\r\n    this.add_token = function (printable_token) {\r\n      this.add_space_before_token() \r\n      this.current_line.push(printable_token) \r\n    }\r\n\r\n    this.add_space_before_token = function () {\r\n      if (this.space_before_token && !this.just_added_newline()) {\r\n        this.current_line.push(' ') \r\n      }\r\n      this.space_before_token = false \r\n    }\r\n\r\n    this.remove_redundant_indentation = function (frame) {\r\n      // This implementation is effective but has some issues:\r\n      //     - can cause line wrap to happen too soon due to indent removal\r\n      //           after wrap points are calculated\r\n      // These issues are minor compared to ugly indentation.\r\n\r\n      if (frame.multiline_frame ||\r\n                frame.mode === MODE.ForInitializer ||\r\n                frame.mode === MODE.Conditional) {\r\n        return \r\n      }\r\n\r\n      // remove one indent from each line inside this section\r\n      let index = frame.start_line_index \r\n      \r\n      const output_length = lines.length \r\n      while (index < output_length) {\r\n        lines[index].remove_indent() \r\n        index++ \r\n      }\r\n    }\r\n\r\n    this.trim = function (eat_newlines) {\r\n      eat_newlines = (eat_newlines === undefined) ? false : eat_newlines \r\n\r\n      this.current_line.trim(indent_string, baseIndentString) \r\n\r\n      while (eat_newlines && lines.length > 1 &&\r\n                this.current_line.is_empty()) {\r\n        lines.pop() \r\n        this.current_line = lines[lines.length - 1]\r\n        this.current_line.trim() \r\n      }\r\n\r\n      this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null \r\n    }\r\n\r\n    this.just_added_newline = function () {\r\n      return this.current_line.is_empty() \r\n    }\r\n\r\n    this.just_added_blankline = function () {\r\n      if (this.just_added_newline()) {\r\n        if (lines.length === 1) {\r\n          return true  // start of the file and newline = blank\r\n        }\r\n\r\n        const line = lines[lines.length - 2] \r\n        return line.is_empty() \r\n      }\r\n      return false \r\n    }\r\n  }\r\n\r\n\r\n  const Token = function (type, text, newlines, whitespace_before, mode, parent) {\r\n    this.type = type \r\n    this.text = text \r\n    this.comments_before = [] \r\n    this.newlines = newlines || 0 \r\n    this.wanted_newline = newlines > 0 \r\n    this.whitespace_before = whitespace_before || '' \r\n    this.parent = null \r\n    this.directives = null \r\n  }\r\n\r\n  function tokenizer(input, opts, indent_string) {\r\n\r\n    const whitespace = '\\n\\r\\t '.split('') \r\n    const digit = /[0-9]/ \r\n    const digit_oct = /[01234567]/ \r\n    const digit_hex = /[0123456789abcdefABCDEF]/ \r\n\r\n    const punct = ('+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>').split(' ') \r\n    // words which should always start on new line.\r\n    this.line_starters = 'continue,try,throw,return,const,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',') \r\n    const reserved_words = this.line_starters.concat(['do', 'in', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await']) \r\n\r\n    //  /* ... */ comment ends with nearest */ or end of file\r\n    const block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g \r\n\r\n    // comment ends just before nearest linefeed or end of file\r\n    const comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g \r\n\r\n    const directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g \r\n    const directive_pattern = / (\\w+)[:](\\w+)/g \r\n    const directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g \r\n\r\n    const template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g\r\n\r\n    let n_newlines, whitespace_before_token, in_html_comment, tokens, parser_pos \r\n    let input_length \r\n\r\n    this.tokenize = function () {\r\n      // cache the source's length.\r\n      input_length = input.length\r\n      parser_pos = 0 \r\n      in_html_comment = false\r\n      tokens = [] \r\n\r\n      let next, last \r\n      let token_values \r\n      let open = null \r\n      const open_stack = [] \r\n      let comments = [] \r\n\r\n      while (!(last && last.type === 'TK_EOF')) {\r\n        token_values = tokenize_next() \r\n        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token) \r\n        while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\r\n          if (next.type === 'TK_BLOCK_COMMENT') {\r\n            next.directives = token_values[2] \r\n          }\r\n          comments.push(next) \r\n          token_values = tokenize_next() \r\n          next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token) \r\n        }\r\n\r\n        if (comments.length) {\r\n          next.comments_before = comments \r\n          comments = [] \r\n        }\r\n\r\n        if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\r\n          next.parent = last \r\n          open_stack.push(open) \r\n          open = next \r\n        } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') &&\r\n                    (open && (\r\n                      (next.text === ']' && open.text === '[') ||\r\n                        (next.text === ')' && open.text === '(') ||\r\n                        (next.text === '}' && open.text === '{')))) {\r\n          next.parent = open.parent \r\n          open = open_stack.pop() \r\n        }\r\n\r\n        tokens.push(next) \r\n        last = next \r\n      }\r\n\r\n      return tokens \r\n    }\r\n\r\n    function get_directives(text) {\r\n      if (!text.match(directives_block_pattern)) {\r\n        return null \r\n      }\r\n\r\n      const directives = {} \r\n      directive_pattern.lastIndex = 0 \r\n      let directive_match = directive_pattern.exec(text) \r\n\r\n      while (directive_match) {\r\n        directives[directive_match[1]] = directive_match[2] \r\n        directive_match = directive_pattern.exec(text) \r\n      }\r\n\r\n      return directives \r\n    }\r\n\r\n    function tokenize_next() {\r\n      let resulting_string \r\n      let whitespace_on_this_line = [] \r\n\r\n      n_newlines = 0 \r\n      whitespace_before_token = '' \r\n\r\n      if (parser_pos >= input_length) {\r\n        return ['', 'TK_EOF'] \r\n      }\r\n\r\n      let last_token \r\n      if (tokens.length) {\r\n        last_token = tokens[tokens.length - 1] \r\n      } else {\r\n        // For the sake of tokenizing we can pretend that there was on open brace to start\r\n        last_token = new Token('TK_START_BLOCK', '{') \r\n      }\r\n\r\n\r\n      let c = input.charAt(parser_pos) \r\n      parser_pos += 1 \r\n\r\n      while (in_array(c, whitespace)) {\r\n\r\n        if (acorn.newline.test(c)) {\r\n          if (!(c === '\\n' && input.charAt(parser_pos - 2) === '\\r')) {\r\n            n_newlines += 1 \r\n            whitespace_on_this_line = [] \r\n          }\r\n        } else {\r\n          whitespace_on_this_line.push(c) \r\n        }\r\n\r\n        if (parser_pos >= input_length) {\r\n          return ['', 'TK_EOF'] \r\n        }\r\n\r\n        c = input.charAt(parser_pos) \r\n        parser_pos += 1 \r\n      }\r\n\r\n      if (whitespace_on_this_line.length) {\r\n        whitespace_before_token = whitespace_on_this_line.join('') \r\n      }\r\n\r\n      if (digit.test(c)) {\r\n        let allow_decimal = true \r\n        let allow_e = true \r\n        let local_digit = digit \r\n\r\n        if (c === '0' && parser_pos < input_length && /[Xxo]/.test(input.charAt(parser_pos))) {\r\n          // switch to hex/oct number, no decimal or e, just hex/oct digits\r\n          allow_decimal = false \r\n          allow_e = false \r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n          local_digit = /[o]/.test(input.charAt(parser_pos)) ? digit_oct : digit_hex \r\n        } else {\r\n          // we know this first loop will run.  It keeps the logic simpler.\r\n          c = '' \r\n          parser_pos -= 1 \r\n        }\r\n\r\n        // Add the digits\r\n        while (parser_pos < input_length && local_digit.test(input.charAt(parser_pos))) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n\r\n          if (allow_decimal && parser_pos < input_length && input.charAt(parser_pos) === '.') {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n            allow_decimal = false \r\n          }\r\n\r\n          if (allow_e && parser_pos < input_length && /[Ee]/.test(input.charAt(parser_pos))) {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n\r\n            if (parser_pos < input_length && /[+-]/.test(input.charAt(parser_pos))) {\r\n              c += input.charAt(parser_pos) \r\n              parser_pos += 1 \r\n            }\r\n\r\n            allow_e = false \r\n            allow_decimal = false \r\n          }\r\n        }\r\n\r\n        return [c, 'TK_WORD'] \r\n      }\r\n\r\n      if (acorn.isIdentifierStart(input.charCodeAt(parser_pos - 1))) {\r\n        if (parser_pos < input_length) {\r\n          while (acorn.isIdentifierChar(input.charCodeAt(parser_pos))) {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n            if (parser_pos === input_length) {\r\n              break \r\n            }\r\n          }\r\n        }\r\n\r\n        if (!(last_token.type === 'TK_DOT' ||\r\n                    (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get'])))\r\n                    && in_array(c, reserved_words)) {\r\n          if (c === 'in') { // hack for 'in' operator\r\n            return [c, 'TK_OPERATOR'] \r\n          }\r\n          return [c, 'TK_RESERVED'] \r\n        }\r\n\r\n        return [c, 'TK_WORD'] \r\n      }\r\n\r\n      if (c === '(' || c === '[') {\r\n        return [c, 'TK_START_EXPR'] \r\n      }\r\n\r\n      if (c === ')' || c === ']') {\r\n        return [c, 'TK_END_EXPR'] \r\n      }\r\n\r\n      if (c === '{') {\r\n        return [c, 'TK_START_BLOCK'] \r\n      }\r\n\r\n      if (c === '}') {\r\n        return [c, 'TK_END_BLOCK'] \r\n      }\r\n\r\n      if (c === ' ') {\r\n        return [c, 'TK_SEMICOLON'] \r\n      }\r\n\r\n      if (c === '/') {\r\n        let comment = '' \r\n        // peek for comment /* ... */\r\n        if (input.charAt(parser_pos) === '*') {\r\n          parser_pos += 1 \r\n          block_comment_pattern.lastIndex = parser_pos \r\n          let comment_match = block_comment_pattern.exec(input) \r\n          comment = `/*${comment_match[0]}` \r\n          parser_pos += comment_match[0].length \r\n          const directives = get_directives(comment) \r\n          if (directives && directives['ignore'] === 'start') {\r\n            directives_end_ignore_pattern.lastIndex = parser_pos \r\n            comment_match = directives_end_ignore_pattern.exec(input)\r\n            comment += comment_match[0] \r\n            parser_pos += comment_match[0].length \r\n          }\r\n          comment = comment.replace(acorn.lineBreak, '\\n') \r\n          return [comment, 'TK_BLOCK_COMMENT', directives] \r\n        }\r\n        // peek for comment // ...\r\n        if (input.charAt(parser_pos) === '/') {\r\n          parser_pos += 1 \r\n          comment_pattern.lastIndex = parser_pos \r\n          const comment_match = comment_pattern.exec(input) \r\n          comment = `//${comment_match[0]}` \r\n          parser_pos += comment_match[0].length \r\n          return [comment, 'TK_COMMENT'] \r\n        }\r\n\r\n      }\r\n\r\n      if (c === '`' || c === '\\'' || c === '\"' || // string\r\n                (\r\n                  (c === '/') || // regexp\r\n                    (opts.e4x && c === '<' && input.slice(parser_pos - 1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/)) // xml\r\n                ) && ( // regex and xml can only appear in specific locations during parsing\r\n                  (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) ||\r\n                    (last_token.type === 'TK_END_EXPR' && last_token.text === ')' &&\r\n                        last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) ||\r\n                    (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK',\r\n                      'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'\r\n                    ]))\r\n                )) {\r\n\r\n        let sep = c,\r\n          esc = false,\r\n          has_char_escapes = false \r\n\r\n        resulting_string = c \r\n\r\n        if (sep === '/') {\r\n          //\r\n          // handle regexp\r\n          //\r\n          let in_char_class = false \r\n          while (parser_pos < input_length &&\r\n                        ((esc || in_char_class || input.charAt(parser_pos) !== sep) &&\r\n                            !acorn.newline.test(input.charAt(parser_pos)))) {\r\n            resulting_string += input.charAt(parser_pos) \r\n            if (!esc) {\r\n              esc = input.charAt(parser_pos) === '\\\\' \r\n              if (input.charAt(parser_pos) === '[') {\r\n                in_char_class = true \r\n              } else if (input.charAt(parser_pos) === ']') {\r\n                in_char_class = false \r\n              }\r\n            } else {\r\n              esc = false \r\n            }\r\n            parser_pos += 1 \r\n          }\r\n        } else if (opts.e4x && sep === '<') {\r\n          //\r\n          // handle e4x xml literals\r\n          //\r\n          const xmlRegExp = /<(\\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/g \r\n          let xmlStr = input.slice(parser_pos - 1) \r\n          let match = xmlRegExp.exec(xmlStr) \r\n          if (match && match.index === 0) {\r\n            const rootTag = match[2] \r\n            let depth = 0 \r\n            while (match) {\r\n              const isEndTag = !!match[1] \r\n              const tagName = match[2] \r\n              const isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === '![CDATA[') \r\n              if (tagName === rootTag && !isSingletonTag) {\r\n                if (isEndTag) {\r\n                  --depth \r\n                } else {\r\n                  ++depth \r\n                }\r\n              }\r\n              if (depth <= 0) {\r\n                break \r\n              }\r\n              match = xmlRegExp.exec(xmlStr) \r\n            }\r\n            const xmlLength = match ? match.index + match[0].length : xmlStr.length \r\n            xmlStr = xmlStr.slice(0, xmlLength) \r\n            parser_pos += xmlLength - 1 \r\n            xmlStr = xmlStr.replace(acorn.lineBreak, '\\n') \r\n            return [xmlStr, 'TK_STRING'] \r\n          }\r\n        } else {\r\n          //\r\n          // handle string\r\n          //\r\n          // Template strings can travers lines without escape characters.\r\n          // Other strings cannot\r\n          while (parser_pos < input_length &&\r\n                        (esc || (input.charAt(parser_pos) !== sep &&\r\n                            (sep === '`' || !acorn.newline.test(input.charAt(parser_pos)))))) {\r\n            // Handle \\r\\n linebreaks after escapes or in template strings\r\n            if ((esc || sep === '`') && acorn.newline.test(input.charAt(parser_pos))) {\r\n              if (input.charAt(parser_pos) === '\\r' && input.charAt(parser_pos + 1) === '\\n') {\r\n                parser_pos += 1 \r\n              }\r\n              resulting_string += '\\n' \r\n            } else {\r\n              resulting_string += input.charAt(parser_pos) \r\n            }\r\n            if (esc) {\r\n              if (input.charAt(parser_pos) === 'x' || input.charAt(parser_pos) === 'u') {\r\n                has_char_escapes = true \r\n              }\r\n              esc = false \r\n            } else {\r\n              esc = input.charAt(parser_pos) === '\\\\' \r\n            }\r\n            parser_pos += 1 \r\n          }\r\n\r\n        }\r\n\r\n        if (has_char_escapes && opts.unescape_strings) {\r\n          resulting_string = unescape_string(resulting_string) \r\n        }\r\n\r\n        if (parser_pos < input_length && input.charAt(parser_pos) === sep) {\r\n          resulting_string += sep \r\n          parser_pos += 1 \r\n\r\n          if (sep === '/') {\r\n            // regexps may have modifiers /regexp/MOD , so fetch those, too\r\n            // Only [gim] are valid, but if the user puts in garbage, do what we can to take it.\r\n            while (parser_pos < input_length && acorn.isIdentifierStart(input.charCodeAt(parser_pos))) {\r\n              resulting_string += input.charAt(parser_pos) \r\n              parser_pos += 1 \r\n            }\r\n          }\r\n        }\r\n        return [resulting_string, 'TK_STRING'] \r\n      }\r\n\r\n      if (c === '#') {\r\n\r\n        if (tokens.length === 0 && input.charAt(parser_pos) === '!') {\r\n          // shebang\r\n          resulting_string = c \r\n          while (parser_pos < input_length && c !== '\\n') {\r\n            c = input.charAt(parser_pos) \r\n            resulting_string += c \r\n            parser_pos += 1 \r\n          }\r\n          return [`${trim(resulting_string)}\\n`, 'TK_UNKNOWN'] \r\n        }\r\n\r\n\r\n\r\n        // Spidermonkey-specific sharp variables for circular references\r\n        // https://developer.mozilla.org/En/Sharp_variables_in_JavaScript\r\n        // http://mxr.mozilla.org/mozilla-central/source/js/src/jsscan.cpp around line 1935\r\n        let sharp = '#' \r\n        if (parser_pos < input_length && digit.test(input.charAt(parser_pos))) {\r\n          do {\r\n            c = input.charAt(parser_pos) \r\n            sharp += c \r\n            parser_pos += 1 \r\n          } while (parser_pos < input_length && c !== '#' && c !== '=') \r\n          if (c === '#') {\r\n            //\r\n          } else if (input.charAt(parser_pos) === '[' && input.charAt(parser_pos + 1) === ']') {\r\n            sharp += '[]' \r\n            parser_pos += 2 \r\n          } else if (input.charAt(parser_pos) === '{' && input.charAt(parser_pos + 1) === '}') {\r\n            sharp += '{}' \r\n            parser_pos += 2 \r\n          }\r\n          return [sharp, 'TK_WORD'] \r\n        }\r\n      }\r\n\r\n      if (c === '<' && (input.charAt(parser_pos) === '?' || input.charAt(parser_pos) === '%')) {\r\n        template_pattern.lastIndex = parser_pos - 1 \r\n        const template_match = template_pattern.exec(input) \r\n        if (template_match) {\r\n          c = template_match[0] \r\n          parser_pos += c.length - 1 \r\n          c = c.replace(acorn.lineBreak, '\\n') \r\n          return [c, 'TK_STRING'] \r\n        }\r\n      }\r\n\r\n      if (c === '<' && input.substring(parser_pos - 1, parser_pos + 3) === '<!--') {\r\n        parser_pos += 3 \r\n        c = '<!--' \r\n        while (!acorn.newline.test(input.charAt(parser_pos)) && parser_pos < input_length) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos++ \r\n        }\r\n        in_html_comment = true \r\n        return [c, 'TK_COMMENT'] \r\n      }\r\n\r\n      if (c === '-' && in_html_comment && input.substring(parser_pos - 1, parser_pos + 2) === '-->') {\r\n        in_html_comment = false \r\n        parser_pos += 2 \r\n        return ['-->', 'TK_COMMENT'] \r\n      }\r\n\r\n      if (c === '.') {\r\n        return [c, 'TK_DOT'] \r\n      }\r\n\r\n      if (in_array(c, punct)) {\r\n        while (parser_pos < input_length && in_array(c + input.charAt(parser_pos), punct)) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n          if (parser_pos >= input_length) {\r\n            break \r\n          }\r\n        }\r\n\r\n        if (c === ',') {\r\n          return [c, 'TK_COMMA'] \r\n        } else if (c === '=') {\r\n          return [c, 'TK_EQUALS'] \r\n        } else {\r\n          return [c, 'TK_OPERATOR'] \r\n        }\r\n      }\r\n\r\n      return [c, 'TK_UNKNOWN'] \r\n    }\r\n\r\n\r\n    function unescape_string(s) {\r\n      let esc = false,\r\n        out = '',\r\n        pos = 0,\r\n        s_hex = '',\r\n        escaped = 0,\r\n        c \r\n\r\n      while (esc || pos < s.length) {\r\n\r\n        c = s.charAt(pos) \r\n        pos++ \r\n\r\n        if (esc) {\r\n          esc = false \r\n          if (c === 'x') {\r\n            // simple hex-escape \\x24\r\n            s_hex = s.substr(pos, 2) \r\n            pos += 2 \r\n          } else if (c === 'u') {\r\n            // unicode-escape, \\u2134\r\n            s_hex = s.substr(pos, 4) \r\n            pos += 4 \r\n          } else {\r\n            // some common escape, e.g \\n\r\n            out += `\\\\${c}` \r\n            continue \r\n          }\r\n          if (!s_hex.match(/^[0123456789abcdefABCDEF]+$/)) {\r\n            // some weird escaping, bail out,\r\n            // leaving whole string intact\r\n            return s \r\n          }\r\n\r\n          escaped = parseInt(s_hex, 16) \r\n\r\n          if (escaped >= 0x00 && escaped < 0x20) {\r\n            // leave 0x00...0x1f escaped\r\n            if (c === 'x') {\r\n              out += `\\\\x${s_hex}` \r\n            } else {\r\n              out += `\\\\u${s_hex}` \r\n            }\r\n            continue \r\n          } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\r\n            // single-quote, apostrophe, backslash - escape these\r\n            out += `\\\\${String.fromCharCode(escaped)}` \r\n          } else if (c === 'x' && escaped > 0x7e && escaped <= 0xff) {\r\n            // we bail out on \\x7f..\\xff,\r\n            // leaving whole string escaped,\r\n            // as it's probably completely binary\r\n            return s \r\n          } else {\r\n            out += String.fromCharCode(escaped) \r\n          }\r\n        } else if (c === '\\\\') {\r\n          esc = true \r\n        } else {\r\n          out += c \r\n        }\r\n      }\r\n      return out \r\n    }\r\n\r\n  }\r\n\r\n  return {\r\n    run: run\r\n  }\r\n\r\n  /* jshint ignore:end */\r\n  /* jscs:enable */\r\n} \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  codeMirror: window.CodeMirror,\r\n  codeMirrorOptions: {\r\n    lineNumbers: true,\r\n    tabMode: 'indent',\r\n    indentWithTabs: true,\r\n    lineWrapping: true,\r\n    mode: 'text/html',\r\n    tabSize: 2\r\n  },\r\n  codeBeautifierOptions: {\r\n    end_with_newline: true,\r\n    indent_inner_html: true,\r\n    extra_liners: ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'table', 'dl'],\r\n    brace_style: 'expand',\r\n    indent_char: '\\t',\r\n    indent_size: 1,\r\n    wrap_line_length: 0\r\n  },\r\n  codeViewKeepActiveButtons: ['fullscreen']\r\n})\r\n\r\nFE.PLUGINS.codeView = function (editor) {\r\n  const { $ } = editor\r\n  let $html_area\r\n  let code_mirror\r\n\r\n  /**\r\n   * Check if code view is enabled.\r\n   */\r\n  const isActive = () => editor.$box.hasClass('fr-code-view')\r\n\r\n  function get() {\r\n    if (code_mirror) {\r\n      return code_mirror.getValue()\r\n    }\r\n    else {\r\n      return $html_area.val()\r\n    }\r\n  }\r\n\r\n  function refresh() {\r\n    if (isActive()) {\r\n      if (code_mirror) {\r\n        code_mirror.setSize(null, editor.opts.height ? editor.opts.height : 'auto')\r\n      }\r\n\r\n      if (editor.opts.heightMin || editor.opts.height) {\r\n        editor.$box.find('.CodeMirror-scroll, .CodeMirror-gutters').css('min-height', editor.opts.heightMin || editor.opts.height);\r\n        $html_area.css('height', editor.opts.height);\r\n      }\r\n      else {\r\n        editor.$box.find('.CodeMirror-scroll, .CodeMirror-gutters').css('min-height', '')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to edit mode.\r\n   */\r\n  function _showText($btn) {\r\n    const html = get()\r\n\r\n    // Code mirror enabled.\r\n    editor.html.set(html)\r\n\r\n    // Blur the element.\r\n    editor.$el.blur()\r\n\r\n    // Toolbar no longer disabled.\r\n    editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').not($btn).removeClass('fr-disabled').attr('aria-disabled', false)\r\n    \r\n    $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n\r\n    editor.selection.setAtStart(editor.el)\r\n    editor.selection.restore()\r\n    editor.placeholder.refresh()\r\n\r\n    editor.undo.saveStep()\r\n  }\r\n\r\n  let _can_focus = false\r\n\r\n  function _blur() {\r\n    if (isActive()) {\r\n      editor.events.trigger('blur')\r\n    }\r\n  }\r\n\r\n  function _focus() {\r\n    if (isActive() && _can_focus) {\r\n      editor.events.trigger('focus')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get to code mode.\r\n   */\r\n  function _showHTML($btn) {\r\n    if (!$html_area) {\r\n      _initArea()\r\n\r\n      // Enable code mirror.\r\n      if (!code_mirror && editor.opts.codeMirror) {\r\n        code_mirror = editor.opts.codeMirror.fromTextArea($html_area.get(0), editor.opts.codeMirrorOptions)\r\n\r\n        code_mirror.on('blur', _blur)\r\n        code_mirror.on('focus', _focus)\r\n      }\r\n      else {\r\n        editor.events.$on($html_area, 'keydown keyup change input', function () {\r\n          if (!editor.opts.height) {\r\n            this.rows = 1\r\n\r\n            // Textarea has no content anymore.\r\n            if (this.value.length === 0) {\r\n              this.style.height = 'auto'\r\n            }\r\n\r\n            else {\r\n              this.style.height = `${this.scrollHeight}px`\r\n            }\r\n          }\r\n          else {\r\n            this.removeAttribute('rows')\r\n          }\r\n        })\r\n\r\n        editor.events.$on($html_area, 'blur', _blur)\r\n        editor.events.$on($html_area, 'focus', _focus)\r\n      }\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    // Clean white tags but ignore selection.\r\n    editor.html.cleanEmptyTags()\r\n    editor.html.cleanWhiteTags(true)\r\n\r\n    // Blur the element.\r\n    if (editor.core.hasFocus()) {\r\n      if (!editor.core.isEmpty()) {\r\n        editor.selection.save()\r\n        editor.$el.find('.fr-marker[data-type=\"true\"]').first().replaceWith('<span class=\"fr-tmp fr-sm\">F</span>')\r\n        editor.$el.find('.fr-marker[data-type=\"false\"]').last().replaceWith('<span class=\"fr-tmp fr-em\">F</span>')\r\n      }\r\n    }\r\n\r\n    // Get HTML.\r\n    let html = editor.html.get(false, true)\r\n    editor.$el.find('span.fr-tmp').remove()\r\n\r\n    editor.$box.toggleClass('fr-code-view', true)\r\n\r\n    let was_focused = false\r\n\r\n    if (editor.core.hasFocus()) {\r\n      was_focused = true\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    html = html.replace(/<span class=\"fr-tmp fr-sm\">F<\\/span>/, 'FROALA-SM')\r\n    html = html.replace(/<span class=\"fr-tmp fr-em\">F<\\/span>/, 'FROALA-EM')\r\n\r\n    // Beautify HTML.\r\n    if (editor.codeBeautifier && !html.includes('fr-embedly')) {\r\n      html = editor.codeBeautifier.run(html, editor.opts.codeBeautifierOptions)\r\n    }\r\n\r\n    let s_index\r\n    let e_index\r\n\r\n    // Code mirror is enabled.\r\n    if (code_mirror) {\r\n      s_index = html.indexOf('FROALA-SM')\r\n      e_index = html.indexOf('FROALA-EM')\r\n\r\n      if (s_index > e_index) {\r\n        s_index = e_index\r\n      }\r\n      else {\r\n        e_index = e_index - 9\r\n      }\r\n\r\n      html = html.replace(/FROALA-SM/g, '').replace(/FROALA-EM/g, '')\r\n      const s_line = html.substring(0, s_index).length - html.substring(0, s_index).replace(/\\n/g, '').length\r\n      const e_line = html.substring(0, e_index).length - html.substring(0, e_index).replace(/\\n/g, '').length\r\n\r\n      s_index = html.substring(0, s_index).length - html.substring(0, html.substring(0, s_index).lastIndexOf('\\n') + 1).length\r\n      e_index = html.substring(0, e_index).length - html.substring(0, html.substring(0, e_index).lastIndexOf('\\n') + 1).length\r\n\r\n      code_mirror.setSize(null, editor.opts.height ? editor.opts.height : 'auto')\r\n\r\n      if (editor.opts.heightMin) editor.$box.find('.CodeMirror-scroll').css('min-height', editor.opts.heightMin)\r\n      code_mirror.setValue(html)\r\n      _can_focus = !was_focused\r\n      code_mirror.focus()\r\n      _can_focus = true\r\n      code_mirror.setSelection({ line: s_line, ch: s_index }, { line: e_line, ch: e_index })\r\n      code_mirror.refresh()\r\n      code_mirror.clearHistory()\r\n    }\r\n\r\n    // No code mirror.\r\n    else {\r\n      s_index = html.indexOf('FROALA-SM')\r\n      e_index = html.indexOf('FROALA-EM') - 9\r\n\r\n      if (editor.opts.heightMin) {\r\n        $html_area.css('min-height', editor.opts.heightMin)\r\n      }\r\n\r\n      if (editor.opts.height) {\r\n        $html_area.css('height', editor.opts.height)\r\n      }\r\n\r\n      if (editor.opts.heightMax) {\r\n        $html_area.css('max-height', editor.opts.height || editor.opts.heightMax)\r\n      }\r\n\r\n      $html_area.val(html.replace(/FROALA-SM/g, '').replace(/FROALA-EM/g, '')).trigger('change')\r\n\r\n      const scroll_top = $(editor.o_doc).scrollTop()\r\n      _can_focus = !was_focused\r\n      $html_area.focus()\r\n      _can_focus = true\r\n      $html_area.get(0).setSelectionRange(s_index, e_index)\r\n      $(editor.o_doc).scrollTop(scroll_top)\r\n    }\r\n\r\n    // Disable buttons.\r\n    editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').not($btn).filter(function () {\r\n      return editor.opts.codeViewKeepActiveButtons.indexOf($(this).data('cmd')) < 0\r\n    }).addClass('fr-disabled').attr('aria-disabled', true)\r\n    $btn.addClass('fr-active').attr('aria-pressed', true)\r\n\r\n    if (!editor.helpers.isMobile() && editor.opts.toolbarInline) {\r\n      editor.toolbar.hide()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the code view.\r\n   */\r\n  function toggle(val) {\r\n    if (typeof val == 'undefined') val = !isActive()\r\n\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"html\"]')\r\n\r\n    if (!val) {\r\n      editor.$box.toggleClass('fr-code-view', false)\r\n      _showText($btn)\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2036\r\n      // fire codeView.update event when switching to html view\r\n      editor.events.trigger('codeView.update')\r\n    }\r\n    else {\r\n      editor.popups.hideAll()\r\n      _showHTML($btn)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _destroy() {\r\n    if (isActive()) {\r\n      toggle(false)\r\n    }\r\n\r\n    if (code_mirror) code_mirror.toTextArea()\r\n    $html_area.val('').removeData().remove()\r\n    $html_area = null\r\n\r\n    if ($back_button) {\r\n      $back_button.remove()\r\n      $back_button = null\r\n    }\r\n  }\r\n\r\n  function _refreshToolbar() {\r\n\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"html\"]')\r\n\r\n    if (!isActive()) {\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').not($btn).removeClass('fr-disabled').attr('aria-disabled', false)\r\n      $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n    }\r\n    else {\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').not($btn).filter(function () {\r\n        return editor.opts.codeViewKeepActiveButtons.indexOf($(this).data('cmd')) < 0\r\n      }).addClass('fr-disabled').attr('aria-disabled', false)\r\n      $btn.addClass('fr-active').attr('aria-pressed', false)\r\n    }\r\n  }\r\n\r\n  function _initArea() {\r\n\r\n    // Add the coding textarea to the wrapper.\r\n    $html_area = $('<textarea class=\"fr-code\" tabIndex=\"-1\">')\r\n    editor.$wp.append($html_area)\r\n\r\n    $html_area.attr('dir', editor.opts.direction)\r\n\r\n    // Exit code view button for inline toolbar.\r\n    if (!editor.$box.hasClass('fr-basic')) {\r\n      $back_button = $(`<a data-cmd=\"html\" title=\"Code View\" class=\"fr-command fr-btn html-switch${(editor.helpers.isMobile() ? '' : ' fr-desktop')}\" role=\"button\" tabIndex=\"-1\"><i class=\"fa fa-code\"></i></button>`)\r\n      editor.$box.append($back_button)\r\n\r\n      editor.events.bindClick(editor.$box, 'a.html-switch', function () {\r\n        editor.events.trigger('commands.before', ['html'])\r\n\r\n        toggle(false)\r\n\r\n        editor.events.trigger('commands.after', ['html'])\r\n      })\r\n    }\r\n\r\n    const cancel = function () {\r\n      return !isActive()\r\n    }\r\n\r\n    // Disable refresh of the buttons while enabled.\r\n    editor.events.on('buttons.refresh', cancel)\r\n    editor.events.on('copy', cancel, true)\r\n    editor.events.on('cut', cancel, true)\r\n    editor.events.on('paste', cancel, true)\r\n\r\n    editor.events.on('destroy', _destroy, true)\r\n\r\n    editor.events.on('html.set', function () {\r\n      if (isActive()) toggle(true)\r\n    })\r\n\r\n    editor.events.on('codeView.update', refresh)\r\n    \r\n    editor.events.on('codeView.toggle', function () {\r\n      if (editor.$box.hasClass('fr-code-view')) {\r\n        toggle()\r\n      }\r\n    })\r\n\r\n    editor.events.on('form.submit', function () {\r\n      if (isActive()) {\r\n\r\n        // Code mirror enabled.\r\n        editor.html.set(get())\r\n\r\n        editor.events.trigger('contentChanged', [], true)\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  let $back_button\r\n\r\n  function _init() {\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/672\r\n\r\n    editor.events.on('focus', function () {\r\n\r\n      if (editor.opts.toolbarContainer) {\r\n        _refreshToolbar()\r\n      }\r\n    })\r\n\r\n    if (!editor.$wp) return false\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    toggle: toggle,\r\n    isActive: isActive,\r\n    get: get\r\n  }\r\n}\r\n\r\nFE.RegisterCommand('html', {\r\n  title: 'Code View',\r\n  undo: false,\r\n  focus: false,\r\n  forcedRefresh: true,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.codeView.toggle()\r\n  },\r\n  plugin: 'codeView'\r\n})\r\n\r\nFE.DefineIcon('html', {\r\n  NAME: 'code',\r\n  SVG_KEY: 'codeView'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Popup templates for both textColor and backgroundColor\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'textColor.picker': '[_BUTTONS_][_TEXT_COLORS_][_CUSTOM_COLOR_]',\r\n  'backgroundColor.picker': '[_BUTTONS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  colorsText: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  colorsBackground: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  colorsStep: 7,\r\n  colorsHEXInput: true,\r\n  colorsButtons: ['colorsBack', '|', '-']\r\n})\r\n\r\nFE.PLUGINS.colors = function (editor) {\r\n\r\n  const { $ } = editor\r\n  const custom_color_template = `<div class=\"fr-color-hex-layer fr-active fr-layer\" id=\"fr-color-hex-layer- \r\n  ${editor.id}\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"[ID]\"\r\n  type=\"text\" placeholder=\"${editor.language.translate('HEX Color')}\" \r\n  tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button \r\n  type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"[COMMAND]\" tabIndex=\"2\" role=\"button\">\r\n  ${editor.language.translate('OK')}</button></div></div>`\r\n\r\n  /*\r\n   * Show the colors popup.\r\n   */\r\n  function _showColorsPopup(cmd_type) {\r\n    const $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd_type}\"]`)\r\n\r\n    // Get color picker based on command type\r\n    let $popup = editor.popups.get(`${cmd_type}.picker`) \r\n\r\n    if (!$popup) $popup = _initColorsPopup(cmd_type)\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      // Colors popup\r\n      editor.popups.setContainer(`${cmd_type}.picker`, editor.$tb)\r\n\r\n      // Refresh colors in the current popup\r\n      if (cmd_type === 'textColor') {\r\n        _refreshColor('text')\r\n      }\r\n      else {\r\n        _refreshColor('background')\r\n      }\r\n\r\n      // Colors popup left and top position.\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show(`${cmd_type}.picker`, left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show(`${cmd_type}.picker`)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the colors popup.\r\n   */\r\n  function _initColorsPopup(cmd_type) {\r\n    \r\n    let colors_buttons = ''\r\n    \r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Colors buttons.\r\n      if (editor.opts.colorsButtons.length > 0) {\r\n        colors_buttons += `<div class=\"fr-buttons fr-colors-buttons fr-tabs\">\r\n        ${editor.button.buildList(editor.opts.colorsButtons)}\r\n        </div>`\r\n      }\r\n    }\r\n\r\n    // Custom HEX.\r\n    let custom_color = ''\r\n\r\n    let template\r\n    if (cmd_type === 'textColor') {\r\n\r\n      if (editor.opts.colorsHEXInput) {\r\n        custom_color = custom_color_template.replace(/\\[ID\\]/g, `fr-color-hex-layer-text-${editor.id}`)\r\n          .replace(/\\[COMMAND\\]/g, 'customTextColor')\r\n      }\r\n\r\n      // Template for textColor picker\r\n      template = {\r\n        buttons: colors_buttons,\r\n        text_colors: _colorPickerHTML('text'),\r\n        custom_color: custom_color\r\n      }\r\n    } \r\n    else {\r\n\r\n      if (editor.opts.colorsHEXInput) {\r\n        custom_color = custom_color_template.replace(/\\[ID\\]/g, `fr-color-hex-layer-background-${editor.id}`)\r\n          .replace(/\\[COMMAND\\]/g, 'customBackgroundColor')\r\n      }\r\n\r\n      // Template for backgroundColor picker\r\n      template = {\r\n        buttons: colors_buttons,\r\n        background_colors: _colorPickerHTML('background'),\r\n        custom_color: custom_color\r\n      }\r\n    }\r\n    // Create a popup and add accessibility to it\r\n    let $popup = editor.popups.create(`${cmd_type}.picker`, template)\r\n    _addAccessibility($popup, `${cmd_type}.picker`)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * HTML for the color picker colors.\r\n   */\r\n  function _colorPickerHTML(tab) {\r\n\r\n    // Get colors according to tab name.\r\n    const colors = (tab === 'text' ? editor.opts.colorsText : editor.opts.colorsBackground)\r\n\r\n    // Create colors html.\r\n    let colors_html = `<div class=\"fr-color-set fr-${tab}-color fr-selected-set\">`\r\n\r\n    // Add colors.\r\n    for (let i = 0; i < colors.length; i++) {\r\n      if (i !== 0 && i % editor.opts.colorsStep === 0) {\r\n        colors_html += '<br>'\r\n      }\r\n\r\n      if (colors[i] !== 'REMOVE') {\r\n        colors_html += `<span class=\"fr-command fr-select-color\" style=\"background:${colors[i]};\" \r\n        tabIndex=\"-1\" aria-selected=\"false\" role=\"button\" data-cmd=\"apply${tab}Color\" \r\n        data-param1=\"${colors[i]}\"><span class=\"fr-sr-only\"> ${editor.language.translate('Color')}${colors[i]} \r\n        &nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n\r\n      else {\r\n        colors_html += `<span class=\"fr-command fr-select-color\" data-cmd=\"apply${tab}Color\"\r\n         tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" \r\n         title=\"${editor.language.translate('Clear Formatting')}\">${editor.icon.create('remove')} \r\n        <span class=\"fr-sr-only\"> ${editor.language.translate('Clear Formatting')} </span></span>`\r\n      }\r\n    }\r\n\r\n    return `${colors_html}</div>`\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events.\r\n   */\r\n  function _addAccessibility($popup, popupName) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible(popupName) || !$focused_item.is('span')) {\r\n        return true\r\n      }\r\n      const key_code = e.which\r\n      let status = true\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB === key_code) {\r\n        const $tb = $popup.find('.fr-buttons')\r\n\r\n        // Focus back the popup's toolbar if exists.\r\n        status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP === key_code || FE.KEYCODE.ARROW_DOWN === key_code \r\n        || FE.KEYCODE.ARROW_LEFT === key_code || FE.KEYCODE.ARROW_RIGHT === key_code) {\r\n        if ($focused_item.is('span.fr-select-color')) {\r\n\r\n          // Get all current colors.\r\n          const $colors = $focused_item.parent().find('span.fr-select-color')\r\n\r\n          // Get focused item position.\r\n          const index = $colors.index($focused_item)\r\n\r\n          // Get color matrix dimensions.\r\n          const columns = editor.opts.colorsStep\r\n          const lines = Math.floor($colors.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP === key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN === key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT === key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT === key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          const $el = $($colors.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER === key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Show the current selected color.\r\n   */\r\n  function _refreshColor(tab) {\r\n    const $popup = editor.popups.get(`${tab}Color.picker`)\r\n    let $element = $(editor.selection.element())\r\n\r\n    // The color css property.\r\n    let color_type\r\n\r\n    if (tab === 'background') {\r\n      color_type = 'background-color'\r\n    }\r\n    else {\r\n      color_type = 'color'\r\n    }\r\n\r\n    const $current_color = $popup.find(`.fr-${tab}-color .fr-select-color`)\r\n\r\n    // Remove current color selection.\r\n\r\n    $current_color.find('.fr-selected-color').remove()\r\n    $current_color.removeClass('fr-active-item')\r\n    $current_color.not('[data-param1=\"REMOVE\"]').attr('aria-selected', false)\r\n\r\n    // Find the selected color.\r\n    while ($element.get(0) !== editor.el) {\r\n\r\n      // Transparent or black.\r\n      if ($element.css(color_type) === 'transparent' || $element.css(color_type) === 'rgba(0, 0, 0, 0)') {\r\n        $element = $element.parent()\r\n      }\r\n\r\n      // Select the correct color.\r\n      else {\r\n        const $select_color = $popup.find(`.fr-${tab}-color .fr-select-color[data-param1=\"${editor.helpers.RGBToHex($element.css(color_type))}\"]`)\r\n\r\n        // Add checked icon.\r\n        $select_color.append('<span class=\"fr-selected-color\" aria-hidden=\"true\">\\uf00c</span>')\r\n        $select_color.addClass('fr-active-item').attr('aria-selected', true)\r\n        break\r\n      }\r\n    }\r\n\r\n    _updateColor(tab)\r\n  }\r\n\r\n  function _updateColor(val) {\r\n    const $popup = editor.popups.get(`${val}Color.picker`)\r\n    let $selectionColor = $popup.find(`.fr-${val}-color .fr-active-item`).attr('data-param1')\r\n    const $input = $popup.find('.fr-color-hex-layer input')\r\n\r\n    if (!$selectionColor) {\r\n      $selectionColor = ''\r\n    }\r\n\r\n    if ($input.length) {\r\n      $($input.val($selectionColor).input).trigger('change')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Change background color.\r\n   */\r\n  function background(val) {\r\n\r\n    // Set background  color.\r\n    if (val !== 'REMOVE') {\r\n      editor.format.applyStyle('background-color', editor.helpers.HEXtoRGB(val))\r\n    }\r\n\r\n    // Remove background color.\r\n    else {\r\n      editor.format.removeStyle('background-color')\r\n    }\r\n\r\n    editor.popups.hide('backgroundColor.picker')\r\n  }\r\n\r\n  /*\r\n   * Change text color.\r\n   */\r\n  function text(val) {\r\n\r\n    // Set text color.\r\n    if (val !== 'REMOVE') {\r\n      editor.format.applyStyle('color', editor.helpers.HEXtoRGB(val))\r\n    }\r\n\r\n    // Remove text color.\r\n    else {\r\n      editor.format.removeStyle('color')\r\n    }\r\n\r\n    editor.popups.hide('textColor.picker')\r\n  }\r\n\r\n  /*\r\n   * Go back to the inline editor.\r\n   */\r\n  function back() {\r\n    editor.popups.hide('textColor.picker')\r\n    editor.popups.hide('backgroundColor.picker')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  function customColor(tab) {\r\n    const $popup = editor.popups.get(`${tab}Color.picker`)\r\n\r\n    const $input = $popup.find('.fr-color-hex-layer input')\r\n\r\n    if ($input.length) {\r\n      const color = $input.val()\r\n\r\n      // Set custom color\r\n      if (tab === 'background') {\r\n        background(color)\r\n      }\r\n      else {\r\n        text(color)\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    showColorsPopup: _showColorsPopup,\r\n    background: background,\r\n    customColor: customColor,\r\n    text: text,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Select text color command.\r\nFE.DefineIcon('textColor', { NAME: 'tint', SVG_KEY: 'textColor' })\r\nFE.RegisterCommand('textColor', {\r\n  title: 'Text Color',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('textColor.picker')) {\r\n      this.colors.showColorsPopup('textColor')\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('textColor.picker')\r\n    }\r\n  }\r\n})\r\n// Command to apply text color from the available colors\r\nFE.RegisterCommand('applytextColor', {\r\n  undo: true,\r\n  callback: function (cmd, val) {\r\n    this.colors.text(val)\r\n  }\r\n})\r\n// Command to set custom text color\r\nFE.RegisterCommand('customTextColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.colors.customColor('text')\r\n  }\r\n})\r\n\r\n// Select background color command.\r\nFE.DefineIcon('backgroundColor', { NAME: 'paint-brush', SVG_KEY: 'backgroundColor' })\r\nFE.RegisterCommand('backgroundColor', {\r\n  title: 'Background Color',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('backgroundColor.picker')) {\r\n      this.colors.showColorsPopup('backgroundColor')\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('backgroundColor.picker')\r\n    }\r\n  }\r\n})\r\n// Command to apply background color from the available colors\r\nFE.RegisterCommand('applybackgroundColor', {\r\n  undo: true,\r\n  callback: function (cmd, val) {\r\n    this.colors.background(val)\r\n  }\r\n})\r\n// Command to set custom background color\r\nFE.RegisterCommand('customBackgroundColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.colors.customColor('background')\r\n  }\r\n})\r\n\r\n// Colors back.\r\nFE.DefineIcon('colorsBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('colorsBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.colors.back()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('remove', { NAME: 'eraser', SVG_KEY: 'remove' })\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  dragInline: true\r\n})\r\n\r\nFE.PLUGINS.draggable = function(editor) {\r\n  const { $ } = editor\r\n  function _dragStart(e) {\r\n    if (e.originalEvent && e.originalEvent.target && e.originalEvent.target.nodeType === Node.TEXT_NODE) {\r\n\r\n      return true \r\n    }\r\n\r\n    // Image with link.\r\n    if (e.target && e.target.tagName === 'A' && e.target.childNodes.length === 1 && e.target.childNodes[0].tagName === 'IMG') {\r\n      e.target = e.target.childNodes[0] \r\n    }\r\n\r\n    if (!$(e.target).hasClass('fr-draggable')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Save in undo step if we cannot do.\r\n    if (!editor.undo.canDo()) {\r\n      editor.undo.saveStep()\r\n    }\r\n\r\n    if (editor.opts.dragInline) {\r\n      editor.$el.attr('contenteditable', true)\r\n    }\r\n    else {\r\n      editor.$el.attr('contenteditable', false)\r\n    }\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.hide()\r\n\r\n    $(e.target).addClass('fr-dragging')\r\n\r\n    if (!editor.browser.msie && !editor.browser.edge) {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    e.originalEvent.dataTransfer.setData('text', 'Froala')\r\n  }\r\n\r\n  const _tagOK = (tag_under) => !(tag_under && (tag_under.tagName === 'HTML' || tag_under.tagName === 'BODY' || editor.node.isElement(tag_under)))\r\n\r\n  function _setHelperSize(top, left, width) {\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      top += editor.$iframe.offset().top + iframePaddingTop\r\n      left += editor.$iframe.offset().left + iframePaddingLeft\r\n    }\r\n\r\n    if ($draggable_helper.offset().top !== top) $draggable_helper.css('top', top)\r\n\r\n    if ($draggable_helper.offset().left !== left) $draggable_helper.css('left', left)\r\n\r\n    if ($draggable_helper.width() !== width) $draggable_helper.css('width', width)\r\n  }\r\n\r\n  function _positionHelper(e) {\r\n\r\n    // The tag under the mouse cursor.\r\n    let tag_under = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset)\r\n\r\n    if (!_tagOK(tag_under)) {\r\n\r\n      // Look above for the closest tag.\r\n      let top_offset = 0\r\n      let top_tag = tag_under\r\n\r\n      while (!_tagOK(top_tag) && top_tag === tag_under && e.originalEvent.pageY - editor.win.pageYOffset - top_offset > 0) {\r\n        top_offset++ \r\n        top_tag = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset - top_offset)\r\n      }\r\n\r\n      if (!_tagOK(top_tag) || ($draggable_helper && editor.$el.find(top_tag).length === 0 && top_tag !== $draggable_helper.get(0))) { top_tag = null  }\r\n\r\n      // Look below for the closest tag.\r\n      let bottom_offset = 0 \r\n      let bottom_tag = tag_under \r\n\r\n      while (!_tagOK(bottom_tag) && bottom_tag === tag_under && e.originalEvent.pageY - editor.win.pageYOffset + bottom_offset < $(editor.doc).height()) {\r\n        bottom_offset++ \r\n        bottom_tag = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset + bottom_offset)\r\n      }\r\n\r\n      if (!_tagOK(bottom_tag) || ($draggable_helper && editor.$el.find(bottom_tag).length === 0 && bottom_tag !== $draggable_helper.get(0))) { bottom_tag = null }\r\n\r\n      if (bottom_tag === null && top_tag) tag_under = top_tag\r\n\r\n      else if (bottom_tag && top_tag === null) tag_under = bottom_tag\r\n\r\n      else if (bottom_tag && top_tag) {\r\n        tag_under = (top_offset < bottom_offset ? top_tag : bottom_tag)\r\n      }\r\n      else {\r\n        tag_under = null\r\n      }\r\n    }\r\n\r\n    // Stop if tag under is draggable helper.\r\n    if ($(tag_under).hasClass('fr-drag-helper')) return false\r\n\r\n    // Get block parent.\r\n    if (tag_under && !editor.node.isBlock(tag_under)) {\r\n      tag_under = editor.node.blockParent(tag_under)\r\n    }\r\n\r\n    // Normalize TABLE parent.\r\n    if (tag_under && ['TD', 'TH', 'TR', 'THEAD', 'TBODY'].indexOf(tag_under.tagName) >= 0) {\r\n      tag_under = $(tag_under).parents('table').get(0)\r\n    }\r\n\r\n    // Normalize LIST parent.\r\n    if (tag_under && ['LI'].indexOf(tag_under.tagName) >= 0) {\r\n      tag_under = $(tag_under).parents('UL, OL').get(0)\r\n    }\r\n\r\n    if (tag_under && !$(tag_under).hasClass('fr-drag-helper')) {\r\n\r\n      // Init helper.\r\n      if (!$draggable_helper) {\r\n        if (!FE.$draggable_helper) FE.$draggable_helper = $(document.createElement('div')).attr('class', 'fr-drag-helper')\r\n\r\n        $draggable_helper = FE.$draggable_helper\r\n\r\n        editor.events.on('shared.destroy', function () {\r\n          $draggable_helper.html('').removeData().remove()\r\n          $draggable_helper = null\r\n        }, true)\r\n      }\r\n\r\n      let above\r\n      const mouse_y = e.originalEvent.pageY\r\n\r\n      if (mouse_y < $(tag_under).offset().top + $(tag_under).outerHeight() / 2) above = true\r\n      else above = false\r\n\r\n      let $tag_under = $(tag_under)\r\n      let margin = 0\r\n\r\n      // Should go below and there is no tag below.\r\n      if (!above && $tag_under.next().length === 0) {\r\n        if ($draggable_helper.data('fr-position') !== 'after' || !$tag_under.is($draggable_helper.data('fr-tag'))) {\r\n          margin = parseFloat($tag_under.css('margin-bottom')) || 0\r\n\r\n          _setHelperSize(\r\n            $tag_under.offset().top + $(tag_under).height() + margin / 2 - editor.$box.offset().top,\r\n            $tag_under.offset().left - editor.win.pageXOffset - editor.$box.offset().left,\r\n            $tag_under.width()\r\n          ) \r\n\r\n          $draggable_helper.data('fr-position', 'after')\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Should go below then we take the next tag.\r\n        if (!above) {\r\n          $tag_under = $tag_under.next()\r\n        }\r\n\r\n        if ($draggable_helper.data('fr-position') !== 'before' || !$tag_under.is($draggable_helper.data('fr-tag'))) {\r\n          if ($tag_under.prev().length > 0) {\r\n            margin = parseFloat($tag_under.prev().css('margin-bottom')) || 0\r\n          }\r\n          margin = Math.max(margin, parseFloat($tag_under.css('margin-top')) || 0)\r\n\r\n          _setHelperSize(\r\n            $tag_under.offset().top - margin / 2 - editor.$box.offset().top,\r\n            $tag_under.offset().left - editor.win.pageXOffset - editor.$box.offset().left,\r\n            $tag_under.width()\r\n          )\r\n\r\n          $draggable_helper.data('fr-position', 'before')\r\n        }\r\n      }\r\n\r\n      $draggable_helper.data('fr-tag', $tag_under)\r\n\r\n      $draggable_helper.addClass('fr-visible')\r\n      editor.$box.append($draggable_helper)\r\n    }\r\n    else if ($draggable_helper && editor.$box.find($draggable_helper).length > 0) {\r\n      $draggable_helper.removeClass('fr-visible')\r\n    }\r\n  }\r\n\r\n  function _dragOver(e) {\r\n    e.originalEvent.dataTransfer.dropEffect = 'move'\r\n\r\n    if (!editor.opts.dragInline) {\r\n      e.preventDefault()\r\n\r\n      _positionHelper(e)\r\n    }\r\n\r\n    else if (!_getDraggedEl() || editor.browser.msie || editor.browser.edge) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  function _dragEnter(e) {\r\n    e.originalEvent.dataTransfer.dropEffect = 'move'\r\n\r\n    if (!editor.opts.dragInline) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  function _documentDragEnd(e) {\r\n    editor.$el.attr('contenteditable', true) \r\n    const $draggedEl = editor.$el.find('.fr-dragging') \r\n\r\n    if ($draggable_helper && $draggable_helper.hasClass('fr-visible') && editor.$box.find($draggable_helper).length) {\r\n      _drop(e) \r\n    }\r\n    else if ($draggedEl.length) {\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n    }\r\n\r\n    if ($draggable_helper && editor.$box.find($draggable_helper).length) {\r\n      $draggable_helper.removeClass('fr-visible') \r\n    }\r\n\r\n    $draggedEl.removeClass('fr-dragging') \r\n  }\r\n\r\n  function _getDraggedEl() {\r\n    let $draggedEl = null \r\n\r\n    // Search of the instance we're dragging from.\r\n    for (let i = 0;  i < FE.INSTANCES.length;  i++) {\r\n      $draggedEl = FE.INSTANCES[i].$el.find('.fr-dragging') \r\n\r\n      if ($draggedEl.length) {\r\n        return $draggedEl.get(0) \r\n      }\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n    editor.$el.attr('contenteditable', true) \r\n    let $draggedEl \r\n    let inst \r\n\r\n    // Inst is the intance we're dragging from.\r\n    for (let i = 0;  i < FE.INSTANCES.length;  i++) {\r\n      $draggedEl = FE.INSTANCES[i].$el.find('.fr-dragging') \r\n\r\n      if ($draggedEl.length) {\r\n        inst = FE.INSTANCES[i] \r\n        break \r\n      }\r\n    }\r\n\r\n    // There is a dragged element.\r\n    if ($draggedEl.length) {\r\n\r\n      // Cancel anything else.\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n\r\n      // Look for draggable helper.\r\n      if ($draggable_helper && $draggable_helper.hasClass('fr-visible') && editor.$box.find($draggable_helper).length) {\r\n        $draggable_helper.data('fr-tag')[$draggable_helper.data('fr-position')]('<span class=\"fr-marker\"></span>') \r\n        $draggable_helper.removeClass('fr-visible') \r\n      }\r\n      else {\r\n        const ok = editor.markers.insertAtPoint(e.originalEvent) \r\n\r\n        if (ok === false) return false \r\n      }\r\n\r\n      // Remove dragging class.\r\n      $draggedEl.removeClass('fr-dragging') \r\n\r\n      $draggedEl = editor.events.chainTrigger('element.beforeDrop', $draggedEl) \r\n\r\n      if ($draggedEl === false) {\r\n        return false \r\n      }\r\n\r\n      // Image with link.\r\n      let $droppedEl = $draggedEl \r\n\r\n      if ($draggedEl.parent().is('A') && $draggedEl.parent().get(0).childNodes.length === 1) {\r\n        $droppedEl = $draggedEl.parent() \r\n      }\r\n\r\n      // Replace marker with the dragged element.\r\n      if (!editor.core.isEmpty()) {\r\n        const $marker = editor.$el.find('.fr-marker') \r\n        $marker.replaceWith(FE.MARKERS) \r\n        editor.selection.restore() \r\n      }\r\n      else {\r\n        editor.events.focus() \r\n      }\r\n\r\n      // Save undo step if the current instance is different than the original one.\r\n      if (inst !== editor && !editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n      // Place new elements.\r\n      if (!editor.core.isEmpty()) {\r\n        const marker = editor.markers.insert() \r\n\r\n        // Make sure we do not have marker inside $droppedEl.\r\n        if ($droppedEl.find(marker).length === 0) {\r\n          $(marker).replaceWith($droppedEl) \r\n        }\r\n        else if ($draggedEl.find(marker).length === 0) {\r\n          $(marker).replaceWith($draggedEl) \r\n        }\r\n\r\n        $draggedEl.after(FE.MARKERS) \r\n        editor.selection.restore() \r\n      }\r\n      else {\r\n        editor.$el.html($droppedEl) \r\n      }\r\n\r\n      // Hide all popups.\r\n      editor.popups.hideAll() \r\n      editor.selection.save() \r\n      editor.$el.find(editor.html.emptyBlockTagsQuery()).not('TD, TH, LI, .fr-inner').not(editor.opts.htmlAllowedEmptyTags.join(',')).remove() \r\n      editor.html.wrap() \r\n      editor.html.fillEmptyBlocks() \r\n      editor.selection.restore() \r\n      editor.undo.saveStep() \r\n\r\n      if (editor.opts.iframe) editor.size.syncIframe() \r\n\r\n      // Mark changes in the original instance as well.\r\n      if (inst !== editor) {\r\n        inst.popups.hideAll() \r\n        inst.$el.find(inst.html.emptyBlockTagsQuery()).not('TD, TH, LI, .fr-inner').remove() \r\n        inst.html.wrap() \r\n        inst.html.fillEmptyBlocks() \r\n        inst.undo.saveStep() \r\n        inst.events.trigger('element.dropped') \r\n\r\n        if (inst.opts.iframe) inst.size.syncIframe() \r\n      }\r\n\r\n      editor.events.trigger('element.dropped', [$droppedEl]) \r\n\r\n      // Stop bubbling.\r\n\r\n      return false \r\n    }\r\n\r\n    // Save step when something else is dragged into the editor.\r\n    else {\r\n      if ($draggable_helper) $draggable_helper.removeClass('fr-visible') \r\n\r\n      if (!editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n      setTimeout(function () {\r\n        editor.undo.saveStep() \r\n      }, 0) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do cleanup when the html is taken.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Remove drag helper.\r\n    if (el && el.tagName === 'DIV' && editor.node.hasClass(el, 'fr-drag-helper')) {\r\n      el.parentNode.removeChild(el) \r\n    }\r\n\r\n    // Remove from nested elements too.\r\n    else if (el && el.nodeType === Node.ELEMENT_NODE) {\r\n      const els = el.querySelectorAll('div.fr-drag-helper') \r\n\r\n      for (let i = 0;  i < els.length;  i++) {\r\n        els[i].parentNode.removeChild(els[i]) \r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  let $draggable_helper \r\n\r\n  function _init() {\r\n\r\n    // Force drag inline when ENTER_BR is active.\r\n    if (editor.opts.enter === FE.ENTER_BR) editor.opts.dragInline = true \r\n\r\n    // Starting to drag.\r\n    editor.events.on('dragstart', _dragStart, true) \r\n\r\n    // Inline dragging is off.\r\n    editor.events.on('dragover', _dragOver, true) \r\n    editor.events.on('dragenter', _dragEnter, true) \r\n\r\n    // Document drop. Remove moving class.\r\n    editor.events.on('document.dragend', _documentDragEnd, true) \r\n    editor.events.on('document.drop', _documentDragEnd, true) \r\n\r\n    // Drop.\r\n    editor.events.on('drop', _drop, true) \r\n\r\n    // Clean getting the HTML.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js';\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  editInPopup: false\r\n})\r\n\r\nFE.MODULES.editInPopup = function (editor) {\r\n  function _initPopup() {\r\n\r\n    // Image buttons.\r\n    const txt = `<div id=\"fr-text-edit-${editor.id}\" class=\"fr-layer fr-text-edit-layer\"><div class=\"fr-input-line\"><input type=\"text\" placeholder=\"${editor.language.translate('Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"updateText\" tabIndex=\"2\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      edit: txt\r\n    }\r\n\r\n    editor.popups.create('text.edit', template)\r\n  }\r\n\r\n  function _showPopup() {\r\n    const $popup = editor.popups.get('text.edit')\r\n\r\n    let text\r\n\r\n    if (editor.el.tagName === 'INPUT') {\r\n      text = editor.$el.attr('placeholder')\r\n    }\r\n    else {\r\n      text = editor.$el.text()\r\n    }\r\n\r\n    $popup.find('input').val(text).trigger('change')\r\n    editor.popups.setContainer('text.edit', editor.$sc)\r\n    editor.popups.show('text.edit', editor.$el.offset().left + editor.$el.outerWidth() / 2, editor.$el.offset().top + editor.$el.outerHeight(), editor.$el.outerHeight())\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Show edit popup.\r\n    editor.events.$on(editor.$el, editor._mouseup, () => {\r\n      setTimeout(() => {\r\n        _showPopup()\r\n      }, 10)\r\n    })\r\n  }\r\n\r\n  function update() {\r\n    const $popup = editor.popups.get('text.edit')\r\n\r\n    let new_text = $popup.find('input').val()\r\n\r\n    if (new_text.length === 0) {\r\n      new_text = editor.opts.placeholderText\r\n    }\r\n\r\n    if (editor.el.tagName === 'INPUT') {\r\n      editor.$el.attr('placeholder', new_text)\r\n    }\r\n    else {\r\n      editor.$el.text(new_text)\r\n    }\r\n\r\n    editor.events.trigger('contentChanged')\r\n\r\n    editor.popups.hide('text.edit')\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  const _init = () => {\r\n    if (editor.opts.editInPopup) {\r\n      _initPopup()\r\n      _initEvents()\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    update\r\n  }\r\n}\r\n\r\nFE.RegisterCommand('updateText', {\r\n  focus: false,\r\n  undo: false,\r\n  callback() {\r\n    this.editInPopup.update()\r\n  }\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  emoticons: '[_BUTTONS_][_CUSTOM_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  emoticonsSet: [\r\n    {\r\n      'id': 'people',\r\n      'name': 'Smileys & People',\r\n      'code': '1f600',\r\n      'emoticons': [\r\n        { code: '1f600', desc: 'Grinning face' },\r\n        { code: '1f601', desc: 'Grinning Face with Smiling Eyes' },\r\n        { code: '1f602', desc: 'Face with Tears of Joy' },\r\n        { code: '1f603', desc: 'Smiling Face with Open Mouth' },\r\n        { code: '1f604', desc: 'Smiling Face with Open Mouth and Smiling Eyes' },\r\n        { code: '1f605', desc: 'Smiling Face with Open Mouth and Cold Sweat' },\r\n        { code: '1f606', desc: 'Smiling Face with Open Mouth and Tightly-Closed Eyes' },\r\n        { code: '1f609', desc: 'Winking Face' },\r\n        { code: '1f60a', desc: 'Smiling Face with Smiling Eyes' },\r\n        { code: '1f608', desc: 'Face Savouring Delicious Food' },\r\n        { code: '1f60e', desc: 'Smiling Face with Sunglasses' },\r\n        { code: '1f60d', desc: 'Smiling Face with Heart-Shaped Eyes' },\r\n        { code: '1f618', desc: 'Face Throwing a Kiss' },\r\n        { code: '1f617', desc: 'Kissing Face' },\r\n        { code: '1f619', desc: 'Kissing Face with Smiling Eyes' },\r\n        { code: '1f61a', desc: 'Kissing Face with Closed Eyes' },\r\n        { code: '263a', desc: 'White Smiling Face' },\r\n        { code: '1f642', desc: 'Slightly Smiling Face' },\r\n        { code: '1f610', desc: 'Neutral Face' },\r\n        { code: '1f611', desc: 'Expressionless Face' },\r\n        { code: '1f636', desc: 'Face Without Mouth' },\r\n        { code: '1f60f', desc: 'Smirking Face' },\r\n        { code: '1f623', desc: 'Persevering Face' },\r\n        { code: '1f625', desc: 'Disappointed but Relieved Face' },\r\n        { code: '1f62e', desc: 'Face with Open Mouth' },\r\n        { code: '1f62f', desc: 'Hushed Face' },\r\n        { code: '1f62a', desc: 'Sleepy Face' },\r\n        { code: '1f62b', desc: 'Tired Face' },\r\n        { code: '1f634', desc: 'Sleeping Face' },\r\n        { code: '1f60c', desc: 'Relieved Face' },\r\n        { code: '1f61b', desc: 'Face with Stuck-out Tongue' },\r\n        { code: '1f61c', desc: 'Face with Stuck-out Tongue and Winking Eye' },\r\n        { code: '1f61d', desc: 'Face with Stuck-out Tongue and Tightly-Closed Eyes' },\r\n        { code: '1f612', desc: 'Unamused Face' },\r\n        { code: '1f613', desc: 'Face with Cold Sweat' },\r\n        { code: '1f613', desc: 'Face with Cold Sweat' },\r\n        { code: '1f614', desc: 'Pensive Face' },\r\n        { code: '1f615', desc: 'Confused Face' },\r\n        { code: '1f632', desc: 'Astonished  Face' },\r\n        { code: '1f616', desc: 'Confounded Face' },\r\n        { code: '1f61e', desc: 'Disappointed Face' },\r\n        { code: '1f61f', desc: 'Worried Face' },\r\n        { code: '1f624', desc: 'Face with Look of Triumph' },\r\n        { code: '1f622', desc: 'Crying Face' },\r\n        { code: '1f62d', desc: 'Loudly Crying Face' },\r\n        { code: '1f626', desc: 'Frowning Face with Open Mouth' },\r\n        { code: '1f627', desc: 'Anguished Face' },\r\n        { code: '1f628', desc: 'Fearful Face' },\r\n        { code: '1f629', desc: 'Weary Face' },\r\n        { code: '1f62c', desc: 'Grimacing Face' },\r\n        { code: '1f630', desc: 'Face with Open Mouth and Cold Sweat' },\r\n        { code: '1f631', desc: 'Face Screaming in Fear' },\r\n        { code: '1f633', desc: 'Flushed Face' },\r\n        { code: '1f635', desc: 'Dizzy Face' },\r\n        { code: '1f621', desc: 'Pouting Face' },\r\n        { code: '1f620', desc: 'Angry Face' },\r\n        { code: '1f637', desc: 'Face with Medical Mask' },\r\n        { code: '1f607', desc: 'Smiling Face with Halo' },\r\n        { code: '1f608', desc: 'Smiling Face with Horns' },\r\n        { code: '1f47f', desc: 'Imp' },\r\n        { code: '1f479', desc: 'Japanese Ogre' },\r\n        { code: '1f47a', desc: 'Japanese Goblin' },\r\n        { code: '1f480', desc: 'Skull' },\r\n        { code: '1f47b', desc: 'Ghost' },\r\n        { code: '1f47d', desc: 'Extraterrestrial Alien' },\r\n        { code: '1f47e', desc: 'Alien Monster' },\r\n        { code: '1f4a9', desc: 'Pile of Poo' },\r\n        { code: '1f63a', desc: 'Smiling Cat Face with Open Mouth' },\r\n        { code: '1f638', desc: 'Grinning Cat Face with Smiling Eyes' },\r\n        { code: '1f639', desc: 'Cat Face with Tears of Joy' },\r\n        { code: '1f63b', desc: 'Smiling Cat Face with Heart-Shaped Eyes' },\r\n        { code: '1f63c', desc: 'Cat Face with Wry Smile' },\r\n        { code: '1f63d', desc: 'Kissing Cat Face with Closed Eyes' },\r\n        { code: '1f640', desc: 'Weary Cat Face' },\r\n        { code: '1f63f', desc: 'Crying Cat Face' },\r\n        { code: '1f63e', desc: 'Pouting Cat Face' },\r\n        { code: '1f648', desc: 'See-No-Evil Monkey' },\r\n        { code: '1f649', desc: 'Hear-No-Evil Monkey' },\r\n        { code: '1f64a', desc: 'Speak-No-Evil Monkey' },\r\n        { code: '1f476', desc: 'Baby' },\r\n        { code: '1f466', desc: 'Boy' },\r\n        { code: '1f467', desc: 'Girl' },\r\n        { code: '1f468', desc: 'Man' },\r\n        { code: '1f469', desc: 'Woman' },\r\n        { code: '1f474', desc: 'Older Man' },\r\n        { code: '1f475', desc: 'Older Woman' },\r\n        { code: '1f46e', desc: 'Police Officer' },\r\n        { code: '1f482', desc: ' Guardsman' },\r\n        { code: '1f477', desc: ' Construction Worker' },\r\n        { code: '1f478', desc: 'Princess' },\r\n        { code: '1f473', desc: 'Man with Turban' },\r\n        { code: '1f472', desc: 'Man with Gua Pi Mao' },\r\n        { code: '1f471', desc: 'Person with Blond Hair' },\r\n        { code: '1f470', desc: 'Bride with Veil' },\r\n        { code: '1f47c', desc: 'Baby Angel' },\r\n        { code: '1f385', desc: 'Father Christmas' },\r\n        { code: '1f64e', desc: 'Person with Pouting Face' },\r\n        { code: '1f645', desc: 'Face with No Good Gesture' },\r\n        { code: '1f646', desc: 'Face with Ok Gesture' },\r\n        { code: '1f481', desc: 'Information Desk Person' },\r\n        { code: '1f64b', desc: 'Happy Person Raising One Hand' },\r\n        { code: '1f647', desc: 'Person Bowing Deeply' },\r\n        { code: '1f486', desc: 'Face Massage' },\r\n        { code: '1f487', desc: 'Haircut' },\r\n        { code: '1f6b6', desc: 'Pedestrian' },\r\n        { code: '1f3c3', desc: 'Runner' },\r\n        { code: '1f483', desc: 'Dancer' },\r\n        { code: '1f46f', desc: 'Woman with Bunny Ears' },\r\n        { code: '1f6c0', desc: 'Bath' },\r\n        { code: '1f464', desc: 'Bust in Silhouette' },\r\n        { code: '1f465', desc: 'Busts in Silhouette' },\r\n        { code: '1f3c7', desc: 'Horse Racing' },\r\n        { code: '1f3c2', desc: ' Snowboarder' },\r\n        { code: '1f3c4', desc: ' Surfer' },\r\n        { code: '1f6a3', desc: ' Rowboat' },\r\n        { code: '1f3ca', desc: ' Swimmer' },\r\n        { code: '1f6b4', desc: ' Bicyclist' },\r\n        { code: '1f6b5', desc: 'Mountain Bicyclist' },\r\n        { code: '1f46b', desc: ' Man and Woman Holding Hands' },\r\n        { code: '1f46c', desc: 'Two Men Holding Hands' },\r\n        { code: '1f46d', desc: 'Two Women Holding Hands' },\r\n        { code: '1f48f', desc: 'Kiss' },\r\n        { code: '1f468-2764-1f48b-1f468', uCode: '\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68', desc: 'Man Kiss Man' },\r\n        { code: '1f469-2764-1f48b-1f469', uCode: '\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69', desc: 'Woman Kiss Woman' },\r\n        { code: '1f491', desc: 'Couple with Heart' },\r\n        { code: '1f468-2764-1f468', uCode: '\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC68', desc: 'Man Heart Man' },\r\n        { code: '1f469-2764-1f469', uCode: '\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69', desc: 'Woman Heart Woman' },\r\n        { code: '1f46a', desc: 'Family' },\r\n        { code: '1f468', desc: 'Man Woman Boy' },\r\n        { code: '1f468-1f469-1f467', desc: 'Man Woman Girl' },\r\n        { code: '1f468-1f469-1f467-1f466', desc: 'Man Woman Girl Boy' },\r\n        { code: '1f468-1f469-1f466-1f466', desc: 'Man Woman Boy Boy' },\r\n        { code: '1f468-1f469-1f467-1f467', desc: 'Man Woman Girl Girl' },\r\n        { code: '1f468-1f468-1f466', desc: 'Man Man Boy' },\r\n        { code: '1f468-1f468-1f467', desc: 'Man Man Girl' },\r\n        { code: '1f468-1f468-1f467-1f466', desc: 'Man Man Girl Boy' },\r\n        { code: '1f468-1f468-1f466-1f466', desc: 'Man Man Boy Boy' },\r\n        { code: '1f469-1f469-1f466', desc: 'Woman Woman Boy' },\r\n        { code: '1f469-1f469-1f467', desc: 'Woman Woman Girl' },\r\n        { code: '1f469-1f469-1f467-1f466', desc: 'Woman Woman Girl Boy' },\r\n        { code: '1f469-1f469-1f467-1f467', desc: 'Woman Woman Girl Girl' },\r\n        { code: '1f4aa', desc: 'Flexed Biceps' },\r\n        { code: '1f448', desc: 'White Left Pointing Backhand Index' },\r\n        { code: '1f449', desc: 'White Right Pointing Backhand Index' },\r\n        { code: '1f446', desc: 'White Up Pointing Backhand Index' },\r\n        { code: '1f447', desc: 'White Down Pointing Backhand Index' },\r\n        { code: '270c', desc: 'Victory Hand' },\r\n        { code: '270b', desc: 'Raised Hand' },\r\n        { code: '1f44c', desc: 'Ok Hand Sign' },\r\n        { code: '1f44d', desc: 'Thumbs Up Sign' },\r\n        { code: '1f44e', desc: 'Thumbs Down Sign' },\r\n        { code: '270a', desc: 'Raised Fist' },\r\n        { code: '1f44a', desc: 'Fisted Hand Sign' },\r\n        { code: '1f44b', desc: 'Waving Hand Sign' },\r\n        { code: '1f44f', desc: 'Clapping Hands Sign' },\r\n        { code: '1f450', desc: 'Open  Hands Sign' },\r\n        { code: '1f64c', desc: 'Person Raising Both Hands in Celebration' },\r\n        { code: '1f64f', desc: 'Person with Folded Hands' },\r\n        { code: '1f485', desc: 'Nail Polish' },\r\n        { code: '1f442', desc: 'Ear' },\r\n        { code: '1f443', desc: 'Nose' },\r\n        { code: '1f463', desc: 'Footprints' },\r\n        { code: '1f440', desc: 'Eyes' },\r\n        { code: '1f445', desc: 'Tongue' },\r\n        { code: '1f444', desc: 'Mouth' },\r\n        { code: '1f48b', desc: 'Kiss Mark' },\r\n        { code: '1f498', desc: 'Heart with Arrow' },\r\n        { code: '2764', desc: 'Heavy Black Heart' },\r\n        { code: '1f493', desc: 'Heavy Black Heart' },\r\n        { code: '1f494', desc: 'Broken Heart' },\r\n        { code: '1f495', desc: 'Two Hearts' },\r\n        { code: '1f496', desc: 'Sparkling Hearts' },\r\n        { code: '1f497', desc: 'Growing Hearts' },\r\n        { code: '1f499', desc: 'Blue Heart' },\r\n        { code: '1f49a', desc: 'Green Heart' },\r\n        { code: '1f49b', desc: 'Yellow Heart' },\r\n        { code: '1f49c', desc: 'Purple Heart' },\r\n        { code: '1f49d', desc: 'Heart with Ribbon' },\r\n        { code: '1f49e', desc: 'Revolving Hearts' },\r\n        { code: '1f49f', desc: 'Heart Decoration' },\r\n        { code: '1f48c', desc: 'Love Letter' },\r\n        { code: '1f4a4', desc: 'Sleeping Symbol' },\r\n        { code: '1f4a2', desc: 'Anger Symbol' },\r\n        { code: '1f4a3', desc: 'Bomb' },\r\n        { code: '1f4a5', desc: 'Collision Symbol' },\r\n        { code: '1f4a6', desc: 'Splashing Sweat Symbol' },\r\n        { code: '1f4a8', desc: 'Dash Symbol' },\r\n        { code: '1f4ab', desc: 'Dizzy Symbol' },\r\n        { code: '1f4ab', desc: 'Dizzy Symbol' },\r\n        { code: '1f4ac', desc: 'Speech Balloon' },\r\n        { code: '1f4ad', desc: 'Thought Balloon' },\r\n        { code: '1f453', desc: 'Eyeglasses' },\r\n        { code: '1f454', desc: 'Necktie' },\r\n        { code: '1f455', desc: 'T-Shirt' },\r\n        { code: '1f456', desc: 'Jeans' },\r\n        { code: '1f457', desc: 'Dress' },\r\n        { code: '1f458', desc: 'Kimono' },\r\n        { code: '1f459', desc: 'Bikini' },\r\n        { code: '1f45a', desc: 'Womans Clothes' },\r\n        { code: '1f45b', desc: 'Purse' },\r\n        { code: '1f45c', desc: 'Handbag' },\r\n        { code: '1f45d', desc: 'Pouch' },\r\n        { code: '1f392', desc: 'School Satchel' },\r\n        { code: '1f45e', desc: 'Mans Shoe' },\r\n        { code: '1f45f', desc: 'Athletic Shoe' },\r\n        { code: '1f460', desc: 'High-Heeled Shoe' },\r\n        { code: '1f461', desc: 'Womans Sandal' },\r\n        { code: '1f462', desc: 'Womans Boots' },\r\n        { code: '1f451', desc: 'Crown' },\r\n        { code: '1f452', desc: 'Womans Hat' },\r\n        { code: '1f462', desc: 'Top Hat' },\r\n        { code: '1f393', desc: 'Graduation Cap' },\r\n        { code: '1f484', desc: 'Lipstick' },\r\n        { code: '1f48d', desc: 'Ring' },\r\n        { code: '1f48e', desc: 'Gem Stone' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'nature',\r\n      'name': 'Animals & Nature',\r\n      'code': '1F435',\r\n      'emoticons': [\r\n        { code: '1F435', desc: 'Monkey Face' },\r\n        { code: '1F412', desc: 'Monkey' },\r\n        { code: '1F436', desc: 'Dog Face' },\r\n        { code: '1F415', desc: 'Dog' },\r\n        { code: '1F429', desc: 'Poodle' },\r\n        { code: '1F43A', desc: 'Wolf Face' },\r\n        { code: '1F431', desc: 'Cat Face' },\r\n        { code: '1F408', desc: 'Cat' },\r\n        { code: '1F42F', desc: 'Tiger Face' },\r\n        { code: '1F405', desc: 'Tiger' },\r\n        { code: '1F406', desc: 'Leopard' },\r\n        { code: '1F434', desc: 'Horse Face' },\r\n        { code: '1F40E', desc: 'Horse' },\r\n        { code: '1F42E', desc: 'Cow Face' },\r\n        { code: '1F402', desc: 'Ox' },\r\n        { code: '1F403', desc: 'Water Buffalo' },\r\n        { code: '1F404', desc: 'Cow' },\r\n        { code: '1F437', desc: 'Pig Face' },\r\n        { code: '1F416', desc: 'Pig' },\r\n        { code: '1F417', desc: 'Boar' },\r\n        { code: '1F43D', desc: 'Pig Nose' },\r\n        { code: '1F40F', desc: 'Ram' },\r\n        { code: '1F411', desc: 'Sheep' },\r\n        { code: '1F410', desc: 'Goat' },\r\n        { code: '1F42A', desc: 'Dromedary Camel' },\r\n        { code: '1F42B', desc: 'Bactrian Camel' },\r\n        { code: '1F418', desc: 'Elephant' },\r\n        { code: '1F42D', desc: 'Mouse Face' },\r\n        { code: '1F401', desc: 'Mouse' },\r\n        { code: '1F400', desc: 'Rat' },\r\n        { code: '1F439', desc: 'Hamster Face' },\r\n        { code: '1F430', desc: 'Rabbit Face' },\r\n        { code: '1F407', desc: 'Rabbit' },\r\n        { code: '1F43B', desc: 'Bear Face' },\r\n        { code: '1F428', desc: 'Koala' },\r\n        { code: '1F43C', desc: 'Panda Face' },\r\n        { code: '1F43E', desc: 'Paw Prints' },\r\n        { code: '1F414', desc: 'Chicken' },\r\n        { code: '1F413', desc: 'Rooster' },\r\n        { code: '1F423', desc: 'Hatching Chick' },\r\n        { code: '1F424', desc: 'Baby Chick' },\r\n        { code: '1F425', desc: 'Front-Facing Baby Chick' },\r\n        { code: '1F426', desc: 'Bird' },\r\n        { code: '1F427', desc: 'Penguin' },\r\n        { code: '1F438', desc: 'Frog Face' },\r\n        { code: '1F40A', desc: 'Crocodile' },\r\n        { code: '1F422', desc: 'Turtle' },\r\n        { code: '1F40D', desc: 'Snake' },\r\n        { code: '1F432', desc: 'Dragon Face' },\r\n        { code: '1F409', desc: 'Dragon' },\r\n        { code: '1F433', desc: 'Spouting Whale' },\r\n        { code: '1F40B', desc: 'Whale' },\r\n        { code: '1F42C', desc: 'Dolphin' },\r\n        { code: '1F41F', desc: 'Fish' },\r\n        { code: '1F420', desc: 'Tropical Fish' },\r\n        { code: '1F421', desc: 'Blowfish' },\r\n        { code: '1F419', desc: 'Octopus' },\r\n        { code: '1F41A', desc: 'Spiral Shell' },\r\n        { code: '1F40C', desc: 'Snail' },\r\n        { code: '1F41B', desc: 'Bug' },\r\n        { code: '1F41C', desc: 'Ant' },\r\n        { code: '1F41D', desc: 'Honeybee' },\r\n        { code: '1F41E', desc: 'Lady Beetle' },\r\n        { code: '1F490', desc: 'Bouquet' },\r\n        { code: '1F338', desc: 'Cherry Blossom' },\r\n        { code: '1F4AE', desc: 'White Flower' },\r\n        { code: '1F339', desc: 'Rose' },\r\n        { code: '1F33A', desc: 'Hibiscus' },\r\n        { code: '1F33B', desc: 'Sunflower' },\r\n        { code: '1F33C', desc: 'Blossom' },\r\n        { code: '1F337', desc: 'Tulip' },\r\n        { code: '1F331', desc: 'Seedling' },\r\n        { code: '1F332', desc: 'Evergreen Tree' },\r\n        { code: '1F333', desc: 'Deciduous Tree' },\r\n        { code: '1F334', desc: 'Palm Tree' },\r\n        { code: '1F335', desc: 'Cactus' },\r\n        { code: '1F33E', desc: 'Ear of Rice' },\r\n        { code: '1F33F', desc: 'Herb' },\r\n        { code: '2618', desc: 'Four Leaf Clover' },\r\n        { code: '1F341', desc: 'Maple Leaf' },\r\n        { code: '1F342', desc: 'Fallen Leaf' },\r\n        { code: '1F343', desc: 'Leaf Fluttering in Wind' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'foods',\r\n      'name': 'Food & Drink',\r\n      'code': '1F347',\r\n      'emoticons': [\r\n        { code: '1F347', desc: 'Grapes' },\r\n        { code: '1F348', desc: 'Melon' },\r\n        { code: '1F349', desc: 'Watermelon' },\r\n        { code: '1F34A', desc: 'Tangerine' },\r\n        { code: '1F34B', desc: 'Lemon' },\r\n        { code: '1F34C', desc: 'Banana' },\r\n        { code: '1F34D', desc: 'Pineapple' },\r\n        { code: '1F34E', desc: 'Red Apple' },\r\n        { code: '1F34F', desc: 'Green Apple' },\r\n        { code: '1F350', desc: 'Pear' },\r\n        { code: '1F351', desc: 'Peach' },\r\n        { code: '1F352', desc: 'Cherries' },\r\n        { code: '1F353', desc: 'Strawberry' },\r\n        { code: '1F345', desc: 'Tomato' },\r\n        { code: '1F346', desc: 'Aubergine' },\r\n        { code: '1F33D', desc: 'Ear of Maize' },\r\n        { code: '1F344', desc: 'Mushroom' },\r\n        { code: '1F330', desc: 'Chestnut' },\r\n        { code: '1F35E', desc: 'Bread' },\r\n        { code: '1F356', desc: 'Meat on Bone' },\r\n        { code: '1F357', desc: 'Poultry Leg' },\r\n        { code: '1F354', desc: 'Hamburger' },\r\n        { code: '1F35F', desc: 'French Fries' },\r\n        { code: '1F355', desc: 'Slice of Pizza' },\r\n        { code: '1F373', desc: 'Cooking' },\r\n        { code: '1F372', desc: 'Pot of Food' },\r\n        { code: '1F371', desc: 'Bento Box' },\r\n        { code: '1F358', desc: 'Rice Cracker' },\r\n        { code: '1F359', desc: 'Rice Ball' },\r\n        { code: '1F35A', desc: 'Cooked Rice' },\r\n        { code: '1F35B', desc: 'Curry and Rice' },\r\n        { code: '1F35C', desc: 'Steaming Bowl' },\r\n        { code: '1F35D', desc: 'Spaghetti' },\r\n        { code: '1F360', desc: 'Roasted Sweet Potato' },\r\n        { code: '1F362', desc: 'Oden' },\r\n        { code: '1F363', desc: 'Sushi' },\r\n        { code: '1F364', desc: 'Fried Shrimp' },\r\n        { code: '1F365', desc: 'Fish Cake with Swirl Design' },\r\n        { code: '1F361', desc: 'Dango' },\r\n        { code: '1F366', desc: 'Soft Ice Cream' },\r\n        { code: '1F367', desc: 'Shaved Ice' },\r\n        { code: '1F368', desc: 'Ice Cream' },\r\n        { code: '1F369', desc: 'Doughnut' },\r\n        { code: '1F36A', desc: 'Cookie' },\r\n        { code: '1F382', desc: 'Birthday Cake' },\r\n        { code: '1F370', desc: 'Shortcake' },\r\n        { code: '1F36B', desc: 'Chocolate Bar' },\r\n        { code: '1F36C', desc: 'Candy' },\r\n        { code: '1F36D', desc: 'Lollipop' },\r\n        { code: '1F36E', desc: 'Custard' },\r\n        { code: '1F36F', desc: 'Honey Pot' },\r\n        { code: '1F37C', desc: 'Baby Bottle' },\r\n        { code: '2615', desc: 'Hot Beverage' },\r\n        { code: '1F375', desc: 'Teacup Without Handle' },\r\n        { code: '1F376', desc: 'Sake Bottle and Cup' },\r\n        { code: '1F377', desc: 'Wine Glass' },\r\n        { code: '1F378', desc: 'Cocktail Glass' },\r\n        { code: '1F379', desc: 'Tropical Drink' },\r\n        { code: '1F37A', desc: 'Beer Mug' },\r\n        { code: '1F37B', desc: 'Clinking Beer Mugs' },\r\n        { code: '1F374', desc: 'Fork and Knife' },\r\n        { code: '1F52A', desc: 'Hocho' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'activity',\r\n      'name': 'Activities',\r\n      'code': '1f383',\r\n      'emoticons': [\r\n        { code: '1f383', desc: ' Jack-O-Lantern' },\r\n        { code: '1f384', desc: 'Christmas Tree' },\r\n        { code: '1f386', desc: ' Fireworks' },\r\n        { code: '1f387', desc: 'Firework Sparkler' },\r\n        { code: '2728', desc: ' Sparkles' },\r\n        { code: '1f388', desc: 'Balloon' },\r\n        { code: '1f389', desc: 'Party Popper' },\r\n        { code: '1f38a', desc: 'Confetti Ball' },\r\n        { code: '1f38b', desc: 'Tanabata Tree' },\r\n        { code: '1f38d', desc: 'Pine Decoration' },\r\n        { code: '1f38e', desc: 'Japanese Dolls' },\r\n        { code: '1f38f', desc: 'Carp Streamer' },\r\n        { code: '1f390', desc: 'Wind Chime' },\r\n        { code: '1f391', desc: 'Moon Viewing Ceremony' },\r\n        { code: '1f380', desc: 'Ribbon' },\r\n        { code: '1f381', desc: 'Wrapped Present' },\r\n        { code: '1f3ab', desc: 'Ticket' },\r\n        { code: '1f3c6', desc: 'Trophy' },\r\n        { code: '1f388', desc: 'Balloon' },\r\n        { code: '26bd', desc: 'Soccer Ball' },\r\n        { code: '26be', desc: 'Baseball' },\r\n        { code: '1f3c0', desc: 'Basketball and Hoop' },\r\n        { code: '1f3c8', desc: 'American Football' },\r\n        { code: '1f3c9', desc: 'Rugby Football' },\r\n        { code: '1f3be', desc: 'Tennis Racquet and Ball' },\r\n        { code: '1f3b1', desc: 'Billiards' },\r\n        { code: '1f3b3', desc: 'Bowling' },\r\n        { code: '1f3af', desc: 'Direct Hit' },\r\n        { code: '26f3', desc: 'Flag in Hole' },\r\n        { code: '1f3a3', desc: 'Fishing Pole and Fish' },\r\n        { code: '1f3bd', desc: 'Running Shirt with Sash' },\r\n        { code: '1f3bf', desc: 'Ski and Ski Boot' },\r\n        { code: '1f3ae', desc: 'Video Game' },\r\n        { code: '1f3b2', desc: 'Game Die' },\r\n        { code: '2660', desc: 'Black Spade Suit' },\r\n        { code: '2665', desc: 'Black Heart SuiT' },\r\n        { code: '2666', desc: 'Black Diamond Suit' },\r\n        { code: '2663', desc: 'Black Club Suit' },\r\n        { code: '1f0cf', desc: 'Playing Card Black Joker' },\r\n        { code: '1f004', desc: 'Mahjong Tile Red Dragon' },\r\n        { code: '1f3b4', desc: 'Flower Playing Cards' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'places',\r\n      'name': 'Travel & Places',\r\n      'code': '1f30d',\r\n      'emoticons': [\r\n        { code: '1f30d', desc: 'Earth Globe Europe-Africa' },\r\n        { code: '1f30e', desc: 'Earth Globe Americas' },\r\n        { code: '1f30f', desc: 'Earth Globe Asia-Australia' },\r\n        { code: '1f310', desc: 'Globe with Meridians' },\r\n        { code: '1f5fe', desc: 'Silhouette of Japan' },\r\n        { code: '1f30b', desc: 'Volcano' },\r\n        { code: '1f5fb', desc: 'Mount Fuji' },\r\n        { code: '1f3e0', desc: 'House Building' },\r\n        { code: '1f3e1', desc: 'House with Garden' },\r\n        { code: '1f3e2', desc: 'Office Building' },\r\n        { code: '1f3e3', desc: 'Japanese Post Office' },\r\n        { code: '1f3e4', desc: 'European Post Office' },\r\n        { code: '1f3e5', desc: 'Hospital' },\r\n        { code: '1f3e6', desc: 'Bank' },\r\n        { code: '1f3e8', desc: 'Hotel' },\r\n        { code: '1f3e9', desc: 'Love Hotel' },\r\n        { code: '1f3ea', desc: 'Convenience Store' },\r\n        { code: '1f3eb', desc: 'School' },\r\n        { code: '1f3ec', desc: 'Department Store' },\r\n        { code: '1f3ed', desc: 'Factory' },\r\n        { code: '1f3ef', desc: 'Japanese Castle' },\r\n        { code: '1f3f0', desc: 'European Castle' },\r\n        { code: '1f492', desc: 'Wedding' },\r\n        { code: '1f5fc', desc: 'Tokyo Tower' },\r\n        { code: '1f5fd', desc: 'Statue of Liberty' },\r\n        { code: '26ea', desc: 'Church' },\r\n        { code: '26f2', desc: 'Fountain' },\r\n        { code: '26fa', desc: 'Tent' },\r\n        { code: '1f301', desc: 'Foggy' },\r\n        { code: '1f303', desc: 'Night with Stars' },\r\n        { code: '1f304', desc: 'Sunrise over Mountains' },\r\n        { code: '1f305', desc: 'Sunrise' },\r\n        { code: '1f306', desc: 'Cityscape at Dusk' },\r\n        { code: '1f307', desc: 'Sunset over Buildings' },\r\n        { code: '1f309', desc: 'Bridge at Night' },\r\n        { code: '2668', desc: 'Hot Springs' },\r\n        { code: '1f30c', desc: 'Milky Way' },\r\n        { code: '1f3a0', desc: 'Carousel Horse' },\r\n        { code: '1f3a1', desc: 'Ferris Wheel' },\r\n        { code: '1f3a2', desc: 'Roller Coaster' },\r\n        { code: '1f488', desc: 'Barber Pole' },\r\n        { code: '1f3aa', desc: 'Circus Tent' },\r\n        { code: '1f3ad', desc: 'Performing Arts' },\r\n        { code: '1f3a8', desc: 'Artist Palette' },\r\n        { code: '1f3b0', desc: 'Slot Machine' },\r\n        { code: '1f682', desc: 'Steam Locomotive' },\r\n        { code: '1f683', desc: 'Railway Car' },\r\n        { code: '1f684', desc: 'High-Speed Train' },\r\n        { code: '1f685', desc: 'High-Speed Train with Bullet Nose' },\r\n        { code: '1f686', desc: 'Train' },\r\n        { code: '1f687', desc: 'Metro' },\r\n        { code: '1f688', desc: 'Light Rail' },\r\n        { code: '1f689', desc: 'Station' },\r\n        { code: '1f68a', desc: 'Tram' },\r\n        { code: '1f69d', desc: 'Monorail' },\r\n        { code: '1f69e', desc: 'Mountain Railway' },\r\n        { code: '1f68b', desc: 'Tram Car' },\r\n        { code: '1f68c', desc: 'Bus' },\r\n        { code: '1f68d', desc: 'Oncoming Bus' },\r\n        { code: '1f68e', desc: 'Trolleybus' },\r\n        { code: '1f690', desc: 'Minibus' },\r\n        { code: '1f691', desc: 'Ambulance' },\r\n        { code: '1f692', desc: 'Fire Engine' },\r\n        { code: '1f693', desc: 'Police Car' },\r\n        { code: '1f694', desc: 'Oncoming Police Car' },\r\n        { code: '1f695', desc: 'Taxi' },\r\n        { code: '1f695', desc: 'Oncoming Taxi' },\r\n        { code: '1f697', desc: 'Automobile' },\r\n        { code: '1f698', desc: 'Oncoming Automobile' },\r\n        { code: '1f699', desc: 'Recreational Vehicle' },\r\n        { code: '1f69a', desc: 'Delivery Truck' },\r\n        { code: '1f69b', desc: 'Articulated Lorry' },\r\n        { code: '1f69c', desc: 'Tractor' },\r\n        { code: '1f6b2', desc: 'Bicycle' },\r\n        { code: '1f68f', desc: 'Bus Stop' },\r\n        { code: '26fd', desc: 'Fuel Pump' },\r\n        { code: '1f6a8', desc: 'Police Cars Revolving Light' },\r\n        { code: '1f6a5', desc: 'Horizontal Traffic Light' },\r\n        { code: '1f6a6', desc: 'Vertical Traffic Light' },\r\n        { code: '1f6a7', desc: 'Construction Sign' },\r\n        { code: '2693', desc: 'Anchor' },\r\n        { code: '26f5', desc: 'Sailboat' },\r\n        { code: '1f6a4', desc: 'Speedboat' },\r\n        { code: '1f6a2', desc: 'Ship' },\r\n        { code: '2708', desc: 'Airplane' },\r\n        { code: '1f4ba', desc: 'Seat' },\r\n        { code: '1f681', desc: 'Helicopter' },\r\n        { code: '1f69f', desc: 'Suspension Railway' },\r\n        { code: '1f6a0', desc: 'Mountain Cableway' },\r\n        { code: '1f6a1', desc: 'Aerial Tramway' },\r\n        { code: '1f680', desc: 'Rocket' },\r\n        { code: '1f6aa', desc: 'Door' },\r\n        { code: '1f6bd', desc: 'Toilet' },\r\n        { code: '1f6bf', desc: 'Shower' },\r\n        { code: '1f6c1', desc: 'Bathtub' },\r\n        { code: '231b', desc: 'Hourglass' },\r\n        { code: '23f3', desc: 'Hourglass with Flowing Sand' },\r\n        { code: '231a', desc: 'Watch' },\r\n        { code: '23f0', desc: 'Alarm Clock' },\r\n        { code: '1f55b', desc: 'Clock Face Twelve Oclock' },\r\n        { code: '1f567', desc: 'Clock Face Twelve-Thirty' },\r\n        { code: '1f550', desc: 'Clock Face One Oclock' },\r\n        { code: '1f55c', desc: 'Clock Face One-thirty' },\r\n        { code: '1f551', desc: 'Clock Face Two Oclock' },\r\n        { code: '1f55d', desc: 'Clock Face Two-thirty' },\r\n        { code: '1f552', desc: 'Clock Face Three Oclock' },\r\n        { code: '1f55e', desc: 'Clock Face Three-thirty' },\r\n        { code: '1f553', desc: 'Clock Face Four Oclock' },\r\n        { code: '1f55f', desc: 'Clock Face Four-thirty' },\r\n        { code: '1f554', desc: 'Clock Face Five Oclock' },\r\n        { code: '1f560', desc: 'Clock Face Five-thirty' },\r\n        { code: '1f555', desc: 'Clock Face Six Oclock' },\r\n        { code: '1f561', desc: 'Clock Face Six-thirty' },\r\n        { code: '1f556', desc: 'Clock Face Seven Oclock' },\r\n        { code: '1f562', desc: 'Clock Face Seven-thirty' },\r\n        { code: '1f557', desc: 'Clock Face Eight Oclock' },\r\n        { code: '1f563', desc: 'Clock Face Eight-thirty' },\r\n        { code: '1f558', desc: 'Clock Face Nine Oclock' },\r\n        { code: '1f564', desc: 'Clock Face Nine-thirty' },\r\n        { code: '1f559', desc: 'Clock Face Ten Oclock' },\r\n        { code: '1f565', desc: 'Clock Face Ten-thirty' },\r\n        { code: '1f55a', desc: 'Clock Face Eleven Oclock' },\r\n        { code: '1f566', desc: 'Clock Face Eleven-thirty' },\r\n        { code: '1f311', desc: 'New Moon Symbol' },\r\n        { code: '1f312', desc: 'Waxing Crescent Moon Symbol' },\r\n        { code: '1f313', desc: 'First Quarter Moon Symbol' },\r\n        { code: '1f314', desc: 'Waxing Gibbous Moon Symbol' },\r\n        { code: '1f315', desc: 'Full Moon Symbol' },\r\n        { code: '1f316', desc: 'Waning Gibbous Moon Symbol' },\r\n        { code: '1f317', desc: 'Last Quarter Moon Symbol' },\r\n        { code: '1f318', desc: 'Waning Crescent Moon Symbol' },\r\n        { code: '1f319', desc: 'Crescent Moon' },\r\n        { code: '1f31a', desc: 'New Moon with Face' },\r\n        { code: '1f31b', desc: 'First Quarter Moon with Face' },\r\n        { code: '1f31c', desc: 'Last Quarter Moon with Face' },\r\n        { code: '2600', desc: 'Black Sun with Rays' },\r\n        { code: '1f31d', desc: 'Full Moon with Face' },\r\n        { code: '1f31e', desc: 'Sun with Face' },\r\n        { code: '2b50', desc: 'White Medium Star' },\r\n        { code: '1f31f', desc: 'Glowing Star' },\r\n        { code: '1f320', desc: 'Shooting Star' },\r\n        { code: '2601', desc: 'Cloud' },\r\n        { code: '26c5', desc: 'Sun Behind Cloud' },\r\n        { code: '1f300', desc: 'Cyclone' },\r\n        { code: '1f308', desc: 'Rainbow' },\r\n        { code: '1f302', desc: 'Closed Umbrella' },\r\n        { code: '2614', desc: 'Umbrella with Rain Drops' },\r\n        { code: '26a1', desc: 'High Voltage Sign' },\r\n        { code: '2744', desc: 'Snowflake' },\r\n        { code: '2603', desc: 'Snowman Without Snow' },\r\n        { code: '1f525', desc: 'Fire' },\r\n        { code: '1f4a7', desc: 'Droplet' },\r\n        { code: '1F30A', desc: 'Water Wave' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'objects',\r\n      'name': 'Objects',\r\n      'code': '1F507',\r\n      'emoticons': [\r\n        { code: '1F507', desc: 'Speaker with Cancellation Stroke' },\r\n        { code: '1F508', desc: 'Speaker' },\r\n        { code: '1F509', desc: 'Speaker with One Sound Wave' },\r\n        { code: '1F50A', desc: 'Speaker with Three Sound Wave' },\r\n        { code: '1F4E2', desc: 'Public Address Loudspeaker' },\r\n        { code: '1F4E3', desc: 'Cheering Megaphone' },\r\n        { code: '1F4EF', desc: 'Postal Horn' },\r\n        { code: '1F514', desc: 'Bell' },\r\n        { code: '1F515', desc: 'Bell with Cancellation Stroke' },\r\n        { code: '1F3BC', desc: 'Musical Score' },\r\n        { code: '1F3B5', desc: 'Musical Note' },\r\n        { code: '1F3B6', desc: 'Multiple Musical Notes' },\r\n        { code: '1F3A4', desc: 'Microphone' },\r\n        { code: '1F3A7', desc: 'Headphone' },\r\n        { code: '1F4FB', desc: 'Radio' },\r\n        { code: '1F3B7', desc: 'Saxophone' },\r\n        { code: '1F3B8', desc: 'Guitar' },\r\n        { code: '1F3B9', desc: 'Musical Keyboard' },\r\n        { code: '1F3BA', desc: 'Trumpet' },\r\n        { code: '1F3BB', desc: 'Violin' },\r\n        { code: '1F4F1', desc: 'Mobile Phone' },\r\n        { code: '1F4F2', desc: 'Mobile Phone with Rightwards Arrow at Left' },\r\n        { code: '260E', desc: 'Black Telephone' },\r\n        { code: '1F4DE', desc: 'Telephone Receiver' },\r\n        { code: '1F4DF', desc: 'Pager' },\r\n        { code: '1F4E0', desc: 'Fax Machine' },\r\n        { code: '1F50B', desc: 'Battery' },\r\n        { code: '1F50C', desc: 'Electric Plug' },\r\n        { code: '1F4BB', desc: 'Personal Computer' },\r\n        { code: '1F4BD', desc: 'Minidisc' },\r\n        { code: '1F4BE', desc: 'Floppy Disk' },\r\n        { code: '1F4BF', desc: 'Optical Disk' },\r\n        { code: '1F4C0', desc: 'Dvd' },\r\n        { code: '1F3A5', desc: 'Movie Camera' },\r\n        { code: '1F3AC', desc: 'Clapper Board' },\r\n        { code: '1F4FA', desc: 'Television' },\r\n        { code: '1F4F7', desc: 'Camera' },\r\n        { code: '1F4F9', desc: 'Video Camera' },\r\n        { code: '1F4FC', desc: 'Videocassette' },\r\n        { code: '1F50D', desc: 'Left-Pointing Magnifying Glass' },\r\n        { code: '1F50E', desc: 'Right-Pointing Magnifying Glass' },\r\n        { code: '1F52C', desc: 'Microscope' },\r\n        { code: '1F52D', desc: 'Telelscope' },\r\n        { code: '1F4E1', desc: 'Satellite Antenna' },\r\n        { code: '1F4A1', desc: 'Electric Light Bulb' },\r\n        { code: '1F526', desc: 'Electric Torch' },\r\n        { code: '1F3EE', desc: 'Izakaya Lantern' },\r\n        { code: '1F4D4', desc: 'Notebook with Decorative Cover' },\r\n        { code: '1F4D5', desc: 'Closed Book' },\r\n        { code: '1F4D6', desc: 'Open Book' },\r\n        { code: '1F4D7', desc: 'Green Book' },\r\n        { code: '1F4D8', desc: 'Blue Book' },\r\n        { code: '1F4D9', desc: 'Orange Book' },\r\n        { code: '1F4DA', desc: 'Books' },\r\n        { code: '1F4D3', desc: 'Notebook' },\r\n        { code: '1F4D2', desc: 'Ledger' },\r\n        { code: '1F4C3', desc: 'Curl' },\r\n        { code: '1F4DC', desc: 'Scroll' },\r\n        { code: '1F4C4', desc: 'Page Facing Up' },\r\n        { code: '1F4F0', desc: 'Newspaper' },\r\n        { code: '1F4D1', desc: 'Bookmark Tabs' },\r\n        { code: '1F516', desc: 'Bookmark' },\r\n        { code: '1F4B0', desc: 'Money Bag' },\r\n        { code: '1F4B4', desc: 'Banknote with Yen Sign' },\r\n        { code: '1F4B5', desc: 'Banknote with Dollar Sign' },\r\n        { code: '1F4B6', desc: 'Banknote with Euro Sign' },\r\n        { code: '1F4B7', desc: 'Banknote with Pound Sign' },\r\n        { code: '1F4B8', desc: 'Money with Wings' },\r\n        { code: '1F4B3', desc: 'Credit Card' },\r\n        { code: '1F4B9', desc: 'Chart with Upwards Trend and Yen Sign' },\r\n        { code: '1F4B1', desc: 'Currency Exchange' },\r\n        { code: '1F4B2', desc: 'Heavy Dollar Sign' },\r\n        { code: '2709', desc: 'Envelope' },\r\n        { code: '1F4E7', desc: 'E-Mail Symbol' },\r\n        { code: '1F4E8', desc: 'Incoming Envelope' },\r\n        { code: '1F4E9', desc: 'Envelope with Downwards Arrow Above' },\r\n        { code: '1F4E4', desc: 'Outbox Tray' },\r\n        { code: '1F4E5', desc: 'Inbox Tray' },\r\n        { code: '1F4E6', desc: 'Package' },\r\n        { code: '1F4BE', desc: 'Closed Mailbox with Raised Flag' },\r\n        { code: '1F4EA', desc: 'Closed Mailbox with Lowered Flag' },\r\n        { code: '1F4EC', desc: 'Open Mailbox with Raised Flag' },\r\n        { code: '1F4ED', desc: 'Open Mailbox with Lowered Flag' },\r\n        { code: '1F5F3', desc: 'Postbox' },\r\n        { code: '270F', desc: 'Pencil' },\r\n        { code: '2712', desc: 'Black Nib' },\r\n        { code: '1F4DD', desc: 'Memo' },\r\n        { code: '1F4BC', desc: 'Briefcase' },\r\n        { code: '1F4C1', desc: 'File Folder' },\r\n        { code: '1F4C2', desc: 'Open File Folder' },\r\n        { code: '1F4C5', desc: 'Calender' },\r\n        { code: '1F4C6', desc: 'Tear-off Calender' },\r\n        { code: '1F4C7', desc: 'Card Index' },\r\n        { code: '1F4C8', desc: 'Chart with Upwards Trend' },\r\n        { code: '1F4C9', desc: 'Chart with Downwards Trend' },\r\n        { code: '1F4CA', desc: 'Bar Chart' },\r\n        { code: '1F4CB', desc: 'Clipboard' },\r\n        { code: '1F4CC', desc: 'Pushpin' },\r\n        { code: '1F4CD', desc: 'Round Pushpin' },\r\n        { code: '1F4CE', desc: 'Paperclip' },\r\n        { code: '1F4CF', desc: 'Straight Ruler' },\r\n        { code: '1F4D0', desc: 'Triangular Ruler' },\r\n        { code: '2702', desc: 'Black Scissors' },\r\n        { code: '1F512', desc: 'Lock' },\r\n        { code: '1F513', desc: 'Open Lock' },\r\n        { code: '1F50F', desc: 'Lock with Ink Pen' },\r\n        { code: '1F510', desc: 'Closed Lock with Key' },\r\n        { code: '1F511', desc: 'Key' },\r\n        { code: '1F528', desc: 'Hammer' },\r\n        { code: '1F52B', desc: 'Pistol' },\r\n        { code: '1F527', desc: 'Wrench' },\r\n        { code: '1F529', desc: 'Nut and Bolt' },\r\n        { code: '1F517', desc: 'Link Symbol' },\r\n        { code: '1F489', desc: 'Syringe' },\r\n        { code: '1F48A', desc: 'Pill' },\r\n        { code: '1F6AC', desc: 'Smoking Symbol' },\r\n        { code: '1F5FF', desc: 'Moyai' },\r\n        { code: '1F52E', desc: 'Crystal Ball' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'symbols',\r\n      'name': 'Symbols',\r\n      'code': '1F3E7',\r\n      'emoticons': [\r\n        { code: '1F3E7', desc: 'Automated Teller Machine' },\r\n        { code: '1F6AE', desc: 'Put Litter in Its Place Symbol' },\r\n        { code: '1F6B0', desc: 'Potable Water Symbol' },\r\n        { code: '267F', desc: 'Wheelchair Symbol' },\r\n        { code: '1F6B9', desc: 'Mens Symbol' },\r\n        { code: '1F6BA', desc: 'Womens Symbol' },\r\n        { code: '1F6BB', desc: 'Restroom' },\r\n        { code: '1F6BC', desc: 'Baby Symbol' },\r\n        { code: '1F6BE', desc: 'Water Closet' },\r\n        { code: '1F6C2', desc: 'Passport Control' },\r\n        { code: '1F6C3', desc: 'Customs' },\r\n        { code: '1F6C4', desc: 'Baggage Claim' },\r\n        { code: '1F6C5', desc: 'Left Luggage' },\r\n        { code: '26A0', desc: 'Warning Sign' },\r\n        { code: '1F6B8', desc: 'Children Crossing' },\r\n        { code: '26D4', desc: 'No Entry' },\r\n        { code: '1F6AB', desc: 'No Entry Sign' },\r\n        { code: '1F6B3', desc: 'No Bicycles' },\r\n        { code: '1F6AD', desc: 'No Smoking Symbol' },\r\n        { code: '1F6AF', desc: 'Do Not Litter Symbol' },\r\n        { code: '1F6B1', desc: 'Non-Potable Water Symbol' },\r\n        { code: '1F6B7', desc: 'No Pedestrians' },\r\n        { code: '1F4F5', desc: 'No Mobile Phones' },\r\n        { code: '1F51E', desc: 'No One Under Eighteen Symbol' },\r\n        { code: '2B06', desc: 'Upwards Black Arrow' },\r\n        { code: '2197', desc: 'North East Arrow' },\r\n        { code: '27A1', desc: 'Black Rightwards Arrow' },\r\n        { code: '2198', desc: 'South East Arrow' },\r\n        { code: '2B07', desc: 'Downwards Black Arrow' },\r\n        { code: '2199', desc: 'South West Arrow' },\r\n        { code: '2B05', desc: 'Leftwards Black Arrow' },\r\n        { code: '2196', desc: 'North West Arrow' },\r\n        { code: '2195', desc: 'Up Down Arrow' },\r\n        { code: '2194', desc: 'Left Right Arrow' },\r\n        { code: '21A9', desc: 'Leftwards Arrow with Hook' },\r\n        { code: '21AA', desc: 'Rightwards Arrow with Hook' },\r\n        { code: '2934', desc: 'Arrow Pointing Rightwards Then Curving Upwards' },\r\n        { code: '2935', desc: 'Arrow Pointing Rightwards Then Curving Downwards' },\r\n        { code: '1F503', desc: 'Clockwise Downwards and Upwards Open Circle Arrows' },\r\n        { code: '1F504', desc: 'Anticlockwise Downwards and Upwards Open Circle Arrows' },\r\n        { code: '1F519', desc: 'Back with Leftwards Arrow Above' },\r\n        { code: '1F51A', desc: 'End with Leftwards Arrow Above' },\r\n        { code: '1F51B', desc: 'On with Exclamation Mark with Left Right Arrow Above' },\r\n        { code: '1F51C', desc: 'Soon with Rightwards Arrow Above' },\r\n        { code: '1F51D', desc: 'Top with Upwards Arrow Above' },\r\n        { code: '1F52F', desc: 'Six Pointed Star with Middle Dot' },\r\n        { code: '2648', desc: 'Aries' },\r\n        { code: '2649', desc: 'Taurus' },\r\n        { code: '264A', desc: 'Gemini' },\r\n        { code: '264B', desc: 'Cancer' },\r\n        { code: '264C', desc: 'Leo' },\r\n        { code: '264D', desc: 'Virgo' },\r\n        { code: '264E', desc: 'Libra' },\r\n        { code: '264F', desc: 'Scorpius' },\r\n        { code: '2650', desc: 'Sagittarius' },\r\n        { code: '2651', desc: 'Capricorn' },\r\n        { code: '2652', desc: 'Aquarius' },\r\n        { code: '2653', desc: 'Pisces' },\r\n        { code: '26CE', desc: 'Ophiuchus' },\r\n        { code: '1F500', desc: 'Twisted Rightwards Arrows' },\r\n        { code: '1F501', desc: 'Clockwise Rightwards and Leftwards Open Circle Arrows' },\r\n        { code: '1F502', desc: 'Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay' },\r\n        { code: '25B6', desc: 'Black Right-Pointing Triangle' },\r\n        { code: '23E9', desc: 'Black Right-Pointing Double Triangle' },\r\n        { code: '25C0', desc: 'Black Left-Pointing Triangle' },\r\n        { code: '23EA', desc: 'Black Left-Pointing Double Triangle' },\r\n        { code: '1F53C', desc: 'Up-Pointing Small Red Triangle' },\r\n        { code: '23EB', desc: 'Black Up-Pointing Double Triangle' },\r\n        { code: '1F53D', desc: 'Down-Pointing Small Red Triangle' },\r\n        { code: '23EC', desc: 'Black Down-Pointing Double Triangle' },\r\n        { code: '1F3A6', desc: 'Cinema' },\r\n        { code: '1F505', desc: 'Low Brightness Symbol' },\r\n        { code: '1F506', desc: 'High Brightness Symbol' },\r\n        { code: '1F4F6', desc: 'Antenna with Bars' },\r\n        { code: '1F4F3', desc: 'Vibration Mode' },\r\n        { code: '1F4F4', desc: 'Mobile Phone off' },\r\n        { code: '267B', desc: 'Black Universal Recycling Symbol' },\r\n        { code: '1F531', desc: 'Trident Emblem' },\r\n        { code: '1F4DB', desc: 'Name Badge' },\r\n        { code: '1F530', desc: 'Japanese Symbol for Beginner' },\r\n        { code: '2B55', desc: 'Heavy Large Circle' },\r\n        { code: '2705', desc: 'White Heavy Check Mark' },\r\n        { code: '2611', desc: 'Ballot Box with Check' },\r\n        { code: '2714', desc: 'Heavy Check Mark' },\r\n        { code: '2716', desc: 'Heavy Multiplication X' },\r\n        { code: '274C', desc: 'Cross Mark' },\r\n        { code: '274E', desc: 'Negative Squared Cross Mark' },\r\n        { code: '2795', desc: 'Heavy Plus Sign' },\r\n        { code: '2796', desc: 'Heavy Minus Sign' },\r\n        { code: '2797', desc: 'Heavy Division Sign' },\r\n        { code: '27B0', desc: 'Curly Loop' },\r\n        { code: '27BF', desc: 'Double Curly Loop' },\r\n        { code: '303D', desc: 'Part Alternation Mark' },\r\n        { code: '2733', desc: 'Eight Spoked Asterisk' },\r\n        { code: '2734', desc: 'Eight Pointed Black Star' },\r\n        { code: '2747', desc: 'Sparkle' },\r\n        { code: '203C', desc: 'Double Exclamation Mark' },\r\n        { code: '2049', desc: 'Exclamation Question Mark' },\r\n        { code: '2753', desc: 'Black Question Mark Ornament' },\r\n        { code: '2754', desc: 'White Question Mark Ornament' },\r\n        { code: '2755', desc: 'White Exclamation Mark Ornament' },\r\n        { code: '2757', desc: 'Heavy Exclamation Mark Symbol' },\r\n        { code: '3030', desc: 'Wavy Dash' },\r\n        { code: '2122', desc: 'Trade Mark Sign' },\r\n        { code: '1F51F', desc: 'Keycap Ten' },\r\n        { code: '1F4AF', desc: 'Hundred Points Symbol' },\r\n        { code: '1F520', desc: 'Input Symbol for Latin Capital Letters' },\r\n        { code: '1F521', desc: 'Input Symbol for Latin Small Letters' },\r\n        { code: '1F522', desc: 'Input Symbol for Numbers' },\r\n        { code: '1F523', desc: 'Input Symbol for Symbols' },\r\n        { code: '1F524', desc: 'Input Symbol for Latin Letters' },\r\n        { code: '1F170', desc: 'Negative Squared Latin Capital Letter a' },\r\n        { code: '1F18E', desc: 'Negative Squared Ab' },\r\n        { code: '1F171', desc: 'Negative Squared Latin Capital Letter B' },\r\n        { code: '1F191', desc: 'Squared Cl' },\r\n        { code: '1F192', desc: 'Squared Cool' },\r\n        { code: '1F193', desc: 'Squared Free' },\r\n        { code: '2139', desc: 'Information Source' },\r\n        { code: '1F194', desc: 'Squared Id' },\r\n        { code: '24C2', desc: 'Circled Latin Capital Letter M' },\r\n        { code: '1F195', desc: 'Squared New' },\r\n        { code: '1F196', desc: 'Squared Ng' },\r\n        { code: '1F17E', desc: 'Negative Squared Latin Capital Letter O' },\r\n        { code: '1F197', desc: 'Squared Ok' },\r\n        { code: '1F17F', desc: 'Negative Squared Latin Capital Letter P' },\r\n        { code: '1F198', desc: 'Squared Sos' },\r\n        { code: '1F199', desc: 'Squared Up with Exclamation Mark' },\r\n        { code: '1F19A', desc: 'Squared Vs' },\r\n        { code: '1F201', desc: 'Squared Katakana Koko' },\r\n        { code: '1F202', desc: 'Squared Katakana Sa' },\r\n        { code: '1F237', desc: 'Squared Cjk Unified Ideograph-6708' },\r\n        { code: '1F236', desc: 'Squared Cjk Unified Ideograph-6709' },\r\n        { code: '1F22F', desc: 'Squared Cjk Unified Ideograph-6307' },\r\n        { code: '1F250', desc: 'Circled Ideograph Advantage' },\r\n        { code: '1F239', desc: 'Squared Cjk Unified Ideograph-5272' },\r\n        { code: '1F21A', desc: 'Squared Cjk Unified Ideograph-7121' },\r\n        { code: '1F232', desc: 'Squared Cjk Unified Ideograph-7981' },\r\n        { code: '1F251', desc: 'Circled Ideograph Accept' },\r\n        { code: '1F238', desc: 'Squared Cjk Unified Ideograph-7533' },\r\n        { code: '1F234', desc: 'Squared Cjk Unified Ideograph-5408' },\r\n        { code: '1F233', desc: 'Squared Cjk Unified Ideograph-7a7a' },\r\n        { code: '3297', desc: 'Circled Ideograph Congratulation' },\r\n        { code: '3299', desc: 'Circled Ideograph Secret' },\r\n        { code: '1F23A', desc: 'Squared Cjk Unified Ideograph-55b6' },\r\n        { code: '1F235', desc: 'Squared Cjk Unified Ideograph-6e80' },\r\n        { code: '25AA', desc: 'Black Small Square' },\r\n        { code: '25AB', desc: 'White Small Square' },\r\n        { code: '25FB', desc: 'White Medium Square' },\r\n        { code: '25FC', desc: 'Black Medium Square' },\r\n        { code: '25FD', desc: 'White Medium Small Square' },\r\n        { code: '25FE', desc: 'Black Medium Small Square' },\r\n        { code: '2B1B', desc: 'Black Large Square' },\r\n        { code: '2B1C', desc: 'White Large Square' },\r\n        { code: '1F536', desc: 'Large Orange Diamond' },\r\n        { code: '1F537', desc: 'Large Blue Diamond' },\r\n        { code: '1F538', desc: 'Small Orange Diamond' },\r\n        { code: '1F539', desc: 'Small Blue Diamond' },\r\n        { code: '1F53A', desc: 'Up-Pointing Red Triangle' },\r\n        { code: '1F53B', desc: 'Down-Pointing Red Triangle' },\r\n        { code: '1F4A0', desc: 'Diamond Shape with a Dot Inside' },\r\n        { code: '1F518', desc: 'Radio Button' },\r\n        { code: '1F532', desc: 'Black Square Button' },\r\n        { code: '1F533', desc: 'White Square Button' },\r\n        { code: '26AA', desc: 'Medium White Circle' },\r\n        { code: '26AB', desc: 'Medium Black Circle' },\r\n        { code: '1F534', desc: 'Large Red Circle' },\r\n        { code: '1F535', desc: 'Large Blue Circle' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'flags',\r\n      'name': 'Flags',\r\n      'code': '1F3C1',\r\n      'emoticons': [\r\n        { code: '1f3c1', desc: 'Chequered Flag' },\r\n        { code: '1f1e8-1f1f3', desc: 'China Flag' },\r\n        { code: '1f38c', desc: 'Crossed Flags' },\r\n        { code: '1f1e9-1f1ea', desc: 'Germany Flag' },\r\n        { code: '1f1ea-1f1f8', desc: 'Spain Flag' },\r\n        { code: '1f1e6-1f1e8', desc: 'Ascension Island Flag' },\r\n        { code: '1f1e6-1f1e9', desc: 'Andorra Flag' },\r\n        { code: '1f1e6-1f1ea', desc: 'United Arab Emirates Flag' },\r\n        { code: '1f1e6-1f1eb', desc: 'Afghanistan Flag' },\r\n        { code: '1f1e6-1f1ec', desc: 'Antigua & Barbuda Flag' },\r\n        { code: '1f1e6-1f1ee', desc: 'Anguilla Flag' },\r\n        { code: '1f1e6-1f1f1', desc: 'Albania Flag' },\r\n        { code: '1f1e6-1f1f2', desc: 'Armenia Flag' },\r\n        { code: '1f1e6-1f1f4', desc: 'Angola Flag' },\r\n        { code: '1f1e6-1f1f6', desc: 'Antarctica Flag' },\r\n        { code: '1f1e6-1f1f7', desc: 'Argentina Flag' },\r\n        { code: '1f1e6-1f1f8', desc: 'American Samoa Flag' },\r\n        { code: '1f1e6-1f1f9', desc: 'Austria Flag' },\r\n        { code: '1f1e6-1f1fa', desc: 'Australia Flag' },\r\n        { code: '1f1e6-1f1fc', desc: 'Aruba Flag' },\r\n        { code: '1f1e6-1f1fd', desc: 'land Islands Flag' },\r\n        { code: '1f1e6-1f1ff', desc: 'Azerbaijan Flag' },\r\n        { code: '1f1e7-1f1e7', desc: 'Barbados Flag' },\r\n        { code: '1f1e7-1f1e9', desc: 'Bangladesh Flag' },\r\n        { code: '1f1e7-1f1ea', desc: 'Belgium Flag' },\r\n        { code: '1f1e7-1f1eb', desc: 'Burkina Faso Flag' },\r\n        { code: '1f1e7-1f1ec', desc: 'Bulgaria Flag' },\r\n        { code: '1f1e7-1f1ed', desc: 'Bahrain Flag' },\r\n        { code: '1f1e7-1f1ee', desc: 'Burundi Flag' },\r\n        { code: '1f1e7-1f1ef', desc: 'Benin Flag' },\r\n        { code: '1f1e7-1f1f1', desc: 'St. Barthlemy Flag' },\r\n        { code: '1f1e7-1f1f2', desc: 'Bermuda Flag' },\r\n        { code: '1f1e7-1f1f4', desc: 'Bolivia Flag' },\r\n        { code: '1f1e7-1f1f6', desc: 'Caribbean Netherlands Flag' },\r\n        { code: '1f1e7-1f1f7', desc: 'Brazil Flag' },\r\n        { code: '1f1e7-1f1f8', desc: 'Bahamas Flag' },\r\n        { code: '1f1e7-1f1f9', desc: 'Bhutan Flag' },\r\n        { code: '1f1e7-1f1fb', desc: 'Bouvet Island Flag' },\r\n        { code: '1f1e7-1f1fc', desc: 'Botswana Flag' },\r\n        { code: '1f1e7-1f1fe', desc: 'Belarus Flag' },\r\n        { code: '1f1e7-1f1ff', desc: 'Belize Flag' },\r\n        { code: '1f1e8-1f1e6', desc: 'Canada Flag' },\r\n        { code: '1f1e8-1f1e8', desc: 'Cocos (keeling) Islands Flag' },\r\n        { code: '1f1e8-1f1e9', desc: 'Congo - Kinshasa Flag' },\r\n        { code: '1f1e8-1f1eb', desc: 'Central African Republic Flag' },\r\n        { code: '1f1e8-1f1ec', desc: 'Congo - Brazzaville Flag' },\r\n        { code: '1f1e8-1f1ed', desc: 'Switzerland Flag' },\r\n        { code: '1f1e8-1f1ee', desc: 'Cte Divoire Flag' },\r\n        { code: '1f1e8-1f1f0', desc: 'Cook Islands Flag' },\r\n        { code: '1f1e8-1f1f1', desc: 'Chile Flag' },\r\n        { code: '1f1e8-1f1f2', desc: 'Cameroon Flag' },\r\n        { code: '1f1e8-1f1f4', desc: 'Colombia Flag' },\r\n        { code: '1f1e8-1f1f7', desc: 'Costa Rica Flag' },\r\n        { code: '1f1e8-1f1fa', desc: 'Cuba Flag' },\r\n        { code: '1f1e8-1f1fb', desc: 'Cape Verde Flag' },\r\n        { code: '1f1e8-1f1fc', desc: 'Curaao Flag' },\r\n        { code: '1f1e8-1f1fd', desc: 'Christmas Island Flag' },\r\n        { code: '1f1e8-1f1fe', desc: 'Cyprus Flag' },\r\n        { code: '1f1e8-1f1ff', desc: 'Czechia Flag\"' },\r\n        { code: '1f1e9-1f1ec', desc: 'Diego Garcia Flag' },\r\n        { code: '1f1e9-1f1ef', desc: 'Djibouti Flag' },\r\n        { code: '1f1e9-1f1f0', desc: 'Denmark Flag' },\r\n        { code: '1f1e9-1f1f2', desc: 'Dominica Flag' },\r\n        { code: '1f1e9-1f1f4', desc: 'Dominican Republic Flag' },\r\n        { code: '1f1e9-1f1ff', desc: 'Algeria Flag' },\r\n        { code: '1f1ea-1f1e6', desc: 'Ceuta & Melilla Flag' },\r\n        { code: '1f1ea-1f1e8', desc: 'Ecuador Flag' },\r\n        { code: '1f1ea-1f1ea', desc: 'Estonia Flag' },\r\n        { code: '1f1ea-1f1ec', desc: 'Egypt Flag' },\r\n        { code: '1f1ea-1f1ed', desc: 'Western Sahara Flag' },\r\n        { code: '1f1ea-1f1f7', desc: 'Eritrea Flag' },\r\n        { code: '1f1ea-1f1f9', desc: 'Ethiopia Flag' },\r\n        { code: '1f1ea-1f1fa', desc: 'European Union Flag' },\r\n        { code: '1f1eb-1f1ee', desc: 'Finland Flag' },\r\n        { code: '1f1eb-1f1ef', desc: 'Fiji Flag' },\r\n        { code: '1f1eb-1f1f0', desc: 'Falkland Islands Flag' },\r\n        { code: '1f1eb-1f1f2', desc: 'Micronesia Flag' },\r\n        { code: '1f1eb-1f1f4', desc: 'Faroe Islands Flag' },\r\n        { code: '1f1ec-1f1e6', desc: 'Gabon Flag' },\r\n        { code: '1f1ec-1f1e9', desc: 'Grenada Flag' },\r\n        { code: '1f1ec-1f1ea', desc: 'Georgia Flag' },\r\n        { code: '1f1ec-1f1eb', desc: 'French Guiana Flag' },\r\n        { code: '1f1ec-1f1ec', desc: 'Guernsey Flag' },\r\n        { code: '1f1ec-1f1ed', desc: 'Ghana Flag' },\r\n        { code: '1f1ec-1f1ee', desc: 'Gibraltar Flag' },\r\n        { code: '1f1ec-1f1f1', desc: 'Greenland Flag' },\r\n        { code: '1f1ec-1f1f2', desc: 'Gambia Flag' },\r\n        { code: '1f1ec-1f1f3', desc: 'Guinea Flag' },\r\n        { code: '1f1ec-1f1f5', desc: 'Guadeloupe Flag' },\r\n        { code: '1f1ec-1f1f6', desc: 'Equatorial Guinea Flag' },\r\n        { code: '1f1ec-1f1f7', desc: 'Greece Flag' },\r\n        { code: '1f1ec-1f1f8', desc: 'South Georgia & South Sandwich Islands Flag' },\r\n        { code: '1f1ec-1f1f9', desc: 'Guatemala Flag' },\r\n        { code: '1f1ec-1f1fa', desc: 'Guam Flag' },\r\n        { code: '1f1ec-1f1fc', desc: 'Guinea-Bissau Flag' },\r\n        { code: '1f1ec-1f1fe', desc: 'Guyana Flag' },\r\n        { code: '1f1ed-1f1f0', desc: 'Hong Kong Sar China Flag' },\r\n        { code: '1f1ed-1f1f2', desc: 'Heard & Mcdonald Islands Flag' },\r\n        { code: '1f1ed-1f1f3', desc: 'Honduras Flag' },\r\n        { code: '1f1ed-1f1f7', desc: 'Croatia Flag' },\r\n        { code: '1f1ed-1f1f9', desc: 'Haiti Flag' },\r\n        { code: '1f1ed-1f1fa', desc: 'Hungary Flag' },\r\n        { code: '1f1ee-1f1e8', desc: 'Canary Islands Flag' },\r\n        { code: '1f1ee-1f1e9', desc: 'Indonesia Flag' },\r\n        { code: '1f1ee-1f1ea', desc: 'Ireland Flag' },\r\n        { code: '1f1ee-1f1f1', desc: 'Israel Flag' },\r\n        { code: '1f1ee-1f1f2', desc: 'Isle of Man Flag' },\r\n        { code: '1f1ee-1f1f3', desc: 'India Flag' },\r\n        { code: '1f1ee-1f1f4', desc: 'British Indian Ocean Territory Flag' },\r\n        { code: '1f1ee-1f1f6', desc: 'Iraq Flag' },\r\n        { code: '1f1ee-1f1f7', desc: 'Iran Flag' },\r\n        { code: '1f1ee-1f1f8', desc: 'Iceland Flag' },\r\n        { code: '1f1ef-1f1ea', desc: 'Jersey Flag' },\r\n        { code: '1f1ef-1f1f2', desc: 'Jamaica Flag' },\r\n        { code: '1f1ef-1f1f4', desc: 'Jordan Flag' },\r\n        { code: '1f1f0-1f1ea', desc: 'Kenya Flag' },\r\n        { code: '1f1f0-1f1ec', desc: 'Kyrgyzstan Flag' },\r\n        { code: '1f1f0-1f1ed', desc: 'Cambodia Flag' },\r\n        { code: '1f1f0-1f1ee', desc: 'Kiribati Flag' },\r\n        { code: '1f1f0-1f1f2', desc: 'Comoros Flag' },\r\n        { code: '1f1f0-1f1f3', desc: 'St. Kitts & Nevis Flag' },\r\n        { code: '1f1f0-1f1f5', desc: 'North Korea Flag' },\r\n        { code: '1f1f0-1f1fc', desc: 'Kuwait Flag' },\r\n        { code: '1f1f0-1f1fe', desc: 'Cayman Islands Flag' },\r\n        { code: '1f1f0-1f1ff', desc: 'Kazakhstan Flag' },\r\n        { code: '1f1f1-1f1e6', desc: 'Laos Flag' },\r\n        { code: '1f1f1-1f1e7', desc: 'Lebanon Flag' },\r\n        { code: '1f1f1-1f1e8', desc: 'St. Lucia Flag' },\r\n        { code: '1f1f1-1f1ee', desc: 'Liechtenstein Flag' },\r\n        { code: '1f1f1-1f1f0', desc: 'Sri Lanka Flag' },\r\n        { code: '1f1f1-1f1f7', desc: 'Liberia Flag' },\r\n        { code: '1f1f1-1f1f8', desc: 'Lesotho Flag' },\r\n        { code: '1f1f1-1f1f9', desc: 'Lithuania Flag' },\r\n        { code: '1f1f1-1f1fa', desc: 'Luxembourg Flag' },\r\n        { code: '1f1f1-1f1fb', desc: 'Latvia Flag' },\r\n        { code: '1f1f1-1f1fe', desc: 'Libya Flag' },\r\n        { code: '1f1f2-1f1e6', desc: 'Morocco Flag' },\r\n        { code: '1f1f2-1f1e8', desc: 'Monaco Flag' },\r\n        { code: '1f1f2-1f1e9', desc: 'Moldova Flag' },\r\n        { code: '1f1f2-1f1ea', desc: 'Montenegro Flag' },\r\n        { code: '1f1f2-1f1eb', desc: 'St. Martin Flag' },\r\n        { code: '1f1f2-1f1ec', desc: 'Madagascar Flag' },\r\n        { code: '1f1f2-1f1ed', desc: 'Marshall Islands Flag' },\r\n        { code: '1f1f2-1f1f0', desc: 'Macedonia Flag' },\r\n        { code: '1f1f2-1f1f1', desc: 'Mali Flag' },\r\n        { code: '1f1f2-1f1f2', desc: 'Myanmar (burma) Flag' },\r\n        { code: '1f1f2-1f1f3', desc: 'Mongolia Flag' },\r\n        { code: '1f1f2-1f1f4', desc: 'Macau Sar China Flag' },\r\n        { code: '1f1f2-1f1f5', desc: 'Northern Mariana Islands Flag' },\r\n        { code: '1f1f2-1f1f6', desc: 'Martinique Flag' },\r\n        { code: '1f1f2-1f1f7', desc: 'Mauritania Flag' },\r\n        { code: '1f1f2-1f1f8', desc: 'Montserrat Flag' },\r\n        { code: '1f1f2-1f1f9', desc: 'Malta Flag' },\r\n        { code: '1f1f2-1f1fa', desc: 'Mauritius Flag' },\r\n        { code: '1f1f2-1f1fb', desc: 'Maldives Flag' },\r\n        { code: '1f1f2-1f1fc', desc: 'Malawi Flag' },\r\n        { code: '1f1f2-1f1fd', desc: 'Mexico Flag' },\r\n        { code: '1f1f2-1f1fe', desc: 'Malaysia Flag' },\r\n        { code: '1f1f2-1f1ff', desc: 'Mozambique Flag' },\r\n        { code: '1f1f3-1f1e6', desc: 'Namibia Flag' },\r\n        { code: '1f1f3-1f1e8', desc: 'New Caledonia Flag' },\r\n        { code: '1f1f3-1f1ea', desc: 'Niger Flag' },\r\n        { code: '1f1f3-1f1eb', desc: 'Norfolk Island Flag' },\r\n        { code: '1f1f3-1f1ec', desc: 'Nigeria Flag' },\r\n        { code: '1f1f3-1f1ee', desc: 'Nicaragua Flag' },\r\n        { code: '1f1f3-1f1f1', desc: 'Netherlands Flag' },\r\n        { code: '1f1f3-1f1f4', desc: 'Norway Flag' },\r\n        { code: '1f1f3-1f1f5', desc: 'Nepal Flag' },\r\n        { code: '1f1f3-1f1f7', desc: 'Nauru Flag' },\r\n        { code: '1f1f3-1f1fa', desc: 'Niue Flag' },\r\n        { code: '1f1f3-1f1ff', desc: 'New Zealand Flag' },\r\n        { code: '1f1f4-1f1f2', desc: 'Oman Flag' },\r\n        { code: '1f1f8-1f1ff', desc: 'Swaziland Flag' },\r\n        { code: '1f1f5-1f1e6', desc: 'Panama Flag' },\r\n        { code: '1f1f5-1f1ea', desc: 'Peru Flag' },\r\n        { code: '1f1f5-1f1eb', desc: 'French Polynesia Flag' },\r\n        { code: '1f1f5-1f1ec', desc: 'Papua New Guinea Flag' },\r\n        { code: '1f1f5-1f1ed', desc: 'Philippines Flag' },\r\n        { code: '1f1f5-1f1f0', desc: 'Pakistan Flag' },\r\n        { code: '1f1f5-1f1f1', desc: 'Poland Flag' },\r\n        { code: '1f1f5-1f1f2', desc: 'St. Pierre & Miquelon  Flag' },\r\n        { code: '1f1f5-1f1f3', desc: 'Pitcairn Islands Flag' },\r\n        { code: '1f1f5-1f1f7', desc: 'Puerto Rico Flag' },\r\n        { code: '1f1f5-1f1f8', desc: 'Palestinian Territories Flag' },\r\n        { code: '1f1f5-1f1f9', desc: 'Portugal Flag' },\r\n        { code: '1f1f5-1f1fc', desc: 'Palau Flag' },\r\n        { code: '1f1f5-1f1fe', desc: 'Paraguay Flag' },\r\n        { code: '1f1f6-1f1e6', desc: 'Qatar Flag' },\r\n        { code: '1f1f7-1f1ea', desc: 'Runion Flag' },\r\n        { code: '1f1f7-1f1f4', desc: 'Romania Flag' },\r\n        { code: '1f1f7-1f1f8', desc: 'Serbia Flag' },\r\n        { code: '1f1f7-1f1fc', desc: 'Rwanda Flag' },\r\n        { code: '1f1f8-1f1e6', desc: 'Saudi Arabia Flag' },\r\n        { code: '1f1f8-1f1e7', desc: 'Solomon Islands Flag' },\r\n        { code: '1f1f8-1f1e8', desc: 'Seychelles Flag' },\r\n        { code: '1f1f8-1f1e9', desc: 'Sudan Flag' },\r\n        { code: '1f1f8-1f1ea', desc: 'Sweden Flag' },\r\n        { code: '1f1f8-1f1ec', desc: 'Singapore Flag' },\r\n        { code: '1f1f8-1f1ee', desc: 'Slovenia Flag' },\r\n        { code: '1f1f8-1f1ed', desc: 'St. Helena  Flag' },\r\n        { code: '1f1f8-1f1ef', desc: 'Svalbard & Jan Mayen  Flag' },\r\n        { code: '1f1f8-1f1f1', desc: 'Sierra Leone Flag' },\r\n        { code: '1f1f8-1f1f2', desc: 'San Marino Flag' },\r\n        { code: '1f1f8-1f1f3', desc: 'Senegal Flag' },\r\n        { code: '1f1f8-1f1f4', desc: 'Somalia Flag' },\r\n        { code: '1f1f8-1f1f7', desc: 'Suriname Flag' },\r\n        { code: '1f1f8-1f1f8', desc: 'South Sudan  Flag' },\r\n        { code: '1f1f8-1f1f9', desc: 'So Tom & Prncipe Flag' },\r\n        { code: '1f1f8-1f1fb', desc: 'El Salvador Flag' },\r\n        { code: '1f1f8-1f1fd', desc: 'Sint Maarten Flag' },\r\n        { code: '1f1f8-1f1fe', desc: 'Syria Flag' },\r\n        { code: '1f1f9-1f1e6', desc: 'Tristan Da Cunha Flag' },\r\n        { code: '1f1f9-1f1e8', desc: 'Turks & Caicos Islands  Flag' },\r\n        { code: '1f1f9-1f1eb', desc: 'French Southern Territories Flag' },\r\n        { code: '1f1f9-1f1ec', desc: 'Togo Flag' },\r\n        { code: '1f1f9-1f1ed', desc: 'Thailand Flag' },\r\n        { code: '1f1f9-1f1ef', desc: 'Tajikistan Flag' },\r\n        { code: '1f1f9-1f1f0', desc: 'Tokelau Flag' },\r\n        { code: '1f1f9-1f1f1', desc: 'Timor-Leste Flag' },\r\n        { code: '1f1f9-1f1f2', desc: 'Turkmenistan Flag' },\r\n        { code: '1f1f9-1f1f3', desc: 'Tunisia Flag' },\r\n        { code: '1f1f9-1f1f4', desc: 'Tonga Flag' },\r\n        { code: '1f1f9-1f1f7', desc: 'Turkey Flag' },\r\n        { code: '1f1f9-1f1f9', desc: 'Trinidad & Tobago Flag' },\r\n        { code: '1f1f9-1f1fb', desc: 'Tuvalu Flag' },\r\n        { code: '1f1f9-1f1fc', desc: 'Taiwan Flag' },\r\n        { code: '1f1f9-1f1ff', desc: 'Tanzania Flag' },\r\n        { code: '1f1fa-1f1e6', desc: 'Ukraine City  Flag' },\r\n        { code: '1f1fa-1f1ec', desc: 'Uganda Flag' },\r\n        { code: '1f1fa-1f1f2', desc: 'U.s. Outlying Islands  Flag' },\r\n        { code: '1f1fa-1f1fe', desc: 'Uruguay  Flag' },\r\n        { code: '1f1fa-1f1ff', desc: 'Uzbekistan Flag' },\r\n        { code: '1f1fb-1f1e6', desc: 'Vatican City  Flag' },\r\n        { code: '1f1fb-1f1e8', desc: 'St. Vincent & Grenadines Flag' },\r\n        { code: '1f1fb-1f1ea', desc: 'Venezuela Flag' },\r\n        { code: '1f1fb-1f1ec', desc: 'British Virgin Islands Flag' },\r\n        { code: '1f1fb-1f1ee', desc: 'U.s. Virgin Islands Flag' },\r\n        { code: '1f1fb-1f1f3', desc: 'Vietnam Flag' },\r\n        { code: '1f1fc-1f1f8', desc: 'Samoa Flag' },\r\n        { code: '1f1fb-1f1fa', desc: 'Vanuatu Flag' },\r\n        { code: '1f1fc-1f1eb', desc: '\"Wallis & Futuna Flag' },\r\n        { code: '1f1fd-1f1f0', desc: 'Kosovo Flag' },\r\n        { code: '1f1fe-1f1ea', desc: 'Yemen Flag' },\r\n        { code: '1f1fe-1f1f9', desc: 'Mayotte Flag' },\r\n        { code: '1f1ff-1f1e6', desc: 'South Africa Flag' },\r\n        { code: '1f1ff-1f1f2', desc: 'Zambia Flag' },\r\n        { code: '1f1ff-1f1fc', desc: 'Zimbabwe Flag' },\r\n        { code: '1f1eb-1f1f7', desc: 'France Flag' },\r\n        { code: '1f1ec-1f1e7', desc: 'United Kingdom  Flag' },\r\n        { code: '1f1ee-1f1f9', desc: 'Italy Flag' },\r\n        { code: '1f1ef-1f1f5', desc: 'Japan Flag' },\r\n        { code: '1f1f0-1f1f7', desc: 'South Korea Flag' },\r\n        { code: '1f1f7-1f1fa', desc: 'Russia Flag' },\r\n        { code: '1F6A9', desc: 'Triangular Flag on Post' },\r\n        { code: '1f1fa-1f1f8', desc: 'United States Flag' },\r\n      ]\r\n    }\r\n  ],\r\n  emoticonsButtons: ['emoticonsBack', '|'],\r\n  emoticonsUseImage: true\r\n})\r\n\r\nFE.PLUGINS.emoticons = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  // Load the categories for the emoticons\r\n  let { emoticonsSet : categories } = editor.opts\r\n  let selectedCategory = categories && categories[0]\r\n  let emoticonsButtons = ''\r\n\r\n  /**\r\n   *  Show emoticons popup\r\n   */\r\n  function _showEmoticonsPopup() {\r\n    \r\n    let $popup = editor.popups.get('emoticons')\r\n    \r\n    if (!$popup) $popup = _initEmoticonsPopup()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      editor.popups.refresh('emoticons')\r\n      editor.popups.setContainer('emoticons', editor.$tb)\r\n\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"emoticons\"]')\r\n\r\n      // Get popup left and top position\r\n      const { left, top } = editor.button.getPosition($btn)\r\n\r\n      // Show popup\r\n      editor.popups.show('emoticons', left, top, $btn.outerHeight())\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Initialize the emoticons popup \r\n   */\r\n  function _initEmoticonsPopup() {\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // If toolbar is inline then load emoticons buttons\r\n      if (editor.opts.emoticonsButtons.length > 0) {\r\n        emoticonsButtons = `<div class=\"fr-buttons fr-emoticons-buttons fr-tabs\">${editor.button.buildList(editor.opts.emoticonsButtons)}</div>`\r\n      }\r\n    }\r\n\r\n    // Template for popup\r\n    const template = {\r\n      buttons: emoticonsButtons,\r\n      custom_layer: _emoticonsHTML()\r\n    }\r\n\r\n    // Create popup\r\n    const $popup = editor.popups.create('emoticons', template)\r\n\r\n    // Add accessibility to popup\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _inEmoticon() {\r\n    if (!editor.selection.isCollapsed()) return false\r\n\r\n    let s_el = editor.selection.element()\r\n    let e_el = editor.selection.endElement()\r\n\r\n    if (s_el && editor.node.hasClass(s_el, 'fr-emoticon')) return s_el\r\n\r\n    if (e_el && editor.node.hasClass(e_el, 'fr-emoticon')) return e_el\r\n\r\n    let range = editor.selection.ranges(0)\r\n    let { startContainer : container } = range\r\n\r\n    if (container.nodeType == Node.ELEMENT_NODE) {\r\n\r\n      if (container.childNodes.length > 0 && range.startOffset > 0) {\r\n        let node = container.childNodes[range.startOffset - 1]\r\n\r\n        if (editor.node.hasClass(node, 'fr-emoticon')) {\r\n          return node\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /** \r\n   * Add emoticon \r\n   */\r\n  function addEmoticon(emoticon, img) {\r\n\r\n    const el = _inEmoticon()\r\n    const range = editor.selection.ranges(0)\r\n\r\n    if (!el) {\r\n      editor.html.insert(`<span class=\"fr-emoticon fr-deletable${(img ? ' fr-emoticon-img' : '')}\"${(img ? ` style=\"background: url(${img});\"` : '')}>${(img ? '&nbsp;' : emoticon)}</span>&nbsp;`, true)\r\n    }\r\n    else {\r\n\r\n      if (range.startOffset === 0 && editor.selection.element() === el) {\r\n        $(el).before(FE.MARKERS + FE.INVISIBLE_SPACE)\r\n      }\r\n      else if (range.startOffset > 0 && editor.selection.element() === el && range.commonAncestorContainer.parentNode.classList.contains('fr-emoticon')) {\r\n\r\n        // Inside emoticon move out side of it.\r\n        $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n      }\r\n      editor.selection.restore()\r\n      editor.html.insert(`<span class=\"fr-emoticon fr-deletable${(img ? ' fr-emoticon-img' : '')}\"${(img ? ` style=\"background: url(${img});\"` : '')}>${(img ? '&nbsp;' : emoticon)}</span>&nbsp;${FE.MARKERS}`, true)\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Load emoticons\r\n   */\r\n  function _load() {\r\n    const setDeletable = function () {\r\n      const emtcs = editor.el.querySelectorAll('.fr-emoticon:not(.fr-deletable)')\r\n\r\n      for (let i = 0; i < emtcs.length; i++) {\r\n        emtcs[i].className += ' fr-deletable'\r\n      }\r\n    }\r\n    setDeletable()\r\n\r\n    editor.events.on('html.set', setDeletable)\r\n\r\n    editor.events.on('keydown', function (e) {\r\n      if (editor.keys.isCharacter(e.which) && editor.selection.inEditor()) {\r\n        const range = editor.selection.ranges(0)\r\n        const el = _inEmoticon()\r\n\r\n        if (editor.node.hasClass(el, 'fr-emoticon-img')) {\r\n\r\n          if (el) {\r\n\r\n            if (range.startOffset === 0 && editor.selection.element() === el) {\r\n              $(el).before(FE.MARKERS + FE.INVISIBLE_SPACE)\r\n            }\r\n            else {\r\n              $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n            }\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    editor.events.on('keyup', function (e) {\r\n      const emtcs = editor.el.querySelectorAll('.fr-emoticon')\r\n\r\n      for (let i = 0; i < emtcs.length; i++) {\r\n        if (typeof emtcs[i].textContent != 'undefined' && emtcs[i].textContent.replace(/\\u200B/gi, '').length === 0) {\r\n          $(emtcs[i]).remove()\r\n        }\r\n      }\r\n\r\n      if (!(e.which >= FE.KEYCODE.ARROW_LEFT && e.which <= FE.KEYCODE.ARROW_DOWN)) {\r\n        const el = _inEmoticon()\r\n\r\n        if (editor.node.hasClass(el, 'fr-emoticon-img')) {\r\n          $(el).append(FE.MARKERS)\r\n          editor.selection.restore()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n    * Returns the HTML for the emoticons popup.\r\n    */\r\n  function _emoticonsHTML() {\r\n    let emoticons_html = ''\r\n    emoticons_html = `${_renderCategoryHtml(categories, selectedCategory)}\r\n                      ${_renderEmoticonHtml(selectedCategory)}\r\n                      ${_renderUseImage()}`\r\n\r\n    return emoticons_html\r\n  }\r\n\r\n  /**\r\n    * Replaces the pop-up's HTML with updated HTML - should be called\r\n    * when the selected category changes.\r\n    */\r\n  function _refreshPopup() {\r\n    editor.popups.get('emoticons').html(emoticonsButtons + _emoticonsHTML())\r\n  }\r\n\r\n  /**\r\n    * Set the currently selected emoticon category and refresh the popup\r\n    */\r\n  function setEmoticonCategory(categoryId) {\r\n    selectedCategory = categories.filter(category => {\r\n      return category.id === categoryId\r\n    })[0]\r\n\r\n    // Refresh the popup to update the emoticons in the popup view\r\n    _refreshPopup()\r\n  }\r\n\r\n  /**\r\n    * Returns the HTML of the Category selector\r\n    */\r\n  function _renderCategoryHtml(categories, selectedCategory) {\r\n    const categoryHtml = `<div class=\"fr-buttons fr-tabs fr-tabs-scroll\">\r\n                        ${_renderCategory(categories, selectedCategory)}\r\n                        </div>`\r\n    return categoryHtml\r\n  }\r\n\r\n  /** \r\n   * Returns the HTML for the emoticon selector part of the popup \r\n   */\r\n  function _renderEmoticonHtml(selectedCategory) {\r\n    const emoticonHtml = `\r\n        <div class=\"fr-icon-container fr-emoticon-container\">\r\n            ${_renderEmoticon(selectedCategory)}\r\n        </div>\r\n        `\r\n    return emoticonHtml\r\n  }\r\n\r\n  /** \r\n   * Register keyboard events. \r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('emoticons') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n      let index\r\n      let $el\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n\r\n        // Extremities reached.\r\n        if (($focused_item.is('span.fr-emoticon') && e.shiftKey) || ($focused_item.is('a') && !e.shiftKey)) {\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          // Focus back the popup's toolbar if exists.\r\n          status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n        }\r\n\r\n        if (status !== false) {\r\n\r\n          // Build elements that should be focused next.\r\n          let $tabElements = $popup.find('span.fr-emoticon:focus').first().concat($popup.findVisible(' div.fr-tabs').first().concat($popup.find('a')))\r\n\r\n          if ($focused_item.is('span.fr-emoticon')) {\r\n            $tabElements = $tabElements.not('span.fr-emoticon:not(:focus)')\r\n          }\r\n\r\n          // Get focused item position.\r\n          index = $tabElements.index($focused_item)\r\n\r\n          // Backwards.\r\n          if (e.shiftKey) {\r\n            index = (((index - 1) % $tabElements.length) + $tabElements.length) % $tabElements.length\r\n\r\n            // Javascript negative modulo bug.\r\n            // Forward.\r\n          }\r\n          else {\r\n            index = (index + 1) % $tabElements.length\r\n          }\r\n\r\n          // Find next element to focus.\r\n          $el = $tabElements.get(index)\r\n\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-emoticon')) {\r\n\r\n          // Get all current emoticons.\r\n          const $emoticons = $focused_item.parent().find('span.fr-emoticon')\r\n\r\n          // Get focused item position.\r\n          index = $emoticons.index($focused_item)\r\n\r\n          // Get emoticons matrix dimensions.\r\n          const { emoticonsStep : columns } = editor.opts\r\n          const lines = Math.floor($emoticons.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          $el = $($emoticons.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n        if ($focused_item.is('a')) {\r\n          $focused_item[0].click()\r\n        }\r\n        else {\r\n          editor.button.exec($focused_item)\r\n        }\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n     * Go back to the inline editor.\r\n     */\r\n  function back() {\r\n    editor.popups.hide('emoticons')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  /** \r\n   * Render and return the emoticon span html\r\n   */\r\n  function _renderEmoticon(selectedCategory) {\r\n    let emoticon_html = ''\r\n    \r\n    let i = 0\r\n    selectedCategory.emoticons.forEach(emoticon => {\r\n     \r\n      const compiledCode = emoticon.code.split('-').reduce((compiledCode, code) => {\r\n        return compiledCode ? (`${compiledCode}&zwj;&#x${code.toLowerCase()};`) : (`&#x${code.toLowerCase()};`)\r\n      }, '')\r\n\r\n      const imageMap = {\r\n        image: emoticon.code.toLowerCase(),\r\n        compiledCode: emoticon.uCode ? emoticon.uCode : compiledCode\r\n      }\r\n\r\n      const emoticonMap = {\r\n        dataParam1: emoticon.code.toLowerCase(),\r\n        dataParam2: imageMap.compiledCode,\r\n        title: editor.language.translate(emoticon.desc),\r\n        image: editor.opts.emoticonsUseImage ? `<img src=\"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${imageMap.image}.svg\"/>` : `${imageMap.compiledCode}`,\r\n        desc: editor.language.translate(emoticon.desc)\r\n      }\r\n      \r\n      emoticon_html += `<span class=\"fr-command fr-emoticon fr-icon\" role=\"button\" \r\n      data-cmd=\"insertEmoticon\" data-param1=\"${emoticonMap.dataParam1}\" \r\n      data-param2=\"${emoticonMap.dataParam2}\"  title=\"${emoticonMap.title}\" >\r\n      ${emoticonMap.image}<span class=\"fr-sr-only\">${emoticonMap.desc}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      \r\n      i++\r\n    })\r\n    return emoticon_html\r\n  }\r\n\r\n  /** \r\n   * Render and return tab button html\r\n   */\r\n  function _renderCategory(categories, selectedCategory) {\r\n    let buttonHtml = ''\r\n    \r\n    categories.forEach(category => {\r\n\r\n      const imageMap = {\r\n        image: category.code.toLowerCase()\r\n      }\r\n\r\n      const buttonMap = {\r\n        elementClass: category.id === selectedCategory.id ? 'fr-active fr-active-tab' : '',\r\n        emoticonsUnicodeClass: editor.opts.emoticonsUseImage ? '' : 'fr-tabs-unicode',\r\n        title: editor.language.translate(category.name),\r\n        dataCmd: 'setEmoticonCategory',\r\n        dataParam1: category.id,\r\n        image: editor.opts.emoticonsUseImage ? `<img src=\"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${imageMap.image}.svg\"/>` : `&#x${imageMap.image};`\r\n      }\r\n\r\n      buttonHtml += `<button class=\"fr-command fr-btn ${buttonMap.elementClass} ${buttonMap.emoticonsUnicodeClass}\" \r\n      title=\"${buttonMap.title}\" data-cmd=\"${buttonMap.dataCmd}\" data-param1=\"${buttonMap.dataParam1}\">\r\n       ${buttonMap.image} </button>`\r\n    })\r\n    return buttonHtml\r\n  }\r\n\r\n  /**\r\n   * Render image if emoticonsUseImage option is set to 'true'\r\n   */\r\n  function _renderUseImage() {\r\n    if (editor.opts.emoticonsUseImage) {\r\n      return '<p style=\"font-size: 12px; text-align: center; padding: 0 5px;\">Emoji free by <a class=\"fr-link\" tabIndex=\"-1\" href=\"http://emojione.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" role=\"link\" aria-label=\"Open Emoji One website.\">Emoji One</a></p>'\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _load,\r\n    insert: addEmoticon,\r\n    setEmoticonCategory: setEmoticonCategory,\r\n    showEmoticonsPopup: _showEmoticonsPopup,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Toolbar emoticons button.\r\nFE.DefineIcon('emoticons', {\r\n  NAME: 'smile-o',\r\n  FA5NAME: 'smile',\r\n  SVG_KEY: 'smile'\r\n})\r\nFE.RegisterCommand('emoticons', {\r\n  title: 'Emoticons',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (this.popups.isVisible('emoticons')) {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('emoticons')\r\n    }\r\n    else {\r\n      this.emoticons.showEmoticonsPopup()\r\n    }\r\n  },\r\n  plugin: 'emoticons'\r\n})\r\n\r\n// Insert emoticon command.\r\nFE.RegisterCommand('insertEmoticon', {\r\n  callback(cmd, code, compiledCode) {\r\n\r\n    // Insert emoticon\r\n    this.emoticons.insert(compiledCode, this.opts.emoticonsUseImage ? `https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${code}.svg` : null)\r\n\r\n    // Hide emoticons popup.\r\n    this.popups.hide('emoticons')\r\n  }\r\n})\r\n\r\n/* set and show the emoticon category */\r\nFE.RegisterCommand('setEmoticonCategory', {\r\n  undo: false,\r\n  focus: false,\r\n  callback(cmd, category) {\r\n    this.emoticons.setEmoticonCategory(category)\r\n  }\r\n})\r\n\r\n// Emoticons back.\r\nFE.DefineIcon('emoticonsBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('emoticonsBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.emoticons.back()\r\n  }\r\n})\r\n\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  entities: '&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;'\r\n  + '&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;'\r\n  + '&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;'\r\n  + '&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;'\r\n  + '&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;'\r\n  + '&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;'\r\n  + '&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;'\r\n  + '&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;'\r\n  + '&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;'\r\n  + '&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;'\r\n  + '&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;'\r\n  + '&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;'\r\n  + '&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;'\r\n  + '&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;'\r\n  + '&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;'\r\n  + '&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;'\r\n  + '&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;'\r\n})\r\n\r\nFE.PLUGINS.entities = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  let _reg_exp \r\n  let _map \r\n\r\n  // if &, then index should be 0\r\n  function _process(el) {\r\n    const { textContent : text } = el \r\n\r\n    if (text.match(_reg_exp)) {\r\n      let new_text = '' \r\n\r\n      for (let j = 0;  j < text.length; j++) {\r\n        if (_map[text[j]]) new_text += _map[text[j]] \r\n        else new_text += text[j] \r\n      }\r\n\r\n      el.textContent = new_text \r\n    }\r\n  }\r\n\r\n  function _encode(el) {\r\n    if (el && ['STYLE', 'SCRIPT', 'svg', 'IFRAME'].indexOf(el.tagName) >= 0) return true \r\n\r\n    const contents = editor.node.contents(el) \r\n\r\n    // Process contents.\r\n    for (let i = 0; i < contents.length; i++) {\r\n      if (contents[i].nodeType === Node.TEXT_NODE) {\r\n        _process(contents[i]) \r\n      }\r\n      else {\r\n        _encode(contents[i]) \r\n      }\r\n    }\r\n\r\n    // Process node itself.\r\n    if (el.nodeType === Node.TEXT_NODE) _process(el)\r\n    \r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Encode entities.\r\n   */\r\n  const _encodeEntities = (html) => {\r\n    if (html.length === 0) return '' \r\n\r\n    return editor.clean.exec(html, _encode).replace(/\\&amp;/g, '&') \r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  const _init = () => {\r\n    if (!editor.opts.htmlSimpleAmpersand) {\r\n      editor.opts.entities = `${editor.opts.entities}&amp;`\r\n    }\r\n\r\n    // Do escape.\r\n    const entities_text = $(document.createElement('div')).html(editor.opts.entities).text() \r\n    const entities_array = editor.opts.entities.split(';') \r\n    _map = {} \r\n    _reg_exp = '' \r\n\r\n    for (let i = 0; i < entities_text.length; i++) {\r\n      const chr = entities_text.charAt(i) \r\n      _map[chr] = `${entities_array[i]};` \r\n      _reg_exp += `\\\\${chr + (i < entities_text.length - 1 ? '|' : '')}`\r\n    }\r\n    _reg_exp = new RegExp(`(${_reg_exp})`, 'g') \r\n\r\n    editor.events.on('html.get', _encodeEntities, true) \r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'file.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fileUpload: true,\r\n  fileUploadURL: null,\r\n  fileUploadParam: 'file',\r\n  fileUploadParams: {},\r\n  fileUploadToS3: false,\r\n  fileUploadToAzure: false,\r\n  fileUploadMethod: 'POST',\r\n  fileMaxSize: 10 * 1024 * 1024,\r\n  fileAllowedTypes: ['*'],\r\n  fileInsertButtons: ['fileBack', '|'],\r\n  fileUseSelectedText: false\r\n})\r\n\r\nFE.PLUGINS.file = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_FILE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'File cannot be loaded from the passed link.'\r\n  error_messages[MISSING_LINK] = 'No link in upload response.'\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.'\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.'\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.'\r\n  error_messages[BAD_FILE_TYPE] = 'File file type is invalid.'\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFile\"]')\r\n\r\n    let $popup = editor.popups.get('file.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    hideProgressBar()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('file.insert')\r\n      editor.popups.setContainer('file.insert', editor.$tb)\r\n\r\n      if ($btn.isVisible) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('file.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('file.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n  function showProgressBar() {\r\n    let $popup = editor.popups.get('file.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-file-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('file.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-file-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      if (dismiss) {\r\n        editor.events.focus()\r\n        editor.popups.hide('file.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('file.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-file-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('file.insert')\r\n    const $layer = $popup.find('.fr-file-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n  /**\r\n   * Insert the uploaded file.\r\n   */\r\n  function insert(link, text, response) {\r\n    editor.edit.on()\r\n\r\n    // Focus in the editor.\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n\r\n    if (editor.opts.fileUseSelectedText && editor.selection.text().length) {\r\n      text = editor.selection.text()\r\n    }\r\n\r\n    // Insert the link.\r\n    editor.html.insert(`<a href=\"${link}\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">${text}</a>`)\r\n\r\n    // Get the file.\r\n    const $file = editor.$el.find('#fr-inserted-file')\r\n\r\n    $file.removeAttr('id')\r\n\r\n    editor.popups.hide('file.insert')\r\n\r\n    editor.undo.saveStep()\r\n\r\n    _syncFiles()\r\n\r\n    editor.events.trigger('file.inserted', [$file, response])\r\n  }\r\n\r\n  /**\r\n   * Parse file response.\r\n   */\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('file.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response)\r\n\r\n        return false\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse file response.\r\n   */\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('file.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * File was uploaded to the server and we have a response.\r\n   */\r\n  function _fileUploaded(text, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.fileUploadToS3 || editor.opts.fileUploadToAzure) {\r\n        if (status === 201) {\r\n          let link\r\n          if(editor.opts.fileUploadToAzure) {\r\n            if (editor.events.trigger('file.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          }\r\n\r\n          if (link) {\r\n            insert(link, text, response || responseXML)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText)\r\n\r\n          if (resp) {\r\n            insert(resp.link, text, response || responseText)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText)\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * File upload error.\r\n   */\r\n  function _fileUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * File upload progress.\r\n   */\r\n  function _fileUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      _setProgressMessage(editor.language.translate('Uploading'), complete)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Throw an file error.\r\n   */\r\n  function _throwError(code, response) {\r\n    editor.edit.on()\r\n    _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'))\r\n\r\n    editor.events.trigger('file.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  /**\r\n   * File upload aborted.\r\n   */\r\n  function _fileUploadAborted() {\r\n    editor.edit.on()\r\n    hideProgressBar(true)\r\n  }\r\n\r\n  function _browserUpload(file) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let { result : link } = reader\r\n\r\n      // Convert image to local blob.\r\n      const binary = atob(reader.result.split(',')[1])\r\n      const array = []\r\n\r\n      for (let i = 0; i < binary.length; i++) {\r\n        array.push(binary.charCodeAt(i))\r\n      }\r\n\r\n      // Get local image link.\r\n      link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n        type: file.type\r\n      }))\r\n\r\n      editor.file.insert(link, file.name, null)\r\n    }\r\n\r\n    showProgressBar()\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n\r\n  function upload(files) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof files !== 'undefined' && files.length > 0) {\r\n\r\n      // Check if we should cancel the file upload.\r\n      if (editor.events.trigger('file.beforeUpload', [files]) === false) {\r\n\r\n        return false\r\n      }\r\n\r\n\r\n      const file = files[0]\r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.fileUploadURL === null || editor.opts.fileUploadURL === DEFAULT_FILE_UPLOAD_URL) && !editor.opts.fileUploadToS3 && !editor.opts.fileUploadToAzure) {\r\n        _browserUpload(file)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check file max size.\r\n      if (file.size > editor.opts.fileMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check file types.\r\n      if (editor.opts.fileAllowedTypes.indexOf('*') < 0 && editor.opts.fileAllowedTypes.indexOf(file.type.replace(/file\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE)\r\n\r\n        return false\r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data\r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null\r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key\r\n\r\n        // Upload to S3.\r\n        if (editor.opts.fileUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.fileUploadToS3.keyStart + (new Date()).getTime() + '-' + (file.name || 'untitled'))\r\n          form_data.append('success_action_status', '201')\r\n          form_data.append('X-Requested-With', 'xhr')\r\n          form_data.append('Content-Type', file.type)\r\n\r\n          for (key in editor.opts.fileUploadToS3.params) {\r\n            if (editor.opts.fileUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.fileUploadToS3.params[key])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.fileUploadParams) {\r\n          if (editor.opts.fileUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.fileUploadParams[key])\r\n          }\r\n        }\r\n\r\n        // Set the file in the request.\r\n        form_data.append(editor.opts.fileUploadParam, file)\r\n\r\n        // Create XHR request.\r\n        let { fileUploadURL : url } = editor.opts\r\n\r\n        if (editor.opts.fileUploadToS3) {\r\n          if (editor.opts.fileUploadToS3.uploadURL) {\r\n            url = editor.opts.fileUploadToS3.uploadURL\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.fileUploadToS3.region}.amazonaws.com/${editor.opts.fileUploadToS3.bucket}`\r\n          }\r\n        }\r\n        let fileURL\r\n        let azureKey\r\n        let fileUploadMethod = editor.opts.fileUploadMethod\r\n        if (editor.opts.fileUploadToAzure) {\r\n          if (editor.opts.fileUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.fileUploadToAzure.uploadURL}/${file.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.fileUploadToAzure.account}.blob.core.windows.net/${editor.opts.fileUploadToAzure.container}/${file.name}`)\r\n          }\r\n          fileURL = url\r\n          if (editor.opts.fileUploadToAzure.SASToken) {\r\n            url +=  editor.opts.fileUploadToAzure.SASToken\r\n          }\r\n          fileUploadMethod = 'PUT'\r\n        }        \r\n        \r\n        const xhr = editor.core.getXHR(url, fileUploadMethod)\r\n\r\n        if (editor.opts.fileUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.fileUploadToAzure.SASToken && editor.opts.fileUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.fileUploadToAzure.account\r\n            let azureContainer = editor.opts.fileUploadToAzure.container\r\n            if(editor.opts.fileUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.fileUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + file.name)\r\n            let stringToSign = fileUploadMethod + '\\n\\n\\n' + file.size + '\\n\\n' + file.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.fileUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", file.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.fileUploadParams) {\r\n            if (editor.opts.fileUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.fileUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.fileUploadToAzure.params) {\r\n            if (editor.opts.fileUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.fileUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        // Set upload events.\r\n        xhr.onload = function () {\r\n          _fileUploaded.call(xhr, file.name, fileURL, azureKey)\r\n        }\r\n        xhr.onerror = _fileUploadError\r\n        xhr.upload.onprogress = _fileUploadProgress\r\n        xhr.onabort = _fileUploadAborted\r\n\r\n        showProgressBar()\r\n\r\n        // editor.edit.off()\r\n\r\n        const $popup = editor.popups.get('file.insert')\r\n\r\n        if ($popup) {\r\n          $popup.off('abortUpload')\r\n          $popup.on('abortUpload', function () {\r\n            if (xhr.readyState !== 4) {\r\n              xhr.abort()\r\n            }\r\n          })\r\n        }\r\n\r\n        // Send data.\r\n      xhr.send(editor.opts.fileUploadToAzure ? file : form_data)   \r\n      }\r\n    }\r\n  }\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-file-upload-layer', function () {\r\n      $(this).addClass('fr-drop')\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-file-upload-layer', function () {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-file-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      $(this).removeClass('fr-drop')\r\n\r\n      const { dataTransfer : dt } = e.originalEvent\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.file.upload(dt.files)\r\n      }\r\n    }, true)\r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-file-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click')\r\n      })\r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-file-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        inst.events.disableBlur()\r\n        $popup.find('input:focus').blur()\r\n        inst.events.enableBlur()\r\n\r\n        inst.file.upload(this.files)\r\n      }\r\n\r\n      // Else IE 9 case.\r\n\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar()\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('file.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let file_buttons = ''\r\n\r\n    if (!editor.opts.fileUpload) {\r\n      editor.opts.fileInsertButtons.splice(editor.opts.fileInsertButtons.indexOf('fileUpload'), 1)\r\n    }\r\n\r\n    file_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.fileInsertButtons)}</div>`\r\n\r\n    // File upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (editor.opts.fileUpload) {\r\n      upload_layer = `<div class=\"fr-file-upload-layer fr-layer fr-active\" id=\"fr-file-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop file')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" name=\"${editor.opts.fileUploadParam}\" accept=\"${(editor.opts.fileAllowedTypes.indexOf('*') >= 0 ? '/' : '')}${editor.opts.fileAllowedTypes.join(', ').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-file-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-file-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"fileDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: file_buttons,\r\n      upload_layer: upload_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('file.insert', template)\r\n\r\n    _bindInsertEvents($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _onRemove(link) {\r\n    if (editor.node.hasClass(link, 'fr-file')) {\r\n\r\n      return\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const { dataTransfer : dt } = e.originalEvent\r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const file = dt.files[0]\r\n\r\n      if (file && typeof file.type !== 'undefined') {\r\n\r\n        // Dropped file is an file that we allow.\r\n        if (file.type.indexOf('image') < 0) {\r\n          if (!editor.opts.fileUpload) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n\r\n          editor.markers.remove()\r\n          editor.markers.insertAtPoint(e.originalEvent)\r\n          editor.$el.find('.fr-marker').replaceWith(FE.MARKERS)\r\n\r\n          // Hide popups.\r\n          editor.popups.hideAll()\r\n\r\n          // Show the file insert popup.\r\n          let $popup = editor.popups.get('file.insert')\r\n\r\n          if (!$popup) $popup = _initInsertPopup()\r\n          editor.popups.setContainer('file.insert', editor.$sc)\r\n          editor.popups.show('file.insert', e.originalEvent.pageX, e.originalEvent.pageY)\r\n          showProgressBar()\r\n\r\n          // Upload files.\r\n          upload(dt.files)\r\n\r\n          // Cancel anything else.\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n      }\r\n      else if (file.type.indexOf('image') < 0) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop)\r\n\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n      const $popup = editor.popups.get('file.insert')\r\n\r\n      if ($popup && key_code === FE.KEYCODE.ESC) {\r\n        $popup.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      const $popup = editor.popups.get('file.insert')\r\n\r\n      if ($popup) {\r\n        $popup.trigger('abortUpload')\r\n      }\r\n    })\r\n  }\r\n\r\n  function back() {\r\n    editor.events.disableBlur()\r\n    editor.selection.restore()\r\n    editor.events.enableBlur()\r\n\r\n    editor.popups.hide('file.insert')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  let files\r\n\r\n  function _syncFiles() {\r\n\r\n    // Get current files.\r\n    const c_files = Array.prototype.slice.call(editor.el.querySelectorAll('a.fr-file'))\r\n\r\n    // Current files src.\r\n    const file_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_files.length; i++) {\r\n      file_srcs.push(c_files[i].getAttribute('href'))\r\n    }\r\n\r\n    // Loop previous files and check their src.\r\n    if (files) {\r\n      for (i = 0; i < files.length; i++) {\r\n        if (file_srcs.indexOf(files[i].getAttribute('href')) < 0) {\r\n          editor.events.trigger('file.unlink', [files[i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current files are the old ones.\r\n    files = c_files\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    editor.events.on('link.beforeRemove', _onRemove)\r\n\r\n    if (editor.$wp) {\r\n      _syncFiles()\r\n      editor.events.on('contentChanged', _syncFiles)\r\n    }\r\n\r\n    _initInsertPopup(true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    upload: upload,\r\n    insert: insert,\r\n    back: back,\r\n    hideProgressBar: hideProgressBar\r\n  }\r\n}\r\n\r\n// Insert file button.\r\nFE.DefineIcon('insertFile', {\r\n  NAME: 'file-o',\r\n  FA5NAME: 'file',\r\n  SVG_KEY: 'insertFile'\r\n})\r\nFE.RegisterCommand('insertFile', {\r\n  title: 'Upload File',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('file.insert')) {\r\n      this.file.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('file.insert');\r\n    }\r\n  },\r\n  plugin: 'file'\r\n})\r\n\r\nFE.DefineIcon('fileBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('fileBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.file.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('fileDismissError', {\r\n  title: 'OK',\r\n  callback: function () {\r\n    this.file.hideProgressBar(true)\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'filesManager.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]',\r\n  'image.edit': '[_BUTTONS_]',\r\n  'image.alt': '[_BUTTONS_][_ALT_LAYER_]',\r\n  'image.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  filesInsertButtons: ['imageBack', '|', 'filesUpload', 'filesByURL', 'filesEmbed'],\r\n  filesInsertButtons2: ['deleteAll', 'insertAll', 'cancel', 'minimize'],\r\n  imageEditButtons: ['imageReplace', 'imageAlign', 'imageCaption', 'imageRemove', 'imageLink', 'linkOpen', 'linkEdit', 'linkRemove', '-', 'imageDisplay', 'imageStyle', 'imageAlt', 'imageSize'],\r\n  imageAltButtons: ['imageBack', '|'],\r\n  imageSizeButtons: ['imageBack', '|'],\r\n  imageUpload: true,\r\n  filesManagerUploadURL: null,\r\n  imageCORSProxy: 'https://cors-anywhere.froala.com',\r\n  imageUploadRemoteUrls: true,\r\n  filesManagerUploadParam: 'file',\r\n  filesManagerUploadParams: {},\r\n  googleOptions:{},\r\n  filesManagerUploadToS3: false,\r\n  filesManagerUploadToAzure: false,\r\n  filesManagerUploadMethod: 'POST',\r\n  filesManagerMaxSize: 10* 1024 * 1024,  \r\n  filesManagerAllowedTypes: ['*'],\r\n  imageResize: true,\r\n  imageResizeWithPercent: false,\r\n  imageRoundPercent: false,\r\n  imageDefaultWidth: 300,\r\n  imageDefaultAlign: 'center',\r\n  imageDefaultDisplay: 'block',\r\n  imageSplitHTML: false,\r\n  imageStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-bordered': 'Bordered',\r\n    'fr-shadow': 'Shadow'\r\n  },\r\n  imageMove: true,\r\n  imageMultipleStyles: true,\r\n  imageTextNear: true,\r\n  imagePaste: true,\r\n  imagePasteProcess: false,\r\n  imageMinWidth: 16,\r\n  imageOutputSize: false,\r\n  imageDefaultMargin: 5,\r\n  imageAddNewLine: false\r\n})\r\n\r\nFE.VIDEO_PROVIDERS = [\r\n  {\r\n    test_regex: /^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,\r\n    url_text: 'https://www.youtube.com/embed/$1?$2',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'youtube'\r\n  },\r\n  {\r\n    test_regex: /^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,\r\n    url_text: 'https://player.vimeo.com/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vimeo'\r\n  },\r\n  {\r\n    test_regex: /^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,\r\n    url_text: 'https://www.dailymotion.com/embed/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'dailymotion'\r\n  },\r\n  {\r\n    test_regex: /^.+(screen.yahoo.com)\\/[^_&]+/,\r\n    url_regex: '',\r\n    url_text: '',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'yahoo'\r\n  },\r\n  {\r\n    test_regex: /^.+(rutube.ru)\\/[^_&]+/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,\r\n    url_text: 'https://rutube.ru/play/embed/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'rutube'\r\n  },\r\n  {\r\n    test_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,\r\n    url_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,\r\n    url_text: 'https://play.vidyard.com/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vidyard'\r\n  }\r\n] \r\n\r\nFE.VIDEO_EMBED_REGEX = /^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i \r\nFE.IMAGE_EMBED_REGEX = /^\\W*((<img(.|\\n)*>(\\s|\\n)*))\\W*$/i\r\n\r\nFE.PLUGINS.filesManager = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_FILE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $current_image\r\n  let $current_image_index\r\n  let current_index\r\n  let $file_manager_dialog_open = false\r\n  let $child_window_open = false\r\n  let $image_resizer\r\n  let $handler\r\n  let $overlay\r\n  let disableEdit \r\n  let mousedown = false\r\n  let file_list = new Map();\r\n  let file_list_values = new Map();\r\n  let XMLHttpRequests = new Map()\r\n  let fileUploads = new Map()\r\n  let checked_files = new Map()\r\n  let failedUploadFiles = new Map()\r\n  let totalUploadPercent = 0\r\n  let completedUploads = 0\r\n  let fileKeys = []\r\n  let imageEditIndex = -1\r\n  let editImageValue\r\n  let autoplayCheckbox=[]\r\n  let fileListIndex = 0\r\n  const requiredPlugins = ['file', 'image','imageTUI', 'video']\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n  const CORRUPTED_IMAGE = 8\r\n  const ERROR_LINK = 9\r\n  const UPLOAD_CANCEL = 10\r\n\r\n  const unsupported_file_types=['video/avi','video/mpeg','video/x-ms-wmv']\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'File cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'File type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n  error_messages[CORRUPTED_IMAGE] = 'File is corrupted.'\r\n  error_messages[ERROR_LINK] = 'Error during file loading.'\r\n  error_messages[UPLOAD_CANCEL] = 'File upload cancelled'\r\n\r\n  var fileFormats = [\r\n    ['png', 'PNG', 'jpg', 'JPG', 'jpeg', 'JPEG', 'gif', 'GIF', 'webp', 'WEBP'],\r\n    ['docx', 'DOCX', 'xlsx'],\r\n    ['mp4', 'avi', 'mov', 'url']\r\n  ];\r\n\r\n  /**\r\n   * Refresh the image insert popup.\r\n   */\r\n    function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    const $url_input = $popup.find('.fr-files-by-url-layer input')\r\n    $url_input.val('')\r\n\r\n    let $embed_area = $popup.find('.fr-files-embed-layer textarea')\r\n    $embed_area.val('').trigger('change')\r\n\r\n    $url_input.trigger('change')\r\n  }\r\n\r\n  /**\r\n   * Show the image upload popup.\r\n   */\r\n\r\n  function showInsertPopup(rerender) {\r\n    if(!editor.hasOwnProperty('imageTUI')){\r\n      if(isImage){\r\n        disableEdit = 'fr-disabled'\r\n       }\r\n    }\r\n    $file_manager_dialog_open = true\r\n    // removing all files with errors\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      deleteFile(index)\r\n    })\r\n    let $popup\r\n    // check for required plugins\r\n    if(checkRequiredPlugins()){\r\n      $popup = editor.popups.get('filesManager.insert')\r\n      if (!$popup) $popup = _initInsertPopup()\r\n    }\r\n    else{\r\n      $popup = editor.popups.get('filesManager.insert')\r\n      if (!$popup) $popup = _initPluginErrorPopup()\r\n    }\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFiles\"]')\r\n    hideProgressBar()   \r\n    if (rerender || !$popup.hasClass('fr-active')) {      \r\n      if(!rerender){\r\n        resetAllFilesCheckbox()\r\n      }\r\n      editor.popups.refresh('filesManager.insert')\r\n      editor.popups.setContainer('filesManager.insert', editor.$tb)     \r\n      \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn, file_list.size)\r\n        editor.popups.show('filesManager.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('filesManager.insert')        \r\n      }\r\n    }\r\n    editor.popups.setPopupDimensions($popup)\r\n    if(checkRequiredPlugins()){\r\n      editor.popups.setFileListHeight($popup)\r\n    }\r\n\r\n    if($popup.find('.fr-upload-progress') && file_list.size == 0)\r\n        $popup.find('.fr-upload-progress').addClass('fr-none')\r\n\r\n  }\r\n\r\n  function checkRequiredPlugins(){\r\n    let plugins = true\r\n    requiredPlugins.forEach(function(plugin){\r\n      if(editor.opts.pluginsEnabled.indexOf(plugin) < 0){\r\n        plugins = false\r\n      }\r\n    })\r\n    return plugins\r\n  }\r\n\r\n  function addPlugins(){\r\n    requiredPlugins.forEach(function(plugin){\r\n      if(editor.opts.pluginsEnabled.indexOf(plugin) < 0){\r\n        editor.opts.pluginsEnabled.push(plugin)\r\n      }\r\n    })\r\n  }\r\n\r\n  function loadPlugins(module_list){\r\n    for (const m_name in module_list) {\r\n      if(!editor[m_name]){\r\n        if(FE.PLUGINS[m_name] && editor.opts.pluginsEnabled.indexOf(m_name) < 0){\r\n          continue\r\n        }\r\n        editor[m_name] = new module_list[m_name](editor)\r\n        if (editor[m_name]._init) {\r\n          editor[m_name]._init()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n      hideProgressBar()\r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n\r\n  function _repositionResizer() {\r\n    if (!$image_resizer) _initImageResizer()\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $container = editor.$wp || editor.$sc\r\n\r\n    $container.append($image_resizer)\r\n    $image_resizer.data('instance', editor)\r\n\r\n    let wrap_correction_top = $container.scrollTop() - (($container.css('position') != 'static' ? $container.offset().top : 0))\r\n    let wrap_correction_left = $container.scrollLeft() - (($container.css('position') != 'static' ? $container.offset().left : 0))\r\n\r\n    wrap_correction_left -= editor.helpers.getPX($container.css('border-left-width'))\r\n    wrap_correction_top -= editor.helpers.getPX($container.css('border-top-width'))\r\n\r\n    if (editor.$el.is('img') && editor.$sc.is('body')) {\r\n      wrap_correction_top = 0\r\n      wrap_correction_left = 0\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let iframePaddingTop = 0\r\n    let iframePaddingLeft = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $image_resizer\r\n      .css('top', (editor.opts.iframe ? $el.offset().top + iframePaddingTop : $el.offset().top + wrap_correction_top) - 1)\r\n      .css('left', (editor.opts.iframe ? $el.offset().left + iframePaddingLeft : $el.offset().left + wrap_correction_left) - 1)\r\n      .css('width', $el.get(0).getBoundingClientRect().width)\r\n      .css('height', $el.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active')\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>`\r\n  }\r\n\r\n  /**\r\n   * Set the image with\r\n   */\r\n  function _setWidth(width) {\r\n    if (hasCaption()) {\r\n      $current_image.parents('.fr-img-caption').css('width', width)\r\n    }\r\n    else {\r\n      $current_image.css('width', width)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.$el.find('img.fr-error').left) return false\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n    // Get offset.\r\n    let start_x = e.pageX || e.originalEvent.touches[0].pageX\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n      // See if the entire editor is inside iframe to adjust starting offset.\r\n      const oel = editor.$oel.get(0)\r\n      const doc = oel.ownerDocument\r\n      const win = doc.defaultView || doc.parentWindow\r\n      let editor_inside_iframe = false\r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE))\r\n      } catch (ex) { }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        start_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft\r\n      }\r\n    }\r\n\r\n    $handler = $(this)\r\n    $handler.data('start-x', start_x)\r\n    $handler.data('start-width', $current_image.width())\r\n    $handler.data('start-height', $current_image.height())\r\n\r\n    // Set current width.\r\n    let width = $current_image.width()\r\n\r\n    // Update width value if resizing with percent.\r\n    if (editor.opts.imageResizeWithPercent) {\r\n      const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n      width = (width / $(p_node).outerWidth() * 100).toFixed(2) + '%'\r\n    }\r\n    // Set the image width.\r\n    _setWidth(width)\r\n    $overlay.show()\r\n    editor.popups.hideAll()\r\n    _unmarkExit()\r\n  }\r\n\r\n  function insertEmbed(code) {\r\n    if (typeof code == 'undefined') {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n      code = $popup.find('.fr-files-embed-layer textarea').val() || ''\r\n    }\r\n\r\n    if (code.length === 0 || !(FE.VIDEO_EMBED_REGEX.test(code)||FE.IMAGE_EMBED_REGEX.test(code))) {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      if(FE.VIDEO_EMBED_REGEX.test(code))\r\n      {\r\n        editor.events.trigger('video.codeError', [code])\r\n      }\r\n    }\r\n    else {\r\n      insertEmbeddedFile(code)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n    let real_image_size\r\n\r\n    if ($handler && $current_image) {\r\n      e.preventDefault()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null)\r\n\r\n      if (!c_x) return false\r\n\r\n      const s_x = $handler.data('start-x')\r\n      let diff_x = c_x - s_x\r\n      let width = $handler.data('start-width')\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x\r\n      }\r\n\r\n      if (editor.opts.imageResizeWithPercent) {\r\n        const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n        width = ((width + diff_x) / $(p_node).outerWidth() * 100).toFixed(2)\r\n\r\n        if (editor.opts.imageRoundPercent) width = Math.round(width)\r\n\r\n        // Set the image width.\r\n        _setWidth(`${width}%`)\r\n\r\n        // Get the real image width after resize.\r\n        if (hasCaption()) {\r\n          real_image_size = (editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n        else {\r\n          real_image_size = (editor.helpers.getPX($current_image.css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width && !editor.opts.imageRoundPercent) {\r\n          _setWidth(`${real_image_size}%`)\r\n        }\r\n\r\n        $current_image.css('height', '').removeAttr('height')\r\n      }\r\n      else {\r\n        if (width + diff_x >= editor.opts.imageMinWidth) {\r\n          // Set width for image parent node as well.\r\n          _setWidth(width + diff_x)\r\n\r\n          // Get the real image width after resize.\r\n          if (hasCaption()) {\r\n            real_image_size = editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width'))\r\n          }\r\n          else {\r\n            real_image_size = editor.helpers.getPX($current_image.css('width'))\r\n          }\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width + diff_x) {\r\n          _setWidth(real_image_size)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1963.\r\n        if (($current_image.attr('style') || '').match(/(^height:)|(; *height:)/) || $current_image.attr('height')) {\r\n          $current_image.css('height', $handler.data('start-height') * $current_image.width() / $handler.data('start-width'))\r\n          $current_image.removeAttr('height')\r\n        }\r\n      }\r\n\r\n      _repositionResizer()\r\n\r\n      editor.events.trigger('image.resize', [get()])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    if ($handler && $current_image) {\r\n      if (e) e.stopPropagation()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      $handler = null\r\n      $overlay.hide()\r\n      _repositionResizer()\r\n\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('image.resizeEnd', [get()])\r\n    }\r\n    else { //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n      $image_resizer.removeClass('fr-active')\r\n    }\r\n  }\r\n\r\n  function _disableInsertCheckbox () {\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n      if(document.getElementById('fr-file-autoplay-button-' + index)){\r\n        document.getElementById('fr-file-autoplay-button-' + index).disabled = true\r\n        document.getElementById('fr-file-autoplay-button-' + index).parentElement.classList.add('fr-checkbox-disabled')\r\n        document.getElementById('fr-file-autoplay-button-' + index).parentElement.classList.remove('fr-files-checkbox')\r\n      }\r\n            $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-files-checkbox')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-checkbox-disabled')\r\n    })   \r\n  }\r\n\r\n  function _disableFileIcons () {\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n\r\n      if(document.getElementById(`fr-file-edit-button-${index}`)){\r\n        document.getElementById(`fr-file-edit-button-${index}`).classList.add('fr-disabled')\r\n        document.getElementById(`fr-file-view-button-${index}`).classList.add('fr-disabled')\r\n        document.getElementById(`fr-file-insert-button-${index}`).classList.add('fr-disabled')\r\n      }\r\n    })   \r\n  }\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n\r\n  function _throwError(code, response, $img, index) {\r\n    editor.edit.on()\r\n    if ($current_image) $current_image.addClass('fr-error')\r\n    // https://github.com/froala/wysiwyg-editor/issues/3407\r\n    if (error_messages[code]) {\r\n       if(code == ERROR_DURING_UPLOAD || code == MISSING_LINK || code == BAD_RESPONSE){\r\n         updateFileUploadingProgress(100, index, true)\r\n       }\r\n       failedUploadFiles.set(index, error_messages[code])\r\n       _disableInsertCheckbox()\r\n       _disableFileIcons()\r\n      _showFileErrorMessage(editor.language.translate(error_messages[code]), index)\r\n    }\r\n    else {\r\n      _showFileErrorMessage(editor.language.translate('Something went wrong. Please try again.'), index)\r\n    }\r\n\r\n    // Remove image if it exists.\r\n    if (!$current_image && $img) remove($img)\r\n\r\n    editor.events.trigger('filesManager.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response,\r\n    $img\r\n    ])\r\n  }\r\n\r\n  /**\r\n   * Init the image edit popup.\r\n   */\r\n\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      if (editor.$wp) {\r\n        editor.events.$on(editor.$wp, 'scroll.image-edit', function () {\r\n          if ($current_image && editor.popups.isVisible('image.edit')) {\r\n            editor.events.disableBlur()\r\n          }\r\n        })\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    if (editor.opts.imageEditButtons.length > 0) {\r\n\r\n      image_buttons += `<div class=\"fr-buttons\"> \r\n        ${editor.button.buildList(editor.opts.imageEditButtons)}\r\n        </div>`\r\n\r\n      const template = {\r\n        buttons: image_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('image.edit', template)\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n    /**\r\n   * Cancel File Insert.\r\n   */\r\n\r\n  function cancelFileInsert(){\r\n    this.file_manager_dialog_open = false\r\n    XMLHttpRequests.forEach(function(req, index){      \r\n      if(req.readyState != 4){\r\n        req.abort()\r\n        deleteFile(index)\r\n      }\r\n    })\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find('.fr-progress-bar').removeClass('fr-display-block').addClass('fr-none')\r\n    $popup.find('.fr-command[data-cmd=\"filesUpload\"]').removeClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesByURL\"]').removeClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').removeClass('fr-disabled')\r\n    completedUploads = 0\r\n    XMLHttpRequests = new Map()\r\n    fileUploads = new Map()\r\n    resetAllFilesCheckbox()\r\n    editor.popups.hide('filesManager.insert')\r\n  }\r\n\r\n  /**\r\n   * Cancel File Upload.\r\n   */\r\n\r\n  function cancelFileUpload(index){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const right = $popup.find('.fr-file-item-right-'+index)\r\n    right.get(0).innerHTML = getFileActionButtons(index)\r\n    XMLHttpRequests.get(index).abort()\r\n    updateProgressBar(index, 100, true)\r\n    $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n  }\r\n  \r\n  /**\r\n   * Delete File Upload.\r\n   */\r\n\r\n  function deleteFileUpload(index){\r\n    if(XMLHttpRequests.get(index).readyState != 0){\r\n      XMLHttpRequests.get(index).abort()\r\n      updateProgressBar(index, 100, true)\r\n      XMLHttpRequests.delete(index)\r\n    }\r\n    deleteFile(index)\r\n  }\r\n\r\n  /** \r\n   * \r\n   */\r\n\r\n  function checkInsertAllState() {\r\n    const $popup = editor.popups.get('filesManager.insert') \r\n    let $btnInsert = $popup.find('.fr-command[data-cmd=\"insertAll\"]'),\r\n      $btnDelete = $popup.find('.fr-command[data-cmd=\"deleteAll\"]'),\r\n      isDisabled = true\r\n\r\n    function addCheck(file, i, map) {\r\n      if (checked_files.get(i)) {\r\n        isDisabled = false\r\n      }\r\n    }\r\n    checked_files.forEach(addCheck)\r\n    isDisabled ? $btnInsert.addClass('fr-disabled') : $btnInsert.removeClass('fr-disabled')\r\n    isDisabled ? $btnDelete.addClass('fr-disabled') : $btnDelete.removeClass('fr-disabled')\r\n   }\r\n\r\n  /**\r\n   * Delete File.\r\n   */\r\n\r\n  function deleteFile(index){\r\n    if(file_list_values.get(index) && file_list_values.get(index).link)\r\n      editor.events.trigger('filesManager.removed', [file_list_values.get(index).link])\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2848\r\n    if ($popup.find('.fr-file-' + index).get(0) !== undefined) {\r\n      $popup.find('.fr-file-' + index).get(0).outerHTML = \"\"\r\n    }\r\n    file_list_values.delete(index)\r\n    file_list.delete(index)\r\n    checked_files.delete(index)\r\n    checkInsertAllState()\r\n    if (file_list.size == 0) {\r\n      fileListIndex = 0\r\n    }\r\n    failedUploadFiles.delete(index)\r\n    editor.popups.setPopupDimensions($popup, true)\r\n    if(editor.opts.toolbarBottom) \r\n      showInsertPopup(true)\r\n    else\r\n      editor.popups.setPopupDimensions($popup)\r\n\r\n    if($popup.find('.fr-upload-progress') && file_list.size == 0)\r\n        $popup.find('.fr-upload-progress').addClass('fr-none')\r\n\r\n  }\r\n\r\n  /**\r\n   * Minimize popup.\r\n   */\r\n\r\n  function minimizePopup(current_index) {\r\n    this.file_manager_dialog_open = false\r\n    editor.popups.hide(\"filesManager.insert\");\r\n    resetAllFilesCheckbox(current_index)\r\n    \r\n  }\r\n\r\n/**\r\n   * Reset checkbox of all files.\r\n   */\r\n\r\n  function resetAllFilesCheckbox() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    let checked = $popup.find('.fr-insert-checkbox')\r\n    for(let i = 0 ; i < checked.length ; i++){\r\n      checked.get(i).children['target'].checked = false\r\n      $popup.find('.fr-file-' + checked.get(i).id.split('-').pop()).get(0).classList.add('fr-unchecked')\r\n    }\r\n    if(current_index){\r\n      if(document.getElementById(`fr-file-autoplay-button-${current_index}`))\r\n        document.getElementById(`fr-file-autoplay-button-${current_index}`).checked=false\r\n      autoplayCheckbox=autoplayCheckbox.filter(function(i){\r\n        return i!=current_index\r\n      })\r\n    }else{\r\n      let autoplay = $popup.find('.fr-file-autoplay-button')\r\n      for(let i = 0 ; i < autoplay.length ; i++){\r\n        autoplay.get(i).checked = false\r\n      }\r\n      autoplayCheckbox = []\r\n    }\r\n    checked_files = new Map()\r\n    checkInsertAllState()\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-files-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    if ($current_image) {\r\n      const $el = getEl()\r\n\r\n      editor.popups.setContainer('filesManager.insert', editor.$sc)\r\n      const left = $el.offset().left\r\n      const top = $el.offset().top + $el.height()\r\n\r\n      editor.popups.show('filesManager.insert', left, top, $el.outerHeight())\r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-files-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('img.fr-error').length) {\r\n        editor.events.focus()\r\n\r\n        if (editor.$el.find('img.fr-error').length) {\r\n          editor.$el.find('img.fr-error').remove()\r\n          editor.undo.saveStep()\r\n          editor.undo.run()\r\n          editor.undo.dropRedo()\r\n        }\r\n\r\n        if (!editor.$wp && $current_image) {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n        editor.popups.hide('filesManager.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-files-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $layer = $popup.find('.fr-files-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n\r\n  /**\r\n   * Show error message to the  user for file upload.\r\n   */\r\n\r\n  function _showFileErrorMessage(message, index) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $layer = $popup.find('.fr-upload-progress-layer')\r\n    const $row = $popup.find(`.fr-file-${index}`)\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $row.find('h5')\r\n    $message_header.text(message)\r\n  }\r\n\r\n  /*\r\n   * Drag and Drop Functions\r\n   */\r\n\r\n  let globalListClass = '',\r\n    sortableLists,\r\n    globalX, globalY\r\n\r\n  function enableDragSort(listClass) {\r\n    globalListClass = listClass;\r\n    sortableLists = document.getElementsByClassName(listClass);\r\n    Array.prototype.map.call(sortableLists, (list) => {\r\n      enableDragItem(list)\r\n    });\r\n  }\r\n\r\n  function enableDragItem(item) {\r\n    item.addEventListener(\"dragover\", function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      globalX = event.pageX\r\n      globalY = event.pageY\r\n      let el = document.getElementById('filesList')\r\n      if (globalY + 20 > el.getBoundingClientRect().bottom)\r\n        scrollBy(el, 0, 10)\r\n      if (globalY - 20 < el.getBoundingClientRect().top)\r\n        scrollBy(el, 0, -10)\r\n    }, false);\r\n\r\n    if(editor.helpers.isMobile()){\r\n    let el = item.getElementsByClassName('dot')\r\n    el[0].addEventListener(\"touchmove\", function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      let sourceElement = event.target\r\n      while (sourceElement && !sourceElement.classList.contains(globalListClass)) {\r\n        sourceElement = sourceElement.parentElement\r\n      }  \r\n\r\n      let hoveredItem = document.elementFromPoint(event.targetTouches[0].clientX, event.targetTouches[0].clientY)\r\n      while (hoveredItem && !hoveredItem.classList.contains(globalListClass)) {\r\n        hoveredItem = hoveredItem.parentElement\r\n      }     \r\n\r\n      let elementsWithHoverClass = document.getElementsByClassName('fr-hovered-over-file')\r\n      Array.prototype.forEach.call(elementsWithHoverClass, function(element) {\r\n        element.classList.remove('fr-hovered-over-file')\r\n    });\r\n \r\n    if(hoveredItem && !sourceElement.classList.contains('fr-unchecked'))   \r\n        hoveredItem.classList.add('fr-hovered-over-file')\r\n\r\n      let el = document.getElementById('filesList')\r\n        if (event.targetTouches[0].clientY + 5 > el.getBoundingClientRect().bottom)\r\n          {\r\n            scrollBy(el, 0, 5)\r\n          }\r\n        if (event.targetTouches[0].clientY - 5 < el.getBoundingClientRect().top)\r\n          {\r\n            scrollBy(el, 0, -5)\r\n          }\r\n    }, false);\r\n  }\r\n\r\n    item.ondrag = handleDrag;\r\n    item.ondragend = handleDrop;\r\n    if (editor.helpers.isMobile()) {  \r\n      let el = item.getElementsByClassName('dot')\r\n      el[0].addEventListener('touchmove', handleDrag, false);\r\n      el[0].addEventListener('touchend', handleDrop, false);\r\n    }\r\n  }\r\n\r\n\r\n  let selectedItem,\r\n   selectedLocX,\r\n   selectedLocY\r\n\r\n   function scrollBy(el, x, y) {\r\n    el.scrollLeft += x;\r\n    el.scrollTop += y;\r\n  }\r\n\r\n  function handleDrag(item) {\r\n    if (editor.helpers.isMobile()) {\r\n      selectedLocX = event.touches[0].clientX\r\n      selectedLocY = event.touches[0].clientY\r\n    }\r\n    selectedItem = item.target\r\n    while (!selectedItem.classList.contains(globalListClass)) {\r\n      selectedItem = selectedItem.parentElement\r\n    }\r\n\r\n    if(!selectedItem.classList.contains(globalListClass) || selectedItem.classList.contains('fr-unchecked')) {\r\n      selectedItem = undefined\r\n      return\r\n    }\r\n    if(editor.helpers.isMobile())\r\n      selectedItem.classList.add('drag-sort-active')\r\n\r\n    return\r\n  }\r\n\r\n  function handleDrop(item) {\r\n    let droppedItem\r\n    if (selectedItem === undefined) {\r\n      return\r\n    }\r\n\r\n    let x, y\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      x = selectedLocX\r\n      y = selectedLocY\r\n      droppedItem = event.target\r\n      while (!droppedItem.classList.contains(globalListClass)) {\r\n        droppedItem = droppedItem.parentElement\r\n      }\r\n    } else {\r\n      x = event.clientX\r\n      y = event.clientY\r\n    }\r\n    //Condition for Firefox and Safari MAC\r\n    if ( !editor.helpers.isMobile() && ( editor.browser.safari || editor.browser.mozilla)) {\r\n      x = globalX\r\n      y = globalY\r\n    }\r\n\r\n    let swapItem = document.elementFromPoint(x, y)\r\n\r\n    while (swapItem && !swapItem.classList.contains(globalListClass)) {\r\n      swapItem = swapItem.parentElement\r\n    }\r\n\r\n    if(swapItem && !swapItem.classList.contains(globalListClass)) {\r\n      swapItem = undefined\r\n    }\r\n    else if (swapItem && selectedItem !== swapItem) {\r\n      swapNodes(selectedItem, swapItem)\r\n    }\r\n    \r\n    if(editor.helpers.isMobile()) {   \r\n      droppedItem.classList.remove('fr-hovered-over-file')\r\n      swapItem.classList.remove('fr-hovered-over-file')\r\n    }\r\n\r\n\r\n  }\r\n\r\n  function swapNodes(n1, n2) {\r\n    var p1 = n1.parentNode;\r\n    var p2 = n2.parentNode;\r\n    var i1, i2;\r\n\r\n    if ( !p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1) ) return;\r\n\r\n    for (var i = 0; i < p1.children.length; i++) {\r\n        if (p1.children[i].isEqualNode(n1)) {\r\n            i1 = i;\r\n        }\r\n    }\r\n    for (var i = 0; i < p2.children.length; i++) {\r\n        if (p2.children[i].isEqualNode(n2)) {\r\n            i2 = i;\r\n        }\r\n    }\r\n\r\n    if ( p1.isEqualNode(p2) && i1 < i2 ) {\r\n        i2++;\r\n    }\r\n    p1.insertBefore(n2, p1.children[i1]);\r\n    p2.insertBefore(n1, p2.children[i2]);\r\n}\r\n\r\n  function showFileUploadProgressLayer(i) { \r\n      let $popup = editor.popups.get('filesManager.insert')    \r\n      if(!$popup.find('.fr-upload-progress-layer').hasClass('fr-active')){\r\n        $popup.find('.fr-upload-progress-layer').addClass('fr-active')\r\n      }\r\n\r\n      $popup.find('.fr-upload-progress').removeClass('fr-none')\r\n\r\n      let file = file_list.get(i)\r\n      let description = getFileDescription(new Date())\r\n      let checkedClass = checked_files.get(i) ? '' : 'fr-unchecked '  \r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>'       \r\n      let upload_progress_layer = `\r\n        <div id='fr-file-${i}' class='fr-file-list-item fr-file-${i} ${checkedClass}' draggable = \"${checkedClass ? false : true}\" >\r\n        <div class='fr-file-item-left' >\r\n\r\n    \r\n            <div class=\"fr-file-item-insert-checkbox fr-files-checkbox-line\">\r\n            ${editor.helpers.isMobile() ? `<div id='fr-pick-${i}}' class='dot'>\r\n            </div>`:``}\r\n            <div id=\"checkbox-key-${i}\" class=\"fr-files-checkbox fr-insert-checkbox  fr-checkbox-${i}\">\r\n            <input name=\"target\" class=\"fr-insert-attr fr-checkbox-file-${i} fr-file-insert-check\" data-cmd=\"fileInsertCheckbox\"\r\n             data-checked=\"_blank\" type=\"checkbox\" id=\"fr-link-target-${editor.id}\" tabIndex=\"0\" />\r\n            <span>${checkmark}\r\n            </span>\r\n        </div>\r\n                <label id=\"fr-label-target-${editor.id}\"></label>\r\n            </div>\r\n    \r\n            <div class='fr-file-item-icon fr-file-item-icon-${i}' >\r\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='thumbnail-padding' height='36px' width='36px' />\r\n            </div>\r\n\r\n            <div class='fr-file-item-description' >\r\n                <div class='fr-file-name fr-files-manager-tooltip'>\r\n                   ${text_truncate(file.name,20)}\r\n                      <span class=\"${ file.name.length > 20 ? 'tooltiptext':'fr-none'}\">${file.name}\r\n                      </span>\r\n                 </div>\r\n                 <div class='fr-file-details'>\r\n                 <div class='fr-file-date'>${description}\r\n                 </div>\r\n \r\n                 <div class='fr-file-size'>\r\n                     ${getFileSize(file.size)}\r\n                 </div>\r\n                 </div>\r\n\r\n                  <div class='fr-file-error'>\r\n                    <h5 class='fr-file-error-h5'></h5>\r\n                 </div>\r\n             </div>\r\n    \r\n        </div>\r\n\r\n        <div class='fr-file-item-right fr-file-item-right-${i}'>` + getFileActionButtons(i) + `</div>\r\n    </div>`;\r\n\r\n    $popup.find('.fr-upload-progress-layer')[0].innerHTML = upload_progress_layer + $popup.find('.fr-upload-progress-layer')[0].innerHTML;\r\n    // adding checked to already checked files\r\n    function addCheck(file, i, map) {\r\n      if (checked_files.get(i)) {\r\n        $popup.find(`input.fr-insert-attr.fr-checkbox-file-${i}`)[0].setAttribute('checked', null)\r\n      }\r\n    }\r\n    file_list.forEach(addCheck)\r\n    autoplayCheckbox.forEach(function(index){\r\n      document.getElementById('fr-file-autoplay-button-' + index).checked = true\r\n    })\r\n    getFileThumbnail(i, file)\r\n    hideProgressBar()\r\n    if(editor.opts.toolbarBottom) \r\n      showInsertPopup(true)\r\n    else\r\n      editor.popups.setPopupDimensions($popup)\r\n      enableDragSort('fr-file-list-item')\r\n\r\n  }\r\n\r\n  function text_truncate(str, length, ending) {\r\n    if (length == null) {\r\n      length = 100;\r\n    }\r\n    if (ending == null) {\r\n      ending = '...';\r\n    }\r\n    if (str.length > length) {\r\n      return str.substring(0, length - ending.length) + ending;\r\n    } else {\r\n      return str;\r\n    }\r\n  }\r\n  \r\n\r\nfunction getFileThumbnailSrc(type){  \r\n  switch (type){ \r\n\r\n    case 'application/msword': \r\n      return editor.icon.getFileIcon('docIcon')\r\n    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document': \r\n      return editor.icon.getFileIcon('docxIcon')\r\n    case 'image/gif': \r\n      return editor.icon.getFileIcon('gifIcon')\r\n    case 'image/jpeg': \r\n      return editor.icon.getFileIcon('jpegIcon')\r\n    case 'image/jpeg': \r\n      return editor.icon.getFileIcon('jpgIcon')\r\n    case 'type/text': \r\n      return editor.icon.getFileIcon('logIcon')\r\n    case 'video/quicktime': \r\n      return editor.icon.getFileIcon('movIcon') \r\n    case 'audio/mp3': \r\n    case 'audio/mpeg':\r\n      return editor.icon.getFileIcon('mp3Icon')\r\n    case 'video/mp4': \r\n      return editor.icon.getFileIcon('mp4Icon')\r\n    case 'audio/ogg': \r\n      return editor.icon.getFileIcon('oggIcon') \r\n    case 'video/ogg': \r\n      return editor.icon.getFileIcon('ogvIcon')\r\n    case 'application/pdf': \r\n      return editor.icon.getFileIcon('pdfIcon')\r\n    case 'image/png': \r\n      return editor.icon.getFileIcon('pngIcon') \r\n    case 'text/plain': \r\n      return editor.icon.getFileIcon('txtIcon')\r\n    case 'video/webm': \r\n      return editor.icon.getFileIcon('webmIcon')\r\n    case 'image/webp': \r\n      return editor.icon.getFileIcon('webpIcon')\r\n    case 'video/x-ms-wmv': \r\n      return editor.icon.getFileIcon('wmvIcon')\r\n    case 'application/vnd.ms-excel': \r\n      return editor.icon.getFileIcon('xlsIcon')\r\n    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': \r\n      return editor.icon.getFileIcon('xlsxIcon')\r\n    case 'application/x-zip-compressed': \r\n    case 'application/zip': \r\n      return editor.icon.getFileIcon('zipIcon')\r\n\r\n    default:\r\n     return editor.icon.getFileIcon('defaultIcon')\r\n   }  \r\n}\r\nfunction getFileThumbnail(index, file, update){\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    let thumbnail = $popup.find('.fr-file-item-icon-' + index).get(0)\r\n    if (isImage(_getFileType(file)) && _getFileType(file) != 'image/gif' && _getFileType(file) != 'image/webp') {\r\n      if (thumbnail.children[0].localName != 'a') {\r\n        thumbnail.innerHTML = `<a target='_blank' href=''>` + thumbnail.innerHTML + `</a>`\r\n      }\r\n      let thumbnailLink = $popup.find('.fr-file-item-icon-' + index).get(0).children[0]\r\n      let thumbnailImage = thumbnailLink.children[0]\r\n      let reader = new FileReader()\r\n      if (update != null && update) {\r\n        let oldImage = file_list.get(index)\r\n        file.name = oldImage.name\r\n        file_list.set(index, file)\r\n      }\r\n      reader.onloadend = function () {\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).children[0].children[0].src = reader.result\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).children[0].href = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: _getFileType(file)\r\n        }))\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).classList.add('file-item-thumbnail-hover')\r\n      }\r\n\r\n      if (file) {\r\n        reader.readAsDataURL(file);\r\n      } else {\r\n        let x = getFileThumbnailSrc(_getFileType(file))\r\n        thumbnail.innerHTML = `<svg height=\"40px\" width=\"40px\" viewBox=\"0 0 55 5\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n        ${x.path}\r\n        </svg>`\r\n      }\r\n    } else {\r\n      let x = getFileThumbnailSrc(_getFileType(file))\r\n      thumbnail.innerHTML = `<svg height=\"40px\" width=\"40px\" viewBox=\"0 0 55 55\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n      ${x.path}\r\n      </svg>`\r\n    }\r\n}\r\n\r\n\r\n  function getFileActionButtons(i) {\r\n    let fileActionButtons = ''\r\n\r\n    if(isVideo(_getFileType(file_list.get(i)))){\r\n      let disableAutoplay = 'fr-files-checkbox'\r\n      let disableAutoplayCheckBox = ''\r\n      if(!isFormatSupported(_getFileType(file_list.get(i)))) {\r\n        disableAutoplay = 'fr-checkbox-disabled'\r\n        disableAutoplayCheckBox = 'disabled'\r\n\r\n      }\r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>'  \r\n      fileActionButtons = `\r\n      <div class=\"fr-files-checkbox-line align-autoplay\">\r\n      <div id=\"checkbox-key-${i}\" class=\"${disableAutoplay} fr-autoplay-checkbox  fr-checkbox-${i}\">  \r\n                   \r\n      <input type=\"checkbox\" id=\"fr-file-autoplay-button-${i}\" class=\"fr-file-button-${i} fr-file-autoplay-button\" data-title=\"Edit\" data-param1=\"${i}\" role=\"button\" ${disableAutoplayCheckBox}/>\r\n\r\n      <span>${checkmark} </span>\r\n      </div>      \r\n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\r\n      </div>`\r\n    }\r\n\r\n    let pdf = 'application/pdf'\r\n    let txt = 'text/plain'\r\n    let doc = 'application/msword'\r\n    let docx = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n    let xlsx = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n    let xls = 'application/vnd.ms-excel'\r\n    let log = 'type/text'\r\n\r\n   let disbleView = ''\r\n\r\n   \r\n   if(isAudio(_getFileType(file_list.get(i))) || !isFormatSupported(_getFileType(file_list.get(i)))){\r\n    disableEdit = 'fr-disabled'\r\n   }\r\n    \r\n   if(isVideo(_getFileType(file_list.get(i)))){\r\n    disableEdit = 'fr-disabled'\r\n   }\r\n   \r\n \r\n   if(isFile(_getFileType(file_list.get(i))))\r\n\r\n   {\r\n     disableEdit = 'fr-disabled'\r\n    if(_getFileType(file_list.get(i)) == doc ||  _getFileType(file_list.get(i)) == docx )\r\n    {\r\n      if(editor.opts.googleOptions && !editor.helpers.isMobile())\r\n\r\n        {\r\n          if( editor.opts.googleOptions.API_KEY && editor.opts.googleOptions.CLIENT_ID ){\r\n          disableEdit = ''\r\n          }\r\n        }\r\n    } \r\n    \r\n    if(_getFileType(file_list.get(i)) == txt ||  _getFileType(file_list.get(i)) == doc || _getFileType(file_list.get(i)) == pdf || _getFileType(file_list.get(i)) == docx || _getFileType(file_list.get(i)) == xlsx || _getFileType(file_list.get(i)) == xls || _getFileType(file_list.get(i)) == log)\r\n\r\n    {\r\n     disbleView = ''\r\n    }\r\n   }\r\n   if (_getFileType(file_list.get(i)) === 'video/url') { \r\n     disableEdit = 'fr-disabled' \r\n   }\r\n    fileActionButtons += `<div class='fr-file-item-action-buttons' >\r\n                <button type=\"button\" id=\"fr-file-insert-button-${i}\" class=\" fr-doc-edit-${i} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n                fr-file-button-${i} fr-file-insert-button-${i} fr-file-insert-button\" data-cmd=\"imageInsertByUpload\" data-title=\"Insert\" data-param1=\"${i}\" tabIndex=\"2\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-5 0 28 28\" xlmns = \"http://w3.org/200/svg\"><path d = 'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 '></path></svg>\r\n                </button>\r\n\r\n                <button type=\"button\" id=\"fr-file-edit-button-${i}\" class=\" fr-doc-edit-${i} ${disableEdit} fr-img-icon fr-btn fr-command fr-submit \r\n                fr-file-action-icons fr-file-edit-button-${i} fr-file-button-${i} fr-file-edit-button\" data-cmd=\"editImage\" data-title=\"Edit\" data-param1=\"${i}\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"0 4 25 25\" xlmns = \"http://w3.org/200/svg\"><path d = 'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z'></path></svg>\r\n                </button>\r\n                \r\n                <span class=\"fr-file-view-${i}\"><button type=\"button\" id=\"fr-file-view-button-${i}\" class=\" fr-doc-edit-${i} ${disbleView} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n                fr-file-view-button-${i} fr-file-view-button\" data-cmd=\"viewImage\" data-title=\"View\" data-param1=\"${i}\" tabIndex=\"2\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"15 19 21 21\" xlmns = \"http://w3.org/200/svg\"> <path style=\"fill:none;stroke-width:0.9077;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 19.086094 16.541466 C 16.185625 16.541466 14.318281 19.447115 14.318281 19.447115 L 14.318281 19.555288 C 14.318281 19.555288 16.176719 22.475962 19.077187 22.475962 C 21.977656 22.475962 23.847969 19.576322 23.847969 19.576322 L 23.847969 19.465144 C 23.847969 19.465144 21.989531 16.541466 19.086094 16.541466 Z M 19.07125 21.024639 C 18.248906 21.024639 17.583906 20.357572 17.583906 19.53726 C 17.583906 18.716947 18.248906 18.04988 19.07125 18.04988 C 19.890625 18.04988 20.555625 18.716947 20.555625 19.53726 C 20.555625 20.357572 19.890625 21.024639 19.07125 21.024639 Z M 19.07125 21.024639 \" transform=\"matrix(1.315789,0,0,1.3,0,0)\"/></svg></button></span>\r\n\r\n                <button type=\"button\" id=\"fr-file-delete-button-${i}\" class=\" fr-doc-edit-${i} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\r\n                fr-file-button-${i} fr-file-delete-button\" data-cmd=\"deleteImage\" data-title=\"Delete\" data-param1=\"${i}\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z'></path></svg>\r\n                </button>\r\n                 \r\n            </div>\r\n            <div id=\"user_area-${i}\" style=\"display: none;\">\r\n            \r\n              <div id=\"file_container\"></div>\r\n\r\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\r\n\r\n          </div> \r\n            `\r\n  \r\n    return fileActionButtons\r\n  }\r\n \r\n  function updateFileUploadingProgress(percent, index, loaded){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if(!loaded && percent <= 100){\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-files-checkbox')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-checkbox-disabled')\r\n      const row = $popup.find('.fr-file-progress-circle-'+index)\r\n      const progressCircle = $popup.find('.fr-file-upload-percent-'+index)\r\n      if (percent > 50) {\r\n        row.get(0).setAttribute('class', 'fr-file-progress-circle-'+index + ' progress-circle p' + Math.floor(percent) + ' over50');\r\n        progressCircle.get(0).innerHTML = Math.floor(percent) + '%';\r\n      } else {\r\n        row.get(0).setAttribute('class', 'fr-file-progress-circle-'+index + ' progress-circle p' + Math.floor(percent));\r\n        progressCircle.get(0).innerHTML = Math.floor(percent) + '%';\r\n      }\r\n      updateProgressBar(index, percent, loaded)\r\n      return\r\n    }\r\n    if(loaded){\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = false\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-checkbox-disabled')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-files-checkbox')\r\n      const right = $popup.find('.fr-file-item-right-'+index)\r\n      right.get(0).innerHTML = getFileActionButtons(index)\r\n      updateProgressBar(index, 100, loaded)\r\n    }\r\n  }\r\n\r\n  function initialFileUploadStatus(index){\r\n    if (isNaN(index)) {\r\n      return\r\n    }\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const row = $popup.find('.fr-file-item-right-'+index)\r\n    row.get(0).innerHTML = `<div class='fr-file-item-action-buttons' >\r\n    <button type=\"button\" id=\"fr-file-cancel-upload-button-${index}\" class=\"fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n    fr-file-button-${index} fr-file-cancel-upload-button\" data-cmd=\"cancelUpload\" data-title=\"Cancel\" data-param1=\"${index}\" role=\"button\">\r\n    <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z'></path></svg>\r\n    </button>\r\n\r\n    <button type=\"button\" id=\"fr-upload-delete-button-${index}\" class=\"fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n    fr-file-button-${index} fr-upload-delete-button\" data-cmd=\"deleteUpload\" data-title=\"Delete\" data-param1=\"${index}\" role=\"button\">\r\n    <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z'></path></svg>\r\n    </button>\r\n\r\n    <div class='progress-circle p0 fr-file-progress-circle-${index}'>\r\n                  <span class='fr-file-upload-percent-${index} fr-file-upload-percent'>0%</span>\r\n                  <div class='left-half-clipper'>\r\n                    <div class='first50-bar'></div>\r\n                    <div class='value-bar'></div>\r\n                  </div>\r\n                </div>\r\n            </div>`\r\n    \r\n    fileUploads.set(index,0)\r\n  }\r\n\r\n  function updateProgressBar(index, percent, loaded){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    $popup.find('.fr-progress-bar').removeClass('fr-none').addClass('fr-display-block')\r\n\r\n    if($popup.find('.fr-upload-progress').hasClass('fr-height-set'))\r\n      editor.popups.setFileListHeight($popup)\r\n    \r\n    let totalUploadPercent = 0;\r\n    fileUploads.set(index, percent)\r\n    fileUploads.forEach(function(value, index){\r\n      totalUploadPercent += value\r\n    })\r\n    totalUploadPercent = totalUploadPercent/fileUploads.size\r\n    if(percent == 100 && loaded){\r\n      completedUploads++;\r\n    }\r\n    $popup.find('.fr-command[data-cmd=\"filesUpload\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesByURL\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-progress-bar').get(0).style.width = totalUploadPercent+'%'\r\n    if(completedUploads == fileUploads.size){\r\n      $popup.find('.fr-progress-bar').removeClass('fr-display-block').addClass('fr-none') \r\n      fileUploads = new Map()\r\n      completedUploads = 0\r\n      $popup.find('.fr-command[data-cmd=\"filesUpload\"]').removeClass('fr-disabled')\r\n      $popup.find('.fr-command[data-cmd=\"filesByURL\"]').removeClass('fr-disabled')\r\n      $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').removeClass('fr-disabled')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert image using URL callback.\r\n   */\r\n  function validURL(str) {\r\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\r\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\r\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\r\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\r\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\r\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\r\n    return !!pattern.test(str);\r\n  }\r\n  function insertByURL() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $input = $popup.find('.fr-files-by-url-layer input')\r\n    let urls = $input.val().trim().split(/[ ,]+/)\r\n    let $urls =[]\r\n    let j=0\r\n    for( let i=0; i<urls.length;i++)\r\n    {\r\n      \r\n      if(validURL(urls[i]))\r\n      {\r\n        $urls[j]=urls[i]\r\n        j++\r\n      }\r\n    }\r\n    if($urls.length == 0)\r\n    {\r\n      _showErrorMessage(editor.language.translate('Url entered is invalid. Please try again.'));\r\n      return\r\n    }\r\n    if ($input.val().trim().length > 0 && $urls.length > 0) {\r\n      var files = []\r\n      var files_index = []\r\n      var initial_index = fileListIndex\r\n      var validUrls = $urls.length\r\n      $urls.forEach(function (url, index) {\r\n        if (url.trim().length == 0){\r\n          --validUrls\r\n          if (fileListIndex == initial_index + validUrls) {\r\n            addFilesToList(files, files_index)\r\n          }\r\n        }\r\n        else {\r\n          hideProgressBar()\r\n          showProgressBar()\r\n          _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n\r\n          const file_url = url.trim()\r\n\r\n          // check if URL is a video\r\n          let video = getVideoByURL(file_url)\r\n          if (video) {\r\n            let obj = {\r\n              link: file_url,\r\n              name: file_url,\r\n              type: 'video/url',\r\n              size: 2,\r\n              video: video\r\n            }\r\n            file_list.set(initial_index + index, obj)\r\n            showFileUploadProgressLayer(initial_index + index)\r\n            hideProgressBar()\r\n            showProgressBar()\r\n            _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n            file_list_values.set(initial_index + index, obj)\r\n            ++fileListIndex\r\n            if (fileListIndex == initial_index + validUrls) {\r\n              addFilesToList(files, files_index)\r\n            }\r\n          } else {\r\n            const xhr = new XMLHttpRequest()\r\n            xhr.onload = function () {\r\n\r\n              if (this.status == 200) {\r\n                let file = new Blob([this.response], {\r\n                  type: this.response.type || ''\r\n                })\r\n                file.name = getUrlFileName(file_url)\r\n                file.link = file_url\r\n                if (isImage(this.response.type)) {\r\n                  file.sanitize = true\r\n                  file.existing_image = $current_image\r\n                } else if (isFile(this.response.type)) {\r\n                  file.text = getUrlFileName(file_url)\r\n                }\r\n                files.push(file)\r\n                files_index.push(initial_index + index)\r\n                file_list.set(initial_index + index, file)\r\n                showFileUploadProgressLayer(initial_index + index)\r\n                if(unsupported_file_types.indexOf(_getFileType(file)) > -1 || !_getFileType(file)){\r\n                  _throwError(BAD_FILE_TYPE, null, null, initial_index + index)\r\n                }\r\n              } else {\r\n                let file = new Blob([this.response], {\r\n                  type: this.response.type || ' '\r\n                })\r\n                file.name = getUrlFileName(file_url)\r\n                file.link = file_url\r\n                file_list.set(initial_index + index, file)\r\n                showFileUploadProgressLayer(initial_index + index)\r\n                _throwError(BAD_LINK, this.response, $current_image, initial_index + index)\r\n              }\r\n              hideProgressBar()\r\n              showProgressBar()\r\n              _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n              ++fileListIndex\r\n              if (fileListIndex == initial_index + validUrls) {\r\n                addFilesToList(files, files_index)\r\n              }\r\n            }\r\n\r\n            // If file couldn't be uploaded, insert as it is.\r\n            xhr.onerror = function () {\r\n              let obj = {\r\n                link: file_url,\r\n                name: getUrlFileName(file_url),\r\n                size: 0,\r\n                type: ''\r\n              }\r\n              _throwError(ERROR_LINK, this.response, $current_image, initial_index + index)\r\n              let file_index = fileListIndex\r\n              file_list.set(file_index, obj)\r\n              showFileUploadProgressLayer(file_index)\r\n              hideProgressBar()\r\n              showProgressBar()\r\n              _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n              ++fileListIndex\r\n              if (fileListIndex == initial_index + validUrls) {\r\n                addFilesToList(files, files_index)\r\n              }\r\n            }\r\n\r\n            xhr.open('GET', `${editor.opts.imageCORSProxy}/${file_url}`, true)\r\n            xhr.responseType = 'blob'\r\n\r\n            xhr.send()\r\n          }\r\n        }\r\n      });\r\n      $input.val('')\r\n      $input.blur()\r\n    }\r\n  }\r\n    \r\n  function addFilesToList(files, files_index) {\r\n    hideProgressBar()\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find('.fr-upload-progress-layer').addClass('fr-active')\r\n    files.forEach(function (file, i) {\r\n      // If image needs to be uploaded\r\n      if (isImage(_getFileType(file)) && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy && editor.opts.imageUpload) {\r\n        upload(file, files, $current_image, files_index[i])\r\n      } else {\r\n        file_list_values.set(files_index[i], file)\r\n      }\r\n    })\r\n  }\r\n\r\n  function getVideoByURL(link) {\r\n    if (typeof link == 'undefined') {\r\n      return link\r\n    }\r\n\r\n    let video = null\r\n\r\n    if (!/^http/.test(link)) {\r\n      link = `https://${link}`\r\n    }\r\n\r\n    if (editor.helpers.isURL(link)) {\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        const vp = FE.VIDEO_PROVIDERS[i]\r\n\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n          video = link.replace(vp.url_regex, vp.url_text)\r\n          video = vp.html.replace(/\\{url\\}/, video)\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return video\r\n  }\r\n\r\n  function _editImg($img) {\r\n    if ($img && $img.get) {\r\n      _edit.call($img.get(0))\r\n    }\r\n  }\r\n\r\n  function viewImage(index) {\r\n    if(!isFormatSupported(_getFileType(file_list_values.get(index)))){\r\n      let link = file_list_values.get(index).link\r\n      let text = file_list_values.get(index).link\r\n      if(file_list.get(index) && file_list.get(index).name){\r\n        text = file_list.get(index).name\r\n      } else if(file_list_values.get(index).text){\r\n        text = file_list_values.get(index).text\r\n      }\r\n      if(link.indexOf('blob:') === 0 && editor.browser.msie && window.navigator && window.navigator.msSaveBlob){\r\n        window.navigator.msSaveBlob(file_list.get(index), text);\r\n      }\r\n      else{\r\n        let el = document.createElement('a');\r\n        el.href = link;\r\n        el.download = text;\r\n        el.click()\r\n      }\r\n      return false\r\n    }\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup.find('.fr-file-view-image-' + index).length > 0) {\r\n      $popup.find('.fr-file-view-image-' + index)[0].remove()\r\n    } else {\r\n      const viewImages = $popup.find('.fr-file-view')\r\n      for (let i = 0; i < viewImages.length; i++) {\r\n        viewImages.get(i).remove()\r\n      }\r\n      let imageView = $popup.find('.fr-file-view-' + index)\r\n\r\n      if (isImage(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image = `<div class=\"fr-file-view-modal\">\r\n              <div class=\"fr-file-view-modal-content\">\r\n              <div class=\"fr-file-view-close\">&times;</div> \r\n                <img src=\"` + file_list_values.get(index).link + `\" class ='fr-file-view-image'/>\r\n                </div>\r\n              </div>`\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isVideo(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image\r\n        if (file_list_values.get(index).hasOwnProperty('video')) {\r\n          let videoIframe = file_list_values.get(index).video.substring(file_list_values.get(index).video.indexOf('src') + 3)\r\n          let url = videoIframe.substring(videoIframe.indexOf('\"') + 1)\r\n          url = url.substring(0, url.indexOf('\"'))\r\n          let autoplayURL = url + '&autoplay=1'\r\n          image = `<div class=\"fr-file-view-modal\">\r\n        <div class=\"fr-file-view-modal-content \">\r\n          <div class=\"fr-file-view-close\">&times;</div> \r\n          <iframe width=\"640\" height=\"360\" src=\"${autoplayURL}\" frameborder=\"0\" class = \"fr-file-view-image\"></iframe>\r\n        </div>\r\n      </div>`\r\n        } else {\r\n          image = `<div class=\"fr-file-view-modal\">\r\n          <div class=\"fr-file-view-modal-content \">\r\n            <div class=\"fr-file-view-close\">&times;</div> \r\n            <video controls src=\"` + file_list_values.get(index).link + `\"  class ='fr-file-view-image' autoplay></video>\r\n          </div>\r\n        </div>`\r\n        }\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isAudio(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image = `<div class=\"fr-file-view-modal\">\r\n        <div class=\"fr-file-view-modal-content \">\r\n          <div  class=\"fr-file-view-close\">&times;</div> \r\n          <audio controls=\"controls\"  class ='fr-file-view-image' autoplay>\r\n\r\n          <source src=\"${file_list_values.get(index).link}\" type=\"${_getFileType(file_list_values.get(index))}\" />\r\n\r\n            Your browser does not support the audio element.\r\n          </audio>\r\n        </div>\r\n      </div>`\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isFile(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let link = file_list_values.get(index).link\r\n        let text = file_list_values.get(index).text\r\n        if (link.endsWith('.pdf') || link.endsWith('.txt')) {\r\n          let image = `<div class=\"fr-file-view-modal\">\t\r\n              <div class=\"fr-file-view-modal-content \" >\t\r\n              <div class=\"fr-file-view-close\">&times;</div> \t\r\n              <iframe src=\"${link}\" style='background-color: white;' height='50%' width='50%' title=\"${text}\" class=\"fr-file fr-file-view-image\"></iframe>\t\r\n            </div>\t\r\n            </div>`\r\n          imageView[0].innerHTML = image + imageView[0].innerHTML\r\n        } else {\r\n          if(link.indexOf('blob:') === 0 && editor.browser.msie && window.navigator && window.navigator.msSaveBlob){\r\n            window.navigator.msSaveBlob(file_list.get(index), text);\r\n          }\r\n          else{\r\n            let el = document.createElement('a');\r\n            el.href = link;\r\n            el.download = text;\r\n            el.click()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $img = $(this)\r\n\r\n    $img.removeClass('fr-uploading')\r\n\r\n    // Select the image.\r\n    if ($img.next().is('br')) {\r\n      $img.next().remove()\r\n    }\r\n\r\n    if(fileKeys.length == 0 || (fileKeys.length > 0 && fileKeys.length == imageEditIndex)){\r\n      editImageValue = $img\r\n    }\r\n    if($img.get(0).tagName == 'VIDEO' || $img.get(0).tagName == 'AUDIO') {\r\n      editor.selection.setAfter($img.parent())\r\n    }\r\n    else {\r\n      editor.selection.setAfter($img)\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n    editor.events.trigger('filesManager.loaded', [$img])\r\n    insertFiles(fileKeys)\r\n  }\r\n\r\n   /**\r\n   * Keep videos in sync when content changed.\r\n   */\r\n  let videos \r\n\r\n  function _syncVideos() {\r\n\r\n    // Get current videos.\r\n    const c_videos = Array.prototype.slice.call(editor.el.querySelectorAll('video, .fr-video > *')) \r\n\r\n    // Current videos src.\r\n    const video_srcs = [] \r\n    let i \r\n\r\n    for (i = 0; i < c_videos.length; i++) {\r\n      video_srcs.push(c_videos[i].getAttribute('src')) \r\n\r\n      $(c_videos[i]).toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n      if (c_videos[i].getAttribute('class') === '') c_videos[i].removeAttribute('class') \r\n\r\n      if (c_videos[i].getAttribute('style') === '') c_videos[i].removeAttribute('style') \r\n    }\r\n\r\n    // Loop previous videos and check their src.\r\n    if (videos) {\r\n      for (i = 0; i < videos.length; i++) {\r\n        if (video_srcs.indexOf(videos[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('video.removed', [$(videos[i])]) \r\n        }\r\n      }\r\n    }\r\n\r\n    // Current videos are the old ones.\r\n    videos = c_videos \r\n  }\r\n\r\n\r\n  let files\r\n\r\n  function _syncFiles() {\r\n\r\n    // Get current files.\r\n    const c_files = Array.prototype.slice.call(editor.el.querySelectorAll('a.fr-file'))\r\n\r\n    // Current files src.\r\n    const file_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_files.length; i++) {\r\n      file_srcs.push(c_files[i].getAttribute('href'))\r\n    }\r\n\r\n    // Loop previous files and check their src.\r\n    if (files) {\r\n      for (i = 0; i < files.length; i++) {\r\n        if (file_srcs.indexOf(files[i].getAttribute('href')) < 0) {\r\n          editor.events.trigger('file.unlink', [files[i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current files are the old ones.\r\n    files = c_files\r\n  }\r\n\r\n  /**\r\n   * Insert all files into the editor.\r\n   */\r\n\r\n   function insertAllFiles()\r\n   {\r\n    fileKeys = []\r\n    const $popup = editor.popups.get('filesManager.insert')  \r\n    function insertMapElements(el, index, map) {      \r\n      if(el.children['target'].checked)\r\n        {\r\n          fileKeys.push(parseInt(el.id.split('-').pop()))\r\n          if(isImage(file_list_values.get(parseInt(el.id.split('-').pop())).type) && imageEditIndex == -1){\r\n            imageEditIndex = index\r\n          }\r\n        }\r\n     }\r\n     imageEditIndex = -1\r\n     editImageValue = null\r\n     $popup.find('.fr-insert-checkbox').toArray().forEach(insertMapElements)\r\n     insertFiles(fileKeys)\r\n    checkInsertAllState()\r\n  }\r\n\r\n   /**\r\n   * Delete all files.\r\n   */\r\n\r\n  function deleteAllFiles()\r\n  {\r\n   const $popup = editor.popups.get('filesManager.insert')  \r\n   function deleteMapElements(el, index, map) {\r\n     if(el.children['target'].checked)\r\n       {\r\n         let fileIndex = parseInt(el.id.split('-').pop())\r\n         if(XMLHttpRequests.has(fileIndex)){\r\n          XMLHttpRequests.delete(fileIndex)\r\n         }\r\n         deleteFile(fileIndex)\r\n       }\r\n    }\r\n    $popup.find('.fr-insert-checkbox').toArray().forEach(deleteMapElements)\r\n    checkInsertAllState()\r\n  }\r\n\r\n   function insertFiles(fileKeys){\r\n     if(fileKeys != null){\r\n     if(fileKeys.length == 0){\r\n       if(editImageValue != null){\r\n         if(editImageValue.get(0).tagName == 'VIDEO'){\r\n           editor.video._editVideo(editImageValue.parent())\r\n         }\r\n         else if(editImageValue.get(0).tagName == 'IMG'){\r\n          editor.image.edit(editImageValue)\r\n         }\r\n         else{\r\n           editImageValue.trigger('click')\r\n         }\r\n         editor.toolbar.disable()\r\n        } \r\n        return\r\n      }\r\n        let index = fileKeys.shift()\r\n        insert(index, fileKeys)\r\n      }\r\n    }\r\n    \r\n  function isChildWindowOpen() {\r\n    return $child_window_open\r\n  }\r\n\r\n  function setChildWindowState(childWindowState) {\r\n    if(childWindowState !== undefined) {\r\n      $child_window_open = childWindowState\r\n    }    \r\n  }\r\n // file edit task starts\r\n\r\n var docEditor;  \r\n\r\n function loadScripts(array,callback){\r\n   var loader = function(src,handler){\r\n       var script = document.createElement(\"script\");\r\n       script.src = src;\r\n       script.onload = function() { \r\n         this.onload=function(){};docEditor.handleClientLoad();\r\n       }\r\n       script.onreadystatechange = function(){\r\n         if (this.readyState === 'complete') this.onload();\r\n       }\r\n       var head = document.getElementsByTagName(\"head\")[0];\r\n       (head || document.body).appendChild( script );\r\n   };\r\n   (function run(){\r\n       if(array.length!=0){\r\n           loader(array.shift(), run);\r\n       }else{\r\n           callback && callback();\r\n       }\r\n   })();\r\n}\r\n\r\n  /**\r\n   * Edit Image\r\n   */\r\n  function editImage(index) {\r\n    let isChildWindowTriggered = false\r\n\r\n    if (isVideo(_getFileType(file_list_values.get(index)))) {\r\n      editor.trimVideoPlugin.trimVideo(file_list.get(index), index,file_list);\r\n      isChildWindowTriggered = true\r\n    }else if(isImage(_getFileType(file_list_values.get(index)))){\r\n\r\n      let src = file_list_values.get(index).link;\r\n      const image = editor.o_doc.createElement('img');\r\n      image.src = src;\r\n      $current_image = image;\r\n      $current_image_index = index;\r\n      editor.imageTUI.launch(editor, false, index);\r\n      isChildWindowTriggered = true\r\n\r\n    }else if(isFile(_getFileType(file_list_values.get(index)))){\r\n\r\n      \r\n    var options={\r\n      apiKey: editor.opts.googleOptions.API_KEY, // google developer console API Key\r\n      clientId:editor.opts.googleOptions.CLIENT_ID, // google developer client ID\r\n      authorizeButton: `authorize_button-${index}`, // authorize in Google button element ID\r\n      signoutButton: 'signout_button', // sign out button element ID\r\n      userArea: `user_area-${index}`, // authorized user HTML container element ID \r\n      fileInput: 'file_input', // file upload input ID\r\n      fileIndex: index, // created\r\n      file: file_list.get(index), // created//, type=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"),\r\n      fileContainer: 'file_container', // HTML container ID for file editor \r\n      loadingText: 'File is being uploaded...', // text that shown while file is loaded\r\n      events: {\r\n        onInvalidFile: function(text){console.log(text);}, // fired if file is not uploaded or not supported (supported files are .DOC and .DOCX)\r\n        onError: function(error){console.log(error);} // fired in case of any other errors\r\n      }\r\n   }   \r\n    docEditor = googleDocEditor(options);\r\n         loadScripts([\r\n        \"https://apis.google.com/js/api.js\"\r\n     ],function(){\r\n         console.log('All things are loaded');\r\n     });\r\n    }\r\n    if (isChildWindowTriggered) {\r\n      $child_window_open = true\r\n    } \r\n  }\r\n\r\n  /**GoogleDocEdit Code */\r\n  function googleDocEditor(options){\r\n\r\n    // Array of API discovery doc URLs for APIs used by the quickstart\r\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/drive/v2/rest\"];\r\n    // Authorization scopes required by the API; multiple scopes can be\r\n    // included, separated by spaces.\r\n    var SCOPES = 'https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata';\r\n    var DEFAULT_FIELDS = 'id,title,mimeType,userPermission,editable,copyable,shared,fileSize';\r\n    var BOUNDARY = '-------314159265358979323846';\r\n    var DELIMITER = \"\\r\\n--\" + BOUNDARY + \"\\r\\n\";\r\n    var CLOSE_DELIMITER = \"\\r\\n--\" + BOUNDARY + \"--\";\r\n    var ALLOWED_FILES = ['doc', 'docx'];\r\n    var authorizeButton = document.getElementById(options.authorizeButton);\r\n    var userArea = document.getElementById(options.userArea);\r\n    var fileIndex = fileIndex; //created\r\n    var responseFileId; //created\r\n    \r\n    if (!options.events) {\r\n      options.events = {};\r\n    }\r\n    \r\n    options.events.onInvalidFile = options.events.onInvalidFile || function(text){console.log(text);};\r\n    options.events.onError = options.events.onError || function(text){console.log(text);};\r\n    /**\r\n        *  Initializes the API client library and sets up sign-in state\r\n        *  listeners.\r\n        */\r\n    function initClient() {\r\n      gapi.client.init({\r\n        apiKey: options.apiKey,\r\n        clientId: options.clientId,\r\n        discoveryDocs: DISCOVERY_DOCS,\r\n        scope: SCOPES\r\n          }).then(function () {\r\n            // Listen for sign-in state changes.\r\n            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\r\n            // Handle the initial sign-in state.\r\n            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n            handleAuthClick();\r\n          }, function(error) {\r\n          options.events.onError(error);\r\n          });\r\n      }\r\n\r\n  /**\r\n       *  Called when the signed in status changes, to update the UI\r\n       *  appropriately. After a sign-in, the API is called.\r\n       */\r\n    function updateSigninStatus(isSignedIn) {\r\n        if (isSignedIn) {\r\n         userArea.style.display = 'block';\r\n        } \r\n      }\r\n\r\n    /**\r\n      *  Sign in the user upon button click.\r\n      */\r\n    function handleAuthClick(event) {\r\n      if(!gapi.auth2.getAuthInstance().isSignedIn.get() || (gapi.auth.getToken() !== undefined && gapi.auth.getToken().access_token === undefined)){ \r\n        Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function(){\r\n        handleFileUpload();\r\n      })}\r\n      else{\r\n        handleFileUpload();\r\n      }\r\n     \r\n    }\r\n\r\n    /**\r\n      *  Sign out the user upon button click.\r\n      */\r\n    function handleSignoutClick(event) {\r\n      var accessToken = gapi.auth.getToken().access_token;\r\n      var id = responseFileId;\r\n      var url = \"https://docs.google.com/feeds/download/documents/export/Export?id=\" + id + \"&format=docx&access_token=\" + accessToken;\r\n      var xhr = new XMLHttpRequest();\r\n      xhr.open('get', url);\r\n      xhr.responseType = \"arraybuffer\";\r\n      xhr.onload = function() {   \r\n        var link =new Blob([new Uint8Array(this.response)], {\r\n        type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n        });\r\n\r\n        const currentFile=file_list.get(options.fileIndex)\r\n        link.name = currentFile.name;\r\n        link.lastModified = currentFile.lastModified;\r\n        link.lastModifiedDate = currentFile.lastModifiedDate;\r\n        file_list.set(options.fileIndex, link);\r\n        editor.filesManager.upload(\r\n          link,\r\n          file_list_values,\r\n          $current_image,\r\n          options.fileIndex\r\n          ); \r\n          closeEditDocContainer();\r\n        };\r\n      xhr.send();\r\n    return\r\n  }\r\n    \r\n    /**\r\n      * Handles file uploaded event\r\n      */\r\n    function handleFileUpload(event) {\r\n      disableOnEdit(options.fileIndex)\r\n      var file = options.file; //created\r\n      if (!file) {\r\n        options.events.onInvalidFile(\"File is not selected\");\r\n        return;\r\n      }\r\n      saveSingleFile(file, showEditableDoc);\r\n    };\r\n  \r\n    /**\r\n      * Shows google doc in iframe\r\n      */\r\n    function showEditableDoc(doc) {\r\n      responseFileId = doc.id; //created\r\n      var googleDocUrl = 'https://docs.google.com/document/d/' + doc.id +'/edit';     \r\n      const body = editor.o_doc.body;\r\n      const editDocContainer = editor.o_doc.createElement('div');\r\n      editDocContainer.setAttribute('id', 'editDocContainer');\r\n      editDocContainer.style.cssText ='position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block';\r\n     // margin-top is given for wordpress-framework\r\n      editDocContainer.innerHTML = '<div style=\"margin-top:25px; text-align:center\"><label>Sign Out : </label><input type=\"checkbox\" id =\"markSignOut\" role=\"button\"/>  <button id=\"signout_button\"  class=\"fr-trim-button\" >Save </button> <button id=\"cancel_file_edit\" class=\"fr-trim-button\">Cancel</button></div>  <iframe title=\"Edit your file\" frameBorder=\"0\" width=\"100%\" height=\"700px\" src=\"' + googleDocUrl + '\"></iframe>';\r\n      body.appendChild(editDocContainer);     \r\n      document.getElementById('signout_button').onclick=handleSignoutClick;\r\n      document.getElementById('cancel_file_edit').onclick=closeEditDocContainer;\r\n     \r\n    }\r\n    function closeEditDocContainer(){\r\n      document.getElementById('markSignOut').checked && gapi.auth2.getAuthInstance().signOut().then(function(){ \r\n        if (gapi.auth.getToken()) {\r\n          gapi.auth.getToken().access_token = undefined;\r\n          }\r\n         });\r\n      let container = document.getElementById('editDocContainer');\r\n      container.parentNode.removeChild(container);\r\n      if(document.getElementById(`user_area-${options.fileIndex}`))\r\n       document.getElementById(`user_area-${options.fileIndex}`).style.display = 'none';\r\n      enableAfterEdit(options.fileIndex);\r\n\r\n    }\r\n      /**\r\n      * Saves file to google drive\r\n      */\t\r\n    function saveSingleFile(file, callback) {\r\n      var reader = new FileReader();\r\n      reader.readAsArrayBuffer(file);\r\n      reader.onload = function(e) {\r\n        var contentType = 'application/vnd.google-apps.document';\r\n        var metadata = {\r\n          'title': file.name,\r\n          'mimeType': contentType\r\n        };\r\n        var binary = '';\r\n          var bytes = new Uint8Array( reader.result );\r\n          var len = bytes.byteLength;\r\n          for (var i = 0; i < len; i++) {\r\n              binary += String.fromCharCode(bytes[i]);\r\n          }\r\n        var base64Data = btoa(binary);\r\n        var multipartRequestBody =\r\n          DELIMITER +\r\n          'Content-Type: application/json; charset=UTF-8\\r\\n\\r\\n' +\r\n          JSON.stringify(metadata) +\r\n          DELIMITER +\r\n          'Content-Type: ' + 'application/octet-stream' + '\\r\\n' +\t\t\t\t\r\n          'Content-Transfer-Encoding: base64\\r\\n' +\r\n          '\\r\\n' +\r\n          base64Data +\r\n          CLOSE_DELIMITER;\r\n                \r\n        var request = gapi.client.request({\r\n          'path': '/upload/drive/v2/files',\r\n          'method': 'POST',\r\n          'params': {\r\n            'uploadType': 'multipart',\r\n            'fields': DEFAULT_FIELDS\r\n          },\r\n          'headers': {\r\n            'Content-Type': 'multipart/related; boundary=\"' + BOUNDARY + '\"',\r\n            'Content-Length': multipartRequestBody.Length\r\n          },\r\n          'body': multipartRequestBody\r\n        });\r\n        if (!callback) {\r\n          callback = function(file) {\r\n            console.log(file);\r\n          };\r\n        }\r\n        request.execute(function(doc, resp) {\r\n          if (!doc.error) {\r\n            callback(doc);\r\n          } else {\r\n            options.events.onError(doc.error);\r\n          }\r\n          \r\n        });\r\n      }\r\n      };\r\n      \r\n    var docEditor = {};\r\n    docEditor.handleClientLoad = function() {\r\n      gapi.load('client:auth2', initClient);\r\n       };\r\n    return docEditor;\r\n  }\r\n\r\n  function disableOnEdit(index){\r\n    const buttons = document.getElementsByClassName(`fr-doc-edit-${index}`);\r\n    for(var i = 0; i < buttons.length; i++){\r\n      buttons[i].setAttribute('disabled',true)\r\n      buttons[i].classList.add('fr-disabled')\r\n    }\r\n  }\r\n\r\n  function enableAfterEdit(index){\r\n\r\n    const buttons = document.getElementsByClassName(`fr-doc-edit-${index}`);\r\n    for(var i = 0; i < buttons.length; i++){\r\n      buttons[i].removeAttribute('disabled')\r\n      buttons[i].classList.remove('fr-disabled')\r\n    }\r\n  }\r\n \r\n\r\n  function saveImage($img) {\r\n    let obj = file_list_values.get($current_image_index);\r\n    obj.link = window.URL.createObjectURL(\r\n      new Blob($img, { type: 'image/png' })\r\n    );\r\n    file_list_values.set($current_image_index, obj);\r\n  }\r\n\r\n  /*\r\n  * Get file.type for machines which do not return type by default.\r\n  */\r\n  function _getFileType (file)\r\n  {\r\n\r\n    let fileTypeMap = [['.doc', 'application/msword'], ['.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'], ['.gif', 'image/gif'], ['.jpeg', 'image/jpeg'], ['.jpg', 'image/jpeg'], ['.txt', 'text/plain'], ['.log', 'type/text'], ['.mov', 'video/quicktime'], ['.mp3', 'audio/mpeg'], ['.mp4', 'video/mp4'], ['.ogg', 'audio/ogg'], ['.ogv', 'video/ogg'], ['.pdf', 'application/pdf'], ['.png', 'image/png'], ['.webm', 'video/webm'], ['.webp', 'image/webp'], ['.wmv', 'video/x-ms-wmv'], ['.xls', 'application/vnd.ms-excel'], ['.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'], ['.zip', 'application/x-zip-compressed']];\r\n\r\n\r\n    if(file.type == \"\")\r\n    {\r\n      let re = /(?:\\.([^.]+))?$/;\r\n      let ext = re.exec(file.name)[1];\r\n      let fileType\r\n      fileTypeMap.forEach(function(value, index){\r\n        if(value[0] == `.${ext}`){\r\n          fileType = value[1];\r\n        }\r\n      })\r\n      return fileType\r\n    }\r\n    return file.type\r\n  }\r\n\r\n  /**\r\n   * Insert image into the editor.\r\n   */\r\n\r\n  function insert(index, fileKeys) {\r\n    if (isFile(_getFileType(file_list_values.get(index))) || !isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n      let link = file_list_values.get(index).link\r\n      let text = file_list_values.get(index).text\r\n      if(!text && file_list.get(index) && file_list.get(index).name){\r\n        text = file_list.get(index).name\r\n      }\r\n       let response = file_list_values.get(index).response\r\n      editor.edit.on()\r\n\r\n      // Focus in the editor.\r\n      editor.events.focus(true)\r\n      editor.selection.restore()\r\n\r\n      if (editor.opts.fileUseSelectedText && editor.selection.text().length) {\r\n        text = editor.selection.text()\r\n      }\r\n\r\n      if (link.endsWith('.pdf') || link.endsWith('.txt')) {\r\n        let code = `<iframe src=\"${link}\" title=\"${text}\" width=\"100%\" height=\"100%\" class=\"fr-file\"></iframe>`\r\n        insertEmbeddedFile(code, true)\r\n      } else {\r\n        editor.html.insert(`<a href=\"${link}\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">${text}</a>`)\r\n      }\r\n      // Get the file.\r\n      const $file = editor.$el.find('#fr-inserted-file')\r\n\r\n      $file.removeAttr('id')\r\n\r\n      editor.undo.saveStep()\r\n\r\n      _syncFiles()\r\n      editor.selection.clear()\r\n      editor.selection.setAfter($file)\r\n\r\n      editor.events.trigger('file.inserted', [$file, response])    \r\n      insertFiles(fileKeys)\r\n    }\r\n\r\n\r\n    if (isImage(_getFileType(file_list_values.get(index))) && isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n\r\n      let link = file_list_values.get(index).link;\r\n      let sanitize = file_list_values.get(index).sanitize;\r\n      let data = file_list_values.get(index).data;\r\n      let $existing_img = file_list_values.get(index).$existing_img;\r\n      let response = file_list_values.get(index).response;\r\n\r\n    if ($existing_img && typeof $existing_img === 'string') {\r\n      $existing_img = editor.$($existing_img)\r\n    }\r\n\r\n    editor.edit.off()\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n\r\n    const image = new Image()\r\n\r\n    image.onload = function () {\r\n      let $img\r\n      let attr\r\n\r\n      if ($existing_img) {\r\n        if (!editor.undo.canDo() && !$existing_img.hasClass('fr-uploading')) editor.undo.saveStep()\r\n\r\n        let old_src = $existing_img.data('fr-old-src')\r\n\r\n        if ($existing_img.data('fr-image-pasted')) {\r\n          old_src = null\r\n        }\r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing image.\r\n          $img = $existing_img.clone()\r\n            .removeData('fr-old-src')\r\n            .removeClass('fr-uploading')\r\n            .removeAttr('data-fr-image-pasted')\r\n\r\n          // Remove load event.\r\n          $img.off('load')\r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_img.attr('src', old_src)\r\n\r\n          // Replace existing image with its clone.\r\n          $existing_img.replaceWith($img)\r\n\r\n        }\r\n        else {\r\n          $img = $existing_img\r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $img.get(0).attributes\r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i]\r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                $img.attr(`data-${attr}`, data[attr])\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $img.on('load', _loadedCallback)\r\n        $img.attr('src', link)\r\n        editor.edit.on()\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger(old_src ? 'image.replaced' : 'image.inserted', [$img, response])\r\n      }\r\n      else {\r\n        $img = _addImage(link, data, _loadedCallback)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger('image.inserted', [$img, response])\r\n      }\r\n    }\r\n\r\n    image.onerror = function () {\r\n      _throwError(BAD_LINK, null, null, index)\r\n      insertFiles(fileKeys)\r\n    }\r\n    image.src = link\r\n    }\r\n\r\n\r\n    if ((isVideo(_getFileType(file_list_values.get(index))) || isAudio(_getFileType(file_list_values.get(index)))) && isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n      current_index=index\r\n      if (_getFileType(file_list_values.get(index)) == 'video/url') {\r\n\r\n\r\n        let video_autoplay = false\r\n        if (document.getElementById('fr-file-autoplay-button-' + index) !== undefined) {\r\n          video_autoplay = document.getElementById('fr-file-autoplay-button-' + index).checked\r\n        }\r\n        if (video_autoplay && file_list_values.get(index) !== undefined && file_list_values.get(index).video.indexOf('iframe') > -1 \r\n          && file_list_values.get(index).video.indexOf('autoplay=1') < 0) {\r\n        \r\n          let url = file_list_values.get(index).video.substring(file_list_values.get(index).video.indexOf('src') + 3)\r\n          url = url.substring(url.indexOf('\"') + 1)\r\n          url = url.substring(0, url.indexOf('\"'))\r\n          let appendSymbol = '&'\r\n          if (url.indexOf('?') < 0) {\r\n            appendSymbol = '?'\r\n          }\r\n\r\n          file_list_values.get(index).video = file_list_values.get(index).video.replace(url, (url += appendSymbol + 'autoplay=1'))             \r\n        }\r\n        else if(!video_autoplay && file_list_values.get(index).video.indexOf('iframe' > -1)) {\r\n          if (file_list_values.get(index).video.indexOf('&autoplay=1') > -1) {\r\n            file_list_values.get(index).video = file_list_values.get(index).video.replace('&autoplay=1', '')\r\n          }\r\n\r\n          if (file_list_values.get(index).video.indexOf('?autoplay=1') > -1) {\r\n            file_list_values.get(index).video = file_list_values.get(index).video.replace('?autoplay=1', '')\r\n          }\r\n        }\r\n\r\n        // Make sure we have focus.\r\n        editor.events.focus(true)\r\n        editor.selection.restore()\r\n\r\n        editor.html.insert(`<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video fr-deletable\">${file_list_values.get(index).video}</span>`, false, editor.opts.videoSplitHTML)\r\n        \r\n        editor.popups.hide('filesManager.insert')\r\n\r\n        const $video = editor.$el.find('.fr-jiv')\r\n        $video.removeClass('fr-jiv')\r\n        $video.toggleClass('fr-rv', editor.opts.videoResponsive)\r\n\r\n        _setVideoStyle($video, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign)\r\n\r\n        $video.toggleClass('fr-draggable', editor.opts.videoMove)\r\n        \r\n        editor.events.trigger('video.inserted', [$video])\r\n        _loadedCallback.call($video)\r\n      }\r\n        else {\r\n          let link = file_list_values.get(index).link;\r\n          let sanitize = file_list_values.get(index).sanitize;\r\n          let data = file_list_values.get(index).data;\r\n          let $existing_video = file_list_values.get(index).$existing_img;\r\n          let response = file_list_values.get(index).response;\r\n          editor.edit.off()\r\n    \r\n          if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n    \r\n          const _add = function () {\r\n            let $video\r\n            let attr\r\n    \r\n            if ($existing_video) {\r\n              if (!editor.undo.canDo() && !$existing_video.find('video').hasClass('fr-uploading')) editor.undo.saveStep()\r\n    \r\n              const old_src = $existing_video.find('video').data('fr-old-src')\r\n    \r\n              const replaced = $existing_video.data('fr-replaced')\r\n              $existing_video.data('fr-replaced', false)\r\n    \r\n              if (editor.$wp) {\r\n    \r\n                // Clone existing video.\r\n                $video = $existing_video.clone(true)\r\n                $video.find('video').removeData('fr-old-src').removeClass('fr-uploading')\r\n    \r\n                // Remove load event.\r\n                $video.find('video').off('canplay')\r\n    \r\n                // Set new SRC.\r\n                if (old_src) $existing_video.find('video').attr('src', old_src)\r\n    \r\n                // Replace existing video with its clone.\r\n                $existing_video.replaceWith($video)\r\n              }\r\n              else {\r\n                $video = $existing_video\r\n              }\r\n    \r\n              // Remove old data.\r\n              const atts = $video.find('video').get(0).attributes\r\n    \r\n              for (let i = 0; i < atts.length; i++) {\r\n                const att = atts[i]\r\n    \r\n                if (att.nodeName.indexOf('data-') === 0) {\r\n                  $video.find('video').removeAttr(att.nodeName)\r\n                }\r\n              }\r\n    \r\n              // Set new data.\r\n              if (typeof data != 'undefined') {\r\n                for (attr in data) {\r\n                  if (data.hasOwnProperty(attr)) {\r\n                    if (attr != 'link') {\r\n                      $video.find('video').attr(`data-${attr}`, data[attr])\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n    \r\n              $video.find('video').on('canplay', _loadedCallback)\r\n              $video.find('video').attr('src', link)\r\n              editor.edit.on()\r\n              _syncVideos()\r\n              editor.undo.saveStep()\r\n    \r\n              // Cursor will not appear if we don't make blur.\r\n              editor.$el.blur()\r\n    \r\n              editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video, response])\r\n            }\r\n            else {\r\n\r\n              $video = _addVideo(link, data, _loadedCallback, _getFileType(file_list_values.get(index)) ,index)\r\n\r\n              _syncVideos()\r\n              editor.undo.saveStep()\r\n              editor.events.trigger('video.inserted', [$video, response])\r\n              }\r\n          }\r\n          _add()\r\n        }\r\n    }\r\n    editor.popups.hide('filesManager.insert')\r\n    checked_files.delete(index)\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find(`input.fr-insert-attr.fr-checkbox-file-${index}`)[0].checked = false\r\n    $popup.find(`.fr-file-` + index).get(0).classList.add('fr-unchecked')\r\n    checkInsertAllState();\r\n    if (document.getElementById('fr-file-autoplay-button-' + index)) {\r\n      document.getElementById('fr-file-autoplay-button-' + index).checked = false\r\n    }\r\n    autoplayCheckbox = autoplayCheckbox.filter(function (i){\r\n      return i != index\r\n    })\r\n  }\r\n\r\n  function _setVideoStyle($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* insert Embed \r\n  */\r\n\r\n function insertEmbeddedFile(embedded_code, file) {\r\n   let type\r\n   let fileSplitHTML\r\n   if (FE.VIDEO_EMBED_REGEX.test(embedded_code)) {\r\n     type = 'video'\r\n     fileSplitHTML = editor.opts.videoSplitHTML\r\n   } else if (FE.IMAGE_EMBED_REGEX.test(embedded_code)) {\r\n     type = 'image'\r\n     fileSplitHTML = editor.opts.imageSplitHTML\r\n   }\r\n   // Make sure we have focus.\r\n   editor.events.focus(true)\r\n   editor.selection.restore()\r\n\r\n   // Flag to tell if the video is replaced.\r\n   let replaced = false\r\n\r\n   // If current video found we have to replace it.\r\n   if ($current_image) {\r\n\r\n     // Remove the old video.\r\n     remove()\r\n\r\n     // Mark that the video is replaced.\r\n     replaced = true\r\n   }\r\n   editor.html.insert(`<span id=\"fr-inserted-file\" contenteditable=\"true\" draggable=\"true\" class=\"fr-${type} fr-jiv fr-deletable\">${embedded_code}</span>`, false, fileSplitHTML)\r\n\r\n   // add the below code for image as well\r\n   editor.popups.hide('filesManager.insert')\r\n\r\n   const $file = editor.$el.find('.fr-jiv')\r\n   $file.removeClass('fr-jiv')\r\n\r\n   if (type == 'video') {\r\n\r\n     $file.toggleClass('fr-rv', editor.opts.videoResponsive)\r\n\r\n     _setStyleVideo($file, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign)\r\n\r\n     $file.toggleClass('fr-draggable', editor.opts.videoMove)\r\n\r\n     editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$file])\r\n   }\r\n\r\n   if (type == 'image') {\r\n\r\n     _setStyleImage($file, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n     $file.find('img').removeClass('fr-dii')\r\n\r\n     $file.find('img').addClass('fr-dib')\r\n\r\n     $file.toggleClass('fr-draggable', editor.opts.imageMove)\r\n\r\n     editor.events.trigger(replaced ? 'image.replaced' : 'image.inserted', [$file])\r\n   }\r\n   if(file)\r\n   {\r\n    editImageValue = $file\r\n    editor.selection.clear()\r\n    editor.toolbar.disable()\r\n    editor.video._editVideo(editImageValue)\r\n   }   \r\n }\r\n\r\n  function _addVideo(link, data, loadCallback, type,index) {\r\n\r\n    // Build video data string.\r\n    let data_str = ''\r\n    let attr\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let { videoDefaultWidth: width } = editor.opts\r\n\r\n    if (width && width != 'auto') {\r\n      width = `${width}px`\r\n    }\r\n    let $video\r\n    if (isAudio(type)) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2810\r\n      // Create audio object and set the load event.\r\n      $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<audio src=\"' + link + '\" ' + data_str + ' controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</audio>')\r\n    }\r\n    else {\r\n      let autoplay=''\r\n      let video_autoplay=document.getElementById('fr-file-autoplay-button-' + index).checked\r\n      if(video_autoplay){\r\n        autoplay=\"autoplay\"\r\n      }\r\n      // Create video object and set the load event.\r\n      $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<video src=\"' + link + '\" ' + data_str + (width ? ' style=\"width: ' + width + ';\" ' : '')+ autoplay + '  controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</video>')\r\n    }\r\n\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the video.\r\n    if (editor.opts.videoSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    // Do not insert video inside emoticon.\r\n    if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n      $marker.insertAfter($marker.parent())\r\n    }\r\n\r\n    $marker.replaceWith($video)\r\n\r\n    let typeVar = ''\r\n     isAudio(type) ?  typeVar= 'audio' :  typeVar = 'video'\r\n     if ($video.find(typeVar).get(0).readyState > $video.find(typeVar).get(0).HAVE_FUTURE_DATA || editor.helpers.isIOS()) {\r\n      loadCallback.call($video.find(typeVar).get(0))\r\n    }\r\n    else {\r\n      $video.find(typeVar).on('canplaythrough load', loadCallback)\r\n      $video.find(typeVar).on('error', loadCallback)\r\n    }\r\n    return $video\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseResponse(response, index) {\r\n    try {\r\n      if (editor.events.trigger('filesManager.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response, null, index)\r\n\r\n        return false\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response, null, index)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseXMLResponse(response, index) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('filesManager.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response, null, index)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _fileUploaded(text, index, type, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.filesManagerUploadToS3 || editor.opts.filesManagerUploadToAzure) {\r\n        if (status === 201) {\r\n          let link\r\n          if(editor.opts.filesManagerUploadToAzure){\r\n            if (editor.events.trigger('filesManager.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML, index)\r\n          }\r\n          if (link) {\r\n            let obj =\r\n            {\r\n              link: link,\r\n              text: text,\r\n              response: response,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, null, index)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText, index)\r\n\r\n          if (resp) {\r\n            let obj =\r\n            {\r\n              link: resp.link,\r\n              text: text,\r\n              response: response,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, null, index)\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, null, index)\r\n    }\r\n  }\r\n\r\n  function _imageUploaded($image_placeholder, index, type, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.filesManagerUploadToS3 || editor.opts.filesManagerUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.filesManagerUploadToAzure){\r\n            if (editor.events.trigger('filesManager.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML, index)\r\n          }\r\n          if (link) {\r\n            let obj = {\r\n              link: link,\r\n              sanitize: false,\r\n              data: [],\r\n              $existing_img: $image_placeholder,\r\n              response: response || responseXML,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, $image_placeholder, index)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText, index)\r\n\r\n          if (resp) {\r\n            let obj = {\r\n              link: resp.link,\r\n              sanitize: false,\r\n              data: resp,\r\n              $existing_img: $image_placeholder,\r\n              response: response || responseXML,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, $image_placeholder, index)\r\n        }\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, $image_placeholder, index)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image upload error.\r\n   */\r\n\r\n  function _fileUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * Image upload progress.\r\n   */\r\n\r\n  function _fileUploadProgress(e, index) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      updateFileUploadingProgress(complete, index, false)\r\n    }\r\n  }\r\n\r\n  function _addImage(link, data, loadCallback) {\r\n\r\n    // Build image data string.\r\n    let data_str = ''\r\n    let attr\r\n    const $img = $(document.createElement('img')).attr('src', link)\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2649\r\n            $img.attr(`data-${attr}`, data[attr])\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = (editor.opts.imageResizeWithPercent ? '100%' : `${width}px`)\r\n    }\r\n\r\n    // Create image object and set the load event.\r\n    $img.attr('style', (width ? `width: ${width};` : ''))\r\n    _setStyleImage($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n    $img.on('load', loadCallback)\r\n\r\n    // Image might be corrupted. Continue upload flow.\r\n    $img.on('error', loadCallback)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the image.\r\n    if (editor.opts.imageSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    if ($marker.length) {\r\n\r\n      // Do not insert image in HR.\r\n      if ($marker.parent().is('hr')) {\r\n        $marker.parent().after($marker)\r\n      }\r\n\r\n      // Do not insert image inside emoticon.\r\n      if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n        $marker.insertAfter($marker.parent())\r\n      }\r\n\r\n      $marker.replaceWith($img)\r\n    }\r\n    else {\r\n      editor.$el.append($img)\r\n    }\r\n\r\n    return $img\r\n  }\r\n\r\n  /**\r\n   * Image upload aborted.\r\n   */\r\n  function _fileUploadAborted(index, e) {\r\n    _throwError(UPLOAD_CANCEL, e, $current_image, index)\r\n  }\r\n\r\n  function _browserUpload(index, file, $image_placeholder) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert file to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: _getFileType(file)\r\n        }))\r\n\r\n        if (isImage(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            sanitize: false,\r\n            data: null,\r\n            $existing_img: $image_placeholder,\r\n            response: null,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n\r\n        if (isFile(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            text: file.name,\r\n            response: null,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n\r\n        if (isVideo(_getFileType(file)) || isAudio(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            sanitize: false,\r\n            data: null,\r\n            $existing_img: $image_placeholder,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n      }\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function upload(file, files, $image_placeholder, index) {\r\n    if(unsupported_file_types.indexOf(_getFileType(file)) > -1 || !_getFileType(file)){\r\n\r\n      _throwError(BAD_FILE_TYPE, null, null, index)\r\n      return false\r\n    }\r\n    // Check if we should cancel the image upload.\r\n    if (editor.events.trigger('filesManager.beforeUpload', [files]) === false) {\r\n      return false\r\n    }\r\n\r\n    if ((editor.opts.filesManagerUploadURL === null || editor.opts.filesManagerUploadURL == DEFAULT_FILE_UPLOAD_URL) && !editor.opts.filesManagerUploadToS3 && !editor.opts.filesManagerUploadToAzure) {\r\n      _browserUpload(index, file)\r\n      return false\r\n    }\r\n\r\n    if(isImage(_getFileType(file))) {\r\n      if (!file.name) {\r\n        file.name = (new Date()).getTime() + '.' + (_getFileType(file) || 'image/jpeg').replace(/image\\//g, '')\r\n      }\r\n    }\r\n\r\n    if (file.size > editor.opts.filesManagerMaxSize) {\r\n      _throwError(MAX_SIZE_EXCEEDED, null, null, index)\r\n      return false\r\n    }\r\n\r\n    if (editor.opts.filesManagerAllowedTypes.indexOf('*') < 0 && editor.opts.filesManagerAllowedTypes.indexOf(_getFileType(file)) < 0) {\r\n      _throwError(BAD_FILE_TYPE, null, null, index)\r\n        return false\r\n    }\r\n\r\n    initialFileUploadStatus(index)\r\n    // Create form Data.\r\n    let form_data\r\n\r\n    if (editor.drag_support.formdata) {\r\n      form_data = editor.drag_support.formdata ? new FormData() : null\r\n    }\r\n\r\n    // Prepare form data for request.\r\n    if (form_data) {      \r\n      let key\r\n      // Upload to S3.\r\n      if (editor.opts.filesManagerUploadToS3 !== false) {\r\n        form_data.append('key', editor.opts.filesManagerUploadToS3.keyStart + (new Date()).getTime() + '-' + (file.name || 'untitled'))\r\n        form_data.append('success_action_status', '201')\r\n        form_data.append('X-Requested-With', 'xhr')\r\n        form_data.append('Content-Type', _getFileType(file))\r\n\r\n        for (key in editor.opts.filesManagerUploadToS3.params) {\r\n          if (editor.opts.filesManagerUploadToS3.params.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.filesManagerUploadToS3.params[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add upload params.\r\n      for (key in editor.opts.filesManagerUploadParams) {\r\n        if (editor.opts.filesManagerUploadParams.hasOwnProperty(key)) {\r\n          form_data.append(key, editor.opts.filesManagerUploadParams[key])\r\n        }\r\n      }\r\n\r\n      // Set the image in the request.\r\n      form_data.append(editor.opts.filesManagerUploadParam, file, file.name)\r\n     \r\n      // Create XHR request.\r\n      let url = editor.opts.filesManagerUploadURL\r\n      let fileURL\r\n      let azureKey\r\n\r\n      if (editor.opts.filesManagerUploadToS3) {\r\n        if (editor.opts.filesManagerUploadToS3.uploadURL) {\r\n          url = editor.opts.filesManagerUploadToS3.uploadURL\r\n        } else {\r\n          url = `https://${editor.opts.filesManagerUploadToS3.region}.amazonaws.com/${editor.opts.filesManagerUploadToS3.bucket}`\r\n        }\r\n      }\r\n      \r\n      if (editor.opts.filesManagerUploadToAzure) {\r\n        if (editor.opts.filesManagerUploadToAzure.uploadURL) {\r\n          url = `${editor.opts.filesManagerUploadToAzure.uploadURL}/${file.name}`\r\n        } else {\r\n          url = encodeURI(`https://${editor.opts.filesManagerUploadToAzure.account}.blob.core.windows.net/${editor.opts.filesManagerUploadToAzure.container}/${file.name}`)\r\n        }\r\n        fileURL = url\r\n        if (editor.opts.filesManagerUploadToAzure.SASToken) {\r\n          url += editor.opts.filesManagerUploadToAzure.SASToken\r\n        }\r\n        editor.opts.filesManagerUploadMethod = 'PUT'\r\n      }\r\n      \r\n      const xhr = editor.core.getXHR(url, editor.opts.filesManagerUploadMethod)\r\n\r\n      if (editor.opts.filesManagerUploadToAzure) {\r\n        let uploadDate = new Date().toUTCString()\r\n        if (!editor.opts.filesManagerUploadToAzure.SASToken && editor.opts.filesManagerUploadToAzure.accessKey) {\r\n          let azureAccount = editor.opts.filesManagerUploadToAzure.account\r\n          let azureContainer = editor.opts.filesManagerUploadToAzure.container\r\n          if(editor.opts.filesManagerUploadToAzure.uploadURL) {\r\n            let urls = editor.opts.filesManagerUploadToAzure.uploadURL.split('/')\r\n            azureContainer = urls.pop()\r\n            azureAccount = urls.pop().split('.')[0]\r\n          }\r\n          let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n          let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + file.name)\r\n          let stringToSign = editor.opts.filesManagerUploadMethod + '\\n\\n\\n' + file.size + '\\n\\n' + _getFileType(file) + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n          let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.filesManagerUploadToAzure.accessKey))\r\n          let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n          let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n          azureKey = signature\r\n          xhr.setRequestHeader(\"Authorization\", authHeader)\r\n        }\r\n        xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n        xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n        xhr.setRequestHeader(\"Content-Type\", _getFileType(file))\r\n        xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n        for (key in editor.opts.filesManagerUploadParams) {\r\n          if (editor.opts.filesManagerUploadParams.hasOwnProperty(key)) {\r\n            xhr.setRequestHeader(key, editor.opts.filesManagerUploadParams[key])\r\n          }\r\n        }\r\n        for (key in editor.opts.filesManagerUploadToAzure.params) {\r\n          if (editor.opts.filesManagerUploadToAzure.params.hasOwnProperty(key)) {\r\n            xhr.setRequestHeader(key, editor.opts.filesManagerUploadToAzure.params[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      xhr.onload = function () {\r\n        if (isFile(_getFileType(file))) {\r\n          _fileUploaded.call(xhr, file.name, index, _getFileType(file), fileURL, azureKey)        \r\n        } else {\r\n          _imageUploaded.call(xhr, $current_image, index, _getFileType(file), fileURL, azureKey)\r\n        }\r\n        if(!failedUploadFiles.has(index)){\r\n          updateFileUploadingProgress(100, index, true) \r\n        }\r\n      }\r\n      xhr.onerror =   function _fileUploadError() {\r\n        _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML, null, index)\r\n      }\r\n      xhr.upload.onprogress =  function (e) {\r\n        _fileUploadProgress(e, index)\r\n      }\r\n      xhr.onabort = function(e) {\r\n        _fileUploadAborted(index, e)\r\n      }\r\n      xhr.send(editor.opts.filesManagerUploadToAzure ? file : form_data)\r\n      XMLHttpRequests.set(index, xhr)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    //disable keypad launch on click in mobile\r\n    editor.events.$on($popup, 'click', '.fr-upload-progress-layer', function (e) {\r\n      if (editor.helpers.isMobile()) {\r\n        e.stopPropagation()\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    //preventing Drag over on file list in filesManager popup\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-upload-progress-layer', function (e) {\r\n      e.preventDefault()\r\n      for (var i = 0; i < e.originalEvent.dataTransfer.types.length; i++) {\r\n        if (e.originalEvent.dataTransfer.types[i] == \"Files\") {\r\n          e.originalEvent.dataTransfer.dropEffect = \"none\"\r\n        }\r\n    }      \r\n      return false\r\n    }, true)\r\n\r\n\r\n    //preventing Drag end on file list in filesManager popup\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-upload-progress-layer', function (e) {\r\n      e.preventDefault()\r\n      return false\r\n    }, true)\r\n\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-files-upload-layer', function (e) {\r\n      $(this).addClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-files-upload-layer', function (e) {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    editor.events.$on($popup, 'click', '.fr-insert-checkbox', function (e){\r\n      if(this.classList.contains('fr-checkbox-disabled')){\r\n        this.children['target'].disabled = true\r\n        this.children['target'].checked = false\r\n        return\r\n      }\r\n      let index = parseInt(this.id.split('-').pop())\r\n      checked_files.set(index,this.children['target'].checked)\r\n      let $btnInsert = $popup.find('.fr-command[data-cmd=\"insertAll\"]')\r\n      let $btnDelete = $popup.find('.fr-command[data-cmd=\"deleteAll\"]')\r\n      const check_inputs = $popup.find('input.fr-file-insert-check[type=\"checkbox\"]')\r\n      let size = check_inputs.length\r\n      let isDisabled = true\r\n      for(let i = 0; i< size; i++)\r\n      {\r\n        if(check_inputs[i].checked == true)\r\n        {\r\n          isDisabled=false\r\n        } \r\n      }\r\n      isDisabled?$btnInsert.addClass('fr-disabled'):$btnInsert.removeClass('fr-disabled')\r\n      isDisabled?$btnDelete.addClass('fr-disabled'):$btnDelete.removeClass('fr-disabled')\r\n\r\n      if(this.children['target'].checked){\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).setAttribute('draggable' , 'true')\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).classList.remove('fr-unchecked')\r\n      }\r\n      else{\r\n        let id = this.id.split('-').pop()\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).setAttribute('draggable' , 'false')\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).classList.add('fr-unchecked')\r\n      }\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-insert-button', function (e){\r\n      if(this.classList.contains('fr-disabled')){\r\n        return\r\n      }\r\n      let index = parseInt(this.id.split('-').pop())\r\n      insert(index)\r\n    })\r\n    \r\n    editor.events.$on($popup, 'click', '.fr-file-autoplay-button', function (e){\r\n      if(this.parentNode.classList.contains('fr-checkbox-disabled')){\r\n        this.disabled = true\r\n        this.checked = false\r\n        return\r\n      }\r\n            let index = parseInt(this.id.split('-').pop())\r\n      checkAutoplay(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-edit-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      if(!$popup.find(`.fr-file-edit-button-${index}`).hasClass('fr-disabled'))\r\n          editImage(index);\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-view-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      if(!$popup.find(`.fr-file-view-button-${index}`).hasClass('fr-disabled'))\r\n          viewImage(index)\r\n      \r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-delete-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      deleteFile(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-cancel-upload-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      cancelFileUpload(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-upload-delete-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      deleteFileUpload(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-view-close', function (e){\r\n      $popup.find('.fr-file-view-modal').get(0).outerHTML = ''\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-plugins-enable', function (e){\r\n      addPlugins()\r\n      loadPlugins(FE.PLUGINS)\r\n      editor.popups.get('filesManager.insert').get(0).outerHTML = ''\r\n      _initInsertPopup()\r\n      showInsertPopup(true)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-plugins-cancel', function (e){\r\n      editor.popups.hide('filesManager.insert')\r\n    })\r\n\r\n    // preventing drop on file list in filesManager popup\r\n    editor.events.$on($popup, 'drop', '.fr-upload-progress', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    })\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-files-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      $(this).removeClass('fr-drop')\r\n      const dt = e.originalEvent.dataTransfer\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.events.disableBlur()\r\n        let indexes = []\r\n        for (let i = 0; i < dt.files.length; i++) {\r\n          let j = fileListIndex\r\n          file_list.set(j, dt.files[i])\r\n          showFileUploadProgressLayer(j)\r\n          checked_files.set(j,false)\r\n          indexes.push(j)\r\n          fileListIndex++\r\n        }\r\n        for(let i = 0 ; i < indexes.length ; i++){\r\n          inst.filesManager.upload(file_list.get(indexes[i]), dt.files, $current_image, indexes[i])\r\n        }\r\n        inst.events.enableBlur()\r\n      }\r\n      }, true)\r\n\r\n      if (editor.helpers.isIOS()) {\r\n        editor.events.$on($popup, 'touchstart', '.fr-files-upload-layer input[type=\"file\"]', function () {\r\n          $(this).trigger('click')\r\n        }, true)\r\n      }\r\n\r\n      editor.events.$on($popup, 'change', '.fr-files-upload-layer input[type=\"file\"]', function () {\r\n            if (this.files) {\r\n              const inst = $popup.data('instance') || editor\r\n\r\n              inst.events.disableBlur()\r\n              $popup.find('input:focus').blur()\r\n              inst.events.enableBlur()\r\n              let indexes = []\r\n              // Make sure we have what to upload.\r\n              if (typeof this.files != 'undefined' && this.files.length > 0) {\r\n                for (let i = 0; i < this.files.length; i++) {\r\n                  let j = fileListIndex\r\n                  file_list.set(j, this.files[i])\r\n                  showFileUploadProgressLayer(j)\r\n                  checked_files.set(j,false)\r\n                  ++fileListIndex\r\n                  indexes.push(j)\r\n                }\r\n                for(let i = 0 ; i < indexes.length ; i++){\r\n                  inst.filesManager.upload(file_list.get(indexes[i]), this.files, $current_image, indexes[i])\r\n                }\r\n              }\r\n\r\n            }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n  function checkAutoplay(index){\r\n    const checkbox=document.getElementById('fr-file-autoplay-button-' + index).checked\r\n    if(checkbox){\r\n      autoplayCheckbox.push(index)\r\n    }else {\r\n      autoplayCheckbox = autoplayCheckbox.filter(function (i){\r\n        return i!=index\r\n      })\r\n    }\r\n\r\n  }\r\n  function isImage(type)\r\n  {\r\n    return type && type.split('/')[0] === 'image';\r\n    \r\n  }\r\n\r\n  function isFile(type)\r\n  {\r\n    return (type && type.split('/')[0] != 'image')&&(type && type.split('/')[0] != 'video')&&(type && type.split('/')[0] != 'audio');\r\n  }\r\n\r\n  function isVideo(type)\r\n  {\r\n    return type && type.split('/')[0] === 'video';\r\n  }\r\n\r\n  function isAudio(type)\r\n  {\r\n    return type && type.split('/')[0] === 'audio';\r\n  }\r\n\r\n  function isFormatSupported(type)\r\n  {\r\n    let webp = 'image/webp'\r\n    let webm = 'video/webm'\r\n    let ogg = 'audio/ogg'\r\n    let ogv = 'video/ogg'\r\n    if(type == ogg || type == ogv || type == webp || type == webm) {\r\n      if(editor.browser.msie || editor.browser.edge || editor.browser.safari){  \r\n        return false\r\n      }\r\n      if(editor.helpers.isMobile()){\r\n        if(type == ogg || type == ogv){\r\n          return false\r\n        }\r\n        if(!editor.helpers.isAndroid() && !editor.browser.chrome){\r\n          return false\r\n        }\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  function _beforeElementDrop($el) {\r\n    if ($el.is('img') && $el.parents('.fr-img-caption').length > 0) {\r\n      return $el.parents('.fr-img-caption')\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n    // Mouse down on image. It might start move.\r\n    editor.events.$on(editor.$el, editor._mousedown, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (!editor.helpers.isMobile()) editor.selection.clear()\r\n\r\n      mousedown = true\r\n\r\n      if (editor.popups.areVisible()) editor.events.disableBlur()\r\n\r\n      // Prevent the image resizing.\r\n      if (editor.browser.msie) {\r\n        editor.events.disableBlur()\r\n        editor.$el.attr('contenteditable', false)\r\n      }\r\n\r\n      if (!editor.draggable && e.type != 'touchstart') e.preventDefault()\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, editor._mousedown, '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      if (!editor.core.hasFocus()) {\r\n        editor.events.focus()\r\n      }\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, 'paste', '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      editor.toolbar.hide()\r\n   \r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse up on an image prevent move.\r\n    editor.events.$on(editor.$el, editor._mouseup, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (mousedown) {\r\n        mousedown = false\r\n\r\n        // Remove moving class.\r\n        e.stopPropagation()\r\n\r\n        if (editor.browser.msie) {\r\n          editor.$el.attr('contenteditable', true)\r\n          editor.events.enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Show image popup when it was selected.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.shiftKey && editor.selection.text().replace(/\\n/g, '') === '' && editor.keys.isArrow(e.which)) {\r\n        const s_el = editor.selection.element()\r\n        const e_el = editor.selection.endElement()\r\n\r\n        if (s_el && s_el.tagName == 'IMG') {\r\n          _editImg($(s_el))\r\n        }\r\n        else if (e_el && e_el.tagName == 'IMG') {\r\n          _editImg($(e_el))\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n    editor.events.on('window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    editor.events.on('mouseup window.mouseup', function () {\r\n      if ($current_image) {\r\n        _exitEdit()\r\n\r\n        return false\r\n      }\r\n\r\n      _unmarkExit()\r\n    })\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit()\r\n      }\r\n    })\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.opts.iframe) {\r\n        editor.size.syncIframe()\r\n      }\r\n    })\r\n\r\n    editor.events.on('blur image.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      mousedown = false\r\n      _exitEdit(true)\r\n    })\r\n\r\n    editor.events.on('modals.hide', function () {\r\n      if ($current_image) {\r\n        editor.selection.clear()\r\n      }\r\n    })\r\n\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.win.getSelection) {\r\n        _editImg($current_image)\r\n      }\r\n    })\r\n\r\n    // Add new line after image is inserted.\r\n    if (editor.opts.imageAddNewLine) {\r\n      editor.events.on('image.inserted', function ($img) {\r\n        let lastNode = $img.get(0)\r\n\r\n        // Ignore first BR after image.\r\n        if (lastNode.nextSibling && lastNode.nextSibling.tagName === 'BR') lastNode = lastNode.nextSibling;\r\n\r\n        // Look upper nodes.\r\n        while (lastNode && !editor.node.isElement(lastNode)) {\r\n          if (!editor.node.isLastSibling(lastNode)) {\r\n            lastNode = null;\r\n          }\r\n          else {\r\n            lastNode = lastNode.parentNode;\r\n          }\r\n        }\r\n\r\n        // If node is element, then image is last element.\r\n        if (editor.node.isElement(lastNode)) {\r\n\r\n          // ENTER_BR mode.\r\n          if (editor.opts.enter === FE.ENTER_BR) {\r\n            $img.after('<br>');\r\n          }\r\n          else {\r\n            let $parent = $(editor.node.blockParent($img.get(0)));\r\n\r\n            $parent.after(`<${editor.html.defaultTag()}><br></${editor.html.defaultTag()}>`);\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('filesManager.insert', _refreshInsertPopup)\r\n      editor.popups.onHide('filesManager.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    let active\r\n    let $popup\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/2987\r\n\r\n    if (!editor.opts.imageUpload && editor.opts.filesInsertButtons.indexOf('filesUpload') !== -1) {\r\n      editor.opts.imageInsertButtons.splice(editor.opts.filesInsertButtons.indexOf('filesUpload'), 1)\r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.filesInsertButtons)\r\n    const buttonList2 = editor.button.buildList(editor.opts.filesInsertButtons2)\r\n\r\n    if (buttonList !== '') {\r\n      image_buttons = `<div class=\"fr-buttons fr-tabs\">${buttonList}<span class=\"fr-align-right\">${buttonList2}</span></div>`\r\n    }\r\n\r\n    const uploadIndex = editor.opts.filesInsertButtons.indexOf('filesUpload')\r\n    const urlIndex = editor.opts.filesInsertButtons.indexOf('filesByURL')\r\n    const embedIndex = editor.opts.filesInsertButtons.indexOf('filesEmbed')\r\n\r\n    // Image upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (urlIndex >= 0 && uploadIndex > urlIndex) {\r\n        active = ''\r\n      }\r\n       upload_layer = `<div class=\"fr-files-upload-layer${active} fr-layer \" id=\"fr-files-upload-layer-${editor.id}\"><div style=\"display:flex\"><div class=\"fr-upload-section\"><div class = 'fr-blue-decorator'><div class = 'fr-cloud-icon'><svg class = \"fr-svg\" focusable=\"false\" width=\"26px\" height=\"26px\" viewBox = \"0 0 24 24\" xlmns = \"http://w3.org/200/svg\"><path d = 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z'></path></svg></div>Drag & Drop One or More Files<br><div class=\"decorated\"><span> OR </span></div> Click Browse Files </div> </div><div class=\"fr-form\"><input type=\"file\" accept=\"${editor.opts.filesManagerAllowedTypes.join(',').toLowerCase()}\" tabIndex=\"-1\" aria - labelledby=\"fr-files-upload-layer-${editor.id}\"role=\"button\" multiple></div> </div></div>`    }\r\n\r\n    // File embed layer.\r\n    let embed_layer = ''\r\n    if (embedIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if ((embedIndex > uploadIndex && uploadIndex >= 0) || (embedIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n\r\n      embed_layer = `<div class=\"fr-files-embed-layer fr-layer${active}\" id=\"fr-files-embed-layer-${editor.id}\"><div class=\"fr-input-line padding-top-15\"><textarea data-gramm_editor=\"false\" style='height:60px' id=\"fr-files-embed-layer-text${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Embedded Code')}\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"insertEmbed\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n\r\n    }\r\n\r\n    // Image by url layer.\r\n    let by_url_layer = ''\r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (uploadIndex >= 0 && urlIndex > uploadIndex) {\r\n        active = ''\r\n      }\r\n\r\n      by_url_layer = `<div class=\"fr-files-by-url-layer${active} fr-layer\" id=\"fr-files-by-url-layer-${editor.id}\"><div class=\"fr-input-line fr-by-url-padding\"><input id=\"fr-files-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"http://\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"filesInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Add')}</button></div></div>`\r\n    }\r\n\r\n    let upload_progress_layer = ''\r\n    \r\n\r\n    upload_progress_layer = `<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-${editor.id}\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>`\r\n\r\n\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-files-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"filesDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      upload_layer: upload_layer,\r\n      by_url_layer: by_url_layer,\r\n      embed_layer: embed_layer,\r\n      upload_progress_layer: upload_progress_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    if (editor.opts.imageInsertButtons.length >= 1) {\r\n      $popup = editor.popups.create('filesManager.insert', template)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        if ($current_image && editor.popups.isVisible('filesManager.insert')) {\r\n          replace()\r\n        }\r\n      })\r\n    }\r\n\r\n    _bindInsertEvents($popup)\r\n    editor.popups.setPopupDimensions($popup)\r\n    return $popup\r\n  }\r\n\r\n  function _initPluginErrorPopup(){\r\n    const file_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.fileInsertButtons)}</div>`\r\n    const message_layer = `<div style= 'padding:10px'>\r\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>${editor.language.translate( getMissingPluginsText() + ' not enabled. Do you want to enable?')}</h3></div>\r\n    <div style='text-align:right;'>\r\n      <button class='fr-trim-button fr-plugins-enable'>${editor.language.translate('Enable')}</button>               \r\n      <button class='fr-trim-button fr-plugins-cancel'>${editor.language.translate('Cancel')}</button>\r\n    </div>`\r\n    const template = {\r\n      buttons: file_buttons,\r\n      upload_layer: message_layer,\r\n      by_url_layer: '',\r\n      embed_layer: '',\r\n      upload_progress_layer: '',\r\n      progress_bar: ''\r\n    }\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('filesManager.insert', template)\r\n    _bindInsertEvents($popup)\r\n    return $popup\r\n  }\r\n\r\n  function getMissingPluginsText() {\r\n    let missingPlugins = ''\r\n    let plugins = getMissingPlugins()\r\n    missingPlugins = plugins.join(', ')\r\n    if(plugins.length > 1){\r\n      missingPlugins += ' plugin are'\r\n    }\r\n    else{\r\n      missingPlugins += ' plugin is'\r\n    }\r\n    return missingPlugins\r\n  }\r\n\r\n  function getMissingPlugins() {\r\n    let files = []\r\n    requiredPlugins.forEach(function(file){\r\n      if(editor.opts.pluginsEnabled.indexOf(file) < 0){\r\n        files.push(file.charAt(0).toUpperCase() + file.slice(1))\r\n      }\r\n    })\r\n    return files\r\n  }\r\n\r\n  function getFileDescription(date) {\r\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n    let  dateFormat\r\n    try{\r\n      dateFormat = date.toLocaleDateString(editor.opts.language ? editor.opts.language : undefined, options)  \r\n    }\r\n    catch(err)\r\n    {\r\n      dateFormat = date.toLocaleDateString(undefined, options)  \r\n    } \r\n    return dateFormat+''\r\n  }\r\n\r\n  function getFileSize(size) {\r\n    if(size == 0)\r\n      return '0 Bytes'\r\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    var i = Math.floor(Math.log(size) / Math.log(1024));\r\n    return ' | ' + (size / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + sizes[i];\r\n  }\r\n\r\n // Get file name from url\r\nfunction getUrlFileName(url){\r\n  let fileName = url.split('/').pop()\r\n  if(fileName.split('.').length < 2){\r\n  let date = new Date()\r\n  return fileName + '-' + date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear()\r\n  }\r\n  return fileName\r\n  }\r\n\r\n\r\n  /**\r\n   * Refresh the ALT popup.\r\n   */\r\n\r\n  function _refreshAltPopup() {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $popup.find('input').val($current_image.attr('alt') || '').trigger('change')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the ALT popup.\r\n   */\r\n\r\n  function showAltPopup() {\r\n    let $popup = editor.popups.get('image.alt')\r\n\r\n    if (!$popup) $popup = _initAltPopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.alt')\r\n    editor.popups.setContainer('image.alt', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.alt', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initAltPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.alt', _refreshAltPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageAltButtons)}</div>`\r\n\r\n    // Image by url layer.\r\n    let alt_layer = ''\r\n    alt_layer = `<div class=\"fr-image-alt-layer fr-layer fr-active\" id=\"fr-image-alt-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-alt-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Alternative Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetAlt\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      alt_layer: alt_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.alt', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-alt', function () {\r\n        if ($current_image && editor.popups.isVisible('image.alt')) {\r\n          showAltPopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set ALT based on the values from the popup.\r\n   */\r\n\r\n  function setAlt(alt) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $current_image.attr('alt', alt || $popup.find('input').val() || '')\r\n      $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n\r\n  // Issue 2845\r\n\r\n  function _refreshSizePopup() {\r\n    const $popup = editor.popups.get('image.size')\r\n\r\n    if ($current_image) {\r\n\r\n      if (hasCaption()) {\r\n        let $el = $current_image.parent()\r\n\r\n        if (!($el.get(0).style.width)) {\r\n          $el = $current_image.parent().parent()\r\n        }\r\n        $popup.find('input[name=\"width\"]').val($el.get(0).style.width).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($el.get(0).style.height).trigger('change')\r\n      }\r\n      else {\r\n        $popup.find('input[name=\"width\"]').val($current_image.get(0).style.width).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($current_image.get(0).style.height).trigger('change')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('image.size')\r\n\r\n    if (!$popup) $popup = _initSizePopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.size')\r\n    editor.popups.setContainer('image.size', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.size', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.size', _refreshSizePopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageSizeButtons)}</div>`\r\n\r\n    // Size layer.\r\n    let size_layer = ''\r\n    size_layer = `<div class=\"fr-image-size-layer fr-layer fr-active\" id=\"fr-image-size-layer-${editor.id}\"><div class=\"fr-image-group\"><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-width-'${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-height${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.size', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-size', function () {\r\n        if ($current_image && editor.popups.isVisible('image.size')) {\r\n          showSizePopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current image size.\r\n   */\r\n\r\n  function setSize(width, height) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.size')\r\n      width = width || $popup.find('input[name=\"width\"]').val() || ''\r\n      height = height || $popup.find('input[name=\"height\"]').val() || ''\r\n      const regex = /^[\\d]+((px)|%)*$/g\r\n\r\n      $current_image.removeAttr('width').removeAttr('height')\r\n\r\n      if (width.match(regex)) $current_image.css('width', width)\r\n      else $current_image.css('width', '')\r\n\r\n      if (height.match(regex)) $current_image.css('height', height)\r\n      else $current_image.css('height', '')\r\n\r\n      if (hasCaption()) {\r\n        $current_image.parents('.fr-img-caption').removeAttr('width').removeAttr('height')\r\n\r\n        if (width.match(regex)) $current_image.parents('.fr-img-caption').css('width', width)\r\n        else $current_image.parents('.fr-img-caption').css('width', '')\r\n\r\n        if (height.match(regex)) $current_image.parents('.fr-img-caption').css('height', height)\r\n        else $current_image.parents('.fr-img-caption').css('height', '')\r\n      }\r\n\r\n      if ($popup) $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image upload layer.\r\n   */\r\n\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    let left\r\n    let top\r\n\r\n    // Click on the button from the toolbar without image selected.\r\n    if (!$current_image && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFiles\"]')\r\n      left = $btn.offset().left\r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10)\r\n    }\r\n\r\n    // Image is selected.\r\n    else if ($current_image) {\r\n\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      // Set the top to the bottom of the image.\r\n      top = $el.offset().top + $el.outerHeight()\r\n      left = $el.offset().left\r\n    }\r\n\r\n    // Image is selected and we are in inline mode.\r\n    if (!$current_image && editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top'))\r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight()\r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active')\r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active')\r\n    $popup.find(`.fr-upload-progress-layer`).addClass('fr-active')\r\n    editor.popups.show('filesManager.insert', left, top, ($current_image ? $current_image.outerHeight() : 0))\r\n    editor.accessibility.focusPopup($popup)\r\n  }\r\n\r\n  /**\r\n   * Refresh the upload image button.\r\n   */\r\n\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function _resizeImage(e, initPageX, direction, step) {\r\n    e.pageX = initPageX\r\n    _handlerMousedown.call(this, e)\r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step))\r\n    _handlerMousemove.call(this, e)\r\n    _handlerMouseup.call(this, e)\r\n\r\n    return ++step\r\n  }\r\n\r\n  /**\r\n   * Init image resizer.\r\n   */\r\n  function _initImageResizer() {\r\n    let doc\r\n\r\n    // No shared image resizer.\r\n    if (!editor.shared.$image_resizer) {\r\n\r\n      // Create shared image resizer.\r\n      editor.shared.$image_resizer = $(document.createElement('div')).attr('class', 'fr-image-resizer')\r\n      $image_resizer = editor.shared.$image_resizer\r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($image_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Image resize is enabled.\r\n      if (editor.opts.imageResize) {\r\n        $image_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se'))\r\n\r\n        // Add image resizer overlay and set it.\r\n        editor.shared.$img_overlay = $(document.createElement('div')).attr('class', 'fr-image-overlay')\r\n        $overlay = editor.shared.$img_overlay\r\n        doc = $image_resizer.get(0).ownerDocument\r\n        $(doc).find('body').first().append($overlay)\r\n      }\r\n    }\r\n    else {\r\n      $image_resizer = editor.shared.$image_resizer\r\n      $overlay = editor.shared.$img_overlay\r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($image_resizer.removeClass('fr-active'))\r\n      }, true)\r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $image_resizer.html('').removeData().remove()\r\n      $image_resizer = null\r\n\r\n      if (editor.opts.imageResize) {\r\n        $overlay.remove()\r\n        $overlay = null\r\n      }\r\n    }, true)\r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        if ($current_image && !$current_image.hasClass('fr-uploading')) {\r\n          _exitEdit(true)\r\n        }\r\n        else if ($current_image) {\r\n          _repositionResizer()\r\n          replace()\r\n          showProgressBar(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    // Image resize is enabled.\r\n    if (editor.opts.imageResize) {\r\n      doc = $image_resizer.get(0).ownerDocument\r\n      editor.events.$on($image_resizer, editor._mousedown, '.fr-handler', _handlerMousedown)\r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove)\r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup)\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup)\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1\r\n      let prevKey = null\r\n      let prevTimestamp = 0\r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_image) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey\r\n          const keycode = e.which\r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1\r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase image size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 1, 1, step)\r\n          }\r\n\r\n          // Decrease image size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 2, -1, step)\r\n          }\r\n          else if (!editor.keys.ctrlKey(e) && keycode == FE.KEYCODE.ENTER) {\r\n            $current_image.before('<br>')\r\n            _editImg($current_image)\r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode\r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp\r\n        }\r\n      }, true)\r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current image.\r\n   */\r\n  function remove($img) {\r\n    $img = $img || getEl()\r\n\r\n    if ($img) {\r\n      if (editor.events.trigger('image.beforeRemove', [$img]) !== false) {\r\n        editor.popups.hideAll()\r\n        _exitEdit(true)\r\n\r\n        if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n        if ($img.get(0) == editor.el) {\r\n          $img.removeAttr('src')\r\n        }\r\n        else {\r\n          if ($img.get(0).parentNode && $img.get(0).parentNode.tagName == 'A') {\r\n            editor.selection.setBefore($img.get(0).parentNode) || editor.selection.setAfter($img.get(0).parentNode) || $img.parent().after(FE.MARKERS)\r\n            $($img.get(0).parentNode).remove()\r\n          }\r\n          else {\r\n            editor.selection.setBefore($img.get(0)) || editor.selection.setAfter($img.get(0)) || $img.after(FE.MARKERS)\r\n            $img.remove()\r\n          }\r\n\r\n          editor.html.fillEmptyBlocks()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const key_code = e.which\r\n\r\n    if ($current_image && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      remove()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code == FE.KEYCODE.ESC) {\r\n      const $img = $current_image\r\n      _exitEdit(true)\r\n      editor.selection.setAfter($img.get(0))\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Move cursor if left and right arrows are used.\r\n    else if ($current_image && (key_code == FE.KEYCODE.ARROW_LEFT || key_code == FE.KEYCODE.ARROW_RIGHT)) {\r\n      const img = $current_image.get(0)\r\n      _exitEdit(true)\r\n\r\n      if (key_code == FE.KEYCODE.ARROW_LEFT) {\r\n        editor.selection.setBefore(img)\r\n      }\r\n      else {\r\n        editor.selection.setAfter(img)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code === FE.KEYCODE.TAB) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      _exitEdit(true)\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do some cleanup on images.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Tag is image.\r\n    if (el && el.tagName == 'IMG') {\r\n\r\n      // Remove element if it has class fr-uploading or fr-error.\r\n      if (editor.node.hasClass(el, 'fr-uploading') || editor.node.hasClass(el, 'fr-error')) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n\r\n      // Remove class if it is draggable.\r\n      else if (editor.node.hasClass(el, 'fr-draggable')) {\r\n        el.classList.remove('fr-draggable')\r\n      }\r\n\r\n      if (el.parentNode && el.parentNode.parentNode && editor.node.hasClass(el.parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = el.parentNode.parentNode\r\n        p_node.removeAttribute('contenteditable')\r\n        p_node.removeAttribute('draggable')\r\n        p_node.classList.remove('fr-draggable')\r\n\r\n        const n_node = el.nextSibling\r\n\r\n        if (n_node) {\r\n          n_node.removeAttribute('contenteditable')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Look for inner nodes that might be in a similar case.\r\n    else if (el && el.nodeType == Node.ELEMENT_NODE) {\r\n      const imgs = el.querySelectorAll('img.fr-uploading, img.fr-error, img.fr-draggable')\r\n\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        _cleanOnGet(imgs[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    // Init on image.\r\n    if (editor.el.tagName == 'IMG') {\r\n      editor.$el.addClass('fr-view')\r\n    }\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function () {\r\n        touchScroll = false\r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true\r\n      })\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('window.keydown keydown', _editorKeydownHandler, true)\r\n\r\n      editor.events.on('keyup', function (e) {\r\n        if ($current_image && e.which == FE.KEYCODE.ENTER) {\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Prevent typing in image caption DOM structure.\r\n      editor.events.$on(editor.$el, 'keydown', function () {\r\n        let el = editor.selection.element()\r\n\r\n        // Parent node of the current element.\r\n        if (el.nodeType === Node.TEXT_NODE || (el.tagName == 'BR' && editor.node.isLastSibling(el))) {\r\n          el = el.parentNode\r\n        }\r\n\r\n        if (!editor.node.hasClass(el, 'fr-inner')) {\r\n          if (!editor.node.hasClass(el, 'fr-img-caption')) {\r\n            el = $(el).parents('.fr-img-caption').get(0)\r\n          }\r\n\r\n          // Check if we are in image caption.\r\n          if (editor.node.hasClass(el, 'fr-img-caption')) {\r\n            $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS);\r\n            editor.selection.restore();\r\n          }\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler)\r\n    }\r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_image) {\r\n        if (editor.$wp) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        else {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_image) {\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // Copy/cut image.\r\n    editor.events.on('window.cut window.copy', function (e) {\r\n      // Do copy only if image.edit popups is visible and not focused.\r\n      if ($current_image && editor.popups.isVisible('image.edit') && !editor.popups.get('image.edit').find(':focus').length) {\r\n\r\n        const $el = getEl()\r\n\r\n        if (hasCaption()) {\r\n          $el.before(FE.START_MARKER)\r\n          $el.after(FE.END_MARKER)\r\n          editor.selection.restore()\r\n          editor.paste.saveCopiedText($el.get(0).outerHTML, $el.text())\r\n        }\r\n        else {\r\n          editor.paste.saveCopiedText($current_image.get(0).outerHTML, $current_image.attr('alt'))\r\n        }\r\n\r\n        if (e.type == 'copy') {\r\n          setTimeout(function () {\r\n            _editImg($current_image)\r\n          })\r\n        }\r\n        else {\r\n          _exitEdit(true)\r\n          editor.undo.saveStep()\r\n          setTimeout(function () {\r\n            editor.undo.saveStep()\r\n          }, 0)\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Fix IE copy not working when selection is collapsed.\r\n    if (editor.browser.msie) {\r\n      editor.events.on('keydown', function (e) {\r\n        // Selection is collapsed and we have an image.\r\n        if (!(editor.selection.isCollapsed() && $current_image)) return true\r\n\r\n        const key_code = e.which\r\n\r\n        // Copy.\r\n        if (key_code == FE.KEYCODE.C && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.copy')\r\n        }\r\n\r\n        // Cut.\r\n        else if (key_code == FE.KEYCODE.X && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.cut')\r\n        }\r\n      })\r\n    }\r\n\r\n    // Do not leave page while uploading.\r\n    editor.events.$on($(editor.o_win), 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && key_code == FE.KEYCODE.BACKSPACE) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Check if image is uploading to abort it.\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && $current_image.hasClass('fr-uploading') && key_code == FE.KEYCODE.ESC) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      if ($current_image && $current_image.hasClass('fr-uploading')) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('paste.before', _clipboardPaste)\r\n    editor.events.on('paste.beforeCleanup', _clipboardPasteCleanup)\r\n    editor.events.on('paste.after', _uploadPastedImages)\r\n\r\n    // Remove any fr-uploading / fr-error images.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n\r\n    if (editor.opts.imageOutputSize) {\r\n      let imgs\r\n\r\n      editor.events.on('html.beforeGet', function () {\r\n        imgs = editor.el.querySelectorAll('img')\r\n        for (let i = 0; i < imgs.length; i++) {\r\n          const width = imgs[i].style.width || $(imgs[i]).width()\r\n          const height = imgs[i].style.height || $(imgs[i]).height()\r\n\r\n          if (width) imgs[i].setAttribute('width', (`${width}`).replace(/px/, ''))\r\n\r\n          if (height) imgs[i].setAttribute('height', (`${height}`).replace(/px/, ''))\r\n        }\r\n      })\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.events.on('image.loaded', editor.size.syncIframe)\r\n    }\r\n\r\n    editor.events.$on($(editor.o_win), 'orientationchange.image', function () {\r\n      setTimeout(function () {\r\n        if ($current_image) {\r\n          _editImg($current_image)\r\n        }\r\n      }, 100)\r\n    })\r\n\r\n    _initEditPopup(true)\r\n    _initInsertPopup(true)\r\n    _initSizePopup(true)\r\n    _initAltPopup(true)\r\n\r\n    editor.events.on('node.remove', function ($node) {\r\n      if ($node.get(0).tagName == 'IMG') {\r\n        remove($node)\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    editor.events.on('popups.hide.filesManager.insert', function ($node) {\r\n      editor.filesManager.minimizePopup(current_index)\r\n    })\r\n  }\r\n\r\n  function _processPastedImage(img) {\r\n    if (editor.events.trigger('image.beforePasteUpload', [img]) === false) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Show the progress bar.\r\n    $current_image = $(img)\r\n    _repositionResizer()\r\n    showProgressBar()\r\n\r\n    $current_image.on('load', function () {\r\n      let loadEvents = []\r\n\r\n      _repositionResizer()\r\n      // https://github.com/froala/wysiwyg-editor/issues/3407\r\n      if ($(editor.popups.get('filesManager.insert').get(0)).find('div.fr-active.fr-error').length < 1) {\r\n        showProgressBar()\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1866\r\n      $(this).data('events').find(function(event) {\r\n        if (event[0] === 'load') {\r\n          loadEvents.push(event)\r\n        }\r\n      })\r\n      \r\n      // turn off the event if it is registered only once\r\n      loadEvents.length <= 1 && $(this).off('load')\r\n    })\r\n\r\n    const splitSrc = $(img).attr('src').split(',')\r\n\r\n    // Convert image to blob.\r\n    const binary = atob(splitSrc[1])\r\n    const array = []\r\n\r\n    for (let i = 0; i < binary.length; i++) {\r\n      array.push(binary.charCodeAt(i))\r\n    }\r\n\r\n    const upload_img = new Blob([new Uint8Array(array)], {\r\n      type: splitSrc[0].replace(/data\\:/g, '').replace(/;base64/g, '')\r\n    })\r\n\r\n    upload(upload_img, $current_image)\r\n  }\r\n\r\n  function _uploadPastedImages() {\r\n    if (!editor.opts.imagePaste) {\r\n      editor.$el.find('img[data-fr-image-pasted]').remove()\r\n    }\r\n    else {\r\n\r\n      // Safari won't work https://bugs.webkit.org/show_bug.cgi?id=49141\r\n      editor.$el.find('img[data-fr-image-pasted]').each(function (index, img) {\r\n        if (editor.opts.imagePasteProcess) {\r\n          let width = editor.opts.imageDefaultWidth\r\n\r\n          if (width && width != 'auto') {\r\n            width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n          }\r\n          $(img)\r\n            .css('width', width)\r\n            .removeClass('fr-dii fr-dib fr-fir fr-fil')\r\n\r\n          _setStyleImage($(img), editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n        }\r\n\r\n        // Data images.\r\n        if (img.src.indexOf('data:') === 0) {\r\n          _processPastedImage(img)\r\n        }\r\n\r\n        // New way Safari is pasting images.\r\n        else if (img.src.indexOf('blob:') === 0 || (img.src.indexOf('http') === 0 && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy)) {\r\n          const _img = new Image()\r\n          _img.crossOrigin = 'Anonymous'\r\n          _img.onload = function () {\r\n            // Create canvas.\r\n            const canvas = editor.o_doc.createElement('CANVAS')\r\n            const context = canvas.getContext('2d')\r\n\r\n            // Set height.\r\n            canvas.height = this.naturalHeight\r\n            canvas.width = this.naturalWidth\r\n\r\n            // Draw image.\r\n            context.drawImage(this, 0, 0)\r\n\r\n            // pushing the execution at end of the stack\r\n            setTimeout(function () {\r\n              _processPastedImage(img)\r\n            }, 0)\r\n\r\n            let imgExt\r\n\r\n            if (this.naturalWidth > 2000 || this.naturalHeight > 1500) {\r\n              imgExt = 'jpeg' // if images are too large\r\n            }\r\n            else {\r\n              imgExt = 'png'\r\n            }\r\n            // Update image and process it.\r\n            img.src = canvas.toDataURL(`image/${imgExt}`)\r\n          }\r\n          _img.src = (img.src.indexOf('blob:') === 0 ? '' : (`${editor.opts.imageCORSProxy}/`)) + img.src\r\n        }\r\n\r\n        // Images without http (Safari ones.).\r\n        else if (img.src.indexOf('http') !== 0 || img.src.indexOf('https://mail.google.com/mail') === 0) {\r\n          editor.selection.save()\r\n          $(img).remove()\r\n          editor.selection.restore()\r\n        }\r\n        else {\r\n          $(img).removeAttr('data-fr-image-pasted')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function _clipboardImageLoaded(e) {\r\n    const result = e.target.result\r\n\r\n    // Default width.\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    editor.html.insert(`<img data-fr-image-pasted=\"true\" src=\"${result}\"${(width ? ` style=\"width: ${width};\"` : '')}>`)\r\n\r\n    const $img = editor.$el.find('img[data-fr-image-pasted=\"true\"]')\r\n\r\n    if ($img) {\r\n      _setStyleImage($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n    }\r\n\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  function _processsClipboardPaste(file) {\r\n    const reader = new FileReader()\r\n    reader.onload = _clipboardImageLoaded\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function _clipboardPaste(e) {\r\n    if (e && e.clipboardData && e.clipboardData.items) {\r\n\r\n      let file = null\r\n\r\n      if (!((e.clipboardData.types && [].indexOf.call(e.clipboardData.types, 'text/rtf') != -1) || e.clipboardData.getData('text/rtf'))) {\r\n        for (let i = 0; i < e.clipboardData.items.length; i++) {\r\n          file = e.clipboardData.items[i].getAsFile()\r\n\r\n          if (file) {\r\n            break\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        file = e.clipboardData.items[0].getAsFile()\r\n      }\r\n\r\n      if (file) {\r\n        _processsClipboardPaste(file)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clipboardPasteCleanup(clipboard_html) {\r\n    clipboard_html = clipboard_html.replace(/<img /gi, '<img data-fr-image-pasted=\"true\" ')\r\n\r\n    return clipboard_html\r\n  }\r\n\r\n  /**\r\n   * Start edit.\r\n   */\r\n  let touchScroll\r\n\r\n  function _edit(e) {\r\n    if ($(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('image.hideResizer')\r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable()\r\n\r\n    if (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe()\r\n    }\r\n\r\n    // Store current image.\r\n    $current_image = $(this)\r\n\r\n    // Reposition resizer.\r\n    _repositionResizer()\r\n\r\n    // Issue 2801\r\n    if (editor.browser.msie) {\r\n      if (editor.popups.areVisible()) {\r\n        editor.events.disableBlur()\r\n      }\r\n\r\n      if (editor.win.getSelection) {\r\n        editor.win.getSelection().removeAllRanges()\r\n        editor.win.getSelection().addRange(editor.doc.createRange())\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    // Fix for image remaining selected.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    // Refresh buttons.\r\n    editor.button.bulkRefresh()\r\n    editor.events.trigger('video.hideResizer')\r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n\r\n  function _exitEdit(force_exit) {\r\n    if ($current_image && (_canExit() || force_exit === true)) {\r\n      editor.toolbar.enable()\r\n      $image_resizer && $image_resizer.removeClass('fr-active')\r\n      editor.popups.hide('image.edit')\r\n      $current_image = null\r\n      _unmarkExit()\r\n\r\n      $handler = null\r\n\r\n      if ($overlay) {\r\n        $overlay.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  let img_exit_flag = false\r\n\r\n  function _markExit() {\r\n    img_exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    img_exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return img_exit_flag\r\n  }\r\n\r\n  function _setStyleVideo($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Set style for image.\r\n   */\r\n  function _setStyleImage($img, _display, _align) {\r\n\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $img.removeClass('fr-fil fr-fir fr-dib fr-dii')\r\n\r\n      if (_align) {\r\n        $img.addClass(`fr-fi${_align[0]}`)\r\n      }\r\n\r\n      if (_display) {\r\n        $img.addClass(`fr-di${_display[0]}`)\r\n      }\r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $img.css({\r\n          display: 'inline-block',\r\n          verticalAlign: 'bottom',\r\n          margin: editor.opts.imageDefaultMargin\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $img.css({\r\n            'float': 'none',\r\n            marginBottom: '',\r\n            marginTop: '',\r\n            maxWidth: `calc(100% - ${(2 * editor.opts.imageDefaultMargin)}px)`,\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $img.css({\r\n            'float': 'left',\r\n            marginLeft: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else {\r\n          $img.css({\r\n            'float': 'right',\r\n            marginRight: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n      else if (_display == 'block') {\r\n        $img.css({\r\n          display: 'block',\r\n          'float': 'none',\r\n          verticalAlign: 'top',\r\n          margin: `${editor.opts.imageDefaultMargin}px auto`,\r\n          textAlign: 'center'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $img.css({\r\n            marginLeft: 0,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $img.css({\r\n            marginRight: 0,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n \r\n  /**\r\n   * Get the current image.\r\n   */\r\n\r\n  function get() {\r\n\r\n    return $current_image\r\n  }\r\n\r\n  function getEl() {\r\n    return hasCaption() ? $current_image.parents('.fr-img-caption').first() : $current_image\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n\r\n  function applyStyle(val, imageStyles, multipleStyles) {\r\n    if (typeof imageStyles == 'undefined') imageStyles = editor.opts.imageStyles\r\n\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.imageMultipleStyles\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $img = getEl()\r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(imageStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      $img.removeClass(styles.join(' '))\r\n    }\r\n\r\n    if (typeof imageStyles[val] == 'object') {\r\n      $img.removeAttr('style')\r\n      $img.css(imageStyles[val].style)\r\n    }\r\n    else {\r\n      $img.toggleClass(val)\r\n    }\r\n\r\n    _editImg($current_image)\r\n  }\r\n\r\n  function hasCaption() {\r\n    if ($current_image) {\r\n      return $current_image.parents('.fr-img-caption').length > 0\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function refreshEmbedButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-embed-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function toggleCaption() {\r\n    let $el\r\n\r\n    if ($current_image && !hasCaption()) {\r\n      $el = $current_image\r\n\r\n      // Check if there is a link wrapping the image.\r\n      if ($current_image.parent().is('a')) {\r\n        $el = $current_image.parent()\r\n      }\r\n\r\n      // code start https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n\r\n      // check the li placement\r\n      var $listParent = $current_image.parents('ul') && $current_image.parents('ul').length > 0 ? $current_image.parents('ul') : $current_image.parents('ol') && $current_image.parents('ol').length > 0 ? $current_image.parents('ol') : [];\r\n      if ($listParent.length > 0) {\r\n        var totLi = $listParent.find('li').length,\r\n          $currLi = $current_image.parents('li'),\r\n          $newLi = document.createElement(\"li\");;\r\n        \r\n        if ((totLi - 1) === $currLi.index()) { // if li placement last then add one extra li\r\n          $listParent.append($newLi);\r\n          $newLi.innerHTML = '&nbsp;';\r\n        }\r\n      }\r\n\r\n      let splitAttrs\r\n      let oldWidth\r\n\r\n      if ($el.attr('style')) {\r\n        splitAttrs = $el.attr('style').split(':')\r\n        oldWidth = splitAttrs.indexOf('width') > -1 ? splitAttrs[splitAttrs.indexOf('width') + 1].replace(';', '') : ''\r\n      }\r\n\r\n      // Issue 2861\r\n      const current_width = editor.opts.imageResizeWithPercent ? (oldWidth.indexOf('px') > -1 ? null : oldWidth) || '100%' : $current_image.width() + 'px'\r\n  \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      $el.wrap('<div class=\"fr-img-space-wrap\"><span ' + (!editor.browser.mozilla ? 'contenteditable=\"false\"' : '') + 'class=\"fr-img-caption ' + $current_image.attr('class') + '\" style=\"' + (!editor.opts.useClasses ? $el.attr('style') : '') + '\" draggable=\"false\"></span><p class=\"fr-img-space-wrap2\">&nbsp;</p></div>')\r\n      $el.wrap('<span class=\"fr-img-wrap\"></span>')\r\n      $current_image.after(`<span class=\"fr-inner\"${(!editor.browser.mozilla ? ' contenteditable=\"true\"' : '')}>${FE.START_MARKER}${editor.language.translate('Image Caption')}${FE.END_MARKER}</span>`)\r\n      $current_image.removeAttr('class').removeAttr('style').removeAttr('width')\r\n\r\n      $current_image.parents('.fr-img-caption').css('width', current_width);\r\n\r\n      _exitEdit(true)\r\n\r\n      editor.selection.restore()\r\n    }\r\n    else {\r\n      $el = getEl()\r\n      $current_image.insertAfter($el)\r\n      $current_image\r\n        .attr('class', $el.attr('class').replace('fr-img-caption', ''))\r\n        .attr('style', $el.attr('style'))\r\n      $el.remove()\r\n\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshUploadButton: refreshUploadButton,\r\n    refreshByURLButton: refreshByURLButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    insertAllFiles: insertAllFiles,\r\n    deleteAllFiles: deleteAllFiles,\r\n    get: get,\r\n    getEl: getEl,\r\n    insert: insert,\r\n    showProgressBar: showProgressBar,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    applyStyle: applyStyle,\r\n    showAltPopup: showAltPopup,\r\n    showSizePopup: showSizePopup,\r\n    setAlt: setAlt,\r\n    setSize: setSize,\r\n    toggleCaption: toggleCaption,\r\n    refreshEmbedButton: refreshEmbedButton,\r\n    insertEmbed: insertEmbed,\r\n    hasCaption: hasCaption,\r\n    exitEdit: _exitEdit,\r\n    edit: _editImg,\r\n    cancelFileInsert: cancelFileInsert,\r\n    minimizePopup: minimizePopup,\r\n    editImage: editImage,\r\n    saveImage: saveImage,\r\n    _showErrorMessage: _showErrorMessage,\r\n    _showFileErrorMessage: _showFileErrorMessage,\r\n    getFileThumbnail: getFileThumbnail,\r\n    deleteFile:deleteFile,\r\n    checkAutoplay:checkAutoplay,\r\n    checkInsertAllState:checkInsertAllState,\r\n    _disableInsertCheckbox:_disableInsertCheckbox,\r\n    _getFileType: _getFileType,\r\n    isChildWindowOpen: isChildWindowOpen,\r\n    setChildWindowState: setChildWindowState,\r\n    resetAllFilesCheckbox: resetAllFilesCheckbox\r\n  }\r\n}\r\n\r\n// Insert image button.\r\nFE.DefineIcon('insertFiles', {\r\n  NAME: 'image',\r\n  SVG_KEY: 'fileManager'\r\n})\r\nFE.RegisterShortcut(FE.KEYCODE.P, 'insertFiles', null, 'P')\r\nFE.RegisterCommand('insertFiles', {\r\n  title: 'Insert Files',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('filesManager.insert')) {\r\n      this.filesManager.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('filesManager.insert')\r\n    }\r\n  },\r\n  plugin: 'filesManager'\r\n})\r\n\r\n\r\nFE.DefineIcon('cloudIcon', {\r\n  NAME: 'cloudIcon',\r\n  SVG_KEY: 'uploadFiles'\r\n})\r\n\r\n// Image upload button inside the insert image popup.\r\nFE.DefineIcon('filesUpload', {\r\n  NAME: 'uploadFiles',\r\n  SVG_KEY: 'uploadFiles'\r\n})\r\nFE.RegisterCommand('filesUpload', {\r\n  title: 'Upload Files',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-upload')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshUploadButton($btn)\r\n  }\r\n})\r\n\r\n// Image by URL button inside the insert image popup.\r\nFE.DefineIcon('filesByURL', {\r\n  NAME: 'link',\r\n  SVG_KEY: 'insertLink'\r\n})\r\nFE.RegisterCommand('filesByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-by-url')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshByURLButton($btn)\r\n  }\r\n})\r\n\r\n// image\r\n// Video embed button inside the insert video popup.\r\nFE.DefineIcon('filesEmbed', { NAME: 'code', SVG_KEY: 'codeView' })\r\nFE.RegisterCommand('filesEmbed', {\r\n  title: 'Embedded Code',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-embed')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshEmbedButton($btn)\r\n  }\r\n})\r\n\r\nFE.DefineIcon('insertAll', { NAME: 'insertAll', SVG_KEY: 'fileInsert' })\r\nFE.RegisterCommand('insertAll', {\r\n  title: 'Insert',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  disabled: true,\r\n  callback: function () {\r\n    this.filesManager.insertAllFiles()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('deleteAll', { NAME: 'remove', SVG_KEY: 'remove' })\r\nFE.RegisterCommand('deleteAll', {\r\n  title: 'Delete',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  disabled: true,\r\n  callback: function () {\r\n    this.filesManager.deleteAllFiles()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('cancel', { NAME: 'cancel', SVG_KEY: 'cancel' })\r\nFE.RegisterCommand('cancel', {\r\n  title: 'Cancel',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.cancelFileInsert() \r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\nFE.DefineIcon('minimize', { NAME: 'minimize', SVG_KEY: 'minimize' })\r\nFE.RegisterCommand('minimize', {\r\n  title: 'Minimize',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.minimizePopup(\"image.insert\", true);\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshEmbedButton($btn)\r\n  }\r\n})\r\n\r\n\r\n// Insert image button inside the insert by URL layer.\r\nFE.RegisterCommand('filesInsertByURL', {\r\n  title: 'Insert Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.filesManager.insertByURL()\r\n  },\r\n  refresh: function ($btn) {\r\n      $btn.text(this.language.translate('Add'))\r\n  }\r\n})\r\n\r\n// Insert image button inside the insert by upload layer.\r\nFE.RegisterCommand('imageInsertByUpload', {\r\n  title: 'Insert',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function (cmd, val) {\r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\n// View image\r\nFE.RegisterCommand('viewImage', {\r\n  title: 'View Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function (cmd, val) {\r\n    \r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\n// Embed Insert\r\nFE.RegisterCommand('insertEmbed', {\t\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.filesManager.insertEmbed()\r\n    this.popups.get('filesManager.insert').find('textarea')[0].value=''\r\n    this.popups.get('filesManager.insert').find('textarea').removeClass('fr-not-empty')\r\n  }\t\r\n})\r\n\r\nFE.RegisterCommand('filesDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\t\r\n    this.filesManager.hideProgressBar(true)\t\r\n  }\t\r\n})\r\n","import FE from '../index.js'\r\n/**\r\n * crypto-js\r\n *\r\n * LICENSE: The MIT License (MIT), https://github.com/brix/crypto-js/blob/develop/LICENSE\r\n *\r\n * Copyright (c) 2009-2013 Jeff Mott  \r\n * Copyright (c) 2013-2016 Evan Vosberg\r\n*/\r\nFE.PLUGINS.cryptoJSPlugin = function (editor) {\r\n    function init() {\r\n     \r\n    }\r\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\r\n\r\n\t    var crypto;\r\n\r\n\t    // Native crypto from window (Browser)\r\n\t    if (typeof window !== 'undefined' && window.crypto) {\r\n\t        crypto = window.crypto;\r\n\t    }\r\n\r\n\t    // Native (experimental IE 11) crypto from window (Browser)\r\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\r\n\t        crypto = window.msCrypto;\r\n\t    }\r\n\r\n\t    // Native crypto from global (NodeJS)\r\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\r\n\t        crypto = global.crypto;\r\n\t    }\r\n\r\n\t    // Native crypto import via require (NodeJS)\r\n\t    if (!crypto && typeof require === 'function') {\r\n\t        try {\r\n\t            crypto = require('crypto');\r\n\t        } catch (err) {}\r\n\t    }\r\n\r\n\t    /*\r\n\t     * Cryptographically secure pseudorandom number generator\r\n\t     *\r\n\t     * As Math.random() is cryptographically not safe to use\r\n\t     */\r\n\t    var cryptoSecureRandomInt = function () {\r\n\t        if (crypto) {\r\n\t            // Use getRandomValues method (Browser)\r\n\t            if (typeof crypto.getRandomValues === 'function') {\r\n\t                try {\r\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\r\n\t                } catch (err) {}\r\n\t            }\r\n\r\n\t            // Use randomBytes method (NodeJS)\r\n\t            if (typeof crypto.randomBytes === 'function') {\r\n\t                try {\r\n\t                    return crypto.randomBytes(4).readInt32LE();\r\n\t                } catch (err) {}\r\n\t            }\r\n\t        }\r\n\r\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\r\n\t    };\r\n\r\n\t    /*\r\n\t     * Local polyfill of Object.create\r\n\r\n\t     */\r\n\t    var create = Object.create || (function () {\r\n\t        function F() {}\r\n\r\n\t        return function (obj) {\r\n\t            var subtype;\r\n\r\n\t            F.prototype = obj;\r\n\r\n\t            subtype = new F();\r\n\r\n\t            F.prototype = null;\r\n\r\n\t            return subtype;\r\n\t        };\r\n\t    }())\r\n\r\n\t    /**\r\n\t     * CryptoJS namespace.\r\n\t     */\r\n\t    var C = {};\r\n\r\n\t    /**\r\n\t     * Library namespace.\r\n\t     */\r\n\t    var C_lib = C.lib = {};\r\n\r\n\t    /**\r\n\t     * Base object for prototypal inheritance.\r\n\t     */\r\n\t    var Base = C_lib.Base = (function () {\r\n\r\n\r\n\t        return {\r\n\t            /**\r\n\t             * Creates a new object that inherits from this object.\r\n\t             *\r\n\t             * @param {Object} overrides Properties to copy into the new object.\r\n\t             *\r\n\t             * @return {Object} The new object.\r\n\t             *\r\n\t             * @static\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var MyType = CryptoJS.lib.Base.extend({\r\n\t             *         field: 'value',\r\n\t             *\r\n\t             *         method: function () {\r\n\t             *         }\r\n\t             *     });\r\n\t             */\r\n\t            extend: function (overrides) {\r\n\t                // Spawn\r\n\t                var subtype = create(this);\r\n\r\n\t                // Augment\r\n\t                if (overrides) {\r\n\t                    subtype.mixIn(overrides);\r\n\t                }\r\n\r\n\t                // Create default initializer\r\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\r\n\t                    subtype.init = function () {\r\n\t                        subtype.$super.init.apply(this, arguments);\r\n\t                    };\r\n\t                }\r\n\r\n\t                // Initializer's prototype is the subtype object\r\n\t                subtype.init.prototype = subtype;\r\n\r\n\t                // Reference supertype\r\n\t                subtype.$super = this;\r\n\r\n\t                return subtype;\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Extends this object and runs the init method.\r\n\t             * Arguments to create() will be passed to init().\r\n\t             *\r\n\t             * @return {Object} The new object.\r\n\t             *\r\n\t             * @static\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var instance = MyType.create();\r\n\t             */\r\n\t            create: function () {\r\n\t                var instance = this.extend();\r\n\t                instance.init.apply(instance, arguments);\r\n\r\n\t                return instance;\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Initializes a newly created object.\r\n\t             * Override this method to add some logic when your objects are created.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var MyType = CryptoJS.lib.Base.extend({\r\n\t             *         init: function () {\r\n\t             *             // ...\r\n\t             *         }\r\n\t             *     });\r\n\t             */\r\n\t            init: function () {\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Copies properties into this object.\r\n\t             *\r\n\t             * @param {Object} properties The properties to mix in.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     MyType.mixIn({\r\n\t             *         field: 'value'\r\n\t             *     });\r\n\t             */\r\n\t            mixIn: function (properties) {\r\n\t                for (var propertyName in properties) {\r\n\t                    if (properties.hasOwnProperty(propertyName)) {\r\n\t                        this[propertyName] = properties[propertyName];\r\n\t                    }\r\n\t                }\r\n\r\n\t                // IE won't copy toString using the loop above\r\n\t                if (properties.hasOwnProperty('toString')) {\r\n\t                    this.toString = properties.toString;\r\n\t                }\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Creates a copy of this object.\r\n\t             *\r\n\t             * @return {Object} The clone.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var clone = instance.clone();\r\n\t             */\r\n\t            clone: function () {\r\n\t                return this.init.prototype.extend(this);\r\n\t            }\r\n\t        };\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * An array of 32-bit words.\r\n\t     *\r\n\t     * @property {Array} words The array of 32-bit words.\r\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\r\n\t     */\r\n\t    var WordArray = C_lib.WordArray = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created word array.\r\n\t         *\r\n\t         * @param {Array} words (Optional) An array of 32-bit words.\r\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\r\n\t         */\r\n\t        init: function (words, sigBytes) {\r\n\t            words = this.words = words || [];\r\n\r\n\t            if (sigBytes != undefined) {\r\n\t                this.sigBytes = sigBytes;\r\n\t            } else {\r\n\t                this.sigBytes = words.length * 4;\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this word array to a string.\r\n\t         *\r\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\r\n\t         *\r\n\t         * @return {string} The stringified word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var string = wordArray + '';\r\n\t         *     var string = wordArray.toString();\r\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\r\n\t         */\r\n\t        toString: function (encoder) {\r\n\t            return (encoder || Hex).stringify(this);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Concatenates a word array to this word array.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array to append.\r\n\t         *\r\n\t         * @return {WordArray} This word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     wordArray1.concat(wordArray2);\r\n\t         */\r\n\t        concat: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var thisWords = this.words;\r\n\t            var thatWords = wordArray.words;\r\n\t            var thisSigBytes = this.sigBytes;\r\n\t            var thatSigBytes = wordArray.sigBytes;\r\n\r\n\t            // Clamp excess bits\r\n\t            this.clamp();\r\n\r\n\t            // Concat\r\n\t            if (thisSigBytes % 4) {\r\n\t                // Copy one byte at a time\r\n\t                for (var i = 0; i < thatSigBytes; i++) {\r\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\r\n\t                }\r\n\t            } else {\r\n\t                // Copy one word at a time\r\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\r\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\r\n\t                }\r\n\t            }\r\n\t            this.sigBytes += thatSigBytes;\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Removes insignificant bits.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     wordArray.clamp();\r\n\t         */\r\n\t        clamp: function () {\r\n\t            // Shortcuts\r\n\t            var words = this.words;\r\n\t            var sigBytes = this.sigBytes;\r\n\r\n\t            // Clamp\r\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\r\n\t            words.length = Math.ceil(sigBytes / 4);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this word array.\r\n\t         *\r\n\t         * @return {WordArray} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = wordArray.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\t            clone.words = this.words.slice(0);\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a word array filled with random bytes.\r\n\t         *\r\n\t         * @param {number} nBytes The number of random bytes to generate.\r\n\t         *\r\n\t         * @return {WordArray} The random word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\r\n\t         */\r\n\t        random: function (nBytes) {\r\n\t            var words = [];\r\n\r\n\t            for (var i = 0; i < nBytes; i += 4) {\r\n\t                words.push(cryptoSecureRandomInt());\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, nBytes);\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Encoder namespace.\r\n\t     */\r\n\t    var C_enc = C.enc = {};\r\n\r\n\t    /**\r\n\t     * Hex encoding strategy.\r\n\t     */\r\n\t    var Hex = C_enc.Hex = {\r\n\t        /**\r\n\t         * Converts a word array to a hex string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The hex string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var hexChars = [];\r\n\t            for (var i = 0; i < sigBytes; i++) {\r\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                hexChars.push((bite >>> 4).toString(16));\r\n\t                hexChars.push((bite & 0x0f).toString(16));\r\n\t            }\r\n\r\n\t            return hexChars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a hex string to a word array.\r\n\t         *\r\n\t         * @param {string} hexStr The hex string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\r\n\t         */\r\n\t        parse: function (hexStr) {\r\n\t            // Shortcut\r\n\t            var hexStrLength = hexStr.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < hexStrLength; i += 2) {\r\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, hexStrLength / 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Latin1 encoding strategy.\r\n\t     */\r\n\t    var Latin1 = C_enc.Latin1 = {\r\n\t        /**\r\n\t         * Converts a word array to a Latin1 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The Latin1 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var latin1Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i++) {\r\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                latin1Chars.push(String.fromCharCode(bite));\r\n\t            }\r\n\r\n\t            return latin1Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a Latin1 string to a word array.\r\n\t         *\r\n\t         * @param {string} latin1Str The Latin1 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\r\n\t         */\r\n\t        parse: function (latin1Str) {\r\n\t            // Shortcut\r\n\t            var latin1StrLength = latin1Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < latin1StrLength; i++) {\r\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, latin1StrLength);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * UTF-8 encoding strategy.\r\n\t     */\r\n\t    var Utf8 = C_enc.Utf8 = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-8 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-8 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            try {\r\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\r\n\t            } catch (e) {\r\n\t                throw new Error('Malformed UTF-8 data');\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-8 string to a word array.\r\n\t         *\r\n\t         * @param {string} utf8Str The UTF-8 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\r\n\t         */\r\n\t        parse: function (utf8Str) {\r\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Abstract buffered block algorithm template.\r\n\t     *\r\n\t     * The property blockSize must be implemented in a concrete subtype.\r\n\t     *\r\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\r\n\t     */\r\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\r\n\t        /**\r\n\t         * Resets this block algorithm's data buffer to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     bufferedBlockAlgorithm.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Initial values\r\n\t            this._data = new WordArray.init();\r\n\t            this._nDataBytes = 0;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Adds new data to this block algorithm's buffer.\r\n\t         *\r\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     bufferedBlockAlgorithm._append('data');\r\n\t         *     bufferedBlockAlgorithm._append(wordArray);\r\n\t         */\r\n\t        _append: function (data) {\r\n\t            // Convert string to WordArray, else assume WordArray already\r\n\t            if (typeof data == 'string') {\r\n\t                data = Utf8.parse(data);\r\n\t            }\r\n\r\n\t            // Append\r\n\t            this._data.concat(data);\r\n\t            this._nDataBytes += data.sigBytes;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Processes available data blocks.\r\n\t         *\r\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\r\n\t         *\r\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\r\n\t         *\r\n\t         * @return {WordArray} The processed data.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var processedData = bufferedBlockAlgorithm._process();\r\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\r\n\t         */\r\n\t        _process: function (doFlush) {\r\n\t            var processedWords;\r\n\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\t            var dataSigBytes = data.sigBytes;\r\n\t            var blockSize = this.blockSize;\r\n\t            var blockSizeBytes = blockSize * 4;\r\n\r\n\t            // Count blocks ready\r\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\r\n\t            if (doFlush) {\r\n\t                // Round up to include partial blocks\r\n\t                nBlocksReady = Math.ceil(nBlocksReady);\r\n\t            } else {\r\n\t                // Round down to include only full blocks,\r\n\t                // less the number of blocks that must remain in the buffer\r\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\r\n\t            }\r\n\r\n\t            // Count words ready\r\n\t            var nWordsReady = nBlocksReady * blockSize;\r\n\r\n\t            // Count bytes ready\r\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\r\n\r\n\t            // Process blocks\r\n\t            if (nWordsReady) {\r\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\r\n\t                    // Perform concrete-algorithm logic\r\n\t                    this._doProcessBlock(dataWords, offset);\r\n\t                }\r\n\r\n\t                // Remove processed words\r\n\t                processedWords = dataWords.splice(0, nWordsReady);\r\n\t                data.sigBytes -= nBytesReady;\r\n\t            }\r\n\r\n\t            // Return processed words\r\n\t            return new WordArray.init(processedWords, nBytesReady);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this object.\r\n\t         *\r\n\t         * @return {Object} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = bufferedBlockAlgorithm.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\t            clone._data = this._data.clone();\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        _minBufferSize: 0\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Abstract hasher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\r\n\t     */\r\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         */\r\n\t        cfg: Base.extend(),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created hasher.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            // Apply config defaults\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this hasher to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hasher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Reset data buffer\r\n\t            BufferedBlockAlgorithm.reset.call(this);\r\n\r\n\t            // Perform concrete-hasher logic\r\n\t            this._doReset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Updates this hasher with a message.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate The message to append.\r\n\t         *\r\n\t         * @return {Hasher} This hasher.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hasher.update('message');\r\n\t         *     hasher.update(wordArray);\r\n\t         */\r\n\t        update: function (messageUpdate) {\r\n\t            // Append\r\n\t            this._append(messageUpdate);\r\n\r\n\t            // Update the hash\r\n\t            this._process();\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the hash computation.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t         *\r\n\t         * @return {WordArray} The hash.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hash = hasher.finalize();\r\n\t         *     var hash = hasher.finalize('message');\r\n\t         *     var hash = hasher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (messageUpdate) {\r\n\t            // Final message update\r\n\t            if (messageUpdate) {\r\n\t                this._append(messageUpdate);\r\n\t            }\r\n\r\n\t            // Perform concrete-hasher logic\r\n\t            var hash = this._doFinalize();\r\n\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        blockSize: 512/32,\r\n\r\n\t        /**\r\n\t         * Creates a shortcut function to a hasher's object interface.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hasher to create a helper for.\r\n\t         *\r\n\t         * @return {Function} The shortcut function.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\r\n\t         */\r\n\t        _createHelper: function (hasher) {\r\n\t            return function (message, cfg) {\r\n\t                return new hasher.init(cfg).finalize(message);\r\n\t            };\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a shortcut function to the HMAC's object interface.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\r\n\t         *\r\n\t         * @return {Function} The shortcut function.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\r\n\t         */\r\n\t        _createHmacHelper: function (hasher) {\r\n\t            return function (message, key) {\r\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\r\n\t            };\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Algorithm namespace.\r\n\t     */\r\n\t    var C_algo = C.algo = {};\r\n\r\n\t    return C;\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_enc = C.enc;\r\n\r\n\t    /**\r\n\t     * Base64 encoding strategy.\r\n\t     */\r\n\t    var Base64 = C_enc.Base64 = {\r\n\t        /**\r\n\t         * Converts a word array to a Base64 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The Base64 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\t            var map = this._map;\r\n\r\n\t            // Clamp excess bits\r\n\t            wordArray.clamp();\r\n\r\n\t            // Convert\r\n\t            var base64Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 3) {\r\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\r\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\r\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\r\n\r\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\r\n\r\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\r\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\r\n\t                }\r\n\t            }\r\n\r\n\t            // Add padding\r\n\t            var paddingChar = map.charAt(64);\r\n\t            if (paddingChar) {\r\n\t                while (base64Chars.length % 4) {\r\n\t                    base64Chars.push(paddingChar);\r\n\t                }\r\n\t            }\r\n\r\n\t            return base64Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a Base64 string to a word array.\r\n\t         *\r\n\t         * @param {string} base64Str The Base64 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\r\n\t         */\r\n\t        parse: function (base64Str) {\r\n\t            // Shortcuts\r\n\t            var base64StrLength = base64Str.length;\r\n\t            var map = this._map;\r\n\t            var reverseMap = this._reverseMap;\r\n\r\n\t            if (!reverseMap) {\r\n\t                    reverseMap = this._reverseMap = [];\r\n\t                    for (var j = 0; j < map.length; j++) {\r\n\t                        reverseMap[map.charCodeAt(j)] = j;\r\n\t                    }\r\n\t            }\r\n\r\n\t            // Ignore padding\r\n\t            var paddingChar = map.charAt(64);\r\n\t            if (paddingChar) {\r\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\r\n\t                if (paddingIndex !== -1) {\r\n\t                    base64StrLength = paddingIndex;\r\n\t                }\r\n\t            }\r\n\r\n\t            // Convert\r\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\r\n\r\n\t        },\r\n\r\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\r\n\t    };\r\n\r\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\r\n\t      var words = [];\r\n\t      var nBytes = 0;\r\n\t      for (var i = 0; i < base64StrLength; i++) {\r\n\t          if (i % 4) {\r\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\r\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\r\n\t              var bitsCombined = bits1 | bits2;\r\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\r\n\t              nBytes++;\r\n\t          }\r\n\t      }\r\n\t      return WordArray.create(words, nBytes);\r\n\t    }\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants table\r\n\t    var T = [];\r\n\r\n\t    // Compute constants\r\n\t    (function () {\r\n\t        for (var i = 0; i < 64; i++) {\r\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * MD5 hash algorithm.\r\n\t     */\r\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0x67452301, 0xefcdab89,\r\n\t                0x98badcfe, 0x10325476\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                // Shortcuts\r\n\t                var offset_i = offset + i;\r\n\t                var M_offset_i = M[offset_i];\r\n\r\n\t                M[offset_i] = (\r\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var H = this._hash.words;\r\n\r\n\t            var M_offset_0  = M[offset + 0];\r\n\t            var M_offset_1  = M[offset + 1];\r\n\t            var M_offset_2  = M[offset + 2];\r\n\t            var M_offset_3  = M[offset + 3];\r\n\t            var M_offset_4  = M[offset + 4];\r\n\t            var M_offset_5  = M[offset + 5];\r\n\t            var M_offset_6  = M[offset + 6];\r\n\t            var M_offset_7  = M[offset + 7];\r\n\t            var M_offset_8  = M[offset + 8];\r\n\t            var M_offset_9  = M[offset + 9];\r\n\t            var M_offset_10 = M[offset + 10];\r\n\t            var M_offset_11 = M[offset + 11];\r\n\t            var M_offset_12 = M[offset + 12];\r\n\t            var M_offset_13 = M[offset + 13];\r\n\t            var M_offset_14 = M[offset + 14];\r\n\t            var M_offset_15 = M[offset + 15];\r\n\r\n\t            // Working varialbes\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\r\n\t            // Computation\r\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\r\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\r\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\r\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\r\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\r\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\r\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\r\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\r\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\r\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\r\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\r\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\r\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\r\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\r\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\r\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\r\n\r\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\r\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\r\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\r\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\r\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\r\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\r\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\r\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\r\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\r\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\r\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\r\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\r\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\r\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\r\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\r\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\r\n\r\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\r\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\r\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\r\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\r\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\r\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\r\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\r\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\r\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\r\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\r\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\r\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\r\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\r\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\r\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\r\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\r\n\r\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\r\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\r\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\r\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\r\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\r\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\r\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\r\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\r\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\r\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\r\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\r\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\r\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\r\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\r\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\r\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\r\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\r\n\t            var nBitsTotalL = nBitsTotal;\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\r\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\r\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\r\n\t            data.sigBytes = (dataWords.length + 1) * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var hash = this._hash;\r\n\t            var H = hash.words;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Shortcut\r\n\t                var H_i = H[i];\r\n\r\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\r\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    function FF(a, b, c, d, x, s, t) {\r\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function GG(a, b, c, d, x, s, t) {\r\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function HH(a, b, c, d, x, s, t) {\r\n\t        var n = a + (b ^ c ^ d) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function II(a, b, c, d, x, s, t) {\r\n\t        var n = a + (c ^ (b | ~d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.MD5('message');\r\n\t     *     var hash = CryptoJS.MD5(wordArray);\r\n\t     */\r\n\t    C.MD5 = Hasher._createHelper(MD5);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\r\n\t     */\r\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable object\r\n\t    var W = [];\r\n\r\n\t    /**\r\n\t     * SHA-1 hash algorithm.\r\n\t     */\r\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0x67452301, 0xefcdab89,\r\n\t                0x98badcfe, 0x10325476,\r\n\t                0xc3d2e1f0\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var H = this._hash.words;\r\n\r\n\t            // Working variables\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\t            var e = H[4];\r\n\r\n\t            // Computation\r\n\t            for (var i = 0; i < 80; i++) {\r\n\t                if (i < 16) {\r\n\t                    W[i] = M[offset + i] | 0;\r\n\t                } else {\r\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n\t                    W[i] = (n << 1) | (n >>> 31);\r\n\t                }\r\n\r\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\r\n\t                if (i < 20) {\r\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\r\n\t                } else if (i < 40) {\r\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\r\n\t                } else if (i < 60) {\r\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\r\n\t                } else /* if (i < 80) */ {\r\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\r\n\t                }\r\n\r\n\t                e = d;\r\n\t                d = c;\r\n\t                c = (b << 30) | (b >>> 2);\r\n\t                b = a;\r\n\t                a = t;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t            H[4] = (H[4] + e) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Return final computed hash\r\n\t            return this._hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA1('message');\r\n\t     *     var hash = CryptoJS.SHA1(wordArray);\r\n\t     */\r\n\t    C.SHA1 = Hasher._createHelper(SHA1);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\r\n\t     */\r\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Initialization and round constants tables\r\n\t    var H = [];\r\n\t    var K = [];\r\n\r\n\t    // Compute constants\r\n\t    (function () {\r\n\t        function isPrime(n) {\r\n\t            var sqrtN = Math.sqrt(n);\r\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\r\n\t                if (!(n % factor)) {\r\n\t                    return false;\r\n\t                }\r\n\t            }\r\n\r\n\t            return true;\r\n\t        }\r\n\r\n\t        function getFractionalBits(n) {\r\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\r\n\t        }\r\n\r\n\t        var n = 2;\r\n\t        var nPrime = 0;\r\n\t        while (nPrime < 64) {\r\n\t            if (isPrime(n)) {\r\n\t                if (nPrime < 8) {\r\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\r\n\t                }\r\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\r\n\r\n\t                nPrime++;\r\n\t            }\r\n\r\n\t            n++;\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Reusable object\r\n\t    var W = [];\r\n\r\n\t    /**\r\n\t     * SHA-256 hash algorithm.\r\n\t     */\r\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init(H.slice(0));\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var H = this._hash.words;\r\n\r\n\t            // Working variables\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\t            var e = H[4];\r\n\t            var f = H[5];\r\n\t            var g = H[6];\r\n\t            var h = H[7];\r\n\r\n\t            // Computation\r\n\t            for (var i = 0; i < 64; i++) {\r\n\t                if (i < 16) {\r\n\t                    W[i] = M[offset + i] | 0;\r\n\t                } else {\r\n\t                    var gamma0x = W[i - 15];\r\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\r\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\r\n\t                                   (gamma0x >>> 3);\r\n\r\n\t                    var gamma1x = W[i - 2];\r\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\r\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\r\n\t                                   (gamma1x >>> 10);\r\n\r\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\r\n\t                }\r\n\r\n\t                var ch  = (e & f) ^ (~e & g);\r\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\r\n\r\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\r\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\r\n\r\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\r\n\t                var t2 = sigma0 + maj;\r\n\r\n\t                h = g;\r\n\t                g = f;\r\n\t                f = e;\r\n\t                e = (d + t1) | 0;\r\n\t                d = c;\r\n\t                c = b;\r\n\t                b = a;\r\n\t                a = (t1 + t2) | 0;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t            H[4] = (H[4] + e) | 0;\r\n\t            H[5] = (H[5] + f) | 0;\r\n\t            H[6] = (H[6] + g) | 0;\r\n\t            H[7] = (H[7] + h) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Return final computed hash\r\n\t            return this._hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA256('message');\r\n\t     *     var hash = CryptoJS.SHA256(wordArray);\r\n\t     */\r\n\t    C.SHA256 = Hasher._createHelper(SHA256);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\r\n\t     */\r\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_enc = C.enc;\r\n\r\n\t    /**\r\n\t     * UTF-16 BE encoding strategy.\r\n\t     */\r\n\t    var Utf16BE = C_enc.Utf16 = C_enc.Utf16BE = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-16 BE string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-16 BE string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var utf16Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 2) {\r\n\t                var codePoint = (words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff;\r\n\t                utf16Chars.push(String.fromCharCode(codePoint));\r\n\t            }\r\n\r\n\t            return utf16Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-16 BE string to a word array.\r\n\t         *\r\n\t         * @param {string} utf16Str The UTF-16 BE string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);\r\n\t         */\r\n\t        parse: function (utf16Str) {\r\n\t            // Shortcut\r\n\t            var utf16StrLength = utf16Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < utf16StrLength; i++) {\r\n\t                words[i >>> 1] |= utf16Str.charCodeAt(i) << (16 - (i % 2) * 16);\r\n\t            }\r\n\r\n\t            return WordArray.create(words, utf16StrLength * 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * UTF-16 LE encoding strategy.\r\n\t     */\r\n\t    C_enc.Utf16LE = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-16 LE string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-16 LE string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var utf16Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 2) {\r\n\t                var codePoint = swapEndian((words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff);\r\n\t                utf16Chars.push(String.fromCharCode(codePoint));\r\n\t            }\r\n\r\n\t            return utf16Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-16 LE string to a word array.\r\n\t         *\r\n\t         * @param {string} utf16Str The UTF-16 LE string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);\r\n\t         */\r\n\t        parse: function (utf16Str) {\r\n\t            // Shortcut\r\n\t            var utf16StrLength = utf16Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < utf16StrLength; i++) {\r\n\t                words[i >>> 1] |= swapEndian(utf16Str.charCodeAt(i) << (16 - (i % 2) * 16));\r\n\t            }\r\n\r\n\t            return WordArray.create(words, utf16StrLength * 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    function swapEndian(word) {\r\n\t        return ((word << 8) & 0xff00ff00) | ((word >>> 8) & 0x00ff00ff);\r\n\t    }\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Check if typed arrays are supported\r\n\t    if (typeof ArrayBuffer != 'function') {\r\n\t        return;\r\n\t    }\r\n\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\r\n\t    // Reference original init\r\n\t    var superInit = WordArray.init;\r\n\r\n\t    // Augment WordArray.init to handle typed arrays\r\n\t    var subInit = WordArray.init = function (typedArray) {\r\n\t        // Convert buffers to uint8\r\n\t        if (typedArray instanceof ArrayBuffer) {\r\n\t            typedArray = new Uint8Array(typedArray);\r\n\t        }\r\n\r\n\t        // Convert other array views to uint8\r\n\t        if (\r\n\t            typedArray instanceof Int8Array ||\r\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\r\n\t            typedArray instanceof Int16Array ||\r\n\t            typedArray instanceof Uint16Array ||\r\n\t            typedArray instanceof Int32Array ||\r\n\t            typedArray instanceof Uint32Array ||\r\n\t            typedArray instanceof Float32Array ||\r\n\t            typedArray instanceof Float64Array\r\n\t        ) {\r\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\r\n\t        }\r\n\r\n\t        // Handle Uint8Array\r\n\t        if (typedArray instanceof Uint8Array) {\r\n\t            // Shortcut\r\n\t            var typedArrayByteLength = typedArray.byteLength;\r\n\r\n\t            // Extract bytes\r\n\t            var words = [];\r\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\r\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\r\n\t            }\r\n\r\n\t            // Initialize this word array\r\n\t            superInit.call(this, words, typedArrayByteLength);\r\n\t        } else {\r\n\t            // Else call normal init\r\n\t            superInit.apply(this, arguments);\r\n\t        }\r\n\t    };\r\n\r\n\t    subInit.prototype = WordArray;\r\n\t}());\r\n\r\n\r\n\t/** @preserve\r\n\t(c) 2012 by Cdric Mesnil. All rights reserved.\r\n\r\n\tRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\r\n\r\n\t    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\n\t    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\r\n\r\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants table\r\n\t    var _zl = WordArray.create([\r\n\t        0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\r\n\t        7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\r\n\t        3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\r\n\t        1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\r\n\t        4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13]);\r\n\t    var _zr = WordArray.create([\r\n\t        5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\r\n\t        6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\r\n\t        15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\r\n\t        8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\r\n\t        12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11]);\r\n\t    var _sl = WordArray.create([\r\n\t         11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\r\n\t        7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\r\n\t        11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\r\n\t          11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\r\n\t        9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ]);\r\n\t    var _sr = WordArray.create([\r\n\t        8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\r\n\t        9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\r\n\t        9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\r\n\t        15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\r\n\t        8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ]);\r\n\r\n\t    var _hl =  WordArray.create([ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E]);\r\n\t    var _hr =  WordArray.create([ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000]);\r\n\r\n\t    /**\r\n\t     * RIPEMD160 hash algorithm.\r\n\t     */\r\n\t    var RIPEMD160 = C_algo.RIPEMD160 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash  = WordArray.create([0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                // Shortcuts\r\n\t                var offset_i = offset + i;\r\n\t                var M_offset_i = M[offset_i];\r\n\r\n\t                // Swap\r\n\t                M[offset_i] = (\r\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t            }\r\n\t            // Shortcut\r\n\t            var H  = this._hash.words;\r\n\t            var hl = _hl.words;\r\n\t            var hr = _hr.words;\r\n\t            var zl = _zl.words;\r\n\t            var zr = _zr.words;\r\n\t            var sl = _sl.words;\r\n\t            var sr = _sr.words;\r\n\r\n\t            // Working variables\r\n\t            var al, bl, cl, dl, el;\r\n\t            var ar, br, cr, dr, er;\r\n\r\n\t            ar = al = H[0];\r\n\t            br = bl = H[1];\r\n\t            cr = cl = H[2];\r\n\t            dr = dl = H[3];\r\n\t            er = el = H[4];\r\n\t            // Computation\r\n\t            var t;\r\n\t            for (var i = 0; i < 80; i += 1) {\r\n\t                t = (al +  M[offset+zl[i]])|0;\r\n\t                if (i<16){\r\n\t\t            t +=  f1(bl,cl,dl) + hl[0];\r\n\t                } else if (i<32) {\r\n\t\t            t +=  f2(bl,cl,dl) + hl[1];\r\n\t                } else if (i<48) {\r\n\t\t            t +=  f3(bl,cl,dl) + hl[2];\r\n\t                } else if (i<64) {\r\n\t\t            t +=  f4(bl,cl,dl) + hl[3];\r\n\t                } else {// if (i<80) {\r\n\t\t            t +=  f5(bl,cl,dl) + hl[4];\r\n\t                }\r\n\t                t = t|0;\r\n\t                t =  rotl(t,sl[i]);\r\n\t                t = (t+el)|0;\r\n\t                al = el;\r\n\t                el = dl;\r\n\t                dl = rotl(cl, 10);\r\n\t                cl = bl;\r\n\t                bl = t;\r\n\r\n\t                t = (ar + M[offset+zr[i]])|0;\r\n\t                if (i<16){\r\n\t\t            t +=  f5(br,cr,dr) + hr[0];\r\n\t                } else if (i<32) {\r\n\t\t            t +=  f4(br,cr,dr) + hr[1];\r\n\t                } else if (i<48) {\r\n\t\t            t +=  f3(br,cr,dr) + hr[2];\r\n\t                } else if (i<64) {\r\n\t\t            t +=  f2(br,cr,dr) + hr[3];\r\n\t                } else {// if (i<80) {\r\n\t\t            t +=  f1(br,cr,dr) + hr[4];\r\n\t                }\r\n\t                t = t|0;\r\n\t                t =  rotl(t,sr[i]) ;\r\n\t                t = (t+er)|0;\r\n\t                ar = er;\r\n\t                er = dr;\r\n\t                dr = rotl(cr, 10);\r\n\t                cr = br;\r\n\t                br = t;\r\n\t            }\r\n\t            // Intermediate hash value\r\n\t            t    = (H[1] + cl + dr)|0;\r\n\t            H[1] = (H[2] + dl + er)|0;\r\n\t            H[2] = (H[3] + el + ar)|0;\r\n\t            H[3] = (H[4] + al + br)|0;\r\n\t            H[4] = (H[0] + bl + cr)|0;\r\n\t            H[0] =  t;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\r\n\t                (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\t            data.sigBytes = (dataWords.length + 1) * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var hash = this._hash;\r\n\t            var H = hash.words;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 5; i++) {\r\n\t                // Shortcut\r\n\t                var H_i = H[i];\r\n\r\n\t                // Swap\r\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\r\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\r\n\t    function f1(x, y, z) {\r\n\t        return ((x) ^ (y) ^ (z));\r\n\r\n\t    }\r\n\r\n\t    function f2(x, y, z) {\r\n\t        return (((x)&(y)) | ((~x)&(z)));\r\n\t    }\r\n\r\n\t    function f3(x, y, z) {\r\n\t        return (((x) | (~(y))) ^ (z));\r\n\t    }\r\n\r\n\t    function f4(x, y, z) {\r\n\t        return (((x) & (z)) | ((y)&(~(z))));\r\n\t    }\r\n\r\n\t    function f5(x, y, z) {\r\n\t        return ((x) ^ ((y) |(~(z))));\r\n\r\n\t    }\r\n\r\n\t    function rotl(x,n) {\r\n\t        return (x<<n) | (x>>>(32-n));\r\n\t    }\r\n\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.RIPEMD160('message');\r\n\t     *     var hash = CryptoJS.RIPEMD160(wordArray);\r\n\t     */\r\n\t    C.RIPEMD160 = Hasher._createHelper(RIPEMD160);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacRIPEMD160(message, key);\r\n\t     */\r\n\t    C.HmacRIPEMD160 = Hasher._createHmacHelper(RIPEMD160);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var C_enc = C.enc;\r\n\t    var Utf8 = C_enc.Utf8;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    /**\r\n\t     * HMAC algorithm.\r\n\t     */\r\n\t    var HMAC = C_algo.HMAC = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created HMAC.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hash algorithm to use.\r\n\t         * @param {WordArray|string} key The secret key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\r\n\t         */\r\n\t        init: function (hasher, key) {\r\n\t            // Init hasher\r\n\t            hasher = this._hasher = new hasher.init();\r\n\r\n\t            // Convert string to WordArray, else assume WordArray already\r\n\t            if (typeof key == 'string') {\r\n\t                key = Utf8.parse(key);\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var hasherBlockSize = hasher.blockSize;\r\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\r\n\r\n\t            // Allow arbitrary length keys\r\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\r\n\t                key = hasher.finalize(key);\r\n\t            }\r\n\r\n\t            // Clamp excess bits\r\n\t            key.clamp();\r\n\r\n\t            // Clone key for inner and outer pads\r\n\t            var oKey = this._oKey = key.clone();\r\n\t            var iKey = this._iKey = key.clone();\r\n\r\n\t            // Shortcuts\r\n\t            var oKeyWords = oKey.words;\r\n\t            var iKeyWords = iKey.words;\r\n\r\n\t            // XOR keys with pad constants\r\n\t            for (var i = 0; i < hasherBlockSize; i++) {\r\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\r\n\t                iKeyWords[i] ^= 0x36363636;\r\n\t            }\r\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this HMAC to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hmacHasher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Shortcut\r\n\t            var hasher = this._hasher;\r\n\r\n\t            // Reset\r\n\t            hasher.reset();\r\n\t            hasher.update(this._iKey);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Updates this HMAC with a message.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate The message to append.\r\n\t         *\r\n\t         * @return {HMAC} This HMAC instance.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hmacHasher.update('message');\r\n\t         *     hmacHasher.update(wordArray);\r\n\t         */\r\n\t        update: function (messageUpdate) {\r\n\t            this._hasher.update(messageUpdate);\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the HMAC computation.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t         *\r\n\t         * @return {WordArray} The HMAC.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hmac = hmacHasher.finalize();\r\n\t         *     var hmac = hmacHasher.finalize('message');\r\n\t         *     var hmac = hmacHasher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (messageUpdate) {\r\n\t            // Shortcut\r\n\t            var hasher = this._hasher;\r\n\r\n\t            // Compute HMAC\r\n\t            var innerHash = hasher.finalize(messageUpdate);\r\n\t            hasher.reset();\r\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\r\n\r\n\t            return hmac;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA1 = C_algo.SHA1;\r\n\t    var HMAC = C_algo.HMAC;\r\n\r\n\t    /**\r\n\t     * Password-Based Key Derivation Function 2 algorithm.\r\n\t     */\r\n\t    var PBKDF2 = C_algo.PBKDF2 = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\r\n\t         * @property {Hasher} hasher The hasher to use. Default: SHA1\r\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            keySize: 128/32,\r\n\t            hasher: SHA1,\r\n\t            iterations: 1\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created key derivation function.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create();\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Computes the Password-Based Key Derivation Function 2.\r\n\t         *\r\n\t         * @param {WordArray|string} password The password.\r\n\t         * @param {WordArray|string} salt A salt.\r\n\t         *\r\n\t         * @return {WordArray} The derived key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var key = kdf.compute(password, salt);\r\n\t         */\r\n\t        compute: function (password, salt) {\r\n\t            // Shortcut\r\n\t            var cfg = this.cfg;\r\n\r\n\t            // Init HMAC\r\n\t            var hmac = HMAC.create(cfg.hasher, password);\r\n\r\n\t            // Initial values\r\n\t            var derivedKey = WordArray.create();\r\n\t            var blockIndex = WordArray.create([0x00000001]);\r\n\r\n\t            // Shortcuts\r\n\t            var derivedKeyWords = derivedKey.words;\r\n\t            var blockIndexWords = blockIndex.words;\r\n\t            var keySize = cfg.keySize;\r\n\t            var iterations = cfg.iterations;\r\n\r\n\t            // Generate key\r\n\t            while (derivedKeyWords.length < keySize) {\r\n\t                var block = hmac.update(salt).finalize(blockIndex);\r\n\t                hmac.reset();\r\n\r\n\t                // Shortcuts\r\n\t                var blockWords = block.words;\r\n\t                var blockWordsLength = blockWords.length;\r\n\r\n\t                // Iterations\r\n\t                var intermediate = block;\r\n\t                for (var i = 1; i < iterations; i++) {\r\n\t                    intermediate = hmac.finalize(intermediate);\r\n\t                    hmac.reset();\r\n\r\n\t                    // Shortcut\r\n\t                    var intermediateWords = intermediate.words;\r\n\r\n\t                    // XOR intermediate with block\r\n\t                    for (var j = 0; j < blockWordsLength; j++) {\r\n\t                        blockWords[j] ^= intermediateWords[j];\r\n\t                    }\r\n\t                }\r\n\r\n\t                derivedKey.concat(block);\r\n\t                blockIndexWords[0]++;\r\n\t            }\r\n\t            derivedKey.sigBytes = keySize * 4;\r\n\r\n\t            return derivedKey;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Computes the Password-Based Key Derivation Function 2.\r\n\t     *\r\n\t     * @param {WordArray|string} password The password.\r\n\t     * @param {WordArray|string} salt A salt.\r\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\r\n\t     *\r\n\t     * @return {WordArray} The derived key.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt);\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8 });\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8, iterations: 1000 });\r\n\t     */\r\n\t    C.PBKDF2 = function (password, salt, cfg) {\r\n\t        return PBKDF2.create(cfg).compute(password, salt);\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var MD5 = C_algo.MD5;\r\n\r\n\t    /**\r\n\t     * This key derivation function is meant to conform with EVP_BytesToKey.\r\n\t     * www.openssl.org/docs/crypto/EVP_BytesToKey.html\r\n\t     */\r\n\t    var EvpKDF = C_algo.EvpKDF = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\r\n\t         * @property {Hasher} hasher The hash algorithm to use. Default: MD5\r\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            keySize: 128/32,\r\n\t            hasher: MD5,\r\n\t            iterations: 1\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created key derivation function.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create();\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Derives a key from a password.\r\n\t         *\r\n\t         * @param {WordArray|string} password The password.\r\n\t         * @param {WordArray|string} salt A salt.\r\n\t         *\r\n\t         * @return {WordArray} The derived key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var key = kdf.compute(password, salt);\r\n\t         */\r\n\t        compute: function (password, salt) {\r\n\t            var block;\r\n\r\n\t            // Shortcut\r\n\t            var cfg = this.cfg;\r\n\r\n\t            // Init hasher\r\n\t            var hasher = cfg.hasher.create();\r\n\r\n\t            // Initial values\r\n\t            var derivedKey = WordArray.create();\r\n\r\n\t            // Shortcuts\r\n\t            var derivedKeyWords = derivedKey.words;\r\n\t            var keySize = cfg.keySize;\r\n\t            var iterations = cfg.iterations;\r\n\r\n\t            // Generate key\r\n\t            while (derivedKeyWords.length < keySize) {\r\n\t                if (block) {\r\n\t                    hasher.update(block);\r\n\t                }\r\n\t                block = hasher.update(password).finalize(salt);\r\n\t                hasher.reset();\r\n\r\n\t                // Iterations\r\n\t                for (var i = 1; i < iterations; i++) {\r\n\t                    block = hasher.finalize(block);\r\n\t                    hasher.reset();\r\n\t                }\r\n\r\n\t                derivedKey.concat(block);\r\n\t            }\r\n\t            derivedKey.sigBytes = keySize * 4;\r\n\r\n\t            return derivedKey;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Derives a key from a password.\r\n\t     *\r\n\t     * @param {WordArray|string} password The password.\r\n\t     * @param {WordArray|string} salt A salt.\r\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\r\n\t     *\r\n\t     * @return {WordArray} The derived key.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt);\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });\r\n\t     */\r\n\t    C.EvpKDF = function (password, salt, cfg) {\r\n\t        return EvpKDF.create(cfg).compute(password, salt);\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA256 = C_algo.SHA256;\r\n\r\n\t    /**\r\n\t     * SHA-224 hash algorithm.\r\n\t     */\r\n\t    var SHA224 = C_algo.SHA224 = SHA256.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\r\n\t                0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var hash = SHA256._doFinalize.call(this);\r\n\r\n\t            hash.sigBytes -= 4;\r\n\r\n\t            return hash;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA224('message');\r\n\t     *     var hash = CryptoJS.SHA224(wordArray);\r\n\t     */\r\n\t    C.SHA224 = SHA256._createHelper(SHA224);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA224(message, key);\r\n\t     */\r\n\t    C.HmacSHA224 = SHA256._createHmacHelper(SHA224);\r\n\t}());\r\n\r\n\r\n\t(function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var X32WordArray = C_lib.WordArray;\r\n\r\n\t    /**\r\n\t     * x64 namespace.\r\n\t     */\r\n\t    var C_x64 = C.x64 = {};\r\n\r\n\t    /**\r\n\t     * A 64-bit word.\r\n\t     */\r\n\t    var X64Word = C_x64.Word = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created 64-bit word.\r\n\t         *\r\n\t         * @param {number} high The high 32 bits.\r\n\t         * @param {number} low The low 32 bits.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\r\n\t         */\r\n\t        init: function (high, low) {\r\n\t            this.high = high;\r\n\t            this.low = low;\r\n\t        }\r\n\r\n\t        /**\r\n\t         * Bitwise NOTs this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after negating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var negated = x64Word.not();\r\n\t         */\r\n\t        // not: function () {\r\n\t            // var high = ~this.high;\r\n\t            // var low = ~this.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise ANDs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to AND with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after ANDing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var anded = x64Word.and(anotherX64Word);\r\n\t         */\r\n\t        // and: function (word) {\r\n\t            // var high = this.high & word.high;\r\n\t            // var low = this.low & word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise ORs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to OR with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after ORing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ored = x64Word.or(anotherX64Word);\r\n\t         */\r\n\t        // or: function (word) {\r\n\t            // var high = this.high | word.high;\r\n\t            // var low = this.low | word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise XORs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after XORing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var xored = x64Word.xor(anotherX64Word);\r\n\t         */\r\n\t        // xor: function (word) {\r\n\t            // var high = this.high ^ word.high;\r\n\t            // var low = this.low ^ word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Shifts this word n bits to the left.\r\n\t         *\r\n\t         * @param {number} n The number of bits to shift.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after shifting.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var shifted = x64Word.shiftL(25);\r\n\t         */\r\n\t        // shiftL: function (n) {\r\n\t            // if (n < 32) {\r\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\r\n\t                // var low = this.low << n;\r\n\t            // } else {\r\n\t                // var high = this.low << (n - 32);\r\n\t                // var low = 0;\r\n\t            // }\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Shifts this word n bits to the right.\r\n\t         *\r\n\t         * @param {number} n The number of bits to shift.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after shifting.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var shifted = x64Word.shiftR(7);\r\n\t         */\r\n\t        // shiftR: function (n) {\r\n\t            // if (n < 32) {\r\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\r\n\t                // var high = this.high >>> n;\r\n\t            // } else {\r\n\t                // var low = this.high >>> (n - 32);\r\n\t                // var high = 0;\r\n\t            // }\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Rotates this word n bits to the left.\r\n\t         *\r\n\t         * @param {number} n The number of bits to rotate.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after rotating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var rotated = x64Word.rotL(25);\r\n\t         */\r\n\t        // rotL: function (n) {\r\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Rotates this word n bits to the right.\r\n\t         *\r\n\t         * @param {number} n The number of bits to rotate.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after rotating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var rotated = x64Word.rotR(7);\r\n\t         */\r\n\t        // rotR: function (n) {\r\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Adds this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to add with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after adding.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var added = x64Word.add(anotherX64Word);\r\n\t         */\r\n\t        // add: function (word) {\r\n\t            // var low = (this.low + word.low) | 0;\r\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\r\n\t            // var high = (this.high + word.high + carry) | 0;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * An array of 64-bit words.\r\n\t     *\r\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\r\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\r\n\t     */\r\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created word array.\r\n\t         *\r\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\r\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\r\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\r\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\r\n\t         *     ]);\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\r\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\r\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\r\n\t         *     ], 10);\r\n\t         */\r\n\t        init: function (words, sigBytes) {\r\n\t            words = this.words = words || [];\r\n\r\n\t            if (sigBytes != undefined) {\r\n\t                this.sigBytes = sigBytes;\r\n\t            } else {\r\n\t                this.sigBytes = words.length * 8;\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this 64-bit word array to a 32-bit word array.\r\n\t         *\r\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var x32WordArray = x64WordArray.toX32();\r\n\t         */\r\n\t        toX32: function () {\r\n\t            // Shortcuts\r\n\t            var x64Words = this.words;\r\n\t            var x64WordsLength = x64Words.length;\r\n\r\n\t            // Convert\r\n\t            var x32Words = [];\r\n\t            for (var i = 0; i < x64WordsLength; i++) {\r\n\t                var x64Word = x64Words[i];\r\n\t                x32Words.push(x64Word.high);\r\n\t                x32Words.push(x64Word.low);\r\n\t            }\r\n\r\n\t            return X32WordArray.create(x32Words, this.sigBytes);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this word array.\r\n\t         *\r\n\t         * @return {X64WordArray} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = x64WordArray.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\r\n\t            // Clone \"words\" array\r\n\t            var words = clone.words = this.words.slice(0);\r\n\r\n\t            // Clone each X64Word object\r\n\t            var wordsLength = words.length;\r\n\t            for (var i = 0; i < wordsLength; i++) {\r\n\t                words[i] = words[i].clone();\r\n\t            }\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants tables\r\n\t    var RHO_OFFSETS = [];\r\n\t    var PI_INDEXES  = [];\r\n\t    var ROUND_CONSTANTS = [];\r\n\r\n\t    // Compute Constants\r\n\t    (function () {\r\n\t        // Compute rho offset constants\r\n\t        var x = 1, y = 0;\r\n\t        for (var t = 0; t < 24; t++) {\r\n\t            RHO_OFFSETS[x + 5 * y] = ((t + 1) * (t + 2) / 2) % 64;\r\n\r\n\t            var newX = y % 5;\r\n\t            var newY = (2 * x + 3 * y) % 5;\r\n\t            x = newX;\r\n\t            y = newY;\r\n\t        }\r\n\r\n\t        // Compute pi index constants\r\n\t        for (var x = 0; x < 5; x++) {\r\n\t            for (var y = 0; y < 5; y++) {\r\n\t                PI_INDEXES[x + 5 * y] = y + ((2 * x + 3 * y) % 5) * 5;\r\n\t            }\r\n\t        }\r\n\r\n\t        // Compute round constants\r\n\t        var LFSR = 0x01;\r\n\t        for (var i = 0; i < 24; i++) {\r\n\t            var roundConstantMsw = 0;\r\n\t            var roundConstantLsw = 0;\r\n\r\n\t            for (var j = 0; j < 7; j++) {\r\n\t                if (LFSR & 0x01) {\r\n\t                    var bitPosition = (1 << j) - 1;\r\n\t                    if (bitPosition < 32) {\r\n\t                        roundConstantLsw ^= 1 << bitPosition;\r\n\t                    } else /* if (bitPosition >= 32) */ {\r\n\t                        roundConstantMsw ^= 1 << (bitPosition - 32);\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Compute next LFSR\r\n\t                if (LFSR & 0x80) {\r\n\t                    // Primitive polynomial over GF(2): x^8 + x^6 + x^5 + x^4 + 1\r\n\t                    LFSR = (LFSR << 1) ^ 0x71;\r\n\t                } else {\r\n\t                    LFSR <<= 1;\r\n\t                }\r\n\t            }\r\n\r\n\t            ROUND_CONSTANTS[i] = X64Word.create(roundConstantMsw, roundConstantLsw);\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Reusable objects for temporary values\r\n\t    var T = [];\r\n\t    (function () {\r\n\t        for (var i = 0; i < 25; i++) {\r\n\t            T[i] = X64Word.create();\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * SHA-3 hash algorithm.\r\n\t     */\r\n\t    var SHA3 = C_algo.SHA3 = Hasher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} outputLength\r\n\t         *   The desired number of bits in the output hash.\r\n\t         *   Only values permitted are: 224, 256, 384, 512.\r\n\t         *   Default: 512\r\n\t         */\r\n\t        cfg: Hasher.cfg.extend({\r\n\t            outputLength: 512\r\n\t        }),\r\n\r\n\t        _doReset: function () {\r\n\t            var state = this._state = []\r\n\t            for (var i = 0; i < 25; i++) {\r\n\t                state[i] = new X64Word.init();\r\n\t            }\r\n\r\n\t            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcuts\r\n\t            var state = this._state;\r\n\t            var nBlockSizeLanes = this.blockSize / 2;\r\n\r\n\t            // Absorb\r\n\t            for (var i = 0; i < nBlockSizeLanes; i++) {\r\n\t                // Shortcuts\r\n\t                var M2i  = M[offset + 2 * i];\r\n\t                var M2i1 = M[offset + 2 * i + 1];\r\n\r\n\t                // Swap endian\r\n\t                M2i = (\r\n\t                    (((M2i << 8)  | (M2i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M2i << 24) | (M2i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t                M2i1 = (\r\n\t                    (((M2i1 << 8)  | (M2i1 >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M2i1 << 24) | (M2i1 >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\r\n\t                // Absorb message into state\r\n\t                var lane = state[i];\r\n\t                lane.high ^= M2i1;\r\n\t                lane.low  ^= M2i;\r\n\t            }\r\n\r\n\t            // Rounds\r\n\t            for (var round = 0; round < 24; round++) {\r\n\t                // Theta\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    // Mix column lanes\r\n\t                    var tMsw = 0, tLsw = 0;\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        var lane = state[x + 5 * y];\r\n\t                        tMsw ^= lane.high;\r\n\t                        tLsw ^= lane.low;\r\n\t                    }\r\n\r\n\t                    // Temporary values\r\n\t                    var Tx = T[x];\r\n\t                    Tx.high = tMsw;\r\n\t                    Tx.low  = tLsw;\r\n\t                }\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    // Shortcuts\r\n\t                    var Tx4 = T[(x + 4) % 5];\r\n\t                    var Tx1 = T[(x + 1) % 5];\r\n\t                    var Tx1Msw = Tx1.high;\r\n\t                    var Tx1Lsw = Tx1.low;\r\n\r\n\t                    // Mix surrounding columns\r\n\t                    var tMsw = Tx4.high ^ ((Tx1Msw << 1) | (Tx1Lsw >>> 31));\r\n\t                    var tLsw = Tx4.low  ^ ((Tx1Lsw << 1) | (Tx1Msw >>> 31));\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        var lane = state[x + 5 * y];\r\n\t                        lane.high ^= tMsw;\r\n\t                        lane.low  ^= tLsw;\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Rho Pi\r\n\t                for (var laneIndex = 1; laneIndex < 25; laneIndex++) {\r\n\t                    var tMsw;\r\n\t                    var tLsw;\r\n\r\n\t                    // Shortcuts\r\n\t                    var lane = state[laneIndex];\r\n\t                    var laneMsw = lane.high;\r\n\t                    var laneLsw = lane.low;\r\n\t                    var rhoOffset = RHO_OFFSETS[laneIndex];\r\n\r\n\t                    // Rotate lanes\r\n\t                    if (rhoOffset < 32) {\r\n\t                        tMsw = (laneMsw << rhoOffset) | (laneLsw >>> (32 - rhoOffset));\r\n\t                        tLsw = (laneLsw << rhoOffset) | (laneMsw >>> (32 - rhoOffset));\r\n\t                    } else /* if (rhoOffset >= 32) */ {\r\n\t                        tMsw = (laneLsw << (rhoOffset - 32)) | (laneMsw >>> (64 - rhoOffset));\r\n\t                        tLsw = (laneMsw << (rhoOffset - 32)) | (laneLsw >>> (64 - rhoOffset));\r\n\t                    }\r\n\r\n\t                    // Transpose lanes\r\n\t                    var TPiLane = T[PI_INDEXES[laneIndex]];\r\n\t                    TPiLane.high = tMsw;\r\n\t                    TPiLane.low  = tLsw;\r\n\t                }\r\n\r\n\t                // Rho pi at x = y = 0\r\n\t                var T0 = T[0];\r\n\t                var state0 = state[0];\r\n\t                T0.high = state0.high;\r\n\t                T0.low  = state0.low;\r\n\r\n\t                // Chi\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        // Shortcuts\r\n\t                        var laneIndex = x + 5 * y;\r\n\t                        var lane = state[laneIndex];\r\n\t                        var TLane = T[laneIndex];\r\n\t                        var Tx1Lane = T[((x + 1) % 5) + 5 * y];\r\n\t                        var Tx2Lane = T[((x + 2) % 5) + 5 * y];\r\n\r\n\t                        // Mix rows\r\n\t                        lane.high = TLane.high ^ (~Tx1Lane.high & Tx2Lane.high);\r\n\t                        lane.low  = TLane.low  ^ (~Tx1Lane.low  & Tx2Lane.low);\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Iota\r\n\t                var lane = state[0];\r\n\t                var roundConstant = ROUND_CONSTANTS[round];\r\n\t                lane.high ^= roundConstant.high;\r\n\t                lane.low  ^= roundConstant.low;\r\n\t            }\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\t            var blockSizeBits = this.blockSize * 32;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x1 << (24 - nBitsLeft % 32);\r\n\t            dataWords[((Math.ceil((nBitsLeft + 1) / blockSizeBits) * blockSizeBits) >>> 5) - 1] |= 0x80;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var state = this._state;\r\n\t            var outputLengthBytes = this.cfg.outputLength / 8;\r\n\t            var outputLengthLanes = outputLengthBytes / 8;\r\n\r\n\t            // Squeeze\r\n\t            var hashWords = [];\r\n\t            for (var i = 0; i < outputLengthLanes; i++) {\r\n\t                // Shortcuts\r\n\t                var lane = state[i];\r\n\t                var laneMsw = lane.high;\r\n\t                var laneLsw = lane.low;\r\n\r\n\t                // Swap endian\r\n\t                laneMsw = (\r\n\t                    (((laneMsw << 8)  | (laneMsw >>> 24)) & 0x00ff00ff) |\r\n\t                    (((laneMsw << 24) | (laneMsw >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t                laneLsw = (\r\n\t                    (((laneLsw << 8)  | (laneLsw >>> 24)) & 0x00ff00ff) |\r\n\t                    (((laneLsw << 24) | (laneLsw >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\r\n\t                // Squeeze state to retrieve hash\r\n\t                hashWords.push(laneLsw);\r\n\t                hashWords.push(laneMsw);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return new WordArray.init(hashWords, outputLengthBytes);\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\r\n\t            var state = clone._state = this._state.slice(0);\r\n\t            for (var i = 0; i < 25; i++) {\r\n\t                state[i] = state[i].clone();\r\n\t            }\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA3('message');\r\n\t     *     var hash = CryptoJS.SHA3(wordArray);\r\n\t     */\r\n\t    C.SHA3 = Hasher._createHelper(SHA3);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA3(message, key);\r\n\t     */\r\n\t    C.HmacSHA3 = Hasher._createHmacHelper(SHA3);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var X64WordArray = C_x64.WordArray;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    function X64Word_create() {\r\n\t        return X64Word.create.apply(X64Word, arguments);\r\n\t    }\r\n\r\n\t    // Constants\r\n\t    var K = [\r\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\r\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\r\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\r\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\r\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\r\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\r\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\r\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\r\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\r\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\r\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\r\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\r\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\r\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\r\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\r\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\r\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\r\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\r\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\r\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\r\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\r\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\r\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\r\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\r\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\r\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\r\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\r\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\r\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\r\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\r\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\r\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\r\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\r\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\r\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\r\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\r\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\r\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\r\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\r\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\r\n\t    ];\r\n\r\n\t    // Reusable objects\r\n\t    var W = [];\r\n\t    (function () {\r\n\t        for (var i = 0; i < 80; i++) {\r\n\t            W[i] = X64Word_create();\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * SHA-512 hash algorithm.\r\n\t     */\r\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new X64WordArray.init([\r\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\r\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\r\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\r\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcuts\r\n\t            var H = this._hash.words;\r\n\r\n\t            var H0 = H[0];\r\n\t            var H1 = H[1];\r\n\t            var H2 = H[2];\r\n\t            var H3 = H[3];\r\n\t            var H4 = H[4];\r\n\t            var H5 = H[5];\r\n\t            var H6 = H[6];\r\n\t            var H7 = H[7];\r\n\r\n\t            var H0h = H0.high;\r\n\t            var H0l = H0.low;\r\n\t            var H1h = H1.high;\r\n\t            var H1l = H1.low;\r\n\t            var H2h = H2.high;\r\n\t            var H2l = H2.low;\r\n\t            var H3h = H3.high;\r\n\t            var H3l = H3.low;\r\n\t            var H4h = H4.high;\r\n\t            var H4l = H4.low;\r\n\t            var H5h = H5.high;\r\n\t            var H5l = H5.low;\r\n\t            var H6h = H6.high;\r\n\t            var H6l = H6.low;\r\n\t            var H7h = H7.high;\r\n\t            var H7l = H7.low;\r\n\r\n\t            // Working variables\r\n\t            var ah = H0h;\r\n\t            var al = H0l;\r\n\t            var bh = H1h;\r\n\t            var bl = H1l;\r\n\t            var ch = H2h;\r\n\t            var cl = H2l;\r\n\t            var dh = H3h;\r\n\t            var dl = H3l;\r\n\t            var eh = H4h;\r\n\t            var el = H4l;\r\n\t            var fh = H5h;\r\n\t            var fl = H5l;\r\n\t            var gh = H6h;\r\n\t            var gl = H6l;\r\n\t            var hh = H7h;\r\n\t            var hl = H7l;\r\n\r\n\t            // Rounds\r\n\t            for (var i = 0; i < 80; i++) {\r\n\t                var Wil;\r\n\t                var Wih;\r\n\r\n\t                // Shortcut\r\n\t                var Wi = W[i];\r\n\r\n\t                // Extend message\r\n\t                if (i < 16) {\r\n\t                    Wih = Wi.high = M[offset + i * 2]     | 0;\r\n\t                    Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\r\n\t                } else {\r\n\t                    // Gamma0\r\n\t                    var gamma0x  = W[i - 15];\r\n\t                    var gamma0xh = gamma0x.high;\r\n\t                    var gamma0xl = gamma0x.low;\r\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\r\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\r\n\r\n\t                    // Gamma1\r\n\t                    var gamma1x  = W[i - 2];\r\n\t                    var gamma1xh = gamma1x.high;\r\n\t                    var gamma1xl = gamma1x.low;\r\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\r\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\r\n\r\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\r\n\t                    var Wi7  = W[i - 7];\r\n\t                    var Wi7h = Wi7.high;\r\n\t                    var Wi7l = Wi7.low;\r\n\r\n\t                    var Wi16  = W[i - 16];\r\n\t                    var Wi16h = Wi16.high;\r\n\t                    var Wi16l = Wi16.low;\r\n\r\n\t                    Wil = gamma0l + Wi7l;\r\n\t                    Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\r\n\t                    Wil = Wil + gamma1l;\r\n\t                    Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\r\n\t                    Wil = Wil + Wi16l;\r\n\t                    Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\r\n\r\n\t                    Wi.high = Wih;\r\n\t                    Wi.low  = Wil;\r\n\t                }\r\n\r\n\t                var chh  = (eh & fh) ^ (~eh & gh);\r\n\t                var chl  = (el & fl) ^ (~el & gl);\r\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\r\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\r\n\r\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\r\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\r\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\r\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\r\n\r\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\r\n\t                var Ki  = K[i];\r\n\t                var Kih = Ki.high;\r\n\t                var Kil = Ki.low;\r\n\r\n\t                var t1l = hl + sigma1l;\r\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + chl;\r\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + Kil;\r\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + Wil;\r\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\r\n\r\n\t                // t2 = sigma0 + maj\r\n\t                var t2l = sigma0l + majl;\r\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\r\n\r\n\t                // Update working variables\r\n\t                hh = gh;\r\n\t                hl = gl;\r\n\t                gh = fh;\r\n\t                gl = fl;\r\n\t                fh = eh;\r\n\t                fl = el;\r\n\t                el = (dl + t1l) | 0;\r\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\r\n\t                dh = ch;\r\n\t                dl = cl;\r\n\t                ch = bh;\r\n\t                cl = bl;\r\n\t                bh = ah;\r\n\t                bl = al;\r\n\t                al = (t1l + t2l) | 0;\r\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H0l = H0.low  = (H0l + al);\r\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\r\n\t            H1l = H1.low  = (H1l + bl);\r\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\r\n\t            H2l = H2.low  = (H2l + cl);\r\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\r\n\t            H3l = H3.low  = (H3l + dl);\r\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\r\n\t            H4l = H4.low  = (H4l + el);\r\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\r\n\t            H5l = H5.low  = (H5l + fl);\r\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\r\n\t            H6l = H6.low  = (H6l + gl);\r\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\r\n\t            H7l = H7.low  = (H7l + hl);\r\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Convert hash to 32-bit word array before returning\r\n\t            var hash = this._hash.toX32();\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        blockSize: 1024/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA512('message');\r\n\t     *     var hash = CryptoJS.SHA512(wordArray);\r\n\t     */\r\n\t    C.SHA512 = Hasher._createHelper(SHA512);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\r\n\t     */\r\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var X64WordArray = C_x64.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA512 = C_algo.SHA512;\r\n\r\n\t    /**\r\n\t     * SHA-384 hash algorithm.\r\n\t     */\r\n\t    var SHA384 = C_algo.SHA384 = SHA512.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new X64WordArray.init([\r\n\t                new X64Word.init(0xcbbb9d5d, 0xc1059ed8), new X64Word.init(0x629a292a, 0x367cd507),\r\n\t                new X64Word.init(0x9159015a, 0x3070dd17), new X64Word.init(0x152fecd8, 0xf70e5939),\r\n\t                new X64Word.init(0x67332667, 0xffc00b31), new X64Word.init(0x8eb44a87, 0x68581511),\r\n\t                new X64Word.init(0xdb0c2e0d, 0x64f98fa7), new X64Word.init(0x47b5481d, 0xbefa4fa4)\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var hash = SHA512._doFinalize.call(this);\r\n\r\n\t            hash.sigBytes -= 16;\r\n\r\n\t            return hash;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA384('message');\r\n\t     *     var hash = CryptoJS.SHA384(wordArray);\r\n\t     */\r\n\t    C.SHA384 = SHA512._createHelper(SHA384);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA384(message, key);\r\n\t     */\r\n\t    C.HmacSHA384 = SHA512._createHmacHelper(SHA384);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Cipher core components.\r\n\t */\r\n\tCryptoJS.lib.Cipher || (function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;\r\n\t    var C_enc = C.enc;\r\n\t    var Utf8 = C_enc.Utf8;\r\n\t    var Base64 = C_enc.Base64;\r\n\t    var C_algo = C.algo;\r\n\t    var EvpKDF = C_algo.EvpKDF;\r\n\r\n\t    /**\r\n\t     * Abstract base cipher template.\r\n\t     *\r\n\t     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)\r\n\t     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)\r\n\t     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.\r\n\t     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.\r\n\t     */\r\n\t    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {WordArray} iv The IV to use for this operation.\r\n\t         */\r\n\t        cfg: Base.extend(),\r\n\r\n\t        /**\r\n\t         * Creates this cipher in encryption mode.\r\n\t         *\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {Cipher} A cipher instance.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        createEncryptor: function (key, cfg) {\r\n\t            return this.create(this._ENC_XFORM_MODE, key, cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates this cipher in decryption mode.\r\n\t         *\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {Cipher} A cipher instance.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        createDecryptor: function (key, cfg) {\r\n\t            return this.create(this._DEC_XFORM_MODE, key, cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Initializes a newly created cipher.\r\n\t         *\r\n\t         * @param {number} xformMode Either the encryption or decryption transormation mode constant.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        init: function (xformMode, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Store transform mode and key\r\n\t            this._xformMode = xformMode;\r\n\t            this._key = key;\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this cipher to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     cipher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Reset data buffer\r\n\t            BufferedBlockAlgorithm.reset.call(this);\r\n\r\n\t            // Perform concrete-cipher logic\r\n\t            this._doReset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Adds data to be encrypted or decrypted.\r\n\t         *\r\n\t         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.\r\n\t         *\r\n\t         * @return {WordArray} The data after processing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var encrypted = cipher.process('data');\r\n\t         *     var encrypted = cipher.process(wordArray);\r\n\t         */\r\n\t        process: function (dataUpdate) {\r\n\t            // Append\r\n\t            this._append(dataUpdate);\r\n\r\n\t            // Process available blocks\r\n\t            return this._process();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the encryption or decryption process.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.\r\n\t         *\r\n\t         * @return {WordArray} The data after final processing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var encrypted = cipher.finalize();\r\n\t         *     var encrypted = cipher.finalize('data');\r\n\t         *     var encrypted = cipher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (dataUpdate) {\r\n\t            // Final data update\r\n\t            if (dataUpdate) {\r\n\t                this._append(dataUpdate);\r\n\t            }\r\n\r\n\t            // Perform concrete-cipher logic\r\n\t            var finalProcessedData = this._doFinalize();\r\n\r\n\t            return finalProcessedData;\r\n\t        },\r\n\r\n\t        keySize: 128/32,\r\n\r\n\t        ivSize: 128/32,\r\n\r\n\t        _ENC_XFORM_MODE: 1,\r\n\r\n\t        _DEC_XFORM_MODE: 2,\r\n\r\n\t        /**\r\n\t         * Creates shortcut functions to a cipher's object interface.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher to create a helper for.\r\n\t         *\r\n\t         * @return {Object} An object with encrypt and decrypt shortcut functions.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);\r\n\t         */\r\n\t        _createHelper: (function () {\r\n\t            function selectCipherStrategy(key) {\r\n\t                if (typeof key == 'string') {\r\n\t                    return PasswordBasedCipher;\r\n\t                } else {\r\n\t                    return SerializableCipher;\r\n\t                }\r\n\t            }\r\n\r\n\t            return function (cipher) {\r\n\t                return {\r\n\t                    encrypt: function (message, key, cfg) {\r\n\t                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);\r\n\t                    },\r\n\r\n\t                    decrypt: function (ciphertext, key, cfg) {\r\n\t                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);\r\n\t                    }\r\n\t                };\r\n\t            };\r\n\t        }())\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Abstract base stream cipher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)\r\n\t     */\r\n\t    var StreamCipher = C_lib.StreamCipher = Cipher.extend({\r\n\t        _doFinalize: function () {\r\n\t            // Process partial blocks\r\n\t            var finalProcessedBlocks = this._process(!!'flush');\r\n\r\n\t            return finalProcessedBlocks;\r\n\t        },\r\n\r\n\t        blockSize: 1\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Mode namespace.\r\n\t     */\r\n\t    var C_mode = C.mode = {};\r\n\r\n\t    /**\r\n\t     * Abstract base block cipher mode template.\r\n\t     */\r\n\t    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({\r\n\t        /**\r\n\t         * Creates this mode for encryption.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);\r\n\t         */\r\n\t        createEncryptor: function (cipher, iv) {\r\n\t            return this.Encryptor.create(cipher, iv);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates this mode for decryption.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);\r\n\t         */\r\n\t        createDecryptor: function (cipher, iv) {\r\n\t            return this.Decryptor.create(cipher, iv);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Initializes a newly created mode.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);\r\n\t         */\r\n\t        init: function (cipher, iv) {\r\n\t            this._cipher = cipher;\r\n\t            this._iv = iv;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Cipher Block Chaining mode.\r\n\t     */\r\n\t    var CBC = C_mode.CBC = (function () {\r\n\t        /**\r\n\t         * Abstract base CBC mode.\r\n\t         */\r\n\t        var CBC = BlockCipherMode.extend();\r\n\r\n\t        /**\r\n\t         * CBC encryptor.\r\n\t         */\r\n\t        CBC.Encryptor = CBC.extend({\r\n\t            /**\r\n\t             * Processes the data block at offset.\r\n\t             *\r\n\t             * @param {Array} words The data words to operate on.\r\n\t             * @param {number} offset The offset where the block starts.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     mode.processBlock(data.words, offset);\r\n\t             */\r\n\t            processBlock: function (words, offset) {\r\n\t                // Shortcuts\r\n\t                var cipher = this._cipher;\r\n\t                var blockSize = cipher.blockSize;\r\n\r\n\t                // XOR and encrypt\r\n\t                xorBlock.call(this, words, offset, blockSize);\r\n\t                cipher.encryptBlock(words, offset);\r\n\r\n\t                // Remember this block to use with next block\r\n\t                this._prevBlock = words.slice(offset, offset + blockSize);\r\n\t            }\r\n\t        });\r\n\r\n\t        /**\r\n\t         * CBC decryptor.\r\n\t         */\r\n\t        CBC.Decryptor = CBC.extend({\r\n\t            /**\r\n\t             * Processes the data block at offset.\r\n\t             *\r\n\t             * @param {Array} words The data words to operate on.\r\n\t             * @param {number} offset The offset where the block starts.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     mode.processBlock(data.words, offset);\r\n\t             */\r\n\t            processBlock: function (words, offset) {\r\n\t                // Shortcuts\r\n\t                var cipher = this._cipher;\r\n\t                var blockSize = cipher.blockSize;\r\n\r\n\t                // Remember this block to use with next block\r\n\t                var thisBlock = words.slice(offset, offset + blockSize);\r\n\r\n\t                // Decrypt and XOR\r\n\t                cipher.decryptBlock(words, offset);\r\n\t                xorBlock.call(this, words, offset, blockSize);\r\n\r\n\t                // This block becomes the previous block\r\n\t                this._prevBlock = thisBlock;\r\n\t            }\r\n\t        });\r\n\r\n\t        function xorBlock(words, offset, blockSize) {\r\n\t            var block;\r\n\r\n\t            // Shortcut\r\n\t            var iv = this._iv;\r\n\r\n\t            // Choose mixing block\r\n\t            if (iv) {\r\n\t                block = iv;\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            } else {\r\n\t                block = this._prevBlock;\r\n\t            }\r\n\r\n\t            // XOR blocks\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= block[i];\r\n\t            }\r\n\t        }\r\n\r\n\t        return CBC;\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * Padding namespace.\r\n\t     */\r\n\t    var C_pad = C.pad = {};\r\n\r\n\t    /**\r\n\t     * PKCS #5/7 padding strategy.\r\n\t     */\r\n\t    var Pkcs7 = C_pad.Pkcs7 = {\r\n\t        /**\r\n\t         * Pads data using the algorithm defined in PKCS #5/7.\r\n\t         *\r\n\t         * @param {WordArray} data The data to pad.\r\n\t         * @param {number} blockSize The multiple that the data should be padded to.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);\r\n\t         */\r\n\t        pad: function (data, blockSize) {\r\n\t            // Shortcut\r\n\t            var blockSizeBytes = blockSize * 4;\r\n\r\n\t            // Count padding bytes\r\n\t            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\r\n\r\n\t            // Create padding word\r\n\t            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;\r\n\r\n\t            // Create padding\r\n\t            var paddingWords = [];\r\n\t            for (var i = 0; i < nPaddingBytes; i += 4) {\r\n\t                paddingWords.push(paddingWord);\r\n\t            }\r\n\t            var padding = WordArray.create(paddingWords, nPaddingBytes);\r\n\r\n\t            // Add padding\r\n\t            data.concat(padding);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.\r\n\t         *\r\n\t         * @param {WordArray} data The data to unpad.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     CryptoJS.pad.Pkcs7.unpad(wordArray);\r\n\t         */\r\n\t        unpad: function (data) {\r\n\t            // Get number of padding bytes from last byte\r\n\t            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t            // Remove padding\r\n\t            data.sigBytes -= nPaddingBytes;\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Abstract base block cipher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)\r\n\t     */\r\n\t    var BlockCipher = C_lib.BlockCipher = Cipher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {Mode} mode The block mode to use. Default: CBC\r\n\t         * @property {Padding} padding The padding strategy to use. Default: Pkcs7\r\n\t         */\r\n\t        cfg: Cipher.cfg.extend({\r\n\t            mode: CBC,\r\n\t            padding: Pkcs7\r\n\t        }),\r\n\r\n\t        reset: function () {\r\n\t            var modeCreator;\r\n\r\n\t            // Reset cipher\r\n\t            Cipher.reset.call(this);\r\n\r\n\t            // Shortcuts\r\n\t            var cfg = this.cfg;\r\n\t            var iv = cfg.iv;\r\n\t            var mode = cfg.mode;\r\n\r\n\t            // Reset block mode\r\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\r\n\t                modeCreator = mode.createEncryptor;\r\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\r\n\t                modeCreator = mode.createDecryptor;\r\n\t                // Keep at least one block in the buffer for unpadding\r\n\t                this._minBufferSize = 1;\r\n\t            }\r\n\r\n\t            if (this._mode && this._mode.__creator == modeCreator) {\r\n\t                this._mode.init(this, iv && iv.words);\r\n\t            } else {\r\n\t                this._mode = modeCreator.call(mode, this, iv && iv.words);\r\n\t                this._mode.__creator = modeCreator;\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (words, offset) {\r\n\t            this._mode.processBlock(words, offset);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var finalProcessedBlocks;\r\n\r\n\t            // Shortcut\r\n\t            var padding = this.cfg.padding;\r\n\r\n\t            // Finalize\r\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\r\n\t                // Pad data\r\n\t                padding.pad(this._data, this.blockSize);\r\n\r\n\t                // Process final blocks\r\n\t                finalProcessedBlocks = this._process(!!'flush');\r\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\r\n\t                // Process final blocks\r\n\t                finalProcessedBlocks = this._process(!!'flush');\r\n\r\n\t                // Unpad data\r\n\t                padding.unpad(finalProcessedBlocks);\r\n\t            }\r\n\r\n\t            return finalProcessedBlocks;\r\n\t        },\r\n\r\n\t        blockSize: 128/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * A collection of cipher parameters.\r\n\t     *\r\n\t     * @property {WordArray} ciphertext The raw ciphertext.\r\n\t     * @property {WordArray} key The key to this ciphertext.\r\n\t     * @property {WordArray} iv The IV used in the ciphering operation.\r\n\t     * @property {WordArray} salt The salt used with a key derivation function.\r\n\t     * @property {Cipher} algorithm The cipher algorithm.\r\n\t     * @property {Mode} mode The block mode used in the ciphering operation.\r\n\t     * @property {Padding} padding The padding scheme used in the ciphering operation.\r\n\t     * @property {number} blockSize The block size of the cipher.\r\n\t     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.\r\n\t     */\r\n\t    var CipherParams = C_lib.CipherParams = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created cipher params object.\r\n\t         *\r\n\t         * @param {Object} cipherParams An object with any of the possible cipher parameters.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.lib.CipherParams.create({\r\n\t         *         ciphertext: ciphertextWordArray,\r\n\t         *         key: keyWordArray,\r\n\t         *         iv: ivWordArray,\r\n\t         *         salt: saltWordArray,\r\n\t         *         algorithm: CryptoJS.algo.AES,\r\n\t         *         mode: CryptoJS.mode.CBC,\r\n\t         *         padding: CryptoJS.pad.PKCS7,\r\n\t         *         blockSize: 4,\r\n\t         *         formatter: CryptoJS.format.OpenSSL\r\n\t         *     });\r\n\t         */\r\n\t        init: function (cipherParams) {\r\n\t            this.mixIn(cipherParams);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this cipher params object to a string.\r\n\t         *\r\n\t         * @param {Format} formatter (Optional) The formatting strategy to use.\r\n\t         *\r\n\t         * @return {string} The stringified cipher params.\r\n\t         *\r\n\t         * @throws Error If neither the formatter nor the default formatter is set.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var string = cipherParams + '';\r\n\t         *     var string = cipherParams.toString();\r\n\t         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);\r\n\t         */\r\n\t        toString: function (formatter) {\r\n\t            return (formatter || this.formatter).stringify(this);\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Format namespace.\r\n\t     */\r\n\t    var C_format = C.format = {};\r\n\r\n\t    /**\r\n\t     * OpenSSL formatting strategy.\r\n\t     */\r\n\t    var OpenSSLFormatter = C_format.OpenSSL = {\r\n\t        /**\r\n\t         * Converts a cipher params object to an OpenSSL-compatible string.\r\n\t         *\r\n\t         * @param {CipherParams} cipherParams The cipher params object.\r\n\t         *\r\n\t         * @return {string} The OpenSSL-compatible string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);\r\n\t         */\r\n\t        stringify: function (cipherParams) {\r\n\t            var wordArray;\r\n\r\n\t            // Shortcuts\r\n\t            var ciphertext = cipherParams.ciphertext;\r\n\t            var salt = cipherParams.salt;\r\n\r\n\t            // Format\r\n\t            if (salt) {\r\n\t                wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);\r\n\t            } else {\r\n\t                wordArray = ciphertext;\r\n\t            }\r\n\r\n\t            return wordArray.toString(Base64);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts an OpenSSL-compatible string to a cipher params object.\r\n\t         *\r\n\t         * @param {string} openSSLStr The OpenSSL-compatible string.\r\n\t         *\r\n\t         * @return {CipherParams} The cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);\r\n\t         */\r\n\t        parse: function (openSSLStr) {\r\n\t            var salt;\r\n\r\n\t            // Parse base64\r\n\t            var ciphertext = Base64.parse(openSSLStr);\r\n\r\n\t            // Shortcut\r\n\t            var ciphertextWords = ciphertext.words;\r\n\r\n\t            // Test for salt\r\n\t            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {\r\n\t                // Extract salt\r\n\t                salt = WordArray.create(ciphertextWords.slice(2, 4));\r\n\r\n\t                // Remove salt from ciphertext\r\n\t                ciphertextWords.splice(0, 4);\r\n\t                ciphertext.sigBytes -= 16;\r\n\t            }\r\n\r\n\t            return CipherParams.create({ ciphertext: ciphertext, salt: salt });\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * A cipher wrapper that returns ciphertext as a serializable cipher params object.\r\n\t     */\r\n\t    var SerializableCipher = C_lib.SerializableCipher = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            format: OpenSSLFormatter\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Encrypts a message.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {WordArray|string} message The message to encrypt.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        encrypt: function (cipher, message, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Encrypt\r\n\t            var encryptor = cipher.createEncryptor(key, cfg);\r\n\t            var ciphertext = encryptor.finalize(message);\r\n\r\n\t            // Shortcut\r\n\t            var cipherCfg = encryptor.cfg;\r\n\r\n\t            // Create and return serializable cipher params\r\n\t            return CipherParams.create({\r\n\t                ciphertext: ciphertext,\r\n\t                key: key,\r\n\t                iv: cipherCfg.iv,\r\n\t                algorithm: cipher,\r\n\t                mode: cipherCfg.mode,\r\n\t                padding: cipherCfg.padding,\r\n\t                blockSize: cipher.blockSize,\r\n\t                formatter: cfg.format\r\n\t            });\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Decrypts serialized ciphertext.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {WordArray} The plaintext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        decrypt: function (cipher, ciphertext, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Convert string to CipherParams\r\n\t            ciphertext = this._parse(ciphertext, cfg.format);\r\n\r\n\t            // Decrypt\r\n\t            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);\r\n\r\n\t            return plaintext;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts serialized ciphertext to CipherParams,\r\n\t         * else assumed CipherParams already and returns ciphertext unchanged.\r\n\t         *\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext.\r\n\t         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.\r\n\t         *\r\n\t         * @return {CipherParams} The unserialized ciphertext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);\r\n\t         */\r\n\t        _parse: function (ciphertext, format) {\r\n\t            if (typeof ciphertext == 'string') {\r\n\t                return format.parse(ciphertext, this);\r\n\t            } else {\r\n\t                return ciphertext;\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Key derivation function namespace.\r\n\t     */\r\n\t    var C_kdf = C.kdf = {};\r\n\r\n\t    /**\r\n\t     * OpenSSL key derivation function.\r\n\t     */\r\n\t    var OpenSSLKdf = C_kdf.OpenSSL = {\r\n\t        /**\r\n\t         * Derives a key and IV from a password.\r\n\t         *\r\n\t         * @param {string} password The password to derive from.\r\n\t         * @param {number} keySize The size in words of the key to generate.\r\n\t         * @param {number} ivSize The size in words of the IV to generate.\r\n\t         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object with the key, IV, and salt.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);\r\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');\r\n\t         */\r\n\t        execute: function (password, keySize, ivSize, salt) {\r\n\t            // Generate random salt\r\n\t            if (!salt) {\r\n\t                salt = WordArray.random(64/8);\r\n\t            }\r\n\r\n\t            // Derive key and IV\r\n\t            var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);\r\n\r\n\t            // Separate key and IV\r\n\t            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);\r\n\t            key.sigBytes = keySize * 4;\r\n\r\n\t            // Return params\r\n\t            return CipherParams.create({ key: key, iv: iv, salt: salt });\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * A serializable cipher wrapper that derives the key from a password,\r\n\t     * and returns ciphertext as a serializable cipher params object.\r\n\t     */\r\n\t    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL\r\n\t         */\r\n\t        cfg: SerializableCipher.cfg.extend({\r\n\t            kdf: OpenSSLKdf\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Encrypts a message using a password.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {WordArray|string} message The message to encrypt.\r\n\t         * @param {string} password The password.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');\r\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        encrypt: function (cipher, message, password, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Derive key and other params\r\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize);\r\n\r\n\t            // Add IV to config\r\n\t            cfg.iv = derivedParams.iv;\r\n\r\n\t            // Encrypt\r\n\t            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);\r\n\r\n\t            // Mix in derived params\r\n\t            ciphertext.mixIn(derivedParams);\r\n\r\n\t            return ciphertext;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Decrypts serialized ciphertext using a password.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\r\n\t         * @param {string} password The password.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {WordArray} The plaintext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        decrypt: function (cipher, ciphertext, password, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Convert string to CipherParams\r\n\t            ciphertext = this._parse(ciphertext, cfg.format);\r\n\r\n\t            // Derive key and other params\r\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt);\r\n\r\n\t            // Add IV to config\r\n\t            cfg.iv = derivedParams.iv;\r\n\r\n\t            // Decrypt\r\n\t            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);\r\n\r\n\t            return plaintext;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Cipher Feedback block mode.\r\n\t */\r\n\tCryptoJS.mode.CFB = (function () {\r\n\t    var CFB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    CFB.Encryptor = CFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher;\r\n\t            var blockSize = cipher.blockSize;\r\n\r\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\r\n\r\n\t            // Remember this block to use with next block\r\n\t            this._prevBlock = words.slice(offset, offset + blockSize);\r\n\t        }\r\n\t    });\r\n\r\n\t    CFB.Decryptor = CFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher;\r\n\t            var blockSize = cipher.blockSize;\r\n\r\n\t            // Remember this block to use with next block\r\n\t            var thisBlock = words.slice(offset, offset + blockSize);\r\n\r\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\r\n\r\n\t            // This block becomes the previous block\r\n\t            this._prevBlock = thisBlock;\r\n\t        }\r\n\t    });\r\n\r\n\t    function generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\r\n\t        var keystream;\r\n\r\n\t        // Shortcut\r\n\t        var iv = this._iv;\r\n\r\n\t        // Generate keystream\r\n\t        if (iv) {\r\n\t            keystream = iv.slice(0);\r\n\r\n\t            // Remove IV for subsequent blocks\r\n\t            this._iv = undefined;\r\n\t        } else {\r\n\t            keystream = this._prevBlock;\r\n\t        }\r\n\t        cipher.encryptBlock(keystream, 0);\r\n\r\n\t        // Encrypt\r\n\t        for (var i = 0; i < blockSize; i++) {\r\n\t            words[offset + i] ^= keystream[i];\r\n\t        }\r\n\t    }\r\n\r\n\t    return CFB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Electronic Codebook block mode.\r\n\t */\r\n\tCryptoJS.mode.ECB = (function () {\r\n\t    var ECB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    ECB.Encryptor = ECB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            this._cipher.encryptBlock(words, offset);\r\n\t        }\r\n\t    });\r\n\r\n\t    ECB.Decryptor = ECB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            this._cipher.decryptBlock(words, offset);\r\n\t        }\r\n\t    });\r\n\r\n\t    return ECB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * ANSI X.923 padding strategy.\r\n\t */\r\n\tCryptoJS.pad.AnsiX923 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcuts\r\n\t        var dataSigBytes = data.sigBytes;\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Count padding bytes\r\n\t        var nPaddingBytes = blockSizeBytes - dataSigBytes % blockSizeBytes;\r\n\r\n\t        // Compute last byte position\r\n\t        var lastBytePos = dataSigBytes + nPaddingBytes - 1;\r\n\r\n\t        // Pad\r\n\t        data.clamp();\r\n\t        data.words[lastBytePos >>> 2] |= nPaddingBytes << (24 - (lastBytePos % 4) * 8);\r\n\t        data.sigBytes += nPaddingBytes;\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Get number of padding bytes from last byte\r\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t        // Remove padding\r\n\t        data.sigBytes -= nPaddingBytes;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * ISO 10126 padding strategy.\r\n\t */\r\n\tCryptoJS.pad.Iso10126 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcut\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Count padding bytes\r\n\t        var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\r\n\r\n\t        // Pad\r\n\t        data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes - 1)).\r\n\t             concat(CryptoJS.lib.WordArray.create([nPaddingBytes << 24], 1));\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Get number of padding bytes from last byte\r\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t        // Remove padding\r\n\t        data.sigBytes -= nPaddingBytes;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * ISO/IEC 9797-1 Padding Method 2.\r\n\t */\r\n\tCryptoJS.pad.Iso97971 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Add 0x80 byte\r\n\t        data.concat(CryptoJS.lib.WordArray.create([0x80000000], 1));\r\n\r\n\t        // Zero pad the rest\r\n\t        CryptoJS.pad.ZeroPadding.pad(data, blockSize);\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Remove zero padding\r\n\t        CryptoJS.pad.ZeroPadding.unpad(data);\r\n\r\n\t        // Remove one more byte -- the 0x80 byte\r\n\t        data.sigBytes--;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Output Feedback block mode.\r\n\t */\r\n\tCryptoJS.mode.OFB = (function () {\r\n\t    var OFB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    var Encryptor = OFB.Encryptor = OFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var keystream = this._keystream;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                keystream = this._keystream = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    OFB.Decryptor = Encryptor;\r\n\r\n\t    return OFB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * A noop padding strategy.\r\n\t */\r\n\tCryptoJS.pad.NoPadding = {\r\n\t    pad: function () {\r\n\t    },\r\n\r\n\t    unpad: function () {\r\n\t    }\r\n\t};\r\n\r\n\r\n\t(function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var CipherParams = C_lib.CipherParams;\r\n\t    var C_enc = C.enc;\r\n\t    var Hex = C_enc.Hex;\r\n\t    var C_format = C.format;\r\n\r\n\t    var HexFormatter = C_format.Hex = {\r\n\t        /**\r\n\t         * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.\r\n\t         *\r\n\t         * @param {CipherParams} cipherParams The cipher params object.\r\n\t         *\r\n\t         * @return {string} The hexadecimally encoded string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);\r\n\t         */\r\n\t        stringify: function (cipherParams) {\r\n\t            return cipherParams.ciphertext.toString(Hex);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a hexadecimally encoded ciphertext string to a cipher params object.\r\n\t         *\r\n\t         * @param {string} input The hexadecimally encoded string.\r\n\t         *\r\n\t         * @return {CipherParams} The cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.format.Hex.parse(hexString);\r\n\t         */\r\n\t        parse: function (input) {\r\n\t            var ciphertext = Hex.parse(input);\r\n\t            return CipherParams.create({ ciphertext: ciphertext });\r\n\t        }\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var BlockCipher = C_lib.BlockCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Lookup tables\r\n\t    var SBOX = [];\r\n\t    var INV_SBOX = [];\r\n\t    var SUB_MIX_0 = [];\r\n\t    var SUB_MIX_1 = [];\r\n\t    var SUB_MIX_2 = [];\r\n\t    var SUB_MIX_3 = [];\r\n\t    var INV_SUB_MIX_0 = [];\r\n\t    var INV_SUB_MIX_1 = [];\r\n\t    var INV_SUB_MIX_2 = [];\r\n\t    var INV_SUB_MIX_3 = [];\r\n\r\n\t    // Compute lookup tables\r\n\t    (function () {\r\n\t        // Compute double table\r\n\t        var d = [];\r\n\t        for (var i = 0; i < 256; i++) {\r\n\t            if (i < 128) {\r\n\t                d[i] = i << 1;\r\n\t            } else {\r\n\t                d[i] = (i << 1) ^ 0x11b;\r\n\t            }\r\n\t        }\r\n\r\n\t        // Walk GF(2^8)\r\n\t        var x = 0;\r\n\t        var xi = 0;\r\n\t        for (var i = 0; i < 256; i++) {\r\n\t            // Compute sbox\r\n\t            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\r\n\t            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\r\n\t            SBOX[x] = sx;\r\n\t            INV_SBOX[sx] = x;\r\n\r\n\t            // Compute multiplication\r\n\t            var x2 = d[x];\r\n\t            var x4 = d[x2];\r\n\t            var x8 = d[x4];\r\n\r\n\t            // Compute sub bytes, mix columns tables\r\n\t            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);\r\n\t            SUB_MIX_0[x] = (t << 24) | (t >>> 8);\r\n\t            SUB_MIX_1[x] = (t << 16) | (t >>> 16);\r\n\t            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);\r\n\t            SUB_MIX_3[x] = t;\r\n\r\n\t            // Compute inv sub bytes, inv mix columns tables\r\n\t            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\r\n\t            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);\r\n\t            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);\r\n\t            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);\r\n\t            INV_SUB_MIX_3[sx] = t;\r\n\r\n\t            // Compute next counter\r\n\t            if (!x) {\r\n\t                x = xi = 1;\r\n\t            } else {\r\n\t                x = x2 ^ d[d[d[x8 ^ x2]]];\r\n\t                xi ^= d[d[xi]];\r\n\t            }\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Precomputed Rcon lookup\r\n\t    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\r\n\r\n\t    /**\r\n\t     * AES block cipher algorithm.\r\n\t     */\r\n\t    var AES = C_algo.AES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            var t;\r\n\r\n\t            // Skip reset of nRounds has been set before and key did not change\r\n\t            if (this._nRounds && this._keyPriorReset === this._key) {\r\n\t                return;\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var key = this._keyPriorReset = this._key;\r\n\t            var keyWords = key.words;\r\n\t            var keySize = key.sigBytes / 4;\r\n\r\n\t            // Compute number of rounds\r\n\t            var nRounds = this._nRounds = keySize + 6;\r\n\r\n\t            // Compute number of key schedule rows\r\n\t            var ksRows = (nRounds + 1) * 4;\r\n\r\n\t            // Compute key schedule\r\n\t            var keySchedule = this._keySchedule = [];\r\n\t            for (var ksRow = 0; ksRow < ksRows; ksRow++) {\r\n\t                if (ksRow < keySize) {\r\n\t                    keySchedule[ksRow] = keyWords[ksRow];\r\n\t                } else {\r\n\t                    t = keySchedule[ksRow - 1];\r\n\r\n\t                    if (!(ksRow % keySize)) {\r\n\t                        // Rot word\r\n\t                        t = (t << 8) | (t >>> 24);\r\n\r\n\t                        // Sub word\r\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\r\n\r\n\t                        // Mix Rcon\r\n\t                        t ^= RCON[(ksRow / keySize) | 0] << 24;\r\n\t                    } else if (keySize > 6 && ksRow % keySize == 4) {\r\n\t                        // Sub word\r\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\r\n\t                    }\r\n\r\n\t                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;\r\n\t                }\r\n\t            }\r\n\r\n\t            // Compute inv key schedule\r\n\t            var invKeySchedule = this._invKeySchedule = [];\r\n\t            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {\r\n\t                var ksRow = ksRows - invKsRow;\r\n\r\n\t                if (invKsRow % 4) {\r\n\t                    var t = keySchedule[ksRow];\r\n\t                } else {\r\n\t                    var t = keySchedule[ksRow - 4];\r\n\t                }\r\n\r\n\t                if (invKsRow < 4 || ksRow <= 4) {\r\n\t                    invKeySchedule[invKsRow] = t;\r\n\t                } else {\r\n\t                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^\r\n\t                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            // Swap 2nd and 4th rows\r\n\t            var t = M[offset + 1];\r\n\t            M[offset + 1] = M[offset + 3];\r\n\t            M[offset + 3] = t;\r\n\r\n\t            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);\r\n\r\n\t            // Inv swap 2nd and 4th rows\r\n\t            var t = M[offset + 1];\r\n\t            M[offset + 1] = M[offset + 3];\r\n\t            M[offset + 3] = t;\r\n\t        },\r\n\r\n\t        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {\r\n\t            // Shortcut\r\n\t            var nRounds = this._nRounds;\r\n\r\n\t            // Get input, add round key\r\n\t            var s0 = M[offset]     ^ keySchedule[0];\r\n\t            var s1 = M[offset + 1] ^ keySchedule[1];\r\n\t            var s2 = M[offset + 2] ^ keySchedule[2];\r\n\t            var s3 = M[offset + 3] ^ keySchedule[3];\r\n\r\n\t            // Key schedule row counter\r\n\t            var ksRow = 4;\r\n\r\n\t            // Rounds\r\n\t            for (var round = 1; round < nRounds; round++) {\r\n\t                // Shift rows, sub bytes, mix columns, add round key\r\n\t                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];\r\n\r\n\t                // Update state\r\n\t                s0 = t0;\r\n\t                s1 = t1;\r\n\t                s2 = t2;\r\n\t                s3 = t3;\r\n\t            }\r\n\r\n\t            // Shift rows, sub bytes, add round key\r\n\t            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\r\n\r\n\t            // Set output\r\n\t            M[offset]     = t0;\r\n\t            M[offset + 1] = t1;\r\n\t            M[offset + 2] = t2;\r\n\t            M[offset + 3] = t3;\r\n\t        },\r\n\r\n\t        keySize: 256/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.AES = BlockCipher._createHelper(AES);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var BlockCipher = C_lib.BlockCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Permuted Choice 1 constants\r\n\t    var PC1 = [\r\n\t        57, 49, 41, 33, 25, 17, 9,  1,\r\n\t        58, 50, 42, 34, 26, 18, 10, 2,\r\n\t        59, 51, 43, 35, 27, 19, 11, 3,\r\n\t        60, 52, 44, 36, 63, 55, 47, 39,\r\n\t        31, 23, 15, 7,  62, 54, 46, 38,\r\n\t        30, 22, 14, 6,  61, 53, 45, 37,\r\n\t        29, 21, 13, 5,  28, 20, 12, 4\r\n\t    ];\r\n\r\n\t    // Permuted Choice 2 constants\r\n\t    var PC2 = [\r\n\t        14, 17, 11, 24, 1,  5,\r\n\t        3,  28, 15, 6,  21, 10,\r\n\t        23, 19, 12, 4,  26, 8,\r\n\t        16, 7,  27, 20, 13, 2,\r\n\t        41, 52, 31, 37, 47, 55,\r\n\t        30, 40, 51, 45, 33, 48,\r\n\t        44, 49, 39, 56, 34, 53,\r\n\t        46, 42, 50, 36, 29, 32\r\n\t    ];\r\n\r\n\t    // Cumulative bit shift constants\r\n\t    var BIT_SHIFTS = [1,  2,  4,  6,  8,  10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28];\r\n\r\n\t    // SBOXes and round permutation constants\r\n\t    var SBOX_P = [\r\n\t        {\r\n\t            0x0: 0x808200,\r\n\t            0x10000000: 0x8000,\r\n\t            0x20000000: 0x808002,\r\n\t            0x30000000: 0x2,\r\n\t            0x40000000: 0x200,\r\n\t            0x50000000: 0x808202,\r\n\t            0x60000000: 0x800202,\r\n\t            0x70000000: 0x800000,\r\n\t            0x80000000: 0x202,\r\n\t            0x90000000: 0x800200,\r\n\t            0xa0000000: 0x8200,\r\n\t            0xb0000000: 0x808000,\r\n\t            0xc0000000: 0x8002,\r\n\t            0xd0000000: 0x800002,\r\n\t            0xe0000000: 0x0,\r\n\t            0xf0000000: 0x8202,\r\n\t            0x8000000: 0x0,\r\n\t            0x18000000: 0x808202,\r\n\t            0x28000000: 0x8202,\r\n\t            0x38000000: 0x8000,\r\n\t            0x48000000: 0x808200,\r\n\t            0x58000000: 0x200,\r\n\t            0x68000000: 0x808002,\r\n\t            0x78000000: 0x2,\r\n\t            0x88000000: 0x800200,\r\n\t            0x98000000: 0x8200,\r\n\t            0xa8000000: 0x808000,\r\n\t            0xb8000000: 0x800202,\r\n\t            0xc8000000: 0x800002,\r\n\t            0xd8000000: 0x8002,\r\n\t            0xe8000000: 0x202,\r\n\t            0xf8000000: 0x800000,\r\n\t            0x1: 0x8000,\r\n\t            0x10000001: 0x2,\r\n\t            0x20000001: 0x808200,\r\n\t            0x30000001: 0x800000,\r\n\t            0x40000001: 0x808002,\r\n\t            0x50000001: 0x8200,\r\n\t            0x60000001: 0x200,\r\n\t            0x70000001: 0x800202,\r\n\t            0x80000001: 0x808202,\r\n\t            0x90000001: 0x808000,\r\n\t            0xa0000001: 0x800002,\r\n\t            0xb0000001: 0x8202,\r\n\t            0xc0000001: 0x202,\r\n\t            0xd0000001: 0x800200,\r\n\t            0xe0000001: 0x8002,\r\n\t            0xf0000001: 0x0,\r\n\t            0x8000001: 0x808202,\r\n\t            0x18000001: 0x808000,\r\n\t            0x28000001: 0x800000,\r\n\t            0x38000001: 0x200,\r\n\t            0x48000001: 0x8000,\r\n\t            0x58000001: 0x800002,\r\n\t            0x68000001: 0x2,\r\n\t            0x78000001: 0x8202,\r\n\t            0x88000001: 0x8002,\r\n\t            0x98000001: 0x800202,\r\n\t            0xa8000001: 0x202,\r\n\t            0xb8000001: 0x808200,\r\n\t            0xc8000001: 0x800200,\r\n\t            0xd8000001: 0x0,\r\n\t            0xe8000001: 0x8200,\r\n\t            0xf8000001: 0x808002\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x40084010,\r\n\t            0x1000000: 0x4000,\r\n\t            0x2000000: 0x80000,\r\n\t            0x3000000: 0x40080010,\r\n\t            0x4000000: 0x40000010,\r\n\t            0x5000000: 0x40084000,\r\n\t            0x6000000: 0x40004000,\r\n\t            0x7000000: 0x10,\r\n\t            0x8000000: 0x84000,\r\n\t            0x9000000: 0x40004010,\r\n\t            0xa000000: 0x40000000,\r\n\t            0xb000000: 0x84010,\r\n\t            0xc000000: 0x80010,\r\n\t            0xd000000: 0x0,\r\n\t            0xe000000: 0x4010,\r\n\t            0xf000000: 0x40080000,\r\n\t            0x800000: 0x40004000,\r\n\t            0x1800000: 0x84010,\r\n\t            0x2800000: 0x10,\r\n\t            0x3800000: 0x40004010,\r\n\t            0x4800000: 0x40084010,\r\n\t            0x5800000: 0x40000000,\r\n\t            0x6800000: 0x80000,\r\n\t            0x7800000: 0x40080010,\r\n\t            0x8800000: 0x80010,\r\n\t            0x9800000: 0x0,\r\n\t            0xa800000: 0x4000,\r\n\t            0xb800000: 0x40080000,\r\n\t            0xc800000: 0x40000010,\r\n\t            0xd800000: 0x84000,\r\n\t            0xe800000: 0x40084000,\r\n\t            0xf800000: 0x4010,\r\n\t            0x10000000: 0x0,\r\n\t            0x11000000: 0x40080010,\r\n\t            0x12000000: 0x40004010,\r\n\t            0x13000000: 0x40084000,\r\n\t            0x14000000: 0x40080000,\r\n\t            0x15000000: 0x10,\r\n\t            0x16000000: 0x84010,\r\n\t            0x17000000: 0x4000,\r\n\t            0x18000000: 0x4010,\r\n\t            0x19000000: 0x80000,\r\n\t            0x1a000000: 0x80010,\r\n\t            0x1b000000: 0x40000010,\r\n\t            0x1c000000: 0x84000,\r\n\t            0x1d000000: 0x40004000,\r\n\t            0x1e000000: 0x40000000,\r\n\t            0x1f000000: 0x40084010,\r\n\t            0x10800000: 0x84010,\r\n\t            0x11800000: 0x80000,\r\n\t            0x12800000: 0x40080000,\r\n\t            0x13800000: 0x4000,\r\n\t            0x14800000: 0x40004000,\r\n\t            0x15800000: 0x40084010,\r\n\t            0x16800000: 0x10,\r\n\t            0x17800000: 0x40000000,\r\n\t            0x18800000: 0x40084000,\r\n\t            0x19800000: 0x40000010,\r\n\t            0x1a800000: 0x40004010,\r\n\t            0x1b800000: 0x80010,\r\n\t            0x1c800000: 0x0,\r\n\t            0x1d800000: 0x4010,\r\n\t            0x1e800000: 0x40080010,\r\n\t            0x1f800000: 0x84000\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x104,\r\n\t            0x100000: 0x0,\r\n\t            0x200000: 0x4000100,\r\n\t            0x300000: 0x10104,\r\n\t            0x400000: 0x10004,\r\n\t            0x500000: 0x4000004,\r\n\t            0x600000: 0x4010104,\r\n\t            0x700000: 0x4010000,\r\n\t            0x800000: 0x4000000,\r\n\t            0x900000: 0x4010100,\r\n\t            0xa00000: 0x10100,\r\n\t            0xb00000: 0x4010004,\r\n\t            0xc00000: 0x4000104,\r\n\t            0xd00000: 0x10000,\r\n\t            0xe00000: 0x4,\r\n\t            0xf00000: 0x100,\r\n\t            0x80000: 0x4010100,\r\n\t            0x180000: 0x4010004,\r\n\t            0x280000: 0x0,\r\n\t            0x380000: 0x4000100,\r\n\t            0x480000: 0x4000004,\r\n\t            0x580000: 0x10000,\r\n\t            0x680000: 0x10004,\r\n\t            0x780000: 0x104,\r\n\t            0x880000: 0x4,\r\n\t            0x980000: 0x100,\r\n\t            0xa80000: 0x4010000,\r\n\t            0xb80000: 0x10104,\r\n\t            0xc80000: 0x10100,\r\n\t            0xd80000: 0x4000104,\r\n\t            0xe80000: 0x4010104,\r\n\t            0xf80000: 0x4000000,\r\n\t            0x1000000: 0x4010100,\r\n\t            0x1100000: 0x10004,\r\n\t            0x1200000: 0x10000,\r\n\t            0x1300000: 0x4000100,\r\n\t            0x1400000: 0x100,\r\n\t            0x1500000: 0x4010104,\r\n\t            0x1600000: 0x4000004,\r\n\t            0x1700000: 0x0,\r\n\t            0x1800000: 0x4000104,\r\n\t            0x1900000: 0x4000000,\r\n\t            0x1a00000: 0x4,\r\n\t            0x1b00000: 0x10100,\r\n\t            0x1c00000: 0x4010000,\r\n\t            0x1d00000: 0x104,\r\n\t            0x1e00000: 0x10104,\r\n\t            0x1f00000: 0x4010004,\r\n\t            0x1080000: 0x4000000,\r\n\t            0x1180000: 0x104,\r\n\t            0x1280000: 0x4010100,\r\n\t            0x1380000: 0x0,\r\n\t            0x1480000: 0x10004,\r\n\t            0x1580000: 0x4000100,\r\n\t            0x1680000: 0x100,\r\n\t            0x1780000: 0x4010004,\r\n\t            0x1880000: 0x10000,\r\n\t            0x1980000: 0x4010104,\r\n\t            0x1a80000: 0x10104,\r\n\t            0x1b80000: 0x4000004,\r\n\t            0x1c80000: 0x4000104,\r\n\t            0x1d80000: 0x4010000,\r\n\t            0x1e80000: 0x4,\r\n\t            0x1f80000: 0x10100\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x80401000,\r\n\t            0x10000: 0x80001040,\r\n\t            0x20000: 0x401040,\r\n\t            0x30000: 0x80400000,\r\n\t            0x40000: 0x0,\r\n\t            0x50000: 0x401000,\r\n\t            0x60000: 0x80000040,\r\n\t            0x70000: 0x400040,\r\n\t            0x80000: 0x80000000,\r\n\t            0x90000: 0x400000,\r\n\t            0xa0000: 0x40,\r\n\t            0xb0000: 0x80001000,\r\n\t            0xc0000: 0x80400040,\r\n\t            0xd0000: 0x1040,\r\n\t            0xe0000: 0x1000,\r\n\t            0xf0000: 0x80401040,\r\n\t            0x8000: 0x80001040,\r\n\t            0x18000: 0x40,\r\n\t            0x28000: 0x80400040,\r\n\t            0x38000: 0x80001000,\r\n\t            0x48000: 0x401000,\r\n\t            0x58000: 0x80401040,\r\n\t            0x68000: 0x0,\r\n\t            0x78000: 0x80400000,\r\n\t            0x88000: 0x1000,\r\n\t            0x98000: 0x80401000,\r\n\t            0xa8000: 0x400000,\r\n\t            0xb8000: 0x1040,\r\n\t            0xc8000: 0x80000000,\r\n\t            0xd8000: 0x400040,\r\n\t            0xe8000: 0x401040,\r\n\t            0xf8000: 0x80000040,\r\n\t            0x100000: 0x400040,\r\n\t            0x110000: 0x401000,\r\n\t            0x120000: 0x80000040,\r\n\t            0x130000: 0x0,\r\n\t            0x140000: 0x1040,\r\n\t            0x150000: 0x80400040,\r\n\t            0x160000: 0x80401000,\r\n\t            0x170000: 0x80001040,\r\n\t            0x180000: 0x80401040,\r\n\t            0x190000: 0x80000000,\r\n\t            0x1a0000: 0x80400000,\r\n\t            0x1b0000: 0x401040,\r\n\t            0x1c0000: 0x80001000,\r\n\t            0x1d0000: 0x400000,\r\n\t            0x1e0000: 0x40,\r\n\t            0x1f0000: 0x1000,\r\n\t            0x108000: 0x80400000,\r\n\t            0x118000: 0x80401040,\r\n\t            0x128000: 0x0,\r\n\t            0x138000: 0x401000,\r\n\t            0x148000: 0x400040,\r\n\t            0x158000: 0x80000000,\r\n\t            0x168000: 0x80001040,\r\n\t            0x178000: 0x40,\r\n\t            0x188000: 0x80000040,\r\n\t            0x198000: 0x1000,\r\n\t            0x1a8000: 0x80001000,\r\n\t            0x1b8000: 0x80400040,\r\n\t            0x1c8000: 0x1040,\r\n\t            0x1d8000: 0x80401000,\r\n\t            0x1e8000: 0x400000,\r\n\t            0x1f8000: 0x401040\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x80,\r\n\t            0x1000: 0x1040000,\r\n\t            0x2000: 0x40000,\r\n\t            0x3000: 0x20000000,\r\n\t            0x4000: 0x20040080,\r\n\t            0x5000: 0x1000080,\r\n\t            0x6000: 0x21000080,\r\n\t            0x7000: 0x40080,\r\n\t            0x8000: 0x1000000,\r\n\t            0x9000: 0x20040000,\r\n\t            0xa000: 0x20000080,\r\n\t            0xb000: 0x21040080,\r\n\t            0xc000: 0x21040000,\r\n\t            0xd000: 0x0,\r\n\t            0xe000: 0x1040080,\r\n\t            0xf000: 0x21000000,\r\n\t            0x800: 0x1040080,\r\n\t            0x1800: 0x21000080,\r\n\t            0x2800: 0x80,\r\n\t            0x3800: 0x1040000,\r\n\t            0x4800: 0x40000,\r\n\t            0x5800: 0x20040080,\r\n\t            0x6800: 0x21040000,\r\n\t            0x7800: 0x20000000,\r\n\t            0x8800: 0x20040000,\r\n\t            0x9800: 0x0,\r\n\t            0xa800: 0x21040080,\r\n\t            0xb800: 0x1000080,\r\n\t            0xc800: 0x20000080,\r\n\t            0xd800: 0x21000000,\r\n\t            0xe800: 0x1000000,\r\n\t            0xf800: 0x40080,\r\n\t            0x10000: 0x40000,\r\n\t            0x11000: 0x80,\r\n\t            0x12000: 0x20000000,\r\n\t            0x13000: 0x21000080,\r\n\t            0x14000: 0x1000080,\r\n\t            0x15000: 0x21040000,\r\n\t            0x16000: 0x20040080,\r\n\t            0x17000: 0x1000000,\r\n\t            0x18000: 0x21040080,\r\n\t            0x19000: 0x21000000,\r\n\t            0x1a000: 0x1040000,\r\n\t            0x1b000: 0x20040000,\r\n\t            0x1c000: 0x40080,\r\n\t            0x1d000: 0x20000080,\r\n\t            0x1e000: 0x0,\r\n\t            0x1f000: 0x1040080,\r\n\t            0x10800: 0x21000080,\r\n\t            0x11800: 0x1000000,\r\n\t            0x12800: 0x1040000,\r\n\t            0x13800: 0x20040080,\r\n\t            0x14800: 0x20000000,\r\n\t            0x15800: 0x1040080,\r\n\t            0x16800: 0x80,\r\n\t            0x17800: 0x21040000,\r\n\t            0x18800: 0x40080,\r\n\t            0x19800: 0x21040080,\r\n\t            0x1a800: 0x0,\r\n\t            0x1b800: 0x21000000,\r\n\t            0x1c800: 0x1000080,\r\n\t            0x1d800: 0x40000,\r\n\t            0x1e800: 0x20040000,\r\n\t            0x1f800: 0x20000080\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x10000008,\r\n\t            0x100: 0x2000,\r\n\t            0x200: 0x10200000,\r\n\t            0x300: 0x10202008,\r\n\t            0x400: 0x10002000,\r\n\t            0x500: 0x200000,\r\n\t            0x600: 0x200008,\r\n\t            0x700: 0x10000000,\r\n\t            0x800: 0x0,\r\n\t            0x900: 0x10002008,\r\n\t            0xa00: 0x202000,\r\n\t            0xb00: 0x8,\r\n\t            0xc00: 0x10200008,\r\n\t            0xd00: 0x202008,\r\n\t            0xe00: 0x2008,\r\n\t            0xf00: 0x10202000,\r\n\t            0x80: 0x10200000,\r\n\t            0x180: 0x10202008,\r\n\t            0x280: 0x8,\r\n\t            0x380: 0x200000,\r\n\t            0x480: 0x202008,\r\n\t            0x580: 0x10000008,\r\n\t            0x680: 0x10002000,\r\n\t            0x780: 0x2008,\r\n\t            0x880: 0x200008,\r\n\t            0x980: 0x2000,\r\n\t            0xa80: 0x10002008,\r\n\t            0xb80: 0x10200008,\r\n\t            0xc80: 0x0,\r\n\t            0xd80: 0x10202000,\r\n\t            0xe80: 0x202000,\r\n\t            0xf80: 0x10000000,\r\n\t            0x1000: 0x10002000,\r\n\t            0x1100: 0x10200008,\r\n\t            0x1200: 0x10202008,\r\n\t            0x1300: 0x2008,\r\n\t            0x1400: 0x200000,\r\n\t            0x1500: 0x10000000,\r\n\t            0x1600: 0x10000008,\r\n\t            0x1700: 0x202000,\r\n\t            0x1800: 0x202008,\r\n\t            0x1900: 0x0,\r\n\t            0x1a00: 0x8,\r\n\t            0x1b00: 0x10200000,\r\n\t            0x1c00: 0x2000,\r\n\t            0x1d00: 0x10002008,\r\n\t            0x1e00: 0x10202000,\r\n\t            0x1f00: 0x200008,\r\n\t            0x1080: 0x8,\r\n\t            0x1180: 0x202000,\r\n\t            0x1280: 0x200000,\r\n\t            0x1380: 0x10000008,\r\n\t            0x1480: 0x10002000,\r\n\t            0x1580: 0x2008,\r\n\t            0x1680: 0x10202008,\r\n\t            0x1780: 0x10200000,\r\n\t            0x1880: 0x10202000,\r\n\t            0x1980: 0x10200008,\r\n\t            0x1a80: 0x2000,\r\n\t            0x1b80: 0x202008,\r\n\t            0x1c80: 0x200008,\r\n\t            0x1d80: 0x0,\r\n\t            0x1e80: 0x10000000,\r\n\t            0x1f80: 0x10002008\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x100000,\r\n\t            0x10: 0x2000401,\r\n\t            0x20: 0x400,\r\n\t            0x30: 0x100401,\r\n\t            0x40: 0x2100401,\r\n\t            0x50: 0x0,\r\n\t            0x60: 0x1,\r\n\t            0x70: 0x2100001,\r\n\t            0x80: 0x2000400,\r\n\t            0x90: 0x100001,\r\n\t            0xa0: 0x2000001,\r\n\t            0xb0: 0x2100400,\r\n\t            0xc0: 0x2100000,\r\n\t            0xd0: 0x401,\r\n\t            0xe0: 0x100400,\r\n\t            0xf0: 0x2000000,\r\n\t            0x8: 0x2100001,\r\n\t            0x18: 0x0,\r\n\t            0x28: 0x2000401,\r\n\t            0x38: 0x2100400,\r\n\t            0x48: 0x100000,\r\n\t            0x58: 0x2000001,\r\n\t            0x68: 0x2000000,\r\n\t            0x78: 0x401,\r\n\t            0x88: 0x100401,\r\n\t            0x98: 0x2000400,\r\n\t            0xa8: 0x2100000,\r\n\t            0xb8: 0x100001,\r\n\t            0xc8: 0x400,\r\n\t            0xd8: 0x2100401,\r\n\t            0xe8: 0x1,\r\n\t            0xf8: 0x100400,\r\n\t            0x100: 0x2000000,\r\n\t            0x110: 0x100000,\r\n\t            0x120: 0x2000401,\r\n\t            0x130: 0x2100001,\r\n\t            0x140: 0x100001,\r\n\t            0x150: 0x2000400,\r\n\t            0x160: 0x2100400,\r\n\t            0x170: 0x100401,\r\n\t            0x180: 0x401,\r\n\t            0x190: 0x2100401,\r\n\t            0x1a0: 0x100400,\r\n\t            0x1b0: 0x1,\r\n\t            0x1c0: 0x0,\r\n\t            0x1d0: 0x2100000,\r\n\t            0x1e0: 0x2000001,\r\n\t            0x1f0: 0x400,\r\n\t            0x108: 0x100400,\r\n\t            0x118: 0x2000401,\r\n\t            0x128: 0x2100001,\r\n\t            0x138: 0x1,\r\n\t            0x148: 0x2000000,\r\n\t            0x158: 0x100000,\r\n\t            0x168: 0x401,\r\n\t            0x178: 0x2100400,\r\n\t            0x188: 0x2000001,\r\n\t            0x198: 0x2100000,\r\n\t            0x1a8: 0x0,\r\n\t            0x1b8: 0x2100401,\r\n\t            0x1c8: 0x100401,\r\n\t            0x1d8: 0x400,\r\n\t            0x1e8: 0x2000400,\r\n\t            0x1f8: 0x100001\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x8000820,\r\n\t            0x1: 0x20000,\r\n\t            0x2: 0x8000000,\r\n\t            0x3: 0x20,\r\n\t            0x4: 0x20020,\r\n\t            0x5: 0x8020820,\r\n\t            0x6: 0x8020800,\r\n\t            0x7: 0x800,\r\n\t            0x8: 0x8020000,\r\n\t            0x9: 0x8000800,\r\n\t            0xa: 0x20800,\r\n\t            0xb: 0x8020020,\r\n\t            0xc: 0x820,\r\n\t            0xd: 0x0,\r\n\t            0xe: 0x8000020,\r\n\t            0xf: 0x20820,\r\n\t            0x80000000: 0x800,\r\n\t            0x80000001: 0x8020820,\r\n\t            0x80000002: 0x8000820,\r\n\t            0x80000003: 0x8000000,\r\n\t            0x80000004: 0x8020000,\r\n\t            0x80000005: 0x20800,\r\n\t            0x80000006: 0x20820,\r\n\t            0x80000007: 0x20,\r\n\t            0x80000008: 0x8000020,\r\n\t            0x80000009: 0x820,\r\n\t            0x8000000a: 0x20020,\r\n\t            0x8000000b: 0x8020800,\r\n\t            0x8000000c: 0x0,\r\n\t            0x8000000d: 0x8020020,\r\n\t            0x8000000e: 0x8000800,\r\n\t            0x8000000f: 0x20000,\r\n\t            0x10: 0x20820,\r\n\t            0x11: 0x8020800,\r\n\t            0x12: 0x20,\r\n\t            0x13: 0x800,\r\n\t            0x14: 0x8000800,\r\n\t            0x15: 0x8000020,\r\n\t            0x16: 0x8020020,\r\n\t            0x17: 0x20000,\r\n\t            0x18: 0x0,\r\n\t            0x19: 0x20020,\r\n\t            0x1a: 0x8020000,\r\n\t            0x1b: 0x8000820,\r\n\t            0x1c: 0x8020820,\r\n\t            0x1d: 0x20800,\r\n\t            0x1e: 0x820,\r\n\t            0x1f: 0x8000000,\r\n\t            0x80000010: 0x20000,\r\n\t            0x80000011: 0x800,\r\n\t            0x80000012: 0x8020020,\r\n\t            0x80000013: 0x20820,\r\n\t            0x80000014: 0x20,\r\n\t            0x80000015: 0x8020000,\r\n\t            0x80000016: 0x8000000,\r\n\t            0x80000017: 0x8000820,\r\n\t            0x80000018: 0x8020820,\r\n\t            0x80000019: 0x8000020,\r\n\t            0x8000001a: 0x8000800,\r\n\t            0x8000001b: 0x0,\r\n\t            0x8000001c: 0x20800,\r\n\t            0x8000001d: 0x820,\r\n\t            0x8000001e: 0x20020,\r\n\t            0x8000001f: 0x8020800\r\n\t        }\r\n\t    ];\r\n\r\n\t    // Masks that select the SBOX input\r\n\t    var SBOX_MASK = [\r\n\t        0xf8000001, 0x1f800000, 0x01f80000, 0x001f8000,\r\n\t        0x0001f800, 0x00001f80, 0x000001f8, 0x8000001f\r\n\t    ];\r\n\r\n\t    /**\r\n\t     * DES block cipher algorithm.\r\n\t     */\r\n\t    var DES = C_algo.DES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\r\n\t            // Select 56 bits according to PC1\r\n\t            var keyBits = [];\r\n\t            for (var i = 0; i < 56; i++) {\r\n\t                var keyBitPos = PC1[i] - 1;\r\n\t                keyBits[i] = (keyWords[keyBitPos >>> 5] >>> (31 - keyBitPos % 32)) & 1;\r\n\t            }\r\n\r\n\t            // Assemble 16 subkeys\r\n\t            var subKeys = this._subKeys = [];\r\n\t            for (var nSubKey = 0; nSubKey < 16; nSubKey++) {\r\n\t                // Create subkey\r\n\t                var subKey = subKeys[nSubKey] = [];\r\n\r\n\t                // Shortcut\r\n\t                var bitShift = BIT_SHIFTS[nSubKey];\r\n\r\n\t                // Select 48 bits according to PC2\r\n\t                for (var i = 0; i < 24; i++) {\r\n\t                    // Select from the left 28 key bits\r\n\t                    subKey[(i / 6) | 0] |= keyBits[((PC2[i] - 1) + bitShift) % 28] << (31 - i % 6);\r\n\r\n\t                    // Select from the right 28 key bits\r\n\t                    subKey[4 + ((i / 6) | 0)] |= keyBits[28 + (((PC2[i + 24] - 1) + bitShift) % 28)] << (31 - i % 6);\r\n\t                }\r\n\r\n\t                // Since each subkey is applied to an expanded 32-bit input,\r\n\t                // the subkey can be broken into 8 values scaled to 32-bits,\r\n\t                // which allows the key to be used without expansion\r\n\t                subKey[0] = (subKey[0] << 1) | (subKey[0] >>> 31);\r\n\t                for (var i = 1; i < 7; i++) {\r\n\t                    subKey[i] = subKey[i] >>> ((i - 1) * 4 + 3);\r\n\t                }\r\n\t                subKey[7] = (subKey[7] << 5) | (subKey[7] >>> 27);\r\n\t            }\r\n\r\n\t            // Compute inverse subkeys\r\n\t            var invSubKeys = this._invSubKeys = [];\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                invSubKeys[i] = subKeys[15 - i];\r\n\t            }\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._subKeys);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._invSubKeys);\r\n\t        },\r\n\r\n\t        _doCryptBlock: function (M, offset, subKeys) {\r\n\t            // Get input\r\n\t            this._lBlock = M[offset];\r\n\t            this._rBlock = M[offset + 1];\r\n\r\n\t            // Initial permutation\r\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\r\n\t            exchangeLR.call(this, 16, 0x0000ffff);\r\n\t            exchangeRL.call(this, 2,  0x33333333);\r\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\r\n\t            exchangeLR.call(this, 1,  0x55555555);\r\n\r\n\t            // Rounds\r\n\t            for (var round = 0; round < 16; round++) {\r\n\t                // Shortcuts\r\n\t                var subKey = subKeys[round];\r\n\t                var lBlock = this._lBlock;\r\n\t                var rBlock = this._rBlock;\r\n\r\n\t                // Feistel function\r\n\t                var f = 0;\r\n\t                for (var i = 0; i < 8; i++) {\r\n\t                    f |= SBOX_P[i][((rBlock ^ subKey[i]) & SBOX_MASK[i]) >>> 0];\r\n\t                }\r\n\t                this._lBlock = rBlock;\r\n\t                this._rBlock = lBlock ^ f;\r\n\t            }\r\n\r\n\t            // Undo swap from last round\r\n\t            var t = this._lBlock;\r\n\t            this._lBlock = this._rBlock;\r\n\t            this._rBlock = t;\r\n\r\n\t            // Final permutation\r\n\t            exchangeLR.call(this, 1,  0x55555555);\r\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\r\n\t            exchangeRL.call(this, 2,  0x33333333);\r\n\t            exchangeLR.call(this, 16, 0x0000ffff);\r\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\r\n\r\n\t            // Set output\r\n\t            M[offset] = this._lBlock;\r\n\t            M[offset + 1] = this._rBlock;\r\n\t        },\r\n\r\n\t        keySize: 64/32,\r\n\r\n\t        ivSize: 64/32,\r\n\r\n\t        blockSize: 64/32\r\n\t    });\r\n\r\n\t    // Swap bits across the left and right words\r\n\t    function exchangeLR(offset, mask) {\r\n\t        var t = ((this._lBlock >>> offset) ^ this._rBlock) & mask;\r\n\t        this._rBlock ^= t;\r\n\t        this._lBlock ^= t << offset;\r\n\t    }\r\n\r\n\t    function exchangeRL(offset, mask) {\r\n\t        var t = ((this._rBlock >>> offset) ^ this._lBlock) & mask;\r\n\t        this._lBlock ^= t;\r\n\t        this._rBlock ^= t << offset;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.DES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.DES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.DES = BlockCipher._createHelper(DES);\r\n\r\n\t    /**\r\n\t     * Triple-DES block cipher algorithm.\r\n\t     */\r\n\t    var TripleDES = C_algo.TripleDES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\t            // Make sure the key length is valid (64, 128 or >= 192 bit)\r\n\t            if (keyWords.length !== 2 && keyWords.length !== 4 && keyWords.length < 6) {\r\n\t                throw new Error('Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.');\r\n\t            }\r\n\r\n\t            // Extend the key according to the keying options defined in 3DES standard\r\n\t            var key1 = keyWords.slice(0, 2);\r\n\t            var key2 = keyWords.length < 4 ? keyWords.slice(0, 2) : keyWords.slice(2, 4);\r\n\t            var key3 = keyWords.length < 6 ? keyWords.slice(0, 2) : keyWords.slice(4, 6);\r\n\r\n\t            // Create DES instances\r\n\t            this._des1 = DES.createEncryptor(WordArray.create(key1));\r\n\t            this._des2 = DES.createEncryptor(WordArray.create(key2));\r\n\t            this._des3 = DES.createEncryptor(WordArray.create(key3));\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._des1.encryptBlock(M, offset);\r\n\t            this._des2.decryptBlock(M, offset);\r\n\t            this._des3.encryptBlock(M, offset);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            this._des3.decryptBlock(M, offset);\r\n\t            this._des2.encryptBlock(M, offset);\r\n\t            this._des1.decryptBlock(M, offset);\r\n\t        },\r\n\r\n\t        keySize: 192/32,\r\n\r\n\t        ivSize: 64/32,\r\n\r\n\t        blockSize: 64/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.TripleDES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.TripleDES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.TripleDES = BlockCipher._createHelper(TripleDES);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    /**\r\n\t     * RC4 stream cipher algorithm.\r\n\t     */\r\n\t    var RC4 = C_algo.RC4 = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\t            var keySigBytes = key.sigBytes;\r\n\r\n\t            // Init sbox\r\n\t            var S = this._S = [];\r\n\t            for (var i = 0; i < 256; i++) {\r\n\t                S[i] = i;\r\n\t            }\r\n\r\n\t            // Key setup\r\n\t            for (var i = 0, j = 0; i < 256; i++) {\r\n\t                var keyByteIndex = i % keySigBytes;\r\n\t                var keyByte = (keyWords[keyByteIndex >>> 2] >>> (24 - (keyByteIndex % 4) * 8)) & 0xff;\r\n\r\n\t                j = (j + S[i] + keyByte) % 256;\r\n\r\n\t                // Swap\r\n\t                var t = S[i];\r\n\t                S[i] = S[j];\r\n\t                S[j] = t;\r\n\t            }\r\n\r\n\t            // Counters\r\n\t            this._i = this._j = 0;\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            M[offset] ^= generateKeystreamWord.call(this);\r\n\t        },\r\n\r\n\t        keySize: 256/32,\r\n\r\n\t        ivSize: 0\r\n\t    });\r\n\r\n\t    function generateKeystreamWord() {\r\n\t        // Shortcuts\r\n\t        var S = this._S;\r\n\t        var i = this._i;\r\n\t        var j = this._j;\r\n\r\n\t        // Generate keystream word\r\n\t        var keystreamWord = 0;\r\n\t        for (var n = 0; n < 4; n++) {\r\n\t            i = (i + 1) % 256;\r\n\t            j = (j + S[i]) % 256;\r\n\r\n\t            // Swap\r\n\t            var t = S[i];\r\n\t            S[i] = S[j];\r\n\t            S[j] = t;\r\n\r\n\t            keystreamWord |= S[(S[i] + S[j]) % 256] << (24 - n * 8);\r\n\t        }\r\n\r\n\t        // Update counters\r\n\t        this._i = i;\r\n\t        this._j = j;\r\n\r\n\t        return keystreamWord;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RC4.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RC4.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RC4 = StreamCipher._createHelper(RC4);\r\n\r\n\t    /**\r\n\t     * Modified RC4 stream cipher algorithm.\r\n\t     */\r\n\t    var RC4Drop = C_algo.RC4Drop = RC4.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} drop The number of keystream words to drop. Default 192\r\n\t         */\r\n\t        cfg: RC4.cfg.extend({\r\n\t            drop: 192\r\n\t        }),\r\n\r\n\t        _doReset: function () {\r\n\t            RC4._doReset.call(this);\r\n\r\n\t            // Drop\r\n\t            for (var i = this.cfg.drop; i > 0; i--) {\r\n\t                generateKeystreamWord.call(this);\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RC4Drop.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RC4Drop.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RC4Drop = StreamCipher._createHelper(RC4Drop);\r\n\t}());\r\n\r\n\r\n\t/** @preserve\r\n\t * Counter block mode compatible with  Dr Brian Gladman fileenc.c\r\n\t * derived from CryptoJS.mode.CTR\r\n\t * Jan Hruby jhruby.web@gmail.com\r\n\t */\r\n\tCryptoJS.mode.CTRGladman = (function () {\r\n\t    var CTRGladman = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t\tfunction incWord(word)\r\n\t\t{\r\n\t\t\tif (((word >> 24) & 0xff) === 0xff) { //overflow\r\n\t\t\tvar b1 = (word >> 16)&0xff;\r\n\t\t\tvar b2 = (word >> 8)&0xff;\r\n\t\t\tvar b3 = word & 0xff;\r\n\r\n\t\t\tif (b1 === 0xff) // overflow b1\r\n\t\t\t{\r\n\t\t\tb1 = 0;\r\n\t\t\tif (b2 === 0xff)\r\n\t\t\t{\r\n\t\t\t\tb2 = 0;\r\n\t\t\t\tif (b3 === 0xff)\r\n\t\t\t\t{\r\n\t\t\t\t\tb3 = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t++b3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t++b2;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t++b1;\r\n\t\t\t}\r\n\r\n\t\t\tword = 0;\r\n\t\t\tword += (b1 << 16);\r\n\t\t\tword += (b2 << 8);\r\n\t\t\tword += b3;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\tword += (0x01 << 24);\r\n\t\t\t}\r\n\t\t\treturn word;\r\n\t\t}\r\n\r\n\t\tfunction incCounter(counter)\r\n\t\t{\r\n\t\t\tif ((counter[0] = incWord(counter[0])) === 0)\r\n\t\t\t{\r\n\t\t\t\t// encr_data in fileenc.c from  Dr Brian Gladman's counts only with DWORD j < 8\r\n\t\t\t\tcounter[1] = incWord(counter[1]);\r\n\t\t\t}\r\n\t\t\treturn counter;\r\n\t\t}\r\n\r\n\t    var Encryptor = CTRGladman.Encryptor = CTRGladman.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var counter = this._counter;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                counter = this._counter = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\r\n\t\t\t\tincCounter(counter);\r\n\r\n\t\t\t\tvar keystream = counter.slice(0);\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    CTRGladman.Decryptor = Encryptor;\r\n\r\n\t    return CTRGladman;\r\n\t}());\r\n\r\n\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable objects\r\n\t    var S  = [];\r\n\t    var C_ = [];\r\n\t    var G  = [];\r\n\r\n\t    /**\r\n\t     * Rabbit stream cipher algorithm\r\n\t     */\r\n\t    var Rabbit = C_algo.Rabbit = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var K = this._key.words;\r\n\t            var iv = this.cfg.iv;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                K[i] = (((K[i] << 8)  | (K[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((K[i] << 24) | (K[i] >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Generate initial state values\r\n\t            var X = this._X = [\r\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\r\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\r\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\r\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\r\n\t            ];\r\n\r\n\t            // Generate initial counter values\r\n\t            var C = this._C = [\r\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\r\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\r\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\r\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\r\n\t            ];\r\n\r\n\t            // Carry bit\r\n\t            this._b = 0;\r\n\r\n\t            // Iterate the system four times\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                nextState.call(this);\r\n\t            }\r\n\r\n\t            // Modify the counters\r\n\t            for (var i = 0; i < 8; i++) {\r\n\t                C[i] ^= X[(i + 4) & 7];\r\n\t            }\r\n\r\n\t            // IV setup\r\n\t            if (iv) {\r\n\t                // Shortcuts\r\n\t                var IV = iv.words;\r\n\t                var IV_0 = IV[0];\r\n\t                var IV_1 = IV[1];\r\n\r\n\t                // Generate four subvectors\r\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\r\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\r\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\r\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\r\n\r\n\t                // Modify counter values\r\n\t                C[0] ^= i0;\r\n\t                C[1] ^= i1;\r\n\t                C[2] ^= i2;\r\n\t                C[3] ^= i3;\r\n\t                C[4] ^= i0;\r\n\t                C[5] ^= i1;\r\n\t                C[6] ^= i2;\r\n\t                C[7] ^= i3;\r\n\r\n\t                // Iterate the system four times\r\n\t                for (var i = 0; i < 4; i++) {\r\n\t                    nextState.call(this);\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var X = this._X;\r\n\r\n\t            // Iterate the system\r\n\t            nextState.call(this);\r\n\r\n\t            // Generate four keystream words\r\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\r\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\r\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\r\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\r\n\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Swap endian\r\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\r\n\r\n\t                // Encrypt\r\n\t                M[offset + i] ^= S[i];\r\n\t            }\r\n\t        },\r\n\r\n\t        blockSize: 128/32,\r\n\r\n\t        ivSize: 64/32\r\n\t    });\r\n\r\n\t    function nextState() {\r\n\t        // Shortcuts\r\n\t        var X = this._X;\r\n\t        var C = this._C;\r\n\r\n\t        // Save old counter values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            C_[i] = C[i];\r\n\t        }\r\n\r\n\t        // Calculate new counter values\r\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\r\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\r\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\r\n\r\n\t        // Calculate the g-values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            var gx = X[i] + C[i];\r\n\r\n\t            // Construct high and low argument for squaring\r\n\t            var ga = gx & 0xffff;\r\n\t            var gb = gx >>> 16;\r\n\r\n\t            // Calculate high and low result of squaring\r\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\r\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\r\n\r\n\t            // High XOR low\r\n\t            G[i] = gh ^ gl;\r\n\t        }\r\n\r\n\t        // Calculate new state values\r\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\r\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\r\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\r\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\r\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\r\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\r\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\r\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.Rabbit.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.Rabbit.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.Rabbit = StreamCipher._createHelper(Rabbit);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Counter block mode.\r\n\t */\r\n\tCryptoJS.mode.CTR = (function () {\r\n\t    var CTR = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    var Encryptor = CTR.Encryptor = CTR.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var counter = this._counter;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                counter = this._counter = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\t            var keystream = counter.slice(0);\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Increment counter\r\n\t            counter[blockSize - 1] = (counter[blockSize - 1] + 1) | 0\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    CTR.Decryptor = Encryptor;\r\n\r\n\t    return CTR;\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable objects\r\n\t    var S  = [];\r\n\t    var C_ = [];\r\n\t    var G  = [];\r\n\r\n\t    /**\r\n\t     * Rabbit stream cipher algorithm.\r\n\t     *\r\n\t     * This is a legacy version that neglected to convert the key to little-endian.\r\n\t     * This error doesn't affect the cipher's security,\r\n\t     * but it does affect its compatibility with other implementations.\r\n\t     */\r\n\t    var RabbitLegacy = C_algo.RabbitLegacy = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var K = this._key.words;\r\n\t            var iv = this.cfg.iv;\r\n\r\n\t            // Generate initial state values\r\n\t            var X = this._X = [\r\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\r\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\r\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\r\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\r\n\t            ];\r\n\r\n\t            // Generate initial counter values\r\n\t            var C = this._C = [\r\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\r\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\r\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\r\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\r\n\t            ];\r\n\r\n\t            // Carry bit\r\n\t            this._b = 0;\r\n\r\n\t            // Iterate the system four times\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                nextState.call(this);\r\n\t            }\r\n\r\n\t            // Modify the counters\r\n\t            for (var i = 0; i < 8; i++) {\r\n\t                C[i] ^= X[(i + 4) & 7];\r\n\t            }\r\n\r\n\t            // IV setup\r\n\t            if (iv) {\r\n\t                // Shortcuts\r\n\t                var IV = iv.words;\r\n\t                var IV_0 = IV[0];\r\n\t                var IV_1 = IV[1];\r\n\r\n\t                // Generate four subvectors\r\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\r\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\r\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\r\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\r\n\r\n\t                // Modify counter values\r\n\t                C[0] ^= i0;\r\n\t                C[1] ^= i1;\r\n\t                C[2] ^= i2;\r\n\t                C[3] ^= i3;\r\n\t                C[4] ^= i0;\r\n\t                C[5] ^= i1;\r\n\t                C[6] ^= i2;\r\n\t                C[7] ^= i3;\r\n\r\n\t                // Iterate the system four times\r\n\t                for (var i = 0; i < 4; i++) {\r\n\t                    nextState.call(this);\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var X = this._X;\r\n\r\n\t            // Iterate the system\r\n\t            nextState.call(this);\r\n\r\n\t            // Generate four keystream words\r\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\r\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\r\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\r\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\r\n\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Swap endian\r\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\r\n\r\n\t                // Encrypt\r\n\t                M[offset + i] ^= S[i];\r\n\t            }\r\n\t        },\r\n\r\n\t        blockSize: 128/32,\r\n\r\n\t        ivSize: 64/32\r\n\t    });\r\n\r\n\t    function nextState() {\r\n\t        // Shortcuts\r\n\t        var X = this._X;\r\n\t        var C = this._C;\r\n\r\n\t        // Save old counter values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            C_[i] = C[i];\r\n\t        }\r\n\r\n\t        // Calculate new counter values\r\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\r\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\r\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\r\n\r\n\t        // Calculate the g-values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            var gx = X[i] + C[i];\r\n\r\n\t            // Construct high and low argument for squaring\r\n\t            var ga = gx & 0xffff;\r\n\t            var gb = gx >>> 16;\r\n\r\n\t            // Calculate high and low result of squaring\r\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\r\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\r\n\r\n\t            // High XOR low\r\n\t            G[i] = gh ^ gl;\r\n\t        }\r\n\r\n\t        // Calculate new state values\r\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\r\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\r\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\r\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\r\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\r\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\r\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\r\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RabbitLegacy.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RabbitLegacy.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RabbitLegacy = StreamCipher._createHelper(RabbitLegacy);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Zero padding strategy.\r\n\t */\r\n\tCryptoJS.pad.ZeroPadding = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcut\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Pad\r\n\t        data.clamp();\r\n\t        data.sigBytes += blockSizeBytes - ((data.sigBytes % blockSizeBytes) || blockSizeBytes);\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Shortcut\r\n\t        var dataWords = data.words;\r\n\r\n\t        // Unpad\r\n\t        var i = data.sigBytes - 1;\r\n\t        for (var i = data.sigBytes - 1; i >= 0; i--) {\r\n\t            if (((dataWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff)) {\r\n\t                data.sigBytes = i + 1;\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t};\r\n\r\n\r\n    return {\r\n        init: init,\r\n        cryptoJS: CryptoJS\r\n      }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fontFamily: {\r\n    'Arial,Helvetica,sans-serif': 'Arial',\r\n    'Georgia,serif': 'Georgia',\r\n    'Impact,Charcoal,sans-serif': 'Impact',\r\n    'Tahoma,Geneva,sans-serif': 'Tahoma',\r\n    'Times New Roman,Times,serif,-webkit-standard': 'Times New Roman',\r\n    'Verdana,Geneva,sans-serif': 'Verdana'\r\n  },\r\n  fontFamilySelection: false,\r\n  fontFamilyDefaultSelection: 'Font Family'\r\n})\r\n\r\nFE.PLUGINS.fontFamily = function (editor) {\r\n  const { $ } = editor\r\n\r\n  function apply(val) {\r\n    editor.format.applyStyle('font-family', val)\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    $dropdown.find('.fr-command.fr-active').removeClass('fr-active').attr('aria-selected', false)\r\n    $dropdown.find(`.fr-command[data-param1=\"${_getSelection()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n\r\n  function _getArray(val) {\r\n    const font_array = val.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'| /g, '').split(',')\r\n\r\n    return $(this).grep(font_array, function (txt) { return txt.length > 0 })\r\n  }\r\n\r\n  /**\r\n   * Return first match position.\r\n   */\r\n  function _matches(array1, array2) {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      for (let j = 0; j < array2.length; j++) {\r\n        if (array1[i].toLowerCase() === array2[j].toLowerCase()) {\r\n          return [i, j]\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  function _getSelection() {\r\n    const val = $(editor.selection.element()).css('font-family')\r\n    const font_array = _getArray(val)\r\n\r\n    const font_matches = []\r\n\r\n    for (const key in editor.opts.fontFamily) {\r\n      if (editor.opts.fontFamily.hasOwnProperty(key)) {\r\n        const c_font_array = _getArray(key)\r\n\r\n        const match = _matches(font_array, c_font_array)\r\n\r\n        if (match) {\r\n          font_matches.push([key, match])\r\n        }\r\n      }\r\n    }\r\n\r\n    if (font_matches.length === 0) return null\r\n\r\n    // Sort matches by their position.\r\n    // Times,Arial should be detected as being Times, not Arial.\r\n    font_matches.sort(function (a, b) {\r\n      const f_diff = a[1][0] - b[1][0]\r\n\r\n      if (f_diff === 0) {\r\n        return a[1][1] - b[1][1]\r\n      }\r\n      else {\r\n        return f_diff\r\n      }\r\n    })\r\n\r\n    return font_matches[0][0]\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.fontFamilySelection) {\r\n      const val = $(editor.selection.element()).css('font-family').replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'|/g, '').split(',')\r\n\r\n      $btn.find('> span').text(editor.opts.fontFamily[_getSelection()] || val[0] || editor.language.translate(editor.opts.fontFamilyDefaultSelection))\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fontFamily', {\r\n  type: 'dropdown',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.fontFamilySelection\r\n  },\r\n  defaultSelection: function (editor) {\r\n    return editor.opts.fontFamilyDefaultSelection\r\n  },\r\n  displaySelectionWidth: 120,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.fontFamily\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontFamily\" data-param1=\"${val}\" \r\n        style=\"font-family: ${val}\" title=\"${options[val]}\">${options[val]}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Font Family',\r\n  callback: function (cmd, val) {\r\n    this.fontFamily.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fontFamily.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.fontFamily.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'fontFamily'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fontFamily', {\r\n  NAME: 'font',\r\n  SVG_KEY: 'fontFamily'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fontSize: ['8', '9', '10', '11', '12', '14', '18', '24', '30', '36', '48', '60', '72', '96'],\r\n  fontSizeSelection: false,\r\n  fontSizeDefaultSelection: '12',\r\n  fontSizeUnit: 'px'\r\n})\r\n\r\nFE.PLUGINS.fontSize = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function apply(val) {\r\n    editor.format.applyStyle('font-size', val)\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    let val = $(editor.selection.element()).css('font-size')\r\n\r\n    if (editor.opts.fontSizeUnit === 'pt') {\r\n      val = `${Math.round(parseFloat(val, 10) * 72 / 96)}pt`\r\n    }\r\n\r\n    $dropdown.find('.fr-command.fr-active').removeClass('fr-active').attr('aria-selected', false)\r\n    $dropdown.find(`.fr-command[data-param1=\"${val}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.fontSizeSelection) {\r\n      let val = editor.helpers.getPX($(editor.selection.element()).css('font-size'))\r\n\r\n      if (editor.opts.fontSizeUnit === 'pt') {\r\n        val = `${Math.round(parseFloat(val, 10) * 72 / 96)}pt`\r\n      }\r\n\r\n      $btn.find('> span').text(val)\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fontSize', {\r\n  type: 'dropdown',\r\n  title: 'Font Size',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.fontSizeSelection\r\n  },\r\n  displaySelectionWidth: 30,\r\n  defaultSelection: function (editor) {\r\n    return editor.opts.fontSizeDefaultSelection\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { fontSize : options } = this.opts\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      const val = options[i]\r\n      c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontSize\" data-param1=\"${val}${this.opts.fontSizeUnit}\" title=\"${val}\">${val}</a></li>`\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.fontSize.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fontSize.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.fontSize.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'fontSize'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fontSize', {\r\n  NAME: 'text-height',\r\n  SVG_KEY: 'fontSize'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'forms.edit': '[_BUTTONS_]',\r\n  'forms.update': '[_BUTTONS_][_TEXT_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  formEditButtons: ['inputStyle', 'inputEdit'],\r\n  formStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-large': 'Large'\r\n  },\r\n  formMultipleStyles: true,\r\n  formUpdateButtons: ['inputBack', '|']\r\n})\r\n\r\n\r\n\r\nFE.PLUGINS.forms = function (editor) {\r\n  const { $ } = editor\r\n  let current_input \r\n\r\n  /**\r\n   * Input mousedown.\r\n   */\r\n  function _inputMouseDown(e) {\r\n    editor.selection.clear() \r\n    $(this).data('mousedown', true) \r\n  }\r\n\r\n  /**\r\n   * Mouseup on the input.\r\n   */\r\n  function _inputMouseUp(e) {\r\n\r\n    // Mousedown was made.\r\n    if ($(this).data('mousedown')) {\r\n      e.stopPropagation() \r\n      $(this).removeData('mousedown') \r\n\r\n      current_input = this \r\n\r\n      showEditPopup(this) \r\n    }\r\n\r\n    e.preventDefault() \r\n  }\r\n\r\n  /**\r\n   * Cancel if mousedown was made on any input.\r\n   */\r\n  function _cancelSelection() {\r\n    editor.$el.find('input, textarea, button').removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Touch move.\r\n   */\r\n  function _inputTouchMove() {\r\n    $(this).removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Assign the input events.\r\n   */\r\n  function _bindEvents() {\r\n    editor.events.$on(editor.$el, editor._mousedown, 'input, textarea, button', _inputMouseDown) \r\n    editor.events.$on(editor.$el, editor._mouseup, 'input, textarea, button', _inputMouseUp) \r\n    editor.events.$on(editor.$el, 'touchmove', 'input, textarea, button', _inputTouchMove) \r\n    editor.events.$on(editor.$el, editor._mouseup, _cancelSelection) \r\n    editor.events.$on(editor.$win, editor._mouseup, _cancelSelection) \r\n\r\n    _initUpdatePopup(true) \r\n  }\r\n\r\n  /**\r\n   * Get the current button.\r\n   */\r\n  function getInput() {\r\n    if (current_input) return current_input \r\n\r\n    return null \r\n  }\r\n\r\n  /**\r\n   * Init the edit button popup.\r\n   */\r\n  function _initEditPopup() {\r\n\r\n    // Button edit buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formEditButtons.length > 0) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formEditButtons)}</div>` \r\n    }\r\n\r\n    const template = {\r\n      buttons: buttons\r\n    } \r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.edit', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-edit', function () {\r\n        if (getInput() && editor.popups.isVisible('forms.edit')) {\r\n          showEditPopup(getInput()) \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the edit button popup.\r\n   */\r\n  function showEditPopup(input) {\r\n    const hideEditPopups = ['checkbox', 'radio']\r\n\r\n    if (hideEditPopups.indexOf(input.type) != -1) {\r\n      return\r\n    }\r\n\r\n    let $popup = editor.popups.get('forms.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    current_input = input \r\n    const $input = $(input) \r\n\r\n    editor.popups.refresh('forms.edit') \r\n\r\n    editor.popups.setContainer('forms.edit', editor.$sc) \r\n    let left = $input.offset().left + $input.outerWidth() / 2\r\n    let top = $input.offset().top + $input.outerHeight()\r\n\r\n    editor.popups.show('forms.edit', left, top, $input.outerHeight()) \r\n  }\r\n\r\n  /**\r\n   * Refresh update button popup callback.\r\n   */\r\n  function _refreshUpdateCallback() {\r\n    const $popup = editor.popups.get('forms.update') \r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n\r\n      if ($input.is('button')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.text()) \r\n      }\r\n      else if ($input.is('input[type=button]') || $input.is('input[type=submit]') || $input.is('input[type=reset]')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.val()) \r\n      }\r\n      else {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.attr('placeholder')) \r\n      }\r\n    }\r\n\r\n    $popup.find('input[type=\"text\"][name=\"text\"]').trigger('change') \r\n  }\r\n\r\n  /**\r\n   * Hide update button popup callback.\r\n   */\r\n  function _hideUpdateCallback() {\r\n    current_input = null \r\n  }\r\n\r\n  /**\r\n   * Init update button popup.\r\n   */\r\n  function _initUpdatePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('forms.update', _refreshUpdateCallback) \r\n      editor.popups.onHide('forms.update', _hideUpdateCallback) \r\n\r\n      return true \r\n    }\r\n\r\n    // Button update buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formUpdateButtons.length >= 1) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formUpdateButtons)}</div>` \r\n    }\r\n\r\n    let text_layer = '' \r\n    let tab_idx = 0 \r\n    text_layer = `<div class=\"fr-forms-text-layer fr-layer fr-active\"> \r\n    <div class=\"fr-input-line\"><input name=\"text\" type=\"text\" placeholder=\"Text\" tabIndex=\" ${(++tab_idx)} \"></div>\r\n    <div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" data-cmd=\"updateInput\" href=\"#\" tabIndex=\"${(++tab_idx)}\" type=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: buttons,\r\n      text_layer: text_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.update', template) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the button update popup.\r\n   */\r\n  function showUpdatePopup() {\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      let $popup = editor.popups.get('forms.update') \r\n\r\n      if (!$popup) $popup = _initUpdatePopup() \r\n\r\n      if (!editor.popups.isVisible('forms.update')) {\r\n        editor.popups.refresh('forms.update') \r\n      }\r\n\r\n      editor.popups.setContainer('forms.update', editor.$sc) \r\n      let left = $input.offset().left + $input.outerWidth() / 2\r\n      let top = $input.offset().top + $input.outerHeight()\r\n      \r\n      editor.popups.show('forms.update', left, top, $input.outerHeight()) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n  function applyStyle(val, formStyles, multipleStyles) {\r\n    if (typeof formStyles === 'undefined') formStyles = editor.opts.formStyles \r\n\r\n    if (typeof multipleStyles === 'undefined') multipleStyles = editor.opts.formMultipleStyles \r\n\r\n    const input = getInput() \r\n\r\n    if (!input) return false \r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(formStyles) \r\n      styles.splice(styles.indexOf(val), 1) \r\n      $(input).removeClass(styles.join(' ')) \r\n    }\r\n\r\n    $(input).toggleClass(val) \r\n  }\r\n\r\n  /**\r\n   * Back button in update button popup.\r\n   */\r\n  function back() {\r\n    editor.events.disableBlur() \r\n    editor.selection.restore() \r\n    editor.events.enableBlur() \r\n\r\n    const input = getInput() \r\n\r\n    if (input && editor.$wp) {\r\n      if (input.tagName === 'BUTTON') editor.selection.restore() \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hit the update button in the input popup.\r\n   */\r\n  function updateInput() {\r\n    const $popup = editor.popups.get('forms.update') \r\n\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n      const inputBtns = ['button', 'submit', 'reset'] \r\n      const val = $popup.find('input[type=\"text\"][name=\"text\"]').val() || '' \r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1988\r\n      // update the text content if input is a button\r\n      if ($input.is('button')) {\r\n        if (val.length) {\r\n          $input.text(val)\r\n        }\r\n        else {\r\n          // If tag is button, Update empty text.\r\n          $input.text('\\u200B')\r\n        }\r\n      }\r\n      else if (inputBtns.indexOf(input.type) != -1 ) {\r\n        $input.attr('value', val)\r\n      }\r\n\r\n      // update the place holder if input type is text\r\n      else {\r\n        $input.attr('placeholder', val) \r\n      }\r\n\r\n      editor.popups.hide('forms.update') \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Bind input events.\r\n    _bindEvents() \r\n\r\n    // Prevent form submit.\r\n    editor.events.$on(editor.$el, 'submit', 'form', function (e) {\r\n      e.preventDefault() \r\n\r\n      return false \r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    updateInput: updateInput,\r\n    getInput: getInput,\r\n    applyStyle: applyStyle,\r\n    showUpdatePopup: showUpdatePopup,\r\n    showEditPopup: showEditPopup,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Register command to update input.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n\r\n// Link styles.\r\nFE.DefineIcon('inputStyle', { NAME: 'magic', SVG_KEY: 'inlineStyle' })\r\nFE.RegisterCommand('inputStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\">'\r\n    const { formStyles : options } = this.opts \r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        c += `<li><a class=\"fr-command\" tabIndex=\"-1\" data-cmd=\"inputStyle\" data-param1=\"${cls}\">${this.language.translate(options[cls])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      this.forms.applyStyle(val) \r\n      this.forms.showEditPopup(input) \r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const { $ } = this\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1') \r\n        $(this).toggleClass('fr-active', $input.hasClass(cls)) \r\n      })\r\n    }\r\n  }\r\n}) \r\n\r\nFE.DefineIcon('inputEdit', { NAME: 'edit', SVG_KEY: 'edit' }) \r\nFE.RegisterCommand('inputEdit', {\r\n  title: 'Edit Button',\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.showUpdatePopup() \r\n  }\r\n})\r\n\r\nFE.DefineIcon('inputBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('inputBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.back() \r\n  }\r\n}) \r\n\r\n// Register command to update button.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.fullscreen = function (editor) {\r\n  const { $ } = editor\r\n  let old_scroll\r\n\r\n  /**\r\n   * Check if fullscreen mode is active.\r\n   */\r\n  const isActive = () => editor.$box.hasClass('fr-fullscreen')\r\n\r\n  /**\r\n   * Turn fullscreen on.\r\n   */\r\n  let height\r\n  let max_height\r\n  let z_index\r\n\r\n  function _on() {\r\n    if (editor.helpers.isIOS() && editor.core.hasFocus()) {\r\n      editor.$el.blur()\r\n\r\n      setTimeout(toggle, 250)\r\n\r\n      return false\r\n    }\r\n\r\n    old_scroll = editor.helpers.scrollTop()\r\n    editor.$box.toggleClass('fr-fullscreen')\r\n    $('body').first().toggleClass('fr-fullscreen')\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.$tb.data('parent', editor.$tb.parent())\r\n      editor.$box.prepend(editor.$tb)\r\n      if (editor.$tb.data('sticky-dummy')) {\r\n        editor.$tb.after(editor.$tb.data('sticky-dummy'))\r\n      }\r\n    }\r\n\r\n    ({ height } = editor.opts );\r\n    ({ heightMax: max_height } = editor.opts );\r\n    ({ z_index } = editor.opts );\r\n\r\n    // Take second toolbar into consideration when in fullscreen mode\r\n    editor.opts.height = editor.o_win.innerHeight - (editor.opts.toolbarInline ? 0 : editor.$tb.outerHeight() + (editor.$second_tb ? editor.$second_tb.outerHeight() : 0))\r\n    editor.opts.zIndex = 2147483641\r\n    editor.opts.heightMax = null\r\n    editor.size.refresh()\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.showInline()\r\n\r\n    let $parent_node = editor.$box.parent()\r\n\r\n    while (!$parent_node.first().is('body')) {\r\n      $parent_node.addClass('fr-fullscreen-wrapper')\r\n      $parent_node = $parent_node.parent()\r\n    }\r\n\r\n    if (editor.opts.toolbarContainer) {\r\n      editor.$box.prepend(editor.$tb)\r\n    }\r\n\r\n    editor.events.trigger('charCounter.update')\r\n    editor.events.trigger('codeView.update')\r\n    editor.$win.trigger('scroll')\r\n  }\r\n\r\n  /**\r\n   * Turn fullscreen off.\r\n   */\r\n  function _off() {\r\n    if (editor.helpers.isIOS() && editor.core.hasFocus()) {\r\n      editor.$el.blur()\r\n\r\n      setTimeout(toggle, 250)\r\n\r\n      return false\r\n    }\r\n\r\n    editor.$box.toggleClass('fr-fullscreen')\r\n    $('body').first().toggleClass('fr-fullscreen')\r\n\r\n    if(editor.$tb.data('parent')) {\r\n      editor.$tb.data('parent').prepend(editor.$tb)\r\n    }\r\n\r\n    if (editor.$tb.data('sticky-dummy')) {\r\n      editor.$tb.after(editor.$tb.data('sticky-dummy'))\r\n    }\r\n\r\n    editor.opts.height = height\r\n    editor.opts.heightMax = max_height\r\n    editor.opts.zIndex = z_index\r\n    editor.size.refresh()\r\n\r\n    $(editor.o_win).scrollTop(old_scroll)\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.showInline()\r\n\r\n    editor.events.trigger('charCounter.update')\r\n\r\n    if (editor.opts.toolbarSticky) {\r\n      if (editor.opts.toolbarStickyOffset) {\r\n        if (editor.opts.toolbarBottom) {\r\n          editor.$tb\r\n            .css('bottom', editor.opts.toolbarStickyOffset)\r\n            .data('bottom', editor.opts.toolbarStickyOffset)\r\n        }\r\n        else {\r\n          editor.$tb\r\n            .css('top', editor.opts.toolbarStickyOffset)\r\n            .data('top', editor.opts.toolbarStickyOffset)\r\n        }\r\n      }\r\n    }\r\n\r\n    let $parent_node = editor.$box.parent()\r\n\r\n    while (!$parent_node.first().is('body')) {\r\n      $parent_node.removeClass('fr-fullscreen-wrapper')\r\n      $parent_node = $parent_node.parent()\r\n    }\r\n\r\n    if (editor.opts.toolbarContainer) {\r\n      $(editor.opts.toolbarContainer).append(editor.$tb)\r\n    }\r\n\r\n    $(editor.o_win).trigger('scroll')\r\n    editor.events.trigger('codeView.update')\r\n  }\r\n\r\n  /**\r\n   * Exec fullscreen.\r\n   */\r\n  function toggle() {\r\n    if (!isActive()) {\r\n      _on()\r\n    }\r\n    else {\r\n      _off()\r\n    }\r\n\r\n    refresh(editor.$tb.find('.fr-command[data-cmd=\"fullscreen\"]'))\r\n    const moreText = editor.$tb.find('.fr-command[data-cmd=\"moreText\"]')\r\n    const moreParagraph = editor.$tb.find('.fr-command[data-cmd=\"moreParagraph\"]')\r\n    const moreRich = editor.$tb.find('.fr-command[data-cmd=\"moreRich\"]')\r\n    const moreMisc = editor.$tb.find('.fr-command[data-cmd=\"moreMisc\"]')\r\n\r\n    // Refresh the more button toolbars on fullscreen toggle for repositioning \r\n    moreText.length && editor.refresh.moreText(moreText)\r\n    moreParagraph.length && editor.refresh.moreParagraph(moreParagraph)\r\n    moreRich.length && editor.refresh.moreRich(moreRich)\r\n    moreMisc.length && editor.refresh.moreMisc(moreMisc)\r\n  }\r\n\r\n  function refresh($btn) {\r\n    const active = isActive()\r\n\r\n    $btn.toggleClass('fr-active', active).attr('aria-pressed', active)\r\n    $btn.find('> *').not('.fr-sr-only').replaceWith(!active ? editor.icon.create('fullscreen') : editor.icon.create('fullscreenCompress'))\r\n  }\r\n\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    editor.events.$on($(editor.o_win), 'resize', function () {\r\n      if (isActive()) {\r\n        _off()\r\n        _on()\r\n      }\r\n    })\r\n\r\n    editor.events.on('toolbar.hide', function () {\r\n      if (isActive() && editor.helpers.isMobile()) return false\r\n    })\r\n\r\n    editor.events.on('position.refresh', function () {\r\n      if (editor.helpers.isIOS()) {\r\n        return !isActive()\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n\r\n      // Exit full screen.\r\n      if (isActive()) {\r\n        _off()\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    toggle: toggle,\r\n    refresh: refresh,\r\n    isActive: isActive\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fullscreen', {\r\n  title: 'Fullscreen',\r\n  undo: false,\r\n  focus: false,\r\n  accessibilityFocus: true,\r\n  forcedRefresh: true,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.fullscreen.toggle()\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fullscreen.refresh($btn)\r\n  },\r\n  plugin: 'fullscreen'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fullscreen', {\r\n  NAME: 'expand',\r\n  SVG_KEY: 'fullscreen'\r\n})\r\n\r\nFE.DefineIcon('fullscreenCompress', {\r\n  NAME: 'compress',\r\n  SVG_KEY: 'exitFullscreen'\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  helpSets: [\r\n    {\r\n      title: 'Inline Editor',\r\n      commands: [\r\n        { val: 'OSkeyE', desc: 'Show the editor' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Common actions',\r\n      commands: [\r\n        { val: 'OSkeyC', desc: 'Copy' },\r\n        { val: 'OSkeyX', desc: 'Cut' },\r\n        { val: 'OSkeyV', desc: 'Paste' },\r\n        { val: 'OSkeyZ', desc: 'Undo' },\r\n        { val: 'OSkeyShift+Z', desc: 'Redo' },\r\n        { val: 'OSkeyK', desc: 'Insert Link' },\r\n        { val: 'OSkeyP', desc: 'Insert Image' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Basic Formatting',\r\n      commands: [\r\n        { val: 'OSkeyA', desc: 'Select All' },\r\n        { val: 'OSkeyB', desc: 'Bold' },\r\n        { val: 'OSkeyI', desc: 'Italic' },\r\n        { val: 'OSkeyU', desc: 'Underline' },\r\n        { val: 'OSkeyS', desc: 'Strikethrough' },\r\n        { val: 'OSkey]', desc: 'Increase Indent' },\r\n        { val: 'OSkey[', desc: 'Decrease Indent' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Quote',\r\n      commands: [\r\n        { val: 'OSkey\\'', desc: 'Increase quote level' },\r\n        { val: 'OSkeyShift+\\'', desc: 'Decrease quote level' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Image / Video',\r\n      commands: [\r\n        { val: 'OSkey+', desc: 'Resize larger' },\r\n        { val: 'OSkey-', desc: 'Resize smaller' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Table',\r\n      commands: [\r\n        { val: 'Alt+Space', desc: 'Select table cell' },\r\n        { val: 'Shift+Left/Right arrow', desc: 'Extend selection one cell' },\r\n        { val: 'Shift+Up/Down arrow', desc: 'Extend selection one row' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Navigation',\r\n      commands: [\r\n        { val: 'OSkey/', desc: 'Shortcuts' },\r\n        { val: 'Alt+F10', desc: 'Focus popup / toolbar' },\r\n        { val: 'Esc', desc: 'Return focus to previous position' }\r\n      ]\r\n    }\r\n  ]\r\n})\r\n\r\nFE.PLUGINS.help = function (editor) {\r\n  const { $ } = editor \r\n  let $modal\r\n  const modal_id = 'help'\r\n\r\n\r\n  /*\r\n   * Init Help.\r\n   */\r\n  const _init = () => {\r\n\r\n  }\r\n\r\n  /*\r\n   * Build html body.\r\n   */\r\n  function _buildBody() {\r\n\r\n    // Begin body.\r\n    let body = '<div class=\"fr-help-modal\">'\r\n\r\n    for (let i = 0; i < editor.opts.helpSets.length; i++) {\r\n      const set = editor.opts.helpSets[i]\r\n\r\n      // Set shortcuts table.\r\n      // Begin Table.\r\n      let group = '<table>'\r\n\r\n      // Set title.\r\n      group += `<thead><tr><th>${editor.language.translate(set.title)}</th></tr></thead>`\r\n      group += '<tbody>'\r\n\r\n      // Build commands table.\r\n      for (let j = 0; j < set.commands.length; j++) {\r\n        const command = set.commands[j]\r\n        group += '<tr>'\r\n\r\n        group += `<td>${editor.language.translate(command.desc)}</td>`\r\n        group += `<td>${command.val.replace('OSkey', editor.helpers.isMac() ? '&#8984;' : 'Ctrl+')}</td>`\r\n\r\n        group += '</tr>'\r\n      }\r\n\r\n      // End table.\r\n      group += '</tbody></table>'\r\n\r\n      // Append group to body.\r\n      body += group\r\n    }\r\n\r\n    // End body.\r\n    body += '</div>'\r\n\r\n    return body\r\n  }\r\n\r\n  /*\r\n   * Show help.\r\n   */\r\n  function show() {\r\n    if (!$modal) {\r\n      const head = `<h4>${editor.language.translate('Shortcuts')}</h4>`\r\n      const body = _buildBody()\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n      $modal = modalHash.$modal\r\n\r\n      // Resize help modal on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        editor.modals.resize(modal_id)\r\n      })\r\n    }\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    // Modal may not fit window size.\r\n    editor.modals.resize(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Hide help.\r\n   */\r\n  const hide = () => {\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    show: show,\r\n    hide: hide\r\n  }\r\n}\r\n\r\nFE.DefineIcon('help', { NAME: 'question', SVG_KEY: 'help' })\r\n\r\nFE.RegisterShortcut(FE.KEYCODE.SLASH, 'help', null, '/')\r\n\r\nFE.RegisterCommand('help', {\r\n  title: 'Help',\r\n  icon: 'help',\r\n  undo: false,\r\n  focus: false,\r\n  modal: true,\r\n  callback: function () {\r\n    this.help.show()\r\n  },\r\n  plugin: 'help',\r\n  showOnMobile: false\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'image.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]',\r\n  'image.edit': '[_BUTTONS_]',\r\n  'image.alt': '[_BUTTONS_][_ALT_LAYER_]',\r\n  'image.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  imageInsertButtons: ['imageBack', '|', 'imageUpload', 'imageByURL'],\r\n  imageEditButtons: ['imageReplace', 'imageAlign', 'imageCaption', 'imageRemove', 'imageLink', 'linkOpen', 'linkEdit', 'linkRemove', '-', 'imageDisplay', 'imageStyle', 'imageAlt', 'imageSize'],\r\n  imageAltButtons: ['imageBack', '|'],\r\n  imageSizeButtons: ['imageBack', '|'],\r\n  imageUpload: true,\r\n  imageUploadURL: null,\r\n  imageCORSProxy: 'https://cors-anywhere.froala.com',\r\n  imageUploadRemoteUrls: true,\r\n  imageUploadParam: 'file',\r\n  imageUploadParams: {},\r\n  imageUploadToS3: false,\r\n  imageUploadToAzure: false,\r\n  imageUploadMethod: 'POST',\r\n  imageMaxSize: 10 * 1024 * 1024,\r\n  imageAllowedTypes: ['jpeg', 'jpg', 'png', 'gif', 'webp'],\r\n  imageResize: true,\r\n  imageResizeWithPercent: false,\r\n  imageRoundPercent: false,\r\n  imageDefaultWidth: 300,\r\n  imageDefaultAlign: 'center',\r\n  imageDefaultDisplay: 'block',\r\n  imageSplitHTML: false,\r\n  imageStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-bordered': 'Bordered',\r\n    'fr-shadow': 'Shadow'\r\n  },\r\n  imageMove: true,\r\n  imageMultipleStyles: true,\r\n  imageTextNear: true,\r\n  imagePaste: true,\r\n  imagePasteProcess: false,\r\n  imageMinWidth: 16,\r\n  imageOutputSize: false,\r\n  imageDefaultMargin: 5,\r\n  imageAddNewLine: false\r\n})\r\n\r\nFE.PLUGINS.image = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_IMAGE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $current_image\r\n  let $image_resizer\r\n  let $handler\r\n  let $overlay\r\n  let mousedown = false\r\n\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n  const CORRUPTED_IMAGE = 8\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Image cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'Image file type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n  error_messages[CORRUPTED_IMAGE] = 'Image file is corrupted.'\r\n\r\n  /**\r\n   * Refresh the image insert popup.\r\n   */\r\n\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    const $url_input = $popup.find('.fr-image-by-url-layer input')\r\n    $url_input.val('')\r\n\r\n    if ($current_image) {\r\n      $url_input.val($current_image.attr('src'))\r\n    }\r\n\r\n    $url_input.trigger('change')\r\n  }\r\n\r\n  /**\r\n   * Show the image upload popup.\r\n   */\r\n\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertImage\"]')\r\n    let $popup = editor.popups.get('image.insert')\r\n    if (!$popup) $popup = _initInsertPopup()\r\n    hideProgressBar()\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('image.insert')\r\n      editor.popups.setContainer('image.insert', editor.$tb)\r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('image.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('image.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image edit popup.\r\n   */\r\n\r\n  function _showEditPopup() {\r\n    let $popup = editor.popups.get('image.edit')\r\n\r\n    if (!$popup) $popup = _initEditPopup()\r\n\r\n    if ($popup) {\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      editor.popups.setContainer('image.edit', editor.$sc)\r\n      editor.popups.refresh('image.edit')\r\n      let left = $el.offset().left + $el.outerWidth() / 2\r\n      const top = $el.offset().top + $el.outerHeight()\r\n\r\n      // Enhancement 2950\r\n      if ($current_image.hasClass('fr-uploading')) {\r\n        showProgressBar()\r\n      }\r\n      else {\r\n        editor.popups.show('image.edit', left, top, $el.outerHeight(), true)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar()\r\n  }\r\n\r\n  /**\r\n   * Convert style to classes.\r\n   */\r\n  function _convertStyleToClasses($img) {\r\n    if ($img.parents('.fr-img-caption').length > 0) {\r\n      $img = $img.parents('.fr-img-caption').first()\r\n    }\r\n\r\n    if (!$img.hasClass('fr-dii') && !$img.hasClass('fr-dib')) {\r\n      $img.addClass(`fr-fi${getAlign($img)[0]}`)\r\n      $img.addClass(`fr-di${getDisplay($img)[0]}`)\r\n\r\n      // Reset inline style.\r\n      $img.css('margin', '')\r\n      $img.css('float', '')\r\n      $img.css('display', '')\r\n      $img.css('z-index', '')\r\n      $img.css('position', '')\r\n      $img.css('overflow', '')\r\n      $img.css('vertical-align', '')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert classes to style.\r\n   */\r\n  function _convertClassesToStyle($img) {\r\n    if ($img.parents('.fr-img-caption').length > 0) {\r\n      $img = $img.parents('.fr-img-caption').first()\r\n    }\r\n\r\n    const d = $img.hasClass('fr-dib') ? 'block' : $img.hasClass('fr-dii') ? 'inline' : null\r\n    const a = $img.hasClass('fr-fil') ? 'left' : $img.hasClass('fr-fir') ? 'right' : getAlign($img)\r\n\r\n    _setStyle($img, d, a)\r\n\r\n    $img.removeClass('fr-dib fr-dii fr-fir fr-fil')\r\n  }\r\n\r\n  /**\r\n   * Refresh the image list.\r\n   */\r\n  function _refreshImageList() {\r\n    const images = editor.el.tagName == 'IMG' ? [editor.el] : editor.el.querySelectorAll('img')\r\n\r\n    for (let i = 0; i < images.length; i++) {\r\n      const $img = $(images[i])\r\n\r\n      if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n        if (editor.opts.imageDefaultAlign || editor.opts.imageDefaultDisplay) {\r\n          _convertStyleToClasses($img)\r\n        }\r\n\r\n        // Do not allow text near image.\r\n        if (!editor.opts.imageTextNear) {\r\n          if ($img.parents('.fr-img-caption').length > 0) {\r\n            $img.parents('.fr-img-caption').first().removeClass('fr-dii').addClass('fr-dib')\r\n          }\r\n          else {\r\n            $img.removeClass('fr-dii').addClass('fr-dib')\r\n          }\r\n        }\r\n      }\r\n      else if (!editor.opts.htmlUntouched && !editor.opts.useClasses) {\r\n        if (editor.opts.imageDefaultAlign || editor.opts.imageDefaultDisplay) {\r\n          _convertClassesToStyle($img)\r\n        }\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        $img.on('load', editor.size.syncIframe)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Keep images in sync when content changed.\r\n   */\r\n  let images\r\n\r\n  function _syncImages(loaded) {\r\n\r\n    if (typeof loaded === 'undefined') loaded = true\r\n\r\n    // Get current images.\r\n    const c_images = Array.prototype.slice.call(editor.el.querySelectorAll('img'))\r\n\r\n    // Current images src.\r\n    const image_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_images.length; i++) {\r\n      image_srcs.push(c_images[i].getAttribute('src'))\r\n\r\n      $(c_images[i]).toggleClass('fr-draggable', editor.opts.imageMove)\r\n\r\n      if (c_images[i].getAttribute('class') === '') c_images[i].removeAttribute('class')\r\n\r\n      if (c_images[i].getAttribute('style') === '') c_images[i].removeAttribute('style')\r\n\r\n      if (c_images[i].parentNode && c_images[i].parentNode.parentNode && editor.node.hasClass(c_images[i].parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = c_images[i].parentNode.parentNode\r\n\r\n        if (!editor.browser.mozilla) {\r\n          p_node.setAttribute('contenteditable', false)\r\n        }\r\n\r\n        p_node.setAttribute('draggable', false)\r\n        p_node.classList.add('fr-draggable')\r\n\r\n        const n_node = c_images[i].nextSibling\r\n\r\n        if (n_node && !editor.browser.mozilla) {\r\n          n_node.setAttribute('contenteditable', true)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Loop previous images and check their src.\r\n    if (images) {\r\n      for (i = 0; i < images.length; i++) {\r\n        if (image_srcs.indexOf(images[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('image.removed', [$(images[i])])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Loop new images and see which were not int the old ones.\r\n    if (images && loaded) {\r\n      const old_images_srcs = []\r\n\r\n      for (i = 0; i < images.length; i++) {\r\n        old_images_srcs.push(images[i].getAttribute('src'))\r\n      }\r\n\r\n      for (i = 0; i < c_images.length; i++) {\r\n        if (old_images_srcs.indexOf(c_images[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('image.loaded', [$(c_images[i])])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current images are the old ones.\r\n    images = c_images\r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n\r\n  function _repositionResizer() {\r\n    if (!$image_resizer) _initImageResizer()\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $container = editor.$wp || editor.$sc\r\n\r\n    $container.append($image_resizer)\r\n    $image_resizer.data('instance', editor)\r\n\r\n    let wrap_correction_top = $container.scrollTop() - (($container.css('position') != 'static' ? $container.offset().top : 0))\r\n    let wrap_correction_left = $container.scrollLeft() - (($container.css('position') != 'static' ? $container.offset().left : 0))\r\n\r\n    wrap_correction_left -= editor.helpers.getPX($container.css('border-left-width'))\r\n    wrap_correction_top -= editor.helpers.getPX($container.css('border-top-width'))\r\n\r\n    if (editor.$el.is('img') && editor.$sc.is('body')) {\r\n      wrap_correction_top = 0\r\n      wrap_correction_left = 0\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let iframePaddingTop = 0\r\n    let iframePaddingLeft = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $image_resizer\r\n      .css('top', (editor.opts.iframe ? $el.offset().top + iframePaddingTop : $el.offset().top + wrap_correction_top) - 1)\r\n      .css('left', (editor.opts.iframe ? $el.offset().left + iframePaddingLeft : $el.offset().left + wrap_correction_left) - 1)\r\n      .css('width', $el.get(0).getBoundingClientRect().width)\r\n      .css('height', $el.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active')\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>`\r\n  }\r\n\r\n  /**\r\n   * Set the image with\r\n   */\r\n  function _setWidth(width) {\r\n    if (hasCaption()) {\r\n      $current_image.parents('.fr-img-caption').css('width', width)\r\n    }\r\n    else {\r\n      $current_image.css('width', width)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.$el.find('img.fr-error').left) return false\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n    // Get offset.\r\n    let start_x = e.pageX || e.originalEvent.touches[0].pageX\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n      // See if the entire editor is inside iframe to adjust starting offset.\r\n      const oel = editor.$oel.get(0)\r\n      const doc = oel.ownerDocument\r\n      const win = doc.defaultView || doc.parentWindow\r\n      let editor_inside_iframe = false\r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE))\r\n      } catch (ex) { }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        start_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft\r\n      }\r\n    }\r\n\r\n    $handler = $(this)\r\n    $handler.data('start-x', start_x)\r\n    $handler.data('start-width', $current_image.width())\r\n    $handler.data('start-height', $current_image.height())\r\n\r\n    // Set current width.\r\n    let width = $current_image.width()\r\n\r\n    // Update width value if resizing with percent.\r\n    if (editor.opts.imageResizeWithPercent) {\r\n      const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n      width = (width / $(p_node).outerWidth() * 100).toFixed(2) + '%'\r\n    }\r\n\r\n    // Set the image width.\r\n    _setWidth(width)\r\n\r\n    $overlay.show()\r\n\r\n    editor.popups.hideAll()\r\n\r\n    _unmarkExit()\r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n    let real_image_size\r\n\r\n    if ($handler && $current_image) {\r\n      e.preventDefault()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null)\r\n\r\n      if (!c_x) return false\r\n\r\n      const s_x = $handler.data('start-x')\r\n      let diff_x = c_x - s_x\r\n      let width = $handler.data('start-width')\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x\r\n      }\r\n\r\n      if (editor.opts.imageResizeWithPercent) {\r\n        const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n        width = ((width + diff_x) / $(p_node).outerWidth() * 100).toFixed(2)\r\n\r\n        if (editor.opts.imageRoundPercent) width = Math.round(width)\r\n\r\n        // Set the image width.\r\n        _setWidth(`${width}%`)\r\n\r\n        // Get the real image width after resize.\r\n        if (hasCaption()) {\r\n          real_image_size = (editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n        else {\r\n          real_image_size = (editor.helpers.getPX($current_image.css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width && !editor.opts.imageRoundPercent) {\r\n          _setWidth(`${real_image_size}%`)\r\n        }\r\n\r\n        $current_image.css('height', '').removeAttr('height')\r\n      }\r\n      else {\r\n        if (width + diff_x >= editor.opts.imageMinWidth) {\r\n          // Set width for image parent node as well.\r\n          _setWidth(width + diff_x)\r\n\r\n          // Get the real image width after resize.\r\n          if (hasCaption()) {\r\n            real_image_size = editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width'))\r\n          }\r\n          else {\r\n            real_image_size = editor.helpers.getPX($current_image.css('width'))\r\n          }\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width + diff_x) {\r\n          _setWidth(real_image_size)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1963.\r\n        if (($current_image.attr('style') || '').match(/(^height:)|(; *height:)/) || $current_image.attr('height')) {\r\n          $current_image.css('height', $handler.data('start-height') * $current_image.width() / $handler.data('start-width'))\r\n          $current_image.removeAttr('height')\r\n        }\r\n      }\r\n\r\n      _repositionResizer()\r\n\r\n      editor.events.trigger('image.resize', [get()])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    if ($handler && $current_image) {\r\n      if (e) e.stopPropagation()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      $handler = null\r\n      $overlay.hide()\r\n      _repositionResizer()\r\n      _showEditPopup()\r\n\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('image.resizeEnd', [get()])\r\n    }\r\n    else{ //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n      $image_resizer.removeClass('fr-active')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n\r\n  function _throwError(code, response, $img) {\r\n    editor.edit.on()\r\n\r\n    if ($current_image) $current_image.addClass('fr-error')\r\n    // https://github.com/froala/wysiwyg-editor/issues/3407\r\n    if (error_messages[code]) {\r\n      _showErrorMessage(editor.language.translate(error_messages[code]))\r\n    }\r\n    else {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'))\r\n    }\r\n\r\n    // Remove image if it exists.\r\n    if (!$current_image && $img) remove($img)\r\n\r\n    editor.events.trigger('image.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response,\r\n    $img\r\n    ])\r\n  }\r\n\r\n  /**\r\n   * Init the image edit popup.\r\n   */\r\n\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      if (editor.$wp) {\r\n        editor.events.$on(editor.$wp, 'scroll.image-edit', function () {\r\n          if ($current_image && editor.popups.isVisible('image.edit')) {\r\n            editor.events.disableBlur()\r\n            _showEditPopup()\r\n          }\r\n        })\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    if (editor.opts.imageEditButtons.length > 0) {\r\n\r\n      image_buttons += `<div class=\"fr-buttons\"> \r\n        ${editor.button.buildList(editor.opts.imageEditButtons)}\r\n        </div>`\r\n\r\n      const template = {\r\n        buttons: image_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('image.edit', template)\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('image.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-image-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    if ($current_image) {\r\n      const $el = getEl()\r\n\r\n      editor.popups.setContainer('image.insert', editor.$sc)\r\n      const left = $el.offset().left\r\n      const top = $el.offset().top + $el.height()\r\n\r\n      editor.popups.show('image.insert', left, top, $el.outerHeight())\r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-image-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('img.fr-error').length) {\r\n        editor.events.focus()\r\n\r\n        if (editor.$el.find('img.fr-error').length) {\r\n          editor.$el.find('img.fr-error').remove()\r\n          editor.undo.saveStep()\r\n          editor.undo.run()\r\n          editor.undo.dropRedo()\r\n        }\r\n\r\n        if (!editor.$wp && $current_image) {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n        editor.popups.hide('image.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-image-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('image.insert')\r\n    const $layer = $popup.find('.fr-image-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n  /**\r\n   * Insert image using URL callback.\r\n   */\r\n\r\n  function insertByURL() {\r\n    const $popup = editor.popups.get('image.insert')\r\n    const $input = $popup.find('.fr-image-by-url-layer input')\r\n\r\n    if ($input.val().length > 0) {\r\n      showProgressBar()\r\n      _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n      const img_url = $input.val().trim()\r\n\r\n      // Upload images if we should upload them.\r\n      if (editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy && editor.opts.imageUpload) {\r\n        const xhr = new XMLHttpRequest()\r\n        xhr.onload = function () {\r\n\r\n          if (this.status == 200) {\r\n\r\n            upload([new Blob([this.response], {\r\n              type: this.response.type || 'image/png'\r\n            })], $current_image)\r\n          }\r\n          else {\r\n            _throwError(BAD_LINK)\r\n          }\r\n        }\r\n\r\n        // If image couldn't be uploaded, insert as it is.\r\n        xhr.onerror = function () {\r\n          insert(img_url, true, [], $current_image)\r\n        }\r\n\r\n        xhr.open('GET', `${editor.opts.imageCORSProxy}/${img_url}`, true)\r\n        xhr.responseType = 'blob'\r\n\r\n        xhr.send()\r\n      }\r\n      else {\r\n        insert(img_url, true, [], $current_image)\r\n      }\r\n\r\n      $input.val('')\r\n      $input.blur()\r\n    }\r\n  }\r\n\r\n  function _editImg($img) {\r\n    _edit.call($img.get(0))\r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $img = $(this)\r\n\r\n    editor.popups.hide('image.insert')\r\n\r\n    $img.removeClass('fr-uploading')\r\n\r\n    // Select the image.\r\n    if ($img.next().is('br')) {\r\n      $img.next().remove()\r\n    }\r\n\r\n    _editImg($img)\r\n\r\n    editor.events.trigger('image.loaded', [$img])\r\n  }\r\n\r\n  /**\r\n   * Insert image into the editor.\r\n   */\r\n\r\n  function insert(link, sanitize, data, $existing_img, response) {\r\n\r\n    if ($existing_img && typeof $existing_img === 'string') {\r\n      $existing_img = editor.$($existing_img)\r\n    }\r\n\r\n    editor.edit.off()\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n\r\n    const image = new Image()\r\n\r\n    image.onload = function () {\r\n      let $img\r\n      let attr\r\n\r\n      if ($existing_img) {\r\n        if (!editor.undo.canDo() && !$existing_img.hasClass('fr-uploading')) editor.undo.saveStep()\r\n\r\n        let old_src = $existing_img.data('fr-old-src')\r\n\r\n        if ($existing_img.data('fr-image-pasted')) {\r\n          old_src = null\r\n        }\r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing image.\r\n          $img = $existing_img.clone()\r\n            .removeData('fr-old-src')\r\n            .removeClass('fr-uploading')\r\n            .removeAttr('data-fr-image-pasted')\r\n\r\n          // Remove load event.\r\n          $img.off('load')\r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_img.attr('src', old_src)\r\n\r\n          // Replace existing image with its clone.\r\n          $existing_img.replaceWith($img)\r\n\r\n        }\r\n        else {\r\n          $img = $existing_img\r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $img.get(0).attributes\r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i]\r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n          // Remove any other property, if it is existing with new image also.\r\n\r\n          else if(data && data.hasOwnProperty(att.nodeName)) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n                $img.attr(`${attr}`, data[attr])\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $img.on('load', _loadedCallback)\r\n        $img.attr('src', link)\r\n        editor.edit.on()\r\n        _syncImages(false)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger(old_src ? 'image.replaced' : 'image.inserted', [$img, response])\r\n      }\r\n      else {\r\n        $img = _addImage(link, data, _loadedCallback)\r\n        _syncImages(false)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger('image.inserted', [$img, response])\r\n      }\r\n    }\r\n\r\n    image.onerror = function () {\r\n      _throwError(BAD_LINK)\r\n    }\r\n\r\n    showProgressBar(editor.language.translate('Loading image'))\r\n\r\n    image.src = link\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('image.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response)\r\n\r\n        return false\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('image.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _imageUploaded($img, url, key) {\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.imageUploadToS3 || editor.opts.imageUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.imageUploadToAzure) {\r\n            if (editor.events.trigger('image.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          }\r\n\r\n          if (link) {\r\n            insert(link, false, [], $img, response || responseXML)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, $img)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText)\r\n\r\n          if (resp) {\r\n            insert(resp.link, false, resp, $img, response || responseText)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, $img)\r\n        }\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, $img)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image upload error.\r\n   */\r\n\r\n  function _imageUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * Image upload progress.\r\n   */\r\n\r\n  function _imageUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      _setProgressMessage(editor.language.translate('Uploading'), complete)\r\n    }\r\n  }\r\n\r\n  function _addImage(link, data, loadCallback) {\r\n\r\n    // Build image data string.\r\n    let data_str = ''\r\n    let attr\r\n    const $img = $(document.createElement('img')).attr('src', link)\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2649\r\n            $img.attr(`${attr}`, data[attr])\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = (editor.opts.imageResizeWithPercent ? '100%' : `${width}px`)\r\n    }\r\n\r\n    // Create image object and set the load event.\r\n    $img.attr('style', (width ? `width: ${width};` : ''))\r\n    _setStyle($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n    $img.on('load', loadCallback)\r\n\r\n    // Image might be corrupted. Continue upload flow.\r\n    $img.on('error', loadCallback)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the image.\r\n    if (editor.opts.imageSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    if ($marker.length) {\r\n\r\n      // Do not insert image in HR.\r\n      if ($marker.parent().is('hr')) {\r\n        $marker.parent().after($marker)\r\n      }\r\n\r\n      // Do not insert image inside emoticon.\r\n      if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n        $marker.insertAfter($marker.parent())\r\n      }\r\n\r\n      $marker.replaceWith($img)\r\n    }\r\n    else {\r\n      editor.$el.append($img)\r\n    }\r\n\r\n    editor.selection.clear()\r\n\r\n    return $img\r\n  }\r\n\r\n  /**\r\n   * Image upload aborted.\r\n   */\r\n  function _imageUploadAborted() {\r\n    editor.edit.on()\r\n    hideProgressBar(true)\r\n  }\r\n\r\n  /**\r\n   * Start the uploading process.\r\n   */\r\n  function _startUpload(xhr, form_data, image, $image_placeholder, url, key) {\r\n    function _sendRequest() {\r\n      const $img = $(this)\r\n      $img.off('load')\r\n      $img.addClass('fr-uploading')\r\n\r\n      if ($img.next().is('br')) {\r\n        $img.next().remove()\r\n      }\r\n\r\n      editor.placeholder.refresh()\r\n\r\n      // Select the image.\r\n      _editImg($img)\r\n      _repositionResizer()\r\n      showProgressBar()\r\n      editor.edit.off()\r\n\r\n      // Set upload events.\r\n      xhr.onload = function () {\r\n        _imageUploaded.call(xhr, $img, url, key)\r\n      }\r\n      xhr.onerror = _imageUploadError\r\n      xhr.upload.onprogress = _imageUploadProgress\r\n      xhr.onabort = _imageUploadAborted\r\n\r\n      // Set abort event.\r\n      $($img.off('abortUpload')).on('abortUpload', function () {\r\n        if (xhr.readyState != 4) {\r\n          xhr.abort()\r\n\r\n          if (!$image_placeholder) {\r\n            $img.remove()\r\n          }\r\n          else {\r\n            $image_placeholder.attr('src', $image_placeholder.data('fr-old-src'))\r\n            $image_placeholder.removeClass('fr-uploading')\r\n          }\r\n          _exitEdit(true)\r\n        }\r\n      })\r\n\r\n      // Send data.\r\n      xhr.send(editor.opts.imageUploadToAzure ? image : form_data)\r\n    }\r\n\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert image to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: 'image/jpeg'\r\n        }))\r\n      }\r\n\r\n      // No image.\r\n      if (!$image_placeholder) {\r\n        _addImage(link, null, _sendRequest)\r\n      }\r\n      else {\r\n        $image_placeholder.on('load', _sendRequest)\r\n\r\n        // Image might be corrupted.\r\n        $image_placeholder.on('error', function () {\r\n          _sendRequest()\r\n          $(this).off('error')\r\n        })\r\n\r\n        editor.edit.on()\r\n        editor.undo.saveStep()\r\n        $image_placeholder.data('fr-old-src', $image_placeholder.attr('src'))\r\n        $image_placeholder.attr('src', link)\r\n      }\r\n    }\r\n\r\n    reader.readAsDataURL(image)\r\n  }\r\n\r\n  function _browserUpload(image, $image_placeholder) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert image to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: image.type\r\n        }))\r\n\r\n        // If the $image_placeholder exists, set the data property 'fr-old-src' to identify/trigger the replace\r\n        if ($image_placeholder) {\r\n          $image_placeholder.data('fr-old-src', $image_placeholder.attr('src'))\r\n        }\r\n\r\n        editor.image.insert(link, false, null, $image_placeholder)\r\n      }\r\n    }\r\n\r\n    showProgressBar()\r\n\r\n    reader.readAsDataURL(image)\r\n  }\r\n\r\n  /**\r\n   * Do image upload.\r\n   */\r\n\r\n  function upload(images, $image_placeholder) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof images != 'undefined' && images.length > 0) {\r\n\r\n      // Check if we should cancel the image upload.\r\n      if (editor.events.trigger('image.beforeUpload', [images, $image_placeholder]) === false) {\r\n\r\n        return false\r\n      }\r\n      const image = images[0]\r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.imageUploadURL === null || editor.opts.imageUploadURL == DEFAULT_IMAGE_UPLOAD_URL) && !editor.opts.imageUploadToS3 && !editor.opts.imageUploadToAzure) {\r\n        _browserUpload(image, $image_placeholder || $current_image)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check if there is image name set.\r\n      if (!image.name) {\r\n        image.name = (new Date()).getTime() + '.' + (image.type || 'image/jpeg').replace(/image\\//g, '')\r\n      }\r\n\r\n      // Check image max size.\r\n      if (image.size > editor.opts.imageMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check image types.\r\n      if (editor.opts.imageAllowedTypes.indexOf(image.type.replace(/image\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE)\r\n\r\n        return false\r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data\r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null\r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key\r\n\r\n        // Upload to S3.\r\n        if (editor.opts.imageUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.imageUploadToS3.keyStart + (new Date()).getTime() + '-' + (image.name || 'untitled'))\r\n          form_data.append('success_action_status', '201')\r\n          form_data.append('X-Requested-With', 'xhr')\r\n          form_data.append('Content-Type', image.type)\r\n\r\n          for (key in editor.opts.imageUploadToS3.params) {\r\n            if (editor.opts.imageUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.imageUploadToS3.params[key])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.imageUploadParams) {\r\n          if (editor.opts.imageUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.imageUploadParams[key])\r\n          }\r\n        }\r\n\r\n        // Set the image in the request.\r\n        form_data.append(editor.opts.imageUploadParam, image, image.name)\r\n\r\n        // Create XHR request.\r\n        let url = editor.opts.imageUploadURL\r\n        let imageURL\r\n        let azureKey\r\n        let imageUploadMethod = editor.opts.imageUploadMethod\r\n        if (editor.opts.imageUploadToS3) {\r\n          if (editor.opts.imageUploadToS3.uploadURL) {\r\n            url = editor.opts.imageUploadToS3.uploadURL\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.imageUploadToS3.region}.amazonaws.com/${editor.opts.imageUploadToS3.bucket}`\r\n          }\r\n        }\r\n        if (editor.opts.imageUploadToAzure) {\r\n          if (editor.opts.imageUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.imageUploadToAzure.uploadURL}/${image.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.imageUploadToAzure.account}.blob.core.windows.net/${editor.opts.imageUploadToAzure.container}/${image.name}`)\r\n          }\r\n          imageURL = url\r\n          if (editor.opts.imageUploadToAzure.SASToken) {\r\n            url +=  editor.opts.imageUploadToAzure.SASToken\r\n          }\r\n          imageUploadMethod = 'PUT'\r\n        }\r\n        const xhr = editor.core.getXHR(url, imageUploadMethod)\r\n        if (editor.opts.imageUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.imageUploadToAzure.SASToken && editor.opts.imageUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.imageUploadToAzure.account\r\n            let azureContainer = editor.opts.imageUploadToAzure.container\r\n            if(editor.opts.imageUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.imageUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + image.name)\r\n            let stringToSign = imageUploadMethod + '\\n\\n\\n' + image.size + '\\n\\n' + image.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.imageUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", image.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.imageUploadParams) {\r\n            if (editor.opts.imageUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.imageUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.imageUploadToAzure.params) {\r\n            if (editor.opts.imageUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.imageUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        _startUpload(xhr, form_data, image, $image_placeholder || $current_image, imageURL, azureKey)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-image-upload-layer', function (e) {\r\n    $(this).addClass('fr-drop')\r\n\r\n    if (editor.browser.msie || editor.browser.edge) {\r\n      e.preventDefault()\r\n    }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-image-upload-layer', function (e) {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-image-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      $(this).removeClass('fr-drop')\r\n      const dt = e.originalEvent.dataTransfer\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.events.disableBlur()\r\n        inst.image.upload(dt.files)\r\n        inst.events.enableBlur()\r\n      }\r\n    }, true)\r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-image-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click')\r\n      }, true)\r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-image-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        inst.events.disableBlur()\r\n        $popup.find('input:focus').blur()\r\n        inst.events.enableBlur()\r\n\r\n        inst.image.upload(this.files, $current_image)\r\n      }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n\r\n  function _beforeElementDrop($el) {\r\n    if ($el.is('img') && $el.parents('.fr-img-caption').length > 0) {\r\n      return $el.parents('.fr-img-caption')\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const dt = e.originalEvent.dataTransfer\r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const img = dt.files[0]\r\n\r\n      if (img && img.type && img.type.indexOf('image') !== -1 && editor.opts.imageAllowedTypes.indexOf(img.type.replace(/image\\//g, '')) >= 0) {\r\n        if (!editor.opts.imageUpload) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n\r\n        editor.markers.remove()\r\n        editor.markers.insertAtPoint(e.originalEvent)\r\n\r\n        editor.$el.find('.fr-marker').replaceWith(FE.MARKERS)\r\n\r\n        if (editor.$el.find('.fr-marker').length === 0) {\r\n          editor.selection.setAtEnd(editor.el)\r\n        }\r\n\r\n        // Hide popups.\r\n        editor.popups.hideAll()\r\n\r\n        // Show the image insert popup.\r\n        let $popup = editor.popups.get('image.insert')\r\n\r\n        if (!$popup) $popup = _initInsertPopup()\r\n        editor.popups.setContainer('image.insert', editor.$sc)\r\n\r\n        let left = e.originalEvent.pageX\r\n        let top = e.originalEvent.pageY\r\n\r\n        if (editor.opts.iframe) {\r\n          const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n          const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n          top += editor.$iframe.offset().top + iframePaddingTop\r\n          left += editor.$iframe.offset().left + iframePaddingLeft\r\n        }\r\n\r\n        editor.popups.show('image.insert', left, top)\r\n        showProgressBar()\r\n\r\n        // Dropped file is an image that we allow.\r\n        if (editor.opts.imageAllowedTypes.indexOf(img.type.replace(/image\\//g, '')) >= 0) {\r\n\r\n          // Image might be selected.\r\n          _exitEdit(true)\r\n\r\n          // Upload images.\r\n          upload(dt.files)\r\n        }\r\n        else {\r\n          _throwError(BAD_FILE_TYPE)\r\n        }\r\n\r\n        // Cancel anything else.\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Mouse down on image. It might start move.\r\n    editor.events.$on(editor.$el, editor._mousedown, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (!editor.helpers.isMobile()) editor.selection.clear()\r\n\r\n      mousedown = true\r\n\r\n      if (editor.popups.areVisible()) editor.events.disableBlur()\r\n\r\n      // Prevent the image resizing.\r\n      if (editor.browser.msie) {\r\n        editor.events.disableBlur()\r\n        editor.$el.attr('contenteditable', false)\r\n      }\r\n\r\n      if (!editor.draggable && e.type != 'touchstart') e.preventDefault()\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, editor._mousedown, '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      if (!editor.core.hasFocus()) {\r\n        editor.events.focus()\r\n      }\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, 'paste', '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      editor.toolbar.hide()\r\n   \r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse up on an image prevent move.\r\n    editor.events.$on(editor.$el, editor._mouseup, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (mousedown) {\r\n        mousedown = false\r\n\r\n        // Remove moving class.\r\n        e.stopPropagation()\r\n\r\n        if (editor.browser.msie) {\r\n          editor.$el.attr('contenteditable', true)\r\n          editor.events.enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Show image popup when it was selected.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.shiftKey && editor.selection.text().replace(/\\n/g, '') === '' && editor.keys.isArrow(e.which)) {\r\n        const s_el = editor.selection.element()\r\n        const e_el = editor.selection.endElement()\r\n\r\n        if (s_el && s_el.tagName == 'IMG') {\r\n          _editImg($(s_el))\r\n        }\r\n        else if (e_el && e_el.tagName == 'IMG') {\r\n          _editImg($(e_el))\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop)\r\n    editor.events.on('element.beforeDrop', _beforeElementDrop)\r\n\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n    editor.events.on('mousedown window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    editor.events.on('mouseup window.mouseup', function () {\r\n      if ($current_image) {\r\n        _exitEdit()\r\n\r\n        return false\r\n      }\r\n\r\n      _unmarkExit()\r\n    })\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit()\r\n      }\r\n    })\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.opts.iframe) {\r\n        editor.size.syncIframe()\r\n      }\r\n    })\r\n\r\n    editor.events.on('blur image.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      mousedown = false\r\n      _exitEdit(true)\r\n    })\r\n\r\n    editor.events.on('modals.hide', function () {\r\n      if ($current_image) {\r\n        _selectImage()\r\n        editor.selection.clear()\r\n      }\r\n    })\r\n\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.win.getSelection) {\r\n        _editImg($current_image)\r\n      }\r\n    })\r\n\r\n    // Add new line after image is inserted.\r\n    if (editor.opts.imageAddNewLine) {\r\n      editor.events.on('image.inserted', function ($img) {\r\n        let lastNode = $img.get(0)\r\n\r\n        // Ignore first BR after image.\r\n        if (lastNode.nextSibling && lastNode.nextSibling.tagName === 'BR') lastNode = lastNode.nextSibling;\r\n\r\n        // Look upper nodes.\r\n        while (lastNode && !editor.node.isElement(lastNode)) {\r\n          if (!editor.node.isLastSibling(lastNode)) {\r\n            lastNode = null;\r\n          }\r\n          else {\r\n            lastNode = lastNode.parentNode;\r\n          }\r\n        }\r\n\r\n        // If node is element, then image is last element.\r\n        if (editor.node.isElement(lastNode)) {\r\n\r\n          // ENTER_BR mode.\r\n          if (editor.opts.enter === FE.ENTER_BR) {\r\n            $img.after('<br>');\r\n          }\r\n          else {\r\n            let $parent = $(editor.node.blockParent($img.get(0)));\r\n\r\n            $parent.after(`<${editor.html.defaultTag()}><br></${editor.html.defaultTag()}>`);\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.insert', _refreshInsertPopup)\r\n      editor.popups.onHide('image.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    let active\r\n    let $popup\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/2987\r\n\r\n    if (!editor.opts.imageUpload && editor.opts.imageInsertButtons.indexOf('imageUpload') !== -1) {\r\n      editor.opts.imageInsertButtons.splice(editor.opts.imageInsertButtons.indexOf('imageUpload'), 1)\r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.imageInsertButtons)\r\n\r\n    if (buttonList !== '') {\r\n      image_buttons = `<div class=\"fr-buttons fr-tabs\">${buttonList}</div>`\r\n    }\r\n\r\n    const uploadIndex = editor.opts.imageInsertButtons.indexOf('imageUpload')\r\n    const urlIndex = editor.opts.imageInsertButtons.indexOf('imageByURL')\r\n\r\n    // Image upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (urlIndex >= 0 && uploadIndex > urlIndex) {\r\n        active = ''\r\n      }\r\n\r\n      upload_layer = `<div class=\"fr-image-upload-layer${active} fr-layer\" id=\"fr-image-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop image')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" accept=\"image/${editor.opts.imageAllowedTypes.join(', image/').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-image-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n    // Image by url layer.\r\n    let by_url_layer = ''\r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (uploadIndex >= 0 && urlIndex > uploadIndex) {\r\n        active = ''\r\n      }\r\n\r\n      by_url_layer = `<div class=\"fr-image-by-url-layer${active} fr-layer\" id=\"fr-image-by-url-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"http://\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-image-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"imageDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      upload_layer: upload_layer,\r\n      by_url_layer: by_url_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    if (editor.opts.imageInsertButtons.length >= 1) {\r\n      $popup = editor.popups.create('image.insert', template)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        if ($current_image && editor.popups.isVisible('image.insert')) {\r\n          replace()\r\n        }\r\n      })\r\n    }\r\n\r\n    _bindInsertEvents($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n\r\n  /**\r\n   * Refresh the ALT popup.\r\n   */\r\n\r\n  function _refreshAltPopup() {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $popup.find('input').val($current_image.attr('alt') || '').trigger('change')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the ALT popup.\r\n   */\r\n\r\n  function showAltPopup() {\r\n    let $popup = editor.popups.get('image.alt')\r\n\r\n    if (!$popup) $popup = _initAltPopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.alt')\r\n    editor.popups.setContainer('image.alt', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.alt', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initAltPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.alt', _refreshAltPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageAltButtons)}</div>`\r\n\r\n    // Image by url layer.\r\n    let alt_layer = ''\r\n    alt_layer = `<div class=\"fr-image-alt-layer fr-layer fr-active\" id=\"fr-image-alt-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-alt-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Alternative Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetAlt\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      alt_layer: alt_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.alt', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-alt', function () {\r\n        if ($current_image && editor.popups.isVisible('image.alt')) {\r\n          showAltPopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set ALT based on the values from the popup.\r\n   */\r\n\r\n  function setAlt(alt) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $current_image.attr('alt', alt || $popup.find('input').val() || '')\r\n      $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n\r\n  // Issue 2845\r\n\r\n  function _refreshSizePopup() {\r\n    const $popup = editor.popups.get('image.size')\r\n    const $popup_height_val = $current_image.get(0).style.height ? $current_image.get(0).style.height : 'auto'\r\n    const $popup_width_val = $current_image.get(0).style.width ? $current_image.get(0).style.width : 'auto'\r\n    if ($current_image) {\r\n\r\n      if (hasCaption()) {\r\n        let $el = $current_image.parent()\r\n\r\n        if (!($el.get(0).style.width)) {\r\n          $el = $current_image.parent().parent()\r\n        }\r\n        $popup.find('input[name=\"width\"]').val($popup_width_val).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($popup_height_val).trigger('change')\r\n      }\r\n      else {\r\n        $popup.find('input[name=\"width\"]').val($popup_width_val).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($popup_height_val).trigger('change')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('image.size')\r\n\r\n    if (!$popup) $popup = _initSizePopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.size')\r\n    editor.popups.setContainer('image.size', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.size', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.size', _refreshSizePopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageSizeButtons)}</div>`\r\n\r\n    // Size layer.\r\n    let size_layer = ''\r\n    size_layer = `<div class=\"fr-image-size-layer fr-layer fr-active\" id=\"fr-image-size-layer-${editor.id}\"><div class=\"fr-image-group\"><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-width-'${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-height${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.size', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-size', function () {\r\n        if ($current_image && editor.popups.isVisible('image.size')) {\r\n          showSizePopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current image size.\r\n   */\r\n\r\n  function setSize(width, height) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.size')\r\n      width = width || $popup.find('input[name=\"width\"]').val() || ''\r\n      height = height || $popup.find('input[name=\"height\"]').val() || ''\r\n      const regex = /^[\\d]+((px)|%)*$/g\r\n\r\n      $current_image.removeAttr('width').removeAttr('height')\r\n\r\n      if (width.match(regex)) $current_image.css('width', width)\r\n      else $current_image.css('width', '')\r\n\r\n      if (height.match(regex)) $current_image.css('height', height)\r\n      else $current_image.css('height', '')\r\n\r\n      if (hasCaption()) {\r\n        $current_image.parents('.fr-img-caption').removeAttr('width').removeAttr('height')\r\n\r\n        if (width.match(regex)) $current_image.parents('.fr-img-caption').css('width', width)\r\n        else $current_image.parents('.fr-img-caption').css('width', '')\r\n\r\n        if (height.match(regex)) $current_image.parents('.fr-img-caption').css('height', height)\r\n        else $current_image.parents('.fr-img-caption').css('height', '')\r\n      }\r\n\r\n      if ($popup) $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image upload layer.\r\n   */\r\n\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    let left\r\n    let top\r\n\r\n    // Click on the button from the toolbar without image selected.\r\n    if (!$current_image && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertImage\"]')\r\n      left = $btn.offset().left\r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10)\r\n    }\r\n\r\n    // Image is selected.\r\n    else if ($current_image) {\r\n\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      // Set the top to the bottom of the image.\r\n      top = $el.offset().top + $el.outerHeight()\r\n      left = $el.offset().left\r\n    }\r\n\r\n    // Image is selected and we are in inline mode.\r\n    if (!$current_image && editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top'))\r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight()\r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active')\r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active')\r\n\r\n    editor.popups.show('image.insert', left, top, ($current_image ? $current_image.outerHeight() : 0))\r\n    editor.accessibility.focusPopup($popup)\r\n  }\r\n\r\n  /**\r\n   * Refresh the upload image button.\r\n   */\r\n\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('image.insert')\r\n    if ($popup && $popup.find('.fr-image-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('image.insert')\r\n    if ($popup && $popup.find('.fr-image-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function _resizeImage(e, initPageX, direction, step) {\r\n    e.pageX = initPageX\r\n    _handlerMousedown.call(this, e)\r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step))\r\n    _handlerMousemove.call(this, e)\r\n    _handlerMouseup.call(this, e)\r\n\r\n    return ++step\r\n  }\r\n\r\n  /**\r\n   * Init image resizer.\r\n   */\r\n  function _initImageResizer() {\r\n    let doc\r\n\r\n    // No shared image resizer.\r\n    if (!editor.shared.$image_resizer) {\r\n\r\n      // Create shared image resizer.\r\n      editor.shared.$image_resizer = $(document.createElement('div')).attr('class', 'fr-image-resizer')\r\n      $image_resizer = editor.shared.$image_resizer\r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($image_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Image resize is enabled.\r\n      if (editor.opts.imageResize) {\r\n        $image_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se'))\r\n\r\n        // Add image resizer overlay and set it.\r\n        editor.shared.$img_overlay = $(document.createElement('div')).attr('class', 'fr-image-overlay')\r\n        $overlay = editor.shared.$img_overlay\r\n        doc = $image_resizer.get(0).ownerDocument\r\n        $(doc).find('body').first().append($overlay)\r\n      }\r\n    }\r\n    else {\r\n      $image_resizer = editor.shared.$image_resizer\r\n      $overlay = editor.shared.$img_overlay\r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($image_resizer.removeClass('fr-active'))\r\n      }, true)\r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $image_resizer.html('').removeData().remove()\r\n      $image_resizer = null\r\n\r\n      if (editor.opts.imageResize) {\r\n        $overlay.remove()\r\n        $overlay = null\r\n      }\r\n    }, true)\r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        if ($current_image && !$current_image.hasClass('fr-uploading')) {\r\n          _exitEdit(true)\r\n        }\r\n        else if ($current_image) {\r\n          _repositionResizer()\r\n          replace()\r\n          showProgressBar(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    // Image resize is enabled.\r\n    if (editor.opts.imageResize) {\r\n      doc = $image_resizer.get(0).ownerDocument\r\n      editor.events.$on($image_resizer, editor._mousedown, '.fr-handler', _handlerMousedown)\r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove)\r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup)\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup)\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1\r\n      let prevKey = null\r\n      let prevTimestamp = 0\r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_image) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey\r\n          const keycode = e.which\r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1\r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase image size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 1, 1, step)\r\n          }\r\n\r\n          // Decrease image size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 2, -1, step)\r\n          }\r\n          else if (!editor.keys.ctrlKey(e) && keycode == FE.KEYCODE.ENTER) {\r\n            $current_image.before('<br>')\r\n            _editImg($current_image)\r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode\r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp\r\n        }\r\n      }, true)\r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current image.\r\n   */\r\n  function remove($img) {\r\n    $img = $img || getEl()\r\n\r\n    if ($img) {\r\n      if (editor.events.trigger('image.beforeRemove', [$img]) !== false) {\r\n        editor.popups.hideAll()\r\n        _selectImage()\r\n        _exitEdit(true)\r\n\r\n        if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n        if ($img.get(0) == editor.el) {\r\n          $img.removeAttr('src')\r\n        }\r\n        else {\r\n          if ($img.get(0).parentNode && $img.get(0).parentNode.tagName == 'A') {\r\n            editor.selection.setBefore($img.get(0).parentNode) || editor.selection.setAfter($img.get(0).parentNode) || $img.parent().after(FE.MARKERS)\r\n            $($img.get(0).parentNode).remove()\r\n          }\r\n          else {\r\n            editor.selection.setBefore($img.get(0)) || editor.selection.setAfter($img.get(0)) || $img.after(FE.MARKERS)\r\n            $img.remove()\r\n          }\r\n\r\n          editor.html.fillEmptyBlocks()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const key_code = e.which\r\n\r\n    if ($current_image && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      remove()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code == FE.KEYCODE.ESC) {\r\n      const $img = $current_image\r\n      _exitEdit(true)\r\n      editor.selection.setAfter($img.get(0))\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Move cursor if left and right arrows are used.\r\n    else if ($current_image && (key_code == FE.KEYCODE.ARROW_LEFT || key_code == FE.KEYCODE.ARROW_RIGHT)) {\r\n      const img = $current_image.get(0)\r\n      _exitEdit(true)\r\n\r\n      if (key_code == FE.KEYCODE.ARROW_LEFT) {\r\n        editor.selection.setBefore(img)\r\n      }\r\n      else {\r\n        editor.selection.setAfter(img)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code === FE.KEYCODE.TAB) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      _exitEdit(true)\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do some cleanup on images.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Tag is image.\r\n    if (el && el.tagName == 'IMG') {\r\n\r\n      // Remove element if it has class fr-uploading or fr-error.\r\n      if (editor.node.hasClass(el, 'fr-uploading') || editor.node.hasClass(el, 'fr-error')) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n\r\n      // Remove class if it is draggable.\r\n      else if (editor.node.hasClass(el, 'fr-draggable')) {\r\n        el.classList.remove('fr-draggable')\r\n      }\r\n\r\n      if (el.parentNode && el.parentNode.parentNode && editor.node.hasClass(el.parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = el.parentNode.parentNode\r\n        p_node.removeAttribute('contenteditable')\r\n        p_node.removeAttribute('draggable')\r\n        p_node.classList.remove('fr-draggable')\r\n\r\n        const n_node = el.nextSibling\r\n\r\n        if (n_node) {\r\n          n_node.removeAttribute('contenteditable')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Look for inner nodes that might be in a similar case.\r\n    else if (el && el.nodeType == Node.ELEMENT_NODE) {\r\n      const imgs = el.querySelectorAll('img.fr-uploading, img.fr-error, img.fr-draggable')\r\n\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        _cleanOnGet(imgs[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    // Init on image.\r\n    if (editor.el.tagName == 'IMG') {\r\n      editor.$el.addClass('fr-view')\r\n    }\r\n\r\n    editor.events.$on(editor.$el, editor.helpers.isMobile() && !editor.helpers.isWindowsPhone() ? 'touchend' : 'click', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', _edit)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function () {\r\n        touchScroll = false\r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true\r\n      })\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('window.keydown keydown', _editorKeydownHandler, true)\r\n\r\n      editor.events.on('keyup', function (e) {\r\n        if ($current_image && e.which == FE.KEYCODE.ENTER) {\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Prevent typing in image caption DOM structure.\r\n      editor.events.$on(editor.$el, 'keydown', function () {\r\n        let el = editor.selection.element()\r\n\r\n        // Parent node of the current element.\r\n        if (el.nodeType === Node.TEXT_NODE || (el.tagName == 'BR' && editor.node.isLastSibling(el))) {\r\n          el = el.parentNode\r\n        }\r\n\r\n        if (!editor.node.hasClass(el, 'fr-inner')) {\r\n          if (!editor.node.hasClass(el, 'fr-img-caption')) {\r\n            el = $(el).parents('.fr-img-caption').get(0)\r\n          }\r\n\r\n          // Check if we are in image caption.\r\n          if (editor.node.hasClass(el, 'fr-img-caption')) {\r\n            $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS);\r\n            editor.selection.restore();\r\n          }\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler)\r\n    }\r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_image) {\r\n        if (editor.$wp) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        else {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_image) {\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // Copy/cut image.\r\n    editor.events.on('window.cut window.copy', function (e) {\r\n      // Do copy only if image.edit popups is visible and not focused.\r\n      if ($current_image && editor.popups.isVisible('image.edit') && !editor.popups.get('image.edit').find(':focus').length) {\r\n\r\n        const $el = getEl()\r\n\r\n        if (hasCaption()) {\r\n          $el.before(FE.START_MARKER)\r\n          $el.after(FE.END_MARKER)\r\n          editor.selection.restore()\r\n          editor.paste.saveCopiedText($el.get(0).outerHTML, $el.text())\r\n        }\r\n        else {\r\n          _selectImage()\r\n          editor.paste.saveCopiedText($current_image.get(0).outerHTML, $current_image.attr('alt'))\r\n        }\r\n\r\n        if (e.type == 'copy') {\r\n          setTimeout(function () {\r\n            _editImg($current_image)\r\n          })\r\n        }\r\n        else {\r\n          _exitEdit(true)\r\n          editor.undo.saveStep()\r\n          setTimeout(function () {\r\n            editor.undo.saveStep()\r\n          }, 0)\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Fix IE copy not working when selection is collapsed.\r\n    if (editor.browser.msie) {\r\n      editor.events.on('keydown', function (e) {\r\n        // Selection is collapsed and we have an image.\r\n        if (!(editor.selection.isCollapsed() && $current_image)) return true\r\n\r\n        const key_code = e.which\r\n\r\n        // Copy.\r\n        if (key_code == FE.KEYCODE.C && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.copy')\r\n        }\r\n\r\n        // Cut.\r\n        else if (key_code == FE.KEYCODE.X && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.cut')\r\n        }\r\n      })\r\n    }\r\n\r\n    // Do not leave page while uploading.\r\n    editor.events.$on($(editor.o_win), 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && key_code == FE.KEYCODE.BACKSPACE) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Check if image is uploading to abort it.\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && $current_image.hasClass('fr-uploading') && key_code == FE.KEYCODE.ESC) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      if ($current_image && $current_image.hasClass('fr-uploading')) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('paste.before', _clipboardPaste)\r\n    editor.events.on('paste.beforeCleanup', _clipboardPasteCleanup)\r\n    editor.events.on('paste.after', _uploadPastedImages)\r\n    editor.events.on('html.set', _refreshImageList)\r\n    editor.events.on('html.inserted', _refreshImageList)\r\n    _refreshImageList()\r\n\r\n    editor.events.on('destroy', function () {\r\n      images = []\r\n    })\r\n\r\n    // Remove any fr-uploading / fr-error images.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n\r\n    if (editor.opts.imageOutputSize) {\r\n      let imgs\r\n\r\n      editor.events.on('html.beforeGet', function () {\r\n        imgs = editor.el.querySelectorAll('img')\r\n        for (let i = 0; i < imgs.length; i++) {\r\n          const width = imgs[i].style.width || $(imgs[i]).width()\r\n          const height = imgs[i].style.height || $(imgs[i]).height()\r\n\r\n          if (width) imgs[i].setAttribute('width', (`${width}`).replace(/px/, ''))\r\n\r\n          if (height) imgs[i].setAttribute('height', (`${height}`).replace(/px/, ''))\r\n        }\r\n      })\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.events.on('image.loaded', editor.size.syncIframe)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      _syncImages()\r\n      editor.events.on('contentChanged', _syncImages)\r\n    }\r\n\r\n    editor.events.$on($(editor.o_win), 'orientationchange.image', function () {\r\n      setTimeout(function () {\r\n        if ($current_image) {\r\n          _editImg($current_image)\r\n        }\r\n      }, 100)\r\n    })\r\n\r\n    _initEditPopup(true)\r\n    _initInsertPopup(true)\r\n    _initSizePopup(true)\r\n    _initAltPopup(true)\r\n\r\n    editor.events.on('node.remove', function ($node) {\r\n      if ($node.get(0).tagName == 'IMG') {\r\n        remove($node)\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  function _processPastedImage(img) {\r\n    if (editor.events.trigger('image.beforePasteUpload', [img]) === false) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Show the progress bar.\r\n    $current_image = $(img)\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    replace()\r\n    showProgressBar()\r\n\r\n    $current_image.on('load', function () {\r\n      let loadEvents = []\r\n\r\n      _repositionResizer()\r\n      // https://github.com/froala/wysiwyg-editor/issues/3407\r\n      if ($(editor.popups.get('image.insert').get(0)).find('div.fr-active.fr-error').length < 1) {\r\n        showProgressBar()\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1866\r\n      $(this).data('events').find(function(event) {\r\n        if (event[0] === 'load') {\r\n          loadEvents.push(event)\r\n        }\r\n      })\r\n      \r\n      // turn off the event if it is registered only once\r\n      loadEvents.length <= 1 && $(this).off('load')\r\n    })\r\n\r\n    const splitSrc = $(img).attr('src').split(',')\r\n\r\n    // Convert image to blob.\r\n    const binary = atob(splitSrc[1])\r\n    const array = []\r\n\r\n    for (let i = 0; i < binary.length; i++) {\r\n      array.push(binary.charCodeAt(i))\r\n    }\r\n\r\n    const upload_img = new Blob([new Uint8Array(array)], {\r\n      type: splitSrc[0].replace(/data\\:/g, '').replace(/;base64/g, '')\r\n    })\r\n\r\n    upload([upload_img], $current_image)\r\n  }\r\n\r\n  function _uploadPastedImages() {\r\n    if (!editor.opts.imagePaste) {\r\n      editor.$el.find('img[data-fr-image-pasted]').remove()\r\n    }\r\n    else {\r\n\r\n      // Safari won't work https://bugs.webkit.org/show_bug.cgi?id=49141\r\n      editor.$el.find('img[data-fr-image-pasted]').each(function (index, img) {\r\n        if (editor.opts.imagePasteProcess) {\r\n          let width = editor.opts.imageDefaultWidth\r\n\r\n          if (width && width != 'auto') {\r\n            width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n          }\r\n          $(img)\r\n            .css('width', width)\r\n            .removeClass('fr-dii fr-dib fr-fir fr-fil')\r\n\r\n          _setStyle($(img), editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n        }\r\n\r\n        // Data images.\r\n        if (img.src.indexOf('data:') === 0) {\r\n          _processPastedImage(img)\r\n        }\r\n\r\n        // New way Safari is pasting images.\r\n        else if (img.src.indexOf('blob:') === 0 || (img.src.indexOf('http') === 0 && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy)) {\r\n          const _img = new Image()\r\n          _img.crossOrigin = 'Anonymous'\r\n          _img.onload = function () {\r\n            // Create canvas.\r\n            const canvas = editor.o_doc.createElement('CANVAS')\r\n            const context = canvas.getContext('2d')\r\n\r\n            // Set height.\r\n            canvas.height = this.naturalHeight\r\n            canvas.width = this.naturalWidth\r\n\r\n            // Draw image.\r\n            context.drawImage(this, 0, 0)\r\n\r\n            // pushing the execution at end of the stack\r\n            setTimeout(function () {\r\n              _processPastedImage(img)\r\n            }, 0)\r\n\r\n            let imgExt\r\n\r\n            if (this.naturalWidth > 2000 || this.naturalHeight > 1500) {\r\n              imgExt = 'jpeg' // if images are too large\r\n            }\r\n            else {\r\n              imgExt = 'png'\r\n            }\r\n\r\n            // Update image and process it.\r\n            img.src = canvas.toDataURL(`image/${imgExt}`)\r\n\r\n          }\r\n\r\n          _img.src = (img.src.indexOf('blob:') === 0 ? '' : (`${editor.opts.imageCORSProxy}/`)) + img.src\r\n        }\r\n\r\n        // Images without http (Safari ones.).\r\n        else if (img.src.indexOf('http') !== 0 || img.src.indexOf('https://mail.google.com/mail') === 0) {\r\n          editor.selection.save()\r\n          $(img).remove()\r\n          editor.selection.restore()\r\n        }\r\n        else {\r\n          $(img).removeAttr('data-fr-image-pasted')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function _clipboardImageLoaded(e) {\r\n    const result = e.target.result\r\n\r\n    // Default width.\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    editor.html.insert(`<img data-fr-image-pasted=\"true\" src=\"${result}\"${(width ? ` style=\"width: ${width};\"` : '')}>`)\r\n\r\n    const $img = editor.$el.find('img[data-fr-image-pasted=\"true\"]')\r\n\r\n    if ($img) {\r\n      _setStyle($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n    }\r\n\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  function _processsClipboardPaste(file) {\r\n    const reader = new FileReader()\r\n    reader.onload = _clipboardImageLoaded\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function _clipboardPaste(e) {\r\n    if (e && e.clipboardData && e.clipboardData.items) {\r\n\r\n      let file = null\r\n\r\n      if (!((e.clipboardData.types && [].indexOf.call(e.clipboardData.types, 'text/rtf') != -1) || e.clipboardData.getData('text/rtf'))) {\r\n        for (let i = 0; i < e.clipboardData.items.length; i++) {\r\n          file = e.clipboardData.items[i].getAsFile()\r\n\r\n          if (file) {\r\n            break\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        file = e.clipboardData.items[0].getAsFile()\r\n      }\r\n\r\n      if (file) {\r\n        _processsClipboardPaste(file)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clipboardPasteCleanup(clipboard_html) {\r\n    clipboard_html = clipboard_html.replace(/<img /gi, '<img data-fr-image-pasted=\"true\" ')\r\n\r\n    return clipboard_html\r\n  }\r\n\r\n  /**\r\n   * Start edit.\r\n   */\r\n  let touchScroll\r\n\r\n  function _edit(e) {\r\n    if ($(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('image.hideResizer')\r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable()\r\n\r\n    if (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe()\r\n    }\r\n\r\n    // Store current image.\r\n    $current_image = $(this)\r\n\r\n    // Select image.\r\n    _selectImage()\r\n\r\n    // Reposition resizer.\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n\r\n    // Issue 2801\r\n    if (editor.browser.msie) {\r\n      if (editor.popups.areVisible()) {\r\n        editor.events.disableBlur()\r\n      }\r\n\r\n      if (editor.win.getSelection) {\r\n        editor.win.getSelection().removeAllRanges()\r\n        editor.win.getSelection().addRange(editor.doc.createRange())\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    // Fix for image remaining selected.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    // Refresh buttons.\r\n    editor.button.bulkRefresh()\r\n    editor.events.trigger('video.hideResizer')\r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n\r\n  function _exitEdit(force_exit) {\r\n    if ($current_image && (_canExit() || force_exit === true)) {\r\n      editor.toolbar.enable()\r\n      $image_resizer.removeClass('fr-active')\r\n      editor.popups.hideAll();\r\n      $current_image = null\r\n      _unmarkExit()\r\n\r\n      $handler = null\r\n\r\n      if ($overlay) {\r\n        $overlay.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  let img_exit_flag = false\r\n\r\n  function _markExit() {\r\n    img_exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    img_exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return img_exit_flag\r\n  }\r\n\r\n  /**\r\n   * Set style for image.\r\n   */\r\n  function _setStyle($img, _display, _align) {\r\n\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $img.removeClass('fr-fil fr-fir fr-dib fr-dii')\r\n\r\n      if (_align) {\r\n        $img.addClass(`fr-fi${_align[0]}`)\r\n      }\r\n\r\n      if (_display) {\r\n        $img.addClass(`fr-di${_display[0]}`)\r\n      }\r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $img.css({\r\n          display: 'inline-block',\r\n          verticalAlign: 'bottom',\r\n          margin: editor.opts.imageDefaultMargin\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $img.css({\r\n            'float': 'none',\r\n            marginBottom: '',\r\n            marginTop: '',\r\n            maxWidth: `calc(100% - ${(2 * editor.opts.imageDefaultMargin)}px)`,\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $img.css({\r\n            'float': 'left',\r\n            marginLeft: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else {\r\n          $img.css({\r\n            'float': 'right',\r\n            marginRight: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n      else if (_display == 'block') {\r\n        $img.css({\r\n          display: 'block',\r\n          'float': 'none',\r\n          verticalAlign: 'top',\r\n          margin: `${editor.opts.imageDefaultMargin}px auto`,\r\n          textAlign: 'center'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $img.css({\r\n            marginLeft: 0,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $img.css({\r\n            marginRight: 0,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Align image.\r\n   */\r\n  function align(val) {\r\n    const $el = getEl()\r\n\r\n    $el.removeClass('fr-fir fr-fil')\r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'left') {\r\n        $el.addClass('fr-fil')\r\n      }\r\n      else if (val == 'right') {\r\n        $el.addClass('fr-fir')\r\n      }\r\n    }\r\n    else {\r\n      _setStyle($el, getDisplay(), val)\r\n    }\r\n\r\n    _selectImage()\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    editor.selection.clear()\r\n  }\r\n\r\n  /**\r\n   * Get image alignment.\r\n   */\r\n  function getAlign($img) {\r\n    if (typeof $img == 'undefined') $img = getEl()\r\n\r\n    if ($img) {\r\n\r\n      // Image has left class.\r\n      if ($img.hasClass('fr-fil')) {\r\n\r\n        return 'left'\r\n      }\r\n\r\n      // Image has right class.\r\n      else if ($img.hasClass('fr-fir')) {\r\n\r\n        return 'right'\r\n      }\r\n\r\n      // Image has display class set.\r\n      else if ($img.hasClass('fr-dib') || $img.hasClass('fr-dii')) {\r\n\r\n        return 'center'\r\n      }\r\n      else {\r\n        // Set float to none.\r\n        const flt = $img.css('float')\r\n\r\n        $img.css('float', 'none')\r\n\r\n        // Image has display block.\r\n        if ($img.css('display') == 'block') {\r\n\r\n          // Set float to the initial value.\r\n          $img.css('float', '')\r\n\r\n          if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n          // Margin left is 0.\r\n          // Margin right is auto.\r\n          if (parseInt($img.css('margin-left'), 10) === 0) {\r\n\r\n            return 'left'\r\n          }\r\n\r\n          // Margin left is auto.\r\n          // Margin right is 0.\r\n          else if (parseInt($img.css('margin-right'), 10) === 0) {\r\n\r\n            return 'right'\r\n          }\r\n        }\r\n\r\n        // Display inline.\r\n        else {\r\n\r\n          // Set float.\r\n          $img.css('float', '')\r\n\r\n          if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n          // Float left.\r\n          if ($img.css('float') == 'left') {\r\n\r\n            return 'left'\r\n          }\r\n\r\n          // Float right.\r\n          else if ($img.css('float') == 'right') {\r\n\r\n            return 'right'\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return 'center'\r\n  }\r\n\r\n  /**\r\n   * Get image display.\r\n   */\r\n  function getDisplay($img) {\r\n    if (typeof $img == 'undefined') $img = getEl()\r\n\r\n    // Set float to none.\r\n    const flt = $img.css('float')\r\n    $img.css('float', 'none')\r\n\r\n    // Image has display block.\r\n    if ($img.css('display') == 'block') {\r\n\r\n      // Set float to the initial value.\r\n      $img.css('float', '')\r\n\r\n      if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n      return 'block'\r\n    }\r\n\r\n    // Display inline.\r\n    else {\r\n\r\n      // Set float.\r\n      $img.css('float', '')\r\n\r\n      if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n      return 'inline'\r\n    }\r\n\r\n    return 'inline'\r\n  }\r\n\r\n  /**\r\n   * Refresh the align icon.\r\n   */\r\n  function refreshAlign($btn) {\r\n    if ($current_image) {\r\n      $btn.find('> *').first().replaceWith(editor.icon.create(`image-align-${getAlign()}`))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the align option from the dropdown.\r\n   */\r\n\r\n  function refreshAlignOnShow($btn, $dropdown) {\r\n    if ($current_image) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getAlign()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Align image.\r\n   */\r\n\r\n  function display(val) {\r\n    const $el = getEl()\r\n\r\n    $el.removeClass('fr-dii fr-dib')\r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'inline') {\r\n        $el.addClass('fr-dii')\r\n      }\r\n      else if (val == 'block') {\r\n        $el.addClass('fr-dib')\r\n      }\r\n    }\r\n    else {\r\n      _setStyle($el, val, getAlign())\r\n    }\r\n\r\n    _selectImage()\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    editor.selection.clear()\r\n  }\r\n\r\n  /**\r\n   * Refresh the image display selected option.\r\n   */\r\n\r\n  function refreshDisplayOnShow($btn, $dropdown) {\r\n    if ($current_image) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getDisplay()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the replace popup.\r\n   */\r\n\r\n  function replace() {\r\n    let $popup = editor.popups.get('image.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    if (!editor.popups.isVisible('image.insert')) {\r\n      hideProgressBar()\r\n      editor.popups.refresh('image.insert')\r\n      editor.popups.setContainer('image.insert', editor.$sc)\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.insert', left, top, $el.outerHeight(true), true)\r\n  }\r\n\r\n  /**\r\n   * Place selection around current image.\r\n   */\r\n  function _selectImage() {\r\n    if ($current_image) {\r\n      editor.events.disableBlur()\r\n      editor.selection.clear()\r\n      const range = editor.doc.createRange()\r\n      range.selectNode($current_image.get(0))\r\n\r\n      // Collapse range in IE.\r\n      if (editor.browser.msie) range.collapse(true)\r\n\r\n      const selection = editor.selection.get()\r\n      selection.addRange(range)\r\n      editor.events.enableBlur()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to the image main popup.\r\n   */\r\n  function back() {\r\n    if ($current_image) {\r\n      editor.events.disableBlur()\r\n      $('.fr-popup input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n    else {\r\n      editor.events.disableBlur()\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n\r\n      editor.popups.hide('image.insert')\r\n      editor.toolbar.showInline()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current image.\r\n   */\r\n\r\n  function get() {\r\n\r\n    return $current_image\r\n  }\r\n\r\n  function getEl() {\r\n    return hasCaption() ? $current_image.parents('.fr-img-caption').first() : $current_image\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n\r\n  function applyStyle(val, imageStyles, multipleStyles) {\r\n    if (typeof imageStyles == 'undefined') imageStyles = editor.opts.imageStyles\r\n\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.imageMultipleStyles\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $img = getEl()\r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(imageStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      $img.removeClass(styles.join(' '))\r\n    }\r\n\r\n    if (typeof imageStyles[val] == 'object') {\r\n      $img.removeAttr('style')\r\n      $img.css(imageStyles[val].style)\r\n    }\r\n    else {\r\n      $img.toggleClass(val)\r\n    }\r\n\r\n    _editImg($current_image)\r\n  }\r\n\r\n  function hasCaption() {\r\n    if ($current_image) {\r\n      return $current_image.parents('.fr-img-caption').length > 0\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function toggleCaption() {\r\n    let $el\r\n\r\n    if ($current_image && !hasCaption()) {\r\n      $el = $current_image\r\n\r\n      // Check if there is a link wrapping the image.\r\n      if ($current_image.parent().is('a')) {\r\n        $el = $current_image.parent()\r\n      }\r\n\r\n      // code start https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n\r\n      // check the li placement\r\n      var $listParent = $current_image.parents('ul') && $current_image.parents('ul').length > 0 ? $current_image.parents('ul') : $current_image.parents('ol') && $current_image.parents('ol').length > 0 ? $current_image.parents('ol'): [];\r\n      if ($listParent.length > 0) {\r\n        var totLi = $listParent.find('li').length,\r\n          $currLi = $current_image.parents('li'),\r\n          $newLi = document.createElement(\"li\");;\r\n        \r\n        if ((totLi - 1) === $currLi.index()) { // if li placement last then add one extra li\r\n          $listParent.append($newLi);\r\n          $newLi.innerHTML = '&nbsp;';\r\n        }\r\n      }\r\n\r\n      let splitAttrs\r\n      let oldWidth\r\n\r\n      if ($el.attr('style')) {\r\n        splitAttrs = $el.attr('style').split(':')\r\n        oldWidth = splitAttrs.indexOf('width') > -1 ? splitAttrs[splitAttrs.indexOf('width') + 1].replace(';', '') : ''\r\n      } else if ($el.attr('width')) {\r\n        oldWidth = $el.attr('width');\r\n      }\r\n      \r\n      // Issue 2861\r\n      const current_width = editor.opts.imageResizeWithPercent ? (oldWidth.indexOf('px') > -1 ? null : oldWidth) || '100%' : $current_image.width() + 'px'\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      $el.wrap('<div class=\"fr-img-space-wrap\"><span ' + (!editor.browser.mozilla ? 'contenteditable=\"false\"' : '') + 'class=\"fr-img-caption ' + $current_image.attr('class') + '\" style=\"' + (!editor.opts.useClasses ? $el.attr('style') : '') + '\" draggable=\"false\"></span><p class=\"fr-img-space-wrap2\">&nbsp;</p></div>')\r\n      $el.wrap('<span class=\"fr-img-wrap\"></span>')\r\n      $current_image.after(`<span class=\"fr-inner\"${(!editor.browser.mozilla ? ' contenteditable=\"true\"' : '')}>${FE.START_MARKER}${editor.language.translate('Image Caption')}${FE.END_MARKER}</span>`)\r\n      //$current_image.removeAttr('class').removeAttr('style').removeAttr('width')\r\n\r\n      $current_image.parents('.fr-img-caption').css('width', current_width);\r\n      let imgLengthCaption = $current_image.parents('.fr-img-space-wrap').length;\r\n      if (imgLengthCaption > 1) {\r\n        unwrap(document.querySelector('.fr-img-space-wrap'));\r\n        unwrap(document.querySelector('.fr-img-space-wrap2'));\r\n      }\r\n      _exitEdit(true)\r\n\r\n      editor.selection.restore()\r\n    }\r\n    else {\r\n      $el = getEl()\r\n      $current_image.insertBefore($el);\r\n\r\n      if ($el[0].querySelector('a') !== null) {\r\n        let newTag = $el[0].querySelector('a');\r\n        \r\n        var ancorTag = document.createElement(\"a\");\r\n        for (var att, i = 0, atts = newTag.attributes, n = atts.length; i < n; i++) {\r\n          att = atts[i];\r\n          ancorTag.setAttribute(att.nodeName, att.nodeValue);\r\n        }\r\n        $current_image.wrap(ancorTag);\r\n      }\r\n      \r\n      $current_image\r\n        .attr('class', $el.attr('class').replace('fr-img-caption', ''))\r\n        .attr('style', $el.attr('style'))\r\n      $el.remove()\r\n      let imgElementLength = $current_image.parents('.fr-img-space-wrap').length;\r\n      if (imgElementLength > 1) {\r\n        unwrap(document.querySelector('.fr-img-space-wrap'));\r\n        unwrap(document.querySelector('.fr-img-space-wrap2'));\r\n      }\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  //return removed second wraping div\r\n  function unwrap(wrapper) {\r\n    // place childNodes in document fragment\r\n    var docFrag = document.createDocumentFragment();\r\n    while (wrapper.firstChild) {\r\n      var child = wrapper.removeChild(wrapper.firstChild);\r\n      docFrag.appendChild(child);\r\n    }\r\n\r\n    // replace wrapper with document fragment\r\n    wrapper.parentNode.replaceChild(docFrag, wrapper);\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshUploadButton: refreshUploadButton,\r\n    refreshByURLButton: refreshByURLButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    align: align,\r\n    refreshAlign: refreshAlign,\r\n    refreshAlignOnShow: refreshAlignOnShow,\r\n    display: display,\r\n    refreshDisplayOnShow: refreshDisplayOnShow,\r\n    replace: replace,\r\n    back: back,\r\n    get: get,\r\n    getEl: getEl,\r\n    insert: insert,\r\n    showProgressBar: showProgressBar,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    applyStyle: applyStyle,\r\n    showAltPopup: showAltPopup,\r\n    showSizePopup: showSizePopup,\r\n    setAlt: setAlt,\r\n    setSize: setSize,\r\n    toggleCaption: toggleCaption,\r\n    hasCaption: hasCaption,\r\n    exitEdit: _exitEdit,\r\n    edit: _editImg\r\n  }\r\n}\r\n\r\n// Insert image button.\r\nFE.DefineIcon('insertImage', {\r\n  NAME: 'image',\r\n  SVG_KEY: 'insertImage'\r\n})\r\nFE.RegisterShortcut(FE.KEYCODE.P, 'insertImage', null, 'P')\r\nFE.RegisterCommand('insertImage', {\r\n  title: 'Insert Image',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('image.insert')) {\r\n      this.image.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('image.insert')\r\n    }\r\n  },\r\n  plugin: 'image'\r\n})\r\n\r\n// Image upload button inside the insert image popup.\r\nFE.DefineIcon('imageUpload', {\r\n  NAME: 'upload',\r\n  SVG_KEY: 'upload'\r\n})\r\nFE.RegisterCommand('imageUpload', {\r\n  title: 'Upload Image',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.image.showLayer('image-upload')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshUploadButton($btn)\r\n  }\r\n})\r\n\r\n// Image by URL button inside the insert image popup.\r\nFE.DefineIcon('imageByURL', {\r\n  NAME: 'link',\r\n  SVG_KEY: 'insertLink'\r\n})\r\nFE.RegisterCommand('imageByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.image.showLayer('image-by-url')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshByURLButton($btn)\r\n  }\r\n})\r\n\r\n// Insert image button inside the insert by URL layer.\r\nFE.RegisterCommand('imageInsertByURL', {\r\n  title: 'Insert Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.insertByURL()\r\n  },\r\n  refresh: function ($btn) {\r\n    const $current_image = this.image.get()\r\n\r\n    if (!$current_image) {\r\n      $btn.text(this.language.translate('Insert'))\r\n    }\r\n    else {\r\n      $btn.text(this.language.translate('Replace'))\r\n    }\r\n  }\r\n})\r\n\r\n// Image display.\r\nFE.DefineIcon('imageDisplay', {\r\n  NAME: 'star',\r\n  SVG_KEY: 'imageDisplay'\r\n})\r\nFE.RegisterCommand('imageDisplay', {\r\n  title: 'Display',\r\n  type: 'dropdown',\r\n  options: {\r\n    inline: 'Inline',\r\n    block: 'Break Text'\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.display(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.imageTextNear) $btn.addClass('fr-hidden')\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.image.refreshDisplayOnShow($btn, $dropdown)\r\n  }\r\n})\r\n\r\n// Image align.\r\nFE.DefineIcon('image-align', {\r\n  NAME: 'align-left',\r\n  SVG_KEY: 'alignLeft'\r\n})\r\nFE.DefineIcon('image-align-left', {\r\n  NAME: 'align-left',\r\n  SVG_KEY: 'alignLeft'\r\n})\r\nFE.DefineIcon('image-align-right', {\r\n  NAME: 'align-right',\r\n  SVG_KEY: 'alignRight'\r\n})\r\nFE.DefineIcon('image-align-center', {\r\n  NAME: 'align-justify',\r\n  SVG_KEY: 'alignCenter'\r\n})\r\n\r\nFE.DefineIcon('imageAlign', {\r\n  NAME: 'align-justify',\r\n  SVG_KEY: 'alignJustify'\r\n})\r\nFE.RegisterCommand('imageAlign', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'None',\r\n    right: 'Align Right'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { options } = FE.COMMANDS.imageAlign\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`image-align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.align(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshAlign($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.image.refreshAlignOnShow($btn, $dropdown)\r\n  }\r\n})\r\n\r\n// Image replace.\r\nFE.DefineIcon('imageReplace', {\r\n  NAME: 'exchange',\r\n  FA5NAME: 'exchange-alt',\r\n  SVG_KEY: 'replaceImage'\r\n})\r\nFE.RegisterCommand('imageReplace', {\r\n  title: 'Replace',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.replace()\r\n  }\r\n})\r\n\r\n// Image remove.\r\nFE.DefineIcon('imageRemove', {\r\n  NAME: 'trash',\r\n  SVG_KEY: 'remove'\r\n})\r\nFE.RegisterCommand('imageRemove', {\r\n  title: 'Remove',\r\n  callback: function () {\r\n    this.image.remove()\r\n  }\r\n})\r\n\r\n// Image back.\r\nFE.DefineIcon('imageBack', {\r\n  NAME: 'arrow-left',\r\n  SVG_KEY: 'back'\r\n})\r\nFE.RegisterCommand('imageBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.image.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    const { $ } = this\r\n    const $current_image = this.image.get()\r\n\r\n    if (!$current_image && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\r\n    this.image.hideProgressBar(true)\r\n  }\r\n})\r\n\r\n// Image styles.\r\nFE.DefineIcon('imageStyle', {\r\n  NAME: 'magic',\r\n  SVG_KEY: 'imageClass'\r\n})\r\nFE.RegisterCommand('imageStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.imageStyles\r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        let val = options[cls]\r\n\r\n        if (typeof val == 'object') val = val.title\r\n\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageStyle\" data-param1=\"${cls}\">${this.language.translate(val)}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.applyStyle(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const { $ } = this\r\n    const $current_image = this.image.getEl()\r\n\r\n    if ($current_image) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $current_image.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// Image alt.\r\nFE.DefineIcon('imageAlt', {\r\n  NAME: 'info',\r\n  SVG_KEY: 'imageAltText'\r\n})\r\nFE.RegisterCommand('imageAlt', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Alternative Text',\r\n  callback: function () {\r\n    this.image.showAltPopup()\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageSetAlt', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.setAlt()\r\n  }\r\n})\r\n\r\n// Image size.\r\nFE.DefineIcon('imageSize', {\r\n  NAME: 'arrows-alt',\r\n  SVG_KEY: 'imageSize'\r\n})\r\nFE.RegisterCommand('imageSize', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Change Size',\r\n  callback: function () {\r\n    this.image.showSizePopup()\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageSetSize', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.setSize()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('imageCaption', {\r\n  NAME: 'commenting',\r\n  FA5NAME: 'comment-alt',\r\n  SVG_KEY: 'imageCaption'\r\n})\r\n\r\nFE.RegisterCommand('imageCaption', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Image Caption',\r\n  refreshAfterCallback: true,\r\n  callback: function () {\r\n    this.image.toggleCaption();\r\n  },\r\n  refresh: function ($btn) {\r\n    if (this.image.get()) {\r\n      $btn.toggleClass('fr-active', this.image.hasCaption())\r\n    }\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  imageManagerLoadURL: 'https://i.froala.com/load-files',\r\n  imageManagerLoadMethod: 'get',\r\n  imageManagerLoadParams: {},\r\n  imageManagerPreloader: null,\r\n  imageManagerDeleteURL: '',\r\n  imageManagerDeleteMethod: 'post',\r\n  imageManagerDeleteParams: {},\r\n  imageManagerPageSize: 12,\r\n  imageManagerScrollOffset: 20,\r\n  imageManagerToggleTags: true\r\n})\r\n\r\nFE.PLUGINS.imageManager = function (editor) {\r\n\r\n  const $ = editor.$\r\n  let $modal\r\n  const modal_id = 'image_manager'\r\n\r\n  let $head\r\n  let $body\r\n  let $preloader\r\n  let $media_files\r\n  let $image_tags\r\n  let images\r\n  let page\r\n  let image_count\r\n  let loaded_images\r\n  let column_number\r\n\r\n  // Load errors.\r\n  const BAD_LINK = 10\r\n  const ERROR_DURING_LOAD = 11\r\n  const MISSING_LOAD_URL_OPTION = 12\r\n  const LOAD_BAD_RESPONSE = 13\r\n  const MISSING_IMG_THUMB = 14\r\n  const MISSING_IMG_URL = 15\r\n\r\n  // Delete errors\r\n  const ERROR_DURING_DELETE = 21\r\n  const MISSING_DELETE_URL_OPTION = 22\r\n\r\n  // Error Messages\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Image cannot be loaded from the passed link.'\r\n  error_messages[ERROR_DURING_LOAD] = 'Error during load images request.'\r\n  error_messages[MISSING_LOAD_URL_OPTION] = 'Missing imageManagerLoadURL option.'\r\n  error_messages[LOAD_BAD_RESPONSE] = 'Parsing load response failed.'\r\n  error_messages[MISSING_IMG_THUMB] = 'Missing image thumb.'\r\n  error_messages[MISSING_IMG_URL] = 'Missing image URL.'\r\n  error_messages[ERROR_DURING_DELETE] = 'Error during delete image request.'\r\n  error_messages[MISSING_DELETE_URL_OPTION] = 'Missing imageManagerDeleteURL option.'\r\n\r\n  /*\r\n   * Show the image manager.\r\n   */\r\n  function show() {\r\n\r\n    // Build the image manager.\r\n    if (!$modal) {\r\n\r\n      // Build head.\r\n      let head = `<button class=\"fr-command fr-btn fr-modal-more fr-not-available\" id=\"fr-modal-more-${editor.sid}\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"\"><path d=\"${FE.SVG.tags}\"/></svg></button><h4 data-text=\"true\">${editor.language.translate('Manage Images')}</h4></div>\r\n      <div class=\"fr-modal-tags\" id=\"fr-modal-tags\">`\r\n\r\n      // Preloader.\r\n      let body\r\n\r\n      if (editor.opts.imageManagerPreloader) {\r\n        body = `<img class=\"fr-preloader\" id=\"fr-preloader\" alt=\"${editor.language.translate('Loading')}..\" src=\"${editor.opts.imageManagerPreloader}\" style=\"display: none;\">`\r\n      }\r\n      else {\r\n        body = `<span class=\"fr-preloader\" id=\"fr-preloader\" style=\"display: none;\">${editor.language.translate('Loading')}</span>`\r\n      }\r\n\r\n      // Image list.\r\n      body += '<div class=\"fr-image-list\" id=\"fr-image-list\"></div>'\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n      $modal = modalHash.$modal\r\n      $head = modalHash.$head\r\n      $body = modalHash.$body\r\n    }\r\n\r\n    // Set the current image (if modal is opened to replace an image).\r\n    $modal.data('current-image', editor.image.get())\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    if (!$preloader) {\r\n      _delayedInit()\r\n    }\r\n\r\n    // Load images.\r\n    _loadImages()\r\n  }\r\n\r\n  /*\r\n   * Hide the image manager.\r\n   */\r\n  function hide() {\r\n\r\n    // Hide modal.\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Get the number of columns based on window width.\r\n   */\r\n  function _columnNumber() {\r\n    const window_width = $(window).outerWidth()\r\n\r\n    // Screen XS.\r\n    if (window_width < 768) {\r\n      return 2\r\n    }\r\n\r\n    // Screen SM and MD.\r\n    else if (window_width < 1200) {\r\n      return 3\r\n    }\r\n\r\n    // Screen LG.\r\n    else {\r\n      return 4\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Add the correct number of columns.\r\n   */\r\n  function _buildColumns() {\r\n    $media_files.empty()\r\n\r\n    for (let i = 0; i < column_number; i++) {\r\n      $media_files.append('<div class=\"fr-list-column\"></div>')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load images from server.\r\n   */\r\n  function _loadImages() {\r\n    $preloader.show()\r\n    $media_files.find('.fr-list-column').empty()\r\n\r\n    // If the images load URL is set.\r\n    if (editor.opts.imageManagerLoadURL) {\r\n\r\n      // Make request to get list of images\r\n      $(this).ajax({\r\n        url: editor.opts.imageManagerLoadURL,\r\n        method: editor.opts.imageManagerLoadMethod,\r\n        data: editor.opts.imageManagerLoadParams,\r\n        crossDomain: editor.opts.requestWithCORS,\r\n        withCredentials: editor.opts.requestWithCredentials,\r\n        headers: editor.opts.requestHeaders,\r\n        // Success\r\n        done: function(data, status, xhr) {\r\n          editor.events.trigger('imageManager.imagesLoaded', [data])\r\n          _processLoadedImages(data, xhr.response)\r\n          $preloader.hide()\r\n        },\r\n        // Failure\r\n        fail: function(xhr) {\r\n          _throwError(ERROR_DURING_LOAD, xhr.response || xhr.responseText)\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    // Throw missing imageManagerLoadURL option error.\r\n    else {\r\n      _throwError(MISSING_LOAD_URL_OPTION)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Process loaded images.\r\n   */\r\n  function _processLoadedImages(imgs, response) {\r\n    try {\r\n      $media_files.find('.fr-list-column').empty()\r\n      page = 0\r\n      image_count = 0\r\n      loaded_images = 0\r\n      images = JSON.parse(imgs)\r\n\r\n      // Load files.\r\n      _infiniteScroll()\r\n    }\r\n\r\n    // Throw error while parsing the response.\r\n    catch (ex) {\r\n      _throwError(LOAD_BAD_RESPONSE, response)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load more images if necessary.\r\n   */\r\n  function _infiniteScroll() {\r\n\r\n    // If there aren't enough images in the modal or if the user scrolls down.\r\n    if (image_count < images.length &&\r\n      ($media_files.outerHeight() <= $body.outerHeight() + editor.opts.imageManagerScrollOffset ||\r\n        $body.scrollTop() + editor.opts.imageManagerScrollOffset > $media_files.outerHeight() - $body.outerHeight())) {\r\n\r\n      // Increase page number.\r\n      page++\r\n\r\n      // Load each image on this page.\r\n      for (let i = editor.opts.imageManagerPageSize * (page - 1); i < Math.min(images.length, editor.opts.imageManagerPageSize * page); i++) {\r\n        _loadImage(images[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load file.\r\n   */\r\n  function _loadImage(image) {\r\n    const img = new Image()\r\n    const $img_container = $(document.createElement('div')).attr('class', 'fr-image-container fr-empty fr-image-' + (loaded_images++)).attr('data-loading', editor.language.translate('Loading') + '..').attr('data-deleting', editor.language.translate('Deleting') + '..')\r\n\r\n    // After adding image empty container modal might change its height.\r\n    _resizeModal(false)\r\n\r\n    // Image has been loaded.\r\n    img.onload = function () {\r\n\r\n      // Update image container height.\r\n      $img_container.height(Math.floor($img_container.width() / img.width * img.height))\r\n\r\n      // Create image HTML.\r\n      const $img = $(document.createElement('img'))\r\n\r\n      // Use image thumb in image manager.\r\n      if (image.thumb) {\r\n\r\n        // Set image src attribute/\r\n        $img.attr('src', image.thumb)\r\n      }\r\n\r\n      // Image does not have thumb.\r\n      else {\r\n\r\n        // Throw missing image thumb error.\r\n        _throwError(MISSING_IMG_THUMB, image)\r\n\r\n        // Set image URL as src attribute.\r\n        if (image.url) {\r\n          $img.attr('src', image.url)\r\n        }\r\n\r\n        // Missing image URL.\r\n        else {\r\n\r\n          // Throw missing image url error.\r\n          _throwError(MISSING_IMG_URL, image)\r\n\r\n          // Don't go further if image does not have a src attribute.\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Save image URL.\r\n      if (image.url) $img.attr('data-url', image.url)\r\n\r\n      // Image tags.\r\n      if (image.tag) {\r\n\r\n        // Show tags only if there are any.\r\n        $head.find('.fr-modal-more.fr-not-available').removeClass('fr-not-available')\r\n        $head.find('.fr-modal-tags').show()\r\n\r\n        // Image has more than one tag.\r\n        if (image.tag.indexOf(',') >= 0) {\r\n\r\n          // Add tags to the image manager tag list.\r\n          const tags = image.tag.split(',')\r\n\r\n          for (let i = 0; i < tags.length; i++) {\r\n\r\n            // Remove trailing spaces.\r\n            tags[i] = tags[i].trim()\r\n\r\n            // Add tag.\r\n            if ($image_tags.find(`a[title=\"${tags[i]}\"]`).length === 0) {\r\n              $image_tags.append(`<a role=\"button\" title=\"${tags[i]}\">${tags[i]}</a>`)\r\n            }\r\n          }\r\n\r\n          // Set img tag attribute.\r\n          $img.attr('data-tag', tags.join())\r\n        }\r\n\r\n        // Image has only one tag.\r\n        else {\r\n\r\n          // Add tag to the tag list.\r\n          if ($image_tags.find(`a[title=\"${image.tag.trim()}\"]`).length === 0) {\r\n            $image_tags.append(`<a role=\"button\" title=\"${image.tag.trim()}\">${image.tag.trim()}</a>`)\r\n          }\r\n\r\n          // Set img tag attribute.\r\n          $img.attr('data-tag', image.tag.trim())\r\n        }\r\n      }\r\n\r\n      // Image alt.\r\n      if (image.name) {\r\n        $img.attr('alt', image.name)\r\n      }\r\n\r\n      // Set image additional data.\r\n      for (const key in image) {\r\n        if (image.hasOwnProperty(key)) {\r\n          if (key !== 'thumb' && key !== 'url' && key !== 'tag') {\r\n            $img.attr(`data-${key}`, image[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add image and insert and delete buttons to the image container.\r\n      $img_container\r\n        .append($img)\r\n        .append($(editor.icon.create('imageManagerDelete')).addClass('fr-delete-img').attr('title', editor.language.translate('Delete')))\r\n        .append($(editor.icon.create('imageManagerInsert')).addClass('fr-insert-img').attr('title', editor.language.translate('Insert')))\r\n\r\n      // Show image only if it has selected tags.\r\n      $image_tags.find('.fr-selected-tag').each(function (index, tag) {\r\n        if (!_imageHasTag($img, tag.text)) {\r\n          $img_container.hide()\r\n        }\r\n      })\r\n\r\n      // After an image is loaded the modal may need to be resized.\r\n      $img.on('load', function () {\r\n\r\n        // Image container is no longer empty.\r\n        $img_container.removeClass('fr-empty')\r\n        $img_container.height('auto')\r\n\r\n        // Increase image counter.\r\n        image_count++\r\n\r\n        // A loded image may break the images order. Reorder them starting with this image.\r\n        const imgs = _getImages(parseInt($img.parent().attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n        // Reorder images.\r\n        _reorderImages(imgs)\r\n\r\n        // Image modal may need resizing.\r\n        _resizeModal(false)\r\n\r\n        // If this was the last image on page then we might need to load more.\r\n        if (image_count % editor.opts.imageManagerPageSize === 0) {\r\n          _infiniteScroll()\r\n        }\r\n      })\r\n\r\n      // Trigger imageLoaded event.\r\n      editor.events.trigger('imageManager.imageLoaded', [$img])\r\n    }\r\n\r\n    // Error while loading the image.\r\n    img.onerror = function () {\r\n      image_count++\r\n      $img_container.remove()\r\n\r\n      // Removing an image container may break image order.\r\n      const imgs = _getImages(parseInt($img_container.attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n      // Reorder images.\r\n      _reorderImages(imgs)\r\n\r\n      _throwError(BAD_LINK, image)\r\n\r\n      // If this was the last image on page then we might need to load more.\r\n      if (image_count % editor.opts.imageManagerPageSize === 0) {\r\n        _infiniteScroll()\r\n      }\r\n    }\r\n\r\n    // Set the image object's src.\r\n    img.src = image.thumb || image.url\r\n\r\n    // Add loaded or empty image to the media manager image list on the shortest column.\r\n    _shortestColumn().append($img_container)\r\n  }\r\n\r\n  /*\r\n   * Get the shortest image column.\r\n   */\r\n  function _shortestColumn() {\r\n    let $col\r\n    let min_height\r\n\r\n    $media_files.find('.fr-list-column').each(function (index, col) {\r\n      const $column = $(col)\r\n\r\n      // Assume that the first column is the shortest.\r\n      if (index === 0) {\r\n        min_height = $column.outerHeight()\r\n        $col = $column\r\n      }\r\n\r\n      // Check if another column is shorter.\r\n      else {\r\n        if ($column.outerHeight() < min_height) {\r\n          min_height = $column.outerHeight()\r\n          $col = $column\r\n        }\r\n      }\r\n    })\r\n\r\n    return $col\r\n  }\r\n\r\n  /*\r\n   * Get all images from the image manager.\r\n   */\r\n  function _getImages(from) {\r\n    if (from === undefined) from = 0\r\n    const get_images = []\r\n\r\n    for (let i = loaded_images - 1; i >= from; i--) {\r\n      const $image = $media_files.find(`.fr-image-${i}`)\r\n\r\n      if ($image.length) {\r\n        get_images.push($image)\r\n\r\n        // Add images here before deleting them so the on load callback is triggered.\r\n        $(document.createElement('div')).attr('id', 'fr-image-hidden-container').append($image)\r\n        $media_files.find(`.fr-image-${i}`).remove()\r\n      }\r\n    }\r\n\r\n    return get_images\r\n  }\r\n\r\n  /*\r\n   * Add images back into the image manager.\r\n   */\r\n  function _reorderImages(imgs) {\r\n    for (let i = imgs.length - 1; i >= 0; i--) {\r\n      _shortestColumn().append(imgs[i])\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Resize the media manager modal if height changes.\r\n   */\r\n  function _resizeModal(infinite_scroll) {\r\n    if (infinite_scroll === undefined) infinite_scroll = true\r\n\r\n    if (!$modal.isVisible()) return true\r\n\r\n    // If width changes, the number of columns may change.\r\n    const cols = _columnNumber()\r\n\r\n    if (cols !== column_number) {\r\n      column_number = cols\r\n\r\n      // Get all images.\r\n      const imgs = _getImages()\r\n\r\n      // Remove current columns and add new ones.\r\n      _buildColumns()\r\n\r\n      // Reorder images.\r\n      _reorderImages(imgs)\r\n    }\r\n\r\n    editor.modals.resize(modal_id)\r\n\r\n    // Load more photos when window is resized if necessary.\r\n    if (infinite_scroll) {\r\n      _infiniteScroll()\r\n    }\r\n  }\r\n\r\n  function _getImageAttrs($img) {\r\n    var name,\r\n      attrs = $img[0].attributes,\r\n      i = attrs.length,\r\n      img_attributes = {}\r\n\r\n    while (i--) {\r\n      if (attrs[i]) {\r\n        name = attrs[i].name\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n        // Include all attributes from the image manager except 'src'\r\n        if(name !== 'src') {\r\n          img_attributes[name] = attrs[i].value\r\n        }\r\n      }\r\n    }\r\n\r\n    return img_attributes\r\n  }\r\n\r\n  /*\r\n   * Insert image into the editor.\r\n   */\r\n  function _insertImage(e) {\r\n\r\n    // Image to insert.\r\n    const $img = $(e.currentTarget).siblings('img')\r\n\r\n    const inst = $modal.data('instance') || editor\r\n    const $current_image = $modal.data('current-image')\r\n\r\n    editor.modals.hide(modal_id)\r\n    inst.image.showProgressBar()\r\n\r\n    if (!$current_image) {\r\n\r\n      // Make sure we have focus.\r\n      inst.events.focus(true)\r\n      inst.selection.restore()\r\n\r\n      const rect = inst.position.getBoundingRect()\r\n\r\n      const left = rect.left + rect.width / 2 + $(editor.doc).scrollLeft()\r\n      const top = rect.top + rect.height + $(editor.doc).scrollTop()\r\n\r\n      // Show the image insert popup.\r\n      inst.popups.setContainer('image.insert', editor.$sc)\r\n      inst.popups.show('image.insert', left, top)\r\n    }\r\n    else {\r\n      $current_image.data('fr-old-src', $current_image.attr('src'))\r\n      $current_image.trigger('click')\r\n    }\r\n\r\n    inst.image.insert($img.data('url'), false, _getImageAttrs($img), $current_image)\r\n  }\r\n\r\n  /*\r\n   * Update tags.\r\n   */\r\n  function _updateTags() {\r\n    $modal.find('#fr-modal-tags > a').each(function () {\r\n\r\n      if ($modal.find(`#fr-image-list [data-tag*=\"${$(this).text()}\"]`).length === 0) {\r\n        $(this).removeClass('fr-selected-tag').hide()\r\n      }\r\n    })\r\n\r\n    _showImagesByTags()\r\n  }\r\n\r\n  /*\r\n   * Delete image.\r\n   */\r\n  function _deleteImage(e) {\r\n\r\n    // Image to delete.\r\n    const $img = $(e.currentTarget).siblings('img')\r\n\r\n    // Confirmation message.\r\n    const message = editor.language.translate('Are you sure? Image will be deleted.')\r\n\r\n    // Ask for confirmation.\r\n    if (confirm(message)) {\r\n\r\n      // If the images delete URL is set.\r\n      if (editor.opts.imageManagerDeleteURL) {\r\n\r\n        // Before delete image event.\r\n        if (editor.events.trigger('imageManager.beforeDeleteImage', [$img]) !== false) {\r\n          $img.parent().addClass('fr-image-deleting')\r\n\r\n          // Make request to delete image from server.\r\n          $(this).ajax({\r\n            method: editor.opts.imageManagerDeleteMethod,\r\n            url: editor.opts.imageManagerDeleteURL,\r\n            data: Object.assign(Object.assign({ src: $img.attr('src') }, _getImageAttrs($img)), editor.opts.imageManagerDeleteParams),\r\n            crossDomain: editor.opts.requestWithCORS,\r\n            withCredentials: editor.opts.requestWithCredentials,\r\n            headers: editor.opts.requestHeaders,\r\n            // Success function\r\n            done: function (data, status, xhr) {\r\n              editor.events.trigger('imageManager.imageDeleted', [data])\r\n\r\n              // A deleted image may break the images order. Reorder them starting with this image.\r\n              const imgs = _getImages(parseInt($img.parent().attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n              // Remove the image.\r\n              $img.parent().remove()\r\n\r\n              // Reorder images.\r\n              _reorderImages(imgs)\r\n\r\n              // Update tags.\r\n              _updateTags()\r\n\r\n              // Modal needs resizing.\r\n              _resizeModal(true)\r\n            },\r\n            // Failure function\r\n            fail: function (xhr) {\r\n              _throwError(ERROR_DURING_DELETE, xhr.response || xhr.responseText)\r\n            }\r\n          })\r\n\r\n        }\r\n      }\r\n\r\n      // Throw missing imageManagerDeleteURL option error.\r\n      else {\r\n        _throwError(MISSING_DELETE_URL_OPTION)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Throw image manager errors.\r\n   */\r\n  function _throwError(code, response) {\r\n\r\n    // Load images error.\r\n    if (10 <= code && code < 20) {\r\n\r\n      // Hide preloader.\r\n      $preloader.hide()\r\n    }\r\n\r\n    // Delete image error.\r\n    else if (20 <= code && code < 30) {\r\n\r\n      // Remove deleting overlay.\r\n      $('.fr-image-deleting').removeClass('fr-image-deleting')\r\n    }\r\n\r\n    // Trigger error event.\r\n    editor.events.trigger('imageManager.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  /*\r\n   * Toogle (show or hide) image tags.\r\n   */\r\n  function _toggleTags() {\r\n    const title_height = $head.find('.fr-modal-head-line').outerHeight()\r\n    const tags_height = $image_tags.outerHeight()\r\n\r\n    // Use .fr-show-tags.\r\n    $head.toggleClass('fr-show-tags')\r\n\r\n    if ($head.hasClass('fr-show-tags')) {\r\n\r\n      // Show tags by changing height to have transition.\r\n      $head.css('height', title_height + tags_height)\r\n      // Shift the body by the same amount as the head\r\n      $body.css('marginTop', title_height + tags_height)\r\n      $image_tags.find('a').css('opacity', 1)\r\n    }\r\n\r\n    else {\r\n\r\n      // Hide tags by changing height to have transition.\r\n      $head.css('height', title_height)\r\n      $body.css('marginTop', title_height)\r\n      $image_tags.find('a').css('opacity', 0)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show only images with selected tags.\r\n   */\r\n  function _showImagesByTags() {\r\n\r\n    // Get all selected tags.\r\n    const $tags = $image_tags.find('.fr-selected-tag')\r\n\r\n    // Show only images with selected tags.\r\n    if ($tags.length > 0) {\r\n\r\n      // Hide all images.\r\n      $media_files.find('img').parents().show()\r\n\r\n      // Show only images with tag.\r\n      $tags.each(function (index, tag) {\r\n        $media_files.find('img').each(function (index, img) {\r\n          const $img = $(img)\r\n\r\n          if (!_imageHasTag($img, tag.text)) {\r\n            $img.parent().hide()\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // There are no more tags selected. Show all images.\r\n    else {\r\n      $media_files.find('img').parents().show()\r\n    }\r\n\r\n    // Rearrange images.\r\n    const imgs = _getImages()\r\n\r\n    // Reorder images.\r\n    _reorderImages(imgs)\r\n\r\n    // Load more images if necessary.\r\n    _infiniteScroll()\r\n  }\r\n\r\n  /*\r\n   * Select an image tag from the list.\r\n   */\r\n  function _selectTag(e) {\r\n    e.preventDefault()\r\n\r\n    // Toggle current tags class.\r\n    const $tag = $(e.currentTarget)\r\n    $tag.toggleClass('fr-selected-tag')\r\n\r\n    // Toggle selected tags.\r\n    if (editor.opts.imageManagerToggleTags) $tag.siblings('a').removeClass('fr-selected-tag')\r\n\r\n    // Change displayed images.\r\n    _showImagesByTags()\r\n  }\r\n\r\n  /*\r\n   * Method to check if an image has a specific tag.\r\n   */\r\n  function _imageHasTag($image, tag) {\r\n    const tags = ($image.attr('data-tag') || '').split(',')\r\n\r\n    for (let i = 0; i < tags.length; i++) {\r\n      if (tags[i] === tag) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function _delayedInit() {\r\n    $preloader = $modal.find('#fr-preloader')\r\n    $media_files = $modal.find('#fr-image-list')\r\n    $image_tags = $modal.find('#fr-modal-tags')\r\n\r\n    // Columns.\r\n    column_number = _columnNumber()\r\n    _buildColumns()\r\n\r\n    // Set height for title (we need this for show tags transition).\r\n    $head.css('height', $head.find('.fr-modal-head-line').outerHeight())\r\n\r\n    // Resize media manager modal on window resize.\r\n    editor.events.$on($(editor.o_win), 'resize', function () {\r\n\r\n      // Window resize with image manager opened.\r\n      if (images) {\r\n        _resizeModal(true)\r\n      }\r\n\r\n      // iOS window resize is triggered when modal first opens (no images loaded).\r\n      else {\r\n        _resizeModal(false)\r\n      }\r\n    })\r\n\r\n    // Insert image.\r\n    editor.events.bindClick($media_files, '.fr-insert-img', _insertImage)\r\n\r\n    // Delete image.\r\n    editor.events.bindClick($media_files, '.fr-delete-img', _deleteImage)\r\n\r\n    // Delete and insert buttons for mobile.\r\n    if (editor.helpers.isMobile()) {\r\n\r\n      // Show image buttons on mobile.\r\n      editor.events.bindClick($media_files, 'div.fr-image-container', function (e) {\r\n        $modal.find('.fr-mobile-selected').removeClass('fr-mobile-selected')\r\n        $(e.currentTarget).addClass('fr-mobile-selected')\r\n      })\r\n\r\n      // Hide image buttons if we click outside it.\r\n      $modal.on(editor._mousedown, function () {\r\n        $modal.find('.fr-mobile-selected').removeClass('fr-mobile-selected')\r\n      })\r\n    }\r\n\r\n    // Make sure we don't trigger blur.\r\n    $modal.on(editor._mousedown + ' ' + editor._mouseup, function (e) {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse down on anything.\r\n    $modal.on(editor._mousedown, '*', function () {\r\n      editor.events.disableBlur()\r\n    })\r\n\r\n    // Infinite scroll\r\n    $body.on('scroll', _infiniteScroll)\r\n\r\n    // Click on image tags button.\r\n    editor.events.bindClick($modal, `button#fr-modal-more-${editor.sid}`, _toggleTags)\r\n\r\n    // Select an image tag.\r\n    editor.events.bindClick($image_tags, 'a', _selectTag)\r\n  }\r\n\r\n  /*\r\n   * Init media manager.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp && editor.el.tagName !== 'IMG') return false\r\n  }\r\n\r\n  return {\r\n    require: ['image'],\r\n    _init: _init,\r\n    show: show,\r\n    hide: hide\r\n  }\r\n}\r\n\r\nif (!FE.PLUGINS.image) {\r\n  throw new Error('Image manager plugin requires image plugin.')\r\n}\r\n\r\nFE.DEFAULTS.imageInsertButtons.push('imageManager')\r\n\r\nFE.RegisterCommand('imageManager', {\r\n  title: 'Browse',\r\n  undo: false,\r\n  focus: false,\r\n  modal: true,\r\n  callback: function () {\r\n    this.imageManager.show()\r\n  },\r\n  plugin: 'imageManager'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManager', {\r\n  NAME: 'folder',\r\n  SVG_KEY: 'imageManager'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManagerInsert', {\r\n  NAME: 'plus',\r\n  SVG_KEY: 'add'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManagerDelete', {\r\n  NAME: 'trash',\r\n  SVG_KEY: 'remove'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  inlineClasses: {\r\n    'fr-class-code': 'Code',\r\n    'fr-class-highlighted': 'Highlighted',\r\n    'fr-class-transparency': 'Transparent'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.inlineClass = function (editor) {\r\n  const { $ } = editor\r\n  function apply(val) {\r\n    editor.format.toggle('span', { 'class': val })\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    $dropdown.find('.fr-command').each(function () {\r\n      const val = $(this).data('param1')\r\n      const active = editor.format.is('span', { 'class': val })\r\n      $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n    })\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the inlineClass size command.\r\nFE.RegisterCommand('inlineClass', {\r\n  type: 'dropdown',\r\n  title: 'Inline Class',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { inlineClasses : options } = this.opts\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"inlineClass\" data-param1=\"${val}\" title=\"${options[val]}\">${options[val]}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.inlineClass.apply(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.inlineClass.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'inlineClass'\r\n})\r\n\r\n// Add the inlineClass icon.\r\nFE.DefineIcon('inlineClass', {\r\n  NAME: 'tag',\r\n  SVG_KEY: 'inlineClass'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  inlineStyles: {\r\n    'Big Red': 'font-size: 20px; color: red;',\r\n    'Small Blue': 'font-size: 14px; color: blue;'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.inlineStyle = function (editor) {\r\n  function apply(val) {\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1934\r\n    const splits = val.split(';')\r\n\r\n    for (let i = 0; i < splits.length; i++) {\r\n      const new_split = splits[i].split(':')\r\n\r\n      if (splits[i].length && new_split.length == 2) {\r\n        editor.format.applyStyle(new_split[0].trim(), new_split[1].trim())\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply\r\n  }\r\n}\r\n\r\n// Register the inline style command.\r\nFE.RegisterCommand('inlineStyle', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.inlineStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        const inlineStyle = options[val] + (options[val].indexOf('display:block;') === -1 ? ' display:block;' : '')\r\n        c += `<li role=\"presentation\"><span style=\"${inlineStyle}\" role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"inlineStyle\" data-param1=\"${options[val]}\" title=\"${this.language.translate(val)}\">${this.language.translate(val)}</a></span></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Inline Style',\r\n  callback: function (cmd, val) {\r\n    this.inlineStyle.apply(val)\r\n  },\r\n  plugin: 'inlineStyle'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('inlineStyle', {\r\n  NAME: 'paint-brush',\r\n  SVG_KEY: 'inlineStyle'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  lineBreakerTags: ['table', 'hr', 'form', 'dl', 'span.fr-video', '.fr-embedly', 'img'],\r\n  lineBreakerOffset: 15,\r\n  lineBreakerHorizontalOffset: 10\r\n}) \r\n\r\nFE.PLUGINS.lineBreaker = function (editor) {\r\n  const $ = editor.$\r\n  let $line_breaker \r\n  let mouseDownFlag \r\n  let mouseMoveTimer \r\n\r\n  /*\r\n   * Show line breaker.\r\n   * Compute top, left, width and show the line breaker.\r\n   * tag1 and tag2 are the tags between which the line breaker must be showed.\r\n   * If tag1 is null then tag2 is the first tag in the editor.\r\n   * If tag2 is null then tag1 is the last tag in the editor.\r\n   */\r\n  function _show($tag1, $tag2) {\r\n    // Line breaker's possition and width.\r\n    let breakerTop \r\n    let breakerLeft \r\n    let breakerWidth \r\n    let parent_tag \r\n    let parent_top \r\n    let parent_bottom \r\n    let tag_top \r\n    let tag_bottom \r\n\r\n    // Mouse is over the first tag in the editor. Show line breaker above tag2.\r\n    if ($tag1 == null) {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag2.parent() \r\n      parent_top = parent_tag.offset().top \r\n      tag_top = $tag2.offset().top \r\n\r\n      breakerTop = tag_top - Math.min((tag_top - parent_top) / 2, editor.opts.lineBreakerOffset) \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    // Mouse is over the last tag in the editor. Show line breaker below tag1.\r\n    else if ($tag2 == null) {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag1.parent() \r\n      parent_bottom = parent_tag.offset().top + parent_tag.outerHeight() \r\n      tag_bottom = $tag1.offset().top + $tag1.outerHeight() \r\n\r\n      if (parent_bottom < tag_bottom) {\r\n        parent_tag = $(parent_tag).parent() \r\n        parent_bottom = parent_tag.offset().top + parent_tag.outerHeight() \r\n      }\r\n\r\n      breakerTop = tag_bottom + Math.min(Math.abs(parent_bottom - tag_bottom) / 2, editor.opts.lineBreakerOffset) \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    // Mouse is between the 2 tags.\r\n    else {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag1.parent() \r\n      const tag1_bottom = $tag1.offset().top + $tag1.height() \r\n      const tag2_top = $tag2.offset().top \r\n\r\n      // Tags may be on the same line, so there is no need for line breaker.\r\n      if (tag1_bottom > tag2_top) {\r\n        return false \r\n      }\r\n\r\n      breakerTop = (tag1_bottom + tag2_top) / 2 \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      breakerLeft += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      breakerTop += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    editor.$box.append($line_breaker) \r\n\r\n    // Set line breaker's top, left and width.\r\n    $line_breaker.css('top', breakerTop - editor.win.pageYOffset) \r\n    $line_breaker.css('left', breakerLeft - editor.win.pageXOffset) \r\n    $line_breaker.css('width', breakerWidth) \r\n    $line_breaker.data('tag1', $tag1) \r\n    $line_breaker.data('tag2', $tag2) \r\n\r\n    // Show the line breaker.\r\n    $line_breaker.addClass('fr-visible').data('instance', editor) \r\n  }\r\n\r\n  /*\r\n   * Check tag siblings.\r\n   * The line breaker hould appear if there is no sibling or if the sibling is also in the line breaker tags list.\r\n   */\r\n  function _checkTagSiblings($tag, mouseY) {\r\n\r\n    // Tag's Y top and bottom coordinate.\r\n    const tag_top = $tag.offset().top \r\n    const tag_bottom = $tag.offset().top + $tag.outerHeight() \r\n    let $sibling \r\n    let tag \r\n\r\n    // Only if the mouse is close enough to the bottom or top edges.\r\n    if (Math.abs(tag_bottom - mouseY) <= editor.opts.lineBreakerOffset ||\r\n      Math.abs(mouseY - tag_top) <= editor.opts.lineBreakerOffset) {\r\n\r\n      // Mouse is near bottom check for next sibling.\r\n      if (Math.abs(tag_bottom - mouseY) < Math.abs(mouseY - tag_top)) {\r\n        tag = $tag.get(0) \r\n        let next_node = null \r\n        if(tag.nextSibling)  {\r\n\r\n          // check for visible element\r\n          next_node = tag.nextSibling.offsetParent ? tag.nextSibling : null\r\n        }\r\n\r\n        while (next_node && next_node.nodeType == Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n          next_node = next_node.nextSibling \r\n        }\r\n\r\n        // Tag has next sibling.\r\n        if (next_node) {\r\n          $sibling = _checkTag(next_node) \r\n\r\n          // Sibling is in the line breaker tags list.\r\n          if ($sibling) {\r\n\r\n            // Show line breaker.\r\n            _show($tag, $sibling) \r\n\r\n            return true \r\n          }\r\n\r\n          // No next sibling.\r\n        }\r\n        else {\r\n\r\n          // Show line breaker\r\n          _show($tag, null) \r\n\r\n          return true \r\n        }\r\n      }\r\n\r\n      // Mouse is near top check for prev sibling.\r\n      else {\r\n        tag = $tag.get(0) \r\n\r\n        // No prev sibling.\r\n        if (!tag.previousSibling) {\r\n\r\n          // Show line breaker\r\n          _show(null, $tag) \r\n\r\n          return true \r\n\r\n          // Tag has prev sibling.\r\n        }\r\n        else {\r\n          $sibling = _checkTag(tag.previousSibling) \r\n\r\n          // Sibling is in the line breaker tags list.\r\n          if ($sibling) {\r\n\r\n            // Show line breaker.\r\n            _show($sibling, $tag) \r\n\r\n            return true \r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    $line_breaker.removeClass('fr-visible').removeData('instance') \r\n  }\r\n\r\n  /*\r\n   * Check if tag is in the line breaker list and in the editor as well.\r\n   * Returns the tag from the line breaker list or false if the tag is not in the list.\r\n   */\r\n  function _checkTag(tag) {\r\n    if (tag) {\r\n      const $tag = $(tag) \r\n\r\n      // Make sure tag is inside the editor.\r\n      if (editor.$el.find($tag).length === 0) return null \r\n\r\n      // Tag is in the line breaker tags list.\r\n      if (tag.nodeType != Node.TEXT_NODE && $tag.is(editor.opts.lineBreakerTags.join(','))) {\r\n\r\n        return $tag \r\n      }\r\n\r\n      // Tag's parent is in the line breaker tags list.\r\n      else if ($tag.parents(editor.opts.lineBreakerTags.join(',')).length > 0) {\r\n        tag = $tag.parents(editor.opts.lineBreakerTags.join(',')).get(0) \r\n\r\n        if (editor.$el.find($(tag)).length === 0 || !$(tag).is(editor.opts.lineBreakerTags.join(','))) return null \r\n\r\n        return $(tag) \r\n      }\r\n    }\r\n\r\n    return null \r\n  }\r\n\r\n  function _isInWp(tag) {\r\n    if (typeof tag.inFroalaWrapper != 'undefined') return tag.inFroalaWrapper \r\n    const o_tag = tag \r\n\r\n    while (tag.parentNode && tag.parentNode !== editor.$wp.get(0)) {\r\n      tag = tag.parentNode \r\n    }\r\n\r\n    o_tag.inFroalaWrapper = (tag.parentNode == editor.$wp.get(0)) \r\n\r\n    return o_tag.inFroalaWrapper \r\n  }\r\n\r\n  /*\r\n   * Look for tag at the specified coordinates.\r\n   */\r\n  function _tagAt(x, y) {\r\n    const tag = editor.doc.elementFromPoint(x, y) \r\n\r\n    // We found a tag.\r\n    if (tag && !$(tag).closest('.fr-line-breaker').length && !editor.node.isElement(tag) && tag != editor.$wp.get(0) && _isInWp(tag)) {\r\n      return tag \r\n    }\r\n\r\n    // No tag at x, y.\r\n    return null \r\n  }\r\n\r\n  /*\r\n   * Look for tags above and bellow the specificed point.\r\n   */\r\n  function _searchTagVertically(x, y, step) {\r\n    let i = step \r\n    let tag = null \r\n\r\n    // Look up and down until a tag is found or the line breaker offset is reached.\r\n    while (i <= editor.opts.lineBreakerOffset && !tag) {\r\n\r\n      // Look for tag above.\r\n      tag = _tagAt(x, y - i) \r\n\r\n      if (!tag) {\r\n\r\n        // Look for tag below.\r\n        tag = _tagAt(x, y + i) \r\n      }\r\n\r\n      i += step \r\n    }\r\n\r\n    return tag \r\n  }\r\n\r\n  /*\r\n   * Look for tag left and right, up and down for each point.\r\n   */\r\n  function _searchTagHorizontally(x, y, direction) {\r\n    let tag = null \r\n\r\n    // Do not check left / right too much.\r\n    let limit = 100 \r\n\r\n    // Look left / right until a tag is found or the editor margins are reached.\r\n    while (!tag && x > editor.$box.offset().left && x < editor.$box.offset().left + editor.$box.outerWidth() && limit > 0) {\r\n      tag = _tagAt(x, y) \r\n\r\n      // There's not tag here, look up and down.\r\n      if (!tag) {\r\n\r\n        // Look 5px up and 5 down.\r\n        tag = _searchTagVertically(x, y, 5) \r\n      }\r\n\r\n      // Move left or right.\r\n      if (direction == 'left') x -= editor.opts.lineBreakerHorizontalOffset \r\n      else x += editor.opts.lineBreakerHorizontalOffset \r\n\r\n      limit -= editor.opts.lineBreakerHorizontalOffset \r\n    }\r\n\r\n    return tag \r\n  }\r\n\r\n  /*\r\n   * Get the tag under the mouse cursor.\r\n   */\r\n  function _tagUnder(e) {\r\n    mouseMoveTimer = null \r\n\r\n    // The tag for which the line breaker should be showed.\r\n    let $tag = null \r\n    let tag = null \r\n\r\n    // The tag under the mouse cursor.\r\n    const tag_under = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset) \r\n\r\n    // Tag is the editor element. Look for closest tag above and bellow, left and right.\r\n    if (tag_under && (tag_under.tagName == 'HTML' || tag_under.tagName == 'BODY' || editor.node.isElement(tag_under) || (tag_under.getAttribute('class') || '').indexOf('fr-line-breaker') >= 0)) {\r\n\r\n      // Look 1px up and 1 down.\r\n      tag = _searchTagVertically(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset, 1) \r\n\r\n      // Stil haven't found a tag, look left.\r\n      if (!tag) {\r\n        tag = _searchTagHorizontally(e.pageX - editor.win.pageXOffset - editor.opts.lineBreakerHorizontalOffset, e.pageY - editor.win.pageYOffset, 'left') \r\n      }\r\n\r\n      // Stil haven't found a tag, look right.\r\n      if (!tag) {\r\n        tag = _searchTagHorizontally(e.pageX - editor.win.pageXOffset + editor.opts.lineBreakerHorizontalOffset, e.pageY - editor.win.pageYOffset, 'right') \r\n      }\r\n\r\n      $tag = _checkTag(tag) \r\n\r\n      // Tag is not the editor element.\r\n    }\r\n    else {\r\n\r\n      // Check if the tag is in the line breaker list.\r\n      $tag = _checkTag(tag_under) \r\n    }\r\n\r\n    // Check tag siblings.\r\n    if ($tag) {\r\n      _checkTagSiblings($tag, e.pageY) \r\n    }\r\n    else if (editor.core.sameInstance($line_breaker)) {\r\n      $line_breaker.removeClass('fr-visible').removeData('instance') \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Set mouse timer to improve performance.\r\n   */\r\n  function _mouseTimer(e) {\r\n    if ($line_breaker.hasClass('fr-visible') && !editor.core.sameInstance($line_breaker)) return false \r\n\r\n    if (editor.popups.areVisible() || editor.el.querySelector('.fr-selected-cell')) {\r\n      $line_breaker.removeClass('fr-visible') \r\n\r\n      return true \r\n    }\r\n\r\n    if (mouseDownFlag === false && !editor.edit.isDisabled()) {\r\n      if (mouseMoveTimer) {\r\n        clearTimeout(mouseMoveTimer) \r\n      }\r\n\r\n      mouseMoveTimer = setTimeout(_tagUnder, 30, e) \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hide line breaker and prevent timer from showing it again.\r\n   */\r\n  function _hide() {\r\n    if (mouseMoveTimer) {\r\n      clearTimeout(mouseMoveTimer) \r\n    }\r\n\r\n    if ($line_breaker && $line_breaker.hasClass('fr-visible')) {\r\n      $line_breaker.removeClass('fr-visible').removeData('instance') \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is down and prevent line breaker from showing.\r\n   * This may happen either for selection or for drag.\r\n   */\r\n  const _mouseDown = () => {\r\n    mouseDownFlag = true \r\n    _hide() \r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is no longer pressed.\r\n   */\r\n  const _mouseUp = () => {\r\n    mouseDownFlag = false \r\n  }\r\n\r\n  /*\r\n   * Add new line between the tags.\r\n   */\r\n  function _doLineBreak(e) {\r\n    e.preventDefault() \r\n\r\n    const instance = $line_breaker.data('instance') || editor \r\n\r\n    // Hide the line breaker.\r\n    $line_breaker.removeClass('fr-visible').removeData('instance') \r\n\r\n    // Tags between which that line break needs to be done.\r\n    const $tag1 = $line_breaker.data('tag1') \r\n    const $tag2 = $line_breaker.data('tag2') \r\n\r\n    // P, DIV or none.\r\n    const default_tag = editor.html.defaultTag() \r\n\r\n    // The line break needs to be done before the first element in the editor.\r\n    if ($tag1 == null) {\r\n\r\n      // If the tag is in a TD tag then just add <br> no matter what the default_tag is.\r\n      if (default_tag && $tag2.parent().get(0).tagName != 'TD' && $tag2.parents(default_tag).length === 0) {\r\n        $tag2.before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $tag2.before(`${FE.MARKERS}<br>`) \r\n      }\r\n\r\n      // The line break needs to be done either after the last element in the editor or between the 2 tags.\r\n      // Either way the line break is after the first tag.\r\n    }\r\n    else {\r\n\r\n      // If the tag is in a TD tag then just add <br> no matter what the default_tag is.\r\n      if (default_tag && $tag1.parent().get(0).tagName != 'TD' && $tag1.parents(default_tag).length === 0) {\r\n        $tag1.after(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $tag1.after(`${FE.MARKERS}<br>`) \r\n      }\r\n    }\r\n\r\n    // Cursor is now at the beginning of the new line.\r\n    instance.selection.restore()\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n    // enable toolbar if it is disabled because of contenteditable=false\r\n    editor.toolbar.enable();\r\n  }\r\n\r\n  /*\r\n   * Initialize the line breaker.\r\n   */\r\n  function _initLineBreaker() {\r\n\r\n    // Append line breaker HTML to editor wrapper.\r\n    if (!editor.shared.$line_breaker) {\r\n      editor.shared.$line_breaker = $(document.createElement('div')).attr('class', 'fr-line-breaker').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Break')}\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><rect x=\"17\" y=\"7\" width=\"2\" height=\"8\"/><rect x=\"10\" y=\"13\" width=\"7\" height=\"2\"/><path d=\"M10.000,10.000 L10.000,18.013 L5.000,14.031 L10.000,10.000 Z\"/></svg></a>`)\r\n    }\r\n\r\n    $line_breaker = editor.shared.$line_breaker \r\n\r\n    // Editor shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $line_breaker.html('').removeData().remove() \r\n      $line_breaker = null \r\n    }, true) \r\n\r\n    // Editor destroy.\r\n    editor.events.on('destroy', function () {\r\n      $line_breaker.removeData('instance').removeClass('fr-visible')\r\n      $('body').first().append($line_breaker)\r\n      clearTimeout(mouseMoveTimer)\r\n    }, true)\r\n\r\n    editor.events.$on($line_breaker, 'mousemove', function (e) {\r\n      e.stopPropagation() \r\n    }, true)\r\n\r\n    // Add new line break.\r\n    editor.events.bindClick($line_breaker, 'a', _doLineBreak) \r\n  }\r\n\r\n  /*\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false \r\n\r\n    _initLineBreaker() \r\n\r\n    // Remember if mouse is clicked so the line breaker does not appear.\r\n    mouseDownFlag = false \r\n\r\n    // Check tags under the mouse to see if the line breaker needs to be shown.\r\n    editor.events.$on(editor.$win, 'mousemove', _mouseTimer) \r\n\r\n    // Hide the line breaker if the page is scrolled.\r\n    editor.events.$on($(editor.win), 'scroll', _hide) \r\n\r\n    // Hide the line breaker on cell edit.\r\n    editor.events.on('popups.show.table.edit', _hide) \r\n\r\n    // Hide the line breaker after command is ran.\r\n    editor.events.on('commands.after', _hide) \r\n\r\n    // Prevent line breaker from showing while selecting text or dragging images.\r\n    editor.events.$on($(editor.win), 'mousedown', _mouseDown) \r\n\r\n    // Mouse is not pressed anymore, line breaker may be shown.\r\n    editor.events.$on($(editor.win), 'mouseup', _mouseUp) \r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n} \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  lineHeights: {\r\n    Default: '',\r\n    Single: '1',\r\n    '1.15': '1.15',\r\n    '1.5': '1.5',\r\n    Double: '2'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.lineHeight = function (editor) {\r\n  const { $ } = editor\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val) {\r\n    editor.selection.save() \r\n    editor.html.wrap(true, true, true, true) \r\n    editor.selection.restore() \r\n\r\n    const blocks = editor.selection.blocks() \r\n\r\n    if (blocks.length && $(blocks[0]).parent().is('td')) {\r\n      editor.format.applyStyle('line-height', val.toString())\r\n    }\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save() \r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      $(blocks[i]).css('line-height', val)\r\n\r\n      if ($(blocks[i]).attr('style') === '') {\r\n        $(blocks[i]).removeAttr('style') \r\n      }\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    // Restore selection.\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks() \r\n\r\n    if (blocks.length) {\r\n      const $blk = $(blocks[0]) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const lineH = $(this).data('param1')\r\n        const blkStyle = $blk.attr('style')\r\n        let active = (blkStyle || '').indexOf('line-height: ' + lineH + ';') >= 0\r\n        \r\n        // Check if style contains line-height property, when text is pasted from other sources\r\n        // If not make `default` text selected\r\n        if (blkStyle) {\r\n          const lineStyle = blkStyle.substring(blkStyle.indexOf('line-height'))\r\n          const value  = lineStyle.substr(0, lineStyle.indexOf(';'))\r\n\r\n          // get value of line-height\r\n          const lineHeight = value && value.split(':')[1]\r\n\r\n          if ((!lineHeight || !lineHeight.length) && $blk.text() === 'Default') {\r\n            active = true\r\n          }\r\n        }\r\n\r\n        // keep `default` text selected always\r\n        if((!blkStyle || blkStyle.indexOf('line-height') === -1) && lineH === '') {\r\n          active = true\r\n        }\r\n\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active) \r\n      })\r\n    }\r\n  }\r\n\r\n  const _init = () => {\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('lineHeight', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { lineHeights : options } = this.opts \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"lineHeight\" data-param1=\"${options[val]}\" title=\"${this.language.translate(val)}\">${this.language.translate(val)}</a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  title: 'Line Height',\r\n  callback: function (cmd, val) {\r\n    this.lineHeight.apply(val) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.lineHeight.refreshOnShow($btn, $dropdown) \r\n  },\r\n  plugin: 'lineHeight'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('lineHeight', {\r\n  NAME: 'arrows-v',\r\n  FA5NAME: 'arrows-alt-v',\r\n  SVG_KEY: 'lineHeight'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'link.edit': '[_BUTTONS_]',\r\n  'link.insert': '[_BUTTONS_][_INPUT_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  linkEditButtons: ['linkOpen', 'linkStyle', 'linkEdit', 'linkRemove'],\r\n  linkInsertButtons: ['linkBack', '|', 'linkList'],\r\n  linkAttributes: {},\r\n  linkAutoPrefix: 'http://',\r\n  linkStyles: {\r\n    'fr-green': 'Green',\r\n    'fr-strong': 'Thick'\r\n  },\r\n  linkMultipleStyles: true,\r\n  linkConvertEmailAddress: true,\r\n  linkAlwaysBlank: false,\r\n  linkAlwaysNoFollow: false,\r\n  linkNoOpener: true,\r\n  linkNoReferrer: true,\r\n  linkList: [\r\n    {\r\n      text: 'Froala',\r\n      href: 'https://froala.com',\r\n      target: '_blank'\r\n    },\r\n    {\r\n      text: 'Google',\r\n      href: 'https://google.com',\r\n      target: '_blank'\r\n    },\r\n    {\r\n      displayText: 'Facebook',\r\n      href: 'https://facebook.com'\r\n    }\r\n  ],\r\n  linkText: true\r\n})\r\n\r\nFE.PLUGINS.link = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function get() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image && editor.$wp) {\r\n      let c_el = editor.selection.ranges(0).commonAncestorContainer \r\n\r\n      try {\r\n        if (c_el && ((c_el.contains && c_el.contains(editor.el)) || !editor.el.contains(c_el) || editor.el == c_el)) c_el = null \r\n      }\r\n      catch (ex) {\r\n        c_el = null \r\n      }\r\n\r\n      if (c_el && c_el.tagName === 'A') return c_el \r\n      let s_el = editor.selection.element() \r\n      let e_el = editor.selection.endElement() \r\n\r\n      if (s_el.tagName != 'A' && !editor.node.isElement(s_el)) {\r\n        s_el = $(s_el).parentsUntil(editor.$el, 'a').first().get(0) \r\n      }\r\n\r\n      if (e_el.tagName != 'A' && !editor.node.isElement(e_el)) {\r\n        e_el = $(e_el).parentsUntil(editor.$el, 'a').first().get(0) \r\n      }\r\n\r\n      try {\r\n        if (e_el && ((e_el.contains && e_el.contains(editor.el)) || !editor.el.contains(e_el) || editor.el == e_el)) e_el = null \r\n      }\r\n      catch (ex) {\r\n        e_el = null \r\n      }\r\n\r\n      try {\r\n        if (s_el && ((s_el.contains && s_el.contains(editor.el)) || !editor.el.contains(s_el) || editor.el == s_el)) s_el = null \r\n      }\r\n      catch (ex) {\r\n        s_el = null \r\n      }\r\n\r\n      if (e_el && e_el == s_el && e_el.tagName == 'A') {\r\n\r\n        // We do not clicking at the end / input of links because in IE the selection is changing shortly after mouseup.\r\n        // https://jsfiddle.net/jredzam3/\r\n        if ((editor.browser.msie || editor.helpers.isMobile()) && (editor.selection.info(s_el).atEnd || editor.selection.info(s_el).atStart)) {\r\n          return null \r\n        }\r\n\r\n        return s_el \r\n      }\r\n\r\n      return null \r\n    }\r\n    else if (editor.el.tagName == 'A') {\r\n\r\n      return editor.el \r\n    }\r\n    else {\r\n      if ($current_image && $current_image.get(0).parentNode && $current_image.get(0).parentNode.tagName == 'A') {\r\n\r\n        return $current_image.get(0).parentNode \r\n      }\r\n    }\r\n  }\r\n\r\n  function allSelected() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n    const selectedLinks = [] \r\n\r\n    if ($current_image) {\r\n      if ($current_image.get(0).parentNode.tagName == 'A') {\r\n        selectedLinks.push($current_image.get(0).parentNode) \r\n      }\r\n    }\r\n    else {\r\n      let range \r\n      let containerEl \r\n      let links \r\n      let linkRange \r\n\r\n      if (editor.win.getSelection) {\r\n        const sel = editor.win.getSelection() \r\n\r\n        if (sel.getRangeAt && sel.rangeCount) {\r\n          linkRange = editor.doc.createRange() \r\n\r\n          for (let r = 0; r < sel.rangeCount; ++r) {\r\n            range = sel.getRangeAt(r) \r\n            containerEl = range.commonAncestorContainer \r\n\r\n            if (containerEl && containerEl.nodeType != 1) {\r\n              containerEl = containerEl.parentNode \r\n            }\r\n\r\n            if (containerEl && containerEl.nodeName.toLowerCase() == 'a') {\r\n              selectedLinks.push(containerEl) \r\n            }\r\n            else {\r\n              links = containerEl.getElementsByTagName('a') \r\n\r\n              for (let i = 0; i < links.length; ++i) {\r\n                linkRange.selectNodeContents(links[i]) \r\n\r\n                if (linkRange.compareBoundaryPoints(range.END_TO_START, range) < 1 && linkRange.compareBoundaryPoints(range.START_TO_END, range) > -1) {\r\n                  selectedLinks.push(links[i]) \r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // linkRange.detach() \r\n        }\r\n      }\r\n      else if (editor.doc.selection && editor.doc.selection.type != 'Control') {\r\n        range = editor.doc.selection.createRange() \r\n        containerEl = range.parentElement() \r\n\r\n        if (containerEl.nodeName.toLowerCase() == 'a') {\r\n          selectedLinks.push(containerEl) \r\n        }\r\n        else {\r\n          links = containerEl.getElementsByTagName('a') \r\n          linkRange = editor.doc.body.createTextRange() \r\n\r\n          for (let j = 0; j < links.length; ++j) {\r\n            linkRange.moveToElementText(links[j]) \r\n\r\n            if (linkRange.compareEndPoints('StartToEnd', range) > -1 && linkRange.compareEndPoints('EndToStart', range) < 1) {\r\n              selectedLinks.push(links[j]) \r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return selectedLinks \r\n  }\r\n\r\n  function _edit(e) {\r\n    if (editor.core.hasFocus()) {\r\n      _hideEditPopup() \r\n\r\n      // Do not show edit popup for link when ALT is hit.\r\n      if (e && e.type === 'keyup' && (e.altKey || e.which == FE.KEYCODE.ALT)) return true \r\n\r\n      setTimeout(function () {\r\n\r\n        // No event passed.\r\n        // Event passed and (left click or other event type).\r\n        if (!e || (e && (e.which == 1 || e.type != 'mouseup'))) {\r\n          const link = get() \r\n          const $current_image = editor.image ? editor.image.get() : null \r\n\r\n          if (link && !$current_image) {\r\n            if (editor.image) {\r\n              const contents = editor.node.contents(link) \r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1103\r\n              if (contents.length == 1 && contents[0].tagName == 'IMG') {\r\n                const range = editor.selection.ranges(0) \r\n\r\n                if (range.startOffset === 0 && range.endOffset === 0) {\r\n                  $(link).before(FE.MARKERS) \r\n                }\r\n                else {\r\n                  $(link).after(FE.MARKERS) \r\n                }\r\n\r\n                editor.selection.restore() \r\n\r\n                return false \r\n              }\r\n            }\r\n\r\n            if (e) {\r\n              e.stopPropagation() \r\n            }\r\n            _showEditPopup(link) \r\n          }\r\n        }\r\n      }, editor.helpers.isIOS() ? 100 : 0) \r\n    }\r\n  }\r\n\r\n  function _showEditPopup(link) {\r\n    let $popup = editor.popups.get('link.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    const $link = $(link) \r\n\r\n    if (!editor.popups.isVisible('link.edit')) {\r\n      editor.popups.refresh('link.edit') \r\n    }\r\n    editor.popups.setContainer('link.edit', editor.$sc) \r\n    const left = $link.offset().left + $link.outerWidth() / 2\r\n    const top = $link.offset().top + $link.outerHeight()\r\n\r\n    editor.popups.show('link.edit', left, top, $link.outerHeight(), true) \r\n  }\r\n\r\n  function _hideEditPopup() {\r\n    editor.popups.hide('link.edit') \r\n  }\r\n\r\n  function _initEditPopup() {\r\n\r\n    // Link buttons.\r\n    let link_buttons = '' \r\n\r\n    if (editor.opts.linkEditButtons.length >= 1) {\r\n      if (editor.el.tagName == 'A' && editor.opts.linkEditButtons.indexOf('linkRemove') >= 0) {\r\n        editor.opts.linkEditButtons.splice(editor.opts.linkEditButtons.indexOf('linkRemove'), 1) \r\n      }\r\n\r\n      link_buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.linkEditButtons)}</div>` \r\n    }\r\n\r\n    const template = {\r\n      buttons: link_buttons\r\n    } \r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('link.edit', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-edit', function () {\r\n        if (get() && editor.popups.isVisible('link.edit')) {\r\n          _showEditPopup(get()) \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Hide link insert popup.\r\n   */\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('link.insert') \r\n    const link = get() \r\n\r\n    if (link) {\r\n      const $link = $(link) \r\n      const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n      const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n      let i \r\n      let $input \r\n\r\n      for (i = 0; i < text_inputs.length; i++) {\r\n        $input = $(text_inputs[i]) \r\n        $input.val($link.attr($input.attr('name') || '')) \r\n      }\r\n\r\n      check_inputs.attr('checked', false) \r\n\r\n      for (i = 0; i < check_inputs.length; i++) {\r\n        $input = $(check_inputs[i]) \r\n\r\n        if ($link.attr($input.attr('name')) == $input.data('checked')) {\r\n          $input.attr('checked', true) \r\n        }\r\n      }\r\n\r\n      $popup.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val($link.text()) \r\n    }\r\n    else {\r\n      $popup.find('input.fr-link-attr[type=\"text\"]').val('') \r\n      $popup.find('input.fr-link-attr[type=\"checkbox\"]').attr('checked', false)\r\n      $popup.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val(editor.selection.text()) \r\n    }\r\n    $popup.find('input.fr-link-attr').trigger('change') \r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if ($current_image) {\r\n      $popup.find('.fr-link-attr[name=\"text\"]').parent().hide() \r\n    }\r\n    else {\r\n      $popup.find('.fr-link-attr[name=\"text\"]').parent().show() \r\n    }\r\n  }\r\n\r\n  function _showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertLink\"]') \r\n    let $popup = editor.popups.get('link.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('link.insert') \r\n      editor.popups.setContainer('link.insert', editor.$tb || editor.$sc) \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)      \r\n        editor.popups.show('link.insert', left, top, $btn.outerHeight()) \r\n      }\r\n      else {\r\n        editor.position.forSelection($popup) \r\n        editor.popups.show('link.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('link.insert', _refreshInsertPopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Image buttons.\r\n    let link_buttons = '' \r\n\r\n    if (editor.opts.linkInsertButtons.length >= 1) {\r\n      link_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.linkInsertButtons)}</div>` \r\n    }\r\n\r\n    const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>' \r\n\r\n    // Image by url layer.\r\n    let input_layer = '' \r\n    let tab_idx = 0 \r\n    input_layer = `<div class=\"fr-link-insert-layer fr-layer fr-active\" id=\"fr-link-insert-layer-${editor.id}\">` \r\n    input_layer += `<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-url-${editor.id}\" name=\"href\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate('URL')}\" tabIndex=\"${(++tab_idx)}\"></div>` \r\n\r\n    if (editor.opts.linkText) {\r\n      input_layer += `<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-text-${editor.id}\" name=\"text\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate('Text')}\" tabIndex=\"${(++tab_idx)}\"></div>`\r\n    }\r\n\r\n    // Add any additional fields.\r\n    for (const attr in editor.opts.linkAttributes) {\r\n      if (editor.opts.linkAttributes.hasOwnProperty(attr)) {\r\n        const placeholder = editor.opts.linkAttributes[attr] \r\n        input_layer += `<div class=\"fr-input-line\"><input name=\"${attr}\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate(placeholder)}\" tabIndex=\"${(++tab_idx)}\"></div>` \r\n      }\r\n    }\r\n\r\n    if (!editor.opts.linkAlwaysBlank) {\r\n      input_layer += `<div class=\"fr-checkbox-line\"><span class=\"fr-checkbox\"><input name=\"target\" class=\"fr-link-attr\" data-checked=\"_blank\" type=\"checkbox\" id=\"fr-link-target-${editor.id}\" tabIndex=\"${(++tab_idx)}\"><span>${checkmark}</span></span><label id=\"fr-label-target-${editor.id}\">${editor.language.translate('Open in new tab')}</label></div>`\r\n    }\r\n\r\n    input_layer += `<div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" role=\"button\" data-cmd=\"linkInsert\" href=\"#\" tabIndex=\"${(++tab_idx)}\" type=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: link_buttons,\r\n      input_layer: input_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('link.insert', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-insert', function () {\r\n        const $current_image = editor.image ? editor.image.get() : null \r\n\r\n        if ($current_image && editor.popups.isVisible('link.insert')) {\r\n          imageLink() \r\n        }\r\n\r\n        if (get && editor.popups.isVisible('link.insert')) {\r\n          update() \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  function remove() {\r\n    const link = get() \r\n\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (editor.events.trigger('link.beforeRemove', [link]) === false) return false\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/3110\r\n    // Check if image has caption and handle the unlink to retain caption\r\n    if ($current_image && link) {\r\n      if (editor.image.hasCaption()) {\r\n\r\n        $current_image.addClass('img-link-caption');\r\n        $(link).replaceWith($(link).html())\r\n        var newImg = document.querySelectorAll('img.img-link-caption')\r\n        editor.image.edit($(newImg[0]))\r\n        $(newImg[0]).removeClass('img-link-caption');\r\n\r\n      } else {\r\n        $current_image.unwrap()\r\n        editor.image.edit($current_image)\r\n      }\r\n    }\r\n    else if (link) {\r\n      editor.selection.save() \r\n      $(link).replaceWith($(link).html()) \r\n      editor.selection.restore() \r\n      _hideEditPopup() \r\n    }\r\n  }\r\n\r\n  function _init() {\r\n\r\n    // Edit on keyup.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.which != FE.KEYCODE.ESC) {\r\n        _edit(e) \r\n      }\r\n    }) \r\n\r\n    editor.events.on('window.mouseup', _edit) \r\n\r\n    // Do not follow links when edit is disabled.\r\n    editor.events.$on(editor.$el, 'click', 'a', function (e) {\r\n      if (editor.edit.isDisabled()) {\r\n        e.preventDefault() \r\n      }\r\n    }) \r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', _edit) \r\n    }\r\n\r\n    _initInsertPopup(true) \r\n\r\n    // Init on link.\r\n    if (editor.el.tagName == 'A') {\r\n      editor.$el.addClass('fr-view') \r\n    }\r\n\r\n    // Hit ESC when focus is in link edit popup.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if (editor.popups.isVisible('link.edit')) {\r\n        editor.events.disableBlur() \r\n        editor.events.focus() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n  }\r\n\r\n  function usePredefined(val) {\r\n    const link = editor.opts.linkList[val] \r\n    const $popup = editor.popups.get('link.insert') \r\n    const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n    const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n    let $input \r\n    let i \r\n\r\n    // Add rel attribute to the popup if it exists\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/831\r\n    if (link.rel) {\r\n      $popup.rel = link.rel\r\n    }\r\n\r\n    for (i = 0; i < text_inputs.length; i++) {\r\n      $input = $(text_inputs[i]) \r\n\r\n      if (link[$input.attr('name')]) {\r\n        $input.val(link[$input.attr('name')])\r\n        \r\n        // Mark the input box as non empty for transition\r\n        $input.toggleClass('fr-not-empty', true)\r\n      }\r\n      else if ($input.attr('name') != 'text') {\r\n        $input.val('') \r\n      }\r\n    }\r\n\r\n    for (i = 0; i < check_inputs.length; i++) {\r\n      $input = $(check_inputs[i]) \r\n      $input.attr('checked', $input.data('checked') == link[$input.attr('name')])\r\n    }\r\n    editor.accessibility.focusPopup($popup) \r\n  }\r\n\r\n  function insertCallback() {\r\n    const $popup = editor.popups.get('link.insert') \r\n    const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n    const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n    const href = (text_inputs.filter('[name=\"href\"]').val() || '').trim() \r\n    const text = (editor.opts.linkText) ? text_inputs.filter('[name=\"text\"]').val() : \"\";\r\n    const attrs = {}\r\n    let $input \r\n    let i \r\n\r\n    for (i = 0; i < text_inputs.length; i++) {\r\n      $input = $(text_inputs[i]) \r\n\r\n      if (['href', 'text'].indexOf($input.attr('name')) < 0) {\r\n        attrs[$input.attr('name')] = $input.val() \r\n      }\r\n    }\r\n\r\n    for (i = 0; i < check_inputs.length; i++) {\r\n      $input = $(check_inputs[i]) \r\n\r\n      if ($input.is(':checked')) {\r\n        attrs[$input.attr('name')] = $input.data('checked') \r\n      }\r\n      else {\r\n        attrs[$input.attr('name')] = $input.data('unchecked') || null \r\n      }\r\n    }\r\n\r\n    // check for rel attritube here\r\n    $popup.rel ? attrs.rel = $popup.rel : ''\r\n\r\n    const t = editor.helpers.scrollTop() \r\n    insert(href, text, attrs) \r\n    $(editor.o_win).scrollTop(t) \r\n  }\r\n\r\n  function _split() {\r\n    if (!editor.selection.isCollapsed()) {\r\n      editor.selection.save() \r\n      let markers = editor.$el.find('.fr-marker').addClass('fr-unprocessed').toArray() \r\n\r\n      while (markers.length) {\r\n        const $marker = $(markers.pop()) \r\n        $marker.removeClass('fr-unprocessed') \r\n\r\n        // Get deepest parent.\r\n        const deep_parent = editor.node.deepestParent($marker.get(0)) \r\n\r\n        if (deep_parent) {\r\n          let node = $marker.get(0) \r\n          let close_str = '' \r\n          let open_str = '' \r\n\r\n          do {\r\n            node = node.parentNode \r\n\r\n            if (!editor.node.isBlock(node)) {\r\n              close_str = close_str + editor.node.closeTagString(node) \r\n              open_str = editor.node.openTagString(node) + open_str \r\n            }\r\n          } while (node != deep_parent) \r\n\r\n          const marker_str = editor.node.openTagString($marker.get(0)) + $marker.html() + editor.node.closeTagString($marker.get(0)) \r\n\r\n          $marker.replaceWith('<span id=\"fr-break\"></span>') \r\n          let { outerHTML : h } = deep_parent \r\n\r\n          //  https://github.com/froala/wysiwyg-editor/issues/3048\r\n\r\n          h = h.replace(/<span id=\"fr-break\"><\\/span>/g, close_str + marker_str + open_str) \r\n          h = h.replace(open_str + close_str, '') \r\n\r\n          deep_parent.outerHTML = h \r\n        }\r\n\r\n        markers = editor.$el.find('.fr-marker.fr-unprocessed').toArray() \r\n      }\r\n\r\n\r\n      editor.html.cleanEmptyTags() \r\n\r\n      editor.selection.restore() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert link into the editor.\r\n   */\r\n  function insert(href, text, attrs) {\r\n    if (typeof attrs == 'undefined') attrs = {} \r\n\r\n    if (editor.events.trigger('link.beforeInsert', [href, text, attrs]) === false) return false \r\n\r\n    // Get image if we have one selected.\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image && editor.el.tagName != 'A') {\r\n      editor.selection.restore() \r\n      editor.popups.hide('link.insert') \r\n    }\r\n    else if (editor.el.tagName == 'A') {\r\n      editor.$el.focus() \r\n    }\r\n\r\n    const original_href = href \r\n\r\n    // Convert email address.\r\n    if (editor.opts.linkConvertEmailAddress) {\r\n      if (editor.helpers.isEmail(href) && !/^mailto:.*/i.test(href)) {\r\n        href = `mailto:${href}` \r\n      }\r\n    }\r\n\r\n    // Check if is local path.\r\n    const local_path = /^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i \r\n\r\n    // Add autoprefix.\r\n    if (editor.opts.linkAutoPrefix !== '' && !new RegExp('^(' + FE.LinkProtocols.join('|') + '):.', 'i').test(href) && !/^data:image.*/i.test(href) && !/^(https?:|ftps?:|file:|)\\/\\//i.test(href) && !local_path.test(href)) {\r\n\r\n      // Do prefix only if starting character is not absolute.\r\n      if (['/', '{', '[', '#', '(', '.'].indexOf((href || '')[0]) < 0) {\r\n        href = editor.opts.linkAutoPrefix + href\r\n      }\r\n    }\r\n\r\n    // Sanitize the URL.\r\n    href = editor.helpers.sanitizeURL(href) \r\n\r\n    // Default attributs.\r\n    if (editor.opts.linkAlwaysBlank) attrs.target = '_blank' \r\n\r\n    if (editor.opts.linkAlwaysNoFollow) attrs.rel = 'nofollow' \r\n\r\n    if (editor.helpers.isEmail(original_href)) {\r\n      attrs.target = null \r\n      attrs.rel = null \r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1576.\r\n    if (attrs.target == '_blank') {\r\n      if (editor.opts.linkNoOpener) {\r\n        if (!attrs.rel) attrs.rel = 'noopener' \r\n        else attrs.rel += ' noopener' \r\n      }\r\n\r\n      if (editor.opts.linkNoReferrer) {\r\n        if (!attrs.rel) attrs.rel = 'noreferrer' \r\n        else attrs.rel += ' noreferrer' \r\n      }\r\n    }\r\n    else if (attrs.target == null) {\r\n      if (attrs.rel) {\r\n        attrs.rel = attrs.rel.replace(/noopener/, '').replace(/noreferrer/, '') \r\n      }\r\n      else {\r\n        attrs.rel = null \r\n      }\r\n    }\r\n\r\n    // Format text.\r\n    text = text || '' \r\n\r\n    if (href === editor.opts.linkAutoPrefix) {\r\n      const $popup = editor.popups.get('link.insert') \r\n      $popup.find('input[name=\"href\"]').addClass('fr-error') \r\n      editor.events.trigger('link.bad', [original_href]) \r\n\r\n      return false \r\n    }\r\n\r\n    // Check if we have selection only in one link.\r\n    const link = get() \r\n    let $link \r\n\r\n    if (link) {\r\n      $link = $(link) \r\n\r\n      $link.attr('href', href) \r\n\r\n      // Change text if it is different.\r\n      if (text.length > 0 && $link.text() != text && !$current_image) {\r\n        let child = $link.get(0) \r\n\r\n        while (child.childNodes.length === 1 && child.childNodes[0].nodeType == Node.ELEMENT_NODE) {\r\n          child = child.childNodes[0] \r\n        }\r\n\r\n        $(child).text(text) \r\n      }\r\n\r\n      if (!$current_image) {\r\n        $link\r\n          .prepend(FE.START_MARKER)\r\n          .append(FE.END_MARKER) \r\n      }\r\n\r\n      // Set attributes.\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2023\r\n      for (var prop in attrs) {\r\n        if (!attrs[prop]) {\r\n          $link.removeAttr(prop)\r\n        }\r\n        else {\r\n          $link.attr(prop, attrs[prop])\r\n        }\r\n      }\r\n\r\n      if (!$current_image) {\r\n        editor.selection.restore() \r\n      }\r\n    }\r\n    else {\r\n\r\n      // We don't have any image selected.\r\n      if (!$current_image) {\r\n\r\n        // Remove current links.\r\n        editor.format.remove('a') \r\n        // Nothing is selected.\r\n        if (editor.selection.isCollapsed()) {\r\n          text = (text.length === 0 ? original_href : text) \r\n          editor.html.insert(`<a href=\"${href}\">${FE.START_MARKER}${text.replace(/&/g, '&amp;').replace(/</, '&lt;', '>', '&gt;')}${FE.END_MARKER}</a>`) \r\n          editor.selection.restore() \r\n        }\r\n        else {\r\n          if (text.length > 0 && text != editor.selection.text().replace(/\\n/g, '')) {\r\n            editor.selection.remove() \r\n            editor.html.insert(`<a href=\"${href}\">${FE.START_MARKER}${text.replace(/&/g, '&amp;')}${FE.END_MARKER}</a>`) \r\n            editor.selection.restore() \r\n          }\r\n          else {\r\n            _split() \r\n\r\n            // Add link.\r\n            editor.format.apply('a', { href: href }) \r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Just wrap current image with a link.\r\n        $current_image.wrap(`<a href=\"${href}\"></a>`)\r\n\r\n        if (editor.image.hasCaption()) {\r\n          $current_image.parent().append($current_image.parents('.fr-img-caption').find('.fr-inner'))\r\n        }\r\n      }\r\n\r\n      // Set attributes.\r\n      const links = allSelected() \r\n\r\n      for (let i = 0; i < links.length; i++) {\r\n        $link = $(links[i]) \r\n        $link.attr(attrs) \r\n        $link.removeAttr('_moz_dirty') \r\n      }\r\n\r\n      // Show link edit if only one link.\r\n      if (links.length == 1 && editor.$wp && !$current_image) {\r\n        $(links[0])\r\n          .prepend(FE.START_MARKER)\r\n          .append(FE.END_MARKER) \r\n\r\n        editor.selection.restore() \r\n      }\r\n    }\r\n\r\n    // Hide popup and try to edit.\r\n    if (!$current_image) {\r\n      _edit() \r\n    }\r\n    else {\r\n      const $pop = editor.popups.get('link.insert') \r\n\r\n      if ($pop) {\r\n        $pop.find('input:focus').blur() \r\n      }\r\n\r\n      editor.image.edit($current_image) \r\n    }\r\n  }\r\n\r\n  function update() {\r\n    _hideEditPopup() \r\n\r\n    const link = get() \r\n\r\n    if (link) {\r\n      let $popup = editor.popups.get('link.insert') \r\n\r\n      if (!$popup) $popup = _initInsertPopup() \r\n\r\n      if (!editor.popups.isVisible('link.insert')) {\r\n        editor.popups.refresh('link.insert') \r\n        editor.selection.save() \r\n\r\n        if (editor.helpers.isMobile()) {\r\n          editor.events.disableBlur() \r\n          editor.$el.blur() \r\n          editor.events.enableBlur() \r\n        }\r\n      }\r\n\r\n      editor.popups.setContainer('link.insert', editor.$sc) \r\n      const $ref = (editor.image ? editor.image.get() : null) || $(link) \r\n      const left = $ref.offset().left + $ref.outerWidth() / 2\r\n      const top = $ref.offset().top + $ref.outerHeight()\r\n        \r\n      editor.popups.show('link.insert', left, top, $ref.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  function back() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image) {\r\n      editor.events.disableBlur() \r\n      editor.selection.restore() \r\n      editor.events.enableBlur() \r\n\r\n      const link = get() \r\n\r\n      if (link && editor.$wp) {\r\n        editor.selection.restore() \r\n        _hideEditPopup() \r\n        _edit() \r\n      }\r\n      else if (editor.el.tagName == 'A') {\r\n        editor.$el.focus() \r\n        _edit() \r\n      }\r\n      else {\r\n        editor.popups.hide('link.insert') \r\n        editor.toolbar.showInline() \r\n      }\r\n    }\r\n    else {\r\n      editor.image.back() \r\n    }\r\n  }\r\n\r\n  function imageLink() {\r\n    let $el = editor.image ? editor.image.getEl() : null \r\n\r\n    if ($el) {\r\n      let $popup = editor.popups.get('link.insert') \r\n\r\n      if (editor.image.hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap') \r\n      }\r\n\r\n      if (!$popup) $popup = _initInsertPopup() \r\n      _refreshInsertPopup(true) \r\n      editor.popups.setContainer('link.insert', editor.$sc) \r\n      const left = $el.offset().left + ($el.outerWidth()) / 2\r\n      const top = $el.offset().top + $el.outerHeight()\r\n\r\n      editor.popups.show('link.insert', left, top, $el.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n  function applyStyle(val, linkStyles, multipleStyles) {\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.linkMultipleStyles \r\n\r\n    if (typeof linkStyles == 'undefined') linkStyles = editor.opts.linkStyles \r\n    const link = get() \r\n\r\n    if (!link) return false \r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(linkStyles) \r\n      styles.splice(styles.indexOf(val), 1) \r\n      $(link).removeClass(styles.join(' ')) \r\n    }\r\n\r\n    $(link).toggleClass(val) \r\n\r\n    _edit() \r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    remove: remove,\r\n    showInsertPopup: _showInsertPopup,\r\n    usePredefined: usePredefined,\r\n    insertCallback: insertCallback,\r\n    insert: insert,\r\n    update: update,\r\n    get: get,\r\n    allSelected: allSelected,\r\n    back: back,\r\n    imageLink: imageLink,\r\n    applyStyle: applyStyle\r\n  }\r\n}\r\n\r\n// Register the link command.\r\nFE.DefineIcon('insertLink', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterShortcut(FE.KEYCODE.K, 'insertLink', null, 'K') \r\nFE.RegisterCommand('insertLink', {\r\n  title: 'Insert Link',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('link.insert')) {\r\n      this.link.showInsertPopup() \r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur() \r\n        this.selection.restore() \r\n      }\r\n      this.popups.hide('link.insert') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkOpen', {\r\n  NAME: 'external-link',\r\n  FA5NAME: 'external-link-alt',\r\n  SVG_KEY: 'openLink'\r\n})\r\nFE.RegisterCommand('linkOpen', {\r\n  title: 'Open Link',\r\n  undo: false,\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  callback: function () {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n\r\n      if (link.href.indexOf('mailto:') !== -1) {\r\n        this.o_win.open(link.href).close() \r\n      }\r\n      else {\r\n        // Setting the context of the opening link to _self for opening it within window\r\n        if (!link.target) {\r\n          link.target = '_self'\r\n        }\r\n\r\n        if (this.browser.msie || this.browser.edge) {\r\n          // noopener is not supported in IE and EDGE\r\n          this.o_win.open(link.href, link.target)\r\n        }\r\n        else {\r\n          this.o_win.open(link.href, link.target, 'noopener')\r\n        }\r\n      }\r\n\r\n      this.popups.hide('link.edit') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkEdit', { NAME: 'edit', SVG_KEY: 'edit' })\r\nFE.RegisterCommand('linkEdit', {\r\n  title: 'Edit Link',\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.link.update() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkRemove', { NAME: 'unlink', SVG_KEY: 'unlink' })\r\nFE.RegisterCommand('linkRemove', {\r\n  title: 'Unlink',\r\n  callback: function () {\r\n    this.link.remove() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('linkBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.link.back() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() && this.doc.hasFocus() \r\n    const $current_image = this.image ? this.image.get() : null \r\n\r\n    if (!$current_image && !link && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden') \r\n      $btn.next('.fr-separator').addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden') \r\n      $btn.next('.fr-separator').removeClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n}) \r\n\r\nFE.DefineIcon('linkList', { NAME: 'search', SVG_KEY: 'search' })\r\nFE.RegisterCommand('linkList', {\r\n  title: 'Choose Link',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { linkList : options } = this.opts \r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkList\" data-param1=\"${i}\">${(options[i].displayText || options[i].text)}</a></li>`\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.link.usePredefined(val) \r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.RegisterCommand('linkInsert', {\r\n  focus: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.link.insertCallback() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.text(this.language.translate('Update')) \r\n    }\r\n    else {\r\n      $btn.text(this.language.translate('Insert')) \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\n// Image link.\r\nFE.DefineIcon('imageLink', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterCommand('imageLink', {\r\n  title: 'Insert Link',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.link.imageLink() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n    let $prev \r\n\r\n    if (link) {\r\n      $prev = $btn.prev() \r\n\r\n      if ($prev.hasClass('fr-separator')) {\r\n        $prev.removeClass('fr-hidden') \r\n      }\r\n\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $prev = $btn.prev() \r\n\r\n      if ($prev.hasClass('fr-separator')) {\r\n        $prev.addClass('fr-hidden') \r\n      }\r\n\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\n// Link styles.\r\nFE.DefineIcon('linkStyle', { NAME: 'magic',  SVG_KEY: 'linkStyles' })\r\nFE.RegisterCommand('linkStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const options = this.opts.linkStyles \r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkStyle\" data-param1=\"${cls}\">${this.language.translate(options[cls])}</a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.link.applyStyle(val) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    const { $ } = this\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      const $link = $(link) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1') \r\n        const active = $link.hasClass(cls) \r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active) \r\n      })\r\n    }\r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  listAdvancedTypes: true\r\n})\r\n\r\nFE.PLUGINS.lists = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function _openFlag(tag_name) {\r\n    return `<span class=\"fr-open-${tag_name.toLowerCase()}\"></span>`\r\n  }\r\n\r\n  function _closeFlag(tag_name) {\r\n    return `<span class=\"fr-close-${tag_name.toLowerCase()}\"></span>`\r\n  }\r\n\r\n  /**\r\n   * Replace list type.\r\n   */\r\n  function _replace(blocks, tag_name) {\r\n    const lists = []\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      const { parentNode : parent_node } = blocks[i]\r\n\r\n      if (blocks[i].tagName == 'LI' && parent_node.tagName != tag_name && lists.indexOf(parent_node) < 0) {\r\n        lists.push(parent_node)\r\n      }\r\n    }\r\n\r\n    for (let i = lists.length - 1; i >= 0; i--) {\r\n      const $l = $(lists[i])\r\n      $l.replaceWith(`<${tag_name.toLowerCase()} ${editor.node.attributes($l.get(0))}>${$l.html()}</${tag_name.toLowerCase()}>`)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format blocks.\r\n   */\r\n  function _format(blocks, tag_name) {\r\n    _replace(blocks, tag_name)\r\n\r\n    // Format those blocks that are not LI.\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    let start_margin = null\r\n\r\n    let prop\r\n\r\n    if (blocks.length) prop = (editor.opts.direction == 'rtl' || $(blocks[0]).css('direction') == 'rtl') ? 'margin-right' : 'margin-left'\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // Ignore table tags.\r\n      if (blocks[i].tagName == 'TD' || blocks[i].tagName == 'TH') {\r\n        continue;\r\n      }\r\n\r\n      if (blocks[i].tagName != 'LI') {\r\n\r\n        // Get margin left and unset it.\r\n        let margin_left = editor.helpers.getPX($(blocks[i]).css(prop)) || 0\r\n        blocks[i].style.marginLeft = null\r\n\r\n        // Start indentation relative to the first element.\r\n        if (start_margin === null) start_margin = margin_left\r\n\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/2435\r\n        // Update open tag.\r\n        let open_tag = start_margin > 0 ? `<${tag_name} style=\"${prop}: ${start_margin}px \">` : `<${tag_name}>`\r\n        let end_tag = `</${tag_name}>`\r\n\r\n        // Subsctract starting.\r\n        margin_left = margin_left - start_margin\r\n\r\n        // Keep wrapping.\r\n        while (margin_left / editor.opts.indentMargin > 0) {\r\n          open_tag += `</${tag_name}>`\r\n          end_tag += end_tag\r\n          margin_left = margin_left - editor.opts.indentMargin\r\n        }\r\n\r\n        // Default tag.\r\n        if (default_tag && blocks[i].tagName.toLowerCase() == default_tag) {\r\n          $(blocks[i]).replaceWith(`${open_tag}<li${editor.node.attributes(blocks[i])}>${$(blocks[i]).html()}</li>${end_tag}`)\r\n        }\r\n        else {\r\n          $(blocks[i]).wrap(`${open_tag}<li></li>${end_tag}`)\r\n        }\r\n      }\r\n    }\r\n\r\n    editor.clean.lists()\r\n  }\r\n\r\n  /**\r\n   * Unformat.\r\n   */\r\n  function _unformat(blocks) {\r\n    let i\r\n    let j\r\n\r\n    // If there are LI that have parents selected, then remove them.\r\n    for (i = blocks.length - 1; i >= 0; i--) {\r\n      for (j = i - 1; j >= 0; j--) {\r\n        if ($(blocks[j]).find(blocks[i]).length || blocks[j] == blocks[i]) {\r\n          blocks.splice(i, 1)\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // Unwrap remaining LI.\r\n    const lists = []\r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      const $li = $(blocks[i])\r\n      let { parentNode : parent_node } = blocks[i]\r\n      const li_class = $li.attr('class')\r\n\r\n      $li.before(_closeFlag(parent_node.tagName))\r\n\r\n      // Nested case.\r\n      if (parent_node.parentNode.tagName == 'LI') {\r\n        $li.before(_closeFlag('LI'))\r\n        $li.after(_openFlag('LI'))\r\n      }\r\n      else {\r\n        let li_attrs = ''\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1765 .\r\n        if (li_class) {\r\n          li_attrs += ` class=\"${li_class}\"`\r\n        }\r\n\r\n        const prop = (editor.opts.direction == 'rtl' || $li.css('direction') == 'rtl') ? 'margin-right' : 'margin-left'\r\n\r\n        if (editor.helpers.getPX($(parent_node).css(prop)) && ($(parent_node).attr('style') || '').indexOf(`${prop}:`) >= 0) {\r\n          li_attrs += ` style=\"${prop}:${editor.helpers.getPX($(parent_node).css(prop))}px;\"`\r\n        }\r\n\r\n        // When we have a default tag.\r\n        if (editor.html.defaultTag()) {\r\n\r\n          // If there are no inner block tags, put everything in a default tag.\r\n          if ($li.find(editor.html.blockTagsQuery()).length === 0) {\r\n            $li.wrapInner(editor.html.defaultTag() + li_attrs)\r\n          }\r\n        }\r\n\r\n        // Append BR if the node is not empty.\r\n        if (!editor.node.isEmpty($li.get(0), true) && $li.find(editor.html.blockTagsQuery()).length === 0) {\r\n          $li.append('<br>')\r\n        }\r\n        $li.append(_openFlag('LI'))\r\n        $li.prepend(_closeFlag('LI'))\r\n      }\r\n\r\n      $li.after(_openFlag(parent_node.tagName))\r\n\r\n      // Nested case. We should look for an upper parent.\r\n      if (parent_node.parentNode.tagName == 'LI') {\r\n        ({ parentNode : parent_node } = parent_node.parentNode );\r\n      }\r\n\r\n      if (lists.indexOf(parent_node) < 0) {\r\n        lists.push(parent_node)\r\n      }\r\n    }\r\n\r\n    // Replace the open and close tags.\r\n    for (i = 0; i < lists.length; i++) {\r\n      const $l = $(lists[i])\r\n      let html = $l.html()\r\n      html = html.replace(/<span class=\"fr-close-([a-z]*)\"><\\/span>/g, '</$1>')\r\n      html = html.replace(/<span class=\"fr-open-([a-z]*)\"><\\/span>/g, '<$1>')\r\n      $l.replaceWith(editor.node.openTagString($l.get(0)) + html + editor.node.closeTagString($l.get(0)))\r\n    }\r\n\r\n    // Clean empty lists.\r\n    editor.$el.find('li:empty').remove()\r\n    editor.$el.find('ul:empty, ol:empty').remove()\r\n\r\n    editor.clean.lists()\r\n    editor.html.wrap()\r\n  }\r\n\r\n  /**\r\n   * Check if should unformat lists.\r\n   */\r\n  function _shouldUnformat(blocks, tag_name) {\r\n    let do_unformat = true\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // Something else than LI is selected.\r\n      if (blocks[i].tagName != 'LI') {\r\n        return false\r\n      }\r\n\r\n      // There is a different kind of list selected. Replace is the appropiate action.\r\n      if (blocks[i].parentNode.tagName != tag_name) {\r\n        do_unformat = false\r\n      }\r\n    }\r\n\r\n    return do_unformat\r\n  }\r\n\r\n  /**\r\n   * Call the list actions.\r\n   */\r\n  function format(tag_name, list_type) {\r\n    let i\r\n    let blocks\r\n\r\n    editor.html.syncInputs()\r\n    \r\n    // Wrap.\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    // Passing true to identify the call from list format\r\n    blocks = editor.selection.blocks(true)\r\n\r\n    // Normalize nodes by keeping the LI.\r\n    // <li><h1>foo<h1></li> will return h1.\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n        blocks[i] = blocks[i].parentNode\r\n      }\r\n    }\r\n\r\n    // Save selection so that we can play at wish.\r\n    editor.selection.save()\r\n\r\n    // Decide if to format or unformat list.\r\n    if (_shouldUnformat(blocks, tag_name)) {\r\n      if (!list_type) {\r\n        _unformat(blocks)\r\n      }\r\n    }\r\n    else {\r\n      _format(blocks, tag_name, list_type)\r\n    }\r\n\r\n    // Unwrap.\r\n    editor.html.unwrap()\r\n\r\n    // Restore the selection.\r\n    editor.selection.restore()\r\n\r\n    list_type = list_type || 'default'\r\n\r\n    if (list_type) {\r\n      blocks = editor.selection.blocks()\r\n\r\n      for (i = 0; i < blocks.length; i++) {\r\n        if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n          blocks[i] = blocks[i].parentNode\r\n        }\r\n      }\r\n\r\n      for (i = 0; i < blocks.length; i++) {\r\n        // Something else than LI is selected.\r\n        if (blocks[i].tagName != 'LI') {\r\n          continue\r\n        }\r\n\r\n        // There is a different kind of list selected. Replace is the appropiate action.\r\n        $(blocks[i].parentNode).css('list-style-type', list_type === 'default' ? '' : list_type)\r\n\r\n        if (($(blocks[i].parentNode).attr('style') || '').length === 0) {\r\n          $(blocks[i].parentNode).removeAttr('style')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh list buttons.\r\n   */\r\n  function refresh($btn, tag_name) {\r\n    const $el = $(editor.selection.element())\r\n\r\n    if ($el.get(0) != editor.el) {\r\n      let li = $el.get(0)\r\n\r\n      if (li.tagName != 'LI' && li.firstElementChild && li.firstElementChild.tagName != 'LI') {\r\n        li = $el.parents('li').get(0)\r\n      }\r\n      else if (li.tagName != 'LI' && !li.firstElementChild) {\r\n        li = $el.parents('li').get(0)\r\n      }\r\n      else if (li.firstElementChild && li.firstElementChild.tagName == 'LI') {\r\n        li = $el.get(0).firstChild\r\n      }\r\n      else {\r\n        li = $el.get(0)\r\n      }\r\n\r\n      if (li && li.parentNode.tagName == tag_name && editor.el.contains(li.parentNode)) {\r\n        $btn.addClass('fr-active')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Indent selected list items.\r\n   */\r\n  function _indent(blocks) {\r\n    editor.selection.save()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // There should be a previous li.\r\n      const prev_li = blocks[i].previousSibling\r\n\r\n      if (prev_li) {\r\n        const nl = $(blocks[i]).find('> ul, > ol').last().get(0)\r\n\r\n        // Current LI has a nested list.\r\n        if (nl) {\r\n\r\n          // Build a new list item and prepend it to the list.\r\n          const $li = $(document.createElement('li'))\r\n          $(nl).prepend($li)\r\n\r\n          // Get first node of the list item.\r\n          let node = editor.node.contents(blocks[i])[0]\r\n\r\n          // While node and it is not a list, append to the new list item.\r\n          while (node && !editor.node.isList(node)) {\r\n            const tmp = node.nextSibling\r\n            $li.append(node)\r\n            node = tmp\r\n          }\r\n\r\n          // Append current list to the previous node.\r\n          $(prev_li).append($(nl))\r\n          $(blocks[i]).remove()\r\n        }\r\n        else {\r\n          const prev_nl = $(prev_li).find('> ul, > ol').last().get(0)\r\n\r\n          if (prev_nl) {\r\n            $(prev_nl).append($(blocks[i]))\r\n          }\r\n          else {\r\n            const $new_nl = $(`<${blocks[i].parentNode.tagName}>`)\r\n            $(prev_li).append($new_nl)\r\n            $new_nl.append($(blocks[i]))\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Outdent selected list items.\r\n   */\r\n  function _outdent(blocks) {\r\n    editor.selection.save()\r\n    _unformat(blocks)\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * create a nested list when there is no previous sibling and make the liststyle as none\r\n   */\r\n  function _indentListStyleTypeNone(parentBlk) {\r\n    editor.selection.save()\r\n    const lst = parentBlk.tagName == 'OL' ? document.createElement('ol') : document.createElement('ul')\r\n    while(parentBlk.childNodes.length > 0) {\r\n      lst.append(parentBlk.childNodes[0])\r\n    }\r\n    const lst_parent = document.createElement('li')\r\n    lst_parent.style.listStyleType = 'none'\r\n    lst_parent.append(lst)\r\n    parentBlk.append(lst_parent)\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function _outdentListStyleTypeNone(parentBlk) {\r\n    editor.selection.save()\r\n    while(parentBlk.childNodes.length > 0) {\r\n      parentBlk.parentNode.parentNode.append(parentBlk.childNodes[0])\r\n    }\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Hook into the indent/outdent events.\r\n   */\r\n  function _afterCommand(cmd) {\r\n    if (cmd == 'indent' || cmd == 'outdent') {\r\n      let do_indent = false\r\n      const blocks = editor.selection.blocks()\r\n      const blks = []\r\n      let parentBlk = blocks[0].previousSibling || blocks[0].parentElement\r\n\r\n      if (cmd == 'outdent') {\r\n        //Outend is not allowed if parent is not an list\r\n        if (parentBlk.parentNode.tagName != 'UL' && parentBlk.parentNode.tagName != 'OL' && parentBlk.parentNode.tagName != 'LI') {\r\n\r\n          return;\r\n        }\r\n        if (!blocks[0].previousSibling && parentBlk.parentNode.style.listStyleType == 'none') {\r\n          _outdentListStyleTypeNone(parentBlk)\r\n          return\r\n        }\r\n      }\r\n      else {\r\n\r\n        if (!blocks[0].previousSibling || blocks[0].previousSibling.tagName != 'LI') {\r\n          _indentListStyleTypeNone(parentBlk)\r\n          return;\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < blocks.length; i++) {\r\n        if (blocks[i].tagName == 'LI') {\r\n          do_indent = true\r\n          blks.push(blocks[i])\r\n        }\r\n        else if (blocks[i].parentNode.tagName == 'LI') {\r\n          do_indent = true\r\n          blks.push(blocks[i].parentNode)\r\n        }\r\n      }\r\n\r\n      if (do_indent) {\r\n        if (cmd == 'indent') _indent(blks)\r\n        else _outdent(blks)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init.\r\n   */\r\n  function _init() {\r\n    editor.events.on('commands.after', _afterCommand)\r\n\r\n    // TAB key in lists.\r\n    editor.events.on('keydown', function (e) {\r\n      if (e.which == FE.KEYCODE.TAB) {\r\n        const blocks = editor.selection.blocks()\r\n        const blks = []\r\n\r\n        for (let i = 0; i < blocks.length; i++) {\r\n          if (blocks[i].tagName == 'LI') {\r\n            blks.push(blocks[i])\r\n          }\r\n          else if (blocks[i].parentNode.tagName == 'LI') {\r\n            blks.push(blocks[i].parentNode)\r\n          }\r\n        }\r\n\r\n        // There is more than one list item selected.\r\n        // Selection is at the beginning of the selected list item.\r\n        if (blks.length > 1 || (blks.length && (editor.selection.info(blks[0]).atStart || editor.node.isEmpty(blks[0])))) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          if (!e.shiftKey) _indent(blks)\r\n          else _outdent(blks)\r\n\r\n          return false\r\n        }\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    format: format,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.DefineIcon('formatOLSimple', { NAME: 'list-ol', SVG_KEY: 'orderedList' })\r\nFE.RegisterCommand('formatOLSimple', {\r\n  title: 'Ordered List',\r\n  type: 'button',\r\n  options: {\r\n    'default': 'Default',\r\n    circle: 'Circle',\r\n    disc: 'Disc',\r\n    square: 'Square'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'OL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('OL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('formatUL', {\r\n  title: 'Unordered List',\r\n  type: 'button',\r\n  hasOptions: function () {\r\n    return this.opts.listAdvancedTypes\r\n  },\r\n  options: {\r\n    'default': 'Default',\r\n    circle: 'Circle',\r\n    disc: 'Disc',\r\n    square: 'Square'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'UL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('UL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('formatOL', {\r\n  title: 'Ordered List',\r\n  hasOptions: function () {\r\n    return this.opts.listAdvancedTypes\r\n  },\r\n  options: {\r\n    'default': 'Default',\r\n    'lower-alpha': 'Lower Alpha',\r\n    'lower-greek': 'Lower Greek',\r\n    'lower-roman': 'Lower Roman',\r\n    'upper-alpha': 'Upper Alpha',\r\n    'upper-roman': 'Upper Roman'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'OL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('OL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Add the list icons.\r\nFE.DefineIcon('formatUL', {\r\n  NAME: 'list-ul',\r\n  SVG_KEY: 'unorderedList'\r\n})\r\n\r\nFE.DefineIcon('formatOL', {\r\n  NAME: 'list-ol',\r\n  SVG_KEY: 'orderedList'\r\n})\r\n","import FE from '../index.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  paragraphFormat: {\r\n    N: 'Normal',\r\n    H1: 'Heading 1',\r\n    H2: 'Heading 2',\r\n    H3: 'Heading 3',\r\n    H4: 'Heading 4',\r\n    PRE: 'Code'\r\n  },\r\n  paragraphFormatSelection: false,\r\n  paragraphDefaultSelection: 'Paragraph Format'\r\n})\r\n\r\nFE.PLUGINS.paragraphFormat = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Style content inside LI when LI is selected.\r\n   * This case happens only when the LI contains a nested list or when it has no block tag inside.\r\n   */\r\n  function _styleLiWithoutBlocks($li, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // If val is null or default tag already do nothing.\r\n    if (val && val.toLowerCase() != defaultTag) {\r\n\r\n      // Deal with nested lists.\r\n      if ($li.find('ul, ol').length > 0) {\r\n        const $el = $('<' + val + '>')\r\n        $li.prepend($el)\r\n        let node = editor.node.contents($li.get(0))[0]\r\n\r\n        while (node && ['UL', 'OL'].indexOf(node.tagName) < 0) {\r\n          const next_node = node.nextSibling\r\n          $el.append(node)\r\n          node = next_node\r\n        }\r\n      }\r\n\r\n      // Wrap list content.\r\n      else {\r\n        $li.html('<' + val + '>' + $li.html() + '</' + val + '>')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Style content inside LI.\r\n   */\r\n  function _styleLiWithBlocks($blk, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // Prepare a temp div.\r\n    if (!val || val.toLowerCase() == defaultTag) val = 'div class=\"fr-temp-div\"'\r\n\r\n    $blk.replaceWith($('<' + val + '>').html($blk.html()))\r\n  }\r\n\r\n  /**\r\n   * Style content inside TD.\r\n   */\r\n  function _styleTdWithBlocks($blk, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // Prepare a temp div.\r\n    if (!val) val = 'div class=\"fr-temp-div\"' + (editor.node.isEmpty($blk.get(0), true) ? ' data-empty=\"true\"' : '')\r\n\r\n    // Return to the regular case. We don't use P inside TD/TH.\r\n    if (val.toLowerCase() == defaultTag) {\r\n\r\n      // If node is not empty, then add a BR.\r\n      if (!editor.node.isEmpty($blk.get(0), true)) {\r\n        $blk.append('<br/>')\r\n      }\r\n\r\n      $blk.replaceWith($blk.html())\r\n    }\r\n\r\n    // Replace with the new tag.\r\n    else {\r\n      $blk.replaceWith($('<' + val + '>').html($blk.html()))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Basic style.\r\n   */\r\n  function _style($blk, val) {\r\n    if (!val) val = 'div class=\"fr-temp-div\"' + (editor.node.isEmpty($blk.get(0), true) ? ' data-empty=\"true\"' : '')\r\n    //1708 Paragraph Format\r\n    if(val==\"H1\"||val==\"H2\"||val==\"H3\"||val==\"H4\"||val==\"H5\")\r\n    {\r\n       let $checkstyle=editor.node.attributes($blk.get(0));  \r\n       if($checkstyle.includes(\"font-size:\"))\r\n      $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)).replace(/font-size:[0-9]+px;?/,\"\") + '>').html($blk.html()).removeAttr('data-empty'))\r\n       else\r\n       $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)) + '>').html($blk.html()).removeAttr('data-empty'))\r\n    }\r\n   else\r\n    $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)) + '>').html($blk.html()).removeAttr('data-empty'))\r\n  }\r\n\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val) {\r\n\r\n    // Normal.\r\n    if (val == 'N') val = editor.html.defaultTag()\r\n\r\n    // Wrap.\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, !editor.opts.paragraphFormat.BLOCKQUOTE, true, true)\r\n    editor.selection.restore()\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks()\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save()\r\n\r\n    editor.$el.find('pre').attr('skip', true)\r\n\r\n    // Go through each block and apply style to it.\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != val && !editor.node.isList(blocks[i])) {\r\n        const $blk = $(blocks[i])\r\n\r\n        // Style the content inside LI when there is selection right in LI.\r\n        if (blocks[i].tagName == 'LI') {\r\n          _styleLiWithoutBlocks($blk, val)\r\n        }\r\n\r\n        // Style the content inside LI when we have other tag in LI.\r\n        else if (blocks[i].parentNode.tagName == 'LI' && blocks[i]) {\r\n          _styleLiWithBlocks($blk, val)\r\n        }\r\n\r\n        // Style the content inside TD/TH.\r\n        else if (['TD', 'TH'].indexOf(blocks[i].parentNode.tagName) >= 0) {\r\n          _styleTdWithBlocks($blk, val)\r\n        }\r\n\r\n        // Regular case.\r\n        else {\r\n          _style($blk, val)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Join PRE together.\r\n    editor.$el.find('pre:not([skip=\"true\"]) + pre:not([skip=\"true\"])').each(function () {\r\n      $(this).prev().append('<br>' + $(this).html())\r\n      $(this).remove()\r\n    })\r\n    editor.$el.find('pre').removeAttr('skip')\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap()\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const blk = blocks[0]\r\n      let tag = 'N'\r\n      const default_tag = editor.html.defaultTag()\r\n\r\n      if (blk.tagName.toLowerCase() != default_tag && blk != editor.el) {\r\n        tag = blk.tagName\r\n      }\r\n\r\n      $dropdown.find('.fr-command[data-param1=\"' + tag + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n    else {\r\n      $dropdown.find('.fr-command[data-param1=\"N\"]').addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.paragraphFormatSelection) {\r\n      const blocks = editor.selection.blocks()\r\n\r\n      if (blocks.length) {\r\n        const blk = blocks[0]\r\n        let tag = 'N'\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (blk.tagName.toLowerCase() != default_tag && blk != editor.el) {\r\n          tag = blk.tagName\r\n        }\r\n\r\n        if (['LI', 'TD', 'TH'].indexOf(tag) >= 0) {\r\n          tag = 'N'\r\n        }\r\n\r\n        $btn.find('>span').text(editor.language.translate(editor.opts.paragraphFormat[tag]))\r\n      }\r\n      else {\r\n        $btn.find('>span').text(editor.language.translate(editor.opts.paragraphFormat.N))\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('paragraphFormat', {\r\n  type: 'dropdown',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.paragraphFormatSelection\r\n  },\r\n  defaultSelection: function (editor) {\r\n    return editor.language.translate(editor.opts.paragraphDefaultSelection)\r\n  },\r\n  displaySelectionWidth: 80,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.paragraphFormat\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        let shortcut = this.shortcuts.get('paragraphFormat.' + val)\r\n\r\n        if (shortcut) {\r\n          shortcut = '<span class=\"fr-shortcut\">' + shortcut + '</span>'\r\n        }\r\n        else {\r\n          shortcut = ''\r\n        }\r\n\r\n        c += '<li role=\"presentation\"><' + (val == 'N' ? this.html.defaultTag() || 'DIV' : val) + ' style=\"padding: 0 !important; margin: 0 !important; border: 0 !important; background-color: transparent !important; ' +(val=='PRE' || val=='N' ? 'font-size: 15px' : 'font-weight: bold !important; ') + (val=='H1' ? 'font-size: 2em !important; ': '') +(val=='H2' ? 'font-size: 1.5em !important; ': '') + (val=='H3' ? 'font-size: 1.17em !important; ': '') + (val=='H4' ? 'font-size: 15px !important;': '') + '\"  role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"paragraphFormat\" data-param1=\"' + val + '\" title=\"' + this.language.translate(options[val]) + '\">' + this.language.translate(options[val]) + '</a></' + (val == 'N' ? this.html.defaultTag() || 'DIV' : val) + '></li>'\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Paragraph Format',\r\n  callback: function (cmd, val) {\r\n    this.paragraphFormat.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.paragraphFormat.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.paragraphFormat.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'paragraphFormat'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('paragraphFormat', {\r\n  NAME: 'paragraph',\r\n  SVG_KEY: 'paragraphFormat'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  paragraphStyles: {\r\n    'fr-text-gray': 'Gray',\r\n    'fr-text-bordered': 'Bordered',\r\n    'fr-text-spaced': 'Spaced',\r\n    'fr-text-uppercase': 'Uppercase'\r\n  },\r\n  paragraphMultipleStyles: true\r\n})\r\n\r\nFE.PLUGINS.paragraphStyle = function (editor) {\r\n  const { $ } = editor\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val, paragraphStyles, paragraphMultipleStyles) {\r\n    if (typeof paragraphStyles === 'undefined') paragraphStyles = editor.opts.paragraphStyles\r\n\r\n    if (typeof paragraphMultipleStyles === 'undefined') paragraphMultipleStyles = editor.opts.paragraphMultipleStyles\r\n\r\n    let styles = ''\r\n\r\n    // Remove multiple styles.\r\n    if (!paragraphMultipleStyles) {\r\n      styles = Object.keys(paragraphStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      styles = styles.join(' ')\r\n    }\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save()\r\n\r\n    const hasClass = $(blocks[0]).hasClass(val)\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      $(blocks[i]).removeClass(styles).toggleClass(val, !hasClass)\r\n\r\n      if ($(blocks[i]).hasClass('fr-temp-div')) $(blocks[i]).removeClass('fr-temp-div')\r\n\r\n      if ($(blocks[i]).attr('class') === '') $(blocks[i]).removeAttr('class')\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap()\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const $blk = $(blocks[0])\r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $blk.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n\r\n  const _init = () => {\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('paragraphStyle', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { paragraphStyles : options } = this.opts\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"paragraphStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Paragraph Style',\r\n  callback: function (cmd, val) {\r\n    this.paragraphStyle.apply(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.paragraphStyle.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'paragraphStyle'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('paragraphStyle', {\r\n  NAME: 'magic',\r\n  SVG_KEY: 'paragraphStyle'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  html2pdf: window.html2pdf\r\n})\r\n\r\n\r\nFE.PLUGINS.print = function (editor) {\r\n  function _prepare(callback) {\r\n    // Get editor content for printing.\r\n    const contents = editor.html.get()\r\n\r\n    // Get or create the iframe for printing.\r\n    let print_iframe = null\r\n\r\n    if (editor.shared.print_iframe) {\r\n      ({ print_iframe } = editor.shared );\r\n    }\r\n    else {\r\n      print_iframe = document.createElement('iframe')\r\n      print_iframe.name = 'fr-print'\r\n      print_iframe.style.position = 'fixed'\r\n      print_iframe.style.top = '0'\r\n      print_iframe.style.left = '-9999px'\r\n      print_iframe.style.height = '100%'\r\n      print_iframe.style.width = '0'\r\n      print_iframe.style.overflow = 'hidden'\r\n      print_iframe.style['z-index'] = '2147483647'\r\n      print_iframe.style.tabIndex = '-1'\r\n\r\n      // Remove editor on shared destroy.\r\n      editor.events.on('shared.destroy', function () {\r\n        print_iframe.remove()\r\n      })\r\n\r\n      editor.shared.print_iframe = print_iframe\r\n    }\r\n\r\n    try {\r\n      document.body.removeChild(print_iframe)\r\n    }\r\n    catch (ex) {\r\n\r\n    }\r\n    document.body.appendChild(print_iframe)\r\n\r\n    // Iframe ready.\r\n    const listener = () => {\r\n      callback()\r\n      print_iframe.removeEventListener('load', listener)\r\n    }\r\n    print_iframe.addEventListener('load', listener)\r\n\r\n    // Build printing document.\r\n    const { contentWindow : frame_doc } = print_iframe\r\n    frame_doc.document.open()\r\n    frame_doc.document.write('<!DOCTYPE html><html ' + (editor.opts.documentReady ? 'style=\"margin: 0; padding: 0;\"' : '') + '><head><title>' + document.title + '</title>')\r\n\r\n    // Add styles.\r\n    Array.prototype.forEach.call(document.querySelectorAll('style'), function (style_el) {\r\n      style_el = style_el.cloneNode(true)\r\n      frame_doc.document.write(style_el.outerHTML)\r\n    })\r\n\r\n    // Add css links.\r\n    const style_elements = document.querySelectorAll('link[rel=stylesheet]')\r\n\r\n    Array.prototype.forEach.call(style_elements, function (link_el) {\r\n      const new_link_el = document.createElement('link')\r\n      new_link_el.rel = link_el.rel\r\n      new_link_el.href = link_el.href\r\n      new_link_el.media = 'print'\r\n      new_link_el.type = 'text/css'\r\n      new_link_el.media = 'all'\r\n      frame_doc.document.write(new_link_el.outerHTML)\r\n    })\r\n\r\n    frame_doc.document.write('</head><body style=\"height:auto;text-align: ' + (editor.opts.direction == 'rtl' ? 'right' : 'left') + '; direction: ' + editor.opts.direction + '; ' + (editor.opts.documentReady ? ' padding: 2cm; width: 17cm; margin: 0;' : '') + '\"><div class=\"fr-view\">')\r\n\r\n    // Add editor contents.\r\n    frame_doc.document.write(contents)\r\n    frame_doc.document.write('</div></body></html>')\r\n    frame_doc.document.close()\r\n  }\r\n\r\n  function run() {\r\n    _prepare(function () {\r\n      setTimeout(function () {\r\n\r\n        // Focus iframe window.\r\n        editor.events.disableBlur()\r\n        window.frames['fr-print'].focus()\r\n\r\n        // Open printing window.\r\n        window.frames['fr-print'].print()\r\n\r\n        // Refocus editor's window.\r\n        editor.$win.get(0).focus()\r\n\r\n        // Focus editor.\r\n        editor.events.disableBlur()\r\n        editor.events.focus()\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  function toPDF() {\r\n    if (editor.opts.html2pdf) {\r\n      editor.$el.css('text-align', 'left')\r\n\r\n      editor.opts.html2pdf()\r\n        .set({\r\n          margin: [10, 20],\r\n          html2canvas: {\r\n            useCORS: true\r\n          }\r\n        })\r\n        .from(editor.el)\r\n        .save()\r\n\r\n      setTimeout(function () {\r\n        editor.$el.css('text-align', '')\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n  return {\r\n    run: run,\r\n    toPDF: toPDF\r\n  }\r\n}\r\n\r\nFE.DefineIcon('print', { NAME: 'print', SVG_KEY: 'print' })\r\nFE.RegisterCommand('print', {\r\n  title: 'Print',\r\n  undo: false,\r\n  focus: false,\r\n  plugin: 'print',\r\n  callback: function () {\r\n    this.print.run()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('getPDF', {\r\n  NAME: 'file-pdf-o',\r\n  FA5NAME: 'file-pdf',\r\n  SVG_KEY: 'pdfExport'\r\n})\r\nFE.RegisterCommand('getPDF', {\r\n  title: 'Download PDF',\r\n  type: 'button',\r\n  focus: false,\r\n  undo: false,\r\n  callback: function () {\r\n    this.print.toPDF()\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  quickInsertButtons: ['image', 'video', 'embedly', 'table', 'ul', 'ol', 'hr'],\r\n  quickInsertTags: ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'pre', 'blockquote'],\r\n  quickInsertEnabled: true\r\n})\r\n\r\nFE.QUICK_INSERT_BUTTONS = {}\r\n\r\nFE.DefineIcon('quickInsert', {\r\n  SVG_KEY: 'add',\r\n  template: 'svg'\r\n})\r\n\r\nFE.RegisterQuickInsertButton = function (name, data) {\r\n  FE.QUICK_INSERT_BUTTONS[name] = Object.assign({\r\n    undo: true\r\n  }, data)\r\n}\r\n\r\nFE.RegisterQuickInsertButton('image', {\r\n  icon: 'insertImage',\r\n  requiredPlugin: 'image',\r\n  title: 'Insert Image',\r\n  undo: false,\r\n  callback: function () {\r\n    const editor = this\r\n    const { $ } = editor\r\n\r\n    if (!editor.shared.$qi_image_input) {\r\n      editor.shared.$qi_image_input = $(document.createElement('input')).attr('accept', 'image/' + editor.opts.imageAllowedTypes.join(', image/').toLowerCase()).attr('name', `quickInsertImage${this.id}`).attr('style', 'display: none;').attr('type', 'file')\r\n\r\n      $('body').first().append(editor.shared.$qi_image_input)\r\n\r\n      editor.events.$on(editor.shared.$qi_image_input, 'change', function () {\r\n        const inst = $(this).data('inst')\r\n\r\n        if (this.files) {\r\n          inst.quickInsert.hide()\r\n          inst.image.upload(this.files)\r\n        }\r\n\r\n        // Chrome fix.\r\n        $(this).val('')\r\n      }, true)\r\n    }\r\n\r\n    editor.$qi_image_input = editor.shared.$qi_image_input\r\n\r\n    if (editor.helpers.isMobile()) editor.selection.save()\r\n    editor.events.disableBlur()\r\n    editor.$qi_image_input.data('inst', editor)[0].click()\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('video', {\r\n  icon: 'insertVideo',\r\n  requiredPlugin: 'video',\r\n  title: 'Insert Video',\r\n  undo: false,\r\n  callback: function () {\r\n    const res = prompt(this.language.translate('Paste the URL of the video you want to insert.'))\r\n\r\n    if (res) {\r\n      this.video.insertByURL(res)\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('embedly', {\r\n  icon: 'embedly',\r\n  requiredPlugin: 'embedly',\r\n  title: 'Embed URL',\r\n  undo: false,\r\n  callback: function () {\r\n    const res = prompt(this.language.translate('Paste the URL of any web content you want to insert.'))\r\n\r\n    if (res) {\r\n      this.embedly.add(res)\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('table', {\r\n  icon: 'insertTable',\r\n  requiredPlugin: 'table',\r\n  title: 'Insert Table',\r\n  callback: function () {\r\n    this.table.insert(2, 2)\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('ol', {\r\n  icon: 'formatOL',\r\n  requiredPlugin: 'lists',\r\n  title: 'Ordered List',\r\n  callback: function () {\r\n    this.lists.format('OL')\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('ul', {\r\n  icon: 'formatUL',\r\n  requiredPlugin: 'lists',\r\n  title: 'Unordered List',\r\n  callback: function () {\r\n    this.lists.format('UL')\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('hr', {\r\n  icon: 'insertHR',\r\n  title: 'Insert Horizontal Line',\r\n  callback: function () {\r\n    this.commands.insertHR()\r\n  }\r\n})\r\n\r\nFE.PLUGINS.quickInsert = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  let $quick_insert\r\n\r\n  /*\r\n   * Set the quick insert button left and top.\r\n   */\r\n  function _place($tag) {\r\n\r\n    // Quick insert's possition.\r\n    let qiTop\r\n    let qiLeft\r\n    let qiTagAlign\r\n\r\n    qiTop = $tag.offset().top - editor.$box.offset().top\r\n\r\n    if ((((editor.$iframe && editor.$iframe.offset().left) || 0) + $tag.offset().left - $tag.position().left - 4) < $quick_insert.outerWidth()) {\r\n      qiLeft = $tag.offset().left + $quick_insert.outerWidth();\r\n    }\r\n    else {\r\n      qiLeft = 0 - $quick_insert.outerWidth();\r\n    }\r\n\r\n    if (editor.opts.enter != FE.ENTER_BR) {\r\n      qiTagAlign = ($quick_insert.outerHeight() - $tag.outerHeight()) / 2\r\n    }\r\n\r\n    // Enter key is BR. Insert an empty SPAN to get line height.\r\n    else {\r\n      const $span = $(document.createElement('span')).html(FE.INVISIBLE_SPACE)\r\n      $span.insertAfter($tag)\r\n      qiTagAlign = ($quick_insert.outerHeight() - $tag.next().outerHeight()) / 2\r\n      $tag.next().remove()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      qiTop += editor.$iframe.offset().top + iframePaddingTop\r\n    }\r\n\r\n    // Reposition QI helper if visible.\r\n    if ($quick_insert.hasClass('fr-on')) {\r\n      if (qiTop >= 0) {\r\n        $helper.css('top', qiTop - qiTagAlign)\r\n      }\r\n    }\r\n\r\n    // Set quick insert's top and left.\r\n    if (qiTop >= 0 && qiTop - Math.abs(qiTagAlign) <= editor.$box.outerHeight() - $tag.outerHeight()) {\r\n      if ($quick_insert.hasClass('fr-hidden')) {\r\n        if ($quick_insert.hasClass('fr-on')) _showQIHelper()\r\n        $quick_insert.removeClass('fr-hidden')\r\n      }\r\n      else if ($quick_insert.hasClass('fr-visible')) {\r\n        $quick_insert.addClass('fr-hidden')\r\n        _hideHelper()\r\n      }\r\n\r\n      $quick_insert.css('top', qiTop - qiTagAlign)\r\n    }\r\n    else {\r\n      $quick_insert.css('top',  qiTagAlign)\r\n      \r\n    }\r\n   \r\n    $quick_insert.css('left', qiLeft)\r\n  }\r\n\r\n  /*\r\n   * Show quick insert.\r\n   * Compute top, left, width and show the quick insert.\r\n   */\r\n  function _show($tag) {\r\n    if (!$quick_insert) _initquickInsert()\r\n\r\n    // Hide the quick insert helper if visible.\r\n    if ($quick_insert.hasClass('fr-on')) {\r\n      _hideHelper()\r\n    }\r\n\r\n    editor.$box.append($quick_insert)\r\n\r\n    // Quick insert's possition.\r\n    _place($tag)\r\n\r\n    $quick_insert.data('tag', $tag)\r\n\r\n    // Show the quick insert.\r\n    $quick_insert.addClass('fr-visible')\r\n  }\r\n\r\n  /*\r\n   * Check the tag where the cursor is.\r\n   */\r\n  function _checkTag() {\r\n    // If editor has focus.\r\n    if (editor.core.hasFocus()) {\r\n      let tag = editor.selection.element()\r\n\r\n      // Get block tag if Enter key is not BR.\r\n      if (editor.opts.enter != FE.ENTER_BR && !editor.node.isBlock(tag)) {\r\n        tag = editor.node.blockParent(tag)\r\n      }\r\n\r\n      if (editor.opts.enter == FE.ENTER_BR && !editor.node.isBlock(tag)) {\r\n        const deep_tag = editor.node.deepestParent(tag)\r\n\r\n        if (deep_tag) tag = deep_tag\r\n      }\r\n\r\n      const _enterInBR = function () {\r\n        return (editor.opts.enter != FE.ENTER_BR && editor.node.isEmpty(tag) && editor.opts.quickInsertTags.indexOf(tag.tagName.toLowerCase()) >= 0)\r\n      }\r\n\r\n      const _enterInP = function () {\r\n        return (\r\n          editor.opts.enter == FE.ENTER_BR &&\r\n          ((tag.tagName == 'BR' && (!tag.previousSibling || tag.previousSibling.tagName == 'BR' || editor.node.isBlock(tag.previousSibling))) ||\r\n            (editor.node.isEmpty(tag) && (!tag.previousSibling || tag.previousSibling.tagName == 'BR' || editor.node.isBlock(tag.previousSibling)) && (!tag.nextSibling || tag.nextSibling.tagName == 'BR' || editor.node.isBlock(tag.nextSibling))))\r\n        )\r\n      }\r\n\r\n      if (tag && (_enterInBR() || _enterInP())) {\r\n        // If the quick insert is not repositioned, just close the helper.\r\n        if ($quick_insert && $quick_insert.data('tag').is($(tag)) && $quick_insert.hasClass('fr-on')) {\r\n          _hideHelper()\r\n        }\r\n\r\n        // If selection is collapsed.\r\n        else if (editor.selection.isCollapsed()) {\r\n          _show($(tag))\r\n        }\r\n      }\r\n\r\n      // Quick insert should not be visible.\r\n      else {\r\n        hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hide quick insert.\r\n   */\r\n  function hide() {\r\n    if ($quick_insert) {\r\n      // Hide the quick insert helper if visible.\r\n      if ($quick_insert.hasClass('fr-on')) {\r\n        _hideHelper()\r\n      }\r\n\r\n      // Hide the quick insert.\r\n      $quick_insert.removeClass('fr-visible fr-on')\r\n      $quick_insert.css('left', -9999).css('top', -9999)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the quick insert helper.\r\n   */\r\n  let $helper\r\n\r\n  function _showQIHelper(e) {\r\n    if (e) e.preventDefault()\r\n\r\n    // Hide helper.\r\n    if ($quick_insert.hasClass('fr-on') && !$quick_insert.hasClass('fr-hidden')) {\r\n      _hideHelper()\r\n    }\r\n\r\n    else {\r\n      if (!editor.shared.$qi_helper) {\r\n        const { quickInsertButtons : btns } = editor.opts\r\n        let btns_html = '<div class=\"fr-qi-helper\">'\r\n        let idx = 0\r\n\r\n        for (let i = 0; i < btns.length; i++) {\r\n          const info = FE.QUICK_INSERT_BUTTONS[btns[i]]\r\n\r\n          if (info) {\r\n            if (!info.requiredPlugin || (FE.PLUGINS[info.requiredPlugin] && editor.opts.pluginsEnabled.indexOf(info.requiredPlugin) >= 0)) {\r\n              btns_html += `<a class=\"fr-btn fr-floating-btn\" role=\"button\" title=\"${editor.language.translate(info.title)}\" tabIndex=\"-1\" data-cmd=\"${btns[i]}\" style=\"transition-delay: ${(0.025 * (idx++))}s;\">${editor.icon.create(info.icon)}</a>`\r\n            }\r\n          }\r\n        }\r\n\r\n        btns_html += '</div>'\r\n        editor.shared.$qi_helper = $(btns_html)\r\n\r\n        // Quick insert helper tooltip.\r\n        editor.tooltip.bind(editor.shared.$qi_helper, 'a.fr-btn')\r\n\r\n        editor.events.$on(editor.shared.$qi_helper, 'mousedown', function (e) {\r\n          e.preventDefault()\r\n        }, true)\r\n      }\r\n\r\n      ({ $qi_helper : $helper } = editor.shared );\r\n      editor.$box.append($helper)\r\n\r\n      // Show the quick insert helper.\r\n      setTimeout(function () {\r\n        $helper.css('top', parseFloat($quick_insert.css('top')))\r\n        $helper.css('left', parseFloat($quick_insert.css('left')) + $quick_insert.outerWidth())\r\n        $helper.find('a').addClass('fr-size-1')\r\n        $quick_insert.addClass('fr-on')\r\n      }, 10)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hides the quick insert helper and places the cursor.\r\n   */\r\n  function _hideHelper() {\r\n    const $helper = editor.$box.find('.fr-qi-helper')\r\n    const transition_delay = 25 //transition delay on fade in was set 0.025s\r\n\r\n    if ($helper.length) {\r\n      //set transition effect for quick insert link items on hide starting from last child\r\n      let childItems = $helper.find('a'); //get all the buttons from quick insert menu\r\n      let index = 0;\r\n      //hide the quick insert buttons starting from lefmost button with increase in delay to the righmost button\r\n      for (; index < childItems.length; index++) (function(index) {\r\n        setTimeout(function() {\r\n          $helper.children().eq(childItems.length-1-index).removeClass('fr-size-1'); //removing class to hide the button\r\n        }, transition_delay*index); //set the increasing transition delay\r\n      })(index);\r\n\r\n      //remove on button and set back add button\r\n      setTimeout(function() {\r\n        $helper.css('left', -9999)\r\n        if ($quick_insert && !$quick_insert.hasClass('fr-hidden')) $quick_insert.removeClass('fr-on') //show Add button\r\n      }, transition_delay*index); //set the transition delay for Add button\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize the quick insert.\r\n   */\r\n  function _initquickInsert() {\r\n    if (!editor.shared.$quick_insert) {\r\n      // Append quick insert HTML to editor wrapper.\r\n      editor.shared.$quick_insert = $(document.createElement('div')).attr('class', 'fr-quick-insert').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Quick Insert')}\">${editor.icon.create('quickInsert')}</a>`)//'<div class=\"fr-quick-insert\"><a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"' + editor.language.translate('Quick Insert') + '\">' + editor.icon.create('quickInsert') + '</a></div>')\r\n    }\r\n\r\n    ({ $quick_insert } = editor.shared );\r\n\r\n    // Quick Insert tooltip.\r\n    editor.tooltip.bind(editor.$box, '.fr-quick-insert > a.fr-floating-btn')\r\n\r\n    // Editor destroy.\r\n    editor.events.on('destroy', function () {\r\n      $('body').first().append($quick_insert.removeClass('fr-on'))\r\n      if ($helper) {\r\n        _hideHelper()\r\n        $('body').first().append($helper.css('left', -9999).css('top', -9999))\r\n      }\r\n    }, true)\r\n\r\n    editor.events.on('shared.destroy', function () {\r\n      $quick_insert.html('').removeData().remove()\r\n      $quick_insert = null\r\n\r\n      if ($helper) {\r\n        $helper.html('').removeData().remove()\r\n        $helper = null\r\n      }\r\n    }, true)\r\n\r\n    // Hide before a command is executed.\r\n    editor.events.on('commands.before', hide)\r\n\r\n    // Check if the quick insert should be shown after a command has been executed.\r\n    editor.events.on('commands.after', function () {\r\n      if (!editor.popups.areVisible()) {\r\n        _checkTag()\r\n      }\r\n    })\r\n\r\n    // User clicks on the quick insert.\r\n    editor.events.bindClick(editor.$box, '.fr-quick-insert > a', _showQIHelper)\r\n\r\n    // User clicks on a button from the quick insert helper.\r\n    editor.events.bindClick(editor.$box, '.fr-qi-helper > a.fr-btn', function (e) {\r\n      const cmd = $(e.currentTarget).data('cmd')\r\n\r\n      // Trigger commands.before.\r\n      if (editor.events.trigger('quickInsert.commands.before', [cmd]) === false) {\r\n        return false\r\n      }\r\n\r\n      FE.QUICK_INSERT_BUTTONS[cmd].callback.apply(editor, [e.currentTarget])\r\n\r\n      if (FE.QUICK_INSERT_BUTTONS[cmd].undo) {\r\n        editor.undo.saveStep()\r\n      }\r\n\r\n      // Trigger commands.after.\r\n      editor.events.trigger('quickInsert.commands.after', [cmd])\r\n\r\n      editor.quickInsert.hide()\r\n    })\r\n\r\n    // Scroll in editor wrapper. Quick insert buttons should scroll along\r\n    editor.events.$on(editor.$wp, 'scroll', _repositionQIButton)\r\n\r\n    // Re-position the quick insert button when more toolbar is expanded completely\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', _repositionQIButton)\r\n  }\r\n\r\n  /**\r\n   * Reposition the quick insert button\r\n   */\r\n  function _repositionQIButton() {\r\n    if ($quick_insert.hasClass('fr-visible')) {\r\n      _place($quick_insert.data('tag'))\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp || !editor.opts.quickInsertEnabled) return false\r\n\r\n    // Hide the quick insert if user click on an image.\r\n    editor.popups.onShow('image.edit', hide)\r\n\r\n    // Check tag where cursor is to see if the quick insert needs to be shown.\r\n    editor.events.on('mouseup', _checkTag)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_doc), 'selectionchange', _checkTag)\r\n    }\r\n\r\n    // Hide the quick insert when editor loses focus.\r\n    editor.events.on('blur', hide)\r\n\r\n    // Check if the quick insert should be shown after a key was pressed.\r\n    editor.events.on('keyup', _checkTag)\r\n\r\n    // Hide quick insert on keydown.\r\n    editor.events.on('keydown', function () {\r\n      setTimeout(function () {\r\n        _checkTag()\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    hide: hide\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.quote = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function _deepestParent(node) {\r\n    while (node.parentNode && node.parentNode != editor.el) {\r\n      node = node.parentNode \r\n    }\r\n\r\n    return node \r\n  }\r\n\r\n  function _increase() {\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks() \r\n    let i \r\n\r\n    // Normalize blocks.\r\n    for (i = 0; i < blocks.length; i++) {\r\n      blocks[i] = _deepestParent(blocks[i]) \r\n    }\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save() \r\n\r\n    const $quote = $(document.createElement('blockquote')) \r\n    $quote.insertBefore(blocks[0]) \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      $quote.append(blocks[i]) \r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function _decrease() {\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks() \r\n    let i \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != 'BLOCKQUOTE') {\r\n        blocks[i] = $(blocks[i]).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0) \r\n      }\r\n    }\r\n\r\n    editor.selection.save() \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i]) {\r\n        $(blocks[i]).replaceWith(blocks[i].innerHTML) \r\n      }\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function apply(val) {\r\n\r\n    // Wrap.\r\n    editor.selection.save() \r\n    editor.html.wrap(true, true, true, true) \r\n    editor.selection.restore() \r\n\r\n    if (val == 'increase') {\r\n      _increase() \r\n    }\r\n    else if (val == 'decrease') {\r\n      _decrease() \r\n    }\r\n\r\n\r\n  }\r\n\r\n  return {\r\n    apply: apply\r\n  }\r\n}\r\n\r\n// Register the quote command.\r\nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'increase', '\\'') \r\nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'decrease', '\\'', true) \r\nFE.RegisterCommand('quote', {\r\n  title: 'Quote',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const options = {\r\n      increase: 'Increase',\r\n      decrease: 'Decrease'\r\n    } \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        const shortcut = this.shortcuts.get(`quote.${val}`) \r\n\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-active ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"quote\" data-param1=\"${val}\" title=\"${options[val]}\">${this.language.translate(options[val])}${(shortcut ? `<span class=\"fr-shortcut\">${shortcut}</span>`: '')}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.quote.apply(val) \r\n  },\r\n  plugin: 'quote'\r\n})\r\n\r\n// Add the quote icon.\r\nFE.DefineIcon('quote', {\r\n  NAME: 'quote-left',\r\n  SVG_KEY: 'blockquote'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  saveInterval: 10000,\r\n  saveURL: null,\r\n  saveParams: {},\r\n  saveParam: 'body',\r\n  saveMethod: 'POST'\r\n})\r\n\r\nFE.PLUGINS.save = function (editor) {\r\n  const { $ } = editor\r\n  let _timeout = null\r\n  let _last_html = null\r\n  let _force = false\r\n\r\n  const BAD_LINK = 1\r\n  const ERROR_ON_SERVER = 2\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Missing saveURL option.'\r\n  error_messages[ERROR_ON_SERVER] = 'Something went wrong during save.'\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n  function _throwError(code, response) {\r\n    editor.events.trigger('save.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  function save(html) {\r\n    if (typeof html == 'undefined') html = editor.html.get()\r\n\r\n    const original_html = html\r\n\r\n    // Trigger before save event.\r\n    const event_returned_value = editor.events.trigger('save.before', [html])\r\n\r\n    if (event_returned_value === false) return false\r\n    else if (typeof event_returned_value == 'string') html = event_returned_value\r\n\r\n    if (editor.opts.saveURL) {\r\n      const params = {}\r\n\r\n      for (const key in editor.opts.saveParams) {\r\n        if (editor.opts.saveParams.hasOwnProperty(key)) {\r\n          const param = editor.opts.saveParams[key]\r\n\r\n          if (typeof (param) == 'function') {\r\n            params[key] = param.call(this)\r\n          }\r\n          else {\r\n            params[key] = param\r\n          }\r\n        }\r\n      }\r\n\r\n      const dt = {}\r\n      dt[editor.opts.saveParam] = html\r\n\r\n      // Make request to save\r\n      $(this).ajax({\r\n        method: editor.opts.saveMethod,\r\n        url: editor.opts.saveURL,\r\n        data: Object.assign(dt, params),\r\n        crossDomain: editor.opts.requestWithCORS,\r\n        withCredentials: editor.opts.requestWithCredentials,\r\n        headers: editor.opts.requestHeaders,\r\n        done: function (data, status, xhr) {\r\n          _last_html = original_html\r\n\r\n          // data\r\n          editor.events.trigger('save.after', [data])\r\n        },\r\n        fail: function (xhr) {\r\n          // (error)\r\n          _throwError(ERROR_ON_SERVER, xhr.response || xhr.responseText)\r\n        }\r\n      })\r\n      \r\n    }\r\n    else {\r\n\r\n      // (error)\r\n      _throwError(BAD_LINK)\r\n    }\r\n  }\r\n\r\n  function _mightSave() {\r\n    clearTimeout(_timeout)\r\n\r\n    // Added 0 seconds as to get the timeoutid so that for if there is another request the previous pending request will get cleared out. \r\n    _timeout = setTimeout(function () {\r\n      const html = editor.html.get()\r\n\r\n      if (_last_html != html || _force) {\r\n        _last_html = html\r\n        _force = false\r\n\r\n        save(html)\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  /**\r\n   * Reset the saving interval.\r\n   */\r\n  function reset() {\r\n    _mightSave()\r\n    _force = false\r\n  }\r\n\r\n  /**\r\n   * Force saving at the end of the current interval.\r\n   */\r\n  function force() {\r\n    _force = true\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    if(editor.opts.letteringClass)\r\n    {\r\n      let selectionClass = editor.opts.letteringClass\r\n      let length = editor.$el.find(`.${selectionClass}`).length\r\n      for( let i = 0; i < length; i++){\r\n        editor.$el.find(`.${selectionClass}`)[i].innerHTML = editor.$el.find(`.${selectionClass}`)[i].innerText.replace(/([\\w'-]+|[?.\",])/g, `<span class = 'fr-word-select'>$1</span>`)\r\n      }\r\n    }\r\n    if (editor.opts.saveInterval) {\r\n      _last_html = editor.html.get()\r\n      editor.events.on('contentChanged', function () {\r\n        // Added timeinterval which user has entered else default will be 10000ms. \r\n        setTimeout(_mightSave, editor.opts.saveInterval)\r\n      })\r\n      editor.events.on('keydown destroy', function () {\r\n        clearTimeout(_timeout)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    save: save,\r\n    reset: reset,\r\n    force: force\r\n  }\r\n}\r\n\r\nFE.DefineIcon('save', {\r\n  NAME: 'floppy-o',\r\n  FA5NAME: 'save'\r\n})\r\nFE.RegisterCommand('save', {\r\n  title: 'Save',\r\n  undo: false,\r\n  focus: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.save.save()\r\n  },\r\n  plugin: 'save'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  specialCharactersSets: [\r\n    {\r\n      title: 'Latin',\r\n      char: '&iexcl;',\r\n      list: [\r\n        { 'char': '&iexcl;', desc: 'INVERTED EXCLAMATION MARK' },\r\n        { 'char': '&cent;', desc: 'CENT SIGN' },\r\n        { 'char': '&pound;', desc: 'POUND SIGN' },\r\n        { 'char': '&curren;', desc: 'CURRENCY SIGN' },\r\n        { 'char': '&yen;', desc: 'YEN SIGN' },\r\n        { 'char': '&brvbar;', desc: 'BROKEN BAR' },\r\n        { 'char': '&sect;', desc: 'SECTION SIGN' },\r\n        { 'char': '&uml;', desc: 'DIAERESIS' },\r\n        { 'char': '&copy;', desc: 'COPYRIGHT SIGN' },\r\n        { 'char': '&trade;', desc: 'TRADEMARK SIGN' },\r\n        { 'char': '&ordf;', desc: 'FEMININE ORDINAL INDICATOR' },\r\n        { 'char': '&laquo;', desc: 'LEFT-POINTING DOUBLE ANGLE QUOTATION MARK' },\r\n        { 'char': '&not;', desc: 'NOT SIGN' },\r\n        { 'char': '&reg;', desc: 'REGISTERED SIGN' },\r\n        { 'char': '&macr;', desc: 'MACRON' },\r\n        { 'char': '&deg;', desc: 'DEGREE SIGN' },\r\n        { 'char': '&plusmn;', desc: 'PLUS-MINUS SIGN' },\r\n        { 'char': '&sup2;', desc: 'SUPERSCRIPT TWO' },\r\n        { 'char': '&sup3;', desc: 'SUPERSCRIPT THREE' },\r\n        { 'char': '&acute;', desc: 'ACUTE ACCENT' },\r\n        { 'char': '&micro;', desc: 'MICRO SIGN' },\r\n        { 'char': '&para;', desc: 'PILCROW SIGN' },\r\n        { 'char': '&middot;', desc: 'MIDDLE DOT' },\r\n        { 'char': '&cedil;', desc: 'CEDILLA' },\r\n        { 'char': '&sup1;', desc: 'SUPERSCRIPT ONE' },\r\n        { 'char': '&ordm;', desc: 'MASCULINE ORDINAL INDICATOR' },\r\n        { 'char': '&raquo;', desc: 'RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK' },\r\n        { 'char': '&frac14;', desc: 'VULGAR FRACTION ONE QUARTER' },\r\n        { 'char': '&frac12;', desc: 'VULGAR FRACTION ONE HALF' },\r\n        { 'char': '&frac34;', desc: 'VULGAR FRACTION THREE QUARTERS' },\r\n        { 'char': '&iquest;', desc: 'INVERTED QUESTION MARK' },\r\n        { 'char': '&Agrave;', desc: 'LATIN CAPITAL LETTER A WITH GRAVE' },\r\n        { 'char': '&Aacute;', desc: 'LATIN CAPITAL LETTER A WITH ACUTE' },\r\n        { 'char': '&Acirc;', desc: 'LATIN CAPITAL LETTER A WITH CIRCUMFLEX' },\r\n        { 'char': '&Atilde;', desc: 'LATIN CAPITAL LETTER A WITH TILDE' },\r\n        { 'char': '&Auml;', desc: 'LATIN CAPITAL LETTER A WITH DIAERESIS ' },\r\n        { 'char': '&Aring;', desc: 'LATIN CAPITAL LETTER A WITH RING ABOVE' },\r\n        { 'char': '&AElig;', desc: 'LATIN CAPITAL LETTER AE' },\r\n        { 'char': '&Ccedil;', desc: 'LATIN CAPITAL LETTER C WITH CEDILLA' },\r\n        { 'char': '&Egrave;', desc: 'LATIN CAPITAL LETTER E WITH GRAVE' },\r\n        { 'char': '&Eacute;', desc: 'LATIN CAPITAL LETTER E WITH ACUTE' },\r\n        { 'char': '&Ecirc;', desc: 'LATIN CAPITAL LETTER E WITH CIRCUMFLEX' },\r\n        { 'char': '&Euml;', desc: 'LATIN CAPITAL LETTER E WITH DIAERESIS' },\r\n        { 'char': '&Igrave;', desc: 'LATIN CAPITAL LETTER I WITH GRAVE' },\r\n        { 'char': '&Iacute;', desc: 'LATIN CAPITAL LETTER I WITH ACUTE' },\r\n        { 'char': '&Icirc;', desc: 'LATIN CAPITAL LETTER I WITH CIRCUMFLEX' },\r\n        { 'char': '&Iuml;', desc: 'LATIN CAPITAL LETTER I WITH DIAERESIS' },\r\n        { 'char': '&ETH;', desc: 'LATIN CAPITAL LETTER ETH' },\r\n        { 'char': '&Ntilde;', desc: 'LATIN CAPITAL LETTER N WITH TILDE' },\r\n        { 'char': '&Ograve;', desc: 'LATIN CAPITAL LETTER O WITH GRAVE' },\r\n        { 'char': '&Oacute;', desc: 'LATIN CAPITAL LETTER O WITH ACUTE' },\r\n        { 'char': '&Ocirc;', desc: 'LATIN CAPITAL LETTER O WITH CIRCUMFLEX' },\r\n        { 'char': '&Otilde;', desc: 'LATIN CAPITAL LETTER O WITH TILDE' },\r\n        { 'char': '&Ouml;', desc: 'LATIN CAPITAL LETTER O WITH DIAERESIS' },\r\n        { 'char': '&times;', desc: 'MULTIPLICATION SIGN' },\r\n        { 'char': '&Oslash;', desc: 'LATIN CAPITAL LETTER O WITH STROKE' },\r\n        { 'char': '&Ugrave;', desc: 'LATIN CAPITAL LETTER U WITH GRAVE' },\r\n        { 'char': '&Uacute;', desc: 'LATIN CAPITAL LETTER U WITH ACUTE' },\r\n        { 'char': '&Ucirc;', desc: 'LATIN CAPITAL LETTER U WITH CIRCUMFLEX' },\r\n        { 'char': '&Uuml;', desc: 'LATIN CAPITAL LETTER U WITH DIAERESIS' },\r\n        { 'char': '&Yacute;', desc: 'LATIN CAPITAL LETTER Y WITH ACUTE' },\r\n        { 'char': '&THORN;', desc: 'LATIN CAPITAL LETTER THORN' },\r\n        { 'char': '&szlig;', desc: 'LATIN SMALL LETTER SHARP S' },\r\n        { 'char': '&agrave;', desc: 'LATIN SMALL LETTER A WITH GRAVE' },\r\n        { 'char': '&aacute;', desc: 'LATIN SMALL LETTER A WITH ACUTE ' },\r\n        { 'char': '&acirc;', desc: 'LATIN SMALL LETTER A WITH CIRCUMFLEX' },\r\n        { 'char': '&atilde;', desc: 'LATIN SMALL LETTER A WITH TILDE' },\r\n        { 'char': '&auml;', desc: 'LATIN SMALL LETTER A WITH DIAERESIS' },\r\n        { 'char': '&aring;', desc: 'LATIN SMALL LETTER A WITH RING ABOVE' },\r\n        { 'char': '&aelig;', desc: 'LATIN SMALL LETTER AE' },\r\n        { 'char': '&ccedil;', desc: 'LATIN SMALL LETTER C WITH CEDILLA' },\r\n        { 'char': '&egrave;', desc: 'LATIN SMALL LETTER E WITH GRAVE' },\r\n        { 'char': '&eacute;', desc: 'LATIN SMALL LETTER E WITH ACUTE' },\r\n        { 'char': '&ecirc;', desc: 'LATIN SMALL LETTER E WITH CIRCUMFLEX' },\r\n        { 'char': '&euml;', desc: 'LATIN SMALL LETTER E WITH DIAERESIS' },\r\n        { 'char': '&igrave;', desc: 'LATIN SMALL LETTER I WITH GRAVE' },\r\n        { 'char': '&iacute;', desc: 'LATIN SMALL LETTER I WITH ACUTE' },\r\n        { 'char': '&icirc;', desc: 'LATIN SMALL LETTER I WITH CIRCUMFLEX' },\r\n        { 'char': '&iuml;', desc: 'LATIN SMALL LETTER I WITH DIAERESIS' },\r\n        { 'char': '&eth;', desc: 'LATIN SMALL LETTER ETH' },\r\n        { 'char': '&ntilde;', desc: 'LATIN SMALL LETTER N WITH TILDE' },\r\n        { 'char': '&ograve;', desc: 'LATIN SMALL LETTER O WITH GRAVE' },\r\n        { 'char': '&oacute;', desc: 'LATIN SMALL LETTER O WITH ACUTE' },\r\n        { 'char': '&ocirc;', desc: 'LATIN SMALL LETTER O WITH CIRCUMFLEX' },\r\n        { 'char': '&otilde;', desc: 'LATIN SMALL LETTER O WITH TILDE' },\r\n        { 'char': '&ouml;', desc: 'LATIN SMALL LETTER O WITH DIAERESIS' },\r\n        { 'char': '&divide;', desc: 'DIVISION SIGN' },\r\n        { 'char': '&oslash;', desc: 'LATIN SMALL LETTER O WITH STROKE' },\r\n        { 'char': '&ugrave;', desc: 'LATIN SMALL LETTER U WITH GRAVE' },\r\n        { 'char': '&uacute;', desc: 'LATIN SMALL LETTER U WITH ACUTE' },\r\n        { 'char': '&ucirc;', desc: 'LATIN SMALL LETTER U WITH CIRCUMFLEX' },\r\n        { 'char': '&uuml;', desc: 'LATIN SMALL LETTER U WITH DIAERESIS' },\r\n        { 'char': '&yacute;', desc: 'LATIN SMALL LETTER Y WITH ACUTE' },\r\n        { 'char': '&thorn;', desc: 'LATIN SMALL LETTER THORN' },\r\n        { 'char': '&yuml;', desc: 'LATIN SMALL LETTER Y WITH DIAERESIS' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Greek',\r\n      char: '&Alpha;',\r\n      list: [\r\n        { 'char': '&Alpha;', desc: 'GREEK CAPITAL LETTER ALPHA' },\r\n        { 'char': '&Beta;', desc: 'GREEK CAPITAL LETTER BETA' },\r\n        { 'char': '&Gamma;', desc: 'GREEK CAPITAL LETTER GAMMA' },\r\n        { 'char': '&Delta;', desc: 'GREEK CAPITAL LETTER DELTA' },\r\n        { 'char': '&Epsilon;', desc: 'GREEK CAPITAL LETTER EPSILON' },\r\n        { 'char': '&Zeta;', desc: 'GREEK CAPITAL LETTER ZETA' },\r\n        { 'char': '&Eta;', desc: 'GREEK CAPITAL LETTER ETA' },\r\n        { 'char': '&Theta;', desc: 'GREEK CAPITAL LETTER THETA' },\r\n        { 'char': '&Iota;', desc: 'GREEK CAPITAL LETTER IOTA' },\r\n        { 'char': '&Kappa;', desc: 'GREEK CAPITAL LETTER KAPPA' },\r\n        { 'char': '&Lambda;', desc: 'GREEK CAPITAL LETTER LAMBDA' },\r\n        { 'char': '&Mu;', desc: 'GREEK CAPITAL LETTER MU' },\r\n        { 'char': '&Nu;', desc: 'GREEK CAPITAL LETTER NU' },\r\n        { 'char': '&Xi;', desc: 'GREEK CAPITAL LETTER XI' },\r\n        { 'char': '&Omicron;', desc: 'GREEK CAPITAL LETTER OMICRON' },\r\n        { 'char': '&Pi;', desc: 'GREEK CAPITAL LETTER PI' },\r\n        { 'char': '&Rho;', desc: 'GREEK CAPITAL LETTER RHO' },\r\n        { 'char': '&Sigma;', desc: 'GREEK CAPITAL LETTER SIGMA' },\r\n        { 'char': '&Tau;', desc: 'GREEK CAPITAL LETTER TAU' },\r\n        { 'char': '&Upsilon;', desc: 'GREEK CAPITAL LETTER UPSILON' },\r\n        { 'char': '&Phi;', desc: 'GREEK CAPITAL LETTER PHI' },\r\n        { 'char': '&Chi;', desc: 'GREEK CAPITAL LETTER CHI' },\r\n        { 'char': '&Psi;', desc: 'GREEK CAPITAL LETTER PSI' },\r\n        { 'char': '&Omega;', desc: 'GREEK CAPITAL LETTER OMEGA' },\r\n        { 'char': '&alpha;', desc: 'GREEK SMALL LETTER ALPHA' },\r\n        { 'char': '&beta;', desc: 'GREEK SMALL LETTER BETA' },\r\n        { 'char': '&gamma;', desc: 'GREEK SMALL LETTER GAMMA' },\r\n        { 'char': '&delta;', desc: 'GREEK SMALL LETTER DELTA' },\r\n        { 'char': '&epsilon;', desc: 'GREEK SMALL LETTER EPSILON' },\r\n        { 'char': '&zeta;', desc: 'GREEK SMALL LETTER ZETA' },\r\n        { 'char': '&eta;', desc: 'GREEK SMALL LETTER ETA' },\r\n        { 'char': '&theta;', desc: 'GREEK SMALL LETTER THETA' },\r\n        { 'char': '&iota;', desc: 'GREEK SMALL LETTER IOTA' },\r\n        { 'char': '&kappa;', desc: 'GREEK SMALL LETTER KAPPA' },\r\n        { 'char': '&lambda;', desc: 'GREEK SMALL LETTER LAMBDA' },\r\n        { 'char': '&mu;', desc: 'GREEK SMALL LETTER MU' },\r\n        { 'char': '&nu;', desc: 'GREEK SMALL LETTER NU' },\r\n        { 'char': '&xi;', desc: 'GREEK SMALL LETTER XI' },\r\n        { 'char': '&omicron;', desc: 'GREEK SMALL LETTER OMICRON' },\r\n        { 'char': '&pi;', desc: 'GREEK SMALL LETTER PI' },\r\n        { 'char': '&rho;', desc: 'GREEK SMALL LETTER RHO' },\r\n        { 'char': '&sigmaf;', desc: 'GREEK SMALL LETTER FINAL SIGMA' },\r\n        { 'char': '&sigma;', desc: 'GREEK SMALL LETTER SIGMA' },\r\n        { 'char': '&tau;', desc: 'GREEK SMALL LETTER TAU' },\r\n        { 'char': '&upsilon;', desc: 'GREEK SMALL LETTER UPSILON' },\r\n        { 'char': '&phi;', desc: 'GREEK SMALL LETTER PHI' },\r\n        { 'char': '&chi;', desc: 'GREEK SMALL LETTER CHI' },\r\n        { 'char': '&psi;', desc: 'GREEK SMALL LETTER PSI' },\r\n        { 'char': '&omega;', desc: 'GREEK SMALL LETTER OMEGA' },\r\n        { 'char': '&thetasym;', desc: 'GREEK THETA SYMBOL' },\r\n        { 'char': '&upsih;', desc: 'GREEK UPSILON WITH HOOK SYMBOL' },\r\n        { 'char': '&straightphi;', desc: 'GREEK PHI SYMBOL' },\r\n        { 'char': '&piv;', desc: 'GREEK PI SYMBOL' },\r\n        { 'char': '&Gammad;', desc: 'GREEK LETTER DIGAMMA' },\r\n        { 'char': '&gammad;', desc: 'GREEK SMALL LETTER DIGAMMA' },\r\n        { 'char': '&varkappa;', desc: 'GREEK KAPPA SYMBOL' },\r\n        { 'char': '&varrho;', desc: 'GREEK RHO SYMBOL' },\r\n        { 'char': '&straightepsilon;', desc: 'GREEK LUNATE EPSILON SYMBOL' },\r\n        { 'char': '&backepsilon;', desc: 'GREEK REVERSED LUNATE EPSILON SYMBOL' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Cyrillic',\r\n      char: '&#x400',\r\n      list: [\r\n        { 'char': '&#x400', desc: 'CYRILLIC CAPITAL LETTER IE WITH GRAVE' },\r\n        { 'char': '&#x401', desc: 'CYRILLIC CAPITAL LETTER IO' },\r\n        { 'char': '&#x402', desc: 'CYRILLIC CAPITAL LETTER DJE' },\r\n        { 'char': '&#x403', desc: 'CYRILLIC CAPITAL LETTER GJE' },\r\n        { 'char': '&#x404', desc: 'CYRILLIC CAPITAL LETTER UKRAINIAN IE' },\r\n        { 'char': '&#x405', desc: 'CYRILLIC CAPITAL LETTER DZE' },\r\n        { 'char': '&#x406', desc: 'CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I' },\r\n        { 'char': '&#x407', desc: 'CYRILLIC CAPITAL LETTER YI' },\r\n        { 'char': '&#x408', desc: 'CYRILLIC CAPITAL LETTER JE' },\r\n        { 'char': '&#x409', desc: 'CYRILLIC CAPITAL LETTER LJE' },\r\n        { 'char': '&#x40A', desc: 'CYRILLIC CAPITAL LETTER NJE' },\r\n        { 'char': '&#x40B', desc: 'CYRILLIC CAPITAL LETTER TSHE' },\r\n        { 'char': '&#x40C', desc: 'CYRILLIC CAPITAL LETTER KJE' },\r\n        { 'char': '&#x40D', desc: 'CYRILLIC CAPITAL LETTER I WITH GRAVE' },\r\n        { 'char': '&#x40E', desc: 'CYRILLIC CAPITAL LETTER SHORT U' },\r\n        { 'char': '&#x40F', desc: 'CYRILLIC CAPITAL LETTER DZHE' },\r\n        { 'char': '&#x410', desc: 'CYRILLIC CAPITAL LETTER A' },\r\n        { 'char': '&#x411', desc: 'CYRILLIC CAPITAL LETTER BE' },\r\n        { 'char': '&#x412', desc: 'CYRILLIC CAPITAL LETTER VE' },\r\n        { 'char': '&#x413', desc: 'CYRILLIC CAPITAL LETTER GHE' },\r\n        { 'char': '&#x414', desc: 'CYRILLIC CAPITAL LETTER DE' },\r\n        { 'char': '&#x415', desc: 'CYRILLIC CAPITAL LETTER IE' },\r\n        { 'char': '&#x416', desc: 'CYRILLIC CAPITAL LETTER ZHE' },\r\n        { 'char': '&#x417', desc: 'CYRILLIC CAPITAL LETTER ZE' },\r\n        { 'char': '&#x418', desc: 'CYRILLIC CAPITAL LETTER I' },\r\n        { 'char': '&#x419', desc: 'CYRILLIC CAPITAL LETTER SHORT I' },\r\n        { 'char': '&#x41A', desc: 'CYRILLIC CAPITAL LETTER KA' },\r\n        { 'char': '&#x41B', desc: 'CYRILLIC CAPITAL LETTER EL' },\r\n        { 'char': '&#x41C', desc: 'CYRILLIC CAPITAL LETTER EM' },\r\n        { 'char': '&#x41D', desc: 'CYRILLIC CAPITAL LETTER EN' },\r\n        { 'char': '&#x41E', desc: 'CYRILLIC CAPITAL LETTER O' },\r\n        { 'char': '&#x41F', desc: 'CYRILLIC CAPITAL LETTER PE' },\r\n        { 'char': '&#x420', desc: 'CYRILLIC CAPITAL LETTER ER' },\r\n        { 'char': '&#x421', desc: 'CYRILLIC CAPITAL LETTER ES' },\r\n        { 'char': '&#x422', desc: 'CYRILLIC CAPITAL LETTER TE' },\r\n        { 'char': '&#x423', desc: 'CYRILLIC CAPITAL LETTER U' },\r\n        { 'char': '&#x424', desc: 'CYRILLIC CAPITAL LETTER EF' },\r\n        { 'char': '&#x425', desc: 'CYRILLIC CAPITAL LETTER HA' },\r\n        { 'char': '&#x426', desc: 'CYRILLIC CAPITAL LETTER TSE' },\r\n        { 'char': '&#x427', desc: 'CYRILLIC CAPITAL LETTER CHE' },\r\n        { 'char': '&#x428', desc: 'CYRILLIC CAPITAL LETTER SHA' },\r\n        { 'char': '&#x429', desc: 'CYRILLIC CAPITAL LETTER SHCHA' },\r\n        { 'char': '&#x42A', desc: 'CYRILLIC CAPITAL LETTER HARD SIGN' },\r\n        { 'char': '&#x42B', desc: 'CYRILLIC CAPITAL LETTER YERU' },\r\n        { 'char': '&#x42C', desc: 'CYRILLIC CAPITAL LETTER SOFT SIGN' },\r\n        { 'char': '&#x42D', desc: 'CYRILLIC CAPITAL LETTER E' },\r\n        { 'char': '&#x42E', desc: 'CYRILLIC CAPITAL LETTER YU' },\r\n        { 'char': '&#x42F', desc: 'CYRILLIC CAPITAL LETTER YA' },\r\n        { 'char': '&#x430', desc: 'CYRILLIC SMALL LETTER A' },\r\n        { 'char': '&#x431', desc: 'CYRILLIC SMALL LETTER BE' },\r\n        { 'char': '&#x432', desc: 'CYRILLIC SMALL LETTER VE' },\r\n        { 'char': '&#x433', desc: 'CYRILLIC SMALL LETTER GHE' },\r\n        { 'char': '&#x434', desc: 'CYRILLIC SMALL LETTER DE' },\r\n        { 'char': '&#x435', desc: 'CYRILLIC SMALL LETTER IE' },\r\n        { 'char': '&#x436', desc: 'CYRILLIC SMALL LETTER ZHE' },\r\n        { 'char': '&#x437', desc: 'CYRILLIC SMALL LETTER ZE' },\r\n        { 'char': '&#x438', desc: 'CYRILLIC SMALL LETTER I' },\r\n        { 'char': '&#x439', desc: 'CYRILLIC SMALL LETTER SHORT I' },\r\n        { 'char': '&#x43A', desc: 'CYRILLIC SMALL LETTER KA' },\r\n        { 'char': '&#x43B', desc: 'CYRILLIC SMALL LETTER EL' },\r\n        { 'char': '&#x43C', desc: 'CYRILLIC SMALL LETTER EM' },\r\n        { 'char': '&#x43D', desc: 'CYRILLIC SMALL LETTER EN' },\r\n        { 'char': '&#x43E', desc: 'CYRILLIC SMALL LETTER O' },\r\n        { 'char': '&#x43F', desc: 'CYRILLIC SMALL LETTER PE' },\r\n        { 'char': '&#x440', desc: 'CYRILLIC SMALL LETTER ER' },\r\n        { 'char': '&#x441', desc: 'CYRILLIC SMALL LETTER ES' },\r\n        { 'char': '&#x442', desc: 'CYRILLIC SMALL LETTER TE' },\r\n        { 'char': '&#x443', desc: 'CYRILLIC SMALL LETTER U' },\r\n        { 'char': '&#x444', desc: 'CYRILLIC SMALL LETTER EF' },\r\n        { 'char': '&#x445', desc: 'CYRILLIC SMALL LETTER HA' },\r\n        { 'char': '&#x446', desc: 'CYRILLIC SMALL LETTER TSE' },\r\n        { 'char': '&#x447', desc: 'CYRILLIC SMALL LETTER CHE' },\r\n        { 'char': '&#x448', desc: 'CYRILLIC SMALL LETTER SHA' },\r\n        { 'char': '&#x449', desc: 'CYRILLIC SMALL LETTER SHCHA' },\r\n        { 'char': '&#x44A', desc: 'CYRILLIC SMALL LETTER HARD SIGN' },\r\n        { 'char': '&#x44B', desc: 'CYRILLIC SMALL LETTER YERU' },\r\n        { 'char': '&#x44C', desc: 'CYRILLIC SMALL LETTER SOFT SIGN' },\r\n        { 'char': '&#x44D', desc: 'CYRILLIC SMALL LETTER E' },\r\n        { 'char': '&#x44E', desc: 'CYRILLIC SMALL LETTER YU' },\r\n        { 'char': '&#x44F', desc: 'CYRILLIC SMALL LETTER YA' },\r\n        { 'char': '&#x450', desc: 'CYRILLIC SMALL LETTER IE WITH GRAVE' },\r\n        { 'char': '&#x451', desc: 'CYRILLIC SMALL LETTER IO' },\r\n        { 'char': '&#x452', desc: 'CYRILLIC SMALL LETTER DJE' },\r\n        { 'char': '&#x453', desc: 'CYRILLIC SMALL LETTER GJE' },\r\n        { 'char': '&#x454', desc: 'CYRILLIC SMALL LETTER UKRAINIAN IE' },\r\n        { 'char': '&#x455', desc: 'CYRILLIC SMALL LETTER DZE' },\r\n        { 'char': '&#x456', desc: 'CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I' },\r\n        { 'char': '&#x457', desc: 'CYRILLIC SMALL LETTER YI' },\r\n        { 'char': '&#x458', desc: 'CYRILLIC SMALL LETTER JE' },\r\n        { 'char': '&#x459', desc: 'CYRILLIC SMALL LETTER LJE' },\r\n        { 'char': '&#x45A', desc: 'CYRILLIC SMALL LETTER NJE' },\r\n        { 'char': '&#x45B', desc: 'CYRILLIC SMALL LETTER TSHE' },\r\n        { 'char': '&#x45C', desc: 'CYRILLIC SMALL LETTER KJE' },\r\n        { 'char': '&#x45D', desc: 'CYRILLIC SMALL LETTER I WITH GRAVE' },\r\n        { 'char': '&#x45E', desc: 'CYRILLIC SMALL LETTER SHORT U' },\r\n        { 'char': '&#x45F', desc: 'CYRILLIC SMALL LETTER DZHE' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Punctuation',\r\n      char: '&ndash;',\r\n      list: [\r\n        { 'char': '&ndash;', desc: 'EN DASH' },\r\n        { 'char': '&mdash;', desc: 'EM DASH' },\r\n        { 'char': '&lsquo;', desc: 'LEFT SINGLE QUOTATION MARK' },\r\n        { 'char': '&rsquo;', desc: 'RIGHT SINGLE QUOTATION MARK' },\r\n        { 'char': '&sbquo;', desc: 'SINGLE LOW-9 QUOTATION MARK' },\r\n        { 'char': '&ldquo;', desc: 'LEFT DOUBLE QUOTATION MARK' },\r\n        { 'char': '&rdquo;', desc: 'RIGHT DOUBLE QUOTATION MARK' },\r\n        { 'char': '&bdquo;', desc: 'DOUBLE LOW-9 QUOTATION MARK' },\r\n        { 'char': '&dagger;', desc: 'DAGGER' },\r\n        { 'char': '&Dagger;', desc: 'DOUBLE DAGGER' },\r\n        { 'char': '&bull;', desc: 'BULLET' },\r\n        { 'char': '&hellip;', desc: 'HORIZONTAL ELLIPSIS' },\r\n        { 'char': '&permil;', desc: 'PER MILLE SIGN' },\r\n        { 'char': '&prime;', desc: 'PRIME' },\r\n        { 'char': '&Prime;', desc: 'DOUBLE PRIME' },\r\n        { 'char': '&lsaquo;', desc: 'SINGLE LEFT-POINTING ANGLE QUOTATION MARK' },\r\n        { 'char': '&rsaquo;', desc: 'SINGLE RIGHT-POINTING ANGLE QUOTATION MARK' },\r\n        { 'char': '&oline;', desc: 'OVERLINE' },\r\n        { 'char': '&frasl;', desc: 'FRACTION SLASH' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Currency',\r\n      char: '&#x20A0',\r\n      list: [\r\n        { 'char': '&#x20A0', desc: 'EURO-CURRENCY SIGN' },\r\n        { 'char': '&#x20A1', desc: 'COLON SIGN' },\r\n        { 'char': '&#x20A2', desc: 'CRUZEIRO SIGN' },\r\n        { 'char': '&#x20A3', desc: 'FRENCH FRANC SIGN' },\r\n        { 'char': '&#x20A4', desc: 'LIRA SIGN' },\r\n        { 'char': '&#x20A5', desc: 'MILL SIGN' },\r\n        { 'char': '&#x20A6', desc: 'NAIRA SIGN' },\r\n        { 'char': '&#x20A7', desc: 'PESETA SIGN' },\r\n        { 'char': '&#x20A8', desc: 'RUPEE SIGN' },\r\n        { 'char': '&#x20A9', desc: 'WON SIGN' },\r\n        { 'char': '&#x20AA', desc: 'NEW SHEQEL SIGN' },\r\n        { 'char': '&#x20AB', desc: 'DONG SIGN' },\r\n        { 'char': '&#x20AC', desc: 'EURO SIGN' },\r\n        { 'char': '&#x20AD', desc: 'KIP SIGN' },\r\n        { 'char': '&#x20AE', desc: 'TUGRIK SIGN' },\r\n        { 'char': '&#x20AF', desc: 'DRACHMA SIGN' },\r\n        { 'char': '&#x20B0', desc: 'GERMAN PENNY SYMBOL' },\r\n        { 'char': '&#x20B1', desc: 'PESO SIGN' },\r\n        { 'char': '&#x20B2', desc: 'GUARANI SIGN' },\r\n        { 'char': '&#x20B3', desc: 'AUSTRAL SIGN' },\r\n        { 'char': '&#x20B4', desc: 'HRYVNIA SIGN' },\r\n        { 'char': '&#x20B5', desc: 'CEDI SIGN' },\r\n        { 'char': '&#x20B6', desc: 'LIVRE TOURNOIS SIGN' },\r\n        { 'char': '&#x20B7', desc: 'SPESMILO SIGN' },\r\n        { 'char': '&#x20B8', desc: 'TENGE SIGN' },\r\n        { 'char': '&#x20B9', desc: 'INDIAN RUPEE SIGN' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Arrows',\r\n      char: '&#x2190',\r\n      list: [\r\n        { 'char': '&#x2190', desc: 'LEFTWARDS ARROW' },\r\n        { 'char': '&#x2191', desc: 'UPWARDS ARROW' },\r\n        { 'char': '&#x2192', desc: 'RIGHTWARDS ARROW' },\r\n        { 'char': '&#x2193', desc: 'DOWNWARDS ARROW' },\r\n        { 'char': '&#x2194', desc: 'LEFT RIGHT ARROW' },\r\n        { 'char': '&#x2195', desc: 'UP DOWN ARROW' },\r\n        { 'char': '&#x2196', desc: 'NORTH WEST ARROW' },\r\n        { 'char': '&#x2197', desc: 'NORTH EAST ARROW' },\r\n        { 'char': '&#x2198', desc: 'SOUTH EAST ARROW' },\r\n        { 'char': '&#x2199', desc: 'SOUTH WEST ARROW' },\r\n        { 'char': '&#x219A', desc: 'LEFTWARDS ARROW WITH STROKE' },\r\n        { 'char': '&#x219B', desc: 'RIGHTWARDS ARROW WITH STROKE' },\r\n        { 'char': '&#x219C', desc: 'LEFTWARDS WAVE ARROW' },\r\n        { 'char': '&#x219D', desc: 'RIGHTWARDS WAVE ARROW' },\r\n        { 'char': '&#x219E', desc: 'LEFTWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x219F', desc: 'UPWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A0', desc: 'RIGHTWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A1', desc: 'DOWNWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A2', desc: 'LEFTWARDS ARROW WITH TAIL' },\r\n        { 'char': '&#x21A3', desc: 'RIGHTWARDS ARROW WITH TAIL' },\r\n        { 'char': '&#x21A4', desc: 'LEFTWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A5', desc: 'UPWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A6', desc: 'RIGHTWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A7', desc: 'DOWNWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A8', desc: 'UP DOWN ARROW WITH BASE' },\r\n        { 'char': '&#x21A9', desc: 'LEFTWARDS ARROW WITH HOOK' },\r\n        { 'char': '&#x21AA', desc: 'RIGHTWARDS ARROW WITH HOOK' },\r\n        { 'char': '&#x21AB', desc: 'LEFTWARDS ARROW WITH LOOP' },\r\n        { 'char': '&#x21AC', desc: 'RIGHTWARDS ARROW WITH LOOP' },\r\n        { 'char': '&#x21AD', desc: 'LEFT RIGHT WAVE ARROW' },\r\n        { 'char': '&#x21AE', desc: 'LEFT RIGHT ARROW WITH STROKE' },\r\n        { 'char': '&#x21AF', desc: 'DOWNWARDS ZIGZAG ARROW' },\r\n        { 'char': '&#x21B0', desc: 'UPWARDS ARROW WITH TIP LEFTWARDS' },\r\n        { 'char': '&#x21B1', desc: 'UPWARDS ARROW WITH TIP RIGHTWARDS' },\r\n        { 'char': '&#x21B2', desc: 'DOWNWARDS ARROW WITH TIP LEFTWARDS' },\r\n        { 'char': '&#x21B3', desc: 'DOWNWARDS ARROW WITH TIP RIGHTWARDS' },\r\n        { 'char': '&#x21B4', desc: 'RIGHTWARDS ARROW WITH CORNER DOWNWARDS' },\r\n        { 'char': '&#x21B5', desc: 'DOWNWARDS ARROW WITH CORNER LEFTWARDS' },\r\n        { 'char': '&#x21B6', desc: 'ANTICLOCKWISE TOP SEMICIRCLE ARROW' },\r\n        { 'char': '&#x21B7', desc: 'CLOCKWISE TOP SEMICIRCLE ARROW' },\r\n        { 'char': '&#x21B8', desc: 'NORTH WEST ARROW TO LONG BAR' },\r\n        { 'char': '&#x21B9', desc: 'LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21BA', desc: 'ANTICLOCKWISE OPEN CIRCLE ARROW' },\r\n        { 'char': '&#x21BB', desc: 'CLOCKWISE OPEN CIRCLE ARROW' },\r\n        { 'char': '&#x21BC', desc: 'LEFTWARDS HARPOON WITH BARB UPWARDS' },\r\n        { 'char': '&#x21BD', desc: 'LEFTWARDS HARPOON WITH BARB DOWNWARDS' },\r\n        { 'char': '&#x21BE', desc: 'UPWARDS HARPOON WITH BARB RIGHTWARDS' },\r\n        { 'char': '&#x21BF', desc: 'UPWARDS HARPOON WITH BARB LEFTWARDS' },\r\n        { 'char': '&#x21C0', desc: 'RIGHTWARDS HARPOON WITH BARB UPWARDS' },\r\n        { 'char': '&#x21C1', desc: 'RIGHTWARDS HARPOON WITH BARB DOWNWARDS' },\r\n        { 'char': '&#x21C2', desc: 'DOWNWARDS HARPOON WITH BARB RIGHTWARDS' },\r\n        { 'char': '&#x21C3', desc: 'DOWNWARDS HARPOON WITH BARB LEFTWARDS' },\r\n        { 'char': '&#x21C4', desc: 'RIGHTWARDS ARROW OVER LEFTWARDS ARROW' },\r\n        { 'char': '&#x21C5', desc: 'UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW' },\r\n        { 'char': '&#x21C6', desc: 'LEFTWARDS ARROW OVER RIGHTWARDS ARROW' },\r\n        { 'char': '&#x21C7', desc: 'LEFTWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21C8', desc: 'UPWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21C9', desc: 'RIGHTWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21CA', desc: 'DOWNWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21CB', desc: 'LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON' },\r\n        { 'char': '&#x21CC', desc: 'RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON' },\r\n        { 'char': '&#x21CD', desc: 'LEFTWARDS DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21CE', desc: 'LEFT RIGHT DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21CF', desc: 'RIGHTWARDS DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21D0', desc: 'LEFTWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D1', desc: 'UPWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D2', desc: 'RIGHTWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D3', desc: 'DOWNWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D4', desc: 'LEFT RIGHT DOUBLE ARROW' },\r\n        { 'char': '&#x21D5', desc: 'UP DOWN DOUBLE ARROW' },\r\n        { 'char': '&#x21D6', desc: 'NORTH WEST DOUBLE ARROW' },\r\n        { 'char': '&#x21D7', desc: 'NORTH EAST DOUBLE ARROW' },\r\n        { 'char': '&#x21D8', desc: 'SOUTH EAST DOUBLE ARROW' },\r\n        { 'char': '&#x21D9', desc: 'SOUTH WEST DOUBLE ARROW' },\r\n        { 'char': '&#x21DA', desc: 'LEFTWARDS TRIPLE ARROW' },\r\n        { 'char': '&#x21DB', desc: 'RIGHTWARDS TRIPLE ARROW' },\r\n        { 'char': '&#x21DC', desc: 'LEFTWARDS SQUIGGLE ARROW' },\r\n        { 'char': '&#x21DD', desc: 'RIGHTWARDS SQUIGGLE ARROW' },\r\n        { 'char': '&#x21DE', desc: 'UPWARDS ARROW WITH DOUBLE STROKE' },\r\n        { 'char': '&#x21DF', desc: 'DOWNWARDS ARROW WITH DOUBLE STROKE' },\r\n        { 'char': '&#x21E0', desc: 'LEFTWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E1', desc: 'UPWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E2', desc: 'RIGHTWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E3', desc: 'DOWNWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E4', desc: 'LEFTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21E5', desc: 'RIGHTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21E6', desc: 'LEFTWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E7', desc: 'UPWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E8', desc: 'RIGHTWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E9', desc: 'DOWNWARDS WHITE ARROW' },\r\n        { 'char': '&#x21EA', desc: 'UPWARDS WHITE ARROW FROM BAR' },\r\n        { 'char': '&#x21EB', desc: 'UPWARDS WHITE ARROW ON PEDESTAL' },\r\n        { 'char': '&#x21EC', desc: 'UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR' },\r\n        { 'char': '&#x21ED', desc: 'UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR' },\r\n        { 'char': '&#x21EE', desc: 'UPWARDS WHITE DOUBLE ARROW' },\r\n        { 'char': '&#x21EF', desc: 'UPWARDS WHITE DOUBLE ARROW ON PEDESTAL' },\r\n        { 'char': '&#x21F0', desc: 'RIGHTWARDS WHITE ARROW FROM WALL' },\r\n        { 'char': '&#x21F1', desc: 'NORTH WEST ARROW TO CORNER' },\r\n        { 'char': '&#x21F2', desc: 'SOUTH EAST ARROW TO CORNER' },\r\n        { 'char': '&#x21F3', desc: 'UP DOWN WHITE ARROW' },\r\n        { 'char': '&#x21F4', desc: 'RIGHT ARROW WITH SMALL CIRCLE' },\r\n        { 'char': '&#x21F5', desc: 'DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW' },\r\n        { 'char': '&#x21F6', desc: 'THREE RIGHTWARDS ARROWS' },\r\n        { 'char': '&#x21F7', desc: 'LEFTWARDS ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21F8', desc: 'RIGHTWARDS ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21F9', desc: 'LEFT RIGHT ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21FA', desc: 'LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FB', desc: 'RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FC', desc: 'LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FD', desc: 'LEFTWARDS OPEN-HEADED ARROW' },\r\n        { 'char': '&#x21FE', desc: 'RIGHTWARDS OPEN-HEADED ARROW' },\r\n        { 'char': '&#x21FF', desc: 'LEFT RIGHT OPEN-HEADED ARROW' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Math',\r\n      char: '&forall;',\r\n      list: [\r\n        { 'char': '&forall;', desc: 'FOR ALL' },\r\n        { 'char': '&part;', desc: 'PARTIAL DIFFERENTIAL' },\r\n        { 'char': '&exist;', desc: 'THERE EXISTS' },\r\n        { 'char': '&empty;', desc: 'EMPTY SET' },\r\n        { 'char': '&nabla;', desc: 'NABLA' },\r\n        { 'char': '&isin;', desc: 'ELEMENT OF' },\r\n        { 'char': '&notin;', desc: 'NOT AN ELEMENT OF' },\r\n        { 'char': '&ni;', desc: 'CONTAINS AS MEMBER' },\r\n        { 'char': '&prod;', desc: 'N-ARY PRODUCT' },\r\n        { 'char': '&sum;', desc: 'N-ARY SUMMATION' },\r\n        { 'char': '&minus;', desc: 'MINUS SIGN' },\r\n        { 'char': '&lowast;', desc: 'ASTERISK OPERATOR' },\r\n        { 'char': '&radic;', desc: 'SQUARE ROOT' },\r\n        { 'char': '&prop;', desc: 'PROPORTIONAL TO' },\r\n        { 'char': '&infin;', desc: 'INFINITY' },\r\n        { 'char': '&ang;', desc: 'ANGLE' },\r\n        { 'char': '&and;', desc: 'LOGICAL AND' },\r\n        { 'char': '&or;', desc: 'LOGICAL OR' },\r\n        { 'char': '&cap;', desc: 'INTERSECTION' },\r\n        { 'char': '&cup;', desc: 'UNION' },\r\n        { 'char': '&int;', desc: 'INTEGRAL' },\r\n        { 'char': '&there4;', desc: 'THEREFORE' },\r\n        { 'char': '&sim;', desc: 'TILDE OPERATOR' },\r\n        { 'char': '&cong;', desc: 'APPROXIMATELY EQUAL TO' },\r\n        { 'char': '&asymp;', desc: 'ALMOST EQUAL TO' },\r\n        { 'char': '&ne;', desc: 'NOT EQUAL TO' },\r\n        { 'char': '&equiv;', desc: 'IDENTICAL TO' },\r\n        { 'char': '&le;', desc: 'LESS-THAN OR EQUAL TO' },\r\n        { 'char': '&ge;', desc: 'GREATER-THAN OR EQUAL TO' },\r\n        { 'char': '&sub;', desc: 'SUBSET OF' },\r\n        { 'char': '&sup;', desc: 'SUPERSET OF' },\r\n        { 'char': '&nsub;', desc: 'NOT A SUBSET OF' },\r\n        { 'char': '&sube;', desc: 'SUBSET OF OR EQUAL TO' },\r\n        { 'char': '&supe;', desc: 'SUPERSET OF OR EQUAL TO' },\r\n        { 'char': '&oplus;', desc: 'CIRCLED PLUS' },\r\n        { 'char': '&otimes;', desc: 'CIRCLED TIMES' },\r\n        { 'char': '&perp;', desc: 'UP TACK' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Misc',\r\n      char: '&spades;',\r\n      list: [\r\n        { 'char': '&spades;', desc: 'BLACK SPADE SUIT' },\r\n        { 'char': '&clubs;', desc: 'BLACK CLUB SUIT' },\r\n        { 'char': '&hearts;', desc: 'BLACK HEART SUIT' },\r\n        { 'char': '&diams;', desc: 'BLACK DIAMOND SUIT' },\r\n        { 'char': '&#x2669', desc: 'QUARTER NOTE' },\r\n        { 'char': '&#x266A', desc: 'EIGHTH NOTE' },\r\n        { 'char': '&#x266B', desc: 'BEAMED EIGHTH NOTES' },\r\n        { 'char': '&#x266C', desc: 'BEAMED SIXTEENTH NOTES' },\r\n        { 'char': '&#x266D', desc: 'MUSIC FLAT SIGN' },\r\n        { 'char': '&#x266E', desc: 'MUSIC NATURAL SIGN' },\r\n        { 'char': '&#x2600', desc: 'BLACK SUN WITH RAYS' },\r\n        { 'char': '&#x2601', desc: 'CLOUD' },\r\n        { 'char': '&#x2602', desc: 'UMBRELLA' },\r\n        { 'char': '&#x2603', desc: 'SNOWMAN' },\r\n        { 'char': '&#x2615', desc: 'HOT BEVERAGE' },\r\n        { 'char': '&#x2618', desc: 'SHAMROCK' },\r\n        { 'char': '&#x262F', desc: 'YIN YANG' },\r\n        { 'char': '&#x2714', desc: 'HEAVY CHECK MARK' },\r\n        { 'char': '&#x2716', desc: 'HEAVY MULTIPLICATION X' },\r\n        { 'char': '&#x2744', desc: 'SNOWFLAKE' },\r\n        { 'char': '&#x275B', desc: 'HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275C', desc: 'HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275D', desc: 'HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275E', desc: 'HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x2764', desc: 'HEAVY BLACK HEART' }\r\n      ]\r\n    }\r\n  ],\r\n  specialCharButtons: ['specialCharBack', '|'],\r\n})\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'specialCharacters': '[_BUTTONS_][_CUSTOM_LAYER_]'\r\n})\r\n\r\nFE.PLUGINS.specialCharacters = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  // Load categories with special characters data\r\n  let selectedCategory = editor.opts.specialCharactersSets[0]\r\n  let { specialCharactersSets : categories } = editor.opts\r\n  let specialCharButtons = ''\r\n\r\n  /** \r\n   * Display the special characters popup \r\n   */\r\n  function _showSpecialChars() {\r\n    let $popup = editor.popups.get('specialCharacters')\r\n\r\n    if (!$popup) $popup = _initSpecialChars()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      editor.popups.refresh('specialCharacters')\r\n      editor.popups.setContainer('specialCharacters', editor.$tb)\r\n\r\n      // Special characters popup left and top position.\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"specialCharacters\"]')\r\n      const { left, top } = editor.button.getPosition($btn)\r\n\r\n      editor.popups.show('specialCharacters', left, top, outerHeight)\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Initialize the special characters popup\r\n   */\r\n  function _initSpecialChars() {\r\n\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // If toolbar is inline then load special character buttons\r\n      if (editor.opts.specialCharButtons.length > 0) {\r\n        specialCharButtons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.specialCharButtons)}</div>`\r\n      }\r\n    }\r\n\r\n    // Template for popup\r\n    const template = {\r\n      buttons: specialCharButtons,\r\n      custom_layer: _specialCharsHTML()\r\n    }\r\n\r\n    // Create popup.\r\n    const $popup = editor.popups.create('specialCharacters', template)\r\n\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /** \r\n   * HTML for the special characters popup. \r\n   */\r\n  function _specialCharsHTML() {\r\n    // Create special characters html.\r\n    return `\r\n        <div class=\"fr-buttons fr-tabs fr-tabs-scroll\">\r\n          ${_renderSplCharsCategory(categories, selectedCategory)}\r\n        </div>\r\n        <div class=\"fr-icon-container fr-sc-container\">\r\n          ${_renderSpanSplCharsHtml(selectedCategory)}\r\n        </div>`\r\n  }\r\n\r\n  /** \r\n   * Refresh the Popup \r\n   */\r\n  function _refreshPopup() {\r\n    editor.popups.get('specialCharacters').html(specialCharButtons + _specialCharsHTML())\r\n  }\r\n\r\n  /** \r\n   * Set the current selected special character category and update the popup \r\n   */\r\n  function setSpecialCharacterCategory(categoryId) {\r\n    selectedCategory = categories.filter(category => {\r\n      return category.title === categoryId\r\n    })[0]\r\n\r\n    _refreshPopup()\r\n  }\r\n\r\n  /** \r\n   * Register keyboard events. \r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('specialCharacters') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n      let index\r\n      let $el\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n\r\n        // Extremities reached.\r\n        if (($focused_item.is('span.fr-icon') && e.shiftKey) || ($focused_item.is('a') && !e.shiftKey)) {\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          // Focus back the popup's toolbar if exists.\r\n          status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n        }\r\n\r\n        if (status !== false) {\r\n\r\n          // Build elements that should be focused next.\r\n          let $tabElements = $popup.find('span.fr-icon:focus').first().concat($popup.findVisible(' span.fr-icon').first().concat($popup.find('a')))\r\n\r\n          if ($focused_item.is('span.fr-icon')) {\r\n            $tabElements = $tabElements.not('span.fr-icon:not(:focus)')\r\n          }\r\n\r\n          // Get focused item position.\r\n          index = $tabElements.index($focused_item)\r\n\r\n          // Backwards.\r\n          if (e.shiftKey) {\r\n            index = (((index - 1) % $tabElements.length) + $tabElements.length) % $tabElements.length\r\n\r\n            // Javascript negative modulo bug.\r\n            // Forward.\r\n          }\r\n          else {\r\n            index = (index + 1) % $tabElements.length\r\n          }\r\n\r\n          // Find next element to focus.\r\n          $el = $tabElements.get(index)\r\n\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-icon')) {\r\n\r\n          // Get all current icons.\r\n          const $icons = $focused_item.parent().find('span.fr-icon')\r\n\r\n          // Get focused item position.\r\n          index = $icons.index($focused_item)\r\n\r\n          // Get icons matrix dimensions.\r\n          const columns = 11\r\n          const lines = Math.floor($icons.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          $el = $($icons.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n        if ($focused_item.is('a')) {\r\n          $focused_item[0].click()\r\n        }\r\n        else {\r\n          editor.button.exec($focused_item)\r\n        }\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Render special characters category and update the popup\r\n   */\r\n  function _renderSplCharsCategory(categories, selectedCategory) {\r\n    let buttonHtml = ''\r\n    \r\n    categories.forEach(category => {\r\n      const buttonMap = {\r\n        elementClass: category.title === selectedCategory.title ? 'fr-active fr-active-tab' : '',\r\n        title: category.title,\r\n        dataParam1: category.title,\r\n        desc: category.char\r\n      }\r\n\r\n      buttonHtml += `<button class=\"fr-command fr-btn fr-special-character-category ${buttonMap.elementClass}\" title=\"${buttonMap.title}\" data-cmd=\"setSpecialCharacterCategory\" data-param1=\"${buttonMap.dataParam1}\"><span>${buttonMap.desc}</span></button>`\r\n    })\r\n    \r\n    return buttonHtml\r\n  }\r\n\r\n  /**\r\n   * Render special character\r\n   */\r\n  function _renderSpanSplCharsHtml(selectedCategory) {\r\n    let splChars_html = ''\r\n    \r\n    let i = 0\r\n    selectedCategory.list.forEach(splChar => {\r\n      \r\n      const splCharMap = { dataParam1: splChar.char, title: splChar.desc, splCharValue: splChar.char }\r\n      \r\n      splChars_html += `<span class=\"fr-command fr-special-character fr-icon\" role=\"button\" \r\n      data-cmd=\"insertSpecialCharacter\" data-param1=\"${splCharMap.dataParam1}\" \r\n      title=\"${splCharMap.title}\">${splCharMap.splCharValue}</span>`\r\n      i++\r\n    })\r\n    \r\n    return splChars_html\r\n  }\r\n\r\n   /*\r\n    * Go back to the inline editor.\r\n  */\r\n function back() {\r\n  editor.popups.hide('specialCharacters')\r\n  editor.toolbar.showInline()\r\n}\r\n\r\n  return {\r\n    setSpecialCharacterCategory: setSpecialCharacterCategory,\r\n    showSpecialCharsPopup: _showSpecialChars,\r\n    back: back\r\n  }\r\n}\r\n\r\nFE.DefineIcon('specialCharacters', { NAME: 'dollar-sign', SVG_KEY: 'symbols' })\r\n\r\nFE.RegisterCommand('specialCharacters', {\r\n  title: 'Special Characters',\r\n  icon: 'specialCharacters',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  plugin: 'specialCharacters',\r\n  showOnMobile: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('specialCharacters')) {\r\n      this.specialCharacters.showSpecialCharsPopup()\r\n    } else {\r\n      if (this.$el.find('.fr-marker')) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n\r\n      this.popups.hide('specialCharacters')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('insertSpecialCharacter', {\r\n  callback(cmd, specialCharacter) {\r\n\r\n    // Insert special characters\r\n    this.undo.saveStep()\r\n    this.html.insert(specialCharacter)\r\n    this.undo.saveStep()\r\n\r\n    this.popups.hide('specialCharacters')\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('setSpecialCharacterCategory', {\r\n  undo: false,\r\n  focus: false,\r\n  callback(cmd, category) {\r\n    this.specialCharacters.setSpecialCharacterCategory(category)\r\n  }\r\n})\r\n\r\nFE.DefineIcon('specialCharBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('specialCharBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.specialCharacters.back()\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'table.insert': '[_BUTTONS_][_ROWS_COLUMNS_]',\r\n  'table.edit': '[_BUTTONS_]',\r\n  'table.colors': '[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  tableInsertMaxSize: 10,\r\n  tableEditButtons: ['tableHeader', 'tableRemove', 'tableRows', 'tableColumns', 'tableStyle', '-', 'tableCells', 'tableCellBackground', 'tableCellVerticalAlign', 'tableCellHorizontalAlign', 'tableCellStyle'],\r\n  tableInsertButtons: ['tableBack', '|'],\r\n  tableResizer: true,\r\n  tableDefaultWidth: '100%',\r\n  tableResizerOffset: 5,\r\n  tableResizingLimit: 30,\r\n  tableColorsButtons: ['tableBack', '|'],\r\n  tableColors: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  tableColorsStep: 7,\r\n  tableCellStyles: {\r\n    'fr-highlighted': 'Highlighted',\r\n    'fr-thick': 'Thick'\r\n  },\r\n  tableStyles: {\r\n    'fr-dashed-borders': 'Dashed Borders',\r\n    'fr-alternate-rows': 'Alternate Rows'\r\n  },\r\n  tableCellMultipleStyles: true,\r\n  tableMultipleStyles: true,\r\n  tableInsertHelper: true,\r\n  tableInsertHelperOffset: 15\r\n})\r\n\r\nFE.PLUGINS.table = function (editor) {\r\n  const { $ } = editor\r\n  let $resizer\r\n  let $insert_helper\r\n  let mouseDownCellFlag\r\n  let mouseDownFlag\r\n  let mouseDownCell\r\n  let mouseMoveTimer\r\n  let resizingFlag\r\n\r\n  /*\r\n   * Show the insert table popup.\r\n   */\r\n  function _showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertTable\"]')\r\n     \r\n    let $popup = editor.popups.get('table.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      // Insert table popup\r\n      editor.popups.refresh('table.insert')\r\n      editor.popups.setContainer('table.insert', editor.$tb)\r\n\r\n      // Insert table left and top position.\r\n      const { left, top } = editor.button.getPosition($btn)\r\n      editor.popups.show('table.insert', left, top, $btn.outerHeight())\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the table edit popup.\r\n   */\r\n  function _showEditPopup() {\r\n    // Set popup position.\r\n    const map = _tableMap()\r\n    if (map) {\r\n      let $popup = editor.popups.get('table.edit')\r\n\r\n      if (!$popup) $popup = _initEditPopup()\r\n\r\n      if ($popup) {\r\n        editor.popups.setContainer('table.edit', editor.$sc)\r\n        const offset = _selectionOffset(map)\r\n        let left = offset.left + (offset.right - offset.left) / 2\r\n        let top = offset.bottom\r\n\r\n        editor.popups.show('table.edit', left, top, offset.bottom - offset.top, true)\r\n\r\n        // Disable toolbar buttons only if there are more than one cells selected.\r\n        if (editor.edit.isDisabled()) {\r\n\r\n          // Disable toolbar.\r\n          if (selectedCells().length > 1) {\r\n            editor.toolbar.disable()\r\n          }\r\n\r\n          // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n\r\n          editor.button.bulkRefresh()\r\n\r\n          // https://github.com/froala/wysiwyg-editor/issues/1851.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/314.\r\n          // https://github.com/froala/wysiwyg-editor/issues/1656.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/294.\r\n\r\n          // Place selection in last selected table cell.\r\n          editor.selection.setAtEnd(editor.$el.find('.fr-selected-cell').last().get(0))\r\n          editor.selection.restore()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the table colors popup.\r\n   */\r\n  function _showColorsPopup() {\r\n\r\n    // Set popup position.\r\n    const map = _tableMap()\r\n\r\n    if (map) {\r\n      let $popup = editor.popups.get('table.colors')\r\n\r\n      if (!$popup) $popup = _initColorsPopup()\r\n\r\n      editor.popups.setContainer('table.colors', editor.$sc)\r\n      const offset = _selectionOffset(map)\r\n      let left = (offset.left + offset.right) / 2\r\n      let top = offset.bottom\r\n\r\n      // Refresh selected color.\r\n      _refreshColor()\r\n\r\n      editor.popups.show('table.colors', left, top, offset.bottom - offset.top, true)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Called on table edit popup hide.\r\n   */\r\n  function _hideEditPopup() {\r\n\r\n    // Enable toolbar.\r\n    if (selectedCells().length === 0) {\r\n      editor.toolbar.enable()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the insert table popup.\r\n   */\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('table.insert', function () {\r\n\r\n        // Clear previous cell selection.\r\n        editor.popups.get('table.insert').find('.fr-table-size .fr-select-table-size > span[data-row=\"1\"][data-col=\"1\"]').trigger('mouseover')\r\n      })\r\n\r\n      return true\r\n    }\r\n\r\n    // Table buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableInsertButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.tableInsertButtons)}</div>`\r\n    }\r\n\r\n    const template = {\r\n      buttons: table_buttons,\r\n      rows_columns: _insertTableHtml()\r\n    }\r\n\r\n    const $popup = editor.popups.create('table.insert', template)\r\n\r\n    // Initialize insert table grid events.\r\n    editor.events.$on($popup, 'mouseover', '.fr-table-size .fr-select-table-size .fr-table-cell', function (e) {\r\n      _hoverCell($(e.currentTarget))\r\n    }, true)\r\n\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * Hover table cell.\r\n   */\r\n  function _hoverCell($table_cell) {\r\n    let row = $table_cell.data('row')\r\n    if(row !== null) {\r\n      row = parseInt(row)\r\n    }\r\n\r\n    let col = $table_cell.data('col')\r\n    if(col !== null) {\r\n      col = parseInt(col)\r\n    }\r\n    \r\n    const $select_size = $table_cell.parent()\r\n\r\n    // Update size in title.\r\n    $select_size.siblings('.fr-table-size-info').html(`${row} &times; ${col}`)\r\n\r\n    // Remove hover and fr-active-item class from all cells.\r\n    $select_size.find('> span').removeClass('hover fr-active-item')\r\n\r\n    // Add hover class only to the correct cells.\r\n    for (let i = 1; i <= editor.opts.tableInsertMaxSize; i++) {\r\n      for (let j = 0; j <= editor.opts.tableInsertMaxSize; j++) {\r\n        const $cell = $select_size.find(`> span[data-row=\"${i}\"][data-col=\"${j}\"]`)\r\n\r\n        if (i <= row && j <= col) {\r\n          $cell.addClass('hover')\r\n        }\r\n        else if ((i <= row + 1 || (i <= 2 && !editor.helpers.isMobile()))) {\r\n          $cell.css('display', 'inline-block')\r\n        }\r\n        else if (i > 2 && !editor.helpers.isMobile()) {\r\n          $cell.css('display', 'none')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Mark table cell as the active item.\r\n    $table_cell.addClass('fr-active-item')\r\n  }\r\n\r\n  /*\r\n   * The HTML for insert table grid.\r\n   */\r\n  function _insertTableHtml() {\r\n\r\n    // Grid html\r\n    let rows_columns = '<div class=\"fr-table-size\"><div class=\"fr-table-size-info\">1 &times; 1</div><div class=\"fr-select-table-size\">'\r\n\r\n    for (let i = 1; i <= editor.opts.tableInsertMaxSize; i++) {\r\n      for (let j = 1; j <= editor.opts.tableInsertMaxSize; j++) {\r\n        let display = 'inline-block'\r\n\r\n        // Display only first 2 rows.\r\n        if (i > 2 && !editor.helpers.isMobile()) {\r\n          display = 'none'\r\n        }\r\n\r\n        let cls = 'fr-table-cell '\r\n\r\n        if (i == 1 && j == 1) {\r\n          cls += ' hover'\r\n        }\r\n\r\n        rows_columns += `<span class=\"fr-command ${cls}\" tabIndex=\"-1\" data-cmd=\"tableInsert\" data-row=\"${i}\" data-col=\"${j}\" data-param1=\"${i}\" data-param2=\"${j}\" style=\"display: ${display};\" role=\"button\"><span></span><span class=\"fr-sr-only\">${i} &times; ${j}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n      rows_columns += '<div class=\"new-line\"></div>'\r\n    }\r\n\r\n    rows_columns += '</div></div>'\r\n\r\n    return rows_columns\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events.\r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Hover cell when table.insert cells are focused.\r\n    editor.events.$on($popup, 'focus', '[tabIndex]', function (e) {\r\n      const $focused_el = $(e.currentTarget)\r\n      _hoverCell($focused_el)\r\n    })\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('table.insert') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n\r\n      if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-table-cell')) {\r\n\r\n          // Get all current cells.\r\n          const $cells = $focused_item.parent().find('span.fr-table-cell')\r\n\r\n          // Get focused item position.\r\n          const index = $cells.index($focused_item)\r\n\r\n          // Get cell matrix dimensions.\r\n          const columns = editor.opts.tableInsertMaxSize\r\n\r\n          // Get focused item coordinates.\r\n          let column = index % columns\r\n          let line = Math.floor(index / columns)\r\n\r\n          // Calculate next coordinates. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            line = Math.max(0, line - 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            line = Math.min(editor.opts.tableInsertMaxSize - 1, line + 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            column = Math.max(0, column - 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            column = Math.min(editor.opts.tableInsertMaxSize - 1, column + 1)\r\n          }\r\n\r\n          // Get the next element based on the new coordinates.\r\n          const nextIndex = line * columns + column\r\n          const $el = $($cells.get(nextIndex))\r\n\r\n          // Hover cell\r\n          _hoverCell($el)\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Init the table edit popup.\r\n   */\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('table.edit', _hideEditPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Table buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableEditButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.tableEditButtons)}</div>`\r\n\r\n      const template = {\r\n        buttons: table_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('table.edit', template)\r\n\r\n      editor.events.$on(editor.$wp, 'scroll.table-edit', function () {\r\n        if (editor.popups.isVisible('table.edit')) {\r\n          _showEditPopup()\r\n        }\r\n      })\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /*\r\n   * Init the table cell background popup.\r\n   */\r\n  function _initColorsPopup() {\r\n\r\n    // Table colors buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableColorsButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.tableColorsButtons)}</div>`\r\n    }\r\n\r\n    // Custom HEX.\r\n    let custom_color = ''\r\n\r\n    if (editor.opts.colorsHEXInput) {\r\n      custom_color = `<div class=\"fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer\" id=\"fr-table-colors-hex-layer-${editor.id}\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"fr-table-colors-hex-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('HEX Color')}\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"tableCellBackgroundCustomColor\" tabIndex=\"2\" role=\"button\">${editor.language.translate('OK')}</button></div></div>`\r\n    }\r\n\r\n    const template = {\r\n      buttons: table_buttons,\r\n      colors: _colorsHTML(),\r\n      custom_color: custom_color\r\n    }\r\n\r\n    const $popup = editor.popups.create('table.colors', template)\r\n\r\n    editor.events.$on(editor.$wp, 'scroll.table-colors', function () {\r\n      if (editor.popups.isVisible('table.colors')) {\r\n        _showColorsPopup()\r\n      }\r\n    })\r\n\r\n    _addColorsAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * HTML for the table colors.\r\n   */\r\n  function _colorsHTML() {\r\n\r\n    // Create colors html.\r\n    let colors_html = '<div class=\"fr-color-set fr-table-colors\">'\r\n\r\n    // Add colors.\r\n    for (let i = 0; i < editor.opts.tableColors.length; i++) {\r\n      if (i !== 0 && i % editor.opts.tableColorsStep === 0) {\r\n        colors_html += '<br>'\r\n      }\r\n\r\n      if (editor.opts.tableColors[i] != 'REMOVE') {\r\n        colors_html += `<span class=\"fr-command\" style=\"background: ${editor.opts.tableColors[i]};\" tabIndex=\"-1\" role=\"button\" data-cmd=\"tableCellBackgroundColor\" data-param1=\"${editor.opts.tableColors[i]}\"><span class=\"fr-sr-only\">${editor.language.translate('Color')} ${editor.opts.tableColors[i]}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n\r\n      else {\r\n        colors_html += `<span class=\"fr-command\" data-cmd=\"tableCellBackgroundColor\" tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" title=\"${editor.language.translate('Clear Formatting')}\">${editor.icon.create('tableColorRemove')}<span class=\"fr-sr-only\">${editor.language.translate('Clear Formatting')}</span></span>`\r\n      }\r\n    }\r\n\r\n    colors_html += '</div>'\r\n\r\n    return colors_html\r\n  }\r\n\r\n  /*\r\n   * Set custom color\r\n   */\r\n  function customColor() {\r\n    const $popup = editor.popups.get('table.colors')\r\n    const $input = $popup.find('.fr-table-colors-hex-layer input')\r\n\r\n    if ($input.length) {\r\n      setBackground($input.val())\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events for colors.\r\n   */\r\n  function _addColorsAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('table.colors') || !$focused_item.is('span')) {\r\n        return true\r\n      }\r\n      const key_code = e.which\r\n      let status = true\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n        const $tb = $popup.find('.fr-buttons')\r\n\r\n        // Focus back the popup's toolbar if exists.\r\n        status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n\r\n        // Get all current colors.\r\n        const $colors = $focused_item.parent().find('span.fr-command')\r\n\r\n        // Get focused item position.\r\n        const index = $colors.index($focused_item)\r\n\r\n        // Get color matrix dimensions.\r\n        const columns = editor.opts.colorsStep\r\n        const lines = Math.floor($colors.length / columns)\r\n\r\n        // Get focused item coordinates.\r\n        const column = index % columns\r\n        const line = Math.floor(index / columns)\r\n\r\n        let nextIndex = line * columns + column\r\n        const dimension = lines * columns\r\n\r\n        // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n        // Up/Down: Traverse matrix lines.\r\n        // Left/Right: Traverse the matrix as it is a vector.\r\n        if (FE.KEYCODE.ARROW_UP == key_code) {\r\n          nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n        }\r\n        else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n          nextIndex = (nextIndex + columns) % dimension\r\n        }\r\n        else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n          nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n        }\r\n        else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n          nextIndex = (nextIndex + 1) % dimension\r\n        }\r\n\r\n        // Get the next element based on the new index.\r\n        const $el = $($colors.get(nextIndex))\r\n\r\n        // Focus.\r\n        editor.events.disableBlur()\r\n        $el.focus()\r\n\r\n        status = false\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Show the current selected color.\r\n   */\r\n  function _refreshColor() {\r\n    const $popup = editor.popups.get('table.colors')\r\n    const $cell = editor.$el.find('.fr-selected-cell').first()\r\n    const color = editor.helpers.RGBToHex($cell.css('background-color'))\r\n    const $input = $popup.find('.fr-table-colors-hex-layer input')\r\n\r\n    // Remove current color selection.\r\n    $popup.find('.fr-selected-color').removeClass('fr-selected-color fr-active-item')\r\n\r\n    // Find the selected color.\r\n    $popup.find(`span[data-param1=\"${color}\"]`).addClass('fr-selected-color fr-active-item')\r\n    $input.val(color).trigger('change')\r\n  }\r\n\r\n  /*\r\n   * Insert table method.\r\n   */\r\n  function insert(rows, cols) {\r\n\r\n    // Create table HTML.\r\n    let table = '<table ' + (!editor.opts.tableDefaultWidth ? '' : 'style=\"width: ' + editor.opts.tableDefaultWidth + ';\" ') + 'class=\"fr-inserted-table\"><tbody>'\r\n    const cell_width = 100 / cols\r\n    let i\r\n    let j\r\n\r\n    for (i = 0; i < rows; i++) {\r\n      table += '<tr>'\r\n\r\n      for (j = 0; j < cols; j++) {\r\n        table += '<td' + (!editor.opts.tableDefaultWidth ? '' : ' style=\"width: ' + cell_width.toFixed(4) + '%;\"') + '>'\r\n\r\n        if (i === 0 && j === 0) table += FE.MARKERS\r\n        table += '<br></td>'\r\n      }\r\n      table += '</tr>'\r\n    }\r\n    table += '</tbody></table>'\r\n\r\n    editor.html.insert(table)\r\n\r\n    // Update cursor position.\r\n    editor.selection.restore()\r\n\r\n    const $table = editor.$el.find('.fr-inserted-table')\r\n    $table.removeClass('fr-inserted-table')\r\n    editor.events.trigger('table.inserted', [$table.get(0)])\r\n  }\r\n\r\n  /*\r\n   * Delete table method.\r\n   */\r\n  function remove() {\r\n    if (selectedCells().length > 0) {\r\n      const $current_table = selectedTable()\r\n\r\n      // Update cursor position.\r\n      editor.selection.setBefore($current_table.get(0)) || editor.selection.setAfter($current_table.get(0))\r\n      editor.selection.restore()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n\r\n      // Delete table.\r\n      $current_table.remove()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Add table header.\r\n   */\r\n  function addHeader() {\r\n    const $table = selectedTable()\r\n\r\n    // If there is a selection in the table and the table doesn't have a header already.\r\n    if ($table.length > 0 && $table.find('th').length === 0) {\r\n\r\n      // Create header HTML.\r\n      let thead = '<thead><tr>'\r\n\r\n      let i\r\n      let col = 0\r\n\r\n      // Get first row and count table columns.\r\n      $table.find('tr').first().find('> td').each(function () {\r\n        const $td = $(this)\r\n\r\n        col += parseInt($td.attr('colspan'), 10) || 1\r\n      })\r\n\r\n      // Add cells.\r\n      for (i = 0; i < col; i++) {\r\n        thead += '<th><br></th>'\r\n      }\r\n\r\n      thead += '</tr></thead>'\r\n\r\n      $table.prepend(thead)\r\n\r\n      // Reposition table edit popup.\r\n      _showEditPopup()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove table header.\r\n   */\r\n  function removeHeader() {\r\n    const $current_table = selectedTable()\r\n    const $table_header = $current_table.find('thead')\r\n\r\n    // Table has a header.\r\n    if ($table_header.length > 0) {\r\n\r\n      // If table does not have any other rows then delete table.\r\n      if ($current_table.find('tbody tr').length === 0) {\r\n\r\n        // Remove table.\r\n        remove()\r\n      }\r\n\r\n      else {\r\n        $table_header.remove()\r\n\r\n        // Reposition table edit popup if there any more selected celss.\r\n        if (selectedCells().length > 0) {\r\n          _showEditPopup()\r\n        }\r\n        else {\r\n\r\n          // Hide popup.\r\n          editor.popups.hide('table.edit')\r\n\r\n          // Update cursor position.\r\n          //const td = $current_table.find('tbody tr:first td:first').get(0)\r\n          const td = $current_table.find('tbody tr').first().find('td').first().get(0)\r\n\r\n          if (td) {\r\n            editor.selection.setAtEnd(td)\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Insert row method.\r\n   */\r\n  function insertRow(position) {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n\r\n      // Cannot insert row above the table header.\r\n      if (editor.$el.find('th.fr-selected-cell').length > 0 && position == 'above') {\r\n        return\r\n      }\r\n\r\n      else {\r\n        let i\r\n        let ref_row\r\n        let $ref_row\r\n\r\n        // Create a table map.\r\n        const map = _tableMap()\r\n\r\n        // Get selected cells from the table.\r\n        const selection = _currentSelection(map)\r\n\r\n        // Return if no selected cell\r\n        if(selection == null) {\r\n          return\r\n        }\r\n\r\n        // Reference row.\r\n        if (position == 'above') {\r\n          ref_row = selection.min_i\r\n        }\r\n        else {\r\n          ref_row = selection.max_i\r\n        }\r\n\r\n        // Create row HTML.\r\n        let tr = '<tr>'\r\n\r\n        // Add cells.\r\n        for (i = 0; i < map[ref_row].length; i++) {\r\n\r\n          // If cell has rowspan we should increase it.\r\n          if ((position == 'below' && ref_row < map.length - 1 && map[ref_row][i] == map[ref_row + 1][i]) ||\r\n            (position == 'above' && ref_row > 0 && map[ref_row][i] == map[ref_row - 1][i])) {\r\n\r\n            // Don't increase twice for colspan.\r\n            if (i === 0 || (i > 0 && map[ref_row][i] != map[ref_row][i - 1])) {\r\n              const $cell = $(map[ref_row][i])\r\n              $cell.attr('rowspan', parseInt($cell.attr('rowspan'), 10) + 1)\r\n            }\r\n\r\n          }\r\n          else {\r\n            let $refCell = $(map[ref_row][i])\r\n            tr += '<td style=\"' + $refCell.attr('style') + '\" ><br></td>'\r\n          }\r\n        }\r\n\r\n        // Close row tag.\r\n        tr += '</tr>'\r\n\r\n        // Current selection is in header. Should insert in table body\r\n        if (editor.$el.find('th.fr-selected-cell').length > 0 && position == 'below') {\r\n          $ref_row = $($table.find('tbody').not($table.find('> table tbody')))\r\n        }\r\n\r\n        // Selection is in body\r\n        else {\r\n          $ref_row = $($table.find('tr').not($table.find('> table tr')).get(ref_row));\r\n        }\r\n\r\n        // Insert new row.\r\n        if (position == 'below') {\r\n          if ($ref_row.attr('tagName') == 'TBODY') {\r\n            $ref_row.prepend(tr)\r\n          }\r\n          else {\r\n            if ($ref_row[0].parentNode) {\r\n              $ref_row[0].insertAdjacentHTML('afterend', tr)\r\n            }\r\n          }\r\n        }\r\n        else if (position == 'above') {\r\n          $ref_row.before(tr)\r\n\r\n          // Reposition table edit popup.\r\n          if (editor.popups.isVisible('table.edit')) {\r\n            _showEditPopup()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Delete row method.\r\n   */\r\n  function deleteRow() {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n      let i\r\n      let j\r\n      let $row\r\n\r\n      // Create a table map.\r\n      let map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected cell\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      // If all the rows are selected then delete the entire table.\r\n      if (selection.min_i === 0 && selection.max_i == map.length - 1) {\r\n        remove()\r\n\r\n      }\r\n      else {\r\n\r\n        // We should delete selected rows.\r\n        for (i = selection.max_i; i >= selection.min_i; i--) {\r\n          // $row = $($table.find('tr').not($table.find('table tr')).get(i))\r\n          // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n          // therefore trying diff way to fetch the table's own rows\r\n          $row = $($table.find('tr').not($table.find('> table tr')).get(i));\r\n\r\n          // Go through the table map to check for rowspan on the row to delete.\r\n          for (j = 0; j < map[i].length; j++) {\r\n\r\n            // Don't do this twice if we have a colspan.\r\n            if (j === 0 || map[i][j] != map[i][j - 1]) {\r\n              const $cell = $(map[i][j])\r\n\r\n              // We should decrease rowspan.\r\n              if (parseInt($cell.attr('rowspan'), 10) > 1) {\r\n                const rowspan = parseInt($cell.attr('rowspan'), 10) - 1\r\n\r\n                if (rowspan == 1) {\r\n                  $cell.removeAttr('rowspan')\r\n                }\r\n                else {\r\n                  $cell.attr('rowspan', rowspan)\r\n                }\r\n              }\r\n\r\n              // We might need to move tds on the row below if we have a rowspan that starts here.\r\n              if (i < map.length - 1 && map[i][j] == map[i + 1][j] && (i === 0 || map[i][j] != map[i - 1][j])) {\r\n\r\n                // Move td to the row below.\r\n                const td = map[i][j]\r\n                let col = j\r\n\r\n                // Go back until we get the last element (we might have colspan).\r\n                while (col > 0 && map[i][col] == map[i][col - 1]) {\r\n                  col--\r\n                }\r\n\r\n                // Add td at the beginning of the row below.\r\n                if (col === 0) {\r\n                  // $($table.find('tr').not($table.find('table tr')).get(i + 1)).prepend(td)\r\n                  // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n                  // therefore trying diff way to fetch the table's own rows\r\n                  $($table.find('tr').not($table.find('> table tr')).get(i + 1)).prepend(td);\r\n\r\n                }\r\n                else {\r\n                  if($(map[i+1][col-1])[0].parentNode) {\r\n                    $(map[i+1][col-1])[0].insertAdjacentElement('afterend', td)\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // Remove tbody or thead if there are no more rows.\r\n          const $row_parent = $row.parent()\r\n          $row.remove()\r\n\r\n          if ($row_parent.find('tr').length === 0) {\r\n            $row_parent.remove()\r\n          }\r\n\r\n          // Table has changed.\r\n          map = _tableMap($table)\r\n        }\r\n\r\n        _updateCellSpan(0, map.length - 1, 0, map[0].length - 1, $table)\r\n\r\n        // Update cursor position\r\n        if (selection.min_i > 0) {\r\n\r\n          // Place cursor in the row above selection.\r\n          editor.selection.setAtEnd(map[selection.min_i - 1][0])\r\n        }\r\n        else {\r\n\r\n          // Place cursor in the row below selection.\r\n          editor.selection.setAtEnd(map[0][0])\r\n        }\r\n        editor.selection.restore()\r\n\r\n        // Hide table edit popup.\r\n        editor.popups.hide('table.edit')\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Insert column method.\r\n   */\r\n  function insertColumn(position) {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Reference row.\r\n      let ref_col\r\n\r\n      if (position == 'before') {\r\n        ref_col = selection.min_j\r\n      }\r\n      else {\r\n        ref_col = selection.max_j\r\n      }\r\n\r\n      // Old and new column widths.\r\n      const old_width = 100 / map[0].length\r\n      const new_width = 100 / (map[0].length + 1)\r\n\r\n      // Go through all cells and get their initial (old) widths.\r\n      let $cell\r\n\r\n      $table.find('th, td').each(function () {\r\n        $cell = $(this)\r\n        $cell.data('old-width', $cell.outerWidth() / $table.outerWidth() * 100)\r\n      })\r\n\r\n      // Parse each row to insert a new td.\r\n      $table.find('tr').not($table.find('> table tr')).each(function (index) {\r\n        // Get the exact td index before / after which we have to add the new td.\r\n        // ref_col means the table column number, but this is not the same with the td number in a row.\r\n        // We might have colspan or rowspan greater than 1.\r\n        const $row = $(this)\r\n        let col_no = 0\r\n        let td_no = 0\r\n        let ref_td\r\n\r\n        // Start with the first td (td_no = 0) in the current row.\r\n        // Sum colspans (col_no) to see when we reach ref_col.\r\n        // Summing colspans we get the same number with the table column number.\r\n        while (col_no - 1 < ref_col) {\r\n\r\n          // Get current td.\r\n          ref_td = $row.find('> th, > td').get(td_no)\r\n\r\n          // There are no more tds in this row.\r\n          if (!ref_td) {\r\n            ref_td = null\r\n            break\r\n          }\r\n\r\n          // The current td is the same with the td from the table map.\r\n          if (ref_td == map[index][col_no]) {\r\n\r\n            // The current td might have colspan.\r\n            col_no += parseInt($(ref_td).attr('colspan'), 10) || 1\r\n\r\n            // Go to the next td on the current row.\r\n            td_no++\r\n          }\r\n\r\n          // If current td is not the same with the td from the table map.\r\n          // This means that this table cell (map[index][td_no]) has rowspan.\r\n          // There is at least one td less on this row due to rowspan (based on map[index][td_no] colspan value).\r\n          // We want to count this as a column as well.\r\n          else {\r\n            col_no += parseInt($(map[index][col_no]).attr('colspan'), 10) || 1\r\n\r\n            // ref_td is one td ahead. Get previous td if we want to insert column after.\r\n            if (position == 'after') {\r\n\r\n              // There is a rowspan and so ref_td is the first td, but it is not in the first column.\r\n              if (td_no === 0) {\r\n                ref_td = -1\r\n\r\n              }\r\n              else {\r\n                ref_td = $row.find('> th, > td').get(td_no - 1)\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        const $ref_td = $(ref_td)\r\n\r\n        // If the computed column number is higher than the reference number\r\n        // then on this row we have a colspan longer than the reference column.\r\n        // When adding a column after we should increase colspan on this row.\r\n        //\r\n        // If we want to add a column before, but the td on the reference column is\r\n        // the same with the previous one then we have a td with colspan that\r\n        // starts before the column reference number.\r\n        // When adding a column before we should increase colspan on this row.\r\n        if ((position == 'after' && col_no - 1 > ref_col) ||\r\n          (position == 'before' && ref_col > 0 && map[index][ref_col] == map[index][ref_col - 1])) {\r\n\r\n          // Don't increase twice for rowspan.\r\n          if (index === 0 || (index > 0 && map[index][ref_col] != map[index - 1][ref_col])) {\r\n            const colspan = parseInt($ref_td.attr('colspan'), 10) + 1\r\n\r\n            $ref_td.attr('colspan', colspan)\r\n\r\n            // Update this cell's width.\r\n            $ref_td.css('width', ($ref_td.data('old-width') * new_width / old_width + new_width).toFixed(4) + '%')\r\n            $ref_td.removeData('old-width')\r\n          }\r\n\r\n        }\r\n\r\n        else {\r\n\r\n          // Create HTML for a new cell.\r\n          let td\r\n\r\n          // Might be a td or a th.\r\n          if ($row.find('th').length > 0) {\r\n            td = `<th style=\"width: ${new_width.toFixed(4)}%;\"><br></th>`\r\n          }\r\n          else {\r\n            td = `<td style=\"width: ${new_width.toFixed(4)}%;\"><br></td>`\r\n          }\r\n\r\n          // Insert exactly at the beginning.\r\n          if (ref_td == -1) {\r\n            $row.prepend(td)\r\n\r\n            // Insert exactly at the end.\r\n          }\r\n          else if (ref_td == null) {\r\n            $row.append(td)\r\n\r\n            // Insert td on the current row.\r\n          }\r\n          else {\r\n            if (position == 'before') {\r\n              $ref_td.before(td)\r\n            }\r\n\r\n            else if (position == 'after') {\r\n              if($ref_td[0].parentNode) {\r\n                $ref_td[0].insertAdjacentHTML('afterend', td)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n      // Parse each row to update cells' width.\r\n      $table.find('th, td').each(function () {\r\n        $cell = $(this)\r\n\r\n        // Update width and remove data.\r\n        if ($cell.data('old-width')) {\r\n          $cell.css('width', ($cell.data('old-width') * new_width / old_width).toFixed(4) + '%')\r\n          $cell.removeData('old-width')\r\n        }\r\n      })\r\n\r\n      // Reposition table edit popup.\r\n      if (editor.popups.isVisible('table.edit')) {\r\n        _showEditPopup()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Delete column method.\r\n   */\r\n  function deleteColumn() {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n      let i\r\n      let j\r\n      let $cell\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected column\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      // If all the rows are selected then delete the entire table.\r\n      if (selection.min_j === 0 && selection.max_j == map[0].length - 1) {\r\n        remove()\r\n      }\r\n      else {\r\n        // Old width of all the columns that remain afte the delete.\r\n        let old_width = 0\r\n\r\n        // Go through all cells and get their initial (old) widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          for (j = 0; j < map[0].length; j++) {\r\n            $cell = $(map[i][j])\r\n\r\n            if (!$cell.hasClass('fr-selected-cell')) {\r\n              $cell.data('old-width', $cell.outerWidth() / $table.outerWidth() * 100)\r\n\r\n              if (j < selection.min_j || j > selection.max_j) {\r\n                old_width += $cell.outerWidth() / $table.outerWidth() * 100\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        old_width /= map.length\r\n\r\n        // We should delete selected columns.\r\n        for (j = selection.max_j; j >= selection.min_j; j--) {\r\n\r\n          // Go through the table map to check for colspan.\r\n          for (i = 0; i < map.length; i++) {\r\n\r\n            // Don't do this twice if we have a rowspan.\r\n            if (i === 0 || map[i][j] != map[i - 1][j]) {\r\n\r\n              // We should decrease colspan.\r\n              $cell = $(map[i][j])\r\n\r\n              if ((parseInt($cell.attr('colspan'), 10) || 1) > 1) {\r\n                const colspan = parseInt($cell.attr('colspan'), 10) - 1\r\n\r\n                if (colspan == 1) {\r\n                  $cell.removeAttr('colspan')\r\n                }\r\n                else {\r\n                  $cell.attr('colspan', colspan)\r\n                }\r\n\r\n                // Update cell width.\r\n                $cell.css('width', (($cell.data('old-width') - _columnWidth(j, map)) * 100 / old_width).toFixed(4) + '%')\r\n                $cell.removeData('old-width')\r\n\r\n                // If there is no colspan delete the cell.\r\n              }\r\n              else {\r\n\r\n                // We might need to delete the row too if it is empty.\r\n                const $row = $($cell.parent().get(0))\r\n\r\n                $cell.remove()\r\n\r\n                // Check if there are any more tds in the current row.\r\n                if ($row.find('> th, > td').length === 0) {\r\n\r\n                  // Check if it is okay to delete the tr.\r\n                  if ($row.prev().length === 0 || $row.next().length === 0 ||\r\n                    $row.prev().find('> th[rowspan], > td[rowspan]').length < $row.prev().find('> th, > td').length) {\r\n                    $row.remove()\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        _updateCellSpan(0, map.length - 1, 0, map[0].length - 1, $table)\r\n\r\n        // Update cursor position\r\n        if (selection.min_j > 0) {\r\n          // Place cursor in the column before selection.\r\n          editor.selection.setAtEnd(map[selection.min_i][selection.min_j - 1])\r\n        }\r\n        else {\r\n          // Place cursor in the column after selection.\r\n          editor.selection.setAtEnd(map[selection.min_i][0])\r\n        }\r\n        editor.selection.restore()\r\n\r\n        // Hide table edit popup.\r\n        editor.popups.hide('table.edit')\r\n\r\n        // Scale current cells' width after column has been deleted.\r\n        $table.find('th, td').each(function () {\r\n          $cell = $(this)\r\n\r\n          // Update width and remove data.\r\n          if ($cell.data('old-width')) {\r\n            $cell.css('width', ($cell.data('old-width') * 100 / old_width).toFixed(4) + '%')\r\n            $cell.removeData('old-width')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove colspan attribute.\r\n   */\r\n  function _updateColspan(min_j, max_j, $table) {\r\n    let i\r\n    let j\r\n    let k\r\n    let first_span\r\n    let span\r\n    let decrease = 0\r\n\r\n    // Create a table map.\r\n    const map = _tableMap($table)\r\n\r\n    // A column might have been deleted.\r\n    max_j = Math.min(max_j, map[0].length - 1)\r\n\r\n    // If max_j and min_j are the same, then only one column is selected and colspan is preserved.\r\n    if (max_j > min_j) {\r\n      // Find out how much we should decrease colspan.\r\n      // Parsing only the first row is enough.\r\n      for (j = min_j; j <= max_j; j++) {\r\n\r\n        // This cell has colspan and has already been checked.\r\n        if (j > min_j && map[0][j] == map[0][j - 1]) {\r\n          continue\r\n        }\r\n\r\n        // Current cell colspan\r\n        first_span = Math.min(parseInt(map[0][j].getAttribute('colspan'), 10) || 1, max_j - min_j + 1)\r\n\r\n        // Cell has colspan between min_j and max_j.\r\n        /* j + 1 will never exceed the number of columns in a table.\r\n         * A colspan is detected before the last column and all next cells on that row are skipped.\r\n         */\r\n        if (first_span > 1 && map[0][j] == map[0][j + 1]) {\r\n\r\n          // The value we should decrease colspan with.\r\n          decrease = first_span - 1\r\n\r\n          // Check all columns on the current row.\r\n          // We found a colspan on the first row (i = 0), continue with second row (i = 1).\r\n          for (i = 1; i < map.length; i++) {\r\n\r\n            // This cell has rowspan and has already been checked.\r\n            if (map[i][j] == map[i - 1][j]) {\r\n              continue\r\n            }\r\n\r\n            // Look for a colspan on the same columns.\r\n            for (k = j; k < j + first_span; k++) {\r\n              span = parseInt(map[i][k].getAttribute('colspan'), 10) || 1\r\n\r\n              // There are other cells with colspan on this column.\r\n              /* k + 1 will never exceed the number of columns in a table.\r\n               * A colspan is detected before the last column and all next cells on that row are skipped.\r\n               */\r\n              if (span > 1 && map[i][k] == map[i][k + 1]) {\r\n                decrease = Math.min(decrease, span - 1)\r\n\r\n                // Skip colspan.\r\n                k += decrease\r\n              }\r\n              else {\r\n                decrease = Math.max(0, decrease - 1)\r\n\r\n                // Stop if decrease reaches 0.\r\n                if (!decrease) {\r\n                  break\r\n                }\r\n              }\r\n            }\r\n\r\n            // Stop looking on the next columns if decrease reaches 0.\r\n            if (!decrease) {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update colspan attribute.\r\n    if (decrease) {\r\n      _decreaseCellSpan(map, decrease, 'colspan', 0, map.length - 1, min_j, max_j)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove rowspan attribute.\r\n   */\r\n  function _updateRowspan(min_i, max_i, $table) {\r\n    let i\r\n    let j\r\n    let k\r\n    let first_span\r\n    let span\r\n    let decrease = 0\r\n\r\n    // Create a table map.\r\n    const map = _tableMap($table)\r\n\r\n    // A row might have been deleted.\r\n    max_i = Math.min(max_i, map.length - 1)\r\n\r\n    // If max_i and min_i are the same, then only one row is selected and rowspan is preserved.\r\n    if (max_i > min_i) {\r\n      // Find out how much we should decrease rowspan.\r\n      // Parsing only the first column is enough.\r\n      for (i = min_i; i <= max_i; i++) {\r\n\r\n        // This cell has rowspan and has already been checked.\r\n        if (i > min_i && map[i][0] == map[i - 1][0]) {\r\n          continue\r\n        }\r\n\r\n        // Current cell rowspan\r\n        first_span = Math.min(parseInt(map[i][0].getAttribute('rowspan'), 10) || 1, max_i - min_i + 1)\r\n\r\n        // Cell has rowspan between min_i and max_i.\r\n        /* i + 1 will never exceed the number of rows in a table.\r\n         * A rowspan is detected before the last row and all next cells on that column are skipped.\r\n         */\r\n        if (first_span > 1 && map[i][0] == map[i + 1][0]) {\r\n\r\n          // The value we should decrease rowspan with.\r\n          decrease = first_span - 1\r\n\r\n          // Check all columns on the current row.\r\n          // We found a rowspan on the first column (j = 0), continue with second column (j = 1).\r\n          for (j = 1; j < map[0].length; j++) {\r\n\r\n            // This cell has colspan and has already been checked.\r\n            if (map[i][j] == map[i][j - 1]) {\r\n              continue\r\n            }\r\n\r\n            // Look for a rowspan on the same rows.\r\n            for (k = i; k < i + first_span; k++) {\r\n              span = parseInt(map[k][j].getAttribute('rowspan'), 10) || 1\r\n\r\n              // There are other cells with rowspan on this row.\r\n              /* k + 1 will never exceed the number of rows in a table.\r\n               * A rowspan is detected before the last row and all next cells on that column are skipped.\r\n               */\r\n              if (span > 1 && map[k][j] == map[k + 1][j]) {\r\n                decrease = Math.min(decrease, span - 1)\r\n\r\n                // Skip rowspan.\r\n                k += decrease\r\n              }\r\n              else {\r\n                decrease = Math.max(0, decrease - 1)\r\n\r\n                // Stop if decrease reaches 0.\r\n                if (!decrease) {\r\n                  break\r\n                }\r\n              }\r\n            }\r\n\r\n            // Stop looking on the next columns if decrease reaches 0.\r\n            if (!decrease) {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update rowspan attribute.\r\n    if (decrease) {\r\n      _decreaseCellSpan(map, decrease, 'rowspan', min_i, max_i, 0, map[0].length - 1)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Decrease the colspan or rowspan with the amount specified.\r\n   */\r\n  function _decreaseCellSpan(map, decrease, span_type, min_i, max_i, min_j, max_j) {\r\n\r\n    // Update span attribute.\r\n    let i\r\n    let j\r\n    let span\r\n\r\n    // Go only through lines and columns that need to be updated.\r\n    for (i = min_i; i <= max_i; i++) {\r\n      for (j = min_j; j <= max_j; j++) {\r\n\r\n        // This cell has rowspan or colspan and has already been checked.\r\n        if ((i > min_i && map[i][j] == map[i - 1][j]) || (j > min_j && map[i][j] == map[i][j - 1])) {\r\n          continue\r\n        }\r\n\r\n        span = parseInt(map[i][j].getAttribute(span_type), 10) || 1\r\n\r\n        // Update cell span.\r\n        if (span > 1) {\r\n          if (span - decrease > 1) map[i][j].setAttribute(span_type, span - decrease)\r\n          else map[i][j].removeAttribute(span_type)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove colspan and rowspan attributes.\r\n   */\r\n  function _updateCellSpan(min_i, max_i, min_j, max_j, $table) {\r\n    _updateRowspan(min_i, max_i, $table)\r\n    _updateColspan(min_j, max_j, $table)\r\n  }\r\n\r\n  /*\r\n   * Merge selected cells method.\r\n   */\r\n  function mergeCells() {\r\n\r\n    // We have more than one cell selected in a table. Cannot merge td and th.\r\n    if (selectedCells().length > 1 && (editor.$el.find('th.fr-selected-cell').length === 0 || editor.$el.find('td.fr-selected-cell').length === 0)) {\r\n\r\n      _removeKeyboardSelectionHandlers()\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected cells\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      let i\r\n      let $cell\r\n      const cells = editor.$el.find('.fr-selected-cell')\r\n      const $first_cell = $(cells[0])\r\n      const $first_row = $first_cell.parent()\r\n      const first_row_cells = $first_row.find('.fr-selected-cell')\r\n      const $current_table = $first_cell.closest('table')\r\n      let content = $first_cell.html()\r\n      let width = 0\r\n\r\n      // Update cell width.\r\n      for (i = 0; i < first_row_cells.length; i++) {\r\n        width += $(first_row_cells[i]).outerWidth()\r\n      }\r\n\r\n      // Width might exceed 100% due to cell borders.\r\n      $first_cell.css('width', Math.min(100, (width / $current_table.outerWidth() * 100)).toFixed(4) + '%')\r\n\r\n      // Set the colspan for the merged cells.\r\n      if (selection.min_j < selection.max_j) {\r\n        $first_cell.attr('colspan', selection.max_j - selection.min_j + 1)\r\n      }\r\n\r\n      // Set the rowspan for the merged cells.\r\n      if (selection.min_i < selection.max_i) {\r\n        $first_cell.attr('rowspan', selection.max_i - selection.min_i + 1)\r\n      }\r\n\r\n      // Go through all selected cells to merge their content.\r\n      for (i = 1; i < cells.length; i++) {\r\n        $cell = $(cells[i])\r\n\r\n        // If cell is empty, don't add only <br> tags.\r\n        if ($cell.html() != '<br>' && $cell.html() !== '') {\r\n          content += `<br>${$cell.html()}`\r\n        }\r\n\r\n        // Remove cell.\r\n        $cell.remove()\r\n      }\r\n\r\n      // Set the HTML content.\r\n      $first_cell.html(content)\r\n      editor.selection.setAtEnd($first_cell.get(0))\r\n      editor.selection.restore()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n\r\n      // Update rowspan before removing empty rows (otherwise table map is not correct).\r\n      _updateRowspan(selection.min_i, selection.max_i, $current_table)\r\n\r\n      // Merge is done, check if we have empty trs to clean.\r\n      const empty_trs = $current_table.find('tr:empty')\r\n\r\n      for (i = empty_trs.length - 1; i >= 0; i--) {\r\n        $(empty_trs[i]).remove()\r\n      }\r\n\r\n      // Update colspan after removing empty rows and updating rowspan.\r\n      _updateColspan(selection.min_j, selection.max_j, $current_table)\r\n\r\n      // Reposition table edit popup.\r\n      _showEditPopup()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Split cell horizontally method.\r\n   */\r\n  function splitCellHorizontally() {\r\n\r\n    // We have only one cell selected in a table.\r\n    if (selectedCells().length == 1) {\r\n      const $selected_cell = editor.$el.find('.fr-selected-cell')\r\n      const $current_row = $selected_cell.parent()\r\n      const $current_table = $selected_cell.closest('table')\r\n      const current_rowspan = parseInt($selected_cell.attr('rowspan'), 10)\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n      const cell_origin = _cellOrigin($selected_cell.get(0), map)\r\n\r\n      // Create new td.\r\n      const $new_td = $selected_cell.clone().html('<br>')\r\n\r\n      // Cell has rowspan.\r\n      if (current_rowspan > 1) {\r\n\r\n        // Split current cell's rowspan.\r\n        const new_rowspan = Math.ceil(current_rowspan / 2)\r\n\r\n        if (new_rowspan > 1) {\r\n          $selected_cell.attr('rowspan', new_rowspan)\r\n        }\r\n        else {\r\n          $selected_cell.removeAttr('rowspan')\r\n        }\r\n\r\n        // Update new td's rowspan.\r\n        if (current_rowspan - new_rowspan > 1) {\r\n          $new_td.attr('rowspan', current_rowspan - new_rowspan)\r\n        }\r\n        else {\r\n          $new_td.removeAttr('rowspan')\r\n        }\r\n\r\n        // Find where we should insert the new td.\r\n        const row = cell_origin.row + new_rowspan\r\n        let col = cell_origin.col === 0 ? cell_origin.col : cell_origin.col - 1\r\n\r\n        // Go back until we find a td on this row. We might have colspans and rowspans.\r\n        while (col >= 0 && (map[row][col] == map[row][col - 1] || (row > 0 && map[row][col] == map[row - 1][col]))) {\r\n          col--\r\n        }\r\n\r\n        if (col == -1) {\r\n\r\n          // We couldn't find a previous td on this row. Prepend the new td.\r\n          // $($current_table.find('tr').not($current_table.find('table tr')).get(row)).prepend($new_td)\r\n          // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n          // therefore trying diff way to fetch the table's own rows\r\n          $($current_table.find('tr').not($current_table.find('> table tr')).get(row)).prepend($new_td);\r\n\r\n\r\n        }\r\n        else {\r\n          if($(map[row][col])[0].parentNode) {\r\n            $(map[row][col])[0].insertAdjacentElement('afterend', $new_td[0])\r\n          }\r\n        }\r\n\r\n      }\r\n      else {\r\n\r\n        // Add new row bellow with only one cell.\r\n        const $row = $(document.createElement('tr')).append($new_td)\r\n        let i\r\n\r\n        // Increase rowspan for all cells on the current row.\r\n        for (i = 0; i < map[0].length; i++) {\r\n\r\n          // Don't do this twice if we have a colspan.\r\n          if (i === 0 || map[cell_origin.row][i] != map[cell_origin.row][i - 1]) {\r\n            const $cell = $(map[cell_origin.row][i])\r\n\r\n            if (!$cell.is($selected_cell)) {\r\n              $cell.attr('rowspan', (parseInt($cell.attr('rowspan'), 10) || 1) + 1)\r\n            }\r\n          }\r\n        }\r\n\r\n        if($current_row[0].parentNode) {\r\n          $current_row[0].insertAdjacentElement('afterend', $row[0])\r\n        }\r\n      }\r\n\r\n      // Remove selection\r\n      _removeSelection()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Split cell vertically method.\r\n   */\r\n  function splitCellVertically() {\r\n\r\n    // We have only one cell selected in a table.\r\n    if (selectedCells().length == 1) {\r\n      const $selected_cell = editor.$el.find('.fr-selected-cell')\r\n      const current_colspan = parseInt($selected_cell.attr('colspan'), 10) || 1\r\n      const parent_width = $selected_cell.parent().outerWidth()\r\n      let width = $selected_cell.outerWidth()\r\n\r\n      // Create new td.\r\n      const $new_td = $selected_cell.clone().html('<br>')\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n      const cell_origin = _cellOrigin($selected_cell.get(0), map)\r\n\r\n      if (current_colspan > 1) {\r\n\r\n        // Split current colspan.\r\n        const new_colspan = Math.ceil(current_colspan / 2)\r\n\r\n        width = _columnsWidth(cell_origin.col, cell_origin.col + new_colspan - 1, map) / parent_width * 100\r\n        const new_width = _columnsWidth(cell_origin.col + new_colspan, cell_origin.col + current_colspan - 1, map) / parent_width * 100\r\n\r\n        // Update colspan for current cell.\r\n        if (new_colspan > 1) {\r\n          $selected_cell.attr('colspan', new_colspan)\r\n        }\r\n        else {\r\n          $selected_cell.removeAttr('colspan')\r\n        }\r\n\r\n        // Update new td's colspan.\r\n        if (current_colspan - new_colspan > 1) {\r\n          $new_td.attr('colspan', current_colspan - new_colspan)\r\n        }\r\n        else {\r\n          $new_td.removeAttr('colspan')\r\n        }\r\n\r\n        // Update cell width.\r\n        $selected_cell.css('width', width.toFixed(4) + '%')\r\n        $new_td.css('width', new_width.toFixed(4) + '%')\r\n\r\n        // Increase colspan for all cells on the current column.\r\n      }\r\n      else {\r\n        let i\r\n\r\n        for (i = 0; i < map.length; i++) {\r\n\r\n          // Don't do this twice if we have a rowspan.\r\n          if (i === 0 || map[i][cell_origin.col] != map[i - 1][cell_origin.col]) {\r\n            const $cell = $(map[i][cell_origin.col])\r\n\r\n            if (!$cell.is($selected_cell)) {\r\n              const colspan = (parseInt($cell.attr('colspan'), 10) || 1) + 1\r\n              $cell.attr('colspan', colspan)\r\n            }\r\n          }\r\n        }\r\n\r\n        // Update cell width.\r\n        width = width / parent_width * 100 / 2\r\n\r\n        $selected_cell.css('width', `${width.toFixed(4)}%`)\r\n        $new_td.css('width', `${width.toFixed(4)}%`)\r\n      }\r\n\r\n      // Add a new td after the current one.\r\n      if($selected_cell[0].parentNode) {\r\n        $selected_cell[0].insertAdjacentElement('afterend', $new_td[0])\r\n      }\r\n\r\n      // Remove selection\r\n      _removeSelection()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Set background color to selected cells.\r\n   */\r\n  function setBackground(color) {\r\n    const $selected_cells = editor.$el.find('.fr-selected-cell')\r\n\r\n    // Set background  color.\r\n    if (color != 'REMOVE') {\r\n      $selected_cells.css('background-color', editor.helpers.HEXtoRGB(color))\r\n    }\r\n\r\n    // Remove background color.\r\n    else {\r\n      $selected_cells.css('background-color', '')\r\n    }\r\n\r\n    _showEditPopup()\r\n  }\r\n\r\n  /*\r\n   * Set vertical align to selected cells.\r\n   */\r\n  function verticalAlign(val) {\r\n    editor.$el.find('.fr-selected-cell').css('vertical-align', val)\r\n  }\r\n\r\n  /*\r\n   * Apply horizontal alignment to selected cells.\r\n   */\r\n  function horizontalAlign(val) {\r\n    editor.$el.find('.fr-selected-cell').css('text-align', val)\r\n  }\r\n\r\n  /**\r\n   * Apply specific style to selected table or selected cells.\r\n   * val              class to apply.\r\n   * obj              table or selected cells.\r\n   * multiple_styles  editor.opts.tableStyles or editor.opts.tableCellStyles.\r\n   * style            editor.opts.tableStyles or editor.opts.tableCellStyles\r\n   */\r\n  function applyStyle(val, obj, multiple_styles, styles) {\r\n    if (obj.length > 0) {\r\n\r\n      // Remove multiple styles.\r\n      if (!multiple_styles) {\r\n        const classes = Object.keys(styles)\r\n        classes.splice(classes.indexOf(val), 1)\r\n        obj.removeClass(classes.join(' '))\r\n      }\r\n\r\n      obj.toggleClass(val)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Create a table map.\r\n   */\r\n  function _tableMap($table) {\r\n    $table = $table || null\r\n\r\n    const map = []\r\n\r\n    if ($table == null && selectedCells().length > 0) {\r\n      $table = selectedTable()\r\n    }\r\n\r\n    if ($table) {\r\n      $table.findVisible('tr').not($table.find('> table tr')).each(function (row, tr) {\r\n        const $tr = $(tr)\r\n\r\n        let c_index = 0\r\n        $tr.find('> th, > td').each(function (col, td) {\r\n          const $td = $(td)\r\n          const cspan = parseInt($td.attr('colspan'), 10) || 1\r\n          const rspan = parseInt($td.attr('rowspan'), 10) || 1\r\n\r\n          for (let i = row; i < row + rspan; i++) {\r\n            for (let j = c_index; j < c_index + cspan; j++) {\r\n              if (!map[i]) map[i] = []\r\n\r\n              if (!map[i][j]) {\r\n                map[i][j] = td\r\n              }\r\n              else {\r\n                c_index++\r\n              }\r\n            }\r\n          }\r\n\r\n          c_index += cspan\r\n        })\r\n      })\r\n    }\r\n\r\n    return map\r\n  }\r\n\r\n  /*\r\n   * Get the i, j coordinates of a cell in the table map.\r\n   * These are the coordinates where the cell starts.\r\n   */\r\n  function _cellOrigin(td, map) {\r\n    for (let i = 0; i < map.length; i++) {\r\n      for (let j = 0; j < map[i].length; j++) {\r\n        if (map[i][j] == td) {\r\n          return {\r\n            row: i,\r\n            col: j\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the i, j coordinates where a cell ends in the table map.\r\n   */\r\n  function _cellEnds(origin_i, origin_j, map) {\r\n    let max_i = origin_i + 1\r\n    let max_j = origin_j + 1\r\n\r\n    // Compute max_i\r\n    while (max_i < map.length) {\r\n      if (map[max_i][origin_j] != map[origin_i][origin_j]) {\r\n        max_i--\r\n        break\r\n      }\r\n\r\n      max_i++\r\n    }\r\n\r\n    if (max_i == map.length) {\r\n      max_i--\r\n    }\r\n\r\n    // Compute max_j\r\n    while (max_j < map[origin_i].length) {\r\n      if (map[origin_i][max_j] != map[origin_i][origin_j]) {\r\n        max_j--\r\n        break\r\n      }\r\n\r\n      max_j++\r\n    }\r\n\r\n    if (max_j == map[origin_i].length) {\r\n      max_j--\r\n    }\r\n\r\n    return {\r\n      row: max_i,\r\n      col: max_j\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove handler classes that are used to select table cells with keyboard.\r\n   */\r\n  function _removeKeyboardSelectionHandlers() {\r\n    if (editor.el.querySelector('.fr-cell-fixed')) {\r\n      editor.el.querySelector('.fr-cell-fixed').classList.remove('fr-cell-fixed')\r\n    }\r\n\r\n    if (editor.el.querySelector('.fr-cell-handler')) {\r\n      editor.el.querySelector('.fr-cell-handler').classList.remove('fr-cell-handler')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove selection from cells.\r\n   */\r\n  function _removeSelection() {\r\n    const cells = editor.$el.find('.fr-selected-cell')\r\n\r\n    if (cells.length > 0) {\r\n\r\n      // Remove selection.\r\n      cells.each(function () {\r\n        const $cell = $(this)\r\n\r\n        $cell.removeClass('fr-selected-cell')\r\n\r\n        if ($cell.attr('class') === '') {\r\n          $cell.removeAttr('class')\r\n        }\r\n      })\r\n    }\r\n\r\n    _removeKeyboardSelectionHandlers()\r\n  }\r\n\r\n  /*\r\n   * Clear selection to prevent Firefox cell selection.\r\n   */\r\n  function _clearSelection() {\r\n    editor.events.disableBlur()\r\n    editor.selection.clear()\r\n\r\n    // Prevent text selection while selecting multiple cells.\r\n    // Happens in Chrome.\r\n    editor.$el.addClass('fr-no-selection')\r\n\r\n    // Cursor will not appear if we don't make blur.\r\n    editor.$el.blur()\r\n    editor.events.enableBlur()\r\n  }\r\n\r\n  /*\r\n   * Get current selected cells coordintates.\r\n   */\r\n  function _currentSelection(map) {\r\n    const cells = editor.$el.find('.fr-selected-cell')\r\n    if (cells.length > 0) {\r\n      let min_i = map.length\r\n      let max_i = 0\r\n      let min_j = map[0].length\r\n      let max_j = 0\r\n      let i\r\n\r\n      for (i = 0; i < cells.length; i++) {\r\n        const cellOrigin = _cellOrigin(cells[i], map)\r\n        const cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        min_i = Math.min(cellOrigin.row, min_i)\r\n        max_i = Math.max(cellEnd.row, max_i)\r\n        min_j = Math.min(cellOrigin.col, min_j)\r\n        max_j = Math.max(cellEnd.col, max_j)\r\n      }\r\n\r\n      return {\r\n        min_i: min_i,\r\n        max_i: max_i,\r\n        min_j: min_j,\r\n        max_j: max_j\r\n      }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Minimum and maximum coordinates for the selection in the table map.\r\n   */\r\n  function _selectionLimits(min_i, max_i, min_j, max_j, map) {\r\n    let first_i = min_i\r\n    let last_i = max_i\r\n    let first_j = min_j\r\n    let last_j = max_j\r\n    let i\r\n    let j\r\n    let cellOrigin\r\n    let cellEnd\r\n\r\n    // Go through first and last columns.\r\n    for (i = first_i; i <= last_i; i++) {\r\n\r\n      // First column.\r\n      if ((parseInt($(map[i][first_j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[i][first_j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[i][first_j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n\r\n      // Last column.\r\n      if ((parseInt($(map[i][last_j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[i][last_j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[i][last_j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n    }\r\n\r\n    // Go through first and last rows.\r\n    for (j = first_j; j <= last_j; j++) {\r\n\r\n      // First row.\r\n      if ((parseInt($(map[first_i][j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[first_i][j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[first_i][j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n\r\n      // Last column.\r\n      if ((parseInt($(map[last_i][j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[last_i][j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[last_i][j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n    }\r\n\r\n    if (first_i == min_i && last_i == max_i && first_j == min_j && last_j == max_j) {\r\n      return {\r\n        min_i: min_i,\r\n        max_i: max_i,\r\n        min_j: min_j,\r\n        max_j: max_j\r\n      }\r\n\r\n    }\r\n    else {\r\n      return _selectionLimits(first_i, last_i, first_j, last_j, map)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the left and right offset position for the current selection.\r\n   */\r\n  function _selectionOffset(map) {\r\n    const selection = _currentSelection(map)\r\n\r\n    // Return if no selected item\r\n    if(selection == null) {\r\n      return\r\n    }\r\n    \r\n    // Top left cell.\r\n    const $tl = $(map[selection.min_i][selection.min_j])\r\n\r\n    // Top right cell.\r\n    const $tr = $(map[selection.min_i][selection.max_j])\r\n\r\n    // Bottom left cell.\r\n    const $bl = $(map[selection.max_i][selection.min_j])\r\n\r\n    const left = $tl.length && $tl.offset().left\r\n    const right = $tr.length && $tr.offset().left + $tr.outerWidth()\r\n    const top = $tl.length && $tl.offset().top\r\n    const bottom = $bl.length && $bl.offset().top + $bl.outerHeight()\r\n\r\n    return {\r\n      left: left,\r\n      right: right,\r\n      top: top,\r\n      bottom: bottom\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Select table cells.\r\n   * firstCell is either the top left corner or the fr-cell-fixed corner of the selection.\r\n   * lastCell is either the bottom right corner ot the fr-cell-handler of the selection.\r\n   */\r\n  function selectCells(firstCell, lastCell) {\r\n\r\n    // If the first and last cells are the same then just select it.\r\n    if ($(firstCell).is(lastCell)) {\r\n\r\n      // Remove previous selection.\r\n      _removeSelection()\r\n\r\n      $(firstCell).addClass('fr-selected-cell')\r\n    }\r\n\r\n    // Select multiple cells.\r\n    else {\r\n      // Prevent Firefox cell selection.\r\n      _clearSelection()\r\n\r\n      // Turn editor toolbar off.\r\n      editor.edit.off()\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get first and last cell's i and j map coordinates.\r\n      const firstCellOrigin = _cellOrigin(firstCell, map)\r\n      const lastCellOrigin = _cellOrigin(lastCell, map)\r\n\r\n      // Some cells between these coordinates might have colspan or rowspan.\r\n      // The selected area exceeds first and last cells' coordinates.\r\n      const limits = _selectionLimits(Math.min(firstCellOrigin.row, lastCellOrigin.row),\r\n        Math.max(firstCellOrigin.row, lastCellOrigin.row),\r\n        Math.min(firstCellOrigin.col, lastCellOrigin.col),\r\n        Math.max(firstCellOrigin.col, lastCellOrigin.col),\r\n        map)\r\n\r\n      // Remove previous selection.\r\n      _removeSelection()\r\n\r\n      // We always need to set the selection handler classes as user may use keyboard to select at anytime.\r\n      firstCell.classList.add('fr-cell-fixed')\r\n      lastCell.classList.add('fr-cell-handler')\r\n\r\n      // Select all cells between the first and last cell.\r\n      for (let i = limits.min_i; i <= limits.max_i; i++) {\r\n        for (let j = limits.min_j; j <= limits.max_j; j++) {\r\n\r\n          // Skip the cell if it's parent table is different from first clicked cell's parent table\r\n          if (!$(firstCell).closest('table').is($(map[i][j]).closest('table'))) continue\r\n          $(map[i][j]).addClass('fr-selected-cell')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the cell under the mouse cursor.\r\n   */\r\n  function _getCellUnder(e) {\r\n    let cell = null\r\n    const $target = $(e.target)\r\n\r\n    if (e.target.tagName == 'TD' || e.target.tagName == 'TH') {\r\n      cell = e.target\r\n    }\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1779\r\n    else if ($target.closest('th', $target.closest('thead')[0]).length > 0) {\r\n      cell = $target.closest('th', $target.closest('thead')[0]).get(0)\r\n    }\r\n    else if ($target.closest('td', $target.closest('tr')[0]).length > 0) {\r\n      cell = $target.closest('td', $target.closest('tr')[0]).get(0)\r\n    }\r\n    \r\n\r\n    // Cell should reside inside editor.\r\n    if (editor.$el.html.toString().search(cell) === -1) return null\r\n\r\n    return cell\r\n  }\r\n\r\n  /*\r\n   * Stop table cell editing and allow text editing.\r\n   */\r\n  function _stopEdit() {\r\n\r\n    // Clear previous selection.\r\n    _removeSelection()\r\n\r\n    // Hide table edit popup.\r\n    editor.popups.hide('table.edit')\r\n  }\r\n\r\n  /*\r\n   * Mark that mouse is down.\r\n   */\r\n  function _mouseDown(e) {\r\n    const cell = _getCellUnder(e)\r\n\r\n    if ($(cell).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    // Stop table editing if user clicks outside the table.\r\n    if (selectedCells().length > 0 && !cell) {\r\n      _stopEdit()\r\n    }\r\n\r\n    // Only do mouseDown if the editor is not disabled by user.\r\n    if (!editor.edit.isDisabled() || editor.popups.isVisible('table.edit')) {\r\n\r\n      // On left click.\r\n      if (e.which == 1 && !(e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) {\r\n        mouseDownFlag = true\r\n\r\n        // User clicked on a table cell.\r\n        if (cell) {\r\n\r\n          // We always have to clear previous selection except when using shift key to select multiple cells.\r\n          if (selectedCells().length > 0 && !e.shiftKey) {\r\n            _stopEdit()\r\n          }\r\n\r\n          e.stopPropagation()\r\n\r\n          editor.events.trigger('image.hideResizer')\r\n          editor.events.trigger('video.hideResizer')\r\n\r\n          // Keep record of left mouse click being down\r\n          mouseDownCellFlag = true\r\n\r\n          const tag_name = cell.tagName.toLowerCase()\r\n\r\n          // Select multiple cells using Shift key\r\n          if (e.shiftKey && editor.$el.find(`${tag_name}.fr-selected-cell`).length > 0) {\r\n\r\n            // Cells must be in the same table.\r\n            if ($(editor.$el.find(`${tag_name}.fr-selected-cell`).closest('table')).is($(cell).closest('table'))) {\r\n\r\n              // Select cells between.\r\n              selectCells(mouseDownCell, cell)\r\n\r\n              // Do nothing if cells are not in the same table.\r\n            }\r\n            else {\r\n\r\n              // Prevent Firefox selection.\r\n              _clearSelection()\r\n            }\r\n          }\r\n\r\n          else {\r\n\r\n            // Prevent Firefox selection for ctrl / cmd key.\r\n            // https://github.com/froala/wysiwyg-editor/issues/1323:\r\n            //  - we have more than one cell selected or\r\n            //  - selection is starting in another cell than the one we clicked on.\r\n            if ((editor.keys.ctrlKey(e) || e.shiftKey) && (selectedCells().length > 1 || ($(cell).find(editor.selection.element()).length === 0 && !$(cell).is(editor.selection.element())))) {\r\n              _clearSelection()\r\n            }\r\n\r\n            // Save cell where mouse has been clicked\r\n            mouseDownCell = cell\r\n\r\n            // Select cell.\r\n            if (editor.opts.tableEditButtons.length > 0) {\r\n              selectCells(mouseDownCell, mouseDownCell)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // On right click stop table editing.\r\n      else if ((e.which == 3 || (e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) && cell) {\r\n        _stopEdit()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is no longer pressed.\r\n   */\r\n  function _mouseUp(e) {\r\n\r\n    // Mouse down started in a popup and ends in the editor.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3190\r\n    // Toolbar freezes with checkboxes inside table\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n    if (!editor.edit.isDisabled() && editor.popups.areVisible()) {\r\n      return true;\r\n    }\r\n\r\n    // User clicked somewhere else in the editor (except the toolbar).\r\n    // We need this because mouse down is not triggered outside the editor.\r\n    if (!mouseDownCellFlag && !editor.$tb.is(e.target) && !editor.$tb.is($(e.target).closest('.fr-toolbar'))) {\r\n      if (selectedCells().length > 0) {\r\n        editor.toolbar.enable()\r\n      }\r\n\r\n      _removeSelection()\r\n    }\r\n\r\n    // On left click.\r\n    if (e.which == 1 && !(e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) {\r\n      mouseDownFlag = false\r\n\r\n      // Mouse down was in a table cell.\r\n      if (mouseDownCellFlag) {\r\n\r\n        // Left click is no longer pressed.\r\n        mouseDownCellFlag = false\r\n\r\n        const cell = _getCellUnder(e)\r\n\r\n        // If we have one selected cell and mouse is lifted somewhere else.\r\n        if (!cell && selectedCells().length == 1) {\r\n\r\n          // We have a text selection and not cell selection.\r\n          _removeSelection()\r\n        }\r\n\r\n        // If there are selected cells then show table edit popup.\r\n        else if (selectedCells().length > 0) {\r\n          if (editor.selection.isCollapsed()) {\r\n            _showEditPopup()\r\n          }\r\n\r\n          // No text selection.\r\n          else {\r\n            _removeSelection()\r\n            editor.edit.on();\r\n          }\r\n        }\r\n\r\n        // Enable editing if the mouse was clicked inside a cell but no cells selected.\r\n        else if (!selectedCells().length) {\r\n        // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n        }\r\n      }\r\n\r\n      // Resizing stops.\r\n      if (resizingFlag) {\r\n        resizingFlag = false\r\n\r\n        $resizer.removeClass('fr-moving')\r\n\r\n        // Allow text selection.\r\n        editor.$el.removeClass('fr-no-selection')\r\n        editor.edit.on()\r\n\r\n        // Set release Y coordinate.\r\n        let left = parseFloat($resizer.css('left')) + editor.opts.tableResizerOffset + editor.$wp.offset().left\r\n\r\n        if (editor.opts.iframe) {\r\n          left -= editor.$iframe.offset().left\r\n        }\r\n        $resizer.data('release-position', left)\r\n\r\n        // Clear resizing limits.\r\n        $resizer.removeData('max-left')\r\n        $resizer.removeData('max-right')\r\n\r\n        // Resize.\r\n        _resize(e)\r\n\r\n        // Hide resizer.\r\n        _hideResizer()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * User drags mouse over multiple cells to select them.\r\n   */\r\n  function _mouseEnter(e) {\r\n\r\n    // Check if the mouse is moving inside the same cell only and return control as it cannot be considered as mouse enter.\r\n    if ($(e.currentTarget).is($(e.originalEvent.relatedTarget)) ||\r\n      e.currentTarget.contains(e.originalEvent.relatedTarget) ||\r\n      (e.originalEvent.relatedTarget && e.originalEvent.relatedTarget.contains(e.currentTarget))) {\r\n      return\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n    editor.events.$on($('input'), 'click',_inputOnClick)\r\n    if (mouseDownCellFlag === true && editor.opts.tableEditButtons.length > 0) {\r\n      const $cell = $(e.currentTarget)\r\n\r\n      // Cells should be in the same table.\r\n      if ($cell.closest('table').is(selectedTable())) {\r\n\r\n        // Don't select both ths and tds.\r\n        if (e.currentTarget.tagName == 'TD' && editor.$el.find('th.fr-selected-cell').length === 0) {\r\n\r\n          // Select cells between.\r\n          selectCells(mouseDownCell, e.currentTarget)\r\n\r\n          return\r\n        }\r\n\r\n        else if (e.currentTarget.tagName == 'TH' && editor.$el.find('td.fr-selected-cell').length === 0) {\r\n\r\n          // Select cells between.\r\n          selectCells(mouseDownCell, e.currentTarget)\r\n\r\n          return\r\n        }\r\n      }\r\n\r\n      // Prevent firefox selection.\r\n      _clearSelection()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor in a nested table.\r\n   */\r\n  function _moveInNestedTable(cell, direction) {\r\n    let table = cell\r\n\r\n    // Get parent table (editor might be initialized inside cell).\r\n    while (table && table.tagName != 'TABLE' && table.parentNode != editor.el) {\r\n      table = table.parentNode\r\n    }\r\n\r\n    if (table && table.tagName == 'TABLE') {\r\n      const new_map = _tableMap($(table))\r\n\r\n      // Move up in the parent table.\r\n      if (direction == 'up') _moveUp(_cellOrigin(cell, new_map), table, new_map)\r\n      else if (direction == 'down') _moveDown(_cellOrigin(cell, new_map), table, new_map)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor up or down outside table.\r\n   */\r\n  function _moveWithArrows(origin, table, map, direction) {\r\n    let up = table\r\n    let sibling\r\n\r\n    // Look up in DOM for the previous or next element.\r\n    while (up != editor.el) {\r\n\r\n      // Nested table.\r\n      if (up.tagName == 'TD' || up.tagName == 'TH') {\r\n        break\r\n      }\r\n\r\n      // The table has a sibling element.\r\n      if (direction == 'up') sibling = up.previousElementSibling\r\n      else if (direction == 'down') sibling = up.nextElementSibling\r\n\r\n      if (sibling) {\r\n        break\r\n      }\r\n\r\n      // Table might be in a block tag.\r\n      up = up.parentNode\r\n    }\r\n\r\n    // We have another table (nested).\r\n    if (up.tagName == 'TD' || up.tagName == 'TH') {\r\n      _moveInNestedTable(up, direction)\r\n    }\r\n\r\n    // Table has a sibling.\r\n    else if (sibling) {\r\n      if (direction == 'up') editor.selection.setAtEnd(sibling)\r\n\r\n      if (direction == 'down') editor.selection.setAtStart(sibling)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor up while in table cell.\r\n   */\r\n  function _moveUp(origin, table, map) {\r\n    // If tribute container is opened, then cancel cursor movement on cells\r\n    if ($('.tribute-container').length > 0 && $('.tribute-container').css('display') != 'none'){\r\n      return\r\n    }\r\n\r\n    // Not the first line.\r\n    if (origin.row > 0) {\r\n      editor.selection.setAtEnd(map[origin.row - 1][origin.col])\r\n    }\r\n\r\n    // First line.\r\n    else {\r\n      _moveWithArrows(origin, table, map, 'up')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor down while in table cell.\r\n   */\r\n  function _moveDown(origin, table, map) {\r\n    // If tribute container is opened, then cancel cursor movement on cells\r\n    if ($('.tribute-container').length > 0 && $('.tribute-container').css('display') != 'none'){\r\n      return\r\n    }\r\n\r\n    // Cell might have rowspan.\r\n    const row = parseInt(map[origin.row][origin.col].getAttribute('rowspan'), 10) || 1\r\n\r\n    // Not the last line.\r\n    if (origin.row < map.length - row) {\r\n      editor.selection.setAtStart(map[origin.row + row][origin.col])\r\n    }\r\n\r\n    // Last line.\r\n    else {\r\n      _moveWithArrows(origin, table, map, 'down')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Using the arrow keys to move the cursor through the table will not select cells.\r\n   */\r\n  function _navigateWithArrows(e) {\r\n    const key_code = e.which\r\n\r\n    // Get current selection.\r\n    let sel = editor.selection.blocks()\r\n\r\n    if (sel.length) {\r\n      sel = sel[0]\r\n\r\n      // Selection should be in a table cell.\r\n      if (sel.tagName == 'TD' || sel.tagName == 'TH') {\r\n        let table = sel\r\n\r\n        // Get parent table (editor might be initialized inside cell).\r\n        while (table && table.tagName != 'TABLE' && table.parentNode != editor.el) {\r\n          table = table.parentNode\r\n        }\r\n\r\n        if (table && table.tagName == 'TABLE') {\r\n          if (FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_RIGHT == key_code || FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            if (selectedCells().length > 0) {\r\n              _stopEdit()\r\n            }\r\n\r\n            // Up and down in Webkit.\r\n            if (editor.browser.webkit && (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code)) {\r\n              const node = editor.selection.ranges(0).startContainer\r\n\r\n              if (node.nodeType == Node.TEXT_NODE &&\r\n                ((FE.KEYCODE.ARROW_UP == key_code && ((node.previousSibling && node.previousSibling.tagName !== 'BR') || (node.previousSibling && node.previousSibling.tagName === 'BR' && node.previousSibling.previousSibling)) ||\r\n                (FE.KEYCODE.ARROW_DOWN == key_code && ((node.nextSibling && node.nextSibling.tagName !== 'BR') || (node.nextSibling && node.nextSibling.tagName === 'BR' && node.nextSibling.nextSibling))\r\n                )))) {\r\n                return\r\n              }\r\n\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n\r\n              // Table map.\r\n              const map = _tableMap($(table))\r\n\r\n              // Current cell map coordinates.\r\n              const origin = _cellOrigin(sel, map)\r\n\r\n              // Arrow up\r\n              if (FE.KEYCODE.ARROW_UP == key_code) {\r\n                _moveUp(origin, table, map)\r\n              }\r\n\r\n              // Arrow down\r\n              else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n                _moveDown(origin, table, map)\r\n              }\r\n\r\n              // Update cursor position.\r\n              editor.selection.restore()\r\n\r\n              return false\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initilize table resizer.\r\n   */\r\n  function _initResizer() {\r\n\r\n    // Append resizer HTML to editor wrapper.\r\n    if (!editor.shared.$table_resizer) editor.shared.$table_resizer = $(document.createElement('div')).attr('class', 'fr-table-resizer').html('<div></div>')\r\n    $resizer = editor.shared.$table_resizer\r\n\r\n    // Resize table. Mousedown.\r\n    editor.events.$on($resizer, 'mousedown', function (e) {\r\n      if (!editor.core.sameInstance($resizer)) return true\r\n\r\n      // Stop table editing.\r\n      if (selectedCells().length > 0) {\r\n        _stopEdit()\r\n      }\r\n\r\n      // Resize table only using left click.\r\n      if (e.which == 1) {\r\n\r\n        // Save selection so that we can put cursor back at the end.\r\n        editor.selection.save()\r\n\r\n        resizingFlag = true\r\n\r\n        $resizer.addClass('fr-moving')\r\n\r\n        // Prevent text selection while dragging the table resizer.\r\n        _clearSelection()\r\n\r\n        // Turn editor toolbar off while resizing.\r\n        editor.edit.off()\r\n\r\n        // Show resizer.\r\n        $resizer.find('div').css('opacity', 1)\r\n\r\n        // Prevent selecting text when doing resize.\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Mousemove on table resizer.\r\n    editor.events.$on($resizer, 'mousemove', function (e) {\r\n      if (!editor.core.sameInstance($resizer)) return true\r\n\r\n      if (resizingFlag) {\r\n        if (editor.opts.iframe) {\r\n          e.pageX -= editor.$iframe.offset().left\r\n        }\r\n\r\n        _mouseMove(e)\r\n      }\r\n    })\r\n\r\n    // Editor destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $resizer.html('').removeData().remove()\r\n      $resizer = null\r\n    }, true)\r\n\r\n    editor.events.on('destroy', function () {\r\n      editor.$el.find('.fr-selected-cell').removeClass('fr-selected-cell')\r\n      $('body').first().append($resizer.hide())\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Also clears top and left values, so it doesn't interfer with the insert helper.\r\n   */\r\n  function _hideResizer() {\r\n    if ($resizer) {\r\n      $resizer.find('div').css('opacity', 0)\r\n      $resizer.css('top', 0)\r\n      $resizer.css('left', 0)\r\n      $resizer.css('height', 0)\r\n      $resizer.find('div').css('height', 0)\r\n      $resizer.hide()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide the insert helper.\r\n   */\r\n  function _hideInsertHelper() {\r\n    if ($insert_helper) $insert_helper.removeClass('fr-visible').css('left', '-9999px')\r\n  }\r\n\r\n  /*\r\n   * Place the table resizer between the columns where the mouse is.\r\n   */\r\n  function _placeResizer(e, tag_under) {\r\n    let $tag_under = $(tag_under)\r\n    const $table = $tag_under.closest('table')\r\n    const $table_parent = $table.parent()\r\n\r\n    // We might have another tag inside the table cell.\r\n    if (tag_under && (tag_under.tagName != 'TD' && tag_under.tagName != 'TH')) {\r\n      if ($tag_under.closest('td').length > 0) {\r\n        tag_under = $tag_under.closest('td')\r\n      }\r\n      else if ($tag_under.closest('th').length > 0) {\r\n        tag_under = $tag_under.closest('th')\r\n      }\r\n    }\r\n\r\n    // The tag should be a table cell (TD or TH).\r\n    if (tag_under && (tag_under.tagName == 'TD' || tag_under.tagName == 'TH')) {\r\n      $tag_under = $(tag_under)\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/786.\r\n      if (editor.$el.find($tag_under).length === 0) return false\r\n\r\n      // Tag's left and right coordinate.\r\n      const tag_left = $tag_under.offset().left - 1\r\n      const tag_right = tag_left + $tag_under.outerWidth()\r\n\r\n      // Only if the mouse is close enough to the left or right edges.\r\n      if (Math.abs(e.pageX - tag_left) <= editor.opts.tableResizerOffset ||\r\n        Math.abs(tag_right - e.pageX) <= editor.opts.tableResizerOffset) {\r\n\r\n        // Create a table map.\r\n        const map = _tableMap($table)\r\n        const tag_origin = _cellOrigin(tag_under, map)\r\n\r\n        const tag_end = _cellEnds(tag_origin.row, tag_origin.col, map)\r\n\r\n        // The column numbers from the map that have to be resized.\r\n        let first\r\n        let second\r\n\r\n        // Table resizer position and height.\r\n        const resizer_top = $table.offset().top\r\n        const resizer_height = $table.outerHeight() - 1\r\n        let resizer_left\r\n\r\n        // The left and right limits between which the resizer can be moved.\r\n        let max_left\r\n        let max_right\r\n\r\n        if (editor.opts.direction != 'rtl') {\r\n\r\n          // Mouse is near the cells's left margin.\r\n          if (e.pageX - tag_left <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_left\r\n\r\n            // Resize cells.\r\n            if (tag_origin.col > 0) {\r\n\r\n              // Left limit.\r\n              max_left = tag_left - _columnWidth(tag_origin.col - 1, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_left + _columnWidth(tag_origin.col, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_origin.col - 1\r\n              second = tag_origin.col\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = null\r\n              second = 0\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left - 1 - parseInt($table.css('margin-left'), 10)\r\n              max_right = $table.offset().left - 1 + $table.width() - map[0].length * editor.opts.tableResizingLimit\r\n            }\r\n          }\r\n\r\n          // Mouse is near the cell's right margin.\r\n          else if (tag_right - e.pageX <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left possition.\r\n            resizer_left = tag_right\r\n\r\n            // Check for next td.\r\n            if (tag_end.col < map[tag_end.row].length && map[tag_end.row][tag_end.col + 1]) {\r\n\r\n              // Left limit.\r\n              max_left = tag_right - _columnWidth(tag_end.col, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_right + _columnWidth(tag_end.col + 1, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = tag_end.col + 1\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = null\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left - 1 + map[0].length * editor.opts.tableResizingLimit\r\n              max_right = $table_parent.offset().left - 1 + $table_parent.width() + parseFloat($table_parent.css('padding-left'))\r\n            }\r\n          }\r\n        }\r\n\r\n        // RTL\r\n        else {\r\n\r\n          // Mouse is near the cell's right margin.\r\n          if (tag_right - e.pageX <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_right\r\n\r\n            // Resize cells.\r\n            if (tag_origin.col > 0) {\r\n\r\n              // Left limit.\r\n              max_left = tag_right - _columnWidth(tag_origin.col, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_right + _columnWidth(tag_origin.col - 1, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_origin.col\r\n              second = tag_origin.col - 1\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n              first = null\r\n              second = 0\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left + map[0].length * editor.opts.tableResizingLimit\r\n              max_right = $table_parent.offset().left - 1 + $table_parent.width() + parseFloat($table_parent.css('padding-left'))\r\n            }\r\n          }\r\n\r\n          // Mouse is near the cell's left margin.\r\n          else if (e.pageX - tag_left <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_left\r\n\r\n            // Check for next td.\r\n            if (tag_end.col < map[tag_end.row].length && map[tag_end.row][tag_end.col + 1]) {\r\n\r\n              // Left limit.\r\n              max_left = tag_left - _columnWidth(tag_end.col + 1, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_left + _columnWidth(tag_end.col, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col + 1\r\n              second = tag_end.col\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = null\r\n\r\n              // Resizer limits.\r\n              max_left = $table_parent.offset().left + parseFloat($table_parent.css('padding-left'))\r\n              max_right = $table.offset().left - 1 + $table.width() - map[0].length * editor.opts.tableResizingLimit\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!$resizer) _initResizer()\r\n\r\n        // Save table.\r\n        $resizer.data('table', $table)\r\n\r\n        // Save columns to resize.\r\n        $resizer.data('first', first)\r\n        $resizer.data('second', second)\r\n\r\n        $resizer.data('instance', editor)\r\n        editor.$wp.append($resizer)\r\n\r\n        let left = resizer_left - editor.win.pageXOffset - editor.opts.tableResizerOffset - editor.$wp.offset().left\r\n        let top = resizer_top - editor.$wp.offset().top + editor.$wp.scrollTop()\r\n\r\n        if (editor.opts.iframe) {\r\n          const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n          const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n          left += editor.$iframe.offset().left + iframePaddingLeft\r\n          top += editor.$iframe.offset().top + iframePaddingTop\r\n\r\n          max_left += editor.$iframe.offset().left\r\n          max_right += editor.$iframe.offset().left\r\n        }\r\n\r\n        // Set resizing limits.\r\n        $resizer.data('max-left', max_left)\r\n        $resizer.data('max-right', max_right)\r\n\r\n        // Initial position of the resizer\r\n        $resizer.data('origin', resizer_left - editor.win.pageXOffset)\r\n\r\n        // Set table resizer's top, left and height.\r\n        $resizer.css('top', top)\r\n        $resizer.css('left', left)\r\n        $resizer.css('height', resizer_height)\r\n        $resizer.find('div').css('height', resizer_height)\r\n\r\n        // Set padding according to tableResizerOffset.\r\n        $resizer.css('padding-left', editor.opts.tableResizerOffset)\r\n        $resizer.css('padding-right', editor.opts.tableResizerOffset)\r\n\r\n        // Show table resizer.\r\n        $resizer.show()\r\n      }\r\n\r\n      // Hide resizer when the mouse moves away from the cell's border.\r\n      else {\r\n        if (editor.core.sameInstance($resizer)) _hideResizer()\r\n      }\r\n    }\r\n\r\n    // Hide resizer if mouse is no longer over it.\r\n    else if ($resizer && $tag_under.get(0) != $resizer.get(0) && $tag_under.parent().get(0) != $resizer.get(0)) {\r\n      if (editor.core.sameInstance($resizer)) _hideResizer()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the insert column helper button.\r\n   */\r\n  function _showInsertColHelper(e, table) {\r\n    if (editor.$box.find('.fr-line-breaker').isVisible()) return false\r\n\r\n    // Insert Helper.\r\n    if (!$insert_helper) _initInsertHelper()\r\n\r\n    editor.$box.append($insert_helper)\r\n    $insert_helper.data('instance', editor)\r\n    const $table = $(table)\r\n    const $row = $table.find('tr').first()\r\n    const mouseX = e.pageX\r\n    let left = 0\r\n    let top = 0\r\n    \r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      left += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    // Check where the column should be inserted.\r\n    let btn_width\r\n\r\n    $row.find('th, td').each(function () {\r\n      const $td = $(this)\r\n\r\n      // Insert before this td.\r\n      if ($td.offset().left <= mouseX && mouseX < $td.offset().left + $td.outerWidth() / 2) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n        $insert_helper.css('top', top + $td.offset().top - editor.$box.offset().top - btn_width - 5)\r\n        $insert_helper.css('left', left + $td.offset().left - editor.$box.offset().left - btn_width / 2)\r\n        $insert_helper.data('selected-cell', $td)\r\n        $insert_helper.data('position', 'before')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n\r\n        // Insert after this td.\r\n      }\r\n      else if ($td.offset().left + $td.outerWidth() / 2 <= mouseX && mouseX < $td.offset().left + $td.outerWidth()) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $td.offset().top - editor.$box.offset().top - btn_width - 5)\r\n        $insert_helper.css('left', left + $td.offset().left - editor.$box.offset().left + $td.outerWidth() - btn_width / 2)\r\n        $insert_helper.data('selected-cell', $td)\r\n        $insert_helper.data('position', 'after')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Show the insert row helper button.\r\n   */\r\n  function _showInsertRowHelper(e, table) {\r\n    if (editor.$box.find('.fr-line-breaker').isVisible()) return false\r\n\r\n    if (!$insert_helper) _initInsertHelper()\r\n\r\n    editor.$box.append($insert_helper)\r\n    $insert_helper.data('instance', editor)\r\n    const $table = $(table)\r\n    const mouseY = e.pageY\r\n    let left = 0\r\n    let top = 0\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      left += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    // Check where the row should be inserted.\r\n    let btn_width\r\n\r\n    $table.find('tr').each(function () {\r\n      const $tr = $(this)\r\n\r\n      // Insert above this tr.\r\n      if ($tr.offset().top <= mouseY && mouseY < $tr.offset().top + $tr.outerHeight() / 2) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $tr.offset().top - editor.$box.offset().top - btn_width / 2)\r\n        $insert_helper.css('left', left + $tr.offset().left - editor.$box.offset().left - btn_width - 5)\r\n        $insert_helper.data('selected-cell', $tr.find('td').first())\r\n        $insert_helper.data('position', 'above')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n\r\n        // Insert below this tr.\r\n      }\r\n      else if ($tr.offset().top + $tr.outerHeight() / 2 <= mouseY && mouseY < $tr.offset().top + $tr.outerHeight()) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $tr.offset().top - editor.$box.offset().top + $tr.outerHeight() - btn_width / 2)\r\n        $insert_helper.css('left', left + $tr.offset().left - editor.$box.offset().left - btn_width - 5)\r\n        $insert_helper.data('selected-cell', $tr.find('td').first())\r\n        $insert_helper.data('position', 'below')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Check if should show the insert column / row helper button.\r\n   */\r\n  function _insertHelper(e, tag_under) {\r\n\r\n    // Don't show the insert helper if there are table cells selected.\r\n    if (selectedCells().length === 0) {\r\n      let i\r\n      let tag_below\r\n      let tag_right\r\n\r\n      // Tag is the editor element or body (inline toolbar). Look for closest tag bellow and at the right.\r\n      if (tag_under && (tag_under.tagName == 'HTML' || tag_under.tagName == 'BODY' || editor.node.isElement(tag_under))) {\r\n\r\n        // Look 1px down until a table tag is found or the insert helper offset is reached.\r\n        for (i = 1; i <= editor.opts.tableInsertHelperOffset; i++) {\r\n\r\n          // Look for tag below.\r\n          tag_below = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset + i)\r\n\r\n          // We're on tooltip.\r\n          if ($(tag_below).hasClass('fr-tooltip')) return true\r\n\r\n          // We found a tag bellow.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n          // Condition added to avoid showing insert helper when the table has contenteditable:false\r\n          if (tag_below && ((tag_below.tagName == 'TH' || tag_below.tagName == 'TD' || tag_below.tagName == 'TABLE') && ($(tag_below).parents('.fr-wrapper').length || editor.opts.iframe) && $(tag_below).closest('table').attr('contenteditable') != 'false')) {\r\n\r\n            // Show the insert column helper button.\r\n            _showInsertColHelper(e, $(tag_below).closest('table'))\r\n\r\n            return true\r\n          }\r\n\r\n          // Look for tag at the right.\r\n          tag_right = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset + i, e.pageY - editor.win.pageYOffset)\r\n\r\n          // We're on tooltip.\r\n          if ($(tag_right).hasClass('fr-tooltip')) return true\r\n\r\n          // We found a tag at the right.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n          // Condition added to avoid showing insert helper when the table has contenteditable:false\r\n          if (tag_right && ((tag_right.tagName == 'TH' || tag_right.tagName == 'TD' || tag_right.tagName == 'TABLE') && ($(tag_right).parents('.fr-wrapper').length || editor.opts.iframe)) && $(tag_right).closest('table').attr('contenteditable') != 'false') {\r\n\r\n            // Show the insert row helper button.\r\n            _showInsertRowHelper(e, $(tag_right).closest('table'))\r\n\r\n            return true\r\n          }\r\n        }\r\n      }\r\n\r\n      // Hide insert helper.\r\n      if (editor.core.sameInstance($insert_helper)) {\r\n        _hideInsertHelper()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Check tag under the mouse on mouse move.\r\n   */\r\n  function _tagUnder(e) {\r\n    mouseMoveTimer = null\r\n\r\n    // The tag under the mouse cursor.\r\n    const tag_under = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset)\r\n\r\n    // Place table resizer if necessary.\r\n    if (editor.opts.tableResizer && (!editor.popups.areVisible() || (editor.popups.areVisible() && editor.popups.isVisible('table.edit')))) {\r\n      _placeResizer(e, tag_under)\r\n    }\r\n\r\n    // Show the insert column / row helper button.\r\n    if (editor.opts.tableInsertHelper && !editor.popups.areVisible() && !(editor.$tb.hasClass('fr-inline') && editor.$tb.isVisible())) {\r\n      _insertHelper(e, tag_under)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Repositon the resizer if the user scrolls while resizing.\r\n   */\r\n  function _repositionResizer() {\r\n    if (resizingFlag) {\r\n      const $table = $resizer.data('table')\r\n      let top = $table.offset().top - editor.win.pageYOffset\r\n\r\n      if (editor.opts.iframe) {\r\n        const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n        top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n      }\r\n\r\n      $resizer.css('top', top)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Resize table method.\r\n   */\r\n  function _resize() {\r\n\r\n    // Resizer initial position.\r\n    const initial_positon = $resizer.data('origin')\r\n\r\n    // Resizer release position.\r\n    const release_position = $resizer.data('release-position')\r\n\r\n    // Do resize only if the resizer's position has changed.\r\n    if (initial_positon !== release_position) {\r\n\r\n      // Columns that have to be resized.\r\n      const first = $resizer.data('first')\r\n      const second = $resizer.data('second')\r\n\r\n      const $table = $resizer.data('table')\r\n      const table_width = $table.outerWidth()\r\n\r\n      if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n      // Resize columns and not the table.\r\n      if (first != null && second != null) {\r\n\r\n        // Create a table map.\r\n        const map = _tableMap($table)\r\n\r\n        // Got through all cells on these columns and get their initial width.\r\n        const first_widths = []\r\n        const first_percentages = []\r\n        const second_widths = []\r\n        const second_percentages = []\r\n        let i\r\n        let $first_cell\r\n        let $second_cell\r\n\r\n        // We must do this before updating widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          $first_cell = $(map[i][first])\r\n          $second_cell = $(map[i][second])\r\n\r\n          // Widths in px.\r\n          first_widths[i] = $first_cell.outerWidth()\r\n          second_widths[i] = $second_cell.outerWidth()\r\n\r\n          // Widths in percentages.\r\n          first_percentages[i] = first_widths[i] / table_width * 100\r\n          second_percentages[i] = second_widths[i] / table_width * 100\r\n        }\r\n\r\n        // Got through all cells on these columns and update their widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          $first_cell = $(map[i][first])\r\n          $second_cell = $(map[i][second])\r\n\r\n          // There is a colspan.\r\n          if (map[i][first] != map[i][second]) {\r\n            // New percentage for the first cell.\r\n            const first_cell_percentage = (first_percentages[i] * (first_widths[i] + release_position - initial_positon) / first_widths[i]).toFixed(4)\r\n\r\n            $first_cell.css('width', first_cell_percentage + '%')\r\n            $second_cell.css('width', (first_percentages[i] + second_percentages[i] - first_cell_percentage).toFixed(4) + '%')\r\n          }\r\n        }\r\n      }\r\n\r\n      // Resize the table.\r\n      else {\r\n        const $table_parent = $table.parent()\r\n        const table_percentage = table_width / $table_parent.width() * 100\r\n        const left_margin = (parseInt($table.css('margin-left'), 10) || 0) / $table_parent.width() * 100\r\n        const right_margin = (parseInt($table.css('margin-right'), 10) || 0) / $table_parent.width() * 100\r\n        let width\r\n\r\n        // Right border RTL or LTR.\r\n        if ((editor.opts.direction == 'rtl' && second === 0) || (editor.opts.direction != 'rtl' && second !== 0)) {\r\n          width = (table_width + release_position - initial_positon) / table_width * table_percentage\r\n          $table.css('margin-right', `calc(100% - ${Math.round(width).toFixed(4)}% - ${Math.round(left_margin).toFixed(4)}%)`)\r\n        }\r\n\r\n        // Left border RTL or LTR.\r\n        else if ((editor.opts.direction == 'rtl' && second !== 0) || (editor.opts.direction != 'rtl' && second === 0)) {\r\n          width = (table_width - release_position + initial_positon) / table_width * table_percentage\r\n          $table.css('margin-left', `calc(100% - ${Math.round(width).toFixed(4)}% - ${Math.round(right_margin).toFixed(4)}%)`)\r\n        }\r\n\r\n        // Update table width.\r\n        $table.css('width', `${Math.round(width).toFixed(4)}%`)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('table.resized', [$table.get(0)])\r\n    }\r\n\r\n    // Clear resizer data.\r\n    $resizer.removeData('origin')\r\n    $resizer.removeData('release-position')\r\n    $resizer.removeData('first')\r\n    $resizer.removeData('second')\r\n    $resizer.removeData('table')\r\n  }\r\n\r\n  /*\r\n   * Get the width of the column. (columns may have colspan)\r\n   */\r\n  function _columnWidth(col, map) {\r\n    let i\r\n    let width = $(map[0][col]).outerWidth()\r\n\r\n    for (i = 1; i < map.length; i++) {\r\n      width = Math.min(width, $(map[i][col]).outerWidth())\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  /*\r\n   * Get the width of the columns between specified indexes.\r\n   */\r\n  function _columnsWidth(col1, col2, map) {\r\n    let i\r\n    let width = 0\r\n\r\n    // Sum all columns widths.\r\n    for (i = col1; i <= col2; i++) {\r\n      width += _columnWidth(i, map)\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  /*\r\n   * Set mouse timer to improve performance.\r\n   */\r\n  function _mouseMove(e) {\r\n\r\n    // Prevent selecting text when we have cells selected.\r\n    if (selectedCells().length > 1 && mouseDownFlag) {\r\n      _clearSelection()\r\n    }\r\n\r\n    // Reset or set timer.\r\n    if (mouseDownFlag === false && mouseDownCellFlag === false && resizingFlag === false) {\r\n      if (mouseMoveTimer) {\r\n        clearTimeout(mouseMoveTimer)\r\n      }\r\n\r\n      // Only resize table if the editor is not disabled by user.\r\n      if (!editor.edit.isDisabled() || editor.popups.isVisible('table.edit')) {\r\n\r\n        // Check tag under in order to place the table resizer or insert helper button.\r\n        mouseMoveTimer = setTimeout(_tagUnder, 30, e)\r\n      }\r\n\r\n      // Move table resizer.\r\n    }\r\n    else if (resizingFlag) {\r\n\r\n      // Cursor position.\r\n      let pos = e.pageX - editor.win.pageXOffset\r\n\r\n      if (editor.opts.iframe) {\r\n        pos += editor.$iframe.offset().left\r\n      }\r\n\r\n      // Left and right limits.\r\n      const left_limit = $resizer.data('max-left')\r\n      const right_limit = $resizer.data('max-right')\r\n\r\n      // Cursor is between the left and right limits.\r\n      if (pos >= left_limit && pos <= right_limit) {\r\n        $resizer.css('left', pos - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n\r\n        // Cursor has exceeded the left limit. Don't update if it already has the correct value.\r\n      }\r\n      else if (pos < left_limit && parseFloat($resizer.css('left'), 10) > left_limit - editor.opts.tableResizerOffset) {\r\n        $resizer.css('left', left_limit - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n\r\n        // Cursor has exceeded the right limit. Don't update if it already has the correct value.\r\n      }\r\n      else if (pos > right_limit && parseFloat($resizer.css('left'), 10) < right_limit - editor.opts.tableResizerOffset) {\r\n        $resizer.css('left', right_limit - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n      }\r\n    }\r\n    else if (mouseDownFlag) {\r\n      _hideInsertHelper()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Place selection markers in a table cell.\r\n   */\r\n  function _addMarkersInCell($cell) {\r\n    if (editor.node.isEmpty($cell.get(0))) {\r\n      $cell.prepend(FE.MARKERS)\r\n    }\r\n    else {\r\n      $cell.prepend(FE.START_MARKER).append(FE.END_MARKER)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Use TAB key to navigate through cells.\r\n   */\r\n  function _useTab(e) {\r\n    const key_code = e.which\r\n\r\n    if (key_code == FE.KEYCODE.TAB) {\r\n\r\n      // Get starting cell.\r\n      let $cell\r\n\r\n      if (selectedCells().length > 0) {\r\n        $cell = editor.$el.find('.fr-selected-cell').last()\r\n      }\r\n      else {\r\n        const cell = editor.selection.element()\r\n\r\n        if (cell.tagName == 'TD' || cell.tagName == 'TH') {\r\n          $cell = $(cell)\r\n        }\r\n        else if (cell != editor.el) {\r\n          if ($(cell).parentsUntil(editor.$el, 'td').length > 0) {\r\n            $cell = $(cell).parents('td').first()\r\n          }\r\n          else if ($(cell).parentsUntil(editor.$el, 'th').length > 0) {\r\n            $cell = $(cell).parents('th').first()\r\n          }\r\n        }\r\n      }\r\n\r\n      if ($cell) {\r\n        e.preventDefault()\r\n        let currentSelection =  editor.selection.get()\r\n\r\n        if (currentSelection.focusOffset === 0 && $(editor.selection.element()).parentsUntil(editor.$el, 'ol, ul').length > 0 && ($(editor.selection.element()).closest('li').prev().length > 0 || ($(editor.selection.element()).is('li') && $(editor.selection.element()).prev().length > 0))) {\r\n\r\n          return true\r\n        }\r\n\r\n        _stopEdit()\r\n\r\n        // Go backwards.\r\n        if (e.shiftKey) {\r\n\r\n          // Go to previous cell.\r\n          if ($cell.prev().length > 0) {\r\n            _addMarkersInCell($cell.prev())\r\n          }\r\n\r\n          // Go to prev row, last cell.\r\n          else if ($cell.closest('tr').length > 0 && $cell.closest('tr').prev().length > 0) {\r\n            _addMarkersInCell($cell.closest('tr').prev().find('td').last())\r\n          }\r\n\r\n          // Go in THEAD, last cell.\r\n          else if ($cell.closest('tbody').length > 0 && $cell.closest('table').find('thead tr').length > 0) {\r\n            _addMarkersInCell($cell.closest('table').find('thead tr th').last())\r\n          }\r\n        }\r\n\r\n        // Go forward.\r\n        else {\r\n\r\n          // Go to next cell.\r\n          if ($cell.next().length > 0) {\r\n            _addMarkersInCell($cell.next())\r\n          }\r\n\r\n          // Go to next row, first cell.\r\n          else if ($cell.closest('tr').length > 0 && $cell.closest('tr').next().length > 0) {\r\n            _addMarkersInCell($cell.closest('tr').next().find('td').first())\r\n          }\r\n\r\n          // Cursor is in THEAD. Go to next row in TBODY\r\n          else if ($cell.closest('thead').length > 0 && $cell.closest('table').find('tbody tr').length > 0) {\r\n            _addMarkersInCell($cell.closest('table').find('tbody tr td').first())\r\n          }\r\n\r\n          // Add new row.\r\n          else {\r\n            $cell.addClass('fr-selected-cell')\r\n            insertRow('below')\r\n            _removeSelection()\r\n            _addMarkersInCell($cell.closest('tr').next().find('td').first())\r\n          }\r\n        }\r\n\r\n        // Update cursor position.\r\n        editor.selection.restore()\r\n\r\n        // Prevent event propagation.\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initilize insert helper.\r\n   */\r\n  function _initInsertHelper() {\r\n\r\n    // Append insert helper HTML to editor wrapper.\r\n    if (!editor.shared.$ti_helper) {\r\n      editor.shared.$ti_helper = $(document.createElement('div')).attr('class', 'fr-insert-helper').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Insert')}\"><svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z\"/></svg></a>`)\r\n\r\n      // Click on insert helper.\r\n      editor.events.bindClick(editor.shared.$ti_helper, 'a', function () {\r\n        const $td = $insert_helper.data('selected-cell')\r\n        const position = $insert_helper.data('position')\r\n        const inst = $insert_helper.data('instance') || editor\r\n\r\n        if (position == 'before') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertColumn(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'after') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertColumn(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'above') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertRow(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'below') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertRow(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n\r\n        // Hide the insert helper so it will reposition.\r\n        _hideInsertHelper()\r\n      })\r\n\r\n      // Editor destroy.\r\n      editor.events.on('shared.destroy', function () {\r\n        editor.shared.$ti_helper.html('').removeData().remove()\r\n        editor.shared.$ti_helper = null\r\n      }, true)\r\n\r\n      // Prevent the insert helper hide when mouse is over it.\r\n      editor.events.$on(editor.shared.$ti_helper, 'mousemove', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Hide the insert helper if the page is scrolled.\r\n      editor.events.$on($(editor.o_win), 'scroll', function () {\r\n        _hideInsertHelper()\r\n      }, true)\r\n\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        _hideInsertHelper()\r\n      }, true)\r\n    }\r\n\r\n    $insert_helper = editor.shared.$ti_helper\r\n\r\n    editor.events.on('destroy', function () {\r\n      $insert_helper = null\r\n    })\r\n\r\n    // Table insert helper tooltip.\r\n    editor.tooltip.bind(editor.$box, '.fr-insert-helper > a.fr-floating-btn')\r\n  }\r\n\r\n  /**\r\n   * Destroy\r\n   */\r\n  function _destroy() {\r\n    mouseDownCell = null\r\n    clearTimeout(mouseMoveTimer)\r\n  }\r\n\r\n  /*\r\n   * Go back to the table edit popup.\r\n   */\r\n  function back() {\r\n    if (selectedCells().length > 0) {\r\n      _showEditPopup()\r\n    }\r\n    else {\r\n      editor.popups.hide('table.insert')\r\n      editor.toolbar.showInline()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return selected cells.\r\n   */\r\n  function selectedCells() {\r\n    return editor.el.querySelectorAll('.fr-selected-cell')\r\n  }\r\n\r\n  /**\r\n   * Return selected table.\r\n   */\r\n  function selectedTable() {\r\n    const cells = selectedCells()\r\n\r\n    if (cells.length) {\r\n      let cell = cells[0]\r\n\r\n      while (cell && cell.parentNode != editor.el) {\r\n        cell = cell.parentNode\r\n      }\r\n\r\n      if (cell && cell.tagName == 'TABLE') return $(cell)\r\n\r\n      return $([])\r\n    }\r\n\r\n    return $([])\r\n  }\r\n\r\n  /**\r\n   * Select table cell with alt + space.\r\n   */\r\n  function _selectCellWithKeyboard(e) {\r\n\r\n    // Alt+space was hit. Try to select cell.\r\n    if (e.altKey && e.which == FE.KEYCODE.SPACE) {\r\n      let cell\r\n      const el = editor.selection.element()\r\n\r\n      // Get cell where cursor is.\r\n      if (el.tagName == 'TD' || el.tagName == 'TH') {\r\n        cell = el\r\n      }\r\n      else if ($(el).closest('td').length > 0) {\r\n        cell = $(el).closest('td').get(0)\r\n      }\r\n      else if ($(el).closest('th').length > 0) {\r\n        cell = $(el).closest('th').get(0)\r\n      }\r\n\r\n      // Select this cell.\r\n      if (cell) {\r\n        e.preventDefault()\r\n        selectCells(cell, cell)\r\n        _showEditPopup()\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Select table cells using arrows.\r\n   */\r\n  function selectCellsWithKeyboard(e) {\r\n    const selection = selectedCells()\r\n\r\n    // Return if no selected cell\r\n    if(selection == null) {\r\n      return\r\n    }\r\n\r\n    // There are some selected cells.\r\n    if (selection.length > 0) {\r\n      const map = _tableMap()\r\n      const key_code = e.which\r\n      let fixedCell\r\n      let handlerCell\r\n\r\n      // Only one cell is selected.\r\n      if (selection.length == 1) {\r\n        fixedCell = selection[0]\r\n        handlerCell = fixedCell\r\n      }\r\n\r\n      else {\r\n        fixedCell = editor.el.querySelector('.fr-cell-fixed')\r\n        handlerCell = editor.el.querySelector('.fr-cell-handler')\r\n      }\r\n\r\n      const handlerOrigin = _cellOrigin(handlerCell, map)\r\n\r\n      // Select column at the right.\r\n      if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if (handlerOrigin.col < map[0].length - 1) {\r\n          selectCells(fixedCell, map[handlerOrigin.row][handlerOrigin.col + 1])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select row below.\r\n      else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n        if (handlerOrigin.row < map.length - 1) {\r\n          selectCells(fixedCell, map[handlerOrigin.row + 1][handlerOrigin.col])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select column at the left.\r\n      else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n        if (handlerOrigin.col > 0) {\r\n          selectCells(fixedCell, map[handlerOrigin.row][handlerOrigin.col - 1])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select row above.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code) {\r\n        if (handlerOrigin.row > 0) {\r\n          selectCells(fixedCell, map[handlerOrigin.row - 1][handlerOrigin.col])\r\n\r\n          return false\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n  *  Clicking inside an input element\r\n     https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n  */ \r\n function _inputOnClick(e){\r\n    mouseDownCellFlag = false;\r\n  }\r\n\r\n  /*\r\n   * Init table.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    // Do cell selection only on desktops (no touch devices)\r\n    if (!editor.helpers.isMobile()) {\r\n\r\n      // Remember if mouse is clicked.\r\n      mouseDownFlag = false\r\n      mouseDownCellFlag = false\r\n      resizingFlag = false\r\n\r\n      // Mouse is down in a table cell.\r\n      editor.events.$on(editor.$el, 'mousedown', _mouseDown)\r\n\r\n      // Deselect table cells when user clicks on an image.\r\n      editor.popups.onShow('image.edit', function () {\r\n        _removeSelection()\r\n        mouseDownFlag = false\r\n        mouseDownCellFlag = false\r\n      })\r\n\r\n      // Deselect table cells when user clicks on a link.\r\n      editor.popups.onShow('link.edit', function () {\r\n        _removeSelection()\r\n        mouseDownFlag = false\r\n        mouseDownCellFlag = false\r\n      })\r\n\r\n      // Deselect table cells when a command is run.\r\n      editor.events.on('commands.mousedown', function ($btn) {\r\n        if ($btn.parents('.fr-toolbar').length > 0) {\r\n          _removeSelection()\r\n        }\r\n      })\r\n\r\n      // Mouse enter's a table cell.\r\n      editor.events.$on(editor.$el, 'mouseover', 'th, td', _mouseEnter)\r\n\r\n      // Mouse is no longer pressed.\r\n      editor.events.$on(editor.$win, 'mouseup', _mouseUp)\r\n\r\n      // Iframe mouseup.\r\n      if (editor.opts.iframe) {\r\n        editor.events.$on($(editor.o_win), 'mouseup', _mouseUp)\r\n      }\r\n\r\n      // Check tags under the mouse to see if the resizer needs to be shown.\r\n      editor.events.$on(editor.$win, 'mousemove', _mouseMove)\r\n\r\n      // Update resizer's position on scroll.\r\n      editor.events.$on($(editor.o_win), 'scroll', _repositionResizer)\r\n\r\n      // Reposition table edit popup when table cell content changes.\r\n      editor.events.on('contentChanged', function () {\r\n        if (selectedCells().length > 0) {\r\n          _showEditPopup()\r\n\r\n          // Make sure we reposition on image load.\r\n          editor.$el.find('img').on('load.selected-cells', function () {\r\n            $(this).off('load.selected-cells')\r\n\r\n            if (selectedCells().length > 0) {\r\n              _showEditPopup()\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      // Reposition table edit popup on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        _removeSelection()\r\n      })\r\n\r\n      editor.events.on('toolbar.esc', function () {\r\n        if (selectedCells().length > 0) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Allow keyboard while selecting table cells.\r\n      // https://github.com/froala/wysiwyg-editor/issues/2256\r\n      editor.events.$on($(editor.o_win), 'keydown', function () {\r\n        if (mouseDownFlag && mouseDownCellFlag) {\r\n          mouseDownFlag = false\r\n          mouseDownCellFlag = false\r\n\r\n          // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n\r\n          editor.selection.setAtEnd(editor.$el.find('.fr-selected-cell').last().get(0))\r\n          editor.selection.restore()\r\n\r\n          // Remove selected cells.\r\n          _removeSelection()\r\n        }\r\n      })\r\n\r\n      // Selecting cells with keyboard or moving cursor with arrow keys.\r\n      editor.events.$on(editor.$el, 'keydown', function (e) {\r\n        if (e.shiftKey) {\r\n          if (selectCellsWithKeyboard(e) === false) {\r\n\r\n            // Timeout needed due to clearSelection timeout.\r\n            setTimeout(function () {\r\n              _showEditPopup()\r\n            }, 0)\r\n          }\r\n        }\r\n        else {\r\n          _navigateWithArrows(e)\r\n        }\r\n      })\r\n\r\n      // Prevent backspace from doing browser back.\r\n      editor.events.on('keydown', function (e) {\r\n\r\n        // Tab in cell.\r\n        if (_useTab(e) === false) return false\r\n\r\n        let selected_cells = selectedCells()\r\n\r\n        if (selected_cells.length > 0) {\r\n\r\n          // CMD + A clear table cell selection and allow propagation.\r\n          if (selected_cells.length > 0 && editor.keys.ctrlKey(e) && e.which == FE.KEYCODE.A) {\r\n            _removeSelection()\r\n\r\n            if (editor.popups.isVisible('table.edit')) {\r\n              editor.popups.hide('table.edit')\r\n            }\r\n            selected_cells = []\r\n\r\n            return true\r\n          }\r\n\r\n          // ESC clear table cell selection.\r\n          if (e.which == FE.KEYCODE.ESC) {\r\n            if (editor.popups.isVisible('table.edit')) {\r\n              _removeSelection()\r\n              editor.popups.hide('table.edit')\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              e.stopImmediatePropagation()\r\n              selected_cells = []\r\n\r\n              return false\r\n            }\r\n          }\r\n\r\n          // Backspace clears selected cells content.\r\n          if (selected_cells.length > 1 && (e.which == FE.KEYCODE.BACKSPACE || e.which == FE.KEYCODE.DELETE)) {\r\n            editor.undo.saveStep()\r\n\r\n            for (let i = 0; i < selected_cells.length; i++) {\r\n              $(selected_cells[i]).html('<br>')\r\n\r\n              if (i == selected_cells.length - 1) {\r\n                $(selected_cells[i]).prepend(FE.MARKERS)\r\n              }\r\n            }\r\n\r\n            editor.selection.restore()\r\n            editor.undo.saveStep()\r\n            selected_cells = []\r\n\r\n            return false\r\n          }\r\n\r\n          // Prevent typing if cells are selected. (Allow browser refresh using keyboard)\r\n          if (selected_cells.length > 1 && e.which != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n            e.preventDefault()\r\n            selected_cells = []\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        // We may want to select a cell with keyboard.\r\n        else {\r\n\r\n          // Garbage collector.\r\n          selected_cells = []\r\n\r\n          if (_selectCellWithKeyboard(e) === false) return false\r\n        }\r\n      }, true)\r\n\r\n      // Clean selected cells.\r\n      let c_selected_cells = []\r\n      editor.events.on('html.beforeGet', function () {\r\n        c_selected_cells = selectedCells()\r\n\r\n        for (let i = 0; i < c_selected_cells.length; i++) {\r\n          c_selected_cells[i].className = (c_selected_cells[i].className || '').replace(/fr-selected-cell/g, '')\r\n        }\r\n      })\r\n\r\n      editor.events.on('html.afterGet', function () {\r\n        for (let i = 0; i < c_selected_cells.length; i++) {\r\n          c_selected_cells[i].className = (c_selected_cells[i].className ? c_selected_cells[i].className.trim() + ' ' : '') + 'fr-selected-cell'\r\n        }\r\n        c_selected_cells = []\r\n      })\r\n\r\n      _initInsertPopup(true)\r\n      _initEditPopup(true)\r\n    }\r\n\r\n    editor.events.on('destroy', _destroy)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    insert: insert,\r\n    remove: remove,\r\n    insertRow: insertRow,\r\n    deleteRow: deleteRow,\r\n    insertColumn: insertColumn,\r\n    deleteColumn: deleteColumn,\r\n    mergeCells: mergeCells,\r\n    splitCellVertically: splitCellVertically,\r\n    splitCellHorizontally: splitCellHorizontally,\r\n    addHeader: addHeader,\r\n    removeHeader: removeHeader,\r\n    setBackground: setBackground,\r\n    showInsertPopup: _showInsertPopup,\r\n    showEditPopup: _showEditPopup,\r\n    showColorsPopup: _showColorsPopup,\r\n    back: back,\r\n    verticalAlign: verticalAlign,\r\n    horizontalAlign: horizontalAlign,\r\n    applyStyle: applyStyle,\r\n    selectedTable: selectedTable,\r\n    selectedCells: selectedCells,\r\n    customColor: customColor,\r\n    selectCells: selectCells\r\n  }\r\n}\r\n\r\n// Insert table button.\r\nFE.DefineIcon('insertTable', { NAME: 'table', SVG_KEY: 'insertTable' })\r\nFE.RegisterCommand('insertTable', {\r\n  title: 'Insert Table',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('table.insert')) {\r\n      this.table.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('table.insert')\r\n    }\r\n  },\r\n  plugin: 'table'\r\n})\r\n\r\nFE.RegisterCommand('tableInsert', {\r\n  callback: function (cmd, rows, cols) {\r\n    this.table.insert(rows, cols)\r\n    this.popups.hide('table.insert')\r\n  }\r\n})\r\n\r\n// Table header button.\r\nFE.DefineIcon('tableHeader', {\r\n  NAME: 'header',\r\n  FA5NAME: 'heading',\r\n  SVG_KEY: 'tableHeader'\r\n})\r\nFE.RegisterCommand('tableHeader', {\r\n  title: 'Table Header',\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    const $btn = this.popups.get('table.edit').find('.fr-command[data-cmd=\"tableHeader\"]')\r\n\r\n    // If button is active the table has a header,\r\n    if ($btn.hasClass('fr-active')) {\r\n      this.table.removeHeader()\r\n    }\r\n\r\n    // Add table header.\r\n    else {\r\n      this.table.addHeader()\r\n    }\r\n  },\r\n  refresh: function ($btn) {\r\n    const $table = this.table.selectedTable()\r\n\r\n    if ($table.length > 0) {\r\n\r\n      // If table doesn't have a header.\r\n      if ($table.find('th').length === 0) {\r\n        $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n      }\r\n\r\n      // Header button is active if table has header.\r\n      else {\r\n        $btn.addClass('fr-active').attr('aria-pressed', true)\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// Table rows action dropdown.\r\nFE.DefineIcon('tableRows', { NAME: 'bars', SVG_KEY: 'row' })\r\nFE.RegisterCommand('tableRows', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Row',\r\n  options: {\r\n    above: 'Insert row above',\r\n    below: 'Insert row below',\r\n    'delete': 'Delete row'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableRows.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += '<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableRows\" data-param1=\"' + val + '\" title=\"' + this.language.translate(options[val]) + '\">' + this.language.translate(options[val]) + '</a></li>'\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'above' || val == 'below') {\r\n      this.table.insertRow(val)\r\n    }\r\n    else {\r\n      this.table.deleteRow()\r\n    }\r\n  }\r\n})\r\n\r\n// Table columns action dropdown.\r\nFE.DefineIcon('tableColumns', { NAME: 'bars fa-rotate-90', SVG_KEY: 'columns' })\r\nFE.RegisterCommand('tableColumns', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Column',\r\n  options: {\r\n    before: 'Insert column before',\r\n    after: 'Insert column after',\r\n    'delete': 'Delete column'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableColumns.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableColumns\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'before' || val == 'after') {\r\n      this.table.insertColumn(val)\r\n    }\r\n    else {\r\n      this.table.deleteColumn()\r\n    }\r\n  }\r\n})\r\n\r\n// Table cells action dropdown.\r\nFE.DefineIcon('tableCells', {\r\n  NAME: 'square-o',\r\n  FA5NAME: 'square',\r\n  SVG_KEY: 'cellOptions'\r\n})\r\nFE.RegisterCommand('tableCells', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Cell',\r\n  options: {\r\n    merge: 'Merge cells',\r\n    'vertical-split': 'Vertical split',\r\n    'horizontal-split': 'Horizontal split'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCells.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCells\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'merge') {\r\n      this.table.mergeCells()\r\n    }\r\n    else if (val == 'vertical-split') {\r\n      this.table.splitCellVertically()\r\n    }\r\n\r\n    // 'horizontal-split'\r\n    else {\r\n      this.table.splitCellHorizontally()\r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    // More than one cell selected.\r\n    if (this.$el.find('.fr-selected-cell').length > 1) {\r\n      $dropdown.find('a[data-param1=\"vertical-split\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"horizontal-split\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"merge\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n    }\r\n\r\n    // Only one selected cell.\r\n    else {\r\n      $dropdown.find('a[data-param1=\"merge\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"vertical-split\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n      $dropdown.find('a[data-param1=\"horizontal-split\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n    }\r\n  }\r\n})\r\n\r\n// Remove table button.\r\nFE.DefineIcon('tableRemove', { NAME: 'trash', SVG_KEY: 'removeTable' })\r\nFE.RegisterCommand('tableRemove', {\r\n  title: 'Remove Table',\r\n  focus: false,\r\n  callback: function () {\r\n    this.table.remove()\r\n  }\r\n})\r\n\r\n// Table styles.\r\nFE.DefineIcon('tableStyle', { NAME: 'paint-brush', SVG_KEY: 'tableStyle' })\r\nFE.RegisterCommand('tableStyle', {\r\n  title: 'Table Style',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.tableStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.applyStyle(val, this.$el.find('.fr-selected-cell').closest('table'), this.opts.tableMultipleStyles, this.opts.tableStyles)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const $ = this.$\r\n    const $table = this.$el.find('.fr-selected-cell').closest('table')\r\n\r\n    if ($table) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $table.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// Table cell background color button.\r\nFE.DefineIcon('tableCellBackground', { NAME: 'tint', SVG_KEY: 'cellBackground' })\r\nFE.RegisterCommand('tableCellBackground', {\r\n  title: 'Cell Background',\r\n  focus: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.table.showColorsPopup()\r\n  }\r\n})\r\n\r\n// Select table cell background color command.\r\nFE.RegisterCommand('tableCellBackgroundColor', {\r\n  undo: true,\r\n  focus: false,\r\n  callback: function (cmd, val) {\r\n    this.table.setBackground(val)\r\n  }\r\n})\r\n\r\n// Table back.\r\nFE.DefineIcon('tableBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('tableBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.table.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    if (this.table.selectedCells().length === 0 && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\n// Table vertical align dropdown.\r\nFE.DefineIcon('tableCellVerticalAlign', {\r\n  NAME: 'arrows-v',\r\n  FA5NAME: 'arrows-alt-v',\r\n  SVG_KEY: 'verticalAlignMiddle'\r\n})\r\nFE.RegisterCommand('tableCellVerticalAlign', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Vertical Align',\r\n  options: {\r\n    Top: 'Align Top',\r\n    Middle: 'Align Middle',\r\n    Bottom: 'Align Bottom'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCellVerticalAlign.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellVerticalAlign\" data-param1=\"${val.toLowerCase()}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(val)}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.verticalAlign(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    $dropdown.find('.fr-command[data-param1=\"' + this.$el.find('.fr-selected-cell').css('vertical-align') + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n})\r\n\r\n// Table horizontal align dropdown.\r\nFE.DefineIcon('tableCellHorizontalAlign', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('align-center', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.DefineIcon('align-justify', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\nFE.RegisterCommand('tableCellHorizontalAlign', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Horizontal Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'Align Center',\r\n    right: 'Align Right',\r\n    justify: 'Align Justify'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCellHorizontalAlign.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellHorizontalAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.horizontalAlign(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    const selected_cells = this.table.selectedCells()\r\n    const $ = this.$\r\n    if (selected_cells.length) {\r\n      $btn.find('> *').first().replaceWith(this.icon.create(`align-${this.helpers.getAlignment($(selected_cells[0]))}`))\r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    $dropdown.find('.fr-command[data-param1=\"' + this.helpers.getAlignment(this.$el.find('.fr-selected-cell').first()) + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n})\r\n\r\n// Table cell styles.\r\nFE.DefineIcon('tableCellStyle', { NAME: 'magic', SVG_KEY: 'cellStyle' })\r\nFE.RegisterCommand('tableCellStyle', {\r\n  title: 'Cell Style',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.tableCellStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.applyStyle(val, this.$el.find('.fr-selected-cell'), this.opts.tableCellMultipleStyles, this.opts.tableCellStyles)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    const $ = this.$\r\n    const $cell = this.$el.find('.fr-selected-cell').first()\r\n\r\n    if ($cell) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $cell.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('tableCellBackgroundCustomColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.table.customColor()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('tableColorRemove', { NAME: 'eraser', SVG_KEY: 'remove' })\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.URLRegEx = `(^| |\\\\u00A0)(${FE.LinkRegEx}|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\\\.[a-z0-9+\\-_]{1,}))$`\r\n\r\nFE.PLUGINS.url = function (editor) {\r\n\r\n  const { $ } = editor\r\n  let rel = null \r\n\r\n  /*\r\n   * Transform string into a hyperlink.\r\n   */\r\n  function _linkReplaceHandler(match, p1, p2) {\r\n    let dots = '' \r\n\r\n    while (p2.length && p2[p2.length - 1] == '.') {\r\n      dots += '.' \r\n      p2 = p2.substring(0, p2.length - 1) \r\n    }\r\n\r\n    let link = p2 \r\n\r\n    // Convert email.\r\n    if (editor.opts.linkConvertEmailAddress) {\r\n      if (editor.helpers.isEmail(link) && !/^mailto:.*/i.test(link)) {\r\n        link = `mailto:${link}` \r\n      }\r\n    }\r\n    else if (editor.helpers.isEmail(link)) {\r\n      return p1 + p2 \r\n    }\r\n\r\n    if (!/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\\:)/i.test(link)) {\r\n      link = `//${link}` \r\n    }\r\n\r\n    return (p1 ? p1 : '') + `<a${(editor.opts.linkAlwaysBlank ? ' target=\"_blank\"' : '')}${(rel ? (` rel=\"${rel}\"`) : '')} data-fr-linked=\"true\" href=\"${link}\">${p2.replace(/&amp;/g, '&').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}</a>${dots}`\r\n  }\r\n\r\n  const _getRegEx = () => new RegExp(FE.URLRegEx, 'gi')\r\n\r\n  /*\r\n   * Convert link paterns from html into hyperlinks.\r\n   */\r\n  function _convertToLink(html) {\r\n\r\n    if (editor.opts.linkAlwaysNoFollow) {\r\n      rel = 'nofollow' \r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1576.\r\n    if (editor.opts.linkAlwaysBlank) {\r\n      if (editor.opts.linkNoOpener) {\r\n        if (!rel) rel = 'noopener' \r\n        else rel += ' noopener' \r\n      }\r\n\r\n      if (editor.opts.linkNoReferrer) {\r\n        if (!rel) rel = 'noreferrer' \r\n        else rel += ' noreferrer' \r\n      }\r\n    }\r\n\r\n    return html.replace(_getRegEx(), _linkReplaceHandler) \r\n  }\r\n\r\n  function _isA(node) {\r\n    if (!node) return false \r\n\r\n    if (node.tagName === 'A') return true \r\n\r\n    if (node.parentNode && node.parentNode != editor.el) return _isA(node.parentNode) \r\n\r\n    return false \r\n  }\r\n\r\n  function _lastPart(text) {\r\n    const splits = text.split(' ') \r\n\r\n    return splits[splits.length - 1] \r\n  }\r\n\r\n  function _inlineType() {\r\n    const range = editor.selection.ranges(0) \r\n    const { startContainer : node } = range \r\n\r\n    if (!node || node.nodeType !== Node.TEXT_NODE || range.startOffset !== (node.textContent || '').length) return false \r\n\r\n    if (_isA(node)) return false \r\n\r\n    if (_getRegEx().test(_lastPart(node.textContent))) {\r\n      $(node).before(_convertToLink(node.textContent)) \r\n\r\n      // Get linked link.\r\n      const $link = $(node.parentNode).find('a[data-fr-linked]') \r\n      $link.removeAttr('data-fr-linked') \r\n\r\n      node.parentNode.removeChild(node) \r\n\r\n      // Trigger link event.\r\n      editor.events.trigger('url.linked', [$link.get(0)]) \r\n    }\r\n    else if (node.textContent.split(' ').length <= 2 && node.previousSibling && node.previousSibling.tagName === 'A') {\r\n      const text = node.previousSibling.innerText + node.textContent \r\n\r\n      if (_getRegEx().test(_lastPart(text))) {\r\n        /**\r\n         * Using DOMParser to parse and get the nodes from string data and replacing respective nodes in existing DOM.\r\n         */\r\n        const domParser = new DOMParser()\r\n        const childNodes = domParser.parseFromString(_convertToLink(text), 'text/html').body.childNodes\r\n\r\n        node.parentNode.replaceChild(childNodes[0], node.previousSibling)\r\n\r\n        //replacechild will change reference to the node so checking for length\r\n        if (childNodes.length) {\r\n          $(node).before(childNodes[0])\r\n        }\r\n\r\n        node.parentNode.removeChild(node)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    // Handle special keys.\r\n    editor.events.on('keypress', function (e) {\r\n      if (editor.selection.isCollapsed() && (e.key == '.' || e.key == ')' || e.key == '(')) {\r\n        _inlineType() \r\n      }\r\n    }, true) \r\n\r\n    // Handle ENTER and SPACE.\r\n    editor.events.on('keydown', function (e) {\r\n      const { which : keycode } = e \r\n\r\n      if (editor.selection.isCollapsed() && (keycode == FE.KEYCODE.ENTER || keycode == FE.KEYCODE.SPACE)) {\r\n        _inlineType() \r\n      }\r\n    }, true) \r\n\r\n    // Handle pasting.\r\n    editor.events.on('paste.beforeCleanup', function (html) {\r\n      if (editor.helpers.isURL(html)) {\r\n        let rel_attr = null \r\n\r\n        if (editor.opts.linkAlwaysBlank) {\r\n          if (editor.opts.linkNoOpener) {\r\n            if (!rel_attr) rel_attr = 'noopener' \r\n            else rel_attr += ' noopener' \r\n          }\r\n\r\n          if (editor.opts.linkNoReferrer) {\r\n            if (!rel_attr) rel_attr = 'noreferrer' \r\n            else rel_attr += ' noreferrer' \r\n          }\r\n        }\r\n\r\n        return `<a${(editor.opts.linkAlwaysBlank ? ' target=\"_blank\"' : '')}${(rel_attr ? (` rel=\"${rel_attr}\"`) : '')} href=\"${html}\" >${html}</a>` \r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'video.insert': '[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]',\r\n  'video.edit': '[_BUTTONS_]',\r\n  'video.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  videoAllowedTypes: ['mp4', 'webm', 'ogg', 'mp3', 'mpeg', 'url'],\r\n  videoAllowedProviders: ['.*'],\r\n  videoDefaultAlign: 'center',\r\n  videoDefaultDisplay: 'block',\r\n  videoDefaultWidth: 600,\r\n  videoEditButtons: ['videoReplace', 'videoRemove', 'videoDisplay', 'videoAlign', 'videoSize','autoplay'],\r\n  videoInsertButtons: ['videoBack', '|', 'videoByURL', 'videoEmbed', 'videoUpload'],\r\n  videoMaxSize: 50 * 1024 * 1024,\r\n  videoMove: true,\r\n  videoResize: true,\r\n  videoResponsive: false,\r\n  videoSizeButtons: ['videoBack', '|'],\r\n  videoSplitHTML: false,\r\n  videoTextNear: true,\r\n  videoUpload: true,\r\n  videoUploadMethod: 'POST',\r\n  videoUploadParam: 'file',\r\n  videoUploadParams: {},\r\n  videoUploadToS3: false,\r\n  videoUploadToAzure: false,\r\n  videoUploadURL: null\r\n}) \r\n\r\nFE.VIDEO_PROVIDERS = [\r\n  {\r\n    test_regex: /^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,\r\n    url_text: 'https://www.youtube.com/embed/$1?$2',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque&rel=0\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'youtube'\r\n  },\r\n  {\r\n    test_regex: /^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,\r\n    url_text: 'https://player.vimeo.com/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vimeo'\r\n  },\r\n  {\r\n    test_regex: /^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,\r\n    url_text: 'https://www.dailymotion.com/embed/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'dailymotion'\r\n  },\r\n  {\r\n    test_regex: /^.+(screen.yahoo.com)\\/[^_&]+/,\r\n    url_regex: '',\r\n    url_text: '',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'yahoo'\r\n  },\r\n  {\r\n    test_regex: /^.+(rutube.ru)\\/[^_&]+/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,\r\n    url_text: 'https://rutube.ru/play/embed/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'rutube'\r\n  },\r\n  {\r\n    test_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,\r\n    url_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,\r\n    url_text: 'https://play.vidyard.com/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vidyard'\r\n  }\r\n] \r\n\r\nFE.VIDEO_EMBED_REGEX = /^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i \r\n\r\nFE.PLUGINS.video = function (editor) {\r\n  const { $ } = editor;\r\n  const DEFAULT_VIDEO_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $overlay \r\n  let $handler \r\n  let $video_resizer \r\n  let $current_video \r\n\r\n  const BAD_LINK = 1 \r\n  const MISSING_LINK = 2 \r\n  const ERROR_DURING_UPLOAD = 3 \r\n  const BAD_RESPONSE = 4 \r\n  const MAX_SIZE_EXCEEDED = 5 \r\n  const BAD_FILE_TYPE = 6 \r\n  const NO_CORS_IE = 7 \r\n\r\n  const error_messages = {} \r\n  error_messages[BAD_LINK] = 'Video cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'Video file type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n\r\n  /**\r\n   * Refresh the video insert popup.\r\n   */\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('video.insert') \r\n    const $url_input = $popup.find('.fr-video-by-url-layer input') \r\n    $url_input.val('').trigger('change') \r\n\r\n    let $embed_area = $popup.find('.fr-video-embed-layer textarea') \r\n    $embed_area.val('').trigger('change') \r\n\r\n    $embed_area = $popup.find('.fr-video-upload-layer input') \r\n    $embed_area.val('').trigger('change') \r\n  }\r\n\r\n  /**\r\n   * Show the video insert popup.\r\n   */\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertVideo\"]') \r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    hideProgressBar() \r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('video.insert') \r\n      editor.popups.setContainer('video.insert', editor.$tb) \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('video.insert', left, top, $btn.outerHeight()) \r\n      }\r\n      else {\r\n        editor.position.forSelection($popup) \r\n        editor.popups.show('video.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the video edit popup.\r\n   */\r\n  function _showEditPopup() {\r\n    let $popup = editor.popups.get('video.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    if ($popup) {\r\n      editor.popups.setContainer('video.edit', editor.$sc) \r\n      editor.popups.refresh('video.edit') \r\n\r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      const left = $video_obj.offset().left + $video_obj.outerWidth() / 2\r\n      const top = $video_obj.offset().top + $video_obj.outerHeight()\r\n      let iframeURL =  $video_obj.get(0).src ?  $video_obj.get(0).src : null\r\n      iframeURL = iframeURL.split('.')\r\n      iframeURL = iframeURL[iframeURL.length-1]\r\n      let isFile = (iframeURL.includes('pdf') || iframeURL.includes('txt')) ? true : false\r\n      if($video_obj.hasClass('fr-file') || isFile || $current_video.find(`audio`).get(0))\r\n      {        \r\n        if(document.getElementById(`autoplay-${editor.id}`))\r\n          document.getElementById(`autoplay-${editor.id}`).style.display = 'none'\r\n        if(document.getElementById(`videoReplace-${editor.id}`))\r\n          document.getElementById(`videoReplace-${editor.id}`).style.display = 'none'\r\n      } else{\r\n        document.getElementById(`autoplay-${editor.id}`).style.display = ''\r\n        document.getElementById(`videoReplace-${editor.id}`).style.display = ''\r\n      }\r\n      editor.popups.show('video.edit', left, top, $video_obj.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('video.insert', _refreshInsertPopup) \r\n      editor.popups.onHide('video.insert', _hideInsertPopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n\r\n    if (!editor.opts.videoUpload  && editor.opts.videoInsertButtons.indexOf('videoUpload') !== -1) {\r\n      editor.opts.videoInsertButtons.splice(editor.opts.videoInsertButtons.indexOf('videoUpload'), 1) \r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.videoInsertButtons);\r\n\r\n    if (buttonList !== '') {\r\n      video_buttons = '<div class=\"fr-buttons\">' + buttonList + '</div>';\r\n    }\r\n\r\n    // Video by url layer.\r\n    let by_url_layer = '' \r\n\r\n    const uploadIndex = editor.opts.videoInsertButtons.indexOf('videoUpload') \r\n    const urlIndex = editor.opts.videoInsertButtons.indexOf('videoByURL') \r\n    const embedIndex = editor.opts.videoInsertButtons.indexOf('videoEmbed') \r\n\r\n    let active \r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((urlIndex > uploadIndex && uploadIndex >= 0) || (urlIndex > embedIndex && embedIndex >= 0)) {\r\n        active = ''\r\n      }\r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>' \r\n\r\n      by_url_layer = `<div class=\"fr-video-by-url-layer fr-layer${active}\" id=\"fr-video-by-url-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-video-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Paste in a video URL')}\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><span style='float:left'><div class=\"fr-checkbox-line fr-autoplay-margin\"><span class=\"fr-checkbox\"> <input id='videoPluginAutoplay' data-checked=\"_blank\" type=\"checkbox\"> <span>${checkmark}</span></span> <label id=\"fr-label-target-${editor.id}\">Autoplay</label></div> </span><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Video embed layer.\r\n    let embed_layer = '' \r\n\r\n    if (embedIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((embedIndex > uploadIndex && uploadIndex >= 0) || (embedIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n      embed_layer = `<div class=\"fr-video-embed-layer fr-layer${active}\" id=\"fr-video-embed-layer-${editor.id}\"><div class=\"fr-input-line\"><textarea id=\"fr-video-embed-layer-text${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Embedded Code')}\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertEmbed\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Video upload layer.\r\n    let upload_layer = '' \r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((uploadIndex > embedIndex && embedIndex >= 0) || (uploadIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n      upload_layer = `<div class=\"fr-video-upload-layer fr-layer${active}\" id=\"fr-video-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop video')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" accept=\"video/${editor.opts.videoAllowedTypes.join(', video/').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-video-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = `<div class=\"fr-video-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"videoDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>`\r\n\r\n\r\n    const template = {\r\n      buttons: video_buttons,\r\n      by_url_layer: by_url_layer,\r\n      embed_layer: embed_layer,\r\n      upload_layer: upload_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('video.insert', template) \r\n\r\n    _bindInsertEvents($popup) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the video upload layer.\r\n   */\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    let left \r\n    let top \r\n\r\n    if (!$current_video && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertVideo\"]') \r\n      left = $btn.offset().left \r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10) \r\n    }\r\n\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top')) \r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight() \r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active') \r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active') \r\n    editor.popups.show('video.insert', left, top, 0) \r\n    editor.accessibility.focusPopup($popup) \r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert embed button.\r\n   */\r\n  function refreshEmbedButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-embed-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert upload button.\r\n   */\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert video embedded object.\r\n   */\r\n  function insert(embedded_code) {\r\n\r\n    // Make sure we have focus.\r\n    editor.events.focus(true) \r\n    editor.selection.restore() \r\n\r\n    // Flag to tell if the video is replaced.\r\n    let replaced = false \r\n\r\n    // If current video found we have to replace it.\r\n    if ($current_video) {\r\n\r\n      // Remove the old video.\r\n      remove() \r\n\r\n      // Mark that the video is replaced.\r\n      replaced = true \r\n    }\r\n\r\n    editor.html.insert(`<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video fr-deletable\">${embedded_code}</span>`, false, editor.opts.videoSplitHTML) \r\n\r\n    editor.popups.hide('video.insert') \r\n\r\n    const $video = editor.$el.find('.fr-jiv') \r\n    $video.removeClass('fr-jiv') \r\n    $video.toggleClass('fr-rv', editor.opts.videoResponsive) \r\n\r\n    _setStyle($video, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign) \r\n\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n    editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video]) \r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $video = $(this) \r\n\r\n    editor.popups.hide('video.insert') \r\n\r\n    $video.removeClass('fr-uploading') \r\n\r\n    // Select the video.\r\n    if ($video.parent().next().is('br')) {\r\n      $video.parent().next().remove() \r\n    }\r\n\r\n    _editVideo($video.parent()) \r\n\r\n    editor.events.trigger('video.loaded', [$video.parent()]) \r\n  }\r\n\r\n  /**\r\n   * Insert html video into the editor.\r\n   */\r\n\r\n  function insertHtmlVideo(link, sanitize, data, $existing_video, response) {\r\n    editor.edit.off() \r\n    _setProgressMessage('Loading video') \r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link) \r\n\r\n    const _add = function () {\r\n      let $video \r\n      let attr \r\n\r\n      if ($existing_video) {\r\n        if (!editor.undo.canDo() && !$existing_video.find('video').hasClass('fr-uploading')) editor.undo.saveStep() \r\n\r\n        const old_src = $existing_video.find('video').data('fr-old-src') \r\n\r\n        const replaced = $existing_video.data('fr-replaced') \r\n        $existing_video.data('fr-replaced', false) \r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing video.\r\n          $video = $existing_video.clone(true) \r\n          $video.find('video').removeData('fr-old-src').removeClass('fr-uploading') \r\n\r\n          // Remove load event.\r\n          $video.find('video').off('canplay') \r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_video.find('video').attr('src', old_src) \r\n\r\n          // Replace existing video with its clone.\r\n          $existing_video.replaceWith($video) \r\n        }\r\n        else {\r\n          $video = $existing_video \r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $video.find('video').get(0).attributes \r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i] \r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $video.find('video').removeAttr(att.nodeName) \r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                $video.find('video').attr(`data-${attr}`, data[attr]) \r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $video.find('video').on('canplay', _loadedCallback) \r\n        $video.find('video').attr('src', link) \r\n        editor.edit.on() \r\n        _syncVideos() \r\n        editor.undo.saveStep() \r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.$el.blur() \r\n\r\n        editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video, response]) \r\n      }\r\n      else {\r\n        $video = _addVideo(link, data, _loadedCallback) \r\n        _syncVideos() \r\n        editor.undo.saveStep() \r\n        editor.events.trigger('video.inserted', [$video, response]) \r\n      }\r\n    }\r\n\r\n    showProgressBar('Loading video') \r\n\r\n    _add() \r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive') \r\n    $popup.find('.fr-video-progress-bar-layer').addClass('fr-active') \r\n    $popup.find('.fr-buttons').hide() \r\n\r\n    if ($current_video) {\r\n      const $current_video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      editor.popups.setContainer('video.insert', editor.$sc) \r\n      const left = $current_video_obj.offset().left\r\n      const top = $current_video_obj.offset().top + $current_video_obj.height()\r\n\r\n      editor.popups.show('video.insert', left, top, $current_video_obj.outerHeight()) \r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive') \r\n      $popup.find('.fr-video-progress-bar-layer').removeClass('fr-active') \r\n      $popup.find('.fr-buttons').show() \r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('video.fr-error').length) {\r\n        editor.events.focus() \r\n\r\n        if (editor.$el.find('video.fr-error').length) {\r\n          editor.$el.find('video.fr-error').parent().remove() \r\n          editor.undo.saveStep() \r\n          editor.undo.run() \r\n          editor.undo.dropRedo() \r\n        }\r\n\r\n        if (!editor.$wp && $current_video) {\r\n          const $video = $current_video \r\n          _exitEdit(true) \r\n          editor.selection.setAfter($video.find('video').get(0)) \r\n          editor.selection.restore() \r\n        }\r\n        editor.popups.hide('video.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-video-progress-bar-layer') \r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : '')) \r\n\r\n      $layer.removeClass('fr-error') \r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate') \r\n        $layer.find('div > span').css('width', `${progress}%`) \r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar() \r\n    const $popup = editor.popups.get('video.insert') \r\n    const $layer = $popup.find('.fr-video-progress-bar-layer') \r\n    $layer.addClass('fr-error') \r\n    const $message_header = $layer.find('h3') \r\n    $message_header.text(message) \r\n    editor.events.disableBlur() \r\n    $message_header.focus() \r\n  }\r\n\r\n  /**\r\n   * Insert video by URL.\r\n   */\r\n  function insertByURL(link) {   \r\n    let autoPlayFlag = document.getElementById('videoPluginAutoplay') ? document.getElementById('videoPluginAutoplay').checked : false\r\n    if (typeof link == 'undefined') {\r\n      const $popup = editor.popups.get('video.insert') \r\n      link = ($popup.find('.fr-video-by-url-layer input[type=\"text\"]').val() || '').trim() \r\n    }\r\n\r\n    let video = null \r\n\r\n    if (!/^http/.test(link)) {\r\n      link = `https://${link}` \r\n    }\r\n\r\n    if (editor.helpers.isURL(link)) {\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        let vp = FE.VIDEO_PROVIDERS[i] \r\n        const addAutoplay = \"autoplay=1\";\r\n        if (vp.html.includes('autoplay=1') && (document.getElementById('videoPluginAutoplay').checked)){\r\n          vp.html=vp.html\r\n          document.getElementById('videoPluginAutoplay').checked=false       \r\n        }\r\n       else if(autoPlayFlag){\r\n          let indexofAutoplay=vp.html.indexOf('{url}') + 5\r\n           vp.html = [vp.html.slice(0, indexofAutoplay), addAutoplay, vp.html.slice(indexofAutoplay)].join('');        \r\n            autoPlayFlag=false\r\n           document.getElementById('videoPluginAutoplay').checked=false\r\n          }\r\n          else{\r\n            vp = FE.VIDEO_PROVIDERS[i] \r\n            vp.html= vp.html.replace(addAutoplay,'')\r\n          }\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n          video = link.replace(vp.url_regex, vp.url_text) \r\n          video = vp.html.replace(/\\{url\\}/, video) \r\n          break \r\n        }\r\n      }\r\n    }\r\n\r\n    if (video) {\r\n      insert(video) \r\n    }\r\n    else {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      editor.events.trigger('video.linkError', [link]) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert embedded video.\r\n   */\r\n  function insertEmbed(code) {\r\n    if (typeof code == 'undefined') {\r\n      const $popup = editor.popups.get('video.insert') \r\n      code = $popup.find('.fr-video-embed-layer textarea').val() || '' \r\n    }\r\n\r\n    if (code.length === 0 || !FE.VIDEO_EMBED_REGEX.test(code)) {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      editor.events.trigger('video.codeError', [code]) \r\n    }\r\n    else {\r\n      insert(code) \r\n    }\r\n  }\r\n\r\n  function _editVideo($video) {\r\n    _edit.call($video.get(0)) \r\n  }\r\n\r\n  /**\r\n   * Parse video response.\r\n   */\r\n\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('video.uploaded', [response], true) === false) {\r\n        editor.edit.on() \r\n\r\n        return false \r\n      }\r\n\r\n      const resp = JSON.parse(response) \r\n\r\n      if (resp.link) {\r\n\r\n        return resp \r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response) \r\n\r\n        return false \r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response) \r\n\r\n      return false \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse video response.\r\n   */\r\n\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text() \r\n      const key = $(response).find('Key').text() \r\n\r\n      if (editor.events.trigger('video.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on() \r\n\r\n        return false \r\n      }\r\n\r\n      return link \r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response) \r\n\r\n      return false \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _videoUploaded($video, url, key) {\r\n    _setProgressMessage('Loading video') \r\n\r\n    const { status } = this\r\n    const { response } = this \r\n    const { responseXML } = this \r\n    const { responseText } = this \r\n\r\n    try {\r\n      if (editor.opts.videoUploadToS3 || editor.opts.videoUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.videoUploadToAzure) {\r\n            if (editor.events.trigger('video.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          } \r\n\r\n          if (link) {\r\n            insertHtmlVideo(link, false, [], $video, response || responseXML) \r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML) \r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText) \r\n\r\n          if (resp) {\r\n            insertHtmlVideo(resp.link, false, resp, $video, response || responseText) \r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText) \r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video upload error.\r\n   */\r\n\r\n  function _videoUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML) \r\n  }\r\n\r\n  /**\r\n   * Video upload progress.\r\n   */\r\n\r\n  function _videoUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0) \r\n      _setProgressMessage(editor.language.translate('Uploading'), complete) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video upload aborted.\r\n   */\r\n  function _videoUploadAborted() {\r\n    editor.edit.on() \r\n    hideProgressBar(true) \r\n  }\r\n\r\n  function _addVideo(link, data, loadCallback) {\r\n\r\n    // Build video data string.\r\n    let data_str = '' \r\n    let attr \r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let { videoDefaultWidth : width } = editor.opts \r\n\r\n    if (width && width != 'auto') {\r\n      width = `${width}px` \r\n    }\r\n\r\n    // Create video object and set the load event.\r\n    const $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<video src=\"' + link + '\" ' + data_str + (width ? ' style=\"width: ' + width + ';\" ' : '') + ' controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</video>')\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on() \r\n    editor.events.focus(true) \r\n    editor.selection.restore() \r\n\r\n    editor.undo.saveStep() \r\n\r\n    // Insert marker and then replace it with the video.\r\n    if (editor.opts.videoSplitHTML) {\r\n      editor.markers.split() \r\n    }\r\n    else {\r\n      editor.markers.insert() \r\n    }\r\n\r\n    editor.html.wrap() \r\n    const $marker = editor.$el.find('.fr-marker') \r\n\r\n    // Do not insert video inside emoticon.\r\n    if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n      $marker.insertAfter($marker.parent()) \r\n    }\r\n\r\n    $marker.replaceWith($video) \r\n\r\n    editor.selection.clear() \r\n\r\n    if ($video.find('video').get(0).readyState > $video.find('video').get(0).HAVE_FUTURE_DATA || editor.helpers.isIOS()) {\r\n      loadCallback.call($video.find('video').get(0)) \r\n    }\r\n    else {\r\n      $video.find('video').on('canplaythrough load', loadCallback) \r\n    }\r\n\r\n    return $video \r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    e.preventDefault() \r\n    e.stopPropagation() \r\n\r\n    let c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null) \r\n    let c_y = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null) \r\n\r\n    if (!c_x || !c_y) {\r\n\r\n      return false \r\n    }\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n\r\n      // See if the entire editor is inside iframe to adjust starting offsets.\r\n      const oel = editor.$oel.get(0) \r\n      const { ownerDocument : doc } = oel \r\n      const win = doc.defaultView || doc.parentWindow \r\n      let editor_inside_iframe = false \r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE)) \r\n      }\r\n      catch (ex) {\r\n      }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        c_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft \r\n\r\n        // Override c_y with clientY attribute.\r\n        c_y = e.clientY + editor.helpers.getPX($(win.frameElement).offset().top) + win.frameElement.clientTop \r\n      }\r\n    }\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n    $handler = $(this) \r\n    $handler.data('start-x', c_x) \r\n    $handler.data('start-y', c_y) \r\n    $overlay.show() \r\n    editor.popups.hideAll() \r\n\r\n    _unmarkExit() \r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    if ($handler) {\r\n      e.preventDefault()\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null) \r\n      const c_y = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null) \r\n\r\n      if (!c_x || !c_y) {\r\n\r\n        return false \r\n      }\r\n\r\n      const s_x = $handler.data('start-x') \r\n      const s_y = $handler.data('start-y') \r\n\r\n      $handler.data('start-x', c_x) \r\n      $handler.data('start-y', c_y) \r\n\r\n      let diff_x = c_x - s_x \r\n      let diff_y = c_y - s_y \r\n\r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      const width = $video_obj.width() \r\n      const height = $video_obj.height() \r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x \r\n      }\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hne')) {\r\n        diff_y = 0 - diff_y \r\n      }\r\n\r\n      $video_obj.css('width', width + diff_x) \r\n      $video_obj.css('height', height + diff_y) \r\n      $video_obj.removeAttr('width') \r\n      $video_obj.removeAttr('height') \r\n\r\n      _repositionResizer() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    if ($handler && $current_video) {\r\n      if (e) e.stopPropagation() \r\n      $handler = null \r\n      $overlay.hide() \r\n      _repositionResizer() \r\n      _showEditPopup() \r\n\r\n      editor.undo.saveStep() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>` \r\n  }\r\n\r\n  function _resizeVideo(e, initPageX, direction, step) {\r\n    e.pageX = initPageX \r\n    e.pageY = initPageX \r\n    _handlerMousedown.call(this, e) \r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step)) \r\n    e.pageY = e.pageY + direction * Math.floor(Math.pow(1.1, step)) \r\n    _handlerMousemove.call(this, e) \r\n    _handlerMouseup.call(this, e) \r\n\r\n    return ++step \r\n  }\r\n\r\n  /**\r\n   * Init video resizer.\r\n   */\r\n  function _initResizer() {\r\n    let doc \r\n\r\n    // No shared video resizer.\r\n    if (!editor.shared.$video_resizer) {\r\n\r\n      // Create shared video resizer.\r\n      editor.shared.$video_resizer = $(document.createElement('div')).attr('class', 'fr-video-resizer')\r\n      $video_resizer = editor.shared.$video_resizer \r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($video_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation() \r\n      }, true) \r\n\r\n      // video resize is enabled.\r\n      if (editor.opts.videoResize) {\r\n        $video_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se')) \r\n\r\n        // Add video resizer overlay and set it.\r\n        editor.shared.$vid_overlay = $(document.createElement('div')).attr('class', 'fr-video-overlay')\r\n        $overlay = editor.shared.$vid_overlay \r\n        doc = $video_resizer.get(0).ownerDocument \r\n        $(doc).find('body').first().append($overlay) \r\n      }\r\n    }\r\n    else {\r\n      $video_resizer = editor.shared.$video_resizer \r\n      $overlay = editor.shared.$vid_overlay \r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($video_resizer.removeClass('fr-active'))\r\n      }, true) \r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $video_resizer.html('').removeData().remove() \r\n      $video_resizer = null \r\n\r\n      if (editor.opts.videoResize) {\r\n        $overlay.remove() \r\n        $overlay = null \r\n      }\r\n    }, true) \r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize.video', function () {\r\n        _exitEdit(true) \r\n      }) \r\n    }\r\n\r\n    // video resize is enabled.\r\n    if (editor.opts.videoResize) {\r\n      doc = $video_resizer.get(0).ownerDocument \r\n\r\n      editor.events.$on($video_resizer, editor._mousedown, '.fr-handler', _handlerMousedown) \r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove) \r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup) \r\n\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup) \r\n\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1 \r\n      let prevKey = null \r\n      let prevTimestamp = 0 \r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_video) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey \r\n          const keycode = e.which \r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1 \r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase video size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeVideo.call(this, e, 1, 1, step) \r\n          }\r\n\r\n          // Decrease video size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeVideo.call(this, e, 2, -1, step) \r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode \r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp \r\n        }\r\n      }) \r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1 \r\n      }) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Keep videos in sync when content changed.\r\n   */\r\n  let videos \r\n\r\n  function _syncVideos() {\r\n\r\n    // Get current videos.\r\n    const c_videos = Array.prototype.slice.call(editor.el.querySelectorAll('video, .fr-video > *')) \r\n\r\n    // Current videos src.\r\n    const video_srcs = [] \r\n    let i \r\n\r\n    for (i = 0; i < c_videos.length; i++) {\r\n      video_srcs.push(c_videos[i].getAttribute('src')) \r\n\r\n      $(c_videos[i]).toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n      if (c_videos[i].getAttribute('class') === '') c_videos[i].removeAttribute('class') \r\n\r\n      if (c_videos[i].getAttribute('style') === '') c_videos[i].removeAttribute('style') \r\n    }\r\n\r\n    // Loop previous videos and check their src.\r\n    if (videos) {\r\n      for (i = 0; i < videos.length; i++) {\r\n        if (video_srcs.indexOf(videos[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('video.removed', [$(videos[i])]) \r\n        }\r\n      }\r\n    }\r\n\r\n    // Current videos are the old ones.\r\n    videos = c_videos \r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n  function _repositionResizer() {\r\n    if (!$video_resizer) _initResizer(); \r\n\r\n    (editor.$wp || editor.$sc).append($video_resizer) \r\n    $video_resizer.data('instance', editor) \r\n    const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`) \r\n   \r\n\r\n    let iframePaddingLeft = 0\r\n    let iframePaddingTop = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $video_resizer\r\n      .css('top', (editor.opts.iframe ? $video_obj.offset().top + iframePaddingTop - 1 : $video_obj.offset().top - editor.$wp.offset().top - 1) + editor.$wp.scrollTop())\r\n      .css('left', (editor.opts.iframe ? $video_obj.offset().left + iframePaddingLeft - 1 : $video_obj.offset().left - editor.$wp.offset().left - 1) + editor.$wp.scrollLeft())\r\n      .css('width', $video_obj.get(0).getBoundingClientRect().width)\r\n      .css('height', $video_obj.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active') \r\n  }\r\n\r\n  /**\r\n   * Edit video.\r\n   */\r\n  let touchScroll \r\n\r\n  function _edit(e) {\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true \r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation() \r\n      e.preventDefault() \r\n\r\n      return false \r\n    }\r\n\r\n    if (editor.edit.isDisabled()) {\r\n\r\n      return false \r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('video.hideResizer') \r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable() \r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur() \r\n      editor.$el.blur() \r\n      editor.events.enableBlur() \r\n    }\r\n\r\n    // Unselect all other videos.\r\n    editor.$el.find('.fr-video.fr-active').removeClass('fr-active') \r\n\r\n    $current_video = $(this) \r\n    $current_video.addClass('fr-active') \r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe() \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n\r\n    editor.selection.clear() \r\n    editor.button.bulkRefresh() \r\n\r\n    editor.events.trigger('image.hideResizer') \r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n  function _exitEdit(force_exit) {\r\n    if ($current_video && (_canExit() || force_exit === true)) {\r\n      $video_resizer.removeClass('fr-active') \r\n\r\n      editor.toolbar.enable() \r\n\r\n      $current_video.removeClass('fr-active') \r\n      $current_video = null \r\n\r\n      _unmarkExit() \r\n    }\r\n  }\r\n\r\n  editor.shared.vid_exit_flag = false \r\n\r\n  function _markExit() {\r\n    editor.shared.vid_exit_flag = true \r\n  }\r\n\r\n  function _unmarkExit() {\r\n    editor.shared.vid_exit_flag = false \r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return editor.shared.vid_exit_flag \r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const { dataTransfer : dt } = e.originalEvent \r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const vid = dt.files[0] \r\n\r\n      if (vid && vid.type && vid.type.indexOf('video') !== -1) {\r\n        if (!editor.opts.videoUpload) {\r\n          e.preventDefault() \r\n          e.stopPropagation() \r\n\r\n          return false \r\n        }\r\n\r\n\r\n        editor.markers.remove() \r\n        editor.markers.insertAtPoint(e.originalEvent) \r\n        editor.$el.find('.fr-marker').replaceWith(FE.MARKERS) \r\n\r\n        // Hide popups.\r\n        editor.popups.hideAll() \r\n\r\n        // Show the video insert popup.\r\n        let $popup = editor.popups.get('video.insert') \r\n\r\n        if (!$popup) $popup = _initInsertPopup() \r\n        editor.popups.setContainer('video.insert', editor.$sc) \r\n        editor.popups.show('video.insert', e.originalEvent.pageX, e.originalEvent.pageY) \r\n        showProgressBar() \r\n\r\n        // Dropped file is an video that we allow.\r\n        if (editor.opts.videoAllowedTypes.indexOf(vid.type.replace(/video\\//g, '')) >= 0) {\r\n\r\n          // Upload videos.\r\n          upload(dt.files) \r\n        }\r\n        else {\r\n          _throwError(BAD_FILE_TYPE) \r\n        }\r\n\r\n        // Cancel anything else.\r\n        e.preventDefault() \r\n        e.stopPropagation() \r\n\r\n        return false \r\n      }\r\n    }\r\n  }\r\n\r\n  function _browserUpload(video) {\r\n\r\n    // if current video is embedded video,remove it.\r\n    if ($current_video && $current_video.find('iframe') && $current_video.find('iframe').length) {\r\n      remove() \r\n    }\r\n    const reader = new FileReader() \r\n\r\n    reader.onload = function () {\r\n      let { result : link } = reader \r\n\r\n      // Convert image to local blob.\r\n      const binary = atob(reader.result.split(',')[1]) \r\n      const array = [] \r\n\r\n      for (let i = 0; i < binary.length; i++) {\r\n        array.push(binary.charCodeAt(i)) \r\n      }\r\n\r\n      // Get local image link.\r\n      link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n        type: video.type\r\n      })) \r\n\r\n      insertHtmlVideo(link, false, null, $current_video) \r\n    } \r\n\r\n    showProgressBar() \r\n\r\n    reader.readAsDataURL(video)\r\n  }\r\n\r\n  /**\r\n   * Do video upload.\r\n   */\r\n  function upload(videos) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof videos != 'undefined' && videos.length > 0) {\r\n\r\n      // Check if we should cancel the video upload.\r\n      if (editor.events.trigger('video.beforeUpload', [videos]) === false) {\r\n\r\n        return false \r\n      }\r\n\r\n      const video = videos[0] \r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.videoUploadURL === null || editor.opts.videoUploadURL == DEFAULT_VIDEO_UPLOAD_URL) && !editor.opts.videoUploadToS3 && !editor.opts.videoUploadToAzure) {\r\n        _browserUpload(video)\r\n\r\n        return false \r\n      }\r\n\r\n      // Check video max size.\r\n      if (video.size > editor.opts.videoMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED) \r\n\r\n        return false \r\n      }\r\n\r\n      // Check video types.\r\n      if (editor.opts.videoAllowedTypes.indexOf(video.type.replace(/video\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE) \r\n\r\n        return false \r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data \r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null \r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key \r\n\r\n        // Upload to S3.\r\n        if (editor.opts.videoUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.videoUploadToS3.keyStart + (new Date()).getTime() + '-' + (video.name || 'untitled')) \r\n          form_data.append('success_action_status', '201') \r\n          form_data.append('X-Requested-With', 'xhr') \r\n          form_data.append('Content-Type', video.type) \r\n\r\n          for (key in editor.opts.videoUploadToS3.params) {\r\n            if (editor.opts.videoUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.videoUploadToS3.params[key]) \r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.videoUploadParams) {\r\n          if (editor.opts.videoUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.videoUploadParams[key]) \r\n          }\r\n        }\r\n\r\n        // Set the video in the request.\r\n        form_data.append(editor.opts.videoUploadParam, video) \r\n\r\n        // Create XHR request.\r\n        let { videoUploadURL : url } = editor.opts \r\n\r\n        if (editor.opts.videoUploadToS3) {\r\n          if (editor.opts.videoUploadToS3.uploadURL) {\r\n            ({ uploadURL : url } = editor.opts.videoUploadToS3 );\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.videoUploadToS3.region}.amazonaws.com/${editor.opts.videoUploadToS3.bucket}` \r\n          }\r\n        }\r\n        let videoURL\r\n        let azureKey\r\n        let videoUploadMethod = editor.opts.videoUploadMethod\r\n        if (editor.opts.videoUploadToAzure) {\r\n          if (editor.opts.videoUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.videoUploadToAzure.uploadURL}/${video.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.videoUploadToAzure.account}.blob.core.windows.net/${editor.opts.videoUploadToAzure.container}/${video.name}`)\r\n          }\r\n          videoURL = url\r\n          if (editor.opts.videoUploadToAzure.SASToken) {\r\n            url +=  editor.opts.videoUploadToAzure.SASToken\r\n          }\r\n          videoUploadMethod = 'PUT'\r\n        }\r\n\r\n        const xhr = editor.core.getXHR(url, videoUploadMethod) \r\n\r\n        if (editor.opts.videoUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.videoUploadToAzure.SASToken && editor.opts.videoUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.videoUploadToAzure.account\r\n            let azureContainer = editor.opts.videoUploadToAzure.container\r\n            if(editor.opts.videoUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.videoUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + video.name)\r\n            let stringToSign = videoUploadMethod + '\\n\\n\\n' + video.size + '\\n\\n' + video.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.videoUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", video.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.videoUploadParams) {\r\n            if (editor.opts.videoUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.videoUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.videoUploadToAzure.params) {\r\n            if (editor.opts.videoUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.videoUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        // Set upload events.\r\n        xhr.onload = function () {\r\n          _videoUploaded.call(xhr, $current_video, videoURL, azureKey) \r\n        } \r\n        xhr.onerror = _videoUploadError \r\n        xhr.upload.onprogress = _videoUploadProgress \r\n        xhr.onabort = _videoUploadAborted \r\n\r\n        showProgressBar() \r\n        editor.events.disableBlur() \r\n        editor.edit.off() \r\n        editor.events.enableBlur() \r\n\r\n        const $popup = editor.popups.get('video.insert') \r\n\r\n        if ($popup) {\r\n          $($popup.off('abortUpload')).on('abortUpload', function () {\r\n            if (xhr.readyState != 4) {\r\n              xhr.abort() \r\n            }\r\n          })\r\n        }\r\n\r\n        // Send data.\r\n        xhr.send(editor.opts.videoUploadToAzure ? video : form_data)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-video-upload-layer', function () {\r\n      $(this).addClass('fr-drop') \r\n\r\n      return false \r\n    }, true) \r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-video-upload-layer', function () {\r\n      $(this).removeClass('fr-drop') \r\n\r\n      return false \r\n    }, true) \r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-video-upload-layer', function (e) {\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n\r\n      $(this).removeClass('fr-drop') \r\n\r\n      const { dataTransfer : dt } = e.originalEvent \r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor \r\n        inst.events.disableBlur() \r\n        inst.video.upload(dt.files) \r\n        inst.events.enableBlur() \r\n      }\r\n    }, true) \r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-video-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click') \r\n      }, true) \r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-video-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor \r\n        inst.events.disableBlur() \r\n        $popup.find('input:focus').blur() \r\n        inst.events.enableBlur() \r\n        inst.video.upload(this.files) \r\n      }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('') \r\n    }, true) \r\n  }\r\n\r\n  /**\r\n   * Init the video events.\r\n   */\r\n  function _initEvents() {\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop, true) \r\n\r\n    editor.events.on('mousedown window.mousedown', _markExit) \r\n    editor.events.on('window.touchmove', _unmarkExit) \r\n    editor.events.on('mouseup window.mouseup', _exitEdit) \r\n\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit() \r\n      }\r\n    }) \r\n\r\n    editor.events.on('video.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      _exitEdit(true) \r\n    }) \r\n  }\r\n\r\n  /**\r\n   * Throw a video error.\r\n   */\r\n\r\n  function _throwError(code, response) {\r\n    editor.edit.on() \r\n\r\n    if ($current_video) $current_video.find('video').addClass('fr-error') \r\n    _showErrorMessage(editor.language.translate('Something went wrong. Please try again.')) \r\n\r\n    editor.events.trigger('video.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response\r\n    ]) \r\n  }\r\n\r\n  /**\r\n   * Init the video edit popup.\r\n   */\r\n  function _initEditPopup() {\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n\r\n    if (editor.opts.videoEditButtons.length > 0) {\r\n      if (editor.opts.videoResponsive) {\r\n        if (editor.opts.videoEditButtons.indexOf('videoSize') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoSize'), 1)\r\n        }\r\n        if (editor.opts.videoEditButtons.indexOf('videoDisplay') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoDisplay'), 1) \r\n        }\r\n        if (editor.opts.videoEditButtons.indexOf('videoAlign') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoAlign'), 1) \r\n        }\r\n      }\r\n\r\n      video_buttons += `<div class=\"fr-buttons\"> \r\n      ${editor.button.buildList(editor.opts.videoEditButtons)} \r\n      </div>` \r\n\r\n      const template = {\r\n        buttons: video_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('video.edit', template) \r\n\r\n      editor.events.$on(editor.$wp, 'scroll.video-edit', function () {\r\n        if ($current_video && editor.popups.isVisible('video.edit')) {\r\n\r\n          editor.events.disableBlur() \r\n          _editVideo($current_video) \r\n        }\r\n      }) \r\n\r\n      return $popup \r\n    }\r\n\r\n    return false \r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n  function _refreshSizePopup() {\r\n    if ($current_video) {\r\n      const $popup = editor.popups.get('video.size') \r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n       \r\n      $popup.find('input[name=\"width\"]').val($video_obj.get(0).style.width || $video_obj.attr('width')).trigger('change') \r\n      $popup.find('input[name=\"height\"]').val($video_obj.get(0).style.height || $video_obj.attr('height')).trigger('change') \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('video.size') \r\n\r\n    if (!$popup) $popup = _initSizePopup() \r\n    hideProgressBar() \r\n    editor.popups.refresh('video.size') \r\n    editor.popups.setContainer('video.size', editor.$sc)\r\n    const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n    const left = $video_obj.offset().left + $video_obj.outerWidth() / 2\r\n    const top = $video_obj.offset().top + $video_obj.height()\r\n  \r\n    editor.popups.show('video.size', left, top, $video_obj.height(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the video upload popup.\r\n   */\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('video.size', _refreshSizePopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n    video_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.videoSizeButtons)}</div>` \r\n\r\n    // Size layer.\r\n    let size_layer = '' \r\n    size_layer = `<div class=\"fr-video-size-layer fr-layer fr-active\" id=\"fr-video-size-layer-${editor.id}\"><div class=\"fr-video-group\"><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-width-${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-height-${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: video_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('video.size', template) \r\n\r\n    editor.events.$on(editor.$wp, 'scroll', function () {\r\n      if ($current_video && editor.popups.isVisible('video.size')) {\r\n\r\n        editor.events.disableBlur() \r\n        _editVideo($current_video) \r\n      }\r\n    }) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Get video alignment.\r\n   */\r\n  function getAlign($video) {\r\n    if (typeof $video == 'undefined') $video = $current_video \r\n\r\n    if ($video) {\r\n\r\n      // Video has left class.\r\n      if ($video.hasClass('fr-fvl')) {\r\n\r\n        return 'left' \r\n      }\r\n\r\n      // Video has right class.\r\n      else if ($video.hasClass('fr-fvr')) {\r\n\r\n        return 'right' \r\n      }\r\n\r\n      // Video has display class set.\r\n      else if ($video.hasClass('fr-dvb') || $video.hasClass('fr-dvi')) {\r\n\r\n        return 'center' \r\n      }\r\n      else {\r\n\r\n        // Video has display block.\r\n        if ($video.css('display') == 'block') {\r\n\r\n          // Margin left is 0.\r\n          // Margin right is auto.\r\n          if ($video.css('text-algin') == 'left') {\r\n            return 'left' \r\n          }\r\n\r\n          // Margin left is auto.\r\n          // Margin right is 0.\r\n          else if ($video.css('text-align') == 'right') {\r\n            return 'right' \r\n          }\r\n        }\r\n\r\n        // Display inline.\r\n        else {\r\n\r\n          // Float left.\r\n          if ($video.css('float') == 'left') {\r\n            return 'left' \r\n          }\r\n\r\n          // Float right.\r\n          else if ($video.css('float') == 'right') {\r\n            return 'right' \r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return 'center' \r\n  }\r\n\r\n  /**\r\n   * Align video.\r\n   */\r\n  function align(val) {\r\n    $current_video.removeClass('fr-fvr fr-fvl') \r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'left') {\r\n        $current_video.addClass('fr-fvl') \r\n      }\r\n      else if (val == 'right') {\r\n        $current_video.addClass('fr-fvr') \r\n      }\r\n    }\r\n    else {\r\n      _setStyle($current_video, getDisplay(), val) \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n    editor.selection.clear() \r\n  }\r\n\r\n  /**\r\n   * Refresh the align icon.\r\n   */\r\n  function refreshAlign($btn) {\r\n    if (!$current_video) return false \r\n\r\n    $btn.find('>*').first().replaceWith(editor.icon.create(`video-align-${getAlign()}`)) \r\n  }\r\n\r\n  /**\r\n   * Refresh the align option from the dropdown.\r\n   */\r\n  function refreshAlignOnShow($btn, $dropdown) {\r\n    if ($current_video) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getAlign()}\"]`).addClass('fr-active').attr('aria-selected', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get video display.\r\n   */\r\n  function getDisplay($video) {\r\n    if (typeof $video == 'undefined') $video = $current_video \r\n\r\n    // Set float to none.\r\n    const flt = $video.css('float') \r\n    $video.css('float', 'none') \r\n\r\n    // Video has display block.\r\n    if ($video.css('display') == 'block') {\r\n\r\n      // Set float to the initial value.\r\n      $video.css('float', '') \r\n\r\n      if ($video.css('float') != flt) $video.css('float', flt) \r\n\r\n      return 'block' \r\n    }\r\n\r\n    // Display inline.\r\n    else {\r\n\r\n      // Set float.\r\n      $video.css('float', '') \r\n\r\n      if ($video.css('float') != flt) $video.css('float', flt) \r\n\r\n      return 'inline' \r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Set video display.\r\n   */\r\n  function display(val) {\r\n    $current_video.removeClass('fr-dvi fr-dvb') \r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'inline') {\r\n        $current_video.addClass('fr-dvi') \r\n      }\r\n      else if (val == 'block') {\r\n        $current_video.addClass('fr-dvb') \r\n      }\r\n    }\r\n    else {\r\n      _setStyle($current_video, val, getAlign()) \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n    editor.selection.clear() \r\n  }\r\n\r\n  /**\r\n   * Refresh the video display selected option.\r\n   */\r\n  function refreshDisplayOnShow($btn, $dropdown) {\r\n    if ($current_video) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getDisplay()}\"]`).addClass('fr-active').attr('aria-selected', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the replace popup.\r\n   */\r\n\r\n  function replace() {\r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    if (!editor.popups.isVisible('video.insert')) {\r\n      hideProgressBar() \r\n      editor.popups.refresh('video.insert') \r\n      editor.popups.setContainer('video.insert', editor.$sc) \r\n    }\r\n\r\n    const left = $current_video.offset().left + ($current_video.outerWidth()) / 2\r\n    const top = $current_video.offset().top + $current_video.height()\r\n   \r\n    editor.popups.show('video.insert', left, top, $current_video.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Remove current selected video.\r\n   */\r\n  function remove() {\r\n    if ($current_video) {\r\n      if (editor.events.trigger('video.beforeRemove', [$current_video]) !== false) {\r\n        const $video = $current_video \r\n        editor.popups.hideAll() \r\n        _exitEdit(true) \r\n\r\n        editor.selection.setBefore($video.get(0)) || editor.selection.setAfter($video.get(0)) \r\n        $video.remove() \r\n        editor.selection.restore() \r\n\r\n        editor.html.fillEmptyBlocks() \r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar() \r\n  }\r\n\r\n  function _setStyle($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert style to classes.\r\n   */\r\n  function _convertStyleToClasses($video) {\r\n    if (!$video.hasClass('fr-dvi') && !$video.hasClass('fr-dvb')) {\r\n      $video.addClass(`fr-fv${getAlign($video)[0]}`) \r\n      $video.addClass(`fr-dv${getDisplay($video)[0]}`) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert classes to style.\r\n   */\r\n  function _convertClassesToStyle($video) {\r\n    const d = $video.hasClass('fr-dvb') ? 'block' : $video.hasClass('fr-dvi') ? 'inline' : null \r\n    const a = $video.hasClass('fr-fvl') ? 'left' : $video.hasClass('fr-fvr') ? 'right' : getAlign($video) \r\n\r\n    _setStyle($video, d, a) \r\n\r\n    $video.removeClass('fr-dvb fr-dvi fr-fvr fr-fvl') \r\n  }\r\n\r\n  /**\r\n   * Refresh video list.\r\n   */\r\n  function _refreshVideoList() {\r\n\r\n    // Find possible candidates that are not wrapped.\r\n    const candidates = editor.$el.find('video').filter(function () {\r\n\r\n      return $(this).parents('span.fr-video').length === 0 \r\n    })\r\n    \r\n    if(candidates.length == 0){\r\n      return\r\n    }\r\n\r\n    candidates.wrap($(document.createElement('span')).attr('class', 'fr-video fr-deletable').attr('contenteditable', 'false')) \r\n\r\n    editor.$el.find('embed, iframe').filter(function () {\r\n      if (editor.browser.safari && this.getAttribute('src')) {\r\n        this.setAttribute('src', this.src) \r\n      }\r\n\r\n      if ($(this).parents('span.fr-video').length > 0) return false \r\n\r\n      const link = $(this).attr('src') \r\n\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        const vp = FE.VIDEO_PROVIDERS[i] \r\n\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n\r\n          return true \r\n        }\r\n      }\r\n\r\n      return false \r\n    }).map(function () {\r\n      return $(this).parents('object').length === 0 ? this : $(this).parents('object').get(0) \r\n    }).wrap($(document.createElement('span')).attr('class', 'fr-video').attr('contenteditable','false')) \r\n\r\n    const videos = editor.$el.find('span.fr-video, video') \r\n\r\n    for (let i = 0; i < videos.length; i++) {\r\n      const $video = $(videos[i]) \r\n\r\n      if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n        _convertStyleToClasses($video) \r\n\r\n        if (!editor.opts.videoTextNear) {\r\n          $video.removeClass('fr-dvi').addClass('fr-dvb') \r\n        }\r\n      }\r\n      else if (!editor.opts.htmlUntouched && !editor.opts.useClasses) {\r\n        _convertClassesToStyle($video) \r\n      }\r\n    }\r\n\r\n    videos.toggleClass('fr-draggable', editor.opts.videoMove) \r\n  }\r\n\r\n  function _init() {\r\n    if (editor.opts.videoResponsive) {\r\n      editor.opts.videoResize = false \r\n    }\r\n\r\n    _initEvents() \r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', 'span.fr-video', function () {\r\n        touchScroll = false \r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true \r\n      }) \r\n    }\r\n\r\n    editor.events.on('html.set', _refreshVideoList) \r\n    _refreshVideoList() \r\n\r\n    editor.events.$on(editor.$el, 'mousedown', 'span.fr-video', function (e) {\r\n      e.stopPropagation() \r\n\r\n      // initialize drag and drop on blocks for traditional browsers\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        // https://github.com/froala/wysiwyg-editor/issues/3608\r\n        if (!e.target.innerText) {\r\n          e.target.dragDrop()\r\n          _edit.call(this, e)\r\n        }\r\n      }\r\n    })\r\n    editor.events.$on(editor.$el, 'click touchend', 'span.fr-video', function (e) {\r\n      // https://github.com/froala/wysiwyg-editor/issues/3608\r\n      // When contenteditable attribute is not allowed, user will be able press enter,\r\n      // which will copy fr-video class within p tag causes #3608\r\n      if (e.target.innerText.length || $(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      _edit.call(this, e)\r\n    }) \r\n\r\n    editor.events.on('keydown', function (e) {\r\n      const key_code = e.which \r\n\r\n      if ($current_video && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n        e.preventDefault() \r\n        remove() \r\n        editor.undo.saveStep() \r\n\r\n        return false \r\n      }\r\n\r\n      if ($current_video && key_code == FE.KEYCODE.ESC) {\r\n        _exitEdit(true) \r\n        e.preventDefault() \r\n\r\n        return false \r\n      }\r\n\r\n      if ($current_video && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n        e.preventDefault() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_video) {\r\n        editor.events.disableBlur() \r\n        editor.events.focus() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_video) {\r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // Make sure we don't leave empty tags.\r\n    editor.events.on('keydown', function () {\r\n      editor.$el.find('span.fr-video:empty').remove() \r\n    })\r\n\r\n    if (editor.$wp) {\r\n      _syncVideos() \r\n      editor.events.on('contentChanged', _syncVideos) \r\n    }\r\n\r\n    _initInsertPopup(true) \r\n    _initSizePopup(true) \r\n  }\r\n  function toggleAutoplayStyle(color){\r\n    document.getElementById(`autoplay-${editor.id}`).style.cssText=`background:${color}`\r\n\r\n  }\r\n  /**\r\n   * Autoplay video after insert\r\n   */\r\n  function setAutoplay(){\r\n    \r\n    let $video_obj\r\n    if ($current_video.find('iframe, embed, audio').get(0)) {\r\n      $video_obj = $current_video.find('iframe, embed, audio')\r\n      if($video_obj.get(0).src.includes('autoplay=1')){\r\n        toggleAutoplayStyle('#FFFFFF')\r\n        $video_obj.get(0).src= $video_obj.get(0).src.replace('&autoplay=1','')\r\n       }else{\r\n        toggleAutoplayStyle('#D6D6D6')\r\n        $video_obj.get(0).src=$video_obj.get(0).src + '&autoplay=1'\r\n       }\r\n    } \r\n    else {\r\n      const addAutoplay = \"autoplay\";\r\n      $video_obj = $current_video.find('iframe, embed, video')\r\n      if($video_obj.get(0).outerHTML.includes('autoplay')){\r\n        toggleAutoplayStyle('#FFFFFF')\r\n        $video_obj.get(0).outerHTML= $video_obj.get(0).outerHTML.replace('autoplay','')\r\n       }else{\r\n        toggleAutoplayStyle('#D6D6D6')\r\n          let indexofAutoplay=$video_obj.get(0).outerHTML.indexOf('class') -1\r\n          $video_obj.get(0).outerHTML = [$video_obj.get(0).outerHTML.slice(0, indexofAutoplay), addAutoplay, $video_obj.get(0).outerHTML.slice(indexofAutoplay)].join('');\r\n        }\r\n    }\r\n  }\r\n  /**\r\n   * Place selection around current video.\r\n   */\r\n  function _selectVideo() {\r\n    if ($current_video) {\r\n      editor.selection.clear() \r\n      const range = editor.doc.createRange() \r\n      range.selectNode($current_video.get(0)) \r\n      const selection = editor.selection.get() \r\n      selection.addRange(range) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to the video main popup.\r\n   */\r\n  function back() {\r\n    if ($current_video) {\r\n      editor.events.disableBlur() \r\n      $current_video[0].click() \r\n    }\r\n    else {\r\n      editor.events.disableBlur() \r\n      editor.selection.restore() \r\n      editor.events.enableBlur() \r\n\r\n      editor.popups.hide('video.insert') \r\n      editor.toolbar.showInline() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current video size.\r\n   */\r\n  function setSize(width, height) {\r\n    if ($current_video) {\r\n      const $popup = editor.popups.get('video.size') \r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      $video_obj.css('width', width || $popup.find('input[name=\"width\"]').val()) \r\n      $video_obj.css('height', height || $popup.find('input[name=\"height\"]').val()) \r\n\r\n      if ($video_obj.get(0).style.width) $video_obj.removeAttr('width') \r\n\r\n      if ($video_obj.get(0).style.height) $video_obj.removeAttr('height') \r\n\r\n      $popup.find('input:focus').blur() \r\n      setTimeout(function () {\r\n        $current_video.trigger('click') \r\n      }, editor.helpers.isAndroid() ? 50 : 0) \r\n    }\r\n  }\r\n\r\n  function get() {\r\n\r\n    return $current_video \r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshByURLButton: refreshByURLButton,\r\n    refreshEmbedButton: refreshEmbedButton,\r\n    refreshUploadButton: refreshUploadButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    insertEmbed: insertEmbed,\r\n    insert: insert,\r\n    align: align,\r\n    refreshAlign: refreshAlign,\r\n    refreshAlignOnShow: refreshAlignOnShow,\r\n    display: display,\r\n    refreshDisplayOnShow: refreshDisplayOnShow,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    showSizePopup: showSizePopup,\r\n    replace: replace,\r\n    back: back,\r\n    setSize: setSize,\r\n    get: get,\r\n    showProgressBar: showProgressBar,\r\n    _editVideo: _editVideo,\r\n    setAutoplay:setAutoplay\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('insertVideo', {\r\n  title: 'Insert Video',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('video.insert')) {\r\n      this.video.showInsertPopup() \r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur() \r\n        this.selection.restore() \r\n      }\r\n      this.popups.hide('video.insert') \r\n    }\r\n  },\r\n  plugin: 'video'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('insertVideo', {\r\n  NAME: 'video-camera',\r\n  FA5NAME: 'camera',\r\n  SVG_KEY: 'insertVideo'\r\n})\r\n\r\n// Video by URL button inside the insert video popup.\r\nFE.DefineIcon('videoByURL', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterCommand('videoByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-by-url') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshByURLButton($btn) \r\n  }\r\n})\r\n\r\n// Video embed button inside the insert video popup.\r\nFE.DefineIcon('videoEmbed', { NAME: 'code', SVG_KEY: 'codeView' })\r\nFE.RegisterCommand('videoEmbed', {\r\n  title: 'Embedded Code',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-embed') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshEmbedButton($btn) \r\n  }\r\n})\r\n\r\n// Video upload button inside the insert video popup.\r\nFE.DefineIcon('videoUpload', { NAME: 'upload', SVG_KEY: 'upload' })\r\nFE.RegisterCommand('videoUpload', {\r\n  title: 'Upload Video',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-upload') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshUploadButton($btn) \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoInsertByURL', {\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.video.insertByURL() \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoInsertEmbed', {\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.video.insertEmbed() \r\n  }\r\n})\r\n\r\n// Video display.\r\nFE.DefineIcon('videoDisplay', { NAME: 'star', SVG_KEY: 'star' })\r\nFE.RegisterCommand('videoDisplay', {\r\n  title: 'Display',\r\n  type: 'dropdown',\r\n  options: {\r\n    inline: 'Inline',\r\n    block: 'Break Text'\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.video.display(val) \r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.videoTextNear) $btn.addClass('fr-hidden') \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.video.refreshDisplayOnShow($btn, $dropdown) \r\n  }\r\n})\r\n\r\n// Video align.\r\nFE.DefineIcon('video-align', { NAME: 'align-left', SVG_KEY: 'align Left' })\r\nFE.DefineIcon('video-align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('video-align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('video-align-center', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\n\r\n// Video align.\r\nFE.DefineIcon('videoAlign', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.RegisterCommand('videoAlign', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'None',\r\n    right: 'Align Right'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { options } = FE.COMMANDS.videoAlign \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"videoAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`video-align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.video.align(val) \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshAlign($btn) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.video.refreshAlignOnShow($btn, $dropdown) \r\n  }\r\n})\r\n\r\n// Video replace.\r\nFE.DefineIcon('videoReplace', {\r\n  NAME: 'exchange',\r\n  FA5NAME: 'exchange-alt',\r\n  SVG_KEY: 'replaceImage'\r\n})\r\nFE.RegisterCommand('videoReplace', {\r\n  title: 'Replace',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.video.replace() \r\n  }\r\n})\r\n\r\n// Video remove.\r\nFE.DefineIcon('videoRemove', { NAME: 'trash', SVG_KEY: 'remove' })\r\nFE.RegisterCommand('videoRemove', {\r\n  title: 'Remove',\r\n  callback: function () {\r\n    this.video.remove() \r\n  }\r\n})\r\nFE.DefineIcon('autoplay', { NAME: 'autoplay', SVG_KEY: 'autoplay' })\r\nFE.RegisterCommand('autoplay', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Autoplay',\r\n  callback: function () {\r\n    this.video.setAutoplay()\r\n  } \r\n})\r\n// Video size.\r\nFE.DefineIcon('videoSize', { NAME: 'arrows-alt', SVG_KEY: 'imageSize' })\r\nFE.RegisterCommand('videoSize', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Change Size',\r\n  callback: function () {\r\n    this.video.showSizePopup() \r\n  }\r\n}) \r\n\r\n// Video back.\r\nFE.DefineIcon('videoBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('videoBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.video.back() \r\n  },\r\n  refresh: function ($btn) {\r\n    const $current_video = this.video.get() \r\n\r\n    if (!$current_video && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden') \r\n      $btn.next('.fr-separator').addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden') \r\n      $btn.next('.fr-separator').removeClass('fr-hidden') \r\n    }\r\n  }\r\n}) \r\n\r\nFE.RegisterCommand('videoDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\r\n    this.video.hideProgressBar(true) \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoSetSize', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.video.setSize() \r\n  }\r\n})\r\n","import FE from '../index.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  wordDeniedTags: [],\r\n  wordDeniedAttrs: [],\r\n  wordAllowedStyleProps: ['font-family', 'font-size', 'background', 'color', 'width', 'text-align', 'vertical-align', 'background-color', 'padding', 'margin', 'height', 'margin-top', 'margin-left', 'margin-right', 'margin-bottom', 'text-decoration', 'font-weight', 'font-style', 'text-indent', 'border', 'border-.*', 'line-height', 'list-style-type'],\r\n  wordPasteModal: true,\r\n  wordPasteKeepFormatting: true\r\n})\r\n\r\nFE.PLUGINS.wordPaste = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let $modal\r\n  const modal_id = 'word_paste'\r\n  let clipboard_html\r\n  const _v_shapes_map = {}\r\n\r\n  /*\r\n   * Init Word Paste.\r\n   */\r\n  function _init() {\r\n    editor.events.on('paste.wordPaste', function (html) {\r\n      clipboard_html = html\r\n\r\n      if (editor.opts.wordPasteModal) {\r\n        _showModal()\r\n      }\r\n      else {\r\n        clean(editor.opts.wordPasteKeepFormatting)\r\n      }\r\n\r\n      return false\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Build html body.\r\n   */\r\n  function _buildModalBody() {\r\n\r\n    // Begin body.\r\n    let body = '<div class=\"fr-word-paste-modal\" style=\"padding: 20px 20px 10px 20px;\">'\r\n    body += '<p style=\"text-align: left;\">' + editor.language.translate('The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?') + '</p>'\r\n    body += '<div style=\"text-align: right; margin-top: 50px;\"><button class=\"fr-remove-word fr-command\">' + editor.language.translate('Clean') + '</button> <button class=\"fr-keep-word fr-command\">' + editor.language.translate('Keep') + '</button></div>'\r\n\r\n    // End body.\r\n    body += '</div>'\r\n\r\n    return body\r\n  }\r\n\r\n  /*\r\n   * Show modal.\r\n   */\r\n  function _showModal() {\r\n    if (!$modal) {\r\n      const head = '<h4><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.95 73.23\" style=\"height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block\"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class=\"a\" d=\"M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z\" transform=\"translate(-575.97 -827.22)\"/><path class=\"b\" d=\"M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z\" transform=\"translate(-575.97 -827.22)\"/></svg> ' + editor.language.translate('Word Paste Detected') + '</h4>'\r\n      const body = _buildModalBody()\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n\r\n      const $body = modalHash.$body\r\n      $modal = modalHash.$modal\r\n\r\n      modalHash.$modal.addClass('fr-middle')\r\n\r\n      editor.events.bindClick($body, 'button.fr-remove-word', function () {\r\n        const inst = $modal.data('instance') || editor\r\n        inst.wordPaste.clean()\r\n      })\r\n\r\n      editor.events.bindClick($body, 'button.fr-keep-word', function () {\r\n        const inst = $modal.data('instance') || editor\r\n\r\n        inst.wordPaste.clean(true)\r\n      })\r\n\r\n      // Resize help modal on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        editor.modals.resize(modal_id)\r\n      })\r\n    }\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    // Modal may not fit window size.\r\n    editor.modals.resize(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Hide modal.\r\n   */\r\n  function _hideModal() {\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Word paste cleanup.\r\n   */\r\n  function clean(keep_formatting) {\r\n    const wordAllowedStylePropsBackup = editor.opts.wordAllowedStyleProps\r\n\r\n    if (!keep_formatting) {\r\n      editor.opts.wordAllowedStyleProps = []\r\n    }\r\n\r\n    // Firefox paste.\r\n    if (clipboard_html.indexOf('<colgroup>') === 0) {\r\n      clipboard_html = '<table>' + clipboard_html + '</table>'\r\n    }\r\n\r\n    // Replace spaces.\r\n    clipboard_html = clipboard_html.replace(/<span[\\n\\r ]*style='mso-spacerun:yes'>([\\r\\n\\u00a0 ]*)<\\/span>/g, function (str, match) {\r\n      let spaces = ''\r\n      let i = 0\r\n\r\n      while (i++ < match.length) {\r\n        spaces += '&nbsp;'\r\n      }\r\n\r\n      return spaces\r\n    })\r\n\r\n    \r\n    clipboard_html = _wordClean(clipboard_html, editor.paste.getRtfClipboard())\r\n    \r\n   \r\n\r\n    // Remove unwanted spaces.\r\n    const div = editor.doc.createElement('DIV')\r\n    div.innerHTML = clipboard_html\r\n    editor.html.cleanBlankSpaces(div)\r\n    clipboard_html = div.innerHTML\r\n\r\n    clipboard_html = editor.paste.cleanEmptyTagsAndDivs(clipboard_html)\r\n\r\n    // Remove invisible space.\r\n    clipboard_html = clipboard_html.replace(/\\u200b/g, '')\r\n\r\n    _hideModal()\r\n\r\n    // Clean the processed clipboard_html.\r\n    editor.paste.clean(clipboard_html, true, true)\r\n\r\n    editor.opts.wordAllowedStyleProps = wordAllowedStylePropsBackup\r\n  }\r\n\r\n  /**\r\n   * Remove a node. IE conpatible.\r\n   */\r\n  function _removeNode(node) {\r\n\r\n    const parent = node.parentNode\r\n\r\n    if (!parent) {\r\n\r\n      return\r\n    }\r\n\r\n    node.parentNode.removeChild(node)\r\n  }\r\n\r\n  /*\r\n   * Depth-first search traversing of the DOM.\r\n   */\r\n  function _traverse(node, callback) {\r\n\r\n    // Process node.\r\n    if (!callback(node)) {\r\n\r\n      return\r\n    }\r\n\r\n    // Expand node. Take its first child.\r\n    let child = node.firstChild\r\n\r\n    // While all childs are traversed.\r\n    while (child) {\r\n\r\n      // Store the current child.\r\n      const current_child = child\r\n\r\n      // Store the previous child.\r\n      const previous_child = child.previousSibling\r\n\r\n      // Take next child.\r\n      child = child.nextSibling\r\n\r\n      // Expand the current child.\r\n      _traverse(current_child, callback)\r\n\r\n\r\n      // An unwrap was made. Need to calculate again the next child.\r\n      if ((!current_child.previousSibling && !current_child.nextSibling && !current_child.parentNode) && child && (previous_child !== child.previousSibling) && child.parentNode) {\r\n        if (previous_child) {\r\n          child = previous_child.nextSibling\r\n        }\r\n        else {\r\n          child = node.firstChild\r\n        }\r\n      }\r\n\r\n      // A list was created. Need to calculate again the next child.\r\n      else if ((!current_child.previousSibling && !current_child.nextSibling && !current_child.parentNode) && child && (!child.previousSibling && !child.nextSibling && !child.parentNode)) {\r\n        if (previous_child) {\r\n          if (previous_child.nextSibling) {\r\n            child = previous_child.nextSibling.nextSibling\r\n          }\r\n          else {\r\n            child = null\r\n          }\r\n        }\r\n        else {\r\n          if (node.firstChild) {\r\n            child = node.firstChild.nextSibling\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Check if a node is a list. TODO: use Regex.\r\n   */\r\n  function _isList(node) {\r\n    // Check if it has mso-list:l in its style attribute.\r\n    if (!(node.getAttribute('style') && /mso-list:[\\s]*l/gi.test(node.getAttribute('style').replace(/\\n/gi, '')))) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Using try-catch to skip undefined checking.\r\n    try {\r\n      // Check mso-list.\r\n      if (!node.querySelector('[style=\"mso-list:Ignore\"]')) {\r\n        if (node.outerHTML && node.outerHTML.indexOf('<!--[if !supportLists]-->') >= 0) {\r\n          return true;\r\n        }\r\n        return false\r\n      }\r\n    }\r\n    catch (e) {\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Get list level based on level attribute from node style.\r\n   */\r\n  function _getListLevel(node) {\r\n\r\n    return node.getAttribute('style').replace(/\\n/gi, '').replace(/.*level([0-9]+?).*/gi, '$1')\r\n  }\r\n\r\n  /*\r\n   * Get list content.\r\n   */\r\n  function _getListContent(node, head_style_hash) {\r\n\r\n    const cloned_node = node.cloneNode(true)\r\n\r\n    // Some lists might be wrapped in a link. So we need to unwrap.\r\n    // if (cloned_node.firstElementChild && cloned_node.firstElementChild.tagName === 'A') {\r\n    //   cloned_node = cloned_node.firstElementChild\r\n    // }\r\n\r\n    // Heading list.\r\n    if (['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].indexOf(node.tagName) !== -1) {\r\n      const heading = document.createElement(node.tagName.toLowerCase())\r\n      heading.setAttribute('style', node.getAttribute('style'))\r\n      heading.innerHTML = cloned_node.innerHTML\r\n      cloned_node.innerHTML = heading.outerHTML\r\n    }\r\n\r\n    // Clean node recursively.\r\n    _traverse(cloned_node, function (node) {\r\n      if (node.nodeType == Node.COMMENT_NODE && (editor.browser.msie || editor.browser.safari || editor.browser.edge)) {\r\n        try {\r\n          if (node.data === '[if !supportLists]') {\r\n            node = node.nextSibling;\r\n\r\n            while (node && node.nodeType !== Node.COMMENT_NODE) {\r\n              var tmp = node.nextSibling;\r\n              node.parentNode.removeChild(node);\r\n              node = tmp;\r\n            }\r\n\r\n            if (node && node.nodeType == Node.COMMENT_NODE) {\r\n              node.parentNode.removeChild(node);\r\n            }\r\n          }\r\n        }\r\n        catch (ex) {\r\n\r\n        }\r\n      }\r\n      \r\n      if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n        // Skip the first child which is an mso-list:Ignore node.\r\n\r\n        // 1854 For handling extra characters \r\n        if (node.getAttribute('style') === 'mso-list:\\nIgnore')\r\n          node.setAttribute(\"style\",\"mso-list:Ignore\")\r\n\r\n        if (node.getAttribute('style') === 'mso-list:Ignore') {\r\n          node.parentNode.removeChild(node)\r\n        }\r\n        node.setAttribute('style', _getAllowedListStyles(node));\r\n        _cleanElement(node, head_style_hash)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Take content.\r\n    let content = cloned_node.innerHTML\r\n\r\n    // Replace comments.\r\n    content = content.replace(/<!--[\\s\\S]*?-->/gi, '')\r\n\r\n    return content\r\n  }\r\n\r\n  /*\r\n   * Build ol/ul list.\r\n   */\r\n  function _buildList(node, head_style_hash, level,prev_margin) {\r\n\r\n    // Check ol/ul.\r\n    \r\n    const order_regex = /[0-9a-zA-Z]./gi\r\n    let is_ordered = false\r\n    let prev_order;\r\n    let previous_element_sibling\r\n\r\n    let browser = navigator.userAgent.toLowerCase();\r\n    \r\n    if (browser.indexOf('safari') != -1) { \r\n      if (browser.indexOf('chrome') > -1) {\r\n        browser = 1 // Chrome\r\n      } \r\n      else {\r\n        browser = 'safari' // Safari\r\n      }\r\n    }\r\n    \r\n    if(node.innerHTML.includes('mso-list:\\nIgnore'))\r\n    {\r\n      node.innerHTML=node.innerHTML.replace(/mso-list:\\nIgnore/gi,'mso-list:Ignore')\r\n    }\r\n    \r\n    let list_type_node = node.querySelector('span[style=\"mso-list:Ignore\"]');\r\n    \r\n    //this is added to check the browser is safari as we are not getting html same as chrome\r\n    if(list_type_node == null && browser == 'safari'){\r\n      list_type_node = node.querySelector('span[lang=\"PT-BR\"]');\r\n    }\r\n    \r\n    let contents;\r\n    let listObj;\r\n    let list_tag;\r\n    let listStyle;\r\n    let startIndexUpperAlpha= 64;\r\n    let startIndexLowerAlpha=96;\r\n\r\n    // Checking the list is ordered or unordered\r\n \r\n    if (list_type_node) {\r\n      is_ordered = is_ordered || order_regex.test(list_type_node.textContent);\r\n    }\r\n    \r\n    let listType\r\n    if(list_type_node!== null)\r\n      listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n    // Get the list type\r\n    // const list_tag = is_ordered ? 'ol' : 'ul'\r\n    if (is_ordered == true) {\r\n      listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n      if (listType == '1') {\r\n        listStyle = 'decimal;'\r\n      }\r\n      else if (listType == 'i') {\r\n        listStyle = 'lower-roman;'\r\n      }\r\n      else if (listType == 'I') {\r\n        listStyle = 'upper-roman;'\r\n      }\r\n      else if (listType == 'o') {\r\n        listStyle = 'circle;'\r\n      }\r\n      //https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      // to check the bullet lists\r\n      else if(!listType.match(/^v$/)) {\r\n        if(listType.match(/^[a-z]$/) || listType.match(/^[a-z]\\)$/)){\r\n          listStyle = 'lower-alpha;'\r\n        }\r\n        else if(listType.match(/^[A-Z]$/) || listType.match(/^[A-Z]\\)$/)){\r\n          listStyle = 'upper-alpha;'\r\n        }\r\n      }\r\n\r\n      listStyle = 'list-style-type: ' + listStyle;\r\n      list_tag = 'ol'\r\n    }\r\n    else {\r\n      if(list_type_node!=null)\r\n        listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n      if(listType=='')\r\n      {\r\n        listStyle='square;'\r\n      }\r\n      else if(listType== \"\")\r\n      {\r\n        listStyle='disc;'\r\n      }\r\n\r\n      listStyle = 'list-style-type: ' + listStyle;\r\n      list_tag = 'ul';\r\n    }\r\n\r\n    // creating new list\r\n    let classType = ''\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1860\r\n    if(list_type_node != undefined && list_type_node.textContent != undefined && !isNaN(parseInt(list_type_node.textContent.trim().split('.')[1], 10))){\r\n      classType = ' class=\"decimal_type\" '\r\n    }\r\n    let s \r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n    const next_level = _getListLevel(node);\r\n    let margin = node.style.marginLeft\r\n    let size\r\n    if(margin.includes('in')){\r\n      size = 'in'\r\n      margin = parseFloat(margin) - 0.5\r\n    }\r\n    else if(margin.includes('pt')){\r\n      size = 'px'\r\n      margin = parseFloat(margin) - 10\r\n    }\r\n\r\n    if(next_level==1){\r\n\r\n      s = listStyle ? '<' + list_tag + ' style = \"' + listStyle +'; margin-left:'+ margin+ size + ';\">' : '<' + list_tag  +' style=\"margin-left:'+margin+size+';\"'+ '>';\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      if(listStyle == 'list-style-type: upper-alpha;'){\r\n        let index= listType.charCodeAt(0) - startIndexUpperAlpha;\r\n        s = listStyle ? '<' + list_tag + classType +' start=\"'+index+'\"' + ' style = \"' + listStyle +' margin-left:'+ margin+ size + ';\">' : '<' + list_tag  + '>';\r\n      }\r\n      else if(listStyle == 'list-style-type: lower-alpha;'){  \r\n        let index= listType.charCodeAt(0) - startIndexLowerAlpha;\r\n        s = listStyle ? '<' + list_tag +  classType+' start=\"'+index+'\"' + ' style = \"' + listStyle +'margin-left:'+ margin+ size + ';\">' : '<' + list_tag  + '>'; \r\n      }\r\n      else{\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle +';margin-left:'+ margin+ size + ';\">' : '<' + list_tag  +' style=\"margin-left:'+margin+size+';\"'+ '>';\r\n      }\r\n    }\r\n    else{\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      if(listStyle == 'list-style-type: upper-alpha;'){\r\n        let index= listType.charCodeAt(0) - startIndexUpperAlpha;\r\n        s = listStyle ? '<' + list_tag + classType + ' style = \"' + listStyle + ' start=\"'+index+'\">' : '<' + list_tag  + '>';\r\n      }\r\n      else if(listStyle == 'list-style-type: lower-alpha;'){  \r\n        let index= listType.charCodeAt(0) - startIndexLowerAlpha;\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle + ' start=\"'+index+'\">' : '<' + list_tag  + '>'; \r\n      }\r\n      else{\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle + '\">' : '<' + list_tag  + '>';\r\n      }\r\n    }\r\n\r\n    let tagClosedFlag = false\r\n    while (node) {\r\n      // Stop at first sibling that is not a list.\r\n      if (!_isList(node)) {\r\n\r\n        // Skip bookmarks.\r\n        if (node.outerHTML && node.outerHTML.indexOf('mso-bookmark') > 0 && (node.textContent || '').length == 0) {\r\n          node = node.nextElementSibling;\r\n          continue\r\n        }\r\n\r\n        break\r\n      }\r\n\r\n      // getting level of next node\r\n      const next_level = _getListLevel(node);\r\n\r\n      // Set the level if it's the first level or use the same\r\n      level = level || next_level;\r\n\r\n      // Create new list if next node level is greater than current one\r\n      if (next_level > level) {\r\n        listObj = _buildList(node, head_style_hash, next_level, node.style.marginLeft);\r\n        s += listObj.el.outerHTML;\r\n\r\n        // Getting the subsequent node after creating new list\r\n        node = listObj.currentNode;\r\n        // Need to start over to check if next node might be on same level\r\n        continue;\r\n      }\r\n      else if (next_level < level) {\r\n        // Lower level found. Current list is done.\r\n        break\r\n      }\r\n      else {\r\n\r\n        // Checked list tag if levels are same.(https://github.com/froala/wysiwyg-editor/issues/3088)\r\n        // Checking the order of next element.\r\n        if (node.firstElementChild && node.firstElementChild.firstElementChild && node.firstElementChild.firstElementChild.firstChild) {\r\n          order_regex.lastIndex = 0\r\n        }\r\n\r\n        // Checking the order of current element.\r\n        if (previous_element_sibling && previous_element_sibling.firstElementChild && previous_element_sibling.firstElementChild.firstElementChild && previous_element_sibling.firstElementChild.firstElementChild.firstChild) {\r\n          order_regex.lastIndex = 0\r\n          prev_order = order_regex.test(previous_element_sibling.firstElementChild.firstElementChild.firstChild.data || (previous_element_sibling.firstElementChild.firstElementChild.firstChild.firstChild && previous_element_sibling.firstElementChild.firstElementChild.firstChild.firstChild.data) || '')\r\n        }\r\n        // If levels are same,we are comparing the order of the next element.\r\n        // If the order is same it will append the element in existing list else will create a new list.\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n        // Added condition for ul and ol lists to differentiate the behavior of the list with different type of lists.\r\n        let isMarginEqual = false\r\n        if(!prev_margin && !node.style.marginLeft || (prev_margin && node.style.marginLeft && prev_margin === node.style.marginLeft)){\r\n          isMarginEqual = true\r\n        }\r\n        prev_margin = node.style.marginLeft\r\n\r\n        if (isMarginEqual || prev_order === undefined) {\r\n          contents = _getListContent(node, head_style_hash)\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1860\r\n          if(node.nextSibling.innerText != undefined && node.nextSibling.innerText != undefined && !s.includes('class=\"decimal_type\"')){\r\n            if(!isNaN(parseInt(node.nextSibling.innerText.trim().split('.')[1], 10))){\r\n              s = s.substring(3, 0) + ' class=\"decimal_type\"' + s.substring(3, s.length)\r\n            }\r\n          }\r\n\r\n          s += '<li>' + contents + '</li>'\r\n        }\r\n        else {\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n          if(next_level==1){\r\n            s += '</' + list_tag + '>'\r\n            tagClosedFlag =true\r\n            previous_element_sibling = null\r\n          }\r\n          listObj = _buildList(node, head_style_hash, next_level,node.style.marginLeft)\r\n          s += listObj.el.outerHTML\r\n          node = listObj.currentNode\r\n        }\r\n      }\r\n\r\n      // Storing the next sibling in temporary variable\r\n      let tmp = node && node.nextElementSibling;\r\n\r\n      // Check if node is there get the previous element sibling\r\n      if (tmp) {\r\n        previous_element_sibling = tmp.previousElementSibling\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1854\r\n      if (node && !_isList(node)) {\r\n        // Skip bookmarks.\r\n        if (node.outerHTML && node.outerHTML.indexOf('mso-bookmark') > 0 && (node.textContent || '').length == 0) {\r\n          node = node.nextElementSibling;\r\n          continue\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      // Remove the used node\r\n      node && node.parentNode && node.parentNode.removeChild(node)\r\n\r\n      // Restore the next sibling to node\r\n      node = tmp\r\n\r\n    }\r\n\r\n    // Finish list\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n    if(!tagClosedFlag)\r\n      s += '</' + list_tag + '>'\r\n\r\n    // Convert string to node element.\r\n    const div = document.createElement('div')\r\n    div.innerHTML = s\r\n    const element = div\r\n\r\n    // Returning list element and current node\r\n    return {\r\n      el: element,\r\n      currentNode: node\r\n    }\r\n  }\r\n\r\n  function _getAllowedListStyles(node) {\r\n    let styles = ''\r\n    let allowedStyles = ['line-height', 'font-family', 'font-size', 'color', 'background']\r\n    let parentStyles = node.getAttribute('style')\r\n\r\n    if (parentStyles) {\r\n      allowedStyles.forEach(function (style) {\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/1852\r\n        let foundVal = parentStyles.match(new RegExp(style + ':.*(;|)'))\r\n\r\n        if (foundVal) {\r\n          styles += foundVal[0] + ';'\r\n        }\r\n      })\r\n    }\r\n\r\n    return styles\r\n\r\n  }\r\n\r\n  /*\r\n   * Change tag name of an element.\r\n   */\r\n  function _changeTagName(old_node, tag_name) {\r\n\r\n    const new_node = document.createElement(tag_name)\r\n\r\n    for (let i = 0; i < old_node.attributes.length; i++) {\r\n      const attribute = old_node.attributes[i].name\r\n      new_node.setAttribute(attribute, old_node.getAttribute(attribute))\r\n    }\r\n\r\n    new_node.innerHTML = old_node.innerHTML\r\n\r\n    old_node.parentNode.replaceChild(new_node, old_node)\r\n\r\n    return new_node\r\n  }\r\n\r\n  /*\r\n   * Clean tr element.\r\n   */\r\n  function _cleanTr(tr, head_style_hash) {\r\n\r\n    // Clean tr attributes.\r\n    editor.node.clearAttributes(tr)\r\n\r\n    // Get first child.\r\n    let child = tr.firstElementChild\r\n\r\n    // Total table width.\r\n    let total_width = 0\r\n\r\n    // Tell if at least one child has a missing width.\r\n    let missing_width = false\r\n\r\n    // Width attribute.\r\n    let width_attr = null\r\n\r\n    // Clean td childs and calculate total table width.\r\n    while (child) {\r\n\r\n      // Cleanup w: tags.\r\n      if (child.firstElementChild && child.firstElementChild.tagName.indexOf('W:') !== -1) {\r\n        child.innerHTML = child.firstElementChild.innerHTML\r\n      }\r\n\r\n      // Add width to total.\r\n      width_attr = child.getAttribute('width')\r\n\r\n      if (!width_attr && !missing_width) {\r\n        missing_width = true\r\n      }\r\n      total_width += parseInt(width_attr, 10)\r\n\r\n      // Replace to <br> childs that are empty or &nbsp.\r\n      if (!child.firstChild || (child.firstChild && child.firstChild.data === FE.UNICODE_NBSP)) {\r\n        if (child.firstChild) {\r\n          _removeNode(child.firstChild)\r\n        }\r\n        child.innerHTML = '<br>'\r\n      }\r\n\r\n      let td_child = child.firstElementChild\r\n\r\n      // If child has more than one children, it means that every child has its own alignment.\r\n      const has_single_child = child.children.length === 1\r\n\r\n      // Change p to span or div and clean alignment on every element child.\r\n      while (td_child) {\r\n\r\n        if (td_child.tagName === 'P' && !_isList(td_child)) {\r\n          // Set alignment to td parent.\r\n          if (has_single_child) {\r\n            _cleanAlignment(td_child)\r\n          }\r\n        }\r\n\r\n        // Move to next element sibling.\r\n        td_child = td_child.nextElementSibling\r\n      }\r\n\r\n      // Add styles from head.\r\n      if (head_style_hash) {\r\n\r\n        // Style from .xl classes.\r\n        // Get class from child.\r\n        let class_attr = child.getAttribute('class')\r\n\r\n        if (class_attr) {\r\n          class_attr = _normalizeAttribute(class_attr)\r\n\r\n          // Match xl class.\r\n          const class_matches = class_attr.match(/xl[0-9]+/gi)\r\n\r\n          if (class_matches) {\r\n            const xl_class = class_matches[0]\r\n            const dot_xl_class = '.' + xl_class\r\n\r\n            if (head_style_hash[dot_xl_class]) {\r\n              _appendStyle(child, head_style_hash[dot_xl_class])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Style from td.\r\n        if (head_style_hash.td) {\r\n          _appendStyle(child, head_style_hash.td)\r\n        }\r\n      }\r\n\r\n      let style = child.getAttribute('style')\r\n\r\n      if (style) {\r\n        style = _normalizeAttribute(style)\r\n\r\n        // Add semicolon, if it is missing, to the end of current style.\r\n        if (style && style.slice(-1) !== ';') {\r\n          style += ';'\r\n        }\r\n      }\r\n\r\n      // Store valign attribute.\r\n      let valign = child.getAttribute('valign')\r\n\r\n      if (!valign && style) {\r\n        const valign_matches = style.match(/vertical-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (valign_matches) {\r\n          valign = valign_matches[valign_matches.length - 1].replace(/vertical-align:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n      }\r\n\r\n      // Store text-align style attribute.\r\n      let halign = null\r\n\r\n      if (style) {\r\n        const halign_matches = style.match(/text-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (halign_matches) {\r\n          halign = halign_matches[halign_matches.length - 1].replace(/text-align:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n\r\n        if (halign === 'general') {\r\n          halign = null\r\n        }\r\n      }\r\n\r\n      // Store background color style attribute.\r\n      let background_color = null\r\n\r\n      if (style) {\r\n        const background_matches = style.match(/background:.+?[; \"]{1,1}/gi)\r\n\r\n        if (background_matches) {\r\n          background_color = background_matches[background_matches.length - 1].replace(/background:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n      }\r\n\r\n      // Store colspan.\r\n      const colspan = child.getAttribute('colspan')\r\n\r\n      // Store rowspan.\r\n      const rowspan = child.getAttribute('rowspan')\r\n\r\n      // Restore colspan.\r\n      if (colspan) {\r\n        child.setAttribute('colspan', colspan)\r\n      }\r\n\r\n      // Restore rowspan.\r\n      if (rowspan) {\r\n        child.setAttribute('rowspan', rowspan)\r\n      }\r\n\r\n      // Add valign to style.\r\n      if (valign) {\r\n        child.style['vertical-align'] = valign\r\n      }\r\n\r\n      // Add horizontal align to style.\r\n      if (halign) {\r\n        child.style['text-align'] = halign\r\n      }\r\n\r\n      // Add background color to style.\r\n      if (background_color) {\r\n        child.style['background-color'] = background_color\r\n      }\r\n\r\n      // Set the width again.\r\n      if (width_attr) {\r\n        child.setAttribute('width', width_attr)\r\n      }\r\n\r\n      // Move to next sibling.\r\n      child = child.nextElementSibling\r\n\r\n    }\r\n\r\n    // Get first child again.\r\n    child = tr.firstElementChild\r\n\r\n    // Set the width in percentage to every child.\r\n    while (child) {\r\n      width_attr = child.getAttribute('width')\r\n\r\n      if (missing_width) {\r\n\r\n        // Remove width.\r\n        child.removeAttribute('width')\r\n      }\r\n      else {\r\n\r\n        // Set the width considering that every child has equal widths.\r\n        child.setAttribute('width', (parseInt(width_attr, 10) * 100) / total_width + '%')\r\n      }\r\n\r\n      // Move to next sibling.\r\n      child = child.nextElementSibling\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean align attribute.\r\n   */\r\n  function _cleanAlignment(el) {\r\n\r\n    const align = el.getAttribute('align')\r\n\r\n    if (align) {\r\n      el.style['text-align'] = align\r\n      el.removeAttribute('align')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean up atribute.\r\n   */\r\n  function _normalizeAttribute(attribute) {\r\n\r\n    return attribute.replace(/\\n|\\r|\\n\\r|&quot;/g, '')\r\n  }\r\n\r\n  /*\r\n   * Append style to element.\r\n   */\r\n  function _appendStyle(el, style, last) {\r\n\r\n    if (!style) {\r\n      return\r\n    }\r\n\r\n    // Get current element style.\r\n    let old_style = el.getAttribute('style')\r\n\r\n    // Add semicolon, if it is missing, to the end of current style.\r\n    if (old_style && old_style.slice(-1) !== ';') {\r\n      old_style += ';'\r\n    }\r\n\r\n    // Add semicolon, if it is missing, to the end of current style.\r\n    if (style && style.slice(-1) !== ';') {\r\n      style += ';'\r\n    }\r\n\r\n    // Remove newlines.\r\n    style = style.replace(/\\n/gi, '')\r\n\r\n    // Append at the begining or at the end.\r\n    let new_style = null\r\n\r\n    if (last) {\r\n      new_style = (old_style || '') + style\r\n    }\r\n    else {\r\n      new_style = style + (old_style || '')\r\n    }\r\n    el.setAttribute('style', new_style)\r\n  }\r\n\r\n  /*\r\n   * Delete duplicate attributes found on style. Keep the last one.\r\n   */\r\n  function _cleanStyleDuplicates(el) {\r\n    let style = el.getAttribute('style')\r\n\r\n    if (!style) {\r\n\r\n      return\r\n    }\r\n\r\n    style = _normalizeAttribute(style)\r\n\r\n    // Add semicolon, if it is missing, to the end of style.\r\n    if (style && style.slice(-1) !== ';') {\r\n      style += ';'\r\n    }\r\n\r\n    // Get styles: attr:value\r\n    const style_list = style.match(/(^|\\S+?):.+?;{1,1}/gi)\r\n\r\n    if (!style_list) {\r\n      return\r\n    }\r\n\r\n    // Key = attribute. Value = attribute's value. Duplicate keys will be overrided.\r\n    const style_hash = {}\r\n\r\n    for (let i = 0; i < style_list.length; i++) {\r\n      const style_list_item = style_list[i]\r\n\r\n      const splited_style = style_list_item.split(':')\r\n\r\n      if (splited_style.length !== 2) {\r\n        continue\r\n      }\r\n\r\n      // Add style to hash without text-align on span.\r\n      if (!(splited_style[0] === 'text-align' && el.tagName === 'SPAN')) {\r\n        style_hash[splited_style[0]] = splited_style[1]\r\n      }\r\n    }\r\n\r\n    // Create the new style without duplicates.\r\n    let new_style = ''\r\n\r\n    for (const attr in style_hash) {\r\n      if (style_hash.hasOwnProperty(attr)) {\r\n\r\n        // Change font-size form pt to px\r\n        if (attr === 'font-size' && style_hash[attr].slice(-3) === 'pt;') {\r\n          let number = null\r\n\r\n          try {\r\n            number = parseFloat(style_hash[attr].slice(0, -3), 10)\r\n          }\r\n          catch (e) {\r\n            number = null\r\n          }\r\n\r\n          if (number) {\r\n            number = Math.round(1.33 * number)\r\n            style_hash[attr] = number + 'px;'\r\n          }\r\n        }\r\n\r\n        new_style += attr + ':' + style_hash[attr]\r\n      }\r\n    }\r\n\r\n    if (new_style) {\r\n      el.setAttribute('style', new_style)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Convert a hex string to base64.\r\n   */\r\n  function _hexToBase64(hex) {\r\n    const hexa_chars = hex.match(/[0-9a-f]{2}/gi)\r\n\r\n    const dec_chars = []\r\n\r\n    for (let i = 0; i < hexa_chars.length; i++) {\r\n      dec_chars.push(String.fromCharCode(parseInt(hexa_chars[i], 16)))\r\n    }\r\n\r\n    const dec = dec_chars.join('')\r\n\r\n    return btoa(dec)\r\n  }\r\n\r\n  let _rtf_map = null\r\n\r\n  function _getRtfData(rtf, letter, p_type) {\r\n    const imgs = rtf.split(p_type)\r\n\r\n    for (let i = 1; i < imgs.length; i++) {\r\n      let img_data = imgs[i]\r\n\r\n      img_data = img_data.split('shplid')\r\n\r\n      if (img_data.length > 1) {\r\n\r\n        img_data = img_data[1]\r\n\r\n        let id = ''\r\n        let t = 0\r\n\r\n        while (t < img_data.length) {\r\n          if (img_data[t] === '\\\\' || img_data[t] === '{' || img_data[t] === ' ' || img_data[t] === '\\r' || img_data[t] === '\\n') {\r\n            break\r\n          }\r\n\r\n          id += img_data[t]\r\n\r\n          t++\r\n        }\r\n\r\n        const bliptab_split = img_data.split('bliptag')\r\n\r\n        if (bliptab_split && bliptab_split.length < 2) {\r\n\r\n          continue\r\n        }\r\n\r\n        let image_type = null\r\n\r\n        if (bliptab_split[0].indexOf('pngblip') !== -1) {\r\n          image_type = 'image/png'\r\n        }\r\n        else if (bliptab_split[0].indexOf('jpegblip') !== -1) {\r\n          image_type = 'image/jpeg'\r\n        }\r\n\r\n        if (!image_type) {\r\n\r\n          continue\r\n        }\r\n\r\n        const bracket_split = bliptab_split[1].split('}')\r\n\r\n        if (bracket_split && bracket_split.length < 2) {\r\n\r\n          continue\r\n        }\r\n\r\n        let space_split\r\n\r\n        if (bracket_split.length > 2 && bracket_split[0].indexOf('blipuid') !== -1) {\r\n          space_split = bracket_split[1].split(' ')\r\n        }\r\n        else {\r\n          space_split = bracket_split[0].split(' ')\r\n\r\n          if (space_split && space_split.length < 2) {\r\n\r\n            continue\r\n          }\r\n\r\n          space_split.shift()\r\n        }\r\n\r\n        const image_hex = space_split.join('')\r\n\r\n        _rtf_map[letter + id] = {\r\n          image_hex: image_hex,\r\n          image_type: image_type\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _buildRtfMap(rtf) {\r\n    _rtf_map = {}\r\n\r\n    _getRtfData(rtf, 'i', '\\\\shppict')\r\n    _getRtfData(rtf, 's', '\\\\shp{')\r\n  }\r\n\r\n  /*\r\n   * Clean HTML Image.\r\n   */\r\n  function _cleanImage(el, rtf) {\r\n\r\n    if (!rtf) {\r\n\r\n      return\r\n    }\r\n\r\n    // vshapes_tag will identify the image in rtf.\r\n    let vshapes_tag\r\n\r\n    // Image case.\r\n    if (el.tagName === 'IMG') {\r\n      // Get src.\r\n      const src = el.getAttribute('src')\r\n\r\n      if (!src || src.indexOf('file://') === -1) {\r\n        return\r\n      }\r\n\r\n      else if (src.indexOf('file://') === 0) {\r\n        if (editor.helpers.isURL(el.getAttribute('alt'))) {\r\n          el.setAttribute('src', el.getAttribute('alt'))\r\n\r\n          return\r\n        }\r\n      }\r\n\r\n      // vshapes_tag will identify the image in rtf.\r\n      vshapes_tag = _v_shapes_map[el.getAttribute('v:shapes')]\r\n\r\n      if (!vshapes_tag) {\r\n        vshapes_tag = el.getAttribute('v:shapes')\r\n        // Disregard formulas.\r\n        if (el.parentNode && el.parentNode.parentNode && el.parentNode.parentNode.innerHTML.indexOf('msEquation') >= 0) {\r\n          vshapes_tag = null\r\n        }\r\n      }\r\n\r\n    }\r\n    else {\r\n      vshapes_tag = el.parentNode.getAttribute('o:spid')\r\n    }\r\n\r\n    el.removeAttribute('height')\r\n\r\n    if (!vshapes_tag) {\r\n\r\n      return\r\n    }\r\n\r\n    _buildRtfMap(rtf)\r\n\r\n    const img_data = _rtf_map[vshapes_tag.substring(7)]\r\n\r\n    if (img_data) {\r\n\r\n      // Convert image hex to base64.\r\n      const image_base64 = _hexToBase64(img_data.image_hex)\r\n\r\n      // Build data uri.\r\n      const data_uri = 'data:' + img_data.image_type + ';base64,' + image_base64\r\n\r\n      if (el.tagName === 'IMG') {\r\n        el.src = data_uri\r\n        el.setAttribute('data-fr-image-pasted', true)\r\n      }\r\n      else {\r\n        $(el.parentNode).before('<img data-fr-image-pasted=\"true\" src=\"' + data_uri + '\" style=\"' + el.parentNode.getAttribute('style') + '\">').remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean element.\r\n   */\r\n  function _cleanElement(el, head_style_hash) {\r\n\r\n    const tag_name = el.tagName\r\n    const tag_name_lower_case = tag_name.toLowerCase()\r\n\r\n    // Check if we need to change a tag. Tags should be changed only from parent.\r\n    if (el.firstElementChild) {\r\n\r\n      // Change i to em.\r\n      if (el.firstElementChild.tagName === 'I') {\r\n        _changeTagName(el.firstElementChild, 'em')\r\n\r\n        // Change b to strong.\r\n      }\r\n      else if (el.firstElementChild.tagName === 'B') {\r\n        _changeTagName(el.firstElementChild, 'strong')\r\n      }\r\n    }\r\n\r\n    // Remove no needed tags.\r\n    const word_tags = ['SCRIPT', 'APPLET', 'EMBED', 'NOFRAMES', 'NOSCRIPT']\r\n\r\n    if (word_tags.indexOf(tag_name) !== -1) {\r\n      _removeNode(el)\r\n\r\n      return false\r\n    }\r\n\r\n    // Check single spaces.\r\n    // if (tag_name === 'O:P' && el.innerHTML === '&nbsp') {\r\n    //   el.innerHTML = FE.INVISIBLE_SPACE\r\n    // }\r\n\r\n    // Remove tags but keep content.\r\n    const ignore_tags = ['META', 'LINK', 'XML', 'ST1:', 'O:', 'W:', 'FONT']\r\n\r\n    for (let i = 0; i < ignore_tags.length; i++) {\r\n      if (tag_name.indexOf(ignore_tags[i]) !== -1) {\r\n        if (el.innerHTML) {\r\n          el.outerHTML = el.innerHTML\r\n          _removeNode(el)\r\n\r\n          return false\r\n        }\r\n        else {\r\n\r\n          // Remove if does not have content.\r\n          _removeNode(el)\r\n\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add class style from head.\r\n    if (tag_name !== 'TD') {\r\n\r\n      let class_attr = el.getAttribute('class') || 'MsoNormal'\r\n\r\n      if (head_style_hash && class_attr) {\r\n        class_attr = _normalizeAttribute(class_attr)\r\n        const class_contents = class_attr.split(' ')\r\n\r\n        // All classes.\r\n        for (let i = 0; i < class_contents.length; i++) {\r\n          const class_content = class_contents[i]\r\n\r\n          // Create style attributes list.\r\n          const style_attrs = []\r\n\r\n          // Only classes.\r\n          let style_attr = '.' + class_content\r\n          style_attrs.push(style_attr)\r\n\r\n          // Classes under tag.\r\n          style_attr = tag_name_lower_case + style_attr\r\n          style_attrs.push(style_attr)\r\n\r\n          for (let j = 0; j < style_attrs.length; j++) {\r\n            if (head_style_hash[style_attrs[j]]) {\r\n              _appendStyle(el, head_style_hash[style_attrs[j]])\r\n            }\r\n          }\r\n        }\r\n\r\n        el.removeAttribute('class')\r\n      }\r\n\r\n      // Add tag style from head.\r\n      if (head_style_hash && head_style_hash[tag_name_lower_case]) {\r\n        _appendStyle(el, head_style_hash[tag_name_lower_case])\r\n      }\r\n    }\r\n\r\n    // Wrap paragraphs inner html in a span.\r\n    const paragraph_tag_list = ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'PRE']\r\n\r\n    if (paragraph_tag_list.indexOf(tag_name) !== -1) {\r\n\r\n      // Set style from head.\r\n      const el_class = el.getAttribute('class')\r\n\r\n      if (el_class) {\r\n        if (head_style_hash && head_style_hash[tag_name.toLowerCase() + '.' + el_class]) {\r\n          _appendStyle(el, head_style_hash[tag_name.toLowerCase() + '.' + el_class])\r\n        }\r\n\r\n        // Remove mso values from class.\r\n        if (el_class.toLowerCase().indexOf('mso') !== -1) {\r\n          let cleaned_class = _normalizeAttribute(el_class)\r\n          cleaned_class = cleaned_class.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi, '')\r\n\r\n          if (cleaned_class) {\r\n            el.setAttribute('class', cleaned_class)\r\n          }\r\n          else {\r\n            el.removeAttribute('class')\r\n          }\r\n        }\r\n      }\r\n\r\n      // keep only text-align in style.\r\n      const paragraph_style = el.getAttribute('style')\r\n\r\n      if (paragraph_style) {\r\n        const paragraph_style_matches = paragraph_style.match(/text-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (paragraph_style_matches) {\r\n          paragraph_style_matches[paragraph_style_matches.length - 1].replace(/(text-align:.+?[; \"]{1,1})/gi, '$1')\r\n        }\r\n      }\r\n\r\n      _cleanAlignment(el)\r\n    }\r\n\r\n    // Clean tr.\r\n    if (tag_name === 'TR') {\r\n      _cleanTr(el, head_style_hash)\r\n    }\r\n\r\n    // Clean empty links.\r\n    if (tag_name === 'A' && !el.attributes.getNamedItem('href') && !el.attributes.getNamedItem('name') && el.innerHTML) {\r\n      el.outerHTML = el.innerHTML\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3272\r\n    if (tag_name == 'A' &&  el.getAttribute('href') && el.querySelector('img')) {\r\n      // removing empty span tags\r\n      let spanTags = el.querySelectorAll('span')\r\n\r\n      for (let i = 0; i < spanTags.length; i++) {\r\n\r\n        if (!spanTags[i].innerText) {\r\n          spanTags[i].outerHTML = spanTags[i].innerHTML\r\n        }\r\n      }\r\n    }\r\n\r\n    // Keep empty TH and TD.\r\n    if ((tag_name === 'TD' || tag_name === 'TH') && !el.innerHTML) {\r\n      el.innerHTML = '<br>'\r\n    }\r\n\r\n    // Clean table.\r\n    if (tag_name === 'TABLE') {\r\n      el.style.width = el.style.width\r\n    }\r\n\r\n    // Remove lang attribute.\r\n    if (el.getAttribute('lang')) {\r\n      el.removeAttribute('lang')\r\n    }\r\n\r\n    // Remove mso values from style.\r\n    if (el.getAttribute('style') && el.getAttribute('style').toLowerCase().indexOf('mso') !== -1) {\r\n      let cleaned_style = _normalizeAttribute(el.getAttribute('style'))\r\n      cleaned_style = cleaned_style.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi, '')\r\n\r\n      if (cleaned_style) {\r\n        el.setAttribute('style', cleaned_style)\r\n      }\r\n      else {\r\n        el.removeAttribute('style')\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Parse styles from head and return them into a hash.\r\n   */\r\n  function _parseHeadStyle(head) {\r\n\r\n    const head_style_hash = {}\r\n\r\n    const head_styles = head.getElementsByTagName('style')\r\n\r\n    if (head_styles.length) {\r\n      const head_style = head_styles[0]\r\n\r\n      // Match styles.\r\n      const style_list = head_style.innerHTML.match(/[\\S ]+\\s+{[\\s\\S]+?}/gi)\r\n\r\n      if (style_list) {\r\n        for (let i = 0; i < style_list.length; i++) {\r\n          const style = style_list[i]\r\n\r\n          // Get style attributes.\r\n          let style_attrs = style.replace(/([\\S ]+\\s+){[\\s\\S]+?}/gi, '$1')\r\n\r\n          // Get style definitions.\r\n          let style_definitions = style.replace(/[\\S ]+\\s+{([\\s\\S]+?)}/gi, '$1')\r\n\r\n          // Trim whitespaces.\r\n          style_attrs = style_attrs.replace(/^[\\s]|[\\s]$/gm, '')\r\n          style_definitions = style_definitions.replace(/^[\\s]|[\\s]$/gm, '')\r\n\r\n          // Trim new lines.\r\n          style_attrs = style_attrs.replace(/\\n|\\r|\\n\\r/g, '')\r\n          style_definitions = style_definitions.replace(/\\n|\\r|\\n\\r/g, '')\r\n\r\n          const style_attrs_array = style_attrs.split(', ')\r\n\r\n          // Add every attribute to hash.\r\n          for (let j = 0; j < style_attrs_array.length; j++) {\r\n            head_style_hash[style_attrs_array[j]] = style_definitions\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return head_style_hash\r\n  }\r\n\r\n  /**\r\n   * Create a map with the ID for images.\r\n   */\r\n  function _getVShapes(html) {\r\n    const splits = html.split('v:shape')\r\n\r\n    for (let i = 1; i < splits.length; i++) {\r\n      const split = splits[i]\r\n      let id = split.split(' id=\"')[1]\r\n\r\n      if (id && id.length > 1) {\r\n        id = id.split('\"')[0]\r\n\r\n        let oid = split.split(' o:spid=\"')[1]\r\n\r\n        if (oid && oid.length > 1) {\r\n          oid = oid.split('\"')[0]\r\n\r\n          _v_shapes_map[id] = oid\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean HTML that was pasted from Word.\r\n   */\r\n  function _wordClean(html, rtf) {\r\n    // Remove junk from outside html.\r\n    if (html.indexOf('<html') >= 0) {\r\n      html = html.replace(/[.\\s\\S\\w\\W<>]*(<html[^>]*>[.\\s\\S\\w\\W<>]*<\\/html>)[.\\s\\S\\w\\W<>]*/i, '$1')\r\n    }\r\n\r\n    // Get the vshapes for images.\r\n    _getVShapes(html)\r\n\r\n    // Convert string into document.\r\n    const parser = new DOMParser()\r\n    const word_doc = parser.parseFromString(html, 'text/html')\r\n\r\n    const head = word_doc.head\r\n    const body = word_doc.body\r\n    // Create style attrs hash.\r\n    const head_style_hash = _parseHeadStyle(head)\r\n\r\n    // Remove text nodes that do not contain non-whitespace characters and has new lines in them.\r\n    _traverse(body, function (node) {\r\n      if (node.nodeType === Node.TEXT_NODE && /\\n|\\u00a0|\\r/.test(node.data)) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3298\r\n        // https://github.com/froala/wysiwyg-editor/issues/3327\r\n        // if has no breaking space keep it\r\n        // 2nd condition to check no break spaces\r\n        if (!/\\S| /.test(node.data) && !/[\\u00a0]+/.test(node.data)) {\r\n          // Keep single &nbsp\r\n          if (node.data === FE.UNICODE_NBSP) {\r\n            node.data = '\\u200b'\r\n\r\n            return true\r\n          }\r\n\r\n          if (node.data.length === 1 && node.data.charCodeAt(0) === 10) {\r\n            node.data = ' '\r\n\r\n            return true\r\n          }\r\n\r\n          _removeNode(node)\r\n\r\n          return false\r\n        }\r\n\r\n        // Remove newlines.\r\n        else {\r\n          node.data = node.data.replace(/\\n|\\r/gi, ' ')\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Process images.\r\n    _traverse(body, function (node) {\r\n\r\n      // Element node.\r\n      if (node.nodeType === Node.ELEMENT_NODE && (node.tagName === 'V:IMAGEDATA' || node.tagName === 'IMG')) {\r\n        _cleanImage(node, rtf)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Process lists.\r\n    const lists = body.querySelectorAll('ul > ul, ul > ol, ol > ul, ol > ol')\r\n\r\n    for (let i = lists.length - 1; i >= 0; i--) {\r\n      if (lists[i].previousElementSibling && lists[i].previousElementSibling.tagName === 'LI') {\r\n        lists[i].previousElementSibling.appendChild(lists[i])\r\n      }\r\n    }\r\n\r\n    // Clean the body.\r\n    _traverse(body, function (node) {\r\n\r\n      // Text node.\r\n      if (node.nodeType === Node.TEXT_NODE) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1364.\r\n        node.data = node.data.replace(/<br>(\\n|\\r)/gi, '<br>')\r\n\r\n        return false\r\n      }\r\n\r\n      // Element node.\r\n      else if (node.nodeType === Node.ELEMENT_NODE) {\r\n        // List found.\r\n        if (_isList(node)) {\r\n          // Keep the parent node and previous sibling because the node could be deleted in the list building.\r\n          const parent_node = node.parentNode\r\n          const previous_sibling = node.previousSibling\r\n\r\n          // Get list element.\r\n          const list_element = _buildList(node, head_style_hash).el\r\n\r\n          // Find the element to insert the new list before it.\r\n          let before_element = null\r\n\r\n          // Current node was not the first.\r\n          if (previous_sibling) {\r\n            before_element = previous_sibling.nextSibling\r\n          }\r\n          else {\r\n            before_element = parent_node.firstChild\r\n          }\r\n\r\n          // Insert before.\r\n          if (before_element) {\r\n            parent_node.insertBefore(list_element, before_element)\r\n          }\r\n\r\n          // Push to the end.\r\n          else {\r\n            parent_node.appendChild(list_element)\r\n          }\r\n\r\n          return false\r\n        }\r\n        else {\r\n\r\n          if (node.tagName === 'FONT' && head_style_hash['.' + node.getAttribute('class')]) {\r\n            node = _changeTagName(node, 'span')\r\n          }\r\n\r\n          return _cleanElement(node, head_style_hash)\r\n        }\r\n      }\r\n\r\n      // Comment node.\r\n      else if (node.nodeType === Node.COMMENT_NODE) {\r\n\r\n        // removing the extra line breaks in comments\r\n        if (node.data.indexOf('[if !supportLineBreakNewLine]') > -1) {\r\n          var nextNode = node.nextSibling;\r\n\r\n          while (nextNode) {\r\n            nextNode = node.nextSibling;\r\n            nextNode && _removeNode(nextNode);\r\n\r\n            if (nextNode.data && nextNode.data.indexOf('[endif]') > -1) {\r\n              nextNode = null;\r\n            }\r\n          }\r\n        }\r\n\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n        if (node.data.indexOf('[if supportFields]') > -1) {\r\n          if(node.data.indexOf('FORMCHECKBOX')>-1){\r\n                 let checkbox = document.createElement('input'); \r\n                     checkbox.type = \"checkbox\"; \r\n                     node.parentNode.insertBefore(checkbox, node.nextSibling);\r\n          }\r\n        }\r\n        _removeNode(node)\r\n\r\n        return false\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Remove empty tags and clean duplicate styles.\r\n    _traverse(body, function (node) {\r\n\r\n      // Element node.\r\n      if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n        const tag_name = node.tagName\r\n\r\n        // Empty. Skip br tag.\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n        if (!node.innerHTML && ['BR', 'IMG', 'INPUT'].indexOf(tag_name) === -1) {\r\n          let parent = node.parentNode\r\n\r\n          // Remove recursively.\r\n          while (parent) {\r\n            _removeNode(node)\r\n            node = parent\r\n\r\n            // Stop when non-empty element is found.\r\n            if (node.innerHTML) {\r\n              break\r\n            }\r\n            parent = node.parentNode\r\n          }\r\n\r\n          return false\r\n        }\r\n        else {\r\n          _cleanStyleDuplicates(node)\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3098, Remove empty anchor tags\r\n    _traverse(body, function (node) {\r\n\r\n      // remove anchor tag if it doesn't have url\r\n      if (node && node.nodeName === 'A' && node.href === '') {\r\n\r\n        // replace parent a tag with its child nodes\r\n        const fragment = document.createDocumentFragment()\r\n\r\n        while (node.firstChild) {\r\n          fragment.appendChild(node.firstChild)\r\n        }\r\n        node.parentNode.replaceChild(fragment, node)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Converd document to string.\r\n    let word_doc_string = body.outerHTML\r\n\r\n    // Clean HTML.\r\n    const htmlAllowedStylePropsCopy = editor.opts.htmlAllowedStyleProps\r\n    editor.opts.htmlAllowedStyleProps = editor.opts.wordAllowedStyleProps\r\n\r\n    word_doc_string = editor.clean.html(word_doc_string, editor.opts.wordDeniedTags, editor.opts.wordDeniedAttrs, false)\r\n\r\n    editor.opts.htmlAllowedStyleProps = htmlAllowedStylePropsCopy\r\n\r\n    return word_doc_string\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    clean: clean,\r\n    _wordClean: _wordClean\r\n  }\r\n}\r\n\r\n","// Plugins\r\nimport './plugins/align.js';\r\nimport './plugins/char_counter.js'\r\nimport './plugins/code_beautifier.js';\r\nimport './plugins/code_view.js';\r\nimport  './plugins/colors.js'\r\nimport './plugins/draggable.js'\r\nimport './plugins/edit_in_popup.js';\r\nimport './plugins/emoticons.js';\r\nimport './plugins/entities.js';\r\nimport './plugins/file.js';\r\nimport './plugins/files_manager.js'\r\nimport './plugins/cryptojs.js'\r\nimport './plugins/font_family.js'\r\nimport './plugins/font_size.js'\r\nimport './plugins/forms.js';\r\nimport './plugins/fullscreen.js';\r\nimport './plugins/help.js'\r\nimport './plugins/image.js'\r\nimport './plugins/image_manager.js'\r\nimport './plugins/inline_class.js'\r\nimport './plugins/inline_style.js'\r\nimport './plugins/line_breaker.js'\r\nimport './plugins/line_height.js'\r\nimport './plugins/link.js'\r\nimport './plugins/lists.js'\r\nimport './plugins/paragraph_format.js'\r\nimport './plugins/paragraph_style.js'\r\nimport './plugins/print.js'\r\nimport './plugins/quick_insert.js'\r\nimport './plugins/quote.js'\r\nimport './plugins/save.js'\r\nimport './plugins/special_characters.js'\r\nimport './plugins/table.js'\r\nimport './plugins/url.js'\r\nimport './plugins/video.js'\r\nimport './plugins/word_paste.js';\r\n"],"names":["FE","PLUGINS","align","editor","$","apply","val","el","selection","element","parents","length","css","save","html","wrap","restore","blocks","i","removeClass","attr","removeAttr","unwrap","refresh","$btn","alignment","helpers","getAlignment","find","first","replaceWith","icon","create","refreshOnShow","$dropdown","addClass","refreshForToolbar","charAt","toUpperCase","slice","DefineIcon","NAME","SVG_KEY","RegisterCommand","type","title","options","left","center","right","justify","c","COMMANDS","hasOwnProperty","language","translate","callback","cmd","plugin","Object","assign","DEFAULTS","charCounterMax","charCounterCount","charCounter","$counter","count","textContent","replace","_checkCharNumber","e","opts","keyCode","which","keys","ctrlKey","isCharacter","KEYCODE","IME","preventDefault","stopPropagation","events","trigger","_checkCharNumberOnPaste","len","text","_updateCharNumber","chars","toolbarBottom","$tb","outerHeight","scroll_size","$wp","get","offsetWidth","clientWidth","direction","_init","document","createElement","$second_tb","append","on","o_win","off","id","removeData","remove","codeBeautifier","acorn","exports","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","lineBreak","source","allLineBreaks","isIdentifierStart","code","test","String","fromCharCode","isIdentifierChar","run","html_source","ltrim","s","rtrim","multi_parser","indent_inner_html","indent_size","indent_character","wrap_line_length","brace_style","unformatted","preserve_newlines","max_preserve_newlines","indent_handlebars","wrap_attributes","wrap_attributes_indent_size","end_with_newline","extra_liners","undefined","parseInt","max_char","indent_char","isNaN","Array","isArray","concat","split","indent_with_tabs","Parser","pos","token","current_mode","tags","parent","parentcount","parent1","tag_type","token_text","last_token","last_text","token_type","newlines","indent_content","Utils","whitespace","single_token","in_array","what","arr","is_whitespace","n","traverse_whitespace","input_char","input","space_or_wrap","content","line_char_count","print_newline","print_indentation","push","get_content","join","peek3","substr","get_tag","get_contents_to","name","reg_match","lastIndex","reg_array","exec","end_script","index","substring","record_tag","tag","indent_level","retrieve_tag","temp_parent","indent_to_tag","peek","comment","space","first_attr","tag_start","tag_end","tag_start_char","orig_pos","orig_line_char_count","get_unformatted","get_comment","tag_complete","tag_index","tag_offset","indexOf","tag_check","toLowerCase","is_unformatted","search","output","start_pos","delimiter","matched","orig_tag","min_index","get_token","tag_name_type","get_full_indent","level","indent_string","next_tag","match","printer","js_source","force","print_token","print_token_raw","indent","unindent","t","tag_name","tag_extracted_from_last_output","_beautifier","script_indent_level","js_beautify","css_beautify","indent_scripts","indentation","white","_level","reindent","sweet_code","source_text","NESTED_AT_RULE","CONDITIONAL_GROUP_RULE","indentSize","indentCharacter","selectorSeparatorNewline","selector_separator_newline","newline_between_rules","eol","whiteRe","ch","parenLevel","next","skipWhitespace","result","prev_pos","eatWhitespace","eatString","endChars","start","peekString","endChar","str","eatComment","singleLine","lookBack","foundNestedPseudoClass","openParen","basebaseIndentString","singleIndent","indentLevel","nestedLevel","outdent","print","singleSpace","newLine","_lastCharWhitespace","keepWhitespace","trim","preserveSingleSpace","isAfterSpace","pop","insideRule","insidePropertyValue","enteringConditionalGroup","top_ch","last_top_ch","isAfterNewline","header","variableOrRule","sweetCode","js_source_text","beautifier","Beautifier","beautify","MODE","BlockStatement","Statement","ObjectLiteral","ArrayLiteral","ForInitializer","Conditional","Expression","tokens","token_pos","Tokenizer","current_token","last_type","last_last_text","flags","previous_flags","flag_store","prefix","handlers","opt","baseIndentString","handle_start_expr","handle_end_expr","handle_start_block","handle_end_block","handle_word","handle_semicolon","handle_string","handle_equals","handle_operator","handle_comma","handle_block_comment","handle_comment","handle_dot","handle_unknown","handle_eof","create_flags","flags_base","mode","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","last_word","declaration_statement","declaration_assignment","multiline_frame","if_block","else_block","do_block","do_while","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","braces_on_own_line","break_chained_methods","space_in_paren","space_in_empty_paren","jslint_happy","space_after_anon_function","keep_array_indentation","space_before_conditional","unescape_strings","e4x","comma_first","test_output_raw","preindent_index","Output","raw","set_mode","local_token","tokenizer","tokenize","comments_before","handle_token","get_code","keep_whitespace","is_array","split_newlines","idx","out","allow_wrap_or_preserved_newline","force_linewrap","wanted_newline","proposed_line_length","current_line","get_character_count","space_before_token","force_newline","preserve_statement_flags","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","printable_token","add_raw_token","previous_line","last","add_token","deindent","is_expression","remove_redundant_indentation","start_of_object_property","start_of_statement","all_lines_start_with","lines","line","each_line_matches_indent","is_special_word","word","offset","next_mode","line_starters","next_token","second_token","empty_braces","empty_anonymous_function","just_added_blankline","space_before","space_after","directives","j","javadoc","starless","lastIndent","lastIndentLength","OutputLine","_character_count","_indent_count","_items","_empty","baseIndentLength","indent_length","is_empty","item","remove_indent","toString","indent_cache","add_outputline","x","add_space_before_token","frame","output_length","eat_newlines","Token","digit","digit_oct","digit_hex","punct","reserved_words","block_comment_pattern","comment_pattern","directives_block_pattern","directive_pattern","directives_end_ignore_pattern","template_pattern","n_newlines","whitespace_before_token","in_html_comment","parser_pos","input_length","token_values","open","open_stack","comments","tokenize_next","get_directives","directive_match","resulting_string","whitespace_on_this_line","allow_decimal","allow_e","local_digit","charCodeAt","comment_match","sep","esc","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","depth","isEndTag","tagName","isSingletonTag","xmlLength","unescape_string","sharp","template_match","s_hex","escaped","codeMirror","window","CodeMirror","codeMirrorOptions","lineNumbers","tabMode","indentWithTabs","lineWrapping","tabSize","codeBeautifierOptions","codeViewKeepActiveButtons","codeView","$html_area","code_mirror","isActive","$box","hasClass","getValue","setSize","height","heightMin","_showText","set","$el","blur","not","setAtStart","placeholder","undo","saveStep","_can_focus","_blur","_focus","_showHTML","_initArea","fromTextArea","$on","rows","value","style","scrollHeight","removeAttribute","cleanEmptyTags","cleanWhiteTags","core","hasFocus","isEmpty","toggleClass","was_focused","disableBlur","includes","s_index","e_index","s_line","e_line","lastIndexOf","setValue","focus","setSelection","clearHistory","heightMax","scroll_top","o_doc","scrollTop","setSelectionRange","filter","data","isMobile","toolbarInline","toolbar","hide","toggle","popups","hideAll","_destroy","toTextArea","$back_button","_refreshToolbar","bindClick","cancel","toolbarContainer","forcedRefresh","POPUP_TEMPLATES","colorsText","colorsBackground","colorsStep","colorsHEXInput","colorsButtons","colors","custom_color_template","_showColorsPopup","cmd_type","$popup","_initColorsPopup","setContainer","_refreshColor","isVisible","button","getPosition","top","show","position","forSelection","colors_buttons","buildList","custom_color","template","buttons","text_colors","_colorPickerHTML","background_colors","_addAccessibility","tab","colors_html","popupName","$focused_item","currentTarget","is","key_code","status","TAB","accessibility","focusToolbar","shiftKey","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","$colors","columns","Math","floor","column","nextIndex","dimension","ENTER","$element","color_type","$current_color","$select_color","RGBToHex","_updateColor","$selectionColor","$input","background","format","applyStyle","HEXtoRGB","removeStyle","back","showInline","customColor","color","showColorsPopup","refreshOnCallback","popup","refreshAfterCallback","dragInline","draggable","_dragStart","originalEvent","target","nodeType","Node","TEXT_NODE","childNodes","canDo","browser","msie","edge","clear","dataTransfer","setData","_tagOK","tag_under","node","isElement","_setHelperSize","width","iframe","iframePaddingTop","getPX","iframePaddingLeft","$iframe","$draggable_helper","_positionHelper","doc","elementFromPoint","pageX","win","pageXOffset","pageY","pageYOffset","top_offset","top_tag","bottom_offset","bottom_tag","isBlock","blockParent","above","mouse_y","$tag_under","margin","parseFloat","prev","max","_dragOver","dropEffect","_getDraggedEl","_dragEnter","_documentDragEnd","$draggedEl","_drop","INSTANCES","inst","ok","markers","insertAtPoint","chainTrigger","$droppedEl","$marker","MARKERS","marker","insert","after","emptyBlockTagsQuery","htmlAllowedEmptyTags","fillEmptyBlocks","size","syncIframe","setTimeout","_cleanOnGet","parentNode","removeChild","ELEMENT_NODE","els","querySelectorAll","enter","ENTER_BR","editInPopup","MODULES","_initPopup","txt","edit","_showPopup","$sc","outerWidth","_initEvents","_mouseup","update","new_text","placeholderText","emoticons","emoticonsSet","desc","uCode","emoticonsButtons","emoticonsUseImage","categories","selectedCategory","_showEmoticonsPopup","_initEmoticonsPopup","custom_layer","_emoticonsHTML","_inEmoticon","isCollapsed","s_el","e_el","endElement","range","ranges","container","startContainer","startOffset","addEmoticon","emoticon","img","before","INVISIBLE_SPACE","commonAncestorContainer","classList","contains","_load","setDeletable","emtcs","className","inEditor","emoticons_html","_renderCategoryHtml","_renderEmoticonHtml","_renderUseImage","_refreshPopup","setEmoticonCategory","categoryId","category","categoryHtml","_renderCategory","emoticonHtml","_renderEmoticon","$tabElements","findVisible","$emoticons","emoticonsStep","click","emoticon_html","forEach","compiledCode","reduce","imageMap","image","emoticonMap","dataParam1","dataParam2","buttonHtml","buttonMap","elementClass","emoticonsUnicodeClass","dataCmd","showEmoticonsPopup","FA5NAME","entities","_reg_exp","_map","_process","_encode","contents","_encodeEntities","clean","htmlSimpleAmpersand","entities_text","entities_array","chr","fileUpload","fileUploadURL","fileUploadParam","fileUploadParams","fileUploadToS3","fileUploadToAzure","fileUploadMethod","fileMaxSize","fileAllowedTypes","fileInsertButtons","fileUseSelectedText","file","DEFAULT_FILE_UPLOAD_URL","BAD_LINK","MISSING_LINK","ERROR_DURING_UPLOAD","BAD_RESPONSE","MAX_SIZE_EXCEEDED","BAD_FILE_TYPE","NO_CORS_IE","error_messages","showInsertPopup","_initInsertPopup","hideProgressBar","showProgressBar","_setProgressMessage","dismiss","message","progress","$layer","_showErrorMessage","$message_header","link","response","$file","_syncFiles","_parseResponse","resp","JSON","parse","_throwError","ex","_parseXMLResponse","key","_fileUploaded","url","responseXML","responseText","responseURL","_fileUploadError","_fileUploadProgress","lengthComputable","complete","loaded","total","_fileUploadAborted","_browserUpload","reader","FileReader","onload","binary","atob","array","URL","createObjectURL","Blob","Uint8Array","readAsDataURL","upload","files","form_data","drag_support","formdata","FormData","keyStart","Date","getTime","params","uploadURL","region","bucket","fileURL","azureKey","encodeURI","account","SASToken","xhr","getXHR","uploadDate","toUTCString","accessKey","azureAccount","azureContainer","urls","headerResource","urlResource","stringToSign","signatureBytes","cryptoJSPlugin","cryptoJS","HmacSHA256","enc","Base64","signature","authHeader","setRequestHeader","call","onerror","onprogress","onabort","readyState","abort","send","_bindInsertEvents","dt","isIOS","enableBlur","_hideInsertPopup","delayed","onHide","file_buttons","splice","upload_layer","progress_bar_layer","progress_bar","_onRemove","$win","ESC","c_files","prototype","file_srcs","getAttribute","filesInsertButtons","filesInsertButtons2","imageEditButtons","imageAltButtons","imageSizeButtons","imageUpload","filesManagerUploadURL","imageCORSProxy","imageUploadRemoteUrls","filesManagerUploadParam","filesManagerUploadParams","googleOptions","filesManagerUploadToS3","filesManagerUploadToAzure","filesManagerUploadMethod","filesManagerMaxSize","filesManagerAllowedTypes","imageResize","imageResizeWithPercent","imageRoundPercent","imageDefaultWidth","imageDefaultAlign","imageDefaultDisplay","imageSplitHTML","imageStyles","imageMove","imageMultipleStyles","imageTextNear","imagePaste","imagePasteProcess","imageMinWidth","imageOutputSize","imageDefaultMargin","imageAddNewLine","VIDEO_PROVIDERS","test_regex","url_regex","url_text","provider","VIDEO_EMBED_REGEX","IMAGE_EMBED_REGEX","filesManager","$current_image","$current_image_index","current_index","$child_window_open","$image_resizer","$handler","$overlay","disableEdit","mousedown","file_list","Map","file_list_values","XMLHttpRequests","fileUploads","checked_files","failedUploadFiles","completedUploads","fileKeys","imageEditIndex","editImageValue","autoplayCheckbox","fileListIndex","requiredPlugins","CORRUPTED_IMAGE","ERROR_LINK","UPLOAD_CANCEL","unsupported_file_types","_refreshInsertPopup","$url_input","$embed_area","rerender","isImage","errorMessage","deleteFile","checkRequiredPlugins","_initPluginErrorPopup","resetAllFilesCheckbox","setPopupDimensions","setFileListHeight","plugins","pluginsEnabled","addPlugins","loadPlugins","module_list","m_name","_repositionResizer","_initImageResizer","$container","wrap_correction_top","wrap_correction_left","scrollLeft","getEl","hasCaption","getBoundingClientRect","_getHandler","_setWidth","_handlerMousedown","sameInstance","start_x","touches","oel","$oel","ownerDocument","defaultView","parentWindow","editor_inside_iframe","location","frameElement","clientLeft","p_node","parentsUntil","blockTagsQuery","toFixed","_unmarkExit","insertEmbed","insertEmbeddedFile","_handlerMousemove","real_image_size","c_x","s_x","diff_x","round","_handlerMouseup","_disableInsertCheckbox","disabled","getElementById","parentElement","add","_disableFileIcons","$img","updateFileUploadingProgress","_showFileErrorMessage","_initEditPopup","image_buttons","cancelFileInsert","file_manager_dialog_open","req","cancelFileUpload","innerHTML","getFileActionButtons","updateProgressBar","deleteFileUpload","checkInsertAllState","$btnInsert","$btnDelete","isDisabled","addCheck","map","outerHTML","minimizePopup","checked","children","autoplay","no_message","dropRedo","_exitEdit","setAfter","$row","globalListClass","sortableLists","globalX","globalY","enableDragSort","listClass","getElementsByClassName","list","enableDragItem","addEventListener","event","bottom","scrollBy","sourceElement","hoveredItem","targetTouches","clientX","clientY","elementsWithHoverClass","ondrag","handleDrag","ondragend","handleDrop","selectedItem","selectedLocX","selectedLocY","y","droppedItem","safari","mozilla","swapItem","swapNodes","n1","n2","p1","p2","i1","i2","isEqualNode","insertBefore","showFileUploadProgressLayer","description","getFileDescription","checkedClass","checkmark","upload_progress_layer","text_truncate","getFileSize","setAttribute","getFileThumbnail","ending","getFileThumbnailSrc","getFileIcon","thumbnail","_getFileType","localName","thumbnailLink","thumbnailImage","oldImage","onloadend","src","href","path","fileActionButtons","isVideo","disableAutoplay","disableAutoplayCheckBox","isFormatSupported","pdf","docx","xlsx","xls","log","disbleView","isAudio","isFile","API_KEY","CLIENT_ID","percent","row","progressCircle","initialFileUploadStatus","totalUploadPercent","validURL","pattern","insertByURL","$urls","files_index","initial_index","validUrls","addFilesToList","file_url","video","getVideoByURL","obj","XMLHttpRequest","getUrlFileName","sanitize","existing_image","file_index","responseType","isURL","vp","videoAllowedProviders","_editImg","_edit","viewImage","navigator","msSaveBlob","download","viewImages","imageView","videoIframe","autoplayURL","endsWith","_loadedCallback","insertFiles","videos","_syncVideos","c_videos","video_srcs","videoMove","insertAllFiles","insertMapElements","toArray","deleteAllFiles","deleteMapElements","fileIndex","has","_editVideo","disable","shift","isChildWindowOpen","setChildWindowState","childWindowState","docEditor","loadScripts","loader","handler","script","handleClientLoad","onreadystatechange","head","getElementsByTagName","body","appendChild","editImage","isChildWindowTriggered","trimVideoPlugin","trimVideo","imageTUI","launch","apiKey","clientId","authorizeButton","signoutButton","userArea","fileInput","fileContainer","loadingText","onInvalidFile","console","onError","error","googleDocEditor","DISCOVERY_DOCS","SCOPES","DEFAULT_FIELDS","BOUNDARY","DELIMITER","CLOSE_DELIMITER","responseFileId","initClient","gapi","client","init","discoveryDocs","scope","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","handleAuthClick","display","auth","getToken","access_token","Promise","resolve","signIn","handleFileUpload","handleSignoutClick","accessToken","currentFile","lastModified","lastModifiedDate","closeEditDocContainer","disableOnEdit","saveSingleFile","showEditableDoc","googleDocUrl","editDocContainer","cssText","onclick","signOut","enableAfterEdit","readAsArrayBuffer","contentType","metadata","bytes","byteLength","base64Data","btoa","multipartRequestBody","stringify","request","Length","execute","load","saveImage","fileTypeMap","re","ext","fileType","$existing_img","sanitizeURL","Image","old_src","clone","atts","attributes","att","nodeName","_addImage","video_autoplay","appendSymbol","videoSplitHTML","$video","videoResponsive","_setVideoStyle","videoDefaultDisplay","videoDefaultAlign","$existing_video","_add","replaced","_addVideo","_display","_align","htmlUntouched","useClasses","textAlign","embedded_code","fileSplitHTML","_setStyleVideo","_setStyleImage","loadCallback","data_str","videoDefaultWidth","isLastSibling","insertAfter","typeVar","HAVE_FUTURE_DATA","_imageUploaded","$image_placeholder","types","check_inputs","checkAutoplay","indexes","checkbox","webp","webm","ogg","ogv","isAndroid","chrome","_mousedown","areVisible","isArrow","_markExit","getSelection","lastNode","nextSibling","$parent","defaultTag","onRefresh","active","imageInsertButtons","buttonList","buttonList2","uploadIndex","urlIndex","embedIndex","embed_layer","by_url_layer","message_layer","getMissingPluginsText","missingPlugins","getMissingPlugins","date","weekday","year","month","day","dateFormat","toLocaleDateString","err","sizes","pow","fileName","getDate","getMonth","getFullYear","_refreshAltPopup","showAltPopup","_initAltPopup","alt_layer","setAlt","alt","_refreshSizePopup","showSizePopup","_initSizePopup","size_layer","regex","showLayer","focusPopup","refreshUploadButton","refreshByURLButton","_resizeImage","initPageX","step","shared","$img_overlay","_mousemove","prevKey","prevTimestamp","userAgent","metaKey","keycode","timeStamp","EQUALS","FF_EQUALS","altKey","HYPHEN","FF_HYPHEN","setBefore","_editorKeydownHandler","BACKSPACE","DELETE","F10","isBrowserAction","n_node","imgs","touchScroll","START_MARKER","END_MARKER","paste","saveCopiedText","C","X","_clipboardPaste","_clipboardPasteCleanup","_uploadPastedImages","$node","_processPastedImage","loadEvents","splitSrc","upload_img","each","_img","crossOrigin","canvas","context","getContext","naturalHeight","naturalWidth","drawImage","imgExt","toDataURL","_clipboardImageLoaded","_processsClipboardPaste","clipboardData","items","getData","getAsFile","clipboard_html","removeAllRanges","addRange","createRange","bulkRefresh","force_exit","_canExit","enable","img_exit_flag","verticalAlign","marginBottom","marginTop","maxWidth","marginLeft","marginRight","multipleStyles","styles","refreshEmbedButton","toggleCaption","$listParent","totLi","$currLi","$newLi","splitAttrs","oldWidth","current_width","exitEdit","RegisterShortcut","P","CryptoJS","crypto","msCrypto","global","require","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","Error","F","subtype","C_lib","lib","Base","extend","overrides","mixIn","$super","arguments","instance","properties","propertyName","WordArray","words","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","random","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","_minBufferSize","nWordsReady","nBytesReady","min","_doProcessBlock","Hasher","cfg","_doReset","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","_createHmacHelper","C_algo","HMAC","algo","base64Chars","byte1","byte2","byte3","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","parseLoop","bits1","bits2","bitsCombined","T","abs","sin","MD5","_hash","M","offset_i","M_offset_i","H","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","a","b","d","FF","GG","HH","II","nBitsTotal","nBitsLeft","nBitsTotalH","nBitsTotalL","H_i","HmacMD5","W","SHA1","HmacSHA1","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","SHA256","f","g","h","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","sigma1","t1","t2","Utf16BE","Utf16","utf16Chars","codePoint","utf16Str","utf16StrLength","Utf16LE","swapEndian","ArrayBuffer","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","buffer","byteOffset","typedArrayByteLength","_zl","_zr","_sl","_sr","_hl","_hr","RIPEMD160","hl","hr","zl","zr","sl","sr","al","bl","cl","dl","ar","br","cr","dr","er","f1","f2","f3","f4","f5","rotl","z","HmacRIPEMD160","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","PBKDF2","keySize","iterations","compute","password","salt","derivedKey","blockIndex","derivedKeyWords","blockIndexWords","block","blockWords","blockWordsLength","intermediate","intermediateWords","EvpKDF","SHA224","HmacSHA224","X32WordArray","C_x64","x64","X64Word","Word","high","low","X64WordArray","toX32","x64Words","x64WordsLength","x32Words","x64Word","wordsLength","RHO_OFFSETS","PI_INDEXES","ROUND_CONSTANTS","newX","newY","LFSR","roundConstantMsw","roundConstantLsw","bitPosition","SHA3","outputLength","state","_state","nBlockSizeLanes","M2i","M2i1","lane","tMsw","tLsw","Tx","Tx4","Tx1","Tx1Msw","Tx1Lsw","laneIndex","laneMsw","laneLsw","rhoOffset","TPiLane","T0","state0","TLane","Tx1Lane","Tx2Lane","roundConstant","blockSizeBits","outputLengthBytes","outputLengthLanes","hashWords","HmacSHA3","X64Word_create","SHA512","H0","H1","H2","H3","H4","H5","H6","H7","H0h","H0l","H1h","H1l","H2h","H2l","H3h","H3l","H4h","H4l","H5h","H5l","H6h","H6l","H7h","H7l","ah","bh","dh","eh","fh","fl","gh","gl","hh","Wil","Wih","Wi","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1xh","gamma1xl","gamma1h","gamma1l","Wi7","Wi7h","Wi7l","Wi16","Wi16h","Wi16l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kih","Kil","t1l","t1h","t2l","t2h","HmacSHA512","SHA384","HmacSHA384","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","xformMode","_xformMode","_key","process","dataUpdate","finalProcessedData","ivSize","selectCipherStrategy","PasswordBasedCipher","SerializableCipher","cipher","encrypt","decrypt","ciphertext","StreamCipher","finalProcessedBlocks","C_mode","BlockCipherMode","iv","Encryptor","Decryptor","_cipher","_iv","CBC","processBlock","xorBlock","encryptBlock","_prevBlock","thisBlock","decryptBlock","C_pad","pad","Pkcs7","nPaddingBytes","paddingWord","paddingWords","padding","unpad","BlockCipher","modeCreator","_mode","__creator","CipherParams","cipherParams","formatter","C_format","OpenSSLFormatter","OpenSSL","openSSLStr","ciphertextWords","encryptor","cipherCfg","algorithm","_parse","plaintext","C_kdf","kdf","OpenSSLKdf","derivedParams","CFB","generateKeystreamAndEncrypt","keystream","ECB","AnsiX923","lastBytePos","Iso10126","Iso97971","ZeroPadding","OFB","_keystream","NoPadding","HexFormatter","SBOX","INV_SBOX","SUB_MIX_0","SUB_MIX_1","SUB_MIX_2","SUB_MIX_3","INV_SUB_MIX_0","INV_SUB_MIX_1","INV_SUB_MIX_2","INV_SUB_MIX_3","xi","sx","x2","x4","x8","RCON","AES","_nRounds","_keyPriorReset","keyWords","nRounds","ksRows","keySchedule","_keySchedule","ksRow","invKeySchedule","_invKeySchedule","invKsRow","_doCryptBlock","s0","s1","s2","s3","t0","t3","PC1","PC2","BIT_SHIFTS","SBOX_P","SBOX_MASK","DES","keyBits","keyBitPos","subKeys","_subKeys","nSubKey","subKey","bitShift","invSubKeys","_invSubKeys","_lBlock","_rBlock","exchangeLR","exchangeRL","lBlock","rBlock","mask","TripleDES","key1","key2","key3","_des1","_des2","_des3","RC4","keySigBytes","S","_S","keyByteIndex","keyByte","_i","_j","generateKeystreamWord","keystreamWord","RC4Drop","drop","CTRGladman","incWord","b1","b2","b3","incCounter","counter","_counter","C_","G","Rabbit","_X","_C","_b","nextState","IV","IV_0","IV_1","i0","i3","gx","ga","gb","CTR","RabbitLegacy","fontFamily","fontFamilySelection","fontFamilyDefaultSelection","_getSelection","_getArray","font_array","grep","_matches","array1","array2","font_matches","c_font_array","sort","f_diff","displaySelection","defaultSelection","displaySelectionWidth","fontSize","fontSizeSelection","fontSizeDefaultSelection","fontSizeUnit","formEditButtons","formStyles","formMultipleStyles","formUpdateButtons","forms","current_input","_inputMouseDown","_inputMouseUp","showEditPopup","_cancelSelection","_inputTouchMove","_bindEvents","_initUpdatePopup","getInput","hideEditPopups","_refreshUpdateCallback","_hideUpdateCallback","text_layer","tab_idx","showUpdatePopup","updateInput","inputBtns","cls","fullscreen","old_scroll","max_height","z_index","_on","prepend","innerHeight","zIndex","$parent_node","_off","toolbarSticky","toolbarStickyOffset","moreText","moreParagraph","moreRich","moreMisc","accessibilityFocus","helpSets","commands","help","$modal","modal_id","_buildBody","group","command","isMac","modalHash","modals","resize","SLASH","modal","showOnMobile","imageUploadURL","imageUploadParam","imageUploadParams","imageUploadToS3","imageUploadToAzure","imageUploadMethod","imageMaxSize","imageAllowedTypes","DEFAULT_IMAGE_UPLOAD_URL","_showEditPopup","_convertStyleToClasses","getAlign","getDisplay","_convertClassesToStyle","_setStyle","_refreshImageList","images","_syncImages","c_images","image_srcs","old_images_srcs","img_url","_imageUploadError","_imageUploadProgress","_imageUploadAborted","_startUpload","_sendRequest","imageURL","_beforeElementDrop","setAtEnd","_selectImage","$popup_height_val","$popup_width_val","isWindowsPhone","flt","refreshAlign","refreshAlignOnShow","refreshDisplayOnShow","selectNode","collapse","imgLengthCaption","querySelector","newTag","ancorTag","nodeValue","imgElementLength","wrapper","docFrag","createDocumentFragment","firstChild","child","replaceChild","inline","imageAlign","imageManagerLoadURL","imageManagerLoadMethod","imageManagerLoadParams","imageManagerPreloader","imageManagerDeleteURL","imageManagerDeleteMethod","imageManagerDeleteParams","imageManagerPageSize","imageManagerScrollOffset","imageManagerToggleTags","imageManager","$head","$body","$preloader","$media_files","$image_tags","page","image_count","loaded_images","column_number","ERROR_DURING_LOAD","MISSING_LOAD_URL_OPTION","LOAD_BAD_RESPONSE","MISSING_IMG_THUMB","MISSING_IMG_URL","ERROR_DURING_DELETE","MISSING_DELETE_URL_OPTION","sid","SVG","_delayedInit","_loadImages","_columnNumber","window_width","_buildColumns","empty","ajax","method","crossDomain","requestWithCORS","withCredentials","requestWithCredentials","headers","requestHeaders","done","_processLoadedImages","fail","_infiniteScroll","_loadImage","$img_container","_resizeModal","thumb","_imageHasTag","_getImages","_reorderImages","_shortestColumn","$col","min_height","col","$column","from","get_images","$image","infinite_scroll","cols","_getImageAttrs","attrs","img_attributes","_insertImage","siblings","rect","getBoundingRect","_updateTags","_showImagesByTags","_deleteImage","confirm","_toggleTags","title_height","tags_height","$tags","_selectTag","$tag","inlineClasses","inlineClass","inlineStyles","inlineStyle","splits","new_split","lineBreakerTags","lineBreakerOffset","lineBreakerHorizontalOffset","lineBreaker","$line_breaker","mouseDownFlag","mouseMoveTimer","_show","$tag1","$tag2","breakerTop","breakerLeft","breakerWidth","parent_tag","parent_top","parent_bottom","tag_top","tag_bottom","tag1_bottom","tag2_top","_checkTagSiblings","mouseY","$sibling","next_node","offsetParent","_checkTag","previousSibling","_isInWp","inFroalaWrapper","o_tag","_tagAt","closest","_searchTagVertically","_searchTagHorizontally","limit","_tagUnder","_mouseTimer","clearTimeout","_hide","_mouseDown","_mouseUp","_doLineBreak","default_tag","_initLineBreaker","lineHeights","Default","Single","Double","lineHeight","$blk","lineH","blkStyle","lineStyle","linkEditButtons","linkInsertButtons","linkAttributes","linkAutoPrefix","linkStyles","linkMultipleStyles","linkConvertEmailAddress","linkAlwaysBlank","linkAlwaysNoFollow","linkNoOpener","linkNoReferrer","linkList","displayText","linkText","c_el","info","atEnd","atStart","allSelected","selectedLinks","containerEl","links","linkRange","sel","getRangeAt","rangeCount","r","selectNodeContents","compareBoundaryPoints","END_TO_START","START_TO_END","createTextRange","moveToElementText","compareEndPoints","_hideEditPopup","ALT","endOffset","$link","link_buttons","text_inputs","_showInsertPopup","input_layer","imageLink","newImg","$doc","usePredefined","rel","insertCallback","_split","deep_parent","deepestParent","close_str","open_str","closeTagString","openTagString","marker_str","original_href","isEmail","local_path","LinkProtocols","prop","$pop","$ref","close","$prev","listAdvancedTypes","lists","_openFlag","_closeFlag","_replace","parent_node","$l","_format","start_margin","margin_left","open_tag","end_tag","indentMargin","_unformat","$li","li_class","li_attrs","wrapInner","_shouldUnformat","do_unformat","list_type","syncInputs","li","firstElementChild","_indent","prev_li","nl","isList","tmp","prev_nl","$new_nl","_outdent","_indentListStyleTypeNone","parentBlk","lst","lst_parent","listStyleType","_outdentListStyleTypeNone","_afterCommand","do_indent","blks","circle","disc","square","param","hasOptions","paragraphFormat","N","PRE","paragraphFormatSelection","paragraphDefaultSelection","_styleLiWithoutBlocks","_styleLiWithBlocks","_styleTdWithBlocks","_style","$checkstyle","BLOCKQUOTE","blk","shortcut","shortcuts","paragraphStyles","paragraphMultipleStyles","paragraphStyle","html2pdf","_prepare","print_iframe","overflow","tabIndex","listener","removeEventListener","frame_doc","contentWindow","write","documentReady","style_el","cloneNode","style_elements","link_el","new_link_el","media","frames","toPDF","html2canvas","useCORS","quickInsertButtons","quickInsertTags","quickInsertEnabled","QUICK_INSERT_BUTTONS","RegisterQuickInsertButton","requiredPlugin","$qi_image_input","quickInsert","res","prompt","embedly","table","insertHR","$quick_insert","_place","qiTop","qiLeft","qiTagAlign","$span","$helper","_showQIHelper","_hideHelper","_initquickInsert","deep_tag","_enterInBR","_enterInP","$qi_helper","btns","btns_html","tooltip","bind","transition_delay","childItems","eq","_repositionQIButton","onShow","quote","_deepestParent","_increase","$quote","_decrease","SINGLE_QUOTE","increase","decrease","saveInterval","saveURL","saveParams","saveParam","saveMethod","_timeout","_last_html","_force","ERROR_ON_SERVER","original_html","event_returned_value","_mightSave","letteringClass","selectionClass","innerText","specialCharactersSets","specialCharButtons","specialCharacters","_showSpecialChars","_initSpecialChars","_specialCharsHTML","_renderSplCharsCategory","_renderSpanSplCharsHtml","setSpecialCharacterCategory","$icons","splChars_html","splChar","splCharMap","splCharValue","showSpecialCharsPopup","specialCharacter","tableInsertMaxSize","tableEditButtons","tableInsertButtons","tableResizer","tableDefaultWidth","tableResizerOffset","tableResizingLimit","tableColorsButtons","tableColors","tableColorsStep","tableCellStyles","tableStyles","tableCellMultipleStyles","tableMultipleStyles","tableInsertHelper","tableInsertHelperOffset","$resizer","$insert_helper","mouseDownCellFlag","mouseDownCell","resizingFlag","_tableMap","_selectionOffset","selectedCells","table_buttons","rows_columns","_insertTableHtml","_hoverCell","$table_cell","$select_size","$cell","$focused_el","$cells","_colorsHTML","_addColorsAccessibility","setBackground","cell_width","$table","$current_table","selectedTable","addHeader","thead","$td","removeHeader","$table_header","td","insertRow","ref_row","$ref_row","_currentSelection","min_i","max_i","tr","$refCell","insertAdjacentHTML","deleteRow","rowspan","insertAdjacentElement","$row_parent","_updateCellSpan","insertColumn","ref_col","min_j","max_j","old_width","new_width","col_no","td_no","ref_td","$ref_td","colspan","deleteColumn","_columnWidth","_updateColspan","k","first_span","span","_decreaseCellSpan","_updateRowspan","span_type","mergeCells","_removeKeyboardSelectionHandlers","cells","$first_cell","$first_row","first_row_cells","empty_trs","splitCellHorizontally","$selected_cell","$current_row","current_rowspan","cell_origin","_cellOrigin","$new_td","new_rowspan","_removeSelection","splitCellVertically","current_colspan","parent_width","new_colspan","_columnsWidth","$selected_cells","horizontalAlign","multiple_styles","classes","$tr","c_index","cspan","rspan","_cellEnds","origin_i","origin_j","_clearSelection","cellOrigin","cellEnd","_selectionLimits","first_i","last_i","first_j","last_j","$tl","$bl","selectCells","firstCell","lastCell","firstCellOrigin","lastCellOrigin","limits","_getCellUnder","cell","$target","_stopEdit","_resize","_hideResizer","_mouseEnter","relatedTarget","_inputOnClick","_moveInNestedTable","new_map","_moveUp","_moveDown","_moveWithArrows","origin","up","sibling","previousElementSibling","nextElementSibling","_navigateWithArrows","webkit","_initResizer","$table_resizer","_mouseMove","_hideInsertHelper","_placeResizer","$table_parent","tag_left","tag_right","tag_origin","second","resizer_top","resizer_height","resizer_left","max_left","max_right","_showInsertColHelper","_initInsertHelper","mouseX","btn_width","_showInsertRowHelper","_insertHelper","tag_below","initial_positon","release_position","table_width","first_widths","first_percentages","second_widths","second_percentages","$second_cell","first_cell_percentage","table_percentage","left_margin","right_margin","col1","col2","left_limit","right_limit","_addMarkersInCell","_useTab","currentSelection","focusOffset","$ti_helper","_selectCellWithKeyboard","SPACE","selectCellsWithKeyboard","fixedCell","handlerCell","handlerOrigin","selected_cells","A","stopImmediatePropagation","c_selected_cells","below","tableRows","tableColumns","merge","tableCells","Top","Middle","Bottom","tableCellVerticalAlign","tableCellHorizontalAlign","URLRegEx","LinkRegEx","_linkReplaceHandler","dots","_getRegEx","_convertToLink","_isA","_lastPart","_inlineType","domParser","DOMParser","parseFromString","rel_attr","videoAllowedTypes","videoEditButtons","videoInsertButtons","videoMaxSize","videoResize","videoSizeButtons","videoTextNear","videoUpload","videoUploadMethod","videoUploadParam","videoUploadParams","videoUploadToS3","videoUploadToAzure","videoUploadURL","DEFAULT_VIDEO_UPLOAD_URL","$video_resizer","$current_video","$video_obj","iframeURL","video_buttons","insertHtmlVideo","$current_video_obj","autoPlayFlag","addAutoplay","indexofAutoplay","_videoUploaded","_videoUploadError","_videoUploadProgress","_videoUploadAborted","c_y","clientTop","s_y","diff_y","_resizeVideo","$vid_overlay","_selectVideo","vid_exit_flag","vid","videoURL","_refreshVideoList","candidates","dragDrop","toggleAutoplayStyle","setAutoplay","videoAlign","wordDeniedTags","wordDeniedAttrs","wordAllowedStyleProps","wordPasteModal","wordPasteKeepFormatting","wordPaste","_v_shapes_map","_showModal","_buildModalBody","_hideModal","keep_formatting","wordAllowedStylePropsBackup","spaces","_wordClean","getRtfClipboard","div","cleanBlankSpaces","cleanEmptyTagsAndDivs","_removeNode","_traverse","current_child","previous_child","_isList","_getListLevel","_getListContent","head_style_hash","cloned_node","heading","COMMENT_NODE","_getAllowedListStyles","_cleanElement","_buildList","prev_margin","order_regex","is_ordered","prev_order","previous_element_sibling","list_type_node","listObj","list_tag","listStyle","startIndexUpperAlpha","startIndexLowerAlpha","listType","classType","next_level","tagClosedFlag","currentNode","isMarginEqual","allowedStyles","parentStyles","foundVal","_changeTagName","old_node","new_node","attribute","_cleanTr","clearAttributes","total_width","missing_width","width_attr","UNICODE_NBSP","td_child","has_single_child","_cleanAlignment","class_attr","_normalizeAttribute","class_matches","xl_class","dot_xl_class","_appendStyle","valign","valign_matches","halign","halign_matches","background_color","background_matches","old_style","new_style","_cleanStyleDuplicates","style_list","style_hash","style_list_item","splited_style","number","_hexToBase64","hex","hexa_chars","dec_chars","dec","_rtf_map","_getRtfData","rtf","letter","p_type","img_data","bliptab_split","image_type","bracket_split","space_split","image_hex","_buildRtfMap","_cleanImage","vshapes_tag","image_base64","data_uri","tag_name_lower_case","word_tags","ignore_tags","class_contents","class_content","style_attrs","style_attr","paragraph_tag_list","el_class","cleaned_class","paragraph_style","paragraph_style_matches","getNamedItem","spanTags","cleaned_style","_parseHeadStyle","head_styles","head_style","style_definitions","style_attrs_array","_getVShapes","oid","parser","word_doc","previous_sibling","list_element","before_element","nextNode","fragment","word_doc_string","htmlAllowedStylePropsCopy","htmlAllowedStyleProps"],"mappings":"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MAArB,CAAX;EAEA;EACL;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACKvS,IAAAA,CAAC,CAACwS,UAAF,GAAe7F,MAAM,CAACnE,iBAAP,CAAyB+J,MAAzB,CAAf;EACH,GA3DA,GAAD;;EA8DC,aAAU5mD,SAAV,EAAqB;EAClB;EACA,QAAIq0C,CAAC,GAAGwD,QAAR;EACA,QAAIa,KAAK,GAAGrE,CAAC,CAACsE,GAAd;EACA,QAAIC,IAAI,GAAGF,KAAK,CAACE,IAAjB;EACA,QAAIkO,YAAY,GAAGpO,KAAK,CAACW,SAAzB;EAEA;EACL;EACA;;EACK,QAAI0N,KAAK,GAAG1S,CAAC,CAAC2S,GAAF,GAAQ,EAApB;EAEA;EACL;EACA;;EACK,QAAIC,OAAO,GAAGF,KAAK,CAACG,IAAN,GAAatO,IAAI,CAACC,MAAL,CAAY;EACnC;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACShQ,MAAAA,IAAI,EAAE,cAAUse,IAAV,EAAgBC,GAAhB,EAAqB;EACvB,aAAKD,IAAL,GAAYA,IAAZ;EACA,aAAKC,GAAL,GAAWA,GAAX;EACH;EAED;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACI;EACA;EACJ;EACI;EACA;EACJ;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACI;EACA;EACJ;EACI;EACA;EACJ;EAEA;EACJ;;EAEA;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"}