/*!
 * froala_editor v3.2.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2021 Froala Labs
 */

{"version":3,"file":"entities.js","sources":["../../../src/js/plugins/entities.js"],"sourcesContent":["import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  entities: '&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;'\r\n  + '&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;'\r\n  + '&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;'\r\n  + '&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;'\r\n  + '&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;'\r\n  + '&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;'\r\n  + '&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;'\r\n  + '&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;'\r\n  + '&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;'\r\n  + '&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;'\r\n  + '&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;'\r\n  + '&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;'\r\n  + '&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;'\r\n  + '&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;'\r\n  + '&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;'\r\n  + '&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;'\r\n  + '&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;'\r\n})\r\n\r\nFE.PLUGINS.entities = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  let _reg_exp \r\n  let _map \r\n\r\n  // if &, then index should be 0\r\n  function _process(el) {\r\n    const { textContent : text } = el \r\n\r\n    if (text.match(_reg_exp)) {\r\n      let new_text = '' \r\n\r\n      for (let j = 0;  j < text.length; j++) {\r\n        if (_map[text[j]]) new_text += _map[text[j]] \r\n        else new_text += text[j] \r\n      }\r\n\r\n      el.textContent = new_text \r\n    }\r\n  }\r\n\r\n  function _encode(el) {\r\n    if (el && ['STYLE', 'SCRIPT', 'svg', 'IFRAME'].indexOf(el.tagName) >= 0) return true \r\n\r\n    const contents = editor.node.contents(el) \r\n\r\n    // Process contents.\r\n    for (let i = 0; i < contents.length; i++) {\r\n      if (contents[i].nodeType === Node.TEXT_NODE) {\r\n        _process(contents[i]) \r\n      }\r\n      else {\r\n        _encode(contents[i]) \r\n      }\r\n    }\r\n\r\n    // Process node itself.\r\n    if (el.nodeType === Node.TEXT_NODE) _process(el)\r\n    \r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Encode entities.\r\n   */\r\n  const _encodeEntities = (html) => {\r\n    if (html.length === 0) return '' \r\n\r\n    return editor.clean.exec(html, _encode).replace(/\\&amp;/g, '&') \r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  const _init = () => {\r\n    if (!editor.opts.htmlSimpleAmpersand) {\r\n      editor.opts.entities = `${editor.opts.entities}&amp;`\r\n    }\r\n\r\n    // Do escape.\r\n    const entities_text = $(document.createElement('div')).html(editor.opts.entities).text() \r\n    const entities_array = editor.opts.entities.split(';') \r\n    _map = {} \r\n    _reg_exp = '' \r\n\r\n    for (let i = 0; i < entities_text.length; i++) {\r\n      const chr = entities_text.charAt(i) \r\n      _map[chr] = `${entities_array[i]};` \r\n      _reg_exp += `\\\\${chr + (i < entities_text.length - 1 ? '|' : '')}`\r\n    }\r\n    _reg_exp = new RegExp(`(${_reg_exp})`, 'g') \r\n\r\n    editor.events.on('html.get', _encodeEntities, true) \r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n"],"names":["Object","assign","FE","DEFAULTS","entities","PLUGINS","editor","$","_reg_exp","_map","_process","el","text","textContent","match","new_text","j","length","_encode","indexOf","tagName","contents","node","i","nodeType","Node","TEXT_NODE","_encodeEntities","html","clean","exec","replace","_init","opts","htmlSimpleAmpersand","entities_text","document","createElement","entities_array","split","chr","charAt","RegExp","events","on"],"mappings":"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"}