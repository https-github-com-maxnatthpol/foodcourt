/*!
 * froala_editor v3.2.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2021 Froala Labs
 */

{"version":3,"file":"spell_checker.js","sources":["../../../src/js/third_party/spell_checker.js"],"sourcesContent":["import FE from '../index.js'\r\n\r\nFE.DEFAULT_SCAYT_OPTIONS = {\r\n  enableOnTouchDevices: false,\r\n  disableOptionsStorage: ['all'],\r\n  localization: 'en',\r\n  extraModules: 'ui',\r\n  DefaultSelection: 'American English',\r\n  spellcheckLang: 'en_US',\r\n  contextMenuSections: 'suggest|moresuggest',\r\n  serviceProtocol: 'https',\r\n  servicePort: '80',\r\n  serviceHost: 'svc.webspellchecker.net',\r\n  servicePath: 'spellcheck/script/ssrv.cgi',\r\n  contextMenuForMisspelledOnly: true,\r\n  scriptPath: 'https://svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js'\r\n}\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  scaytAutoload: false,\r\n  scaytCustomerId: '1:ldogw1-MSDuT3-slyfO-0YJgB1-Wx7262-HIT741-MAMDv4-10qfb3-A4LDP-c60m3-hSQgd2-az2',\r\n  scaytOptions: {}\r\n})\r\n\r\nFE.PLUGINS.spellChecker = function (editor) {\r\n  let object\r\n\r\n  // Refresh button in toolbar.\r\n  function refresh($btn) {\r\n    if (object && object.isDisabled) {\r\n      const active = !object.isDisabled()\r\n      $btn.toggleClass('fr-active', active).attr('aria-pressed', active)\r\n\r\n      editor.$el.attr('spellcheck', editor.opts.spellcheck && !active)\r\n    }\r\n  }\r\n\r\n  // Remove markup from the current selection.\r\n  function _beforeCommand(cmd) {\r\n    if (!object || !object.isDisabled || object.isDisabled()) return\r\n\r\n    if (['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', 'html'].indexOf(cmd) >= 0) {\r\n      object.removeMarkupInSelectionNode({\r\n        removeInside: true\r\n      })\r\n    }\r\n  }\r\n\r\n  // Reload markup on the current selection.\r\n  function _afterCommand(cmd) {\r\n    if (!object || !object.isDisabled || object.isDisabled()) return\r\n\r\n    if (['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', 'html'].indexOf(cmd) >= 0) {\r\n      object.reloadMarkup()\r\n    }\r\n  }\r\n\r\n  // Key press.\r\n  function _keyPress(e) {\r\n    if (!object || !object.isDisabled || object.isDisabled()) return\r\n\r\n    const key_code = e.which\r\n\r\n    // Reload markup on ENTER.\r\n    if (key_code == FE.KEYCODE.ENTER) {\r\n      setTimeout(object.reloadMarkup, 0)\r\n    }\r\n  }\r\n\r\n  // Toggle spellchecker.\r\n  function toggle() {\r\n    if (!object || !object.isDisabled) return\r\n\r\n    object.setDisabled(!object.isDisabled())\r\n  }\r\n\r\n  // Clean HTML on get.\r\n  function _cleanOnGet(el) {\r\n    // Tag is image.\r\n    if (el && el.getAttribute && el.getAttribute('data-scayt-word')) {\r\n      el.outerHTML = el.innerHTML\r\n    }\r\n\r\n    // Look for inner nodes that might be in a similar case.\r\n    else if (el && el.nodeType == Node.ELEMENT_NODE) {\r\n      const els = el.querySelectorAll('[data-scayt-word], [data-spelling-word]')\r\n\r\n      for (let i = 0; i < els.length; i++) {\r\n        els[i].outerHTML = els[i].innerHTML\r\n      }\r\n    }\r\n  }\r\n\r\n  function _loaded() {\r\n    // Set events.\r\n    editor.events.on('commands.before', _beforeCommand)\r\n    editor.events.on('commands.after', _afterCommand)\r\n    editor.events.on('keydown', _keyPress, true)\r\n\r\n    // Remove markup when getting the HTML.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n\r\n    // Refresh\r\n    refresh(editor.$tb.find('[data-cmd=\"spellChecker\"]'))\r\n  }\r\n\r\n  function _doInit() {\r\n    // Get SCAYT default options and overide them.\r\n    const scayt_options = editor.opts.scaytOptions\r\n    scayt_options.customerId = editor.opts.scaytCustomerId\r\n    scayt_options.container = editor.$iframe ? editor.$iframe.get(0) : editor.$el.get(0)\r\n    scayt_options.autoStartup = editor.opts.scaytAutoload\r\n    scayt_options.onLoad = _loaded\r\n\r\n    // Set language.\r\n    if (editor.opts.language !== null) {\r\n      editor.opts.spellCheckerLanguage = editor.opts.language\r\n    }\r\n\r\n    // Disable spellcheck if there is scayt.\r\n    if (editor.opts.scaytAutoload === true) {\r\n      editor.opts.spellcheck = false\r\n    }\r\n\r\n    object = new SCAYT.CUSTOMSCAYT(scayt_options)\r\n  }\r\n\r\n  // Initialize.\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    editor.opts.scaytOptions = Object.assign({}, FE.DEFAULT_SCAYT_OPTIONS, editor.opts.scaytOptions)\r\n\r\n    if (typeof SCAYT !== 'undefined') {\r\n      _doInit()\r\n    }\r\n    else {\r\n      if (!editor.shared.spellCheckerLoaded) editor.shared.spellCheckerCallbacks = []\r\n      editor.shared.spellCheckerCallbacks.push(_doInit)\r\n\r\n      if (!editor.shared.spellCheckerLoaded) {\r\n        editor.shared.spellCheckerLoaded = true\r\n\r\n        // Init SCAYT.\r\n        const script = document.createElement('script')\r\n        script.type = 'text/javascript'\r\n        script.src = editor.opts.scaytOptions.scriptPath\r\n        script.innerText = ''\r\n        script.onload = function () {\r\n          /*global SCAYT */\r\n          for (let i = 0; i < editor.shared.spellCheckerCallbacks.length; i++) {\r\n            editor.shared.spellCheckerCallbacks[i]()\r\n          }\r\n        }\r\n\r\n        document.getElementsByTagName('head')[0].appendChild(script)\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    refresh: refresh,\r\n    toggle: toggle\r\n  }\r\n}\r\n\r\n// Register spellchecker command.\r\nFE.DefineIcon('spellChecker', {\r\n  NAME: 'keyboard-o',\r\n  FA5NAME: 'keyboard',\r\n  SVG_KEY: 'spellcheck'\r\n})\r\nFE.RegisterCommand('spellChecker', {\r\n  title: 'Spell Checker',\r\n  undo: false,\r\n  focus: false,\r\n  accessibilityFocus: true,\r\n  forcedRefresh: true,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.spellChecker.toggle()\r\n  },\r\n  refresh: function ($btn) {\r\n    this.spellChecker.refresh($btn)\r\n  },\r\n  plugin: 'spellChecker'\r\n})\r\n"],"names":["FE","DEFAULT_SCAYT_OPTIONS","enableOnTouchDevices","disableOptionsStorage","localization","extraModules","DefaultSelection","spellcheckLang","contextMenuSections","serviceProtocol","servicePort","serviceHost","servicePath","contextMenuForMisspelledOnly","scriptPath","Object","assign","DEFAULTS","scaytAutoload","scaytCustomerId","scaytOptions","PLUGINS","spellChecker","editor","object","refresh","$btn","isDisabled","active","toggleClass","attr","$el","opts","spellcheck","_beforeCommand","cmd","indexOf","removeMarkupInSelectionNode","removeInside","_afterCommand","reloadMarkup","_keyPress","e","key_code","which","KEYCODE","ENTER","setTimeout","toggle","setDisabled","_cleanOnGet","el","getAttribute","outerHTML","innerHTML","nodeType","Node","ELEMENT_NODE","els","querySelectorAll","i","length","_loaded","events","on","$tb","find","_doInit","scayt_options","customerId","container","$iframe","get","autoStartup","onLoad","language","spellCheckerLanguage","SCAYT","CUSTOMSCAYT","_init","$wp","shared","spellCheckerLoaded","spellCheckerCallbacks","push","script","document","createElement","type","src","innerText","onload","getElementsByTagName","appendChild","DefineIcon","NAME","FA5NAME","SVG_KEY","RegisterCommand","title","undo","focus","accessibilityFocus","forcedRefresh","callback","plugin"],"mappings":"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"}