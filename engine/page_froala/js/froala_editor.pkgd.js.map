/*!
 * froala_editor v3.2.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2021 Froala Labs
 */

{"version":3,"file":"froala_editor.pkgd.js","sources":["../../src/js/polyfills.js","../../src/js/defaults.js","../../src/js/editor.js","../../src/js/modules/core/dom/node.js","../../src/js/modules/core/clean.js","../../src/js/modules/core/helpers.js","../../src/js/modules/core/events.js","../../src/js/modules/core/commands.js","../../src/js/modules/core/cursor_lists.js","../../src/js/modules/core/cursor.js","../../src/js/modules/core/data.js","../../src/js/modules/core/edit.js","../../src/js/modules/core/format.js","../../src/js/modules/core/dom/spaces.js","../../src/js/modules/core/dom/markers.js","../../src/js/modules/core/dom/selection.js","../../src/js/modules/core/options/language.js","../../src/js/modules/core/options/placeholder.js","../../src/js/modules/core/html.js","../../src/js/modules/core/keys.js","../../src/js/modules/core/paste.js","../../src/js/modules/core/shortcuts.js","../../src/js/modules/core/snapshot.js","../../src/js/modules/core/undo.js","../../src/js/modules/core/options/size.js","../../src/js/modules/core.js","../../src/js/modules/ui/popups.js","../../src/js/modules/ui/accessibility.js","../../src/js/modules/ui/tooltip.js","../../src/js/modules/ui/button.js","../../src/js/modules/ui/icon.js","../../src/js/modules/ui/modals.js","../../src/js/modules/ui/position.js","../../src/js/modules/ui/refresh.js","../../src/js/modules/ui/toolbar.js","../../src/js/$.js","../../src/js/index.js","../../src/js/plugins/align.js","../../src/js/plugins/char_counter.js","../../src/js/plugins/code_beautifier.js","../../src/js/plugins/code_view.js","../../src/js/plugins/colors.js","../../src/js/plugins/draggable.js","../../src/js/plugins/edit_in_popup.js","../../src/js/plugins/emoticons.js","../../src/js/plugins/entities.js","../../src/js/plugins/file.js","../../src/js/plugins/files_manager.js","../../src/js/plugins/cryptojs.js","../../src/js/plugins/font_family.js","../../src/js/plugins/font_size.js","../../src/js/plugins/forms.js","../../src/js/plugins/fullscreen.js","../../src/js/plugins/help.js","../../src/js/plugins/image.js","../../src/js/plugins/image_manager.js","../../src/js/plugins/inline_class.js","../../src/js/plugins/inline_style.js","../../src/js/plugins/line_breaker.js","../../src/js/plugins/line_height.js","../../src/js/plugins/link.js","../../src/js/plugins/lists.js","../../src/js/plugins/paragraph_format.js","../../src/js/plugins/paragraph_style.js","../../src/js/plugins/print.js","../../src/js/plugins/quick_insert.js","../../src/js/plugins/quote.js","../../src/js/plugins/save.js","../../src/js/plugins/special_characters.js","../../src/js/plugins/table.js","../../src/js/plugins/url.js","../../src/js/plugins/video.js","../../src/js/plugins/word_paste.js","../../src/js/index.pkgd.js"],"sourcesContent":["// Closest polyfill.\r\nif (!Element.prototype.matches)\r\n    Element.prototype.matches = Element.prototype.msMatchesSelector ||\r\n                                Element.prototype.webkitMatchesSelector;\r\n\r\nif (!Element.prototype.closest)\r\n  Element.prototype.closest = function(s) {\r\n    var el = this;\r\n    if (!document.documentElement.contains(el)) return null;\r\n    do {\r\n        if (el.matches(s)) return el;\r\n        el = el.parentElement || el.parentNode;\r\n    } while (el !== null && el.nodeType === 1);\r\n    return null;\r\n};\r\n\r\n// Matches polyfill.\r\nif (!Element.prototype.matches) {\r\n    Element.prototype.matches =\r\n        Element.prototype.matchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector ||\r\n        Element.prototype.oMatchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        function(s) {\r\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                i = matches.length;\r\n            while (--i >= 0 && matches.item(i) !== this) {}\r\n            return i > -1;\r\n        };\r\n}\r\n\r\n// isArray polyfill.\r\nif (!Array.isArray) {\r\n  Array.isArray = function(arg) {\r\n    return Object.prototype.toString.call(arg) === '[object Array]';\r\n  };\r\n}\r\n\r\n\r\n// Object.assign\r\nif (typeof Object.assign != 'function') {\r\n  // Must be writable: true, enumerable: false, configurable: true\r\n  Object.defineProperty(Object, \"assign\", {\r\n    value: function assign(target, varArgs) { // .length of function is 2\r\n      'use strict';\r\n      if (target == null) { // TypeError if undefined or null\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n      }\r\n\r\n      var to = Object(target);\r\n\r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n\r\n        if (nextSource != null) { // Skip over if undefined or null\r\n          for (var nextKey in nextSource) {\r\n            // Avoid bugs when hasOwnProperty is shadowed\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n              to[nextKey] = nextSource[nextKey];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    },\r\n    writable: true,\r\n    configurable: true\r\n  });\r\n};\r\n\r\n// https://github.com/lazd/scopedQuerySelectorShim/blob/master/src/scopedQuerySelectorShim.js\r\n(function _scopeShim() {\r\n  // Match usage of scope\r\n  const scopeRE = /^\\s*:scope/gi\r\n  const scopeREComma = /,\\s*:scope/gi\r\n\r\n  // A temporary element to query against for elements not currently in the DOM\r\n  // We'll also use this element to test for :scope support\r\n  const container = document.createElement('div')\r\n\r\n  // Overrides\r\n  function overrideNodeMethod(prototype, methodName) {\r\n\r\n    // Store the old method for use later\r\n    const oldMethod = prototype[methodName]\r\n\r\n    // Override the method\r\n    prototype[methodName] = function (query) {\r\n      let nodeList\r\n      let gaveId = false\r\n      let gaveContainer = false\r\n\r\n      if (query && !Array.isArray(query) && (query.match(scopeRE) || query.match(scopeREComma))) {\r\n\r\n        if (!this.parentNode) {\r\n\r\n          // Add to temporary container\r\n          container.appendChild(this)\r\n          gaveContainer = true\r\n        }\r\n\r\n        const parentNode = this.parentNode\r\n\r\n        if (!this.id) {\r\n\r\n          // Give temporary ID\r\n          this.id = `rootedQuerySelector_id_${(new Date()).getTime()}`\r\n          gaveId = true\r\n        }\r\n\r\n        // Find elements against parent node\r\n        // Replace :scope with node's id\r\n        nodeList = oldMethod.call(parentNode, query.replace(scopeRE, `#${this.id}`).replace(scopeREComma, `,#${this.id}`))\r\n\r\n        // Reset the ID\r\n        if (gaveId) {\r\n          this.id = ''\r\n        }\r\n\r\n        // Remove from temporary container\r\n        if (gaveContainer) {\r\n          container.removeChild(this)\r\n        }\r\n\r\n        return nodeList\r\n      }\r\n\r\n\r\n      // No immediate child selector used\r\n\r\n      return oldMethod.call(this, query)\r\n\r\n    }\r\n  }\r\n\r\n  // Check if the browser supports :scope\r\n  try {\r\n\r\n    // Browser supports :scope, do nothing\r\n    const nodeColl = container.querySelectorAll(':scope *')\r\n\r\n    if (!nodeColl || Array.isArray(nodeColl)) {\r\n      throw 'error'\r\n    }\r\n  }\r\n  catch (e) {\r\n    // Browser doesn't support :scope, add polyfill\r\n    overrideNodeMethod(Element.prototype, 'querySelector')\r\n    overrideNodeMethod(Element.prototype, 'querySelectorAll')\r\n    overrideNodeMethod(HTMLElement.prototype, 'querySelector')\r\n    overrideNodeMethod(HTMLElement.prototype, 'querySelectorAll')\r\n  }\r\n})();\r\n\r\n//classlist library code\r\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\r\n\"document\" in self && (\"classList\" in document.createElement(\"_\") && (!document.createElementNS || \"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\")) || ! function (t) {\r\n  \"use strict\";\r\n  if (\"Element\" in t) {\r\n    var e = \"classList\",\r\n      n = \"prototype\",\r\n      i = t.Element[n],\r\n      s = Object,\r\n      r = String[n].trim || function () {\r\n        return this.replace(/^\\s+|\\s+$/g, \"\")\r\n      },\r\n      o = Array[n].indexOf || function (t) {\r\n        for (var e = 0, n = this.length; n > e; e++)\r\n          if (e in this && this[e] === t) return e;\r\n        return -1\r\n      },\r\n      c = function (t, e) {\r\n        this.name = t, this.code = DOMException[t], this.message = e\r\n      },\r\n      a = function (t, e) {\r\n        if (\"\" === e) throw new c(\"SYNTAX_ERR\", \"The token must not be empty.\");\r\n        if (/\\s/.test(e)) throw new c(\"INVALID_CHARACTER_ERR\", \"The token must not contain space characters.\");\r\n        return o.call(t, e)\r\n      },\r\n      l = function (t) {\r\n        for (var e = r.call(t.getAttribute(\"class\") || \"\"), n = e ? e.split(/\\s+/) : [], i = 0, s = n.length; s > i; i++) this.push(n[i]);\r\n        this._updateClassName = function () {\r\n          t.setAttribute(\"class\", this.toString())\r\n        }\r\n      },\r\n      u = l[n] = [],\r\n      h = function () {\r\n        return new l(this)\r\n      };\r\n    if (c[n] = Error[n], u.item = function (t) {\r\n        return this[t] || null\r\n      }, u.contains = function (t) {\r\n        return ~a(this, t + \"\")\r\n      }, u.add = function () {\r\n        var t, e = arguments,\r\n          n = 0,\r\n          i = e.length,\r\n          s = !1;\r\n        do t = e[n] + \"\", ~a(this, t) || (this.push(t), s = !0); while (++n < i);\r\n        s && this._updateClassName()\r\n      }, u.remove = function () {\r\n        var t, e, n = arguments,\r\n          i = 0,\r\n          s = n.length,\r\n          r = !1;\r\n        do\r\n          for (t = n[i] + \"\", e = a(this, t); ~e;) this.splice(e, 1), r = !0, e = a(this, t); while (++i < s);\r\n        r && this._updateClassName()\r\n      }, u.toggle = function (t, e) {\r\n        var n = this.contains(t),\r\n          i = n ? e !== !0 && \"remove\" : e !== !1 && \"add\";\r\n        return i && this[i](t), e === !0 || e === !1 ? e : !n\r\n      }, u.replace = function (t, e) {\r\n        var n = a(t + \"\");\r\n        ~n && (this.splice(n, 1, e), this._updateClassName())\r\n      }, u.toString = function () {\r\n        return this.join(\" \")\r\n      }, s.defineProperty) {\r\n      var f = {\r\n        get: h,\r\n        enumerable: !0,\r\n        configurable: !0\r\n      };\r\n      try {\r\n        s.defineProperty(i, e, f)\r\n      } catch (p) {\r\n        void 0 !== p.number && -2146823252 !== p.number || (f.enumerable = !1, s.defineProperty(i, e, f))\r\n      }\r\n    } else s[n].__defineGetter__ && i.__defineGetter__(e, h)\r\n  }\r\n}(self), function () {\r\n  \"use strict\";\r\n  var t = document.createElement(\"_\");\r\n  if (t.classList.add(\"c1\", \"c2\"), !t.classList.contains(\"c2\")) {\r\n    var e = function (t) {\r\n      var e = DOMTokenList.prototype[t];\r\n      DOMTokenList.prototype[t] = function (t) {\r\n        var n, i = arguments.length;\r\n        for (n = 0; i > n; n++) t = arguments[n], e.call(this, t)\r\n      }\r\n    };\r\n    e(\"add\"), e(\"remove\")\r\n  }\r\n  if (t.classList.toggle(\"c3\", !1), t.classList.contains(\"c3\")) {\r\n    var n = DOMTokenList.prototype.toggle;\r\n    DOMTokenList.prototype.toggle = function (t, e) {\r\n      return 1 in arguments && !this.contains(t) == !e ? e : n.call(this, t)\r\n    }\r\n  }\r\n  \"replace\" in document.createElement(\"_\").classList || (DOMTokenList.prototype.replace = function (t, e) {\r\n    var n = this.toString().split(\" \"),\r\n      i = n.indexOf(t + \"\");\r\n    ~i && (n = n.slice(i), this.remove.apply(this, n), this.add(e), this.add.apply(this, n.slice(1)))\r\n  }), t = null\r\n}());","export default {\r\n  DEFAULTS: {\r\n    initOnClick: false,\r\n    pluginsEnabled: null\r\n  },\r\n\r\n  MODULES: {},\r\n\r\n  PLUGINS: {},\r\n\r\n  VERSION: '3.2.6',\r\n\r\n  INSTANCES: [],\r\n\r\n  OPTS_MAPPING: {},\r\n\r\n  SHARED: {},\r\n\r\n  ID: 0\r\n}","import './polyfills.js'\r\n\r\nimport defaults from './defaults.js'\r\n\r\nfunction FroalaEditor(selector, options, initCallback) {\r\n  if (typeof selector === 'string') {\r\n    let els = document.querySelectorAll(selector)\r\n    if (options && options.iframe_document) {\r\n      els = options.iframe_document.querySelectorAll(selector)\r\n    }\r\n    const inst = []\r\n    for (let i = 0; i < els.length; i++) {\r\n      let existing_instance = els[i]['data-froala.editor'];\r\n\r\n      if (existing_instance) {\r\n        console.warn('Froala Editor instance already exists.');\r\n        inst.push(existing_instance);\r\n      }\r\n      else {\r\n        inst.push(new FroalaEditor.Bootstrap(els[i], options, initCallback))\r\n      }\r\n    }\r\n\r\n    // Only one element.\r\n    if (inst.length == 1) {\r\n      return inst[0]\r\n    }\r\n\r\n    return inst\r\n  }\r\n\r\n  return new FroalaEditor.Bootstrap(selector, options, initCallback)\r\n}\r\n\r\nFroalaEditor.RegisterPlugins = function (plgList) {\r\n  for (let i = 0; i < plgList.length; i++) {\r\n    plgList[i].call(FroalaEditor)\r\n  }\r\n}\r\n\r\nObject.assign(FroalaEditor, defaults)\r\n\r\nexport default FroalaEditor","import FE from '../../../editor.js'\r\n\r\nFE.MODULES.node = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function getContents(node) {\r\n    if (!node || node.tagName === 'IFRAME') {\r\n      return []\r\n    }\r\n\r\n    return Array.prototype.slice.call(node.childNodes || [])\r\n  }\r\n\r\n  /**\r\n   * Determine if the node is a block tag.\r\n   */\r\n  function isBlock(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node.nodeType !== Node.ELEMENT_NODE) {\r\n      return false\r\n    }\r\n\r\n    return FE.BLOCK_TAGS.indexOf(node.tagName.toLowerCase()) >= 0\r\n  }\r\n\r\n  /**\r\n   * Determine if the node is a link tag.\r\n   */\r\n  function isLink(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node.nodeType !== Node.ELEMENT_NODE) {\r\n      return false\r\n    }\r\n\r\n    return node.tagName.toLowerCase() === 'a'\r\n  }\r\n\r\n  /**\r\n   * Check if a DOM element is empty.\r\n   */\r\n  function isEmpty(el, ignore_markers) {\r\n    if (!el) {\r\n      return true\r\n    }\r\n\r\n    if (el.querySelector('table')) {\r\n      return false\r\n    }\r\n\r\n    // Get element contents.\r\n    let contents = getContents(el)\r\n\r\n    // Check if there is a block tag.\r\n    if (contents.length === 1 && isBlock(contents[0])) {\r\n      contents = getContents(contents[0])\r\n    }\r\n\r\n    let has_br = false\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n      const node = contents[i]\r\n\r\n      if (ignore_markers && editor.node.hasClass(node, 'fr-marker')) {\r\n        continue\r\n      }\r\n\r\n      if (node.nodeType === Node.TEXT_NODE && node.textContent.length === 0) {\r\n        continue\r\n      }\r\n\r\n      if (node.tagName !== 'BR' && (node.textContent || '').replace(/\\u200B/gi, '').replace(/\\n/g, '').length > 0) {\r\n        return false\r\n      }\r\n\r\n      if (has_br) {\r\n        return false\r\n      }\r\n      else if (node.tagName === 'BR') {\r\n        has_br = true\r\n      }\r\n    }\r\n\r\n    // Look for void nodes.\r\n    if (el.querySelectorAll(FE.VOID_ELEMENTS.join(',')).length - el.querySelectorAll('br').length) {\r\n      return false\r\n    }\r\n\r\n    // Look for empty allowed tags.\r\n    if (el.querySelector(`${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\r\n      return false\r\n    }\r\n\r\n    // Look for block tags.\r\n    if (el.querySelectorAll(FE.BLOCK_TAGS.join(',')).length > 1) {\r\n      return false\r\n    }\r\n\r\n    // Look for do not wrap tags.\r\n    if (el.querySelector(`${editor.opts.htmlDoNotWrapTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\r\n      return false\r\n    }\r\n\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Get the block parent.\r\n   */\r\n  function blockParent(node) {\r\n    while (node && node.parentNode !== editor.el && !(node.parentNode && editor.node.hasClass(node.parentNode, 'fr-inner'))) {\r\n      node = node.parentNode\r\n\r\n      if (isBlock(node)) {\r\n        return node\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * Get deepest parent till the element.\r\n   */\r\n  function deepestParent(node, until, simple_enter) {\r\n    if (typeof until === 'undefined') {\r\n      until = []\r\n    }\r\n\r\n    if (typeof simple_enter === 'undefined') {\r\n      simple_enter = true\r\n    }\r\n    until.push(editor.el)\r\n\r\n    if (until.indexOf(node.parentNode) >= 0 || node.parentNode && editor.node.hasClass(node.parentNode, 'fr-inner') || node.parentNode && FE.SIMPLE_ENTER_TAGS.indexOf(node.parentNode.tagName) >= 0 && simple_enter) {\r\n      return null\r\n    }\r\n\r\n    // 1. Before until.\r\n    // 2. Parent node doesn't has class fr-inner.\r\n    // 3. Parent node is not a simple enter tag or quote.\r\n    // 4. Parent node is not a block tag\r\n    while (until.indexOf(node.parentNode) < 0 && node.parentNode && !editor.node.hasClass(node.parentNode, 'fr-inner') && (FE.SIMPLE_ENTER_TAGS.indexOf(node.parentNode.tagName) < 0 || !simple_enter) && !(isBlock(node) && !isBlock(node.parentNode)) && (!(isBlock(node) && isBlock(node.parentNode)) || !simple_enter)) {\r\n      node = node.parentNode\r\n    }\r\n\r\n    return node\r\n  }\r\n\r\n  function rawAttributes(node) {\r\n    const attrs = {}\r\n\r\n    const atts = node.attributes\r\n\r\n    if (atts) {\r\n      for (let i = 0; i < atts.length; i++) {\r\n        const att = atts[i]\r\n        attrs[att.nodeName] = att.value\r\n      }\r\n    }\r\n\r\n    return attrs\r\n  }\r\n\r\n  /**\r\n   * Get attributes for a node as a string.\r\n   */\r\n  function attributes(node) {\r\n    let str = ''\r\n    const atts = rawAttributes(node)\r\n\r\n    const keys = Object.keys(atts).sort()\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const nodeName = keys[i]\r\n      let value = atts[nodeName]\r\n\r\n      // Double quote + no single quote. (\")\r\n      if (value.indexOf('\\'') < 0 && value.indexOf('\"') >= 0) {\r\n        str += ` ${nodeName}='${value}'`\r\n      }\r\n\r\n      // Double quote + single quote. (\"')\r\n      else if (value.indexOf('\"') >= 0 && value.indexOf('\\'') >= 0) {\r\n        value = value.replace(/\"/g, '&quot;')\r\n        str += ` ${nodeName}=\"${value}\"`\r\n      }\r\n\r\n      // Single quote or no quote at all.\r\n      else {\r\n        str += ` ${nodeName}=\"${value}\"`\r\n      }\r\n    }\r\n\r\n    return str\r\n  }\r\n\r\n  function clearAttributes(node) {\r\n    const atts = node.attributes\r\n\r\n    for (let i = atts.length - 1; i >= 0; i--) {\r\n      const att = atts[i]\r\n      node.removeAttribute(att.nodeName)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open string for a node.\r\n   */\r\n  function openTagString(node) {\r\n    return `<${node.tagName.toLowerCase()}${attributes(node)}>`\r\n  }\r\n\r\n  /**\r\n   * Close string for a node.\r\n   */\r\n  function closeTagString(node) {\r\n    return `</${node.tagName.toLowerCase()}>`\r\n  }\r\n\r\n  /**\r\n   * Determine if the node has any left sibling.\r\n   */\r\n  function isFirstSibling(node, ignore_markers) {\r\n    if (typeof ignore_markers === 'undefined') {\r\n      ignore_markers = true\r\n    }\r\n    let sibling = node.previousSibling\r\n\r\n    while (sibling && ignore_markers && editor.node.hasClass(sibling, 'fr-marker')) {\r\n      sibling = sibling.previousSibling\r\n    }\r\n\r\n    if (!sibling) {\r\n      return true\r\n    }\r\n\r\n    if (sibling.nodeType === Node.TEXT_NODE && sibling.textContent === '') {\r\n      return isFirstSibling(sibling)\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Determine if the node has any right sibling.\r\n   */\r\n  function isLastSibling(node, ignore_markers) {\r\n    if (typeof ignore_markers === 'undefined') {\r\n      ignore_markers = true\r\n    }\r\n    let sibling = node.nextSibling\r\n\r\n    while (sibling && ignore_markers && editor.node.hasClass(sibling, 'fr-marker')) {\r\n      sibling = sibling.nextSibling\r\n    }\r\n\r\n    if (!sibling) {\r\n      return true\r\n    }\r\n\r\n    if (sibling.nodeType === Node.TEXT_NODE && sibling.textContent === '') {\r\n      return isLastSibling(sibling)\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function isVoid(node) {\r\n    return node && node.nodeType === Node.ELEMENT_NODE && FE.VOID_ELEMENTS.indexOf((node.tagName || '').toLowerCase()) >= 0\r\n  }\r\n\r\n  /**\r\n   * Check if the node is a list.\r\n   */\r\n  function isList(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    return ['UL', 'OL'].indexOf(node.tagName) >= 0\r\n  }\r\n\r\n  /**\r\n   * Check if the node is the editable element.\r\n   */\r\n  function isElement(node) {\r\n    return node === editor.el\r\n  }\r\n\r\n  /**\r\n   * Check if the node is the editable element.\r\n   */\r\n  function isDeletable(node) {\r\n    return node && node.nodeType === Node.ELEMENT_NODE && node.getAttribute('class') && (node.getAttribute('class') || '').indexOf('fr-deletable') >= 0\r\n  }\r\n\r\n  /**\r\n   * Check if the node has focus.\r\n   */\r\n  function hasFocus(node) {\r\n    return node === editor.doc.activeElement && (!editor.doc.hasFocus || editor.doc.hasFocus()) && Boolean(isElement(node) || node.type || node.href || ~node.tabIndex)\r\n  }\r\n\r\n  function isEditable(node) {\r\n    return (!node.getAttribute || node.getAttribute('contenteditable') !== 'false')\r\n              && ['STYLE', 'SCRIPT'].indexOf(node.tagName) < 0\r\n  }\r\n\r\n  function hasClass(el, cls) {\r\n    if (el instanceof $) {\r\n      el = el.get(0)\r\n    }\r\n\r\n    return el && el.classList && el.classList.contains(cls)\r\n  }\r\n\r\n  function filter(callback) {\r\n    if (editor.browser.msie) {\r\n\r\n      return callback\r\n    }\r\n\r\n\r\n    return {\r\n      acceptNode: callback\r\n    }\r\n\r\n  }\r\n\r\n  return {\r\n    isBlock,\r\n    isEmpty,\r\n    blockParent,\r\n    deepestParent,\r\n    rawAttributes,\r\n    attributes,\r\n    clearAttributes,\r\n    openTagString,\r\n    closeTagString,\r\n    isFirstSibling,\r\n    isLastSibling,\r\n    isList,\r\n    isLink,\r\n    isElement,\r\n    contents: getContents,\r\n    isVoid,\r\n    hasFocus,\r\n    isEditable,\r\n    isDeletable,\r\n    hasClass,\r\n    filter\r\n  }\r\n}\r\n","\r\nimport './dom/node.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n\r\n  // Tags that describe head from HEAD http://www.w3schools.com/html/html_head.asp.\r\n  htmlAllowedTags: ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'blockquote', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'pre', 'progress', 'queue', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'style', 'section', 'select', 'small', 'source', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr'],\r\n  htmlRemoveTags: ['script', 'style'],\r\n  htmlAllowedAttrs: ['accept', 'accept-charset', 'accesskey', 'action', 'align', 'allowfullscreen', 'allowtransparency', 'alt', 'async', 'autocomplete', 'autofocus', 'autoplay', 'autosave', 'background', 'bgcolor', 'border', 'charset', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'color', 'cols', 'colspan', 'content', 'contenteditable', 'contextmenu', 'controls', 'coords', 'data', 'data-.*', 'datetime', 'default', 'defer', 'dir', 'dirname', 'disabled', 'download', 'draggable', 'dropzone', 'enctype', 'for', 'form', 'formaction', 'frameborder', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'http-equiv', 'icon', 'id', 'ismap', 'itemprop', 'keytype', 'kind', 'label', 'lang', 'language', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'mozallowfullscreen', 'multiple', 'muted', 'name', 'novalidate', 'open', 'optimum', 'pattern', 'ping', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'reversed', 'rows', 'rowspan', 'sandbox', 'scope', 'scoped', 'scrolling', 'seamless', 'selected', 'shape', 'size', 'sizes', 'span', 'src', 'srcdoc', 'srclang', 'srcset', 'start', 'step', 'summary', 'spellcheck', 'style', 'tabindex', 'target', 'title', 'type', 'translate', 'usemap', 'value', 'valign', 'webkitallowfullscreen', 'width', 'wrap'],\r\n  htmlAllowedStyleProps: ['.*'],\r\n  htmlAllowComments: true,\r\n  htmlUntouched: false,\r\n  fullPage: false // Will also turn iframe on.\r\n})\r\n\r\nFE.HTML5Map = {\r\n  B: 'STRONG',\r\n  I: 'EM',\r\n  STRIKE: 'S'\r\n}\r\n\r\nFE.MODULES.clean = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let allowedTagsRE\r\n  let removeTagsRE\r\n  let allowedAttrsRE\r\n  let allowedStylePropsRE\r\n\r\n  function _removeInvisible(node) {\r\n    if (node.nodeType === Node.ELEMENT_NODE && node.getAttribute('class') && node.getAttribute('class').indexOf('fr-marker') >= 0) {\r\n      return false\r\n    }\r\n\r\n    // Get node contents.\r\n    let contents = editor.node.contents(node)\r\n    let markers = []\r\n    let i\r\n\r\n    // Loop through contents.\r\n    for (i = 0; i < contents.length; i++) {\r\n\r\n      // If node is not void.\r\n      if (contents[i].nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(contents[i])) {\r\n\r\n        // There are invisible spaces.\r\n        if (contents[i].textContent.replace(/\\u200b/g, '').length !== contents[i].textContent.length) {\r\n\r\n          // Do remove invisible spaces.\r\n          _removeInvisible(contents[i])\r\n        }\r\n      }\r\n\r\n      // If node is text node, replace invisible spaces.\r\n      else if (contents[i].nodeType === Node.TEXT_NODE) {\r\n        contents[i].textContent = contents[i].textContent.replace(/\\u200b/g, '')\r\n\r\n        // .replace(/&/g, '&amp;');\r\n      }\r\n    }\r\n\r\n    // Reasess contents after cleaning invisible spaces.\r\n    if (node.nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(node)) {\r\n      node.normalize()\r\n      contents = editor.node.contents(node)\r\n      markers = node.querySelectorAll('.fr-marker')\r\n\r\n      // All we have left are markers.\r\n      if (contents.length - markers.length === 0) {\r\n\r\n        // Make sure contents are all markers.\r\n        for (i = 0; i < contents.length; i++) {\r\n          if (contents[i].nodeType === Node.ELEMENT_NODE && (contents[i].getAttribute('class') || '').indexOf('fr-marker') < 0) {\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        for (i = 0; i < markers.length; i++) {\r\n          node.parentNode.insertBefore(markers[i].cloneNode(true), node)\r\n        }\r\n        node.parentNode.removeChild(node)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _toHTML(el, is_pre) {\r\n    if (el.nodeType === Node.COMMENT_NODE) {\r\n      return `<!--${el.nodeValue}-->`\r\n    }\r\n\r\n    if (el.nodeType === Node.TEXT_NODE) {\r\n\r\n      if (is_pre) {\r\n\r\n        return el.textContent.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n      }\r\n\r\n      return el.textContent.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\u00A0/g, '&nbsp;').replace(/\\u0009/g, '')\r\n    }\r\n\r\n    if (el.nodeType !== Node.ELEMENT_NODE) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE && ['STYLE', 'SCRIPT', 'NOSCRIPT'].indexOf(el.tagName) >= 0) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE && el.tagName === 'svg') {\r\n      const temp = document.createElement('div')\r\n      const node_clone = el.cloneNode(true)\r\n      temp.appendChild(node_clone)\r\n\r\n      return temp.innerHTML\r\n    }\r\n\r\n    if (el.tagName === 'IFRAME') {\r\n      return el.outerHTML.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\r\n    }\r\n\r\n    const contents = el.childNodes\r\n\r\n    if (contents.length === 0) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    let str = ''\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n\r\n      if (el.tagName === 'PRE') {\r\n        is_pre = true\r\n      }\r\n\r\n      str += _toHTML(contents[i], is_pre)\r\n    }\r\n\r\n\r\n    return editor.node.openTagString(el) + str + editor.node.closeTagString(el)\r\n  }\r\n\r\n  let scripts = []\r\n\r\n  function _encode(dirty_html) {\r\n\r\n    // Replace script tag with comments.\r\n    scripts = []\r\n\r\n    dirty_html = dirty_html.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, (str) => {\r\n      scripts.push(str)\r\n\r\n      return `[FROALA.EDITOR.SCRIPT ${scripts.length - 1}]`\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<noscript\\b[^<]*(?:(?!<\\/noscript>)<[^<]*)*<\\/noscript>/gi, (str) => {\r\n      scripts.push(str)\r\n\r\n      return `[FROALA.EDITOR.NOSCRIPT ${scripts.length - 1}]`\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<meta((?:[\\w\\W]*?)) http-equiv=\"/g, '<meta$1 data-fr-http-equiv=\"')\r\n\r\n    dirty_html = dirty_html.replace(/<img((?:[\\w\\W]*?)) src=\"/g, '<img$1 data-fr-src=\"')\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  function _decode(dirty_html) {\r\n\r\n    // Replace script comments with the original script.\r\n    dirty_html = dirty_html.replace(/\\[FROALA\\.EDITOR\\.SCRIPT ([\\d]*)\\]/gi, (str, a1) => {\r\n      if (editor.opts.htmlRemoveTags.indexOf('script') >= 0) {\r\n        return ''\r\n      }\r\n\r\n      return scripts[parseInt(a1, 10)]\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/\\[FROALA\\.EDITOR\\.NOSCRIPT ([\\d]*)\\]/gi, (str, a1) => {\r\n      if (editor.opts.htmlRemoveTags.indexOf('noscript') >= 0) {\r\n        return ''\r\n      }\r\n\r\n      let nonscriptBlock = scripts[parseInt(a1, 10)].replace(/&lt;/g, '<').replace(/&gt;/g, '>')\r\n      const $nonscriptBlock = $(nonscriptBlock)\r\n\r\n      // Clean the HTML within the noscript block to avoid any XSS threats\r\n      if ($nonscriptBlock && $nonscriptBlock.length) {\r\n        const sanitizedHtml = _process($nonscriptBlock.html(), _run)\r\n        $nonscriptBlock.html(sanitizedHtml)\r\n        nonscriptBlock = $nonscriptBlock.get(0).outerHTML\r\n      }\r\n\r\n      return nonscriptBlock\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<img((?:[\\w\\W]*?)) data-fr-src=\"/g, '<img$1 src=\"')\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  /*\r\n   * Clean style attribute.\r\n   */\r\n  function _cleanStyle(style) {\r\n    let cleaned_style = style.replace(/;;/gi, ';')\r\n    cleaned_style = cleaned_style.replace(/^;/gi, '')\r\n\r\n    if (cleaned_style.charAt(cleaned_style.length) !== ';') {\r\n      cleaned_style += ';'\r\n    }\r\n\r\n    return cleaned_style\r\n  }\r\n\r\n  function _cleanAttrs(attrs) {\r\n    let nm\r\n\r\n    for (nm in attrs) {\r\n\r\n      if (Object.prototype.hasOwnProperty.call(attrs, nm)) {\r\n\r\n        // Check if attr is allowed.\r\n        const is_attr_allowed = nm.match(allowedAttrsRE)\r\n\r\n        // Check for allowed style properties.\r\n        let allowed_style_props_matches = null\r\n\r\n        // There are allowed style props.\r\n        if (nm === 'style' && editor.opts.htmlAllowedStyleProps.length) {\r\n          allowed_style_props_matches = attrs[nm].match(allowedStylePropsRE)\r\n        }\r\n\r\n        // Attribute is allowed and there are style matches.\r\n        if (is_attr_allowed && allowed_style_props_matches) {\r\n\r\n          // Override attr value with only the allowed properties.\r\n          attrs[nm] = _cleanStyle(allowed_style_props_matches.join(';'))\r\n        }\r\n        else if (!is_attr_allowed || nm === 'style' && !allowed_style_props_matches) {\r\n          delete attrs[nm]\r\n        }\r\n      }\r\n    }\r\n\r\n    let str = ''\r\n    const keys = Object.keys(attrs).sort()\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      nm = keys[i]\r\n\r\n      // Make sure we don't break any HTML.\r\n      if (attrs[nm].indexOf('\"') < 0) {\r\n        str += ` ${nm}=\"${attrs[nm]}\"`\r\n      }\r\n      else {\r\n        str += ` ${nm}='${attrs[nm]}'`\r\n      }\r\n    }\r\n\r\n    return str\r\n  }\r\n\r\n  function _rebuild(body_html, head_html, original_html) {\r\n    if (editor.opts.fullPage) {\r\n\r\n      // Get DOCTYPE.\r\n      const doctype = editor.html.extractDoctype(original_html)\r\n\r\n      // Get HTML attributes.\r\n      const html_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'html'))\r\n\r\n      // Get HEAD data.\r\n      head_html = head_html === null ? editor.html.extractNode(original_html, 'head') || '<title></title>' : head_html\r\n      const head_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'head'))\r\n\r\n      // Get BODY attributes.\r\n      const body_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'body'))\r\n\r\n      return `${doctype}<html${html_attrs}><head${head_attrs}>${head_html}</head><body${body_attrs}>${body_html}</body></html>`\r\n    }\r\n\r\n    return body_html\r\n  }\r\n\r\n  function _process(html, func) {\r\n    let i\r\n\r\n    const doc  = document.implementation.createHTMLDocument('Froala DOC')\r\n    const el = doc.createElement('DIV')\r\n    $(el).append(html)\r\n\r\n    let new_html = ''\r\n\r\n    if (el) {\r\n      let els = editor.node.contents(el)\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        func(els[i])\r\n      }\r\n\r\n      els = editor.node.contents(el)\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        new_html += _toHTML(els[i])\r\n      }\r\n    }\r\n\r\n    return new_html\r\n  }\r\n\r\n  function exec(html, func, parse_head) {\r\n    html = _encode(html)\r\n    let b_html = html\r\n    let h_html = null\r\n\r\n    if (editor.opts.fullPage) {\r\n\r\n      // Get BODY data.\r\n      b_html = editor.html.extractNode(html, 'body') || (html.indexOf('<body') >= 0 ? '' : html)\r\n\r\n      if (parse_head) {\r\n        h_html = editor.html.extractNode(html, 'head') || ''\r\n      }\r\n    }\r\n\r\n    b_html = _process(b_html, func)\r\n\r\n    if (h_html) {\r\n      h_html = _process(h_html, func)\r\n    }\r\n\r\n    const new_html = _rebuild(b_html, h_html, html)\r\n\r\n    return _decode(new_html)\r\n  }\r\n\r\n  function invisibleSpaces(dirty_html) {\r\n    if (dirty_html.replace(/\\u200b/g, '').length === dirty_html.length) {\r\n      return dirty_html\r\n    }\r\n\r\n    return editor.clean.exec(dirty_html, _removeInvisible)\r\n  }\r\n\r\n  function toHTML5() {\r\n    const els = editor.el.querySelectorAll(Object.keys(FE.HTML5Map).join(','))\r\n\r\n    if (els.length) {\r\n      let sel_saved = false\r\n\r\n      if (!editor.el.querySelector('.fr-marker')) {\r\n        editor.selection.save()\r\n        sel_saved = true\r\n      }\r\n\r\n      for (let i = 0; i < els.length; i++) {\r\n        if (editor.node.attributes(els[i]) === '') {\r\n          $(els[i]).replaceWith(`<${FE.HTML5Map[els[i].tagName]}>${els[i].innerHTML}</${FE.HTML5Map[els[i].tagName]}>`)\r\n        }\r\n      }\r\n\r\n      if (sel_saved) {\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fixes paths coming as HTML entities which are later on converted to their coresponding chars.\r\n  function _convertHref(href) {\r\n    const div = editor.doc.createElement('DIV')\r\n    div.innerText = href\r\n\r\n    return div.textContent\r\n  }\r\n\r\n  function _node(node) {\r\n\r\n    // Skip when we're dealing with markers.\r\n    if (node.tagName === 'SPAN' && (node.getAttribute('class') || '').indexOf('fr-marker') >= 0) {\r\n      return false\r\n    }\r\n\r\n    if (node.tagName === 'PRE') {\r\n      _cleanPre(node)\r\n    }\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE) {\r\n      if (node.getAttribute('data-fr-src') && node.getAttribute('data-fr-src').indexOf('blob:') !== 0) {\r\n        node.setAttribute('data-fr-src', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('data-fr-src'))))\r\n      }\r\n\r\n      if (node.getAttribute('href')) {\r\n        node.setAttribute('href', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('href'))))\r\n      }\r\n\r\n      if (node.getAttribute('src')) {\r\n        node.setAttribute('src', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('src'))))\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/3048\r\n      // Check srcdoc attribute for iframe and clean the HTML embedded \r\n      if (node.getAttribute('srcdoc')) {\r\n        node.setAttribute('srcdoc', editor.clean.html(node.getAttribute('srcdoc')))\r\n      }\r\n\r\n      if (['TABLE', 'TBODY', 'TFOOT', 'TR'].indexOf(node.tagName) >= 0) {\r\n        node.innerHTML = node.innerHTML.trim()\r\n      }\r\n    }\r\n\r\n    // Remove local images if option they are not allowed.\r\n    if (!editor.opts.pasteAllowLocalImages && node.nodeType === Node.ELEMENT_NODE && node.tagName === 'IMG' && node.getAttribute('data-fr-src') && node.getAttribute('data-fr-src').indexOf('file://') === 0) {\r\n      node.parentNode.removeChild(node)\r\n\r\n      return false\r\n    }\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE && FE.HTML5Map[node.tagName] && editor.node.attributes(node) === '') {\r\n      const tg = FE.HTML5Map[node.tagName]\r\n      const new_node = `<${tg}>${node.innerHTML}</${tg}>`\r\n      node.insertAdjacentHTML('beforebegin', new_node)\r\n      node = node.previousSibling\r\n      node.parentNode.removeChild(node.nextSibling)\r\n    }\r\n\r\n    if (!editor.opts.htmlAllowComments && node.nodeType === Node.COMMENT_NODE) {\r\n\r\n      // Do not remove FROALA.EDITOR comments.\r\n      if (node.data.indexOf('[FROALA.EDITOR') !== 0) {\r\n        node.parentNode.removeChild(node)\r\n      }\r\n    }\r\n\r\n    // Remove completely tags in denied tags.\r\n    else if (node.tagName && node.tagName.match(removeTagsRE)) {\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1787\r\n      // adding styles from style tag to inline styles\r\n      if (node.tagName == 'STYLE' && editor.helpers.isMac()) {\r\n        let styleString = node.innerHTML.trim()\r\n        let classValues = []\r\n        let rxp = /{([^}]+)}/g\r\n        let curMatch\r\n        styleString = styleString.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*|<!--[\\s\\S]*?-->$/, '');\r\n\r\n        // eslint-disable-next-line no-cond-assign\r\n        while(curMatch = rxp.exec( styleString )) {\r\n          classValues.push( curMatch[1] );\r\n        }\r\n        for (let i = 0; styleString.indexOf('{') != -1; i++) {\r\n          let className = styleString.substring(0, styleString.indexOf('{')).trim();\r\n          if (!/^[a-z_-][a-z\\d_-]*$/i.test(className) == false) {\r\n            node.parentNode.querySelectorAll(className).forEach(function (item) {\r\n              item.removeAttribute('class')\r\n              item.setAttribute('style', classValues[i])\r\n            })\r\n          }\r\n          styleString = styleString.substring(styleString.indexOf('}') + 1);\r\n        }\r\n      }\r\n\r\n      node.parentNode.removeChild(node)\r\n    }\r\n\r\n    // Unwrap tags not in allowed tags.\r\n    else if (node.tagName && !node.tagName.match(allowedTagsRE)) {\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1711 . If svg is not allowed then remove it because it is a leaf node.\r\n      if (node.tagName === 'svg') {\r\n        node.parentNode.removeChild(node)\r\n      }\r\n\r\n      // Ignore path tag nodes that are inside a svg tag node.\r\n      else if (!(editor.browser.safari && node.tagName === 'path' && node.parentNode && node.parentNode.tagName === 'svg')) {\r\n        node.outerHTML = node.innerHTML\r\n      }\r\n\r\n    }\r\n\r\n    // Check denied attributes.\r\n    else {\r\n      const attrs = node.attributes\r\n\r\n      if (attrs) {\r\n\r\n        for (let i = attrs.length - 1; i >= 0; i--) {\r\n          const attr = attrs[i]\r\n\r\n          // Check if attr is allowed.\r\n          const is_attr_allowed = attr.nodeName.match(allowedAttrsRE)\r\n\r\n          // Check for allowed style properties.\r\n          let allowed_style_props_matches = null\r\n\r\n          // There are allowed style props.\r\n          if (attr.nodeName === 'style' && editor.opts.htmlAllowedStyleProps.length) {\r\n            allowed_style_props_matches = attr.value.match(allowedStylePropsRE)\r\n          }\r\n\r\n          // Attribute is allowed and there are style matches.\r\n          if (is_attr_allowed && allowed_style_props_matches) {\r\n\r\n            // Override attr value with only the allowed properties.\r\n            attr.value = _cleanStyle(allowed_style_props_matches.join(';'))\r\n          }\r\n          else if (!is_attr_allowed || attr.nodeName === 'style' && !allowed_style_props_matches) {\r\n            node.removeAttribute(attr.nodeName)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _run(node) {\r\n    const contents = editor.node.contents(node)\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n      if (contents[i].nodeType !== Node.TEXT_NODE) {\r\n        _run(contents[i])\r\n      }\r\n    }\r\n\r\n    _node(node)\r\n  }\r\n\r\n  /**\r\n   * Clean pre.\r\n   */\r\n  function _cleanPre(pre) {\r\n    const content = pre.innerHTML\r\n\r\n    if (content.indexOf('\\n') >= 0) {\r\n      pre.innerHTML = content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean the html input.\r\n   */\r\n  function html(dirty_html, denied_tags, denied_attrs, full_page) {\r\n    if (typeof denied_tags === 'undefined') {\r\n      denied_tags = []\r\n    }\r\n\r\n    if (typeof denied_attrs === 'undefined') {\r\n      denied_attrs = []\r\n    }\r\n\r\n    if (typeof full_page === 'undefined') {\r\n      full_page = false\r\n    }\r\n\r\n    // Empty spaces after BR always collapse.\r\n    // dirty_html = dirty_html.replace(/<br> */g, '<br>');\r\n\r\n    // Build the allowed tags array.\r\n    const allowed_tags = $.merge([], editor.opts.htmlAllowedTags)\r\n    let i\r\n\r\n    for (i = 0; i < denied_tags.length; i++) {\r\n      if (allowed_tags.indexOf(denied_tags[i]) >= 0) {\r\n        allowed_tags.splice(allowed_tags.indexOf(denied_tags[i]), 1)\r\n      }\r\n    }\r\n\r\n    // Build the allowed attrs array.\r\n    const allowed_attrs = $.merge([], editor.opts.htmlAllowedAttrs)\r\n\r\n    for (i = 0; i < denied_attrs.length; i++) {\r\n      if (allowed_attrs.indexOf(denied_attrs[i]) >= 0) {\r\n        allowed_attrs.splice(allowed_attrs.indexOf(denied_attrs[i]), 1)\r\n      }\r\n    }\r\n\r\n    // We should allow data-fr.\r\n    allowed_attrs.push('data-fr-.*')\r\n    allowed_attrs.push('fr-.*')\r\n\r\n    // Generate cleaning RegEx.\r\n    allowedTagsRE = new RegExp(`^${allowed_tags.join('$|^')}$`, 'gi')\r\n    allowedAttrsRE = new RegExp(`^${allowed_attrs.join('$|^')}$`, 'gi')\r\n    removeTagsRE = new RegExp(`^${editor.opts.htmlRemoveTags.join('$|^')}$`, 'gi')\r\n\r\n    if (editor.opts.htmlAllowedStyleProps.length) {\r\n      allowedStylePropsRE = new RegExp(`((^|;|\\\\s)${editor.opts.htmlAllowedStyleProps.join(':.+?(?=;|$))|((^|;|\\\\s)')}:.+?(?=(;)|$))`, 'gi')\r\n    }\r\n    else {\r\n      allowedStylePropsRE = null\r\n    }\r\n\r\n    dirty_html = exec(dirty_html, _run, true)\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  function _tablesWrapTHEAD() {\r\n    const trs = editor.el.querySelectorAll('tr')\r\n\r\n    // Make sure the TH lives inside thead.\r\n    for (let i = 0; i < trs.length; i++) {\r\n\r\n      // Search for th inside tr.\r\n      const children = trs[i].children\r\n      let ok = true\r\n\r\n      for (let j = 0; j < children.length; j++) {\r\n        if (children[j].tagName !== 'TH') {\r\n          ok = false\r\n          break\r\n        }\r\n      }\r\n\r\n      // If there is something else than TH.\r\n      if (ok === false || children.length === 0) {\r\n        continue\r\n      }\r\n\r\n      let tr = trs[i]\r\n\r\n      while (tr && tr.tagName !== 'TABLE' && tr.tagName !== 'THEAD') {\r\n        tr = tr.parentNode\r\n      }\r\n\r\n      let thead = tr\r\n\r\n      if (thead.tagName !== 'THEAD') {\r\n        thead = editor.doc.createElement('THEAD')\r\n        tr.insertBefore(thead, tr.firstChild)\r\n      }\r\n\r\n      thead.appendChild(trs[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean tables.\r\n   */\r\n  function tables() {\r\n    _tablesWrapTHEAD()\r\n  }\r\n\r\n  function _listsWrapMissplacedLI() {\r\n\r\n    // Find missplaced list items.\r\n    let lis = []\r\n    function filterListItem(li) {\r\n\r\n      return !editor.node.isList(li.parentNode)\r\n    }\r\n\r\n    do {\r\n      if (lis.length) {\r\n        let li = lis[0]\r\n        const ul = editor.doc.createElement('ul')\r\n        li.parentNode.insertBefore(ul, li)\r\n\r\n        do {\r\n          const tmp = li\r\n          li = li.nextSibling\r\n          ul.appendChild(tmp)\r\n        } while (li && li.tagName === 'LI')\r\n      }\r\n\r\n      lis = []\r\n      const li_sel = editor.el.querySelectorAll('li')\r\n\r\n      for (let i = 0; i < li_sel.length; i++) {\r\n        if (filterListItem(li_sel[i])) {\r\n          lis.push(li_sel[i])\r\n        }\r\n      }\r\n    } while (lis.length > 0)\r\n  }\r\n\r\n  function _listsJoinSiblings() {\r\n\r\n    // Join lists.\r\n    const sibling_lists = editor.el.querySelectorAll('ol + ol, ul + ul')\r\n\r\n    for (let k = 0; k < sibling_lists.length; k++) {\r\n      const list = sibling_lists[k]\r\n\r\n      if (editor.node.isList(list.previousSibling) && editor.node.openTagString(list) === editor.node.openTagString(list.previousSibling)) {\r\n        const childs = editor.node.contents(list)\r\n\r\n        for (let i = 0; i < childs.length; i++) {\r\n          list.previousSibling.appendChild(childs[i])\r\n        }\r\n        list.parentNode.removeChild(list)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsRemoveEmpty() {\r\n\r\n    let i\r\n\r\n    // Remove empty lists.\r\n    let do_remove\r\n\r\n    function removeEmptyList(lst) {\r\n      if (!lst.querySelector('LI')) {\r\n        do_remove = true\r\n        lst.parentNode.removeChild(lst)\r\n      }\r\n    }\r\n\r\n    do {\r\n      do_remove = false\r\n\r\n      // Remove empty li.\r\n      const empty_lis = editor.el.querySelectorAll('li:empty')\r\n\r\n      for (i = 0; i < empty_lis.length; i++) {\r\n        empty_lis[i].parentNode.removeChild(empty_lis[i])\r\n      }\r\n\r\n      // Remove empty ul and ol.\r\n      const remaining_lists = editor.el.querySelectorAll('ul, ol')\r\n\r\n      for (i = 0; i < remaining_lists.length; i++) {\r\n        removeEmptyList(remaining_lists[i])\r\n      }\r\n    } while (do_remove === true)\r\n  }\r\n\r\n  function _listsWrapLists() {\r\n\r\n    // Do not allow list directly inside another list.\r\n    const direct_lists = editor.el.querySelectorAll('ul > ul, ol > ol, ul > ol, ol > ul')\r\n\r\n    for (let i = 0; i < direct_lists.length; i++) {\r\n      const list = direct_lists[i]\r\n      const prev_li = list.previousSibling\r\n\r\n      if (prev_li) {\r\n        if (prev_li.tagName === 'LI') {\r\n          prev_li.appendChild(list)\r\n        }\r\n        else {\r\n          $(list).wrap('<li></li>')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsNoTagAfterNested() {\r\n\r\n    // Check if nested lists don't have HTML after them.\r\n    const nested_lists = editor.el.querySelectorAll('li > ul, li > ol')\r\n\r\n    for (let i = 0; i < nested_lists.length; i++) {\r\n      const lst = nested_lists[i]\r\n\r\n      if (lst.nextSibling) {\r\n        let node = lst.nextSibling\r\n        //If prev sibling and next sibling tag name are same then all children under next sibling are added to the prev sibling\r\n        while(node.childNodes.length > 0) {\r\n          lst.append(node.childNodes[0])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsTypeInNested() {\r\n\r\n    // Make sure we can type in nested list.\r\n    const nested_lists = editor.el.querySelectorAll('li > ul, li > ol')\r\n\r\n    for (let i = 0; i < nested_lists.length; i++) {\r\n      const lst = nested_lists[i]\r\n\r\n      // List is the first in the LI.\r\n      if (editor.node.isFirstSibling(lst) && lst.parentNode.style.listStyleType != 'none') {\r\n        $(lst).before('<br/>')\r\n      }\r\n\r\n      // Make sure we don't leave BR before list.\r\n      else if (lst.previousSibling && lst.previousSibling.tagName === 'BR') {\r\n        let prev_node = lst.previousSibling.previousSibling\r\n\r\n        // Skip markers.\r\n        while (prev_node && editor.node.hasClass(prev_node, 'fr-marker')) {\r\n          prev_node = prev_node.previousSibling\r\n        }\r\n\r\n        // Remove BR only if there is something else than BR.\r\n        if (prev_node && prev_node.tagName !== 'BR') {\r\n          $(lst.previousSibling).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsRemoveEmptyLI() {\r\n\r\n    // Remove empty li.\r\n    const empty_lis = editor.el.querySelectorAll('li:empty')\r\n\r\n    for (let i = 0; i < empty_lis.length; i++) {\r\n      $(empty_lis[i]).remove()\r\n    }\r\n  }\r\n\r\n  function _listsFindMissplacedText() {\r\n    const lists = editor.el.querySelectorAll('ul, ol')\r\n\r\n    for (let i = 0; i < lists.length; i++) {\r\n      const contents = editor.node.contents(lists[i])\r\n      let $li = null\r\n\r\n      for (let j = contents.length - 1; j >= 0; j--) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3033\r\n        if (contents[j].tagName !== 'LI' && contents[j].tagName != 'UL' && contents[j].tagName != 'OL' ) {\r\n          if (!$li) {\r\n            $li = $(editor.doc.createElement('LI'))\r\n            $li.insertBefore(contents[j])\r\n          }\r\n\r\n          $li.prepend(contents[j])\r\n        }\r\n        else {\r\n          $li = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean lists.\r\n   */\r\n  function lists() {\r\n    _listsWrapMissplacedLI()\r\n\r\n    _listsJoinSiblings()\r\n\r\n    _listsFindMissplacedText()\r\n\r\n    _listsRemoveEmpty()\r\n\r\n    _listsWrapLists()\r\n\r\n    _listsNoTagAfterNested()\r\n\r\n    _listsTypeInNested()\r\n\r\n    _listsRemoveEmptyLI()\r\n  }\r\n\r\n  /**\r\n   * Initialize\r\n   */\r\n  function _init() {\r\n\r\n    // If fullPage is on allow head and title.\r\n    if (editor.opts.fullPage) {\r\n      $.merge(editor.opts.htmlAllowedTags, ['head', 'title', 'style', 'link', 'base', 'body', 'html', 'meta'])\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    html,\r\n    toHTML5,\r\n    tables,\r\n    lists,\r\n    invisibleSpaces,\r\n    exec\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\n//https://github.com/froala-labs/froala-editor-js-2/issues/1878\r\n//Screen Size constants\r\nFE.XS = 0\r\nFE.SM = 1\r\nFE.MD = 2\r\nFE.LG = 3\r\nconst screenSm=768\r\nconst screenMd=992\r\nconst screenLg=1200\r\n\r\n// Chars to allow.\r\nconst x = 'a-z\\\\u0080-\\\\u009f\\\\u00a1-\\\\uffff0-9-_\\\\.'\r\n\r\n// Common regex to avoid double chars.\r\nFE.LinkRegExCommon = `[${x}]{1,}`\r\n\r\n// PORT:something_else.php\r\nFE.LinkRegExEnd = '((:[0-9]{1,5})|)(((\\\\/|\\\\?|#)[a-z\\\\u00a1-\\\\uffff0-9@?\\\\|!^=%&amp;\\\\/~+#-\\\\\\'*-_{}]*)|())'\r\n\r\n// Common TLD\r\nFE.LinkRegExTLD = `((${FE.LinkRegExCommon})(\\\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))`\r\n\r\n// Starts with HTTP.\r\nFE.LinkRegExHTTP = `((ftp|http|https):\\\\/\\\\/${FE.LinkRegExCommon})`\r\n\r\n// Authenticate with HTTP.\r\nFE.LinkRegExAuth = `((ftp|http|https):\\\\/\\\\/[\\\\u0021-\\\\uffff]{1,}@${FE.LinkRegExCommon})`\r\n\r\n// Starts with WWWW.\r\nFE.LinkRegExWWW = `(www\\\\.${FE.LinkRegExCommon}\\\\.[a-z0-9-]{2,24})`\r\n\r\n// Join.\r\nFE.LinkRegEx =  `(${FE.LinkRegExTLD}|${FE.LinkRegExHTTP}|${FE.LinkRegExWWW}|${FE.LinkRegExAuth})${FE.LinkRegExEnd}`\r\n\r\n// Link protocols.\r\nFE.LinkProtocols = ['mailto', 'tel', 'sms', 'notes', 'data']\r\n\r\n// https://davidcel.is/posts/stop-validating-email-addresses-with-regex/\r\nFE.MAIL_REGEX = /.+@.+\\..+/i\r\n\r\nFE.MODULES.helpers = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Get the IE version.\r\n   */\r\n  function _ieVersion() {\r\n\r\n    /* global navigator */\r\n    let rv = -1\r\n    let ua\r\n    let re\r\n\r\n    if (navigator.appName === 'Microsoft Internet Explorer') {\r\n      ua = navigator.userAgent\r\n      re = new RegExp('MSIE ([0-9]{1,}[\\\\.0-9]{0,})')\r\n\r\n      if (re.exec(ua) !== null) {\r\n        rv = parseFloat(RegExp.$1)\r\n      }\r\n    }\r\n    else if (navigator.appName === 'Netscape') {\r\n      ua = navigator.userAgent\r\n      re = new RegExp('Trident/.*rv:([0-9]{1,}[\\\\.0-9]{0,})')\r\n\r\n      if (re.exec(ua) !== null) {\r\n        rv = parseFloat(RegExp.$1)\r\n      }\r\n    }\r\n\r\n    return rv\r\n  }\r\n\r\n  /**\r\n   * Determine the browser.\r\n   */\r\n  function _browser() {\r\n    const browser = {}\r\n    const ie_version = _ieVersion()\r\n\r\n    if (ie_version > 0) {\r\n      browser.msie = true\r\n    }\r\n    else {\r\n      const ua = navigator.userAgent.toLowerCase()\r\n\r\n      const match =\r\n          /(edge)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(chrome)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(webkit)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(msie) ([\\w.]+)/.exec(ua) ||\r\n          ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n          []\r\n\r\n      const matched = {\r\n        browser: match[1] || '',\r\n        version: match[2] || '0'\r\n      }\r\n\r\n      if (match[1]) {\r\n        browser[matched.browser] = true\r\n      }\r\n\r\n      // Chrome is Webkit, but Webkit is also Safari.\r\n      if (browser.chrome) {\r\n        browser.webkit = true\r\n      }\r\n      else if (browser.webkit) {\r\n        browser.safari = true\r\n      }\r\n    }\r\n\r\n    if (browser.msie) {\r\n      browser.version = ie_version\r\n    }\r\n\r\n    return browser\r\n  }\r\n\r\n  function isIOS() {\r\n\r\n    return /(iPad|iPhone|iPod)/g.test(navigator.userAgent) && !isWindowsPhone()\r\n  }\r\n\r\n  function isAndroid() {\r\n\r\n    return /(Android)/g.test(navigator.userAgent) && !isWindowsPhone()\r\n  }\r\n\r\n  function isBlackberry() {\r\n\r\n    return /(Blackberry)/g.test(navigator.userAgent)\r\n  }\r\n\r\n  function isWindowsPhone() {\r\n\r\n    return /(Windows Phone)/gi.test(navigator.userAgent)\r\n  }\r\n\r\n  function isMobile() {\r\n\r\n    return isAndroid() || isIOS() || isBlackberry()\r\n  }\r\n\r\n  function requestAnimationFrame() {\r\n\r\n    return window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n\r\n        function (callback) {\r\n          window.setTimeout(callback, 1000 / 60)\r\n        }\r\n  }\r\n\r\n  function getPX(val) {\r\n\r\n    return parseInt(val, 10) || 0\r\n  }\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1878\r\n  //ScreenSize calculation on the fr-box class\r\n  function screenSize(isBox) {\r\n    try {\r\n      let width = 0\r\n      if (isBox)\r\n        width = editor.$box.width();\r\n      else\r\n        width = editor.$sc.width();\r\n\r\n      if(width < screenSm)\r\n      {\r\n        return FE.XS\r\n      }\r\n      if(width >= screenSm && width < screenMd)\r\n      {\r\n        return FE.SM\r\n      }\r\n      if(width >= screenMd && width < screenLg)\r\n      {\r\n        return FE.MD\r\n      }\r\n      if(width >= screenLg)\r\n      {\r\n        return FE.LG\r\n      }\r\n    }\r\n    catch (ex) {\r\n      return FE.LG\r\n    }\r\n  }\r\n\r\n  function isTouch() {\r\n\r\n    return 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch\r\n  }\r\n\r\n  function isURL(url) {\r\n    // Check if it starts with http.\r\n    if (!/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return false\r\n    }\r\n\r\n    url = String(url)\r\n      .replace(/</g, '%3C')\r\n      .replace(/>/g, '%3E')\r\n      .replace(/\"/g, '%22')\r\n      .replace(/ /g, '%20')\r\n\r\n    const test_reg = new RegExp(`^${FE.LinkRegExHTTP}${FE.LinkRegExEnd}$`, 'gi')\r\n\r\n    return test_reg.test(url)\r\n  }\r\n\r\n  function isEmail(url) {\r\n    if (/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return false\r\n    }\r\n\r\n    return FE.MAIL_REGEX.test(url)\r\n  }\r\n\r\n  // Sanitize URL.\r\n  function sanitizeURL(url) {\r\n    const local_path = /^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i\r\n\r\n    if (/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return url\r\n    }\r\n    else if (local_path.test(url)) {\r\n      return url\r\n    }\r\n    else if (new RegExp(`^(${FE.LinkProtocols.join('|')}):`, 'i').test(url)) {\r\n      return url\r\n    }\r\n\r\n    url = encodeURIComponent(url)\r\n      .replace(/%23/g, '#')\r\n      .replace(/%2F/g, '/')\r\n      .replace(/%25/g, '%')\r\n      .replace(/mailto%3A/gi, 'mailto:')\r\n      .replace(/file%3A/gi, 'file:')\r\n      .replace(/sms%3A/gi, 'sms:')\r\n      .replace(/tel%3A/gi, 'tel:')\r\n      .replace(/notes%3A/gi, 'notes:')\r\n      .replace(/data%3Aimage/gi, 'data:image')\r\n      .replace(/blob%3A/gi, 'blob:')\r\n      .replace(/%3A(\\d)/gi, ':$1')\r\n      .replace(/webkit-fake-url%3A/gi, 'webkit-fake-url:')\r\n      .replace(/%3F/g, '?')\r\n      .replace(/%3D/g, '=')\r\n      .replace(/%26/g, '&')\r\n      .replace(/&amp;/g, '&')\r\n      .replace(/%2C/g, ',')\r\n      .replace(/%3B/g, ';')\r\n      .replace(/%2B/g, '+')\r\n      .replace(/%40/g, '@')\r\n      .replace(/%5B/g, '[')\r\n      .replace(/%5D/g, ']')\r\n      .replace(/%7B/g, '{')\r\n      .replace(/%7D/g, '}')\r\n\r\n    return url\r\n  }\r\n\r\n  function isArray(obj) {\r\n\r\n    return obj && !Object.prototype.propertyIsEnumerable.call(obj, 'length') &&\r\n\r\n        typeof obj === 'object' && typeof obj.length === 'number'\r\n  }\r\n\r\n  /*\r\n   * Transform RGB color to hex value.\r\n   */\r\n  function RGBToHex(rgb) {\r\n    function hex(x) {\r\n\r\n      return `0${parseInt(x, 10).toString(16)}`.slice(-2)\r\n    }\r\n\r\n    try {\r\n\r\n      if (!rgb || rgb === 'transparent') {\r\n        return ''\r\n      }\r\n\r\n      if (/^#[0-9A-F]{6}$/i.test(rgb)) {\r\n        return rgb\r\n      }\r\n\r\n      rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/)\r\n\r\n      return `#${hex(rgb[1])}${hex(rgb[2])}${hex(rgb[3])}`.toUpperCase()\r\n    }\r\n    catch (ex) {\r\n\r\n      return null\r\n    }\r\n  }\r\n\r\n  function HEXtoRGB(hex) {\r\n\r\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\r\n\r\n    hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b)\r\n\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n\r\n    return result ? `rgb(${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)})` : ''\r\n  }\r\n\r\n  /*\r\n   * Get block alignment.\r\n   */\r\n  let default_alignment\r\n\r\n  function getAlignment($block) {\r\n    if (!$block.css) {\r\n      $block = $($block)\r\n    }\r\n\r\n    let alignment = ($block.css('text-align') || '').replace(/-(.*)-/g, '')\r\n\r\n    // Detect rtl.\r\n    if (['left', 'right', 'justify', 'center'].indexOf(alignment) < 0) {\r\n      if (!default_alignment) {\r\n        const $div = $(`<div dir=\"${editor.opts.direction === 'rtl' ? 'rtl' : 'auto'}\" style=\"text-align: ${editor.$el.css('text-align')}; position: fixed; left: -3000px;\"><span id=\"s1\">.</span><span id=\"s2\">.</span></div>`)\r\n        $('body').first().append($div)\r\n\r\n        const l1 = $div.find('#s1').get(0).getBoundingClientRect().left\r\n        const l2 = $div.find('#s2').get(0).getBoundingClientRect().left\r\n\r\n        $div.remove()\r\n\r\n        default_alignment = l1 < l2 ? 'left' : 'right'\r\n      }\r\n\r\n      alignment = default_alignment\r\n    }\r\n\r\n    return alignment\r\n  }\r\n\r\n  /**\r\n   * Check if is mac.\r\n   */\r\n  let is_mac = null\r\n\r\n  function isMac() {\r\n    if (is_mac === null) {\r\n      is_mac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\n    }\r\n\r\n    return is_mac\r\n  }\r\n\r\n  function scrollTop() {\r\n\r\n    // Firefox, Chrome, Opera, Safari\r\n    if (editor.o_win.pageYOffset) {\r\n      return editor.o_win.pageYOffset\r\n    }\r\n\r\n    // Internet Explorer 6 - standards mode\r\n    if (editor.o_doc.documentElement && editor.o_doc.documentElement.scrollTop) {\r\n      return editor.o_doc.documentElement.scrollTop\r\n    }\r\n\r\n    // Internet Explorer 6, 7 and 8\r\n    if (editor.o_doc.body.scrollTop) {\r\n      return editor.o_doc.body.scrollTop\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  function scrollLeft() {\r\n\r\n    // Firefox, Chrome, Opera, Safari\r\n    if (editor.o_win.pageXOffset) {\r\n      return editor.o_win.pageXOffset\r\n    }\r\n\r\n    // Internet Explorer 6 - standards mode\r\n    if (editor.o_doc.documentElement && editor.o_doc.documentElement.scrollLeft) {\r\n      return editor.o_doc.documentElement.scrollLeft\r\n    }\r\n\r\n    // Internet Explorer 6, 7 and 8\r\n    if (editor.o_doc.body.scrollLeft) {\r\n      return editor.o_doc.body.scrollLeft\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  // https://stackoverflow.com/a/7557433/1806855\r\n  function isInViewPort(el) {\r\n    let rect = el.getBoundingClientRect()\r\n\r\n    // Round for FF.\r\n    rect = {\r\n      top: Math.round(rect.top),\r\n      bottom: Math.round(rect.bottom)\r\n    }\r\n\r\n    return (\r\n      rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) || // Top is higher than 0 and bottom is smaller than the window height.\r\n        rect.top <= 0 && rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) // Top is smaller than 0 and bottom is higher than window height.\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.browser = _browser()\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    isIOS,\r\n    isMac,\r\n    isAndroid,\r\n    isBlackberry,\r\n    isWindowsPhone,\r\n    isMobile,\r\n    isEmail,\r\n    requestAnimationFrame,\r\n    getPX,\r\n    screenSize,\r\n    isTouch,\r\n    sanitizeURL,\r\n    isArray,\r\n    RGBToHex,\r\n    HEXtoRGB,\r\n    isURL,\r\n    getAlignment,\r\n    scrollTop,\r\n    scrollLeft,\r\n    isInViewPort\r\n  }\r\n}\r\n","import './helpers.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.MODULES.events = function (editor) {\r\n  const $ = editor.$\r\n\r\n  const _events = {}\r\n  let _do_blur\r\n\r\n  function _assignEvent($el, evs, handler) {\r\n    $on($el, evs, handler)\r\n  }\r\n\r\n  function _forPaste() {\r\n    _assignEvent(editor.$el, 'cut copy paste beforepaste', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n  }\r\n\r\n  function _forElement() {\r\n    _assignEvent(editor.$el, 'click mouseup mousemove mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n\r\n    on('mousedown', () => {\r\n      for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n        if (FE.INSTANCES[i] !== editor && FE.INSTANCES[i].popups && FE.INSTANCES[i].popups.areVisible()) {\r\n          FE.INSTANCES[i].$el.find('.fr-marker').remove()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  function _forKeys() {\r\n\r\n    // Map events.\r\n    _assignEvent(editor.$el, 'keydown keypress keyup input', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n  }\r\n\r\n  function _forWindow() {\r\n    _assignEvent(editor.$win, editor._mousedown, (e) => {\r\n      trigger('window.mousedown', [e])\r\n      enableBlur()\r\n    })\r\n\r\n    _assignEvent(editor.$win, editor._mouseup, (e) => {\r\n      trigger('window.mouseup', [e])\r\n    })\r\n\r\n    _assignEvent(editor.$win, 'cut copy keydown keyup touchmove touchend', (e) => {\r\n      trigger(`window.${e.type}`, [e])\r\n    })\r\n  }\r\n\r\n  function _forDocument() {\r\n    _assignEvent(editor.$doc, 'dragend drop', (e) => {\r\n      trigger(`document.${e.type}`, [e])\r\n    })\r\n  }\r\n\r\n  function focus(do_focus) {\r\n    let info\r\n\r\n    if (typeof do_focus === 'undefined') {\r\n      do_focus = true\r\n    }\r\n\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    // Focus the editor window.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.$win.get(0).focus()\r\n    }\r\n\r\n    // If there is focus, stop.\r\n    if (editor.core.hasFocus()) {\r\n      return false\r\n    }\r\n\r\n    if (editor.selection.isCollapsed() && editor.html.get() === '') {\r\n      editor.html.set(FE.MARKERS)\r\n    }\r\n\r\n    // If there is no focus, then force focus.\r\n    if (!editor.core.hasFocus() && do_focus) {\r\n      const st = editor.$win.scrollTop()\r\n\r\n      // Hack to prevent scrolling IE.\r\n      if (editor.browser.msie && editor.$box) {\r\n        editor.$box.css('position', 'fixed')\r\n      }\r\n\r\n      // hack to prevent scrolling.\r\n      if (editor.browser.msie && editor.$wp) {\r\n        editor.$wp.css('overflow', 'visible')\r\n      }\r\n\r\n      if (editor.browser.msie && editor.$sc) editor.$sc.css('position', 'fixed');\r\n\r\n      if(editor.browser.msie == false){\r\n        disableBlur()\r\n        editor.el.focus()\r\n        editor.events.trigger('focus')\r\n        enableBlur()\r\n      }\r\n\r\n      // Revert position IE.\r\n      if (editor.browser.msie && editor.$sc) editor.$sc.css('position', '');\r\n\r\n      // Revert position.\r\n      if (editor.browser.msie && editor.$box) {\r\n        editor.$box.css('position', '')\r\n      }\r\n\r\n      // Revert scroll.\r\n      if (editor.browser.msie && editor.$wp) {\r\n        editor.$wp.css('overflow', 'auto')\r\n      }\r\n\r\n      if (st !== editor.$win.scrollTop()) {\r\n        editor.$win.scrollTop(st)\r\n      }\r\n\r\n      info = editor.selection.info(editor.el)\r\n\r\n      // If selection is at start, we should make sure we're in the first block tag.\r\n      if (!info.atStart) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    // Don't go further if we haven't focused or there are markers.\r\n    if (!editor.core.hasFocus() || editor.$el.find('.fr-marker').length > 0) {\r\n\r\n      return false\r\n    }\r\n\r\n    info = editor.selection.info(editor.el)\r\n\r\n    if (info.atStart && editor.selection.isCollapsed()) {\r\n      if (editor.html.defaultTag() !== null) {\r\n        const marker = editor.markers.insert()\r\n\r\n        if (marker && !editor.node.blockParent(marker)) {\r\n          $(marker).remove()\r\n\r\n          const element = editor.$el.find(editor.html.blockTagsQuery()).get(0)\r\n\r\n          if (element) {\r\n            $(element).prepend(FE.MARKERS)\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n        else if (marker) {\r\n          $(marker).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let focused = false\r\n\r\n  function _forFocus() {\r\n    _assignEvent(editor.$el, 'focus', (e) => {\r\n      if (blurActive()) {\r\n        focus(false)\r\n\r\n        if (focused === false) {\r\n          trigger(e.type, [e])\r\n        }\r\n      }\r\n    })\r\n\r\n    _assignEvent(editor.$el, 'blur', (e) => {\r\n      if (blurActive() /* && document.activeElement !== this */) {\r\n        if (focused === true) {\r\n          trigger(e.type, [e])\r\n          enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Prevent blur when clicking contenteditable.\r\n    $on(editor.$el, 'mousedown', '[contenteditable=\"true\"]', function () {\r\n      disableBlur();\r\n      editor.$el.blur();\r\n    })\r\n\r\n    on('focus', () => {\r\n      focused = true\r\n    })\r\n\r\n    on('blur', () => {\r\n      focused = false\r\n    })\r\n  }\r\n\r\n  function _forMouse() {\r\n    if (editor.helpers.isMobile()) {\r\n      editor._mousedown = 'touchstart'\r\n      editor._mouseup = 'touchend'\r\n      editor._move = 'touchmove'\r\n      editor._mousemove = 'touchmove'\r\n    }\r\n    else {\r\n      editor._mousedown = 'mousedown'\r\n      editor._mouseup = 'mouseup'\r\n      editor._move = ''\r\n      editor._mousemove = 'mousemove'\r\n    }\r\n  }\r\n\r\n  function _buttonMouseDown(e) {\r\n    const $btn = $(e.currentTarget)\r\n\r\n    if (editor.edit.isDisabled() || editor.node.hasClass($btn.get(0), 'fr-disabled')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Not click button.\r\n    if (e.type === 'mousedown' && e.which !== 1) {\r\n      return true\r\n    }\r\n\r\n    // Scroll in list.\r\n    if (!editor.helpers.isMobile()) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    if ((editor.helpers.isAndroid() || editor.helpers.isWindowsPhone()) && $btn.parents('.fr-dropdown-menu').length === 0) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    }\r\n\r\n    // Simulate click.\r\n    $btn.addClass('fr-selected')\r\n\r\n    editor.events.trigger('commands.mousedown', [$btn])\r\n  }\r\n\r\n  function _buttonMouseUp(e, handler) {\r\n    const $btn = $(e.currentTarget)\r\n\r\n    if (editor.edit.isDisabled() || editor.node.hasClass($btn.get(0), 'fr-disabled')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    if (e.type === 'mouseup' && e.which !== 1) {\r\n      return true\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1877\r\n    // when you click the button and drag to the other button, current target would be different than clicked button\r\n    if (editor.button.getButtons('.fr-selected', true).get(0) == $btn.get(0) && !editor.node.hasClass($btn.get(0), 'fr-selected')) {\r\n      return true\r\n    }\r\n\r\n    if (e.type !== 'touchmove') {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n      e.preventDefault()\r\n\r\n      // Simulate click.\r\n      if (!editor.node.hasClass($btn.get(0), 'fr-selected')) {\r\n        editor.button.getButtons('.fr-selected', true).removeClass('fr-selected')\r\n\r\n        return false\r\n      }\r\n      editor.button.getButtons('.fr-selected', true).removeClass('fr-selected')\r\n\r\n      if ($btn.data('dragging') || $btn.attr('disabled')) {\r\n        $btn.removeData('dragging')\r\n\r\n        return false\r\n      }\r\n\r\n      const timeout = $btn.data('timeout')\r\n\r\n      if (timeout) {\r\n        clearTimeout(timeout)\r\n        $btn.removeData('timeout')\r\n      }\r\n\r\n      handler.apply(editor, [e])\r\n    }\r\n    else if (!$btn.data('timeout')) {\r\n      $btn.data('timeout', setTimeout(() => {\r\n        $btn.data('dragging', true)\r\n      }, 100))\r\n    }\r\n  }\r\n\r\n  function enableBlur() {\r\n    _do_blur = true\r\n  }\r\n\r\n  function disableBlur() {\r\n    _do_blur = false\r\n  }\r\n\r\n  function blurActive() {\r\n    return _do_blur\r\n  }\r\n\r\n  /**\r\n   * Bind click on an element.\r\n   */\r\n  function bindClick($element, selector, handler) {\r\n    $on($element, editor._mousedown, selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        _buttonMouseDown(e)\r\n      }\r\n    }, true)\r\n\r\n    $on($element, `${editor._mouseup} ${editor._move}`, selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        _buttonMouseUp(e, handler)\r\n      }\r\n    }, true)\r\n\r\n    $on($element, 'mousedown click mouseup', selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        e.stopPropagation()\r\n      }\r\n    }, true)\r\n\r\n    on('window.mouseup', () => {\r\n      if (!editor.edit.isDisabled()) {\r\n        $element.find(selector).removeClass('fr-selected')\r\n        enableBlur()\r\n      }\r\n    })\r\n\r\n    $on($element, 'mouseover', selector, function () {\r\n      if ($(this).hasClass('fr-options')) {\r\n        $(this).prev('.fr-btn').addClass('fr-btn-hover')\r\n      }\r\n\r\n      if ($(this).next('.fr-btn').hasClass('fr-options')) {\r\n        $(this).next('.fr-btn').addClass('fr-btn-hover')\r\n      }\r\n    })\r\n\r\n    $on($element, 'mouseout', selector, function () {\r\n      if ($(this).hasClass('fr-options')) {\r\n        $(this).prev('.fr-btn').removeClass('fr-btn-hover')\r\n      }\r\n\r\n      if ($(this).next('.fr-btn').hasClass('fr-options')) {\r\n        $(this).next('.fr-btn').removeClass('fr-btn-hover')\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Add event.\r\n   */\r\n  function on(name, callback, first) {\r\n    const names = name.split(' ')\r\n\r\n    if (names.length > 1) {\r\n      for (let i = 0; i < names.length; i++) {\r\n        on(names[i], callback, first)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    if (typeof first === 'undefined') {\r\n      first = false\r\n    }\r\n\r\n    let callbacks\r\n\r\n    if (name.indexOf('shared.') !== 0) {\r\n      _events[name] = _events[name] || []\r\n      callbacks = _events[name]\r\n    }\r\n    else {\r\n      editor.shared._events[name] = editor.shared._events[name] || []\r\n      callbacks = editor.shared._events[name]\r\n    }\r\n\r\n    if (first) {\r\n      callbacks.unshift(callback)\r\n    }\r\n    else {\r\n      callbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  let $_events = []\r\n\r\n  function $on($el, evs, selector, callback, shared) {\r\n    if (typeof selector === 'function') {\r\n      shared = callback\r\n      callback = selector\r\n      selector = false\r\n    }\r\n\r\n    const ary = !shared ? $_events : editor.shared.$_events\r\n    const id = !shared ? editor.id : editor.sid\r\n\r\n    const eventName = `${evs.trim().split(' ').join(`.ed${id} `)}.ed${id}`\r\n\r\n    if (!selector) {\r\n      $el.on(eventName, callback)\r\n    }\r\n    else {\r\n      $el.on(eventName, selector, callback)\r\n    }\r\n\r\n    ary.push([$el, eventName])\r\n  }\r\n\r\n  function _$off(evs) {\r\n    for (let i = 0; i < evs.length; i++) {\r\n      evs[i][0].off(evs[i][1])\r\n    }\r\n  }\r\n\r\n  function $off() {\r\n    _$off($_events)\r\n    $_events = []\r\n\r\n    if (editor.shared.count === 0) {\r\n      _$off(editor.shared.$_events)\r\n      editor.shared.$_events = []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Trigger an event.\r\n   */\r\n  function trigger(name, args, force) {\r\n    if (!editor.edit.isDisabled() || force) {\r\n      let callbacks\r\n\r\n      if (name.indexOf('shared.') !== 0) {\r\n        callbacks = _events[name]\r\n      }\r\n      else {\r\n        if (editor.shared.count > 0) {\r\n          return false\r\n        }\r\n\r\n        callbacks = editor.shared._events[name]\r\n      }\r\n\r\n      let val\r\n\r\n      if (callbacks) {\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n          val = callbacks[i].apply(editor, args)\r\n\r\n          if (val === false) {\r\n            return false\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.opts.events && editor.opts.events[name]) {\r\n        val = editor.opts.events[name].apply(editor, args)\r\n\r\n        if (val === false) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      return val\r\n    }\r\n  }\r\n\r\n  function chainTrigger(name, param, force) {\r\n    if (!editor.edit.isDisabled() || force) {\r\n      let callbacks\r\n\r\n      if (name.indexOf('shared.') !== 0) {\r\n        callbacks = _events[name]\r\n      }\r\n      else {\r\n        if (editor.shared.count > 0) {\r\n          return false\r\n        }\r\n        callbacks = editor.shared._events[name]\r\n      }\r\n\r\n      let resp\r\n\r\n      if (callbacks) {\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n\r\n          // Get the callback response.\r\n          resp = callbacks[i].apply(editor, [param])\r\n\r\n          // If callback response is defined then assign it to param.\r\n          if (typeof resp !== 'undefined') {\r\n            param = resp\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.opts.events && editor.opts.events[name]) {\r\n        resp = editor.opts.events[name].apply(editor, [param])\r\n\r\n        if (typeof resp !== 'undefined') {\r\n          param = resp\r\n        }\r\n      }\r\n\r\n      return param\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy\r\n   */\r\n  function _destroy() {\r\n\r\n    // Clear the events list.\r\n    for (const k in _events) {\r\n      if (Object.prototype.hasOwnProperty.call(_events, k)) {\r\n        delete _events[k]\r\n      }\r\n    }\r\n  }\r\n\r\n  function _sharedDestroy() {\r\n    for (const k in editor.shared._events) {\r\n      if (Object.prototype.hasOwnProperty.call(editor.shared._events, k)) {\r\n        delete editor.shared._events[k]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.shared.$_events = editor.shared.$_events || []\r\n    editor.shared._events = {}\r\n\r\n    _forMouse()\r\n\r\n    _forElement()\r\n    _forWindow()\r\n    _forDocument()\r\n    _forKeys()\r\n\r\n    _forFocus()\r\n    enableBlur()\r\n\r\n    _forPaste()\r\n\r\n    on('destroy', _destroy)\r\n    on('shared.destroy', _sharedDestroy)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    on,\r\n    trigger,\r\n    bindClick,\r\n    disableBlur,\r\n    enableBlur,\r\n    blurActive,\r\n    focus,\r\n    chainTrigger,\r\n    $on,\r\n    $off\r\n  }\r\n}\r\n","import './events.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  indentMargin: 20\r\n})\r\n\r\nFE.COMMANDS = {\r\n  bold: {\r\n    title: 'Bold',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('strong')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  italic: {\r\n    title: 'Italic',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('em')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  underline: {\r\n    title: 'Underline',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('u')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  strikeThrough: {\r\n    title: 'Strikethrough',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('s')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  subscript: {\r\n    title: 'Subscript',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('sub')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  superscript: {\r\n    title: 'Superscript',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('sup')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  outdent: {\r\n    title: 'Decrease Indent'\r\n  },\r\n  indent: {\r\n    title: 'Increase Indent'\r\n  },\r\n  undo: {\r\n    title: 'Undo',\r\n    undo: false,\r\n    forcedRefresh: true,\r\n    disabled: true\r\n  },\r\n  redo: {\r\n    title: 'Redo',\r\n    undo: false,\r\n    forcedRefresh: true,\r\n    disabled: true\r\n  },\r\n  insertHR: {\r\n    title: 'Insert Horizontal Line'\r\n  },\r\n  clearFormatting: {\r\n    title: 'Clear Formatting'\r\n  },\r\n  selectAll: {\r\n    title: 'Select All',\r\n    undo: false\r\n  },\r\n  moreText: {\r\n    title: 'More Text',\r\n    undo: false\r\n  },\r\n  moreParagraph: {\r\n    title: 'More Paragraph',\r\n    undo: false\r\n  },\r\n  moreRich: {\r\n    title: 'More Rich',\r\n    undo: false\r\n  },\r\n  moreMisc: {\r\n    title: 'More Misc',\r\n    undo: false\r\n  }\r\n}\r\n\r\nFE.RegisterCommand = function (name, info) {\r\n  FE.COMMANDS[name] = info\r\n}\r\n\r\nFE.MODULES.commands = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function _createDefaultTag(empty) {\r\n    if (editor.html.defaultTag()) {\r\n      empty = `<${editor.html.defaultTag()}>${empty}</${editor.html.defaultTag()}>`\r\n    }\r\n\r\n    return empty\r\n  }\r\n\r\n  const mapping = {\r\n    bold() {\r\n      _execCommand('bold', 'strong')\r\n    },\r\n\r\n    subscript() {\r\n\r\n      // Remove sup.\r\n      if (editor.format.is('sup')) {\r\n        editor.format.remove('sup')\r\n      }\r\n\r\n      _execCommand('subscript', 'sub')\r\n    },\r\n\r\n    superscript() {\r\n\r\n      // Remove sub.\r\n      if (editor.format.is('sub')) {\r\n        editor.format.remove('sub')\r\n      }\r\n\r\n      _execCommand('superscript', 'sup')\r\n    },\r\n\r\n    italic() {\r\n      _execCommand('italic', 'em')\r\n    },\r\n\r\n    strikeThrough() {\r\n      _execCommand('strikeThrough', 's')\r\n    },\r\n\r\n    underline() {\r\n      _execCommand('underline', 'u')\r\n    },\r\n\r\n    undo() {\r\n      editor.undo.run()\r\n    },\r\n\r\n    redo() {\r\n      editor.undo.redo()\r\n    },\r\n\r\n    indent() {\r\n      _processIndent(1)\r\n    },\r\n\r\n    outdent() {\r\n      _processIndent(-1)\r\n    },\r\n\r\n    show() {\r\n      if (editor.opts.toolbarInline) {\r\n        editor.toolbar.showInline(null, true)\r\n      }\r\n    },\r\n\r\n    insertHR() {\r\n      editor.selection.remove()\r\n\r\n      let empty = ''\r\n\r\n      if (editor.core.isEmpty()) {\r\n        empty = '<br>'\r\n        empty = _createDefaultTag(empty)\r\n      }\r\n\r\n      editor.html.insert(`<hr id=\"fr-just\" class=\"fr-just\">${empty}`)\r\n      const $hr = editor.$el.find('hr#fr-just').length ? editor.$el.find('hr#fr-just') : editor.$el.find('.fr-just')\r\n      $hr.removeAttr('id')\r\n      $hr.removeAttr('class')\r\n      let check\r\n\r\n      // Make sure we can type after HR.\r\n      if ($hr.next().length === 0) {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag) {\r\n          $hr.after($(editor.doc.createElement(default_tag)).append('<br>').get(0))\r\n        }\r\n        else {\r\n          $hr.after('<br>')\r\n        }\r\n      }\r\n\r\n      if ($hr.prev().is('hr')) {\r\n        check = editor.selection.setAfter($hr.get(0), false)\r\n      }\r\n      else if ($hr.next().is('hr')) {\r\n        check = editor.selection.setBefore($hr.get(0), false)\r\n      }\r\n      else {\r\n        if (!editor.selection.setAfter($hr.get(0), false)) {\r\n          editor.selection.setBefore($hr.get(0), false)\r\n        }\r\n      }\r\n\r\n      // Added fix for this issue https://github.com/froala-labs/froala-editor-js-2/issues/384\r\n      if (!check && typeof check !== 'undefined') {\r\n        empty = `${FE.MARKERS}<br>`\r\n        empty = _createDefaultTag(empty)\r\n        $hr.after(empty)\r\n      }\r\n\r\n      editor.selection.restore()\r\n    },\r\n\r\n    clearFormatting() {\r\n      editor.format.remove()\r\n    },\r\n\r\n    selectAll() {\r\n      editor.doc.execCommand('selectAll', false, false)\r\n    },\r\n\r\n    moreText(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreParagraph(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreRich(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreMisc(cmd) {\r\n      _moreExec(cmd)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executes more button commands\r\n   */\r\n  function _moreExec(cmd) {\r\n    let $btn = editor.$tb.find(`[data-cmd=${cmd}]`)\r\n\r\n    // Toggle more button in the toolbar\r\n    _toggleMoreButton($btn)\r\n\r\n    // Set the height of all more toolbars\r\n    editor.toolbar.setMoreToolbarsHeight()\r\n  }\r\n\r\n  /**\r\n   * Display/Hide the toolbar buttons on clicking the more button\r\n   */\r\n  function _toggleMoreButton($btn) {\r\n\r\n    // Get the corresponding button group for that more button\r\n    const $buttonGroup = editor.$tb.find(`.fr-more-toolbar[data-name=\"${$btn.attr('data-group-name')}\"]`)\r\n\r\n    // Hide all button groups before opening any one\r\n    editor.$tb.find('.fr-open').not($btn).removeClass('fr-open')\r\n    $btn.toggleClass('fr-open')\r\n\r\n    // Make sure we hide height properly.\r\n    editor.$tb.find('.fr-more-toolbar').removeClass('fr-overflow-visible')\r\n\r\n    // We already have a more toolbar expanded.\r\n    if (editor.$tb.find('.fr-expanded').not($buttonGroup).length) {\r\n      // Toggle existing toolbar.\r\n      editor.$tb.find('.fr-expanded').toggleClass('fr-expanded')\r\n\r\n      // Open the new toolbar.\r\n      $buttonGroup.toggleClass('fr-expanded')\r\n    }\r\n    else {\r\n      // Open toolbar.\r\n      $buttonGroup.toggleClass('fr-expanded')\r\n\r\n      editor.$box.toggleClass('fr-toolbar-open')\r\n      editor.$tb.toggleClass('fr-toolbar-open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Exec command.\r\n   */\r\n  function exec(cmd, params) {\r\n    // Trigger before command to see if to execute the default callback.\r\n    if (editor.events.trigger('commands.before', $.merge([cmd], params || [])) !== false) {\r\n\r\n      // Get the callback.\r\n      const callback = FE.COMMANDS[cmd] && FE.COMMANDS[cmd].callback || mapping[cmd]\r\n\r\n      let focus = true\r\n      let accessibilityFocus = false\r\n\r\n      if (FE.COMMANDS[cmd]) {\r\n        if (typeof FE.COMMANDS[cmd].focus !== 'undefined') {\r\n          focus = FE.COMMANDS[cmd].focus\r\n        }\r\n\r\n        if (typeof FE.COMMANDS[cmd].accessibilityFocus !== 'undefined') {\r\n          accessibilityFocus = FE.COMMANDS[cmd].accessibilityFocus\r\n        }\r\n      }\r\n\r\n      // Make sure we have focus.\r\n      if (\r\n        !editor.core.hasFocus() && focus && !editor.popups.areVisible() ||\r\n        !editor.core.hasFocus() && accessibilityFocus && editor.accessibility.hasFocus()\r\n      ) {\r\n\r\n        // Focus in the editor at any position.\r\n        editor.events.focus(true)\r\n      }\r\n\r\n      // Callback.\r\n      // Save undo step.\r\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].undo !== false) {\r\n        if (editor.$el.find('.fr-marker').length) {\r\n          editor.events.disableBlur()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n\r\n      if (callback) {\r\n        callback.apply(editor, $.merge([cmd], params || []))\r\n      }\r\n\r\n      // Trigger after command.\r\n      editor.events.trigger('commands.after', $.merge([cmd], params || []))\r\n\r\n      // Save undo step again.\r\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].undo !== false) {\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Exex default.\r\n   */\r\n  function _execCommand(cmd, tag) {\r\n    editor.format.toggle(tag)\r\n  }\r\n\r\n  function _processIndent(indent) {\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName !== 'LI' || blocks[i].parentNode.tagName !== 'LI') {\r\n        let $block = $(blocks[i]);\r\n        if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n          $block = $(blocks[i].parentNode);\r\n        }\r\n        const prop = editor.opts.direction === 'rtl' || $block.css('direction') === 'rtl' ? 'margin-right' : 'margin-left'\r\n\r\n        const margin_left = editor.helpers.getPX($block.css(prop))\r\n\r\n        // Do not allow text to go out of the editor view.\r\n        if ($block.width() < 2 * editor.opts.indentMargin && indent > 0) {\r\n          continue\r\n        }\r\n\r\n        //Do not allow margin for list\r\n        if (blocks[i].parentNode.tagName != 'UL' && blocks[i].parentNode.tagName != 'OL' && blocks[i].parentNode.tagName != 'LI')\r\n          $block.css(prop, Math.max(margin_left + indent * editor.opts.indentMargin, 0) || '')\r\n        $block.removeClass('fr-temp-div')\r\n      }\r\n    }\r\n\r\n    editor.selection.save()\r\n    editor.html.unwrap()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function callExec(k) {\r\n    return function () {\r\n      exec(k)\r\n    }\r\n  }\r\n\r\n  const resp = {}\r\n\r\n  for (const k in mapping) {\r\n    if (Object.prototype.hasOwnProperty.call(mapping, k)) {\r\n      resp[k] = callExec(k)\r\n    }\r\n  }\r\n\r\n  function _init() {\r\n\r\n    // Prevent typing in HR.\r\n    editor.events.on('keydown', (e) => {\r\n      const el = editor.selection.element()\r\n\r\n      if (el && el.tagName === 'HR' && !editor.keys.isArrow(e.which)) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    editor.events.on('keyup', (e) => {\r\n      const el = editor.selection.element()\r\n\r\n      if (el && el.tagName === 'HR') {\r\n        if (e.which === FE.KEYCODE.ARROW_LEFT || e.which === FE.KEYCODE.ARROW_UP) {\r\n          if (el.previousSibling) {\r\n            if (!editor.node.isBlock(el.previousSibling)) {\r\n              $(el).before(FE.MARKERS)\r\n            }\r\n            else {\r\n              editor.selection.setAtEnd(el.previousSibling)\r\n            }\r\n\r\n            editor.selection.restore()\r\n\r\n            return false\r\n          }\r\n        }\r\n        else if (e.which === FE.KEYCODE.ARROW_RIGHT || e.which === FE.KEYCODE.ARROW_DOWN) {\r\n          if (el.nextSibling) {\r\n            if (!editor.node.isBlock(el.nextSibling)) {\r\n              $(el).after(FE.MARKERS)\r\n            }\r\n            else {\r\n              editor.selection.setAtStart(el.nextSibling)\r\n            }\r\n\r\n            editor.selection.restore()\r\n\r\n            return false\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // Do not allow mousedown on HR.\r\n    editor.events.on('mousedown', (e) => {\r\n      if (e.target && e.target.tagName === 'HR') {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // If somehow focus gets in HR remove it.\r\n    editor.events.on('mouseup', () => {\r\n      const s_el = editor.selection.element()\r\n      const e_el = editor.selection.endElement()\r\n\r\n      if (s_el === e_el && s_el && s_el.tagName === 'HR') {\r\n        if (s_el.nextSibling) {\r\n          if (!editor.node.isBlock(s_el.nextSibling)) {\r\n            $(s_el).after(FE.MARKERS)\r\n          }\r\n          else {\r\n            editor.selection.setAtStart(s_el.nextSibling)\r\n          }\r\n        }\r\n\r\n        editor.selection.restore()\r\n      }\r\n    })\r\n  }\r\n\r\n  return Object.assign(resp, {\r\n    exec,\r\n    _init\r\n  })\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.cursorLists = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Find the first li parent.\r\n   */\r\n  function _firstParentLI(node) {\r\n    let p_node = node\r\n\r\n    while (p_node.tagName !== 'LI') {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    return p_node\r\n  }\r\n\r\n  /**\r\n   * Find the first list parent.\r\n   */\r\n  function _firstParentList(node) {\r\n    let p_node = node\r\n\r\n    while (!editor.node.isList(p_node)) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    return p_node\r\n  }\r\n\r\n\r\n  /**\r\n   * Do enter at the beginning of a list item.\r\n   */\r\n  function _startEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Get previous and next siblings.\r\n    const next_li = li.nextSibling\r\n    const prev_li = li.previousSibling\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    let ul\r\n\r\n    // We are in a list item at the middle of the list or an list item that is not empty.\r\n    if (editor.node.isEmpty(li, true) && next_li) {\r\n      let o_str = ''\r\n      let c_str = ''\r\n      let p_node = marker.parentNode\r\n\r\n      // Create open / close string.\r\n      while (!editor.node.isList(p_node) && p_node.parentNode && (p_node.parentNode.tagName !== 'LI' || p_node.parentNode === li)) {\r\n        o_str = editor.node.openTagString(p_node) + o_str\r\n        c_str += editor.node.closeTagString(p_node)\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      o_str = editor.node.openTagString(p_node) + o_str\r\n      c_str += editor.node.closeTagString(p_node)\r\n\r\n      let str = ''\r\n\r\n      if (p_node.parentNode && p_node.parentNode.tagName === 'LI') {\r\n        str = `${c_str}<li>${FE.MARKERS}<br>${o_str}`\r\n      }\r\n      else if (default_tag) {\r\n        str = `${c_str}<${default_tag}>${FE.MARKERS}<br></${default_tag}>${o_str}`\r\n      }\r\n      else {\r\n        str = `${c_str + FE.MARKERS}<br>${o_str}`\r\n      }\r\n\r\n      while (['UL', 'OL'].indexOf(p_node.tagName) < 0 || p_node.parentNode && p_node.parentNode.tagName === 'LI') {\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      $(li).replaceWith('<span id=\"fr-break\"></span>')\r\n      let html = editor.node.openTagString(p_node) + $(p_node).html() + editor.node.closeTagString(p_node)\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(p_node).replaceWith(html)\r\n\r\n      editor.$el.find('li:empty').remove()\r\n    }\r\n    else if (prev_li && next_li || !editor.node.isEmpty(li, true)) {\r\n\r\n      let br_str = '<br>'\r\n      let nd = marker.parentNode\r\n\r\n      while (nd && nd.tagName !== 'LI') {\r\n        br_str = editor.node.openTagString(nd) + br_str + editor.node.closeTagString(nd)\r\n        nd = nd.parentNode\r\n      }\r\n\r\n      $(li).before(`<li>${br_str}</li>`)\r\n      $(marker).remove()\r\n    }\r\n\r\n    // There is no previous list item so transform the current list item to an empty line.\r\n    else if (!prev_li) {\r\n      ul = _firstParentList(li)\r\n\r\n      // We are in a nested list so add a new li before it.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        if (next_li) {\r\n          $(ul.parentNode).before(`${editor.node.openTagString(li) + FE.MARKERS}<br></li>`)\r\n        }\r\n        else {\r\n          $(ul.parentNode).after(`${editor.node.openTagString(li) + FE.MARKERS}<br></li>`)\r\n        }\r\n      }\r\n\r\n      // We are in a normal list. Add a new line before.\r\n      else if (default_tag) {\r\n        $(ul).before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $(ul).before(`${FE.MARKERS}<br>`)\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n    }\r\n\r\n    // There is no next_li item so transform the current list item to an empty line.\r\n    else {\r\n      ul = _firstParentList(li)\r\n\r\n      let new_str = `${FE.MARKERS}<br>`\r\n      let ndx = marker.parentNode\r\n\r\n      while (ndx && ndx.tagName !== 'LI') {\r\n        new_str = editor.node.openTagString(ndx) + new_str + editor.node.closeTagString(ndx)\r\n        ndx = ndx.parentNode\r\n      }\r\n\r\n      // We are in a nested lists so add a new li after it.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        $(ul.parentNode).after(`<li>${new_str}</li>`)\r\n      }\r\n\r\n      // We are in a normal list. Add a new line after.\r\n      else if (default_tag) {\r\n        $(ul).after(`<${default_tag}>${new_str}</${default_tag}>`)\r\n      }\r\n      else {\r\n        $(ul).after(new_str)\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enter at the middle of a list.\r\n   */\r\n  function _middleEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Build the closing / opening list item string.\r\n    let str = ''\r\n    let node = marker\r\n    let o_str = ''\r\n    let c_str = ''\r\n    let add_invisible = false\r\n\r\n    while (node !== li) {\r\n      node = node.parentNode\r\n\r\n      const cls = node.tagName === 'A' && editor.cursor.isAtEnd(marker, node) ? 'fr-to-remove' : ''\r\n\r\n      if (!add_invisible && node != li && !editor.node.isBlock(node)) {\r\n        add_invisible = true\r\n        o_str = o_str + FE.INVISIBLE_SPACE\r\n      }\r\n\r\n      o_str = editor.node.openTagString($(node).clone().addClass(cls).get(0)) + o_str\r\n      c_str = editor.node.closeTagString(node) + c_str\r\n    }\r\n\r\n    // Add markers.\r\n    str = c_str + str + o_str + FE.MARKERS + (editor.opts.keepFormatOnDelete ? FE.INVISIBLE_SPACE : '')\r\n\r\n    // Build HTML.\r\n    $(marker).replaceWith('<span id=\"fr-break\"></span>')\r\n    let html = editor.node.openTagString(li) + $(li).html() + editor.node.closeTagString(li)\r\n    html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n    // Replace the current list item.\r\n    $(li).replaceWith(html)\r\n  }\r\n\r\n  /**\r\n   * Enter at the end of a list item.\r\n   */\r\n  function _endEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    let end_str = FE.MARKERS\r\n    let start_str = ''\r\n    let node = marker\r\n\r\n    let add_invisible = false\r\n\r\n    while (node !== li) {\r\n      node = node.parentNode\r\n      \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      // For next sibling list item it was adding unnecessary div tag of elder sibling list.\r\n      if(node.classList.contains('fr-img-space-wrap') || node.classList.contains('fr-img-space-wrap2')){\r\n        continue\r\n      }\r\n\r\n      const cls = node.tagName === 'A' && editor.cursor.isAtEnd(marker, node) ? 'fr-to-remove' : ''\r\n\r\n      if (!add_invisible && node !== li && !editor.node.isBlock(node)) {\r\n        add_invisible = true\r\n        start_str += FE.INVISIBLE_SPACE\r\n      }\r\n\r\n      start_str = editor.node.openTagString($(node).clone().addClass(cls).get(0)) + start_str\r\n      end_str += editor.node.closeTagString(node)\r\n    }\r\n\r\n    const str = start_str + end_str\r\n\r\n    $(marker).remove()\r\n    $(li).after(str)\r\n  }\r\n\r\n  /**\r\n   * Do backspace on a list item. This method is called only when wer are at the beginning of a LI.\r\n   */\r\n  function _backspace(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Get previous sibling.\r\n    let prev_li = li.previousSibling\r\n\r\n    // There is a previous li.\r\n    if (prev_li) {\r\n\r\n      // Get the li inside a nested list or inner block tags.\r\n      prev_li = $(prev_li).find(editor.html.blockTagsQuery()).get(-1) || prev_li\r\n\r\n      // Add markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Remove possible BR at the end of the previous list.\r\n      let contents = editor.node.contents(prev_li)\r\n\r\n      if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n        $(contents[contents.length - 1]).remove()\r\n      }\r\n\r\n      // Remove any nodes that might be wrapped.\r\n      $(li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n        if (this.parentNode === li) {\r\n          $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n        }\r\n      })\r\n\r\n      // Append the current list item content to the previous one.\r\n      let node = editor.node.contents(li)[0]\r\n      let tmp\r\n\r\n      while (node && !editor.node.isList(node)) {\r\n        tmp = node.nextSibling\r\n        $(prev_li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      prev_li = li.previousSibling\r\n\r\n      while (node) {\r\n        tmp = node.nextSibling\r\n        $(prev_li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      // Remove ending BR.\r\n      contents = editor.node.contents(prev_li)\r\n      if (contents.length > 1 && contents[contents.length - 1].tagName === 'BR') {\r\n        $(contents[contents.length - 1]).remove()\r\n      }\r\n\r\n      // Remove the current LI.\r\n      $(li).remove()\r\n    }\r\n\r\n    // No previous li.\r\n    else {\r\n      const ul = _firstParentList(li)\r\n\r\n      // Add markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Nested lists.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        const prev_node = ul.previousSibling\r\n\r\n        // Previous node is block.\r\n        if (editor.node.isBlock(prev_node)) {\r\n\r\n          // Remove any nodes that might be wrapped.\r\n          $(li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n            if (this.parentNode === li) {\r\n              $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n            }\r\n          })\r\n\r\n          $(prev_node).append($(li).html())\r\n        }\r\n\r\n        // Text right in li.\r\n        else {\r\n          $(ul).before($(li).html())\r\n        }\r\n      }\r\n\r\n      // Normal lists. Add an empty li instead.\r\n      else {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag && $(li).find(editor.html.blockTagsQuery()).length === 0) {\r\n          $(ul).before(`<${default_tag}>${$(li).html()}</${default_tag}>`)\r\n        }\r\n        else {\r\n          $(ul).before($(li).html())\r\n        }\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n      editor.html.wrap()\r\n\r\n      // Remove the ul if it is empty.\r\n      if ($(ul).find('li').length === 0) {\r\n        $(ul).remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete at the end of list item.\r\n   */\r\n  function _del(marker) {\r\n    const li = _firstParentLI(marker)\r\n    const next_li = li.nextSibling\r\n    let contents\r\n\r\n    // There is a next li.\r\n    if (next_li) {\r\n\r\n      // Remove possible BR at the beginning of the next LI.\r\n      contents = editor.node.contents(next_li)\r\n\r\n      if (contents.length && contents[0].tagName === 'BR') {\r\n        $(contents[0]).remove()\r\n      }\r\n\r\n      // Unwrap content from the next node.\r\n      $(next_li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n        if (this.parentNode === next_li) {\r\n          $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n        }\r\n      })\r\n\r\n      // Append the next LI to the current LI.\r\n      let last_node = marker\r\n      let node = editor.node.contents(next_li)[0]\r\n      let tmp\r\n\r\n      while (node && !editor.node.isList(node)) {\r\n        tmp = node.nextSibling\r\n        $(last_node).after(node)\r\n        last_node = node\r\n        node = tmp\r\n      }\r\n\r\n      // Append nested lists.\r\n      while (node) {\r\n        tmp = node.nextSibling\r\n        $(li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      // Replace marker with markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Remove next li.\r\n      $(next_li).remove()\r\n    }\r\n\r\n    // No next li.\r\n    else {\r\n\r\n      // Search the next sibling in parents.\r\n      let next_node = li\r\n\r\n      while (!next_node.nextSibling && next_node !== editor.el) {\r\n        next_node = next_node.parentNode\r\n      }\r\n\r\n      // We're right at the end.\r\n      if (next_node === editor.el) {\r\n        return false\r\n      }\r\n\r\n      // Get the next sibling.\r\n      next_node = next_node.nextSibling\r\n\r\n      // Next sibling is a block tag.\r\n      if (editor.node.isBlock(next_node)) {\r\n\r\n        // Check if we can do delete in it.\r\n        if (FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0) {\r\n\r\n          // Add markers.\r\n          $(marker).replaceWith(FE.MARKERS)\r\n\r\n          // Remove any possible BR at the end of the LI.\r\n          contents = editor.node.contents(li)\r\n\r\n          if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n            $(contents[contents.length - 1]).remove()\r\n          }\r\n\r\n          // Append next node.\r\n          $(li).append($(next_node).html())\r\n\r\n          // Remove the next node.\r\n          $(next_node).remove()\r\n        }\r\n      }\r\n\r\n      // Append everything till the next block tag or BR.\r\n      else {\r\n\r\n        // Remove any possible BR at the end of the LI.\r\n        contents = editor.node.contents(li)\r\n\r\n        if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n          $(contents[contents.length - 1]).remove()\r\n        }\r\n\r\n        // var next_node = next_li;\r\n        $(marker).replaceWith(FE.MARKERS)\r\n\r\n        while (next_node && !editor.node.isBlock(next_node) && next_node.tagName !== 'BR') {\r\n          $(li).append($(next_node))\r\n          next_node = next_node.nextSibling\r\n        }\r\n\r\n        // Remove the next node.\r\n        $(next_node).remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    _startEnter,\r\n    _middleEnter,\r\n    _endEnter,\r\n    _backspace,\r\n    _del\r\n  }\r\n}\r\n\r\n","import FE from '../../editor.js'\r\n\r\n// Do not merge with the previous one.\r\nFE.NO_DELETE_TAGS = ['TH', 'TD', 'TR', 'TABLE', 'FORM']\r\n\r\n// Do simple enter.\r\nFE.SIMPLE_ENTER_TAGS = ['TH', 'TD', 'LI', 'DL', 'DT', 'FORM']\r\n\r\nFE.MODULES.cursor = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Check if node is at the end of a block tag.\r\n   */\r\n  function _atEnd(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (editor.node.isBlock(node)) {\r\n      return true\r\n    }\r\n\r\n    if (node.nextSibling && node.nextSibling.nodeType === Node.TEXT_NODE && node.nextSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _atEnd(node.nextSibling)\r\n    }\r\n\r\n    if (node.nextSibling && !(node.previousSibling && node.nextSibling.tagName === 'BR' && !node.nextSibling.nextSibling)) {\r\n      return false\r\n    }\r\n\r\n    return _atEnd(node.parentNode)\r\n  }\r\n\r\n  /**\r\n   * Check if node is at the start of a block tag.\r\n   */\r\n  function _atStart(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (editor.node.isBlock(node)) {\r\n      return true\r\n    }\r\n\r\n    if (node.previousSibling && node.previousSibling.nodeType === Node.TEXT_NODE && node.previousSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _atStart(node.previousSibling)\r\n    }\r\n\r\n    if (node.previousSibling) {\r\n      return false\r\n    }\r\n\r\n    if (!node.previousSibling && editor.node.hasClass(node.parentNode, 'fr-inner')) {\r\n      return true\r\n    }\r\n\r\n    return _atStart(node.parentNode)\r\n  }\r\n\r\n  /**\r\n   * Check if node is a the start of the container.\r\n   */\r\n  function _isAtStart(node, container) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node === editor.$wp.get(0)) {\r\n      return false\r\n    }\r\n\r\n    if (node.previousSibling && node.previousSibling.nodeType === Node.TEXT_NODE && node.previousSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _isAtStart(node.previousSibling, container)\r\n    }\r\n\r\n    if (node.previousSibling) {\r\n      return false\r\n    }\r\n\r\n    if (node.parentNode === container) {\r\n      return true\r\n    }\r\n\r\n    return _isAtStart(node.parentNode, container)\r\n  }\r\n\r\n  /**\r\n   * Check if node is a the start of the container.\r\n   */\r\n  function _isAtEnd(node, container) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node === editor.$wp.get(0)) {\r\n      return false\r\n    }\r\n\r\n    if (node.nextSibling && node.nextSibling.nodeType === Node.TEXT_NODE && node.nextSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n\r\n      return _isAtEnd(node.nextSibling, container)\r\n    }\r\n\r\n    if (node.nextSibling && !(node.previousSibling && node.nextSibling.tagName === 'BR' && !node.nextSibling.nextSibling)) {\r\n      return false\r\n    }\r\n\r\n    if (node.parentNode === container) {\r\n      return true\r\n    }\r\n\r\n    return _isAtEnd(node.parentNode, container)\r\n  }\r\n\r\n  /**\r\n   * Check if the node is inside a LI.\r\n   */\r\n  function _inLi(node) {\r\n    return $(node).parentsUntil(editor.$el, 'LI').length > 0 && $(node).parentsUntil('LI', 'TABLE').length === 0\r\n  }\r\n\r\n  /**\r\n   * Get the length of the first or last character from text. Note: A special character can contain 1, 2 or 4 javascript 16bits characters.\r\n   */\r\n  function _getExtremityCharacterLength(text, first) {\r\n\r\n    const special_chars_regex = new RegExp(`${first ? '^' : ''}(([\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]+\\\\u200D)*[\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]{2})${first ? '' : '$'}`, 'i')\r\n    const matches = text.match(special_chars_regex)\r\n\r\n    // No matches means there is a normal character.\r\n    if (!matches) {\r\n      return 1\r\n    }\r\n\r\n    // Special character match. Can be 1, 2 or 4 characters.\r\n\r\n\r\n    return matches[0].length\r\n\r\n  }\r\n\r\n  /**\r\n   * Do backspace at the start of a block tag.\r\n   */\r\n  function _startBackspace(marker) {\r\n    const quote = $(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0\r\n    let deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let current_block = deep_parent\r\n\r\n    // Check for nested block tags if no previous element.\r\n    while (deep_parent && !deep_parent.previousSibling && deep_parent.tagName !== 'BLOCKQUOTE' && deep_parent.parentElement !== editor.el && !editor.node.hasClass(deep_parent.parentElement, 'fr-inner') && FE.SIMPLE_ENTER_TAGS.indexOf(deep_parent.parentElement.tagName) < 0) {\r\n      deep_parent = deep_parent.parentElement\r\n    }\r\n\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      const m_parent = editor.node.deepestParent(marker, [$(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0)])\r\n\r\n      if (m_parent && m_parent.previousSibling) {\r\n        deep_parent = m_parent\r\n        current_block = m_parent\r\n      }\r\n    }\r\n\r\n    // Deepest parent is not the main element.\r\n    if (deep_parent !== null) {\r\n      let prev_node = deep_parent.previousSibling\r\n      let contents\r\n\r\n      // We are inside a block tag.\r\n      if (editor.node.isBlock(deep_parent) && editor.node.isEditable(deep_parent)) {\r\n\r\n        // There is a previous node.\r\n        if (prev_node && FE.NO_DELETE_TAGS.indexOf(prev_node.tagName) < 0) {\r\n          if (editor.node.isDeletable(prev_node)) {\r\n            $(prev_node).remove()\r\n            $(marker).replaceWith(FE.MARKERS)\r\n          }\r\n          else {\r\n            // Previous node is a block tag.\r\n            if (editor.node.isEditable(prev_node)) {\r\n              if (editor.node.isBlock(prev_node)) {\r\n                if (editor.node.isEmpty(prev_node) && !editor.node.isList(prev_node)) {\r\n                  $(prev_node).remove()\r\n\r\n                  // https://github.com/froala/wysiwyg-editor/issues/1877.\r\n                  $(marker).after(editor.opts.keepFormatOnDelete ? FE.INVISIBLE_SPACE : '')\r\n                }\r\n                else {\r\n                  if (editor.node.isList(prev_node)) {\r\n                    prev_node = $(prev_node).find('li').last().get(0)\r\n                  }\r\n\r\n                  // Remove last BR.\r\n                  contents = editor.node.contents(prev_node)\r\n\r\n                  if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n                    $(contents[contents.length - 1]).remove()\r\n                  }\r\n\r\n                  // Prev node is blockquote but the current one isn't.\r\n                  if (prev_node.tagName === 'BLOCKQUOTE' && deep_parent.tagName !== 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(prev_node)\r\n\r\n                    while (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                      prev_node = contents[contents.length - 1]\r\n                      contents = editor.node.contents(prev_node)\r\n                    }\r\n                  }\r\n\r\n                  // Prev node is not blockquote, but the current one is.\r\n                  else if (prev_node.tagName !== 'BLOCKQUOTE' && current_block.tagName === 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(current_block)\r\n\r\n                    while (contents.length && editor.node.isBlock(contents[0])) {\r\n                      current_block = contents[0]\r\n                      contents = editor.node.contents(current_block)\r\n                    }\r\n                  }\r\n\r\n                  // When current node is empty place the cursor at the end of the prev node.\r\n                  if (editor.node.isEmpty(deep_parent)) {\r\n                    $(marker).remove()\r\n                    editor.selection.setAtEnd(prev_node, true)\r\n                  }\r\n\r\n                  // Replace marker with markers.\r\n                  else {\r\n                    $(marker).replaceWith(FE.MARKERS)\r\n\r\n                    // Previous node may have only block children.\r\n                    const prev_children = prev_node.childNodes\r\n\r\n                    // Append to prev node current HTML\r\n                    if (!editor.node.isBlock(prev_children[prev_children.length - 1])) {\r\n                      $(prev_node).append(current_block.innerHTML)\r\n                    }\r\n                    else {\r\n                      // Append the HTML to the last child of the previous node.\r\n                      $(prev_children[prev_children.length - 1]).append(current_block.innerHTML)\r\n                    }\r\n                  }\r\n\r\n                  // Remove current block.\r\n                  $(current_block).remove()\r\n\r\n                  // Remove current deep parent if empty.\r\n                  if (editor.node.isEmpty(deep_parent)) {\r\n                    $(deep_parent).remove()\r\n                  }\r\n                }\r\n              }\r\n              else {\r\n                $(marker).replaceWith(FE.MARKERS)\r\n\r\n                if (deep_parent.tagName === 'BLOCKQUOTE' && prev_node.nodeType === Node.ELEMENT_NODE) {\r\n                  $(prev_node).remove()\r\n                }\r\n                else {\r\n                  $(prev_node).after(editor.node.isEmpty(deep_parent) ? '' : $(deep_parent).html())\r\n                  $(deep_parent).remove()\r\n\r\n                  if (prev_node.tagName === 'BR') {\r\n                    $(prev_node).remove()\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (!prev_node) {\r\n          if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE' && $(deep_parent).text().replace(/\\u200B/g, '').length === 0) {\r\n            $(deep_parent).remove();\r\n          }\r\n          else {\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/1304\r\n            if (editor.node.isEmpty(deep_parent) && deep_parent.parentNode && editor.node.isEditable(deep_parent.parentNode)) {\r\n              // check for the editor el\r\n              if (deep_parent.parentNode != editor.el) {\r\n                $(deep_parent.parentNode).remove();\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // No block tag.\r\n      /* jshint ignore:start */\r\n      /* jscs:disable */\r\n      else {\r\n        // This should never happen.\r\n      }\r\n      /* jshint ignore:end */\r\n      /* jscs:enable */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do backspace at the middle of a block tag.\r\n   */\r\n  function _middleBackspace(marker) {\r\n    let prev_node = marker\r\n\r\n    // Get the parent node that has a prev sibling.\r\n    while (!prev_node.previousSibling) {\r\n      prev_node = prev_node.parentNode\r\n\r\n      if (editor.node.isElement(prev_node)) {\r\n        return false\r\n      }\r\n    }\r\n    prev_node = prev_node.previousSibling\r\n\r\n    // Not block tag.\r\n    let contents\r\n    const emptyTagsOpt = editor.opts.htmlAllowedEmptyTags\r\n    let prevNodeTagname = prev_node.tagName && prev_node.tagName.toLowerCase()\r\n\r\n    if ((!editor.node.isBlock(prev_node) || (prev_node.lastChild && prevNodeTagname && emptyTagsOpt.indexOf(prevNodeTagname) >= 0)) && editor.node.isEditable(prev_node)) {\r\n      contents = editor.node.contents(prev_node)\r\n\r\n      // Previous node is text.\r\n      while (prev_node.nodeType !== Node.TEXT_NODE && !editor.node.isDeletable(prev_node) && contents.length && editor.node.isEditable(prev_node)) {\r\n        prev_node = contents[contents.length - 1]\r\n        contents = editor.node.contents(prev_node)\r\n      }\r\n\r\n      if (prev_node.nodeType === Node.TEXT_NODE) {\r\n        const txt = prev_node.textContent\r\n        let len = txt.length\r\n\r\n        // We have a \\n character.\r\n        if (txt.length && txt[txt.length - 1] === '\\n') {\r\n          prev_node.textContent = txt.substring(0, len - 2)\r\n\r\n          if (prev_node.textContent.length === 0) {\r\n            prev_node.parentNode.removeChild(prev_node)\r\n          }\r\n\r\n          return _middleBackspace(marker)\r\n        }\r\n\r\n        // Tab UNDO.\r\n        if (editor.opts.tabSpaces && txt.length >= editor.opts.tabSpaces) {\r\n          const tab_str = txt.substr(txt.length - editor.opts.tabSpaces, txt.length - 1)\r\n\r\n          if (tab_str.replace(/ /g, '').replace(new RegExp(FE.UNICODE_NBSP, 'g'), '').length === 0) {\r\n            len = txt.length - editor.opts.tabSpaces + 1\r\n          }\r\n        }\r\n\r\n        prev_node.textContent = txt.substring(0, len - _getExtremityCharacterLength(txt))\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3034\r\n        if (editor.opts.htmlUntouched && !marker.nextSibling && prev_node.textContent.length && prev_node.textContent[prev_node.textContent.length - 1] === ' ') {\r\n          prev_node.textContent = prev_node.textContent.substring(0, prev_node.textContent.length - 1) + FE.UNICODE_NBSP;\r\n        }\r\n\r\n        const deleted = txt.length !== prev_node.textContent.length\r\n\r\n        // Remove nodwhile (!editor.node.isElement(preve if empty.\r\n        if (prev_node.textContent.length === 0) {\r\n\r\n          // Here we check to see if we should keep the current formatting.\r\n          if (deleted && editor.opts.keepFormatOnDelete) {\r\n            $(prev_node).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          }\r\n          else {\r\n            if (txt.length === 0 || !editor.node.isBlock(prev_node.parentNode)) {\r\n              // Condition prev_node.parentNode.childNodes.length == 1 is from https://github.com/froala/wysiwyg-editor/issues/1855 .\r\n              if (((prev_node.parentNode.childNodes.length == 2 && prev_node.parentNode == marker.parentNode) || prev_node.parentNode.childNodes.length == 1) && !editor.node.isBlock(prev_node.parentNode) && !editor.node.isElement(prev_node.parentNode) && editor.node.isDeletable(prev_node.parentNode)) {\r\n                $(prev_node.parentNode).after(FE.MARKERS)\r\n                $(prev_node.parentNode).remove()\r\n              }\r\n              else {\r\n                let isEmptyATag\r\n                const previous_node = prev_node\r\n                // https://github.com/froala/wysiwyg-editor/issues/2626.\r\n                while (!editor.node.isElement(prev_node.parentNode) && editor.node.isEmpty(prev_node.parentNode) && FE.NO_DELETE_TAGS.indexOf(prev_node.parentNode.tagName) < 0) {\r\n                  prev_node = prev_node.parentNode\r\n                  if(prev_node.tagName === 'A') {\r\n                    let c_node = prev_node.childNodes[0];\r\n                    $(prev_node).before(c_node)\r\n                    isEmptyATag = true\r\n                    while(c_node.childNodes.length > 0) {\r\n                      c_node = c_node.childNodes[0]\r\n                    }\r\n                    prev_node.parentNode.removeChild(prev_node)\r\n                    prev_node = c_node\r\n                    break\r\n                  }\r\n                }\r\n\r\n                if(!isEmptyATag)\r\n                  prev_node = previous_node\r\n                  \r\n                $(prev_node).after(FE.MARKERS)\r\n\r\n                // https://github.com/froala/wysiwyg-editor/issues/1379.\r\n                if (editor.node.isElement(prev_node.parentNode) && !marker.nextSibling && prev_node.previousSibling && prev_node.previousSibling.tagName === 'BR') {\r\n                  $(marker).after('<br>')\r\n                }\r\n\r\n                const p_node = prev_node.parentNode\r\n                prev_node.parentNode.removeChild(prev_node)\r\n                if(editor.node.isEmpty(p_node))\r\n                  $(p_node).html(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n              }\r\n            }\r\n            else {\r\n              $(prev_node).after(FE.MARKERS);\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          $(prev_node).after(FE.MARKERS)\r\n        }\r\n      }\r\n      else if (editor.node.isDeletable(prev_node)) {\r\n        $(prev_node).after(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n      else if (marker.nextSibling && marker.nextSibling.tagName === 'BR' && editor.node.isVoid(prev_node) && prev_node.tagName !== 'BR') {\r\n        $(marker.nextSibling).remove()\r\n        $(marker).replaceWith(FE.MARKERS)\r\n      }\r\n      else if (editor.events.trigger('node.remove', [$(prev_node)]) !== false) {\r\n        $(prev_node).after(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n    }\r\n\r\n    // Block tag but we are allowed to delete it.\r\n    else if (FE.NO_DELETE_TAGS.indexOf(prev_node.tagName) < 0 && (editor.node.isEditable(prev_node) || editor.node.isDeletable(prev_node))) {\r\n      if (editor.node.isDeletable(prev_node)) {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n      else if (editor.node.isEmpty(prev_node) && !editor.node.isList(prev_node)) {\r\n        $(prev_node).remove()\r\n        $(marker).replaceWith(FE.MARKERS)\r\n      }\r\n      else {\r\n\r\n        // List correction.\r\n        if (editor.node.isList(prev_node)) {\r\n          prev_node = $(prev_node).find('li').last().get(0)\r\n        }\r\n\r\n        contents = editor.node.contents(prev_node)\r\n\r\n        if (contents && contents[contents.length - 1].tagName === 'BR') {\r\n          $(contents[contents.length - 1]).remove()\r\n        }\r\n\r\n        contents = editor.node.contents(prev_node)\r\n\r\n        while (contents && editor.node.isBlock(contents[contents.length - 1])) {\r\n          prev_node = contents[contents.length - 1]\r\n          contents = editor.node.contents(prev_node)\r\n        }\r\n\r\n        $(prev_node).append(FE.MARKERS)\r\n\r\n        let next_node = marker\r\n\r\n        while (!next_node.previousSibling) {\r\n          next_node = next_node.parentNode\r\n        }\r\n\r\n        while (next_node && next_node.tagName !== 'BR' && !editor.node.isBlock(next_node)) {\r\n          const copy_node = next_node\r\n          next_node = next_node.nextSibling\r\n          $(prev_node).append(copy_node)\r\n        }\r\n\r\n        // Remove BR.\r\n        if (next_node && next_node.tagName === 'BR') {\r\n          $(next_node).remove()\r\n        }\r\n\r\n        $(marker).remove()\r\n      }\r\n    }\r\n    else if (marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n      $(marker.nextSibling).remove()\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Do backspace.\r\n   */\r\n  function backspace() {\r\n    let do_default = false\r\n\r\n    // Add a marker in HTML.\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return true\r\n    }\r\n\r\n    // Do not allow edit inside contenteditable=\"false\".\r\n    let p_node = marker.parentNode\r\n\r\n    while (p_node && !editor.node.isElement(p_node)) {\r\n      if (p_node.getAttribute('contenteditable') === 'false') {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        editor.selection.restore()\r\n\r\n        return false\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2070\r\n      // Break the loop if node has no content and it is editable\r\n      else if (p_node.innerText.length && p_node.getAttribute('contenteditable') === 'true') {\r\n        break\r\n      }\r\n\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // We should remove invisible space first of all.\r\n    const prev_node = marker.previousSibling\r\n\r\n    if (prev_node) {\r\n      const txt = prev_node.textContent\r\n\r\n      // Check if we have an invisible space before the marker.\r\n      if (txt && txt.length && txt.charCodeAt(txt.length - 1) === 8203) {\r\n        if (txt.length === 1) {\r\n          $(prev_node).remove()\r\n        }\r\n        else {\r\n          prev_node.textContent = prev_node.textContent.substr(0, txt.length - _getExtremityCharacterLength(txt))\r\n        }\r\n      }\r\n    }\r\n\r\n    // Delete at end.\r\n    if (_atEnd(marker)) {\r\n      if (_inLi(marker) && _isAtStart(marker, $(marker).parents('li').first().get(0))) {\r\n        editor.cursorLists._backspace(marker);\r\n      }\r\n      else {\r\n        do_default = _middleBackspace(marker);\r\n      }\r\n    }\r\n\r\n    // Delete at start.\r\n    else if (_atStart(marker)) {\r\n      if (_inLi(marker) && _isAtStart(marker, $(marker).parents('li').first().get(0))) {\r\n        editor.cursorLists._backspace(marker)\r\n      }\r\n      else {\r\n        _startBackspace(marker)\r\n      }\r\n    }\r\n\r\n    // Delete at middle.\r\n    else {\r\n      do_default = _middleBackspace(marker)\r\n    }\r\n\r\n    $(marker).remove()\r\n\r\n    _cleanEmptyBlockquotes()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n      editor.spaces.normalizeAroundCursor()\r\n    }\r\n\r\n    editor.selection.restore()\r\n\r\n    return do_default\r\n  }\r\n\r\n  /**\r\n   * Delete at the end of a block tag.\r\n   */\r\n  function _endDel(marker) {\r\n    const quote = $(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0\r\n    let deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      const m_parent = editor.node.deepestParent(marker, [$(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0)])\r\n\r\n      if (m_parent && m_parent.nextSibling) {\r\n        deep_parent = m_parent\r\n      }\r\n    }\r\n\r\n    // Deepest parent is not the main element.\r\n    if (deep_parent !== null) {\r\n      let next_node = deep_parent.nextSibling\r\n      let contents\r\n\r\n      // We are inside a block tag.\r\n      if (editor.node.isBlock(deep_parent) && (editor.node.isEditable(deep_parent) || editor.node.isDeletable(deep_parent))) {\r\n\r\n        // There is a next node.\r\n        if (next_node && FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0) {\r\n          if (editor.node.isDeletable(next_node)) {\r\n            $(next_node).remove()\r\n            $(marker).replaceWith(FE.MARKERS)\r\n          }\r\n          else {\r\n\r\n            // Next node is a block tag.\r\n            if (editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n\r\n              // Next node is a list.\r\n              if (editor.node.isList(next_node)) {\r\n\r\n                // Current block tag is empty.\r\n                if (editor.node.isEmpty(deep_parent, true)) {\r\n                  $(deep_parent).remove()\r\n\r\n                  $(next_node).find('li').first().prepend(FE.MARKERS)\r\n                }\r\n                else {\r\n                  const $li = $(next_node).find('li').first()\r\n\r\n                  if (deep_parent.tagName === 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(deep_parent)\r\n\r\n                    if (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                      deep_parent = contents[contents.length - 1]\r\n                    }\r\n                  }\r\n\r\n                  // There are no nested lists.\r\n                  if ($li.find('ul, ol').length === 0) {\r\n                    $(marker).replaceWith(FE.MARKERS)\r\n\r\n                    // Remove any nodes that might be wrapped.\r\n                    $li.find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n                      if (this.parentNode === $li.get(0)) {\r\n                        $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n                      }\r\n                    })\r\n\r\n                    $(deep_parent).append(editor.node.contents($li.get(0)))\r\n                    $li.remove()\r\n\r\n                    if ($(next_node).find('li').length === 0) {\r\n                      $(next_node).remove()\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              else {\r\n\r\n                // Remove last BR.\r\n                contents = editor.node.contents(next_node)\r\n\r\n                if (contents.length && contents[0].tagName === 'BR') {\r\n                  $(contents[0]).remove()\r\n                }\r\n\r\n                if (next_node.tagName !== 'BLOCKQUOTE' && deep_parent.tagName === 'BLOCKQUOTE') {\r\n                  contents = editor.node.contents(deep_parent)\r\n\r\n                  while (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                    deep_parent = contents[contents.length - 1]\r\n                    contents = editor.node.contents(deep_parent)\r\n                  }\r\n                }\r\n                else if (next_node.tagName === 'BLOCKQUOTE' && deep_parent.tagName !== 'BLOCKQUOTE') {\r\n                  contents = editor.node.contents(next_node)\r\n\r\n                  while (contents.length && editor.node.isBlock(contents[0])) {\r\n                    next_node = contents[0]\r\n                    contents = editor.node.contents(next_node)\r\n                  }\r\n                }\r\n\r\n                $(marker).replaceWith(FE.MARKERS)\r\n                $(deep_parent).append(next_node.innerHTML)\r\n                $(next_node).remove()\r\n              }\r\n            }\r\n            else {\r\n              $(marker).replaceWith(FE.MARKERS)\r\n\r\n              // var next_node = next_node.nextSibling;\r\n              while (next_node && next_node.tagName !== 'BR' && !editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n                const copy_node = next_node\r\n                next_node = next_node.nextSibling\r\n                $(deep_parent).append(copy_node)\r\n              }\r\n\r\n              if (next_node && next_node.tagName === 'BR' && editor.node.isEditable(next_node)) {\r\n                $(next_node).remove()\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // No block tag.\r\n      /* jshint ignore:start */\r\n      /* jscs:disable */\r\n      else {\r\n        // This should never happen.\r\n      }\r\n      /* jshint ignore:end */\r\n      /* jscs:enable */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete at the middle of a block tag.\r\n   */\r\n  function _middleDel(marker) {\r\n    let next_node = marker\r\n\r\n    // Get the parent node that has a next sibling.\r\n    while (!next_node.nextSibling) {\r\n      next_node = next_node.parentNode\r\n\r\n      if (editor.node.isElement(next_node)) {\r\n        return false\r\n      }\r\n    }\r\n    next_node = next_node.nextSibling\r\n\r\n    // Handle the case when the next node is a BR.\r\n    if (next_node.tagName === 'BR' && editor.node.isEditable(next_node)) {\r\n\r\n      // There is a next sibling.\r\n      if (next_node.nextSibling) {\r\n        if (editor.node.isBlock(next_node.nextSibling) && editor.node.isEditable(next_node.nextSibling)) {\r\n          if (FE.NO_DELETE_TAGS.indexOf(next_node.nextSibling.tagName) < 0) {\r\n            next_node = next_node.nextSibling\r\n            $(next_node.previousSibling).remove()\r\n          }\r\n          else {\r\n            $(next_node).remove()\r\n\r\n            return\r\n          }\r\n        }\r\n      }\r\n\r\n      // No next sibling. We should check if BR is at the end.\r\n      else if (_atEnd(next_node)) {\r\n        if (_inLi(marker)) {\r\n          editor.cursorLists._del(marker)\r\n        }\r\n        else {\r\n          const deep_parent = editor.node.deepestParent(next_node)\r\n\r\n          if (deep_parent) {\r\n            if (!editor.node.isEmpty(editor.node.blockParent(next_node)) || (editor.node.blockParent(next_node).nextSibling && FE.NO_DELETE_TAGS.indexOf(editor.node.blockParent(next_node).nextSibling.tagName)) < 0) {\r\n              $(next_node).remove()\r\n            }\r\n\r\n            _endDel(marker)\r\n          }\r\n        }\r\n\r\n        return\r\n      }\r\n    }\r\n\r\n    // Not block tag.\r\n    let contents\r\n\r\n    if (!editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n      contents = editor.node.contents(next_node)\r\n\r\n      // Next node is text.\r\n      while (next_node.nodeType !== Node.TEXT_NODE && contents.length && !editor.node.isDeletable(next_node) && editor.node.isEditable(next_node)) {\r\n        next_node = contents[0]\r\n        contents = editor.node.contents(next_node)\r\n      }\r\n\r\n      if (next_node.nodeType === Node.TEXT_NODE) {\r\n        $(next_node).before(FE.MARKERS)\r\n\r\n        if (next_node.textContent.length) {\r\n          next_node.textContent = next_node.textContent.substring(_getExtremityCharacterLength(next_node.textContent, true), next_node.textContent.length)\r\n        }\r\n      }\r\n      else if (editor.node.isDeletable(next_node)) {\r\n        $(next_node).before(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n      else if (editor.events.trigger('node.remove', [$(next_node)]) !== false) {\r\n        $(next_node).before(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n\r\n      $(marker).remove()\r\n    }\r\n\r\n    // Block tag.\r\n    else if (FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0 && (editor.node.isEditable(next_node) || editor.node.isDeletable(next_node))) {\r\n      if (editor.node.isDeletable(next_node)) {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n      else if (editor.node.isList(next_node)) {\r\n\r\n        // There is a previous sibling.\r\n        if (marker.previousSibling) {\r\n          $(next_node).find('li').first().prepend(marker)\r\n          editor.cursorLists._backspace(marker)\r\n        }\r\n\r\n        // No previous sibling.\r\n        else {\r\n          $(next_node).find('li').first().prepend(FE.MARKERS)\r\n          $(marker).remove()\r\n        }\r\n      }\r\n      else {\r\n        contents = editor.node.contents(next_node)\r\n\r\n        if (contents && contents[0].tagName === 'BR') {\r\n          $(contents[0]).remove()\r\n        }\r\n\r\n        // Deal with blockquote.\r\n        if (contents && next_node.tagName === 'BLOCKQUOTE') {\r\n          let node = contents[0]\r\n          $(marker).before(FE.MARKERS)\r\n\r\n          while (node && node.tagName !== 'BR') {\r\n            const tmp = node\r\n            node = node.nextSibling\r\n            $(marker).before(tmp)\r\n          }\r\n\r\n          if (node && node.tagName === 'BR') {\r\n            $(node).remove()\r\n          }\r\n        }\r\n        else {\r\n          $(marker)\r\n            .after($(next_node).html())\r\n            .after(FE.MARKERS)\r\n\r\n          $(next_node).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete.\r\n   */\r\n  function del() {\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return false\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // Delete at end.\r\n    if (_atEnd(marker)) {\r\n      if (_inLi(marker)) {\r\n        if ($(marker).parents('li').first().find('ul, ol').length === 0) {\r\n          editor.cursorLists._del(marker)\r\n        }\r\n        else {\r\n          let $li = $(marker).parents('li').first()\r\n            .find('ul, ol')\r\n            .first()\r\n            .find('li')\r\n            .first()\r\n          $li = $li.find(editor.html.blockTagsQuery()).get(-1) || $li\r\n\r\n          $li.prepend(marker)\r\n          editor.cursorLists._backspace(marker)\r\n        }\r\n      }\r\n      else {\r\n        _endDel(marker)\r\n      }\r\n    }\r\n\r\n    // Delete at start.\r\n    else if (_atStart(marker)) {\r\n      _middleDel(marker)\r\n    }\r\n\r\n    // Delete at middle.\r\n    else {\r\n      _middleDel(marker)\r\n    }\r\n\r\n    $(marker).remove()\r\n    _cleanEmptyBlockquotes()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n    }\r\n\r\n    editor.spaces.normalizeAroundCursor()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function _cleanEmptyBlockquotes() {\r\n    const blks = editor.el.querySelectorAll('blockquote:empty')\r\n\r\n    for (let i = 0; i < blks.length; i++) {\r\n      blks[i].parentNode.removeChild(blks[i])\r\n    }\r\n  }\r\n\r\n  function _cleanNodesToRemove() {\r\n    editor.$el.find('.fr-to-remove').each(function () {\r\n      const contents = editor.node.contents(this)\r\n\r\n      for (let i = 0; i < contents.length; i++) {\r\n        if (contents[i].nodeType === Node.TEXT_NODE) {\r\n          contents[i].textContent = contents[i].textContent.replace(/\\u200B/g, '')\r\n        }\r\n      }\r\n\r\n      $(this).replaceWith(this.innerHTML)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Enter at the end of a block tag.\r\n   */\r\n  function _endEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let default_tag\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      if (_isAtEnd(marker, deep_parent)) {\r\n        default_tag = editor.html.defaultTag()\r\n\r\n        if(!shift) {\r\n          if (default_tag) {\r\n            $(deep_parent).after(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n          }\r\n          else {\r\n            $(deep_parent).after(`${FE.MARKERS}<br>`)\r\n          }\r\n        }\r\n        else {\r\n          $(marker).replaceWith('<br>' + FE.MARKERS);\r\n        }\r\n\r\n        $(marker).remove()\r\n\r\n        return false\r\n      }\r\n\r\n      _middleEnter(marker, shift, quote)\r\n\r\n      return false\r\n\r\n    }\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n      default_tag = editor.html.defaultTag()\r\n\r\n      if (!default_tag || !editor.node.isElement(marker.parentNode)) {\r\n        if (marker.previousSibling && !$(marker.previousSibling).is('br') && !marker.nextSibling) {\r\n          $(marker).replaceWith(`<br>${FE.MARKERS}<br>`)\r\n        }\r\n        else {\r\n          $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n        }\r\n      }\r\n      else {\r\n        $(marker).replaceWith(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n    }\r\n\r\n    // There is a parent.\r\n    else {\r\n\r\n      // Block tag parent.\r\n      let c_node = marker\r\n      let str = ''\r\n\r\n      if (deep_parent.tagName == 'PRE' && !marker.nextSibling) {\r\n        shift = true;\r\n      }\r\n\r\n      if (!editor.node.isBlock(deep_parent) || shift) {\r\n        str = '<br/>'\r\n      }\r\n\r\n      let c_str = ''\r\n      let o_str = ''\r\n\r\n      default_tag = editor.html.defaultTag()\r\n      let open_default_tag = ''\r\n      let close_default_tag = ''\r\n\r\n      if (default_tag && editor.node.isBlock(deep_parent)) {\r\n        open_default_tag = `<${default_tag}>`\r\n        close_default_tag = `</${default_tag}>`\r\n\r\n        if (deep_parent.tagName === default_tag.toUpperCase()) {\r\n          open_default_tag = editor.node.openTagString($(deep_parent).clone().removeAttr('id').get(0))\r\n        }\r\n      }\r\n\r\n      do {\r\n        c_node = c_node.parentNode\r\n\r\n        // Shift condition.\r\n        if (!shift || c_node !== deep_parent || shift && !editor.node.isBlock(deep_parent)) {\r\n          c_str += editor.node.closeTagString(c_node)\r\n\r\n          // Open str when there is a block parent.\r\n          if (c_node === deep_parent && editor.node.isBlock(deep_parent)) {\r\n            o_str = open_default_tag + o_str\r\n          }\r\n          else {\r\n            const cls = (c_node.tagName === 'A' || editor.node.hasClass(c_node, 'fa')) && _isAtEnd(marker, c_node) ? 'fr-to-remove' : ''\r\n            o_str = editor.node.openTagString($(c_node).clone().addClass(cls).get(0)) + o_str\r\n          }\r\n        }\r\n      } while (c_node !== deep_parent)\r\n\r\n      // Add BR if deep parent is block tag.\r\n      str = c_str + str + o_str + (marker.parentNode === deep_parent && editor.node.isBlock(deep_parent) ? '' : FE.INVISIBLE_SPACE) + FE.MARKERS\r\n\r\n      if (editor.node.isBlock(deep_parent) && !$(deep_parent).find('*').last().is('br')) {\r\n        $(deep_parent).append('<br/>')\r\n      }\r\n\r\n      $(marker).after('<span id=\"fr-break\"></span>')\r\n      $(marker).remove()\r\n\r\n      // Add a BR after to make sure we display the last line.\r\n      if ((!deep_parent.nextSibling || editor.node.isBlock(deep_parent.nextSibling)) && !editor.node.isBlock(deep_parent)) {\r\n        $(deep_parent).after('<br>')\r\n      }\r\n\r\n      let html\r\n\r\n      // No shift.\r\n      if (!shift && editor.node.isBlock(deep_parent)) {\r\n        html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + close_default_tag\r\n      }\r\n      else {\r\n        html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\r\n      }\r\n\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(deep_parent).replaceWith(html)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start at the beginning of a block tag.\r\n   */\r\n  function _startEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let default_tag\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/320\r\n    if (deep_parent && deep_parent.tagName === 'TABLE') {\r\n      $(deep_parent).find('td, th').first().prepend(marker)\r\n\r\n      return _startEnter(marker, shift, quote)\r\n    }\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      if (_isAtStart(marker, deep_parent)) {\r\n        if(!shift) {\r\n          default_tag = editor.html.defaultTag()\r\n\r\n          if (default_tag) {\r\n            $(deep_parent).before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n          }\r\n          else {\r\n            $(deep_parent).before(`${FE.MARKERS}<br>`)\r\n          }\r\n\r\n          $(marker).remove()\r\n\r\n          return false\r\n        }\r\n      }\r\n      else if (_isAtEnd(marker, deep_parent)) {\r\n        _endEnter(marker, shift, true)\r\n      }\r\n      else {\r\n        _middleEnter(marker, shift, true)\r\n      }\r\n    }\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n      default_tag = editor.html.defaultTag()\r\n\r\n      if (!default_tag || !editor.node.isElement(marker.parentNode)) {\r\n        $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n      }\r\n      else {\r\n        $(marker).replaceWith(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n    }\r\n    else {\r\n      default_tag = editor.html.defaultTag()\r\n      if (editor.node.isBlock(deep_parent)) {\r\n        if (deep_parent.tagName === 'PRE') {\r\n          shift = true\r\n        }\r\n        \r\n        if (shift) {\r\n          $(marker).remove()\r\n          $(deep_parent).prepend(`<br>${FE.MARKERS}`)\r\n        }\r\n        else if ((marker.nextSibling && marker.nextSibling.tagName == 'IMG') || (marker.nextSibling && marker.nextSibling.nextElementSibling && marker.nextSibling.nextElementSibling == 'IMG')) {\r\n          $(marker).replaceWith('<' + editor.html.defaultTag() + '>' + FE.MARKERS + '<br></' + editor.html.defaultTag() + '>');\r\n        }\r\n        else if (editor.node.isEmpty(deep_parent, true)) {\r\n\r\n          return _endEnter(marker, shift, quote)\r\n        }\r\n        else if (!editor.opts.keepFormatOnDelete && deep_parent.tagName !== 'DIV' && editor.html.defaultTag() !== 'div') {\r\n          $(deep_parent).before(`${editor.node.openTagString($(deep_parent).clone().removeAttr('id').get(0))}<br>${editor.node.closeTagString(deep_parent)}`)\r\n        } else if ((!editor.opts.keepFormatOnDelete && deep_parent.tagName === 'DIV') || editor.html.defaultTag()  === 'div') {\r\n          $(deep_parent).before('<' + editor.html.defaultTag() + '><br></' + editor.html.defaultTag() + '>');\r\n        }\r\n        \r\n        else {\r\n          let tmp = marker\r\n          let str = FE.INVISIBLE_SPACE\r\n\r\n          // Look up to all parents.\r\n          while (tmp !== deep_parent && !editor.node.isElement(tmp)) {\r\n            tmp = tmp.parentNode\r\n            str = editor.node.openTagString(tmp) + str + editor.node.closeTagString(tmp)\r\n          }\r\n\r\n          $(deep_parent).before(str)\r\n        }\r\n      }\r\n      else {\r\n        $(deep_parent).before('<br>')\r\n      }\r\n\r\n      $(marker).remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enter at the middle of a block tag.\r\n   */\r\n  function _middleEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n\r\n      // Default tag is not enter.\r\n      if (editor.html.defaultTag() && marker.parentNode === editor.el) {\r\n        $(marker).replaceWith(`<${editor.html.defaultTag()}>${FE.MARKERS}<br></${editor.html.defaultTag()}>`)\r\n      }\r\n      else {\r\n\r\n        // Add a BR after to make sure we display the last line.\r\n        if (!marker.nextSibling || editor.node.isBlock(marker.nextSibling)) {\r\n          $(marker).after('<br>')\r\n        }\r\n\r\n        $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n      }\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3392\r\n    else if ((marker.previousSibling && marker.previousSibling.tagName == 'IMG') || (marker.nextSibling && marker.nextSibling.tagName == 'IMG')) {\r\n      $(marker).replaceWith('<' + editor.html.defaultTag() + '>' + FE.MARKERS + '<br></' + editor.html.defaultTag() + '>');\r\n    }\r\n    // There is a parent.\r\n    else {\r\n\r\n      // Block tag parent.\r\n      let c_node = marker\r\n      let str = ''\r\n\r\n      if (deep_parent.tagName === 'PRE') {\r\n        shift = true\r\n      }\r\n\r\n      if (!editor.node.isBlock(deep_parent) || shift) {\r\n        str = '<br>'\r\n      }\r\n\r\n      let c_str = ''\r\n      let o_str = ''\r\n\r\n      do {\r\n        const tmp = c_node\r\n        c_node = c_node.parentNode\r\n\r\n        // Move marker after node it if is empty and we are in quote.\r\n        if (deep_parent.tagName === 'BLOCKQUOTE' && editor.node.isEmpty(tmp) && !editor.node.hasClass(tmp, 'fr-marker')) {\r\n          if ($(tmp).contains(marker)) {\r\n            $(tmp).after(marker)\r\n          }\r\n        }\r\n\r\n        // If not at end or start of element in quote.\r\n        if (!(deep_parent.tagName === 'BLOCKQUOTE' && (_isAtEnd(marker, c_node) || _isAtStart(marker, c_node)))) {\r\n\r\n          // 1. No shift.\r\n          // 2. c_node is not deep parent.\r\n          // 3. Shift and deep parent is not block tag.\r\n          if (!shift || c_node !== deep_parent || shift && !editor.node.isBlock(deep_parent)) {\r\n            c_str += editor.node.closeTagString(c_node)\r\n\r\n            const cls = ((c_node.tagName == 'A' && _isAtEnd(marker, c_node)) || editor.node.hasClass(c_node, 'fa')) ? 'fr-to-remove' : ''\r\n            o_str = editor.node.openTagString($(c_node).clone().addClass(cls).removeAttr('id').get(0)) + o_str\r\n          }\r\n          else if (deep_parent.tagName == 'BLOCKQUOTE' && shift) {\r\n            c_str = '';\r\n            o_str = '';\r\n          }\r\n        }\r\n      } while (c_node !== deep_parent)\r\n\r\n      // We should add an invisible space if:\r\n      // 1. parent node is not deep parent and block tag.\r\n      // 2. marker has no next sibling.\r\n      const add =\r\n        deep_parent === marker.parentNode && editor.node.isBlock(deep_parent) ||\r\n        marker.nextSibling\r\n\r\n\r\n      if (deep_parent.tagName === 'BLOCKQUOTE') {\r\n        if (marker.previousSibling && editor.node.isBlock(marker.previousSibling) && marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n          $(marker.nextSibling).after(marker)\r\n\r\n          if (marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n            $(marker.nextSibling).remove()\r\n          }\r\n        }\r\n        if (shift) {\r\n          str = c_str + str + FE.MARKERS + o_str;\r\n        }\r\n        else {\r\n          const default_tag = editor.html.defaultTag()\r\n          str = `${c_str + str + (default_tag ? `<${default_tag}>` : '') + FE.MARKERS}<br>${default_tag ? `</${default_tag}>` : ''}${o_str}`\r\n        }\r\n      }\r\n      else {\r\n        str = c_str + str + o_str + (add ? '' : FE.INVISIBLE_SPACE) + FE.MARKERS\r\n      }\r\n\r\n      $(marker).replaceWith('<span id=\"fr-break\"></span>')\r\n      let html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(deep_parent).replaceWith(html)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do enter.\r\n   */\r\n  function enter(shift) {\r\n    // Add a marker in HTML.\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return true\r\n    }\r\n\r\n    // Do not allow edit inside contenteditable=\"false\".\r\n    var p_node = marker.parentNode;\r\n\r\n    while (p_node && !editor.node.isElement(p_node)) {\r\n      if (p_node.getAttribute('contenteditable') === 'false') {\r\n        $(marker).replaceWith(FE.MARKERS);\r\n        editor.selection.restore();\r\n        return false;\r\n      }\r\n      else if (p_node.getAttribute('contenteditable') === 'true') {\r\n        break;\r\n      }\r\n      p_node = p_node.parentNode;\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    let quote = false\r\n\r\n    if ($(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0) {\r\n      //shift = false\r\n      quote = true\r\n    }\r\n\r\n    if ($(marker).parentsUntil(editor.$el, 'TD, TH').length) {\r\n      quote = false\r\n    }\r\n\r\n    // At the end.\r\n    if (_atEnd(marker)) {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._endEnter(marker)\r\n      }\r\n      else {\r\n        _endEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    // At start.\r\n    else if (_atStart(marker)) {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._startEnter(marker)\r\n      }\r\n      else {\r\n        _startEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    // At middle.\r\n    else {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._middleEnter(marker)\r\n      }\r\n      else {\r\n        _middleEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    _cleanNodesToRemove()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n      editor.spaces.normalizeAroundCursor()\r\n    }\r\n\r\n    editor.selection.restore()\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2261\r\n    // scroll to the bottom if editor el's height is more than viewport height\r\n    let windowHeight = editor.o_win.innerHeight\r\n    if (editor.$oel[0].offsetHeight > windowHeight) {\r\n      const scrollPosition = editor.helpers.scrollTop()\r\n      let current_block = editor.selection.blocks()\r\n      if (current_block && current_block.length > 0 && current_block[0].offsetTop) {\r\n        let { offsetTop } = current_block[0]\r\n        if (offsetTop - scrollPosition > windowHeight - 100) {\r\n          editor.o_win.scroll(0, offsetTop - windowHeight + 120)\r\n        } else if (offsetTop - scrollPosition < 0) {\r\n          editor.o_win.scroll(0, offsetTop - 20)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    enter,\r\n    backspace,\r\n    del,\r\n    isAtEnd: _isAtEnd,\r\n    isAtStart: _isAtStart\r\n  }\r\n}\r\n","import FE from\"../../editor.js\";FE.MODULES.data=function(A){function t(A){return A}function n(A){if(!A)return A;let n=\"\";const B=t(\"charCodeAt\"),D=t(\"fromCharCode\");let o=u.indexOf(A[0]);for(let t=1;t<A.length-2;t++){const r=C(++o);let i=A[B](t),c=\"\";for(;/[0-9-]/.test(A[t+1]);)c+=A[++t];c=parseInt(c,10)||0,i=e(i,r,c),i^=o-1&31,n+=String[D](i)}return n}function C(A){const t=A.toString();let n=0;for(let A=0;A<t.length;A++)n+=parseInt(t.charAt(A),10);return n>10?n%9+1:n}function e(A,t,n){let C=Math.abs(n);for(;C-- >0;)A-=t;return n<0&&(A+=123),A}function B(t){return t&&\"block\"!==t.css(\"display\")?(t.remove(),!0):t&&0===A.helpers.getPX(t.css(\"height\"))?(t.remove(),!0):!(!t||\"absolute\"!==t.css(\"position\")&&\"fixed\"!==t.css(\"position\"))&&(t.remove(),!0)}function D(t){return t&&0===A.$box.find(t).length}function o(){return B(g)||B(b)||D(g)||D(b)}function r(){if(w>10&&(A[t(m(\"0ppecjvc==\"))](),setTimeout(()=>{h.FE=null},10)),!A.$box)return!1;A.$wp.prepend(m(t(m(G)))),g=A.$wp.find(\"> div\").first(),b=g.find(\"> a\"),\"rtl\"===A.opts.direction&&g.css(\"left\",\"auto\").css(\"right\",0).attr(\"direction\",\"rtl\"),w++}function i(A){let t=m(\"9qqG-7amjlwq==\"),n=m(\"KA3B3C2A6D1D5H5H1A3==\"),C=m(\"3B9B3B5F3C4G3E3==\"),e=m(\"QzbzvxyB2yA-9m==\"),B=m(\"ji1kacwmgG5bc==\"),D=m(\"nmA-13aogi1A3c1jd==\"),o=m(\"BA9ggq==\"),r=m(\"emznbjbH3fij==\"),i=m(\"tkC-22d1qC-13sD1wzF-7==\"),c=m(\"tA3jjf==\"),E=m(\"1D1brkm==\"),f=[t,n,C,e,B,D,o,r,i,c,E];for(let t=0;t<f.length;t++)if(String.prototype.endsWith||(String.prototype.endsWith=function(A,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-A.length,t)===A}),A.endsWith(f[t]))return!0;return!1}function c(A){const t=(m(A)||\"\").split(\"|\");return 4===t.length&&\"V3\"===t[0]?[t[1],t[3],t[2]]:[null,null,\"\"]}function E(A){return null===A||(0==A.indexOf(\"TRIAL\")?(A=new Date(A.replace(/TRIAL/,\"\")),new Date(A)<new Date&&(d=F,!0)):new Date(A)<new Date(m(H)))}function f(){const A=m(t(a)),n=m(t(\"tzgatD-13eD1dtdrvmF3c1nrC-7saQcdav==\")).split(\".\");try{return window.parent.document.querySelector(A)&&window[n[1]][n[2]]}catch(A){return!1}}function s(){let n=A.opts.key||[\"\"];const C=m(t(\"ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9==\"));\"string\"==typeof n&&(n=[n]),A.ul=!0;let e=!1,B=0;for(let C=0;C<n.length;C++){const D=c(n[C]),o=D[2],r=m(t(m(\"LGnD1KNZf1CPBYCAZB-8F3UDSLLSG1VFf1A3C2==\")));if(o===r||o.indexOf(p,o.length-p.length)>=0||i(p)||f()){if(!(E(D[1])&&(p||\"\").length>0)||i(p)||f()){A.ul=!1;break}e=!0,G=d,B=D[0]||-1}}const D=new Image;A.ul===!0&&(r(),D.src=e?`${t(m(C))}e=${B}`:`${t(m(C))}u`),A.ul===!0&&(A.events.on(\"contentChanged\",()=>{o()&&r()}),A.events.on(\"html.get\",function(A){return A+m(l)})),A.events.on(\"html.set\",function(){var t=A.el.querySelector('[data-f-id=\"pbf\"]');t&&h(t).remove()}),A.events.on(\"destroy\",()=>{g&&g.length&&g.remove()},!0)}const h=A.$,u=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";let d=\"sC-7OB2fwhVC4vsG-7ohPA4ZD4D-8f1J3stzB-11bFE2FC1A3NB2IF1HE1TH4WB8eB-11zVG2F3I3yYB5ZG4CB2DA15CC5AD3F1A1KG1oLA10B1A6wQF1H3vgale2C4F4XA2qc2A5D5B3pepmriKB3OE1HD1fUC10pjD-11E-11TB4YJ3bC-16zE-11yc1B2CE2BC3jhjKC1pdA-21OA6C1D5B-8vF4QA11pD6sqf1C3lldA-16BD4A2H3qoEA7bB-16rmNH5H1F1vSB7RE2A3TH4YC5A5b1A4d1B3whepyAC3AA2zknC3mbgf1SC4WH4PD8TC5ZB2C3H3jb2A5ZA2EF2aoFC5qqHC4B1H1zeGA7UA5RF4TA29TA6ZC4d1C3hyWA10A3rBB2E3decorationRD3QC10UD3E6E6ZD2F3F3fme2E5uxxrEC9C3E4fB-11azhHB1LD7D6VF4VVTPC6b1C4TYG3qzDD6B3B3AH4I2H2kxbHE1JD1yihfd1QD6WB1D4mhrc1B5rvFG3A14A7cDA2OC1AA1JB5zC-16KA6WB4C-8wvlTB5A5lkZB2C2C7zynBD2D2bI-7C-21d1HE2cubyvPC8A6VB3aroxxZE4C4F4e1I2BE1WjdifH1H4A14NA1GB1YG-10tWA3A14A9sVA2C5XH2A29b2A6gsleGG2jaED2D-13fhE1OA8NjwytyTD4e1sc1D-16ZC3B5C-9e1C2FB6EFF5B2C2JH4E1C2tdLE5A3UG4G-7b2D3B4fA-9oh1G3kqvB4AG3ibnjcAC6D2B1cDA9KC2QA6bRC4VA30RB8hYB2A4A-8h1A21A2B2==\";const F=\"7D4YH4fkhHB3pqDC3H2E1fkMD1IB1NF1D3QD9wB5rxqlh1A8c2B4ZA3FD2AA6FB5EB3jJG4D2J-7aC-21GB6PC5RE4TC11QD6XC4XE3XH3mlvnqjbaOA2OC2BE6A1fmI-7ujwbc1G5f1F3e1C11mXF4owBG3E1yD1E4F1D2D-8B-8C-7yC-22HD1MF5UE4cWA3D8D6a1B2C3H3a3I3sZA4B3A2akfwEB3xHD5D1F1wIC11pA-16xdxtVI2C9A6YC4a1A2F3B2GA6B4C3lsjyJB1eMA1D-11MF5PE4ja1D3D7byrf1C3e1C7D-16lwqAF3H2A1B-21wNE1MA1OG1HB2A-16tSE5UD4RB3icRA4F-10wtwzBB3E1C3CC2DA8LA2LA1EB1kdH-8uVB7decorg1J2B7B6qjrqGI2J1C6ijehIB1hkemC-13hqkrH4H-7QD6XF5XF3HLNAC3CB2aD2CD2KB10B4ycg1A-8KA4H4B11jVB5TC4yqpB-21pd1E4pedzGB6MD5B3ncB-7MA4LD2JB6PD5uH-8TB9C7YD5XD2E3I3jmiDB3zeimhLD8E2F2JC1H-9ivkPC5lG-10SB1D3H3A-21rc1A3d1E3fsdqwfGA2KA1OrC-22LA6D1B4afUB16SC7AitC-8qYA11fsxcajGA15avjNE2A-9h1hDB16B9tPC1C5F5UC1G3B8d2A5d1D4RnHJ3C3JB5D3ucMG1yzD-17hafjC-8VD3yWC6e1YD2H3ZE2C8C5oBA3H3D2vFA4WzJC4C2i1A-65fNB8afWA1H4A26mvkC-13ZB3E3h1A21BC4eFB2GD2AA5ghqND2A2B2==\",l=\"qD2H-9G3ioD-17qA1tE1B-8qI3A4hA-13C-11E2C1njfldD1E6pg1C-8sC3hfbkcD2G3stC-22gqgB3G2B-7vtoA4nweeD1A31A15B9uC-16A1F5dkykdc1B8dE-11bA3F2D3A9gd1E7F2tlI-8H-7vtxB2A5B2C3B2F2B5A6ldbyC4iqC-22D-17E-13mA3D2dywiB3oxlvfC1H4C2TjqbzlnI3ntB4E3qA2zaqsC6D3pmnkoE3C6D5wvuE3bwifdhB6hch1E4xibD-17dmrC1rG-7pntnF6nB-8F1D2A11C8plrkmF2F3MC-16bocqA2WwA-21ayeA1C4d1isC-22rD-13D6DfjpjtC2E6hB2G2G4A-7D2==\",a=\"MekC-11nB-8tIzpD7pewxvzC6mD-16xerg1==\",H=\"lC4B3A3B2B5A1C2E4G1A2==\";let G=\"sC-7OB2fwhVC4vsG-7ohPA4ZD4D-8f1J3stzB-11bFE2EE1MA2ND1KD1IE4cA-21pSD2D5ve1G3h1A8b1E5ZC3CD2FA16mC5OC5E1hpnG1NA10B1D7hkUD4I-7b2C3C5nXD2E3F3whidEC2EH3GI2mJE2E2bxci1WA10VC7pllSG2F3A7xd1A4ZC3DB2aaeGA2DE4H2E1j1ywD-13FD1A3VE4WA3D8C6wuc1A2hf1B5B7vnrrjA1B9ic1mpbD1oMB1iSB7rWC4RI4G-7upB6jd1A2F3H2EA4FD3kDF4A2moc1anJD1TD4VI4b2C7oeQF4c1E3XC7ZA3C3G3uDB2wGB6D1JC4D1JD4C1hTE6QC5pH4pD3C-22D7c1A3textAA4gdlB2mpozkmhNC1mrxA3yWA5edhg1I2H3B7ozgmvAI3I2B5GD1LD2RSNH1KA1XA5SB4PA3sA9tlmC-9tnf1G3nd1coBH4I2I2JC3C-16LE6A1tnUA3vbwQB1G3f1A20a3A8a1C6pxAB2eniuE1F3kH2lnjB2hB-16XA5PF1G4zwtYA5B-11mzTG2B9pHB3BE2hGH3B3B2cMD5C1F1wzPA8E7VG5H5vD3H-7C8tyvsVF2I1G2A5fE3bg1mgajoyxMA4fhuzSD8aQB2B4g1A20ukb1A4B3F3GG2CujjanIC1ObiB11SD1C5pWC1D4YB8YE5FE-11jXE2F-7jB4CC2G-10uLH4E1C2tA-13yjUH5d1H1A7sWD5E4hmjF-7pykafoGA16hDD4joyD-8OA33B3C2tC7cRE4SA31a1B8d1e2A4F4g1A2A22CC5zwlAC2C1A12==\";const p=function(){let A=0,t=document.domain;const n=t.split(\".\"),C=`_gd${(new Date).getTime()}`;for(;A<n.length-1&&document.cookie.indexOf(`${C}=${C}`)===-1;)t=n.slice(-1-++A).join(\".\"),document.cookie=`${C}=${C};domain=${t};`;return document.cookie=`${C}=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${t};`,(t||\"\").replace(/(^\\.*)|(\\.*$)/g,\"\")}(),m=t(n);let g,b,w=0;return{_init:s}};","import FE from '../../editor.js'\r\n\r\nFE.MODULES.edit = function (editor) {\r\n\r\n  /**\r\n   * Disable editing design.\r\n   */\r\n  function disableDesign() {\r\n    if (editor.browser.mozilla) {\r\n      try {\r\n        editor.doc.execCommand('enableObjectResizing', false, 'false')\r\n        editor.doc.execCommand('enableInlineTableEditing', false, 'false')\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    if (editor.browser.msie) {\r\n      try {\r\n        editor.doc.body.addEventListener('mscontrolselect', (e) => {\r\n\r\n          // Add focus to the element when clicked\r\n          e.srcElement.focus()\r\n          return false\r\n        })\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n  }\r\n\r\n  let disabled = false\r\n\r\n  /**\r\n   * Add contneteditable attribute.\r\n   */\r\n  function on() {\r\n    if (editor.$wp) {\r\n      editor.$el.attr('contenteditable', true)\r\n      editor.$el.removeClass('fr-disabled').attr('aria-disabled', false)\r\n\r\n      disableDesign()\r\n    }\r\n    else if (editor.$el.is('a')) {\r\n      editor.$el.attr('contenteditable', true)\r\n    }\r\n\r\n    editor.events.trigger('edit.on', [], true)\r\n    disabled = false\r\n  }\r\n\r\n  /**\r\n   * Remove contenteditable attribute.\r\n   */\r\n  function off() {\r\n    editor.events.disableBlur()\r\n\r\n    if (editor.$wp) {\r\n      editor.$el.attr('contenteditable', false)\r\n      editor.$el.addClass('fr-disabled').attr('aria-disabled', true)\r\n    }\r\n    else if (editor.$el.is('a')) {\r\n      editor.$el.attr('contenteditable', false)\r\n    }\r\n\r\n    editor.events.trigger('edit.off')\r\n\r\n    editor.events.enableBlur()\r\n    disabled = true\r\n  }\r\n\r\n  function isDisabled() {\r\n    return disabled\r\n  }\r\n\r\n  function _init() {\r\n    // When there are multiple editor instances and shared toolbar make sure we can edit.\r\n    editor.events.on('focus', () => {\r\n      if (isDisabled()) {\r\n        editor.edit.off()\r\n      }\r\n      else {\r\n        editor.edit.on()\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    on,\r\n    off,\r\n    disableDesign,\r\n    isDisabled\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.format = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Create open tag string.\r\n   */\r\n  function _openTag(tag, attrs) {\r\n    let str = `<${tag}`\r\n\r\n    for (const key in attrs) {\r\n      if (Object.prototype.hasOwnProperty.call(attrs, key)) {\r\n        str += ` ${key}=\"${attrs[key]}\"`\r\n      }\r\n    }\r\n\r\n    str += '>'\r\n\r\n    return str\r\n  }\r\n\r\n  /**\r\n   * Create close tag string.\r\n   */\r\n  function _closeTag(tag) {\r\n    return `</${tag}>`\r\n  }\r\n\r\n  /**\r\n   * Create query for the current format.\r\n   */\r\n  function _query(tag, attrs) {\r\n    let selector = tag\r\n\r\n    for (const key in attrs) {\r\n      if (Object.prototype.hasOwnProperty.call(attrs, key)) {\r\n        if (key === 'id') {\r\n          selector += `#${attrs[key]}`\r\n        }\r\n        else if (key === 'class') {\r\n          selector += `.${attrs[key]}`\r\n        }\r\n        else {\r\n          selector += `[${key}=\"${attrs[key]}\"]`\r\n        }\r\n      }\r\n    }\r\n\r\n    return selector\r\n  }\r\n\r\n  /**\r\n   * Test matching element.\r\n   */\r\n  function _matches(el, selector) {\r\n    if (!el || el.nodeType !== Node.ELEMENT_NODE) {\r\n      return false\r\n    }\r\n\r\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\r\n  }\r\n\r\n  /**\r\n   * Apply format to the current node till we find a marker.\r\n   */\r\n  function _processNodeFormat(start_node, tag, attrs) {\r\n\r\n    // No start node.\r\n    if (!start_node) {\r\n      return\r\n    }\r\n\r\n    // Skip comments.\r\n    while (start_node.nodeType === Node.COMMENT_NODE) {\r\n      start_node = start_node.nextSibling\r\n    }\r\n\r\n    // No start node.\r\n    if (!start_node) {\r\n      return\r\n    }\r\n\r\n    // If we are in a block process starting with the first child.\r\n    if (editor.node.isBlock(start_node) && start_node.tagName !== 'HR') {\r\n      if (editor.node.hasClass(start_node.firstChild, 'fr-marker')) {\r\n        _processNodeFormat(start_node.firstChild.nextSibling, tag, attrs)\r\n      }\r\n      else {\r\n        _processNodeFormat(start_node.firstChild, tag, attrs)\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    // Create new element.\r\n    let $span = $(editor.doc.createElement(tag))\r\n    $span.attr(attrs)\r\n\r\n    $span.insertBefore(start_node)\r\n\r\n    // Start with the next sibling of the current node.\r\n    let node = start_node\r\n\r\n    // Search while there is a next node.\r\n    // Next node is not marker.\r\n    // Next node does not contain marker.\r\n    // Next node is not an inner list.\r\n    while (node && !$(node).hasClass('fr-marker') && $(node).find('.fr-marker').length === 0 && node.tagName !== 'UL' && node.tagName !== 'OL') {\r\n      const tmp = node\r\n\r\n      if (editor.node.isBlock(node) && start_node.tagName !== 'HR') {\r\n        _processNodeFormat(node.firstChild, tag, attrs)\r\n        return false\r\n      }\r\n\r\n      node = node.nextSibling\r\n      $span.append(tmp)\r\n    }\r\n\r\n    // If there is no node left at the right look at parent siblings.\r\n    if (!node) {\r\n      let p_node = $span.get(0).parentNode\r\n\r\n      while (p_node && !p_node.nextSibling && !editor.node.isElement(p_node)) {\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      if (p_node) {\r\n        let sibling = p_node.nextSibling\r\n\r\n        if (sibling) {\r\n\r\n          // Parent sibling is block then look next.\r\n          if (!editor.node.isBlock(sibling)) {\r\n            _processNodeFormat(sibling, tag, attrs)\r\n          }\r\n          else if (sibling.tagName === 'HR') {\r\n            _processNodeFormat(sibling.nextSibling, tag, attrs)\r\n          }\r\n          else {\r\n            _processNodeFormat(sibling.firstChild, tag, attrs)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Start processing child nodes if there is a marker or an inner list.\r\n    else if ($(node).find('.fr-marker').length || node.tagName === 'UL' || node.tagName === 'OL') {\r\n      _processNodeFormat(node.firstChild, tag, attrs)\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3390\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1770\r\n    else if (editor.browser.mozilla && editor.node.hasClass(node, 'fr-marker')) {\r\n      const selections = editor.selection.blocks()\r\n      const length = selections.length\r\n      let i\r\n\r\n      for (i = 0; i < length; i++) {\r\n        if (selections[i] != node.parentNode && selections[i].childNodes.length && selections[i].childNodes[0] != node.parentNode) {\r\n          node = selections[i].childNodes[1] || selections[i].childNodes[0]\r\n          $span = $(_openTag(tag, attrs)).insertBefore(node)\r\n          $span.append(node)\r\n        }\r\n      }\r\n    }\r\n\r\n    if ($span.is(':empty')) {\r\n      $span.remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply tag format.\r\n   */\r\n  function apply(tag, attrs) {\r\n    let i\r\n\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    // Selection is collapsed.\r\n    if (editor.selection.isCollapsed()) {\r\n      editor.markers.insert()\r\n      const $marker = editor.$el.find('.fr-marker')\r\n      $marker.replaceWith(_openTag(tag, attrs) + FE.INVISIBLE_SPACE + FE.MARKERS + _closeTag(tag))\r\n      editor.selection.restore()\r\n    }\r\n\r\n    // Selection is not collapsed.\r\n    else {\r\n      editor.selection.save()\r\n\r\n      // Check if selection can be deleted.\r\n      const start_marker = editor.$el.find('.fr-marker[data-type=\"true\"]').length && editor.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling\r\n\r\n      _processNodeFormat(start_marker, tag, attrs)\r\n\r\n      // Clean inner spans.\r\n      let inner_spans\r\n\r\n      do {\r\n        inner_spans = editor.$el.find(`${_query(tag, attrs)} > ${_query(tag, attrs)}`)\r\n\r\n        for (i = 0; i < inner_spans.length; i++) {\r\n          inner_spans[i].outerHTML = inner_spans[i].innerHTML\r\n        }\r\n      } while (inner_spans.length)\r\n\r\n      editor.el.normalize()\r\n\r\n      // Have markers inside the new tag.\r\n      const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n      for (i = 0; i < markers.length; i++) {\r\n        const $mk = $(markers[i])\r\n\r\n        if ($mk.data('type') === true) {\r\n          if (_matches($mk.get(0).nextSibling, _query(tag, attrs))) {\r\n            $mk.next().prepend($mk)\r\n          }\r\n        }\r\n        else if (_matches($mk.get(0).previousSibling, _query(tag, attrs))) {\r\n          $mk.prev().append($mk)\r\n        }\r\n      }\r\n\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split at current node the parents with tag.\r\n   */\r\n  function _split($node, tag, attrs, collapsed) {\r\n    if (!collapsed) {\r\n      let changed = false\r\n\r\n      if ($node.data('type') === true) {\r\n        while (editor.node.isFirstSibling($node.get(0)) && !$node.parent().is(editor.$el) && !$node.parent().is('ol') && !$node.parent().is('ul')) {\r\n          $node.parent().before($node)\r\n          changed = true\r\n        }\r\n      }\r\n      else if ($node.data('type') === false) {\r\n        while (editor.node.isLastSibling($node.get(0)) && !$node.parent().is(editor.$el) && !$node.parent().is('ol') && !$node.parent().is('ul')) {\r\n          $node.parent().after($node)\r\n          changed = true\r\n        }\r\n      }\r\n\r\n      if (changed) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    // Check if current node has parents which match our tag.\r\n    if ($node.parents(tag).length || typeof tag === 'undefined') {\r\n\r\n      let close_str = ''\r\n      let open_str = ''\r\n      let $p_node = $node.parent()\r\n      let p_html\r\n\r\n      // Do not split when parent is block.\r\n      if ($p_node.is(editor.$el) || editor.node.isBlock($p_node.get(0))) {\r\n        return false\r\n      }\r\n\r\n      // Check undefined so that we.\r\n      while (!editor.node.isBlock($p_node.parent().get(0)) && (typeof tag === 'undefined' || !_matches($p_node.get(0), _query(tag, attrs)))) {\r\n        close_str += editor.node.closeTagString($p_node.get(0))\r\n        open_str = editor.node.openTagString($p_node.get(0)) + open_str\r\n        $p_node = $p_node.parent()\r\n      }\r\n\r\n      // Node STR.\r\n      const node_str = $node.get(0).outerHTML\r\n\r\n      // Replace node with marker.\r\n      $node.replaceWith('<span id=\"mark\"></span>')\r\n\r\n      // Rebuild the HTML for the node.\r\n      p_html = $p_node.html().replace(/<span id=\"mark\"><\\/span>/, close_str + editor.node.closeTagString($p_node.get(0)) + open_str + node_str + close_str + editor.node.openTagString($p_node.get(0)) + open_str);\r\n      $p_node.replaceWith(editor.node.openTagString($p_node.get(0)) + p_html + editor.node.closeTagString($p_node.get(0)));\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Process node remove.\r\n   */\r\n  function _processNodeRemove($node, should_remove, tag, attrs) {\r\n\r\n    // Get contents.\r\n    const contents = editor.node.contents($node.get(0))\r\n\r\n    // Loop contents.\r\n    for (let i = 0; i < contents.length; i++) {\r\n      const node = contents[i]\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1954\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2644\r\n      // Remove node if it contains zero-width space character only.\r\n      if(node.innerHTML && node.innerHTML.charCodeAt() == 8203 && node.tagName.toLocaleLowerCase()==tag && node.childNodes.length < 2) {\r\n        node.outerHTML = node.innerHTML;\r\n      }\r\n\r\n      // We found a marker => change should_remove flag.\r\n      if (editor.node.hasClass(node, 'fr-marker')) {\r\n        should_remove = (should_remove + 1) % 2\r\n      }\r\n\r\n      // We should remove.\r\n      else if (should_remove) {\r\n\r\n        // Check if we have a marker inside it.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_remove = _processNodeRemove($(node), should_remove, tag, attrs)\r\n        }\r\n\r\n        // Remove everything starting with the most inner nodes which match the current selector.\r\n        else {\r\n\r\n          const nodes = $(node).find(tag || '*:not(br)');\r\n\r\n          for (let j = nodes.length - 1; j >= 0; j--) {\r\n            const nd = nodes[j]\r\n\r\n            if (!editor.node.isBlock(nd) && !editor.node.isVoid(nd) && (typeof tag === 'undefined' || _matches(nd, _query(tag, attrs)))) {\r\n              if (!editor.node.hasClass(nd, 'fr-clone')) {\r\n                nd.outerHTML = nd.innerHTML\r\n              }\r\n            }\r\n            else if (editor.node.isBlock(nd) && typeof tag === 'undefined' && node.tagName !== 'TABLE') {\r\n              editor.node.clearAttributes(nd)\r\n            }\r\n          }\r\n\r\n          // Check inner nodes.\r\n          if (typeof tag === 'undefined' && node.nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(node) || _matches(node, _query(tag, attrs))) {\r\n            if (!editor.node.isBlock(node)) {\r\n              if (!editor.node.hasClass(node, 'fr-clone')) {\r\n                node.outerHTML = node.innerHTML;\r\n              }\r\n            }\r\n          }\r\n\r\n          // Remove formatting from block nodes.\r\n          else if (typeof tag === 'undefined' && node.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(node) && node.tagName !== 'TABLE') {\r\n            editor.node.clearAttributes(node)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // There is a marker.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_remove = _processNodeRemove($(node), should_remove, tag, attrs)\r\n        }\r\n      }\r\n    }\r\n\r\n    return should_remove\r\n  }\r\n\r\n  /**\r\n   * Remove tag.\r\n   */\r\n  function remove(tag, attrs) {\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    const collapsed = editor.selection.isCollapsed()\r\n    editor.selection.save()\r\n\r\n    // Split at start and end marker.\r\n    let reassess = true\r\n\r\n    while (reassess) {\r\n      reassess = false\r\n      const markers = editor.$el.find('.fr-marker')\r\n\r\n      for (let i = 0; i < markers.length; i++) {\r\n        const $marker = $(markers[i])\r\n        let $clone = null\r\n\r\n        if (!$marker.attr('data-cloned') && !collapsed) {\r\n          $clone = $marker.clone().removeClass('fr-marker').addClass('fr-clone')\r\n\r\n          if ($marker.data('type') && $marker.data('type').toString() === 'true') {\r\n            $marker.attr('data-cloned', true).after($clone)\r\n          }\r\n          else {\r\n            $marker.attr('data-cloned', true).before($clone)\r\n          }\r\n        }\r\n\r\n        if (_split($marker, tag, attrs, collapsed)) {\r\n          reassess = true\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove format between markers.\r\n    _processNodeRemove(editor.$el, 0, tag, attrs)\r\n\r\n    // Replace markers with their clones.\r\n    if (!collapsed) {\r\n      editor.$el.find('.fr-marker').remove()\r\n      editor.$el.find('.fr-clone').removeClass('fr-clone').addClass('fr-marker')\r\n    }\r\n\r\n    // Selection is collapsed => add invisible spaces.\r\n    if (collapsed) {\r\n      editor.$el.find('.fr-marker').before(FE.INVISIBLE_SPACE).after(FE.INVISIBLE_SPACE)\r\n    }\r\n\r\n    editor.html.cleanEmptyTags()\r\n    editor.el.normalize()\r\n    editor.selection.restore()\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2168\r\n    const anchorNode = editor.win.getSelection() && editor.win.getSelection().anchorNode\r\n\r\n    if (anchorNode) {\r\n      const blockParent = editor.node.blockParent(anchorNode)\r\n      const multiSelection = anchorNode.textContent.replace(/\\u200B/g, '').length ? true : false\r\n      const { startOffset, endOffset} = editor.win.getSelection().getRangeAt(0)\r\n\r\n      // Keep only one zero width space and remove all the other zero width spaces if selection consists of only zerowidth spaces.\r\n      if (!editor.selection.text().replace(/\\u200B/g, '').length) {\r\n        removeZeroWidth(blockParent, anchorNode)\r\n      }\r\n\r\n      const range = editor.win.getSelection().getRangeAt(0)\r\n\r\n      // Setting the range to the zerowidthspace index\r\n      if (anchorNode.nodeType === Node.TEXT_NODE) {\r\n        if (!multiSelection || (!editor.selection.text().length && startOffset === endOffset)) {\r\n          const newOffset = anchorNode.textContent.search(/\\u200B/g) + 1\r\n\r\n          // Fix for IE browser\r\n          if (editor.browser.msie) {\r\n            const tmprange = editor.doc.createRange()\r\n            editor.selection.get().removeAllRanges()\r\n            tmprange.setStart(anchorNode, newOffset)\r\n            tmprange.setEnd(anchorNode, newOffset)\r\n            editor.selection.get().addRange(tmprange)\r\n          } else {\r\n            range.setStart(anchorNode, newOffset)\r\n            range.setEnd(anchorNode, newOffset)\r\n          }\r\n        }\r\n      } else {\r\n        let txtNodeToFocus\r\n        let tmpNode\r\n        let tmpIndex = 0\r\n        let tmpContents = $(anchorNode).contents()\r\n\r\n        // Fix for IE browser\r\n        if (editor.browser.msie) {\r\n          while ((tmpNode = tmpContents[tmpIndex])) {\r\n            if (tmpNode.nodeType === Node.TEXT_NODE && tmpNode.textContent.search(/\\u200B/g) >= 0) {\r\n              txtNodeToFocus = tmpNode\r\n            }\r\n\r\n            tmpIndex ++\r\n          }\r\n\r\n          txtNodeToFocus = $(txtNodeToFocus)\r\n        }\r\n        else {\r\n          txtNodeToFocus = tmpContents.filter(function (tmpNode) {\r\n            return (tmpNode.nodeType === Node.TEXT_NODE && tmpNode.textContent.search(/\\u200B/g) >= 0)\r\n          })\r\n        }\r\n\r\n        if (txtNodeToFocus.length) {\r\n          const newOffset = txtNodeToFocus.text().search(/\\u200B/g) + 1\r\n          range.setStart(txtNodeToFocus.get(0), newOffset)\r\n          range.setEnd(txtNodeToFocus.get(0), newOffset)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Removes zerowidth spaces and keeps only one zero width space for the marker.\r\n  function removeZeroWidth(blockParent, compareNode) {\r\n    if (blockParent && compareNode) {\r\n      if (blockParent.isSameNode(compareNode)) {\r\n        \r\n        // keeping only one zerowidth space if there are multiple\r\n        blockParent.textContent = blockParent.textContent.replace(/\\u200B(?=.*\\u200B)/g, '')\r\n      } else {\r\n        if (blockParent.nodeType === Node.TEXT_NODE)\r\n          blockParent.textContent = blockParent.textContent.replace(/\\u200B/g, '')\r\n      }\r\n      if (!blockParent.childNodes.length) {\r\n        return false\r\n      } else if (Array.isArray(blockParent.childNodes)) {\r\n        blockParent.childNodes.forEach(function (node) {\r\n          removeZeroWidth(node, compareNode)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle format.\r\n   */\r\n  function toggle(tag, attrs) {\r\n    if (is(tag, attrs)) {\r\n      remove(tag, attrs)\r\n    }\r\n    else {\r\n      apply(tag, attrs)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean format.\r\n   */\r\n  function _cleanFormat(elem, prop) {\r\n    const $elem = $(elem)\r\n    $elem.css(prop, '')\r\n\r\n    if ($elem.attr('style') === '') {\r\n      $elem.replaceWith($elem.html())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Filter spans with specific property.\r\n   */\r\n  function _filterSpans(elem, prop) {\r\n    return $(elem).attr('style').indexOf(`${prop}:`) === 0 || $(elem).attr('style').indexOf(`;${prop}:`) >= 0 || $(elem).attr('style').indexOf(`; ${prop}:`) >= 0\r\n  }\r\n\r\n  /**\r\n   * Apply inline style.\r\n   */\r\n  function applyStyle(prop, val) {\r\n\r\n    let i\r\n    let $marker\r\n    let $span = null\r\n\r\n    // Selection is collapsed.\r\n    if (editor.selection.isCollapsed()) {\r\n      editor.markers.insert()\r\n      $marker = editor.$el.find('.fr-marker')\r\n      const $parent = $marker.parent()\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1084\r\n      if (editor.node.openTagString($parent.get(0)) === `<span style=\"${prop}: ${$parent.css(prop)};\">`) {\r\n        if (editor.node.isEmpty($parent.get(0))) {\r\n          $span = $(editor.doc.createElement('span')).attr('style', `${prop}: ${val};`).html(`${FE.INVISIBLE_SPACE}${FE.MARKERS}`)\r\n          $parent.replaceWith($span)\r\n        }\r\n\r\n        // We should get out of the current span with the same props.\r\n        else {\r\n          const x = {}\r\n          x['style*'] = `${prop}:`\r\n          _split($marker, 'span', x, true)\r\n          $marker = editor.$el.find('.fr-marker')\r\n\r\n          if (val) {\r\n            $span = $(editor.doc.createElement('span')).attr('style', `${prop}: ${val};`).html(`${FE.INVISIBLE_SPACE}${FE.MARKERS}`)\r\n            $marker.replaceWith($span)\r\n          }\r\n          else {\r\n            $marker.replaceWith(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          }\r\n        }\r\n\r\n        editor.html.cleanEmptyTags()\r\n      }\r\n      else if (editor.node.isEmpty($parent.get(0)) && $parent.is('span')) {\r\n        $marker.replaceWith(FE.MARKERS)\r\n        $parent.css(prop, val)\r\n      }\r\n      else {\r\n        $span = $(`<span style=\"${prop}: ${val};\">${FE.INVISIBLE_SPACE}${FE.MARKERS}</span>`)\r\n        $marker.replaceWith($span)\r\n      }\r\n\r\n      // If we have a span, then split the parent nodes.\r\n      if ($span) {\r\n        _splitParents($span, prop, val)\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.save()\r\n\r\n      // When removing selection we should make sure we have selection outside of the first/last parent node.\r\n      // We also need to do this for U tags.\r\n      if (val === null || prop === 'color' && editor.$el.find('.fr-marker').parents('u, a').length > 0) {\r\n        const markers = editor.$el.find('.fr-marker')\r\n\r\n        for (i = 0; i < markers.length; i++) {\r\n          $marker = $(markers[i])\r\n\r\n          if ($marker.data('type') === true || $marker.data('type') === 'true') {\r\n            while (editor.node.isFirstSibling($marker.get(0)) && !$marker.parent().is(editor.$el) && !editor.node.isElement($marker.parent().get(0)) && !editor.node.isBlock($marker.parent().get(0))) {\r\n              $marker.parent().before($marker)\r\n            }\r\n          }\r\n          else {\r\n            while (editor.node.isLastSibling($marker.get(0)) && !$marker.parent().is(editor.$el) && !editor.node.isElement($marker.parent().get(0)) && !editor.node.isBlock($marker.parent().get(0))) {\r\n              $marker.parent().after($marker)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Check if selection can be deleted.\r\n      let start_marker = editor.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling\r\n\r\n      while (start_marker.firstChild) {\t\r\n        start_marker = start_marker.firstChild\t\r\n      }\r\n\r\n      const attrs = {\r\n        class: 'fr-unprocessed'\r\n      }\r\n\r\n      if (val) {\r\n        attrs.style = `${prop}: ${val};`\r\n      }\r\n      _processNodeFormat(start_marker, 'span', attrs)\r\n\r\n      editor.$el.find('.fr-marker + .fr-unprocessed').each(function () {\r\n        $(this).prepend($(this).prev())\r\n      })\r\n\r\n      editor.$el.find('.fr-unprocessed + .fr-marker').each(function () {\r\n        $(this).prev().append($(this))\r\n      })\r\n\r\n      // When em are being used keep them as the most inner props.\r\n      if ((val || '').match(/\\dem$/)) {\r\n        editor.$el.find('span.fr-unprocessed').removeClass('fr-unprocessed')\r\n      }\r\n\r\n      while (editor.$el.find('span.fr-unprocessed').length > 0) {\r\n        $span = editor.$el.find('span.fr-unprocessed').first().removeClass('fr-unprocessed')\r\n\r\n        // Look at parent node to see if we can merge with it.\r\n        $span.parent().get(0).normalize()\r\n\r\n        if ($span.parent().is('span') && $span.parent().get(0).childNodes.length === 1) {\r\n          $span.parent().css(prop, val)\r\n          const $child = $span\r\n          $span = $span.parent()\r\n          $child.replaceWith($child.html())\r\n        }\r\n\r\n        // Replace in reverse order to take care of the inner spans first.\r\n        const inner_spans = $span.find('span')\r\n\r\n        for (i = inner_spans.length - 1; i >= 0; i--) {\r\n          _cleanFormat(inner_spans[i], prop)\r\n        }\r\n\r\n        // Split parent nodes.\r\n        _splitParents($span, prop, val)\r\n      }\r\n    }\r\n\r\n    _normalize()\r\n  }\r\n\r\n  function _splitParents($span, prop, val) {\r\n    let i\r\n\r\n    // Look at parents with the same property.\r\n    let $outer_span = $span.parentsUntil(editor.$el, 'span[style]')\r\n    const to_remove = []\r\n\r\n    for (i = $outer_span.length - 1; i >= 0; i--) {\r\n      if (!_filterSpans($outer_span[i], prop)) {\r\n        to_remove.push($outer_span[i])\r\n      }\r\n    }\r\n\r\n    $outer_span = $outer_span.not(to_remove)\r\n\r\n    if ($outer_span.length) {\r\n      let c_str = ''\r\n      let o_str = ''\r\n      let ic_str = ''\r\n      let io_str = ''\r\n      let c_node = $span.get(0)\r\n\r\n      do {\r\n        c_node = c_node.parentNode\r\n\r\n        $(c_node).addClass('fr-split')\r\n\r\n        c_str += editor.node.closeTagString(c_node)\r\n        o_str = editor.node.openTagString($(c_node).clone().addClass('fr-split').get(0)) + o_str\r\n\r\n        // Inner close and open.\r\n        if ($outer_span.get(0) !== c_node) {\r\n          ic_str += editor.node.closeTagString(c_node)\r\n          io_str = editor.node.openTagString($(c_node).clone().addClass('fr-split').get(0)) + io_str\r\n        }\r\n      } while ($outer_span.get(0) !== c_node)\r\n\r\n      // Build breaking string.\r\n      const str = `${c_str + editor.node.openTagString($($outer_span.get(0)).clone().css(prop, val || '').get(0)) + io_str + $span.css(prop, '').get(0).outerHTML + ic_str}</span>${o_str}`\r\n      $span.replaceWith('<span id=\"fr-break\"></span>')\r\n      const html = $outer_span.get(0).outerHTML\r\n\r\n      // Replace the outer node.\r\n      $($outer_span.get(0)).replaceWith(html.replace(/<span id=\"fr-break\"><\\/span>/g, function () {\r\n\r\n        return str;\r\n      }));\r\n    }\r\n  }\r\n\r\n  function _normalize() {\r\n    let i\r\n\r\n    while (editor.$el.find('.fr-split:empty').length > 0) {\r\n      editor.$el.find('.fr-split:empty').remove()\r\n    }\r\n\r\n    editor.$el.find('.fr-split').removeClass('fr-split')\r\n\r\n    editor.$el.find('[style=\"\"]').removeAttr('style')\r\n    editor.$el.find('[class=\"\"]').removeAttr('class')\r\n\r\n    editor.html.cleanEmptyTags()\r\n\r\n    const $spans = editor.$el.find('span')\r\n    for (let k = $spans.length - 1; k >= 0; k--) {\r\n      const msp = $spans[k]\r\n\r\n      if (!msp.attributes || msp.attributes.length === 0) {\r\n        $(msp).replaceWith(msp.innerHTML)\r\n      }\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // Join current spans together if they are one next to each other.\r\n    const just_spans = editor.$el.find('span[style] + span[style]')\r\n\r\n    for (i = 0; i < just_spans.length; i++) {\r\n      const $x = $(just_spans[i])\r\n      const $p = $(just_spans[i]).prev()\r\n\r\n      if ($x.get(0).previousSibling === $p.get(0) && editor.node.openTagString($x.get(0)) === editor.node.openTagString($p.get(0))) {\r\n        $x.prepend($p.html())\r\n        $p.remove()\r\n      }\r\n    }\r\n\r\n    // Check if we have span(font-size) inside span(background-color).\r\n    // Then, make a split.\r\n    editor.$el.find('span[style] span[style]').each(function () {\r\n      if ($(this).attr('style').indexOf('font-size') >= 0) {\r\n        const $parent = $(this).parents('span[style]')\r\n\r\n        if ($parent.attr('style').indexOf('background-color') >= 0) {\r\n          $(this).attr('style', `${$(this).attr('style')};${$parent.attr('style')}`)\r\n          _split($(this), 'span[style]', {}, false)\r\n        }\r\n      }\r\n    })\r\n\r\n    editor.el.normalize()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Remove inline style.\r\n   */\r\n  function removeStyle(prop) {\r\n    applyStyle(prop, null)\r\n  }\r\n\r\n  /**\r\n   * Get the current state.\r\n   */\r\n  function is(tag, attrs) {\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    const range = editor.selection.ranges(0)\r\n    let el = range.startContainer\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE) {\r\n\r\n      // Search for node deeper.\r\n      if (el.childNodes.length > 0 && el.childNodes[range.startOffset]) {\r\n        el = el.childNodes[range.startOffset]\r\n      }\r\n    }\r\n\r\n    // If we are at the end of text node, then check next elements.\r\n    if (!range.collapsed && el.nodeType === Node.TEXT_NODE && range.startOffset === (el.textContent || '').length) {\r\n      while (!editor.node.isBlock(el.parentNode) && !el.nextSibling) {\r\n        el = el.parentNode\r\n      }\r\n\r\n      if (el.nextSibling) {\r\n        el = el.nextSibling\r\n      }\r\n    }\r\n\r\n\r\n    // Check first childs.\r\n    let f_child = el\r\n\r\n    while (f_child && f_child.nodeType === Node.ELEMENT_NODE && !_matches(f_child, _query(tag, attrs))) {\r\n      f_child = f_child.firstChild\r\n    }\r\n\r\n    if (f_child && f_child.nodeType === Node.ELEMENT_NODE && _matches(f_child, _query(tag, attrs))) {\r\n      return true\r\n    }\r\n\r\n\r\n    // Check parents.\r\n    let p_node = el\r\n\r\n    if (p_node && p_node.nodeType !== Node.ELEMENT_NODE) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    while (p_node && p_node.nodeType === Node.ELEMENT_NODE && p_node !== editor.el && !_matches(p_node, _query(tag, attrs))) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    if (p_node && p_node.nodeType === Node.ELEMENT_NODE && p_node !== editor.el && _matches(p_node, _query(tag, attrs))) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  return {\r\n    is,\r\n    toggle,\r\n    apply,\r\n    remove,\r\n    applyStyle,\r\n    removeStyle\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\r\n\r\nFE.MODULES.spaces = function (editor) {\r\n\r\n  function _normalizeNode(node, browser_way) {\r\n    const p_node = node.previousSibling\r\n    const n_node = node.nextSibling\r\n    let txt = node.textContent\r\n    const parent_node = node.parentNode\r\n    const enterTags = ['P', 'DIV', 'BR']\r\n    const tagOptsValues = [FE.ENTER_P, FE.ENTER_DIV, FE.ENTER_BR]\r\n\r\n    if (editor.html.isPreformatted(parent_node)) {\r\n      return\r\n    }\r\n\r\n    if (browser_way) {\r\n      txt = txt.replace(/[\\f\\n\\r\\t\\v ]{2,}/g, ' ')\r\n\r\n      // No node after.\r\n      if ((!n_node || n_node.tagName === 'BR' || editor.node.isBlock(n_node)) && (editor.node.isBlock(parent_node) || editor.node.isLink(parent_node) && !parent_node.nextSibling || editor.node.isElement(parent_node))) {\r\n        txt = txt.replace(/[\\f\\n\\r\\t\\v ]{1,}$/g, '')\r\n      }\r\n\r\n      if ((!p_node || p_node.tagName === 'BR' || editor.node.isBlock(p_node)) && (editor.node.isBlock(parent_node) || editor.node.isLink(parent_node) && !parent_node.previousSibling || editor.node.isElement(parent_node))) {\r\n        txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '')\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/3099\r\n      if (editor.node.isBlock(n_node) || editor.node.isBlock(p_node)) {\r\n        txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '');\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1767 .\r\n      if (txt === ' ' && ((p_node && editor.node.isVoid(p_node)) || (n_node && editor.node.isVoid(n_node))) && !((p_node && n_node && editor.node.isVoid(p_node)) || (n_node && p_node && editor.node.isVoid(n_node)))) {\r\n        txt = ''\r\n      }\r\n    }\r\n\r\n    // Collapse spaces when we have nested blocks.\r\n    if ((!p_node && editor.node.isBlock(n_node) || !n_node && editor.node.isBlock(p_node)) && editor.node.isBlock(parent_node) && parent_node !== editor.el) {\r\n      txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '')\r\n    }\r\n\r\n    // Convert all non breaking to breaking spaces.\r\n    if (!browser_way) {\r\n      txt = txt.replace(new RegExp(FE.UNICODE_NBSP, 'g'), ' ')\r\n    }\r\n\r\n    let new_text = ''\r\n\r\n    for (let t = 0; t < txt.length; t++) {\r\n\r\n      // Do not use unicodes next to void tags.\r\n      // If prev node and next node tags are same use unicode\r\n      if (txt.charCodeAt(t) == 32 && (t === 0 || new_text.charCodeAt(t - 1) == 32) && ((editor.opts.enter === FE.ENTER_BR || editor.opts.enter === FE.ENTER_DIV) && (p_node && p_node.tagName === 'BR' || n_node && n_node.tagName === 'BR') || (p_node && n_node && p_node.tagName === n_node.tagName) || !((p_node && n_node && editor.node.isVoid(p_node)) || (p_node && n_node && editor.node.isVoid(n_node))))) {\r\n        new_text += FE.UNICODE_NBSP\r\n      }\r\n      else {\r\n        new_text += txt[t]\r\n      }\r\n    }\r\n\r\n    // Ending spaces should be NBSP or spaces before block tags.\r\n    // 1. No node after. (and the parent node is block tag.)\r\n    // 2. Next block is block tag.\r\n    // 3. Next element has display block.\r\n    if (!n_node || n_node && editor.node.isBlock(n_node) || n_node && n_node.nodeType === Node.ELEMENT_NODE && editor.win.getComputedStyle(n_node) && editor.win.getComputedStyle(n_node).display === 'block') {\r\n\r\n      // OR(||) condition is for https://github.com/froala-labs/froala-editor-js-2/issues/1949\r\n      if (!editor.node.isVoid(p_node) || (p_node && enterTags.indexOf(p_node.tagName) !== -1 && tagOptsValues.indexOf(editor.opts.enter) !== -1)) {\r\n        new_text = new_text.replace(/ $/, FE.UNICODE_NBSP)\r\n      }\r\n    }\r\n\r\n    // Previous sibling is not void or block.\r\n    if (p_node && !editor.node.isVoid(p_node) && !editor.node.isBlock(p_node)) {\r\n      new_text = new_text.replace(/^\\u00A0([^ $])/, ' $1')\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1355.\r\n      if (new_text.length === 1 && new_text.charCodeAt(0) === 160 && n_node && !editor.node.isVoid(n_node) && !editor.node.isBlock(n_node)) {\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/683\r\n        // if new text is not surrounded by markers\r\n        if (!(editor.node.hasClass(p_node, 'fr-marker') && editor.node.hasClass(n_node, 'fr-marker'))) {\r\n          new_text = ' ';\r\n        }\r\n      }\r\n    }\r\n\r\n    // Convert middle nbsp to spaces.\r\n    if (!browser_way) {\r\n      new_text = new_text.replace(/([^ \\u00A0])\\u00A0([^ \\u00A0])/g, '$1 $2')\r\n    }\r\n\r\n    if (node.textContent !== new_text) {\r\n      node.textContent = new_text\r\n    }\r\n  }\r\n\r\n  function normalize(el, browser_way) {\r\n    if (typeof el === 'undefined' || !el) {\r\n      el = editor.el\r\n    }\r\n\r\n    if (typeof browser_way === 'undefined') {\r\n      browser_way = false\r\n    }\r\n\r\n    // Ignore contenteditable.\r\n    if (el.getAttribute && el.getAttribute('contenteditable') === 'false') {\r\n      return\r\n    }\r\n\r\n    if (el.nodeType === Node.TEXT_NODE) {\r\n      _normalizeNode(el, browser_way)\r\n    }\r\n    else if (el.nodeType === Node.ELEMENT_NODE) {\r\n      const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => {\r\n\r\n        // Store the current parent node.\r\n        let temp_node = node.parentNode\r\n\r\n        // Loop through the nodes to see if it is PRE tag, go to the highest parent until editable element.\r\n        while (temp_node && temp_node !== editor.el) {\r\n\r\n          if (temp_node.tagName === 'STYLE' || temp_node.tagName === 'IFRAME') {\r\n            return false\r\n          }\r\n\r\n          if (temp_node.tagName !== 'PRE') {\r\n\r\n            // Check next parent.\r\n            temp_node = temp_node.parentNode\r\n          }\r\n          else {\r\n\r\n            // If inside a PRE tag return false and move to next element.\r\n            return false\r\n          }\r\n        }\r\n\r\n        // If not PRE tag start matching for chars that need to be removed from all other html tags.\r\n        return node.textContent.match(/([ \\u00A0\\f\\n\\r\\t\\v]{2,})|(^[ \\u00A0\\f\\n\\r\\t\\v]{1,})|([ \\u00A0\\f\\n\\r\\t\\v]{1,}$)/g) !== null && !editor.node.hasClass(node.parentNode, 'fr-marker')\r\n      }), false)\r\n\r\n      while (walker.nextNode()) {\r\n        _normalizeNode(walker.currentNode, browser_way)\r\n      }\r\n    }\r\n  }\r\n\r\n  function normalizeAroundCursor() {\r\n    const nodes = []\r\n    const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n    // Get the deep parent node of each marker.\r\n    for (let i = 0; i < markers.length; i++) {\r\n      let node = null\r\n      const p_node = editor.node.blockParent(markers[i])\r\n\r\n      if (p_node) {\r\n        node = p_node\r\n      }\r\n      else {\r\n        node = markers[i]\r\n      }\r\n\r\n      let next_node = node.nextSibling\r\n      let prev_node = node.previousSibling\r\n\r\n      while (next_node && next_node.tagName === 'BR') {\r\n        next_node = next_node.nextSibling\r\n      }\r\n\r\n      while (prev_node && prev_node.tagName === 'BR') {\r\n        prev_node = prev_node.previousSibling\r\n      }\r\n\r\n      // Push current node, prev and next one.\r\n      if (node && nodes.indexOf(node) < 0) {\r\n        nodes.push(node)\r\n      }\r\n\r\n      if (prev_node && nodes.indexOf(prev_node) < 0) {\r\n        nodes.push(prev_node)\r\n      }\r\n\r\n      if (next_node && nodes.indexOf(next_node) < 0) {\r\n        nodes.push(next_node)\r\n      }\r\n    }\r\n\r\n    for (let j = 0; j < nodes.length; j++) {\r\n      normalize(nodes[j])\r\n    }\r\n  }\r\n\r\n  return {\r\n    normalize,\r\n    normalizeAroundCursor\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\r\n\r\nFE.INVISIBLE_SPACE = '&#8203;'\r\nFE.START_MARKER = `<span class=\"fr-marker\" data-id=\"0\" data-type=\"true\" style=\"display: none; line-height: 0;\">${FE.INVISIBLE_SPACE}</span>`\r\nFE.END_MARKER = `<span class=\"fr-marker\" data-id=\"0\" data-type=\"false\" style=\"display: none; line-height: 0;\">${FE.INVISIBLE_SPACE}</span>`\r\nFE.MARKERS = FE.START_MARKER + FE.END_MARKER\r\n\r\nFE.MODULES.markers = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Build marker element.\r\n   */\r\n  function _build(marker, id) {\r\n    const $span = $(editor.doc.createElement('SPAN'))\r\n    $span\r\n      .addClass('fr-marker')\r\n      .attr('data-id', id)\r\n      .attr('data-type', marker)\r\n      .attr('style', `display: ${editor.browser.safari ? 'none' : 'inline-block'}; line-height: 0;`)\r\n      .html(FE.INVISIBLE_SPACE)\r\n\r\n    return $span.get(0)\r\n  }\r\n\r\n  /**\r\n   * Place marker.\r\n   */\r\n  function place(range, marker, id) {\r\n    let mk\r\n    let contents\r\n    let sibling\r\n\r\n    try {\r\n      const boundary = range.cloneRange()\r\n      boundary.collapse(marker)\r\n\r\n      boundary.insertNode(_build(marker, id))\r\n\r\n      if (marker === true) {\r\n        mk = editor.$el.find(`span.fr-marker[data-type=\"true\"][data-id=\"${id}\"]`).get(0)\r\n        sibling = mk.nextSibling\r\n\r\n        // Clean empty spaces.\r\n        while (sibling && sibling.nodeType === Node.TEXT_NODE && sibling.textContent.length === 0) {\r\n          $(sibling).remove()\r\n          sibling = mk.nextSibling\r\n        }\r\n      }\r\n\r\n      if (marker === true && !range.collapsed) {\r\n\r\n        // Move markers outside of something like this:\r\n        // <p><strong>fooM</strong>bar</p>\r\n        while (!editor.node.isElement(mk.parentNode) && !sibling) {\r\n\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/2164\r\n          // Here as sibling is null if fr-marker is a child of a tag which dont have any text or child \r\n          // then code '$(mk.parentNode).after(mk)' will skip the node completely. This is unexpected in\r\n          // case of parentNode having fontawesome icon. As per the ticket only handling for fontawesome \r\n          // added using 'I' tag.\r\n          if (/\\bfa\\b/g.test(mk.parentNode.className) > -1 && mk.parentNode.tagName === 'I') {\r\n            $(mk.parentNode).before(mk)\r\n          }\r\n          else {\r\n            $(mk.parentNode).after(mk)  \r\n          }\r\n          sibling = mk.nextSibling\r\n        }\r\n\r\n        if (sibling && sibling.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(sibling) && sibling.tagName !== 'HR') {\r\n\r\n          // Place the marker deep inside the block tags.\r\n          contents = [sibling]\r\n\r\n          do {\r\n            sibling = contents[0]\r\n            contents = editor.node.contents(sibling)\r\n          } while (contents[0] && editor.node.isBlock(contents[0]))\r\n\r\n          $(sibling).prepend($(mk))\r\n        }\r\n      }\r\n\r\n      if (marker === false && !range.collapsed) {\r\n        mk = editor.$el.find(`span.fr-marker[data-type=\"false\"][data-id=\"${id}\"]`).get(0)\r\n        sibling = mk.previousSibling\r\n\r\n        if (sibling && sibling.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(sibling) && sibling.tagName !== 'HR') {\r\n\r\n          // Place the marker deep inside the block tags.\r\n          contents = [sibling]\r\n\r\n          do {\r\n            sibling = contents[contents.length - 1]\r\n            contents = editor.node.contents(sibling)\r\n          } while (contents[contents.length - 1] && editor.node.isBlock(contents[contents.length - 1]))\r\n\r\n          $(sibling).append($(mk))\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/705\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/854\r\n        if (mk.parentNode && ['TD', 'TH'].indexOf(mk.parentNode.tagName) >= 0 || (!mk.previousSibling && editor.node.isBlock(mk.parentElement))) {\r\n          if (mk.parentNode.previousSibling && !mk.previousSibling) {\r\n            $(mk.parentNode.previousSibling).append(mk)\r\n          }\r\n\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/2738\r\n          // Check if the end marker is inserted inside a TD/TH and marker is the first child\r\n          // Then move the marker to the end of previous valid node\r\n          else if (['TD', 'TH'].indexOf(mk.parentNode.tagName) >= 0 && mk.parentNode.firstChild === mk) {\r\n            if (mk.parentNode.previousSibling) {\r\n              $(mk.parentNode.previousSibling).append(mk);\r\n            } else if (mk.parentNode.parentNode && mk.parentNode.parentNode.previousSibling) {\r\n              $(mk.parentNode.parentNode.previousSibling).append(mk);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      const dom_marker = editor.$el.find(`span.fr-marker[data-type=\"${marker}\"][data-id=\"${id}\"]`).get(0)\r\n\r\n      // If image is at the top of the editor in an empty P\r\n      // and floated to right, the text will be pushed down\r\n      // when trying to insert an image.\r\n      if (dom_marker) {\r\n        dom_marker.style.display = 'none'\r\n      }\r\n\r\n      return dom_marker\r\n    }\r\n    catch (ex) {\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert a single marker.\r\n   */\r\n  function insert() {\r\n    if (!editor.$wp) {\r\n      return null\r\n    }\r\n\r\n    try {\r\n      const range = editor.selection.ranges(0)\r\n      const container = range.commonAncestorContainer\r\n\r\n      // Check if selection is inside editor.\r\n      if (container !== editor.el && !editor.$el.contains(container)) {\r\n        return null\r\n      }\r\n\r\n      const boundary = range.cloneRange()\r\n      const original_range = range.cloneRange()\r\n      boundary.collapse(true)\r\n\r\n      let mk = $(editor.doc.createElement('SPAN'))\r\n        .addClass('fr-marker')\r\n        .attr('style', 'display: none; line-height: 0;')\r\n        .html(FE.INVISIBLE_SPACE)\r\n        .get(0)\r\n\r\n      boundary.insertNode(mk)\r\n\r\n      mk = editor.$el.find('span.fr-marker').get(0)\r\n\r\n      if (mk) {\r\n        let sibling = mk.nextSibling\r\n\r\n        while (sibling && sibling.nodeType === Node.TEXT_NODE && sibling.textContent.length === 0) {\r\n          $(sibling).remove()\r\n          sibling = editor.$el.find('span.fr-marker').get(0).nextSibling\r\n        }\r\n\r\n        // Keep original selection.\r\n        editor.selection.clear()\r\n        editor.selection.get().addRange(original_range)\r\n\r\n        return mk\r\n      }\r\n\r\n      return null\r\n\r\n    }\r\n    catch (ex) {\r\n      console.warn('MARKER', ex)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split HTML at the marker position.\r\n   */\r\n  function split() {\r\n    if (!editor.selection.isCollapsed()) {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    let marker = editor.$el.find('.fr-marker').get(0)\r\n\r\n    if (!marker) {\r\n      marker = insert()\r\n    }\r\n\r\n    if (!marker) {\r\n      return null\r\n    }\r\n\r\n    let deep_parent = editor.node.deepestParent(marker)\r\n\r\n    if (!deep_parent) {\r\n      deep_parent = editor.node.blockParent(marker)\r\n\r\n      if (deep_parent && deep_parent.tagName !== 'LI') {\r\n        deep_parent = null\r\n      }\r\n    }\r\n\r\n    if (deep_parent) {\r\n      if (editor.node.isBlock(deep_parent) && editor.node.isEmpty(deep_parent)) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1730.\r\n        // https://github.com/froala/wysiwyg-editor/issues/1970.\r\n        if (deep_parent.tagName === 'LI' && (deep_parent.parentNode.firstElementChild === deep_parent && !editor.node.isEmpty(deep_parent.parentNode))) {\r\n          $(deep_parent).append('<span class=\"fr-marker\"></span>')\r\n        }\r\n        else {\r\n          $(deep_parent).replaceWith('<span class=\"fr-marker\"></span>')\r\n        }\r\n      }\r\n      else if (editor.cursor.isAtStart(marker, deep_parent)) {\r\n        $(deep_parent).before('<span class=\"fr-marker\"></span>')\r\n        $(marker).remove()\r\n      }\r\n      else if (editor.cursor.isAtEnd(marker, deep_parent)) {\r\n        $(deep_parent).after('<span class=\"fr-marker\"></span>')\r\n        $(marker).remove()\r\n      }\r\n      else {\r\n        let node = marker\r\n        let close_str = ''\r\n        let open_str = ''\r\n\r\n        do {\r\n          node = node.parentNode\r\n          close_str += editor.node.closeTagString(node)\r\n          open_str = editor.node.openTagString(node) + open_str\r\n        } while (node !== deep_parent)\r\n\r\n        $(marker).replaceWith('<span id=\"fr-break\"></span>')\r\n        let h = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\r\n        h = h.replace(/<span id=\"fr-break\"><\\/span>/g, `${close_str}<span class=\"fr-marker\"></span>${open_str}`)\r\n\r\n        $(deep_parent).replaceWith(h)\r\n      }\r\n    }\r\n\r\n    return editor.$el.find('.fr-marker').get(0)\r\n  }\r\n\r\n  /**\r\n   * Insert marker at point from event.\r\n   *\r\n   * http://stackoverflow.com/questions/11191136/set-a-selection-range-from-a-to-b-in-absolute-position\r\n   * https://developer.mozilla.org/en-US/docs/Web/API/this.document.caretPositionFromPoint\r\n   */\r\n  function insertAtPoint(e) {\r\n    const x = e.clientX\r\n    const y = e.clientY\r\n\r\n    // Clear markers.\r\n    remove()\r\n\r\n    let start\r\n    let range = null\r\n\r\n    // Default.\r\n    if (typeof editor.doc.caretPositionFromPoint !== 'undefined') {\r\n      start = editor.doc.caretPositionFromPoint(x, y)\r\n      range = editor.doc.createRange()\r\n\r\n      range.setStart(start.offsetNode, start.offset)\r\n      range.setEnd(start.offsetNode, start.offset)\r\n    }\r\n\r\n    // Webkit.\r\n    else if (typeof editor.doc.caretRangeFromPoint !== 'undefined') {\r\n      start = editor.doc.caretRangeFromPoint(x, y)\r\n      range = editor.doc.createRange()\r\n\r\n      range.setStart(start.startContainer, start.startOffset)\r\n      range.setEnd(start.startContainer, start.startOffset)\r\n    }\r\n\r\n    // Set ranges.\r\n    if (range !== null && typeof editor.win.getSelection !== 'undefined') {\r\n      const sel = editor.win.getSelection()\r\n      sel.removeAllRanges()\r\n      sel.addRange(range)\r\n    }\r\n\r\n    // MSIE.\r\n    else if (typeof editor.doc.body.createTextRange !== 'undefined') {\r\n      try {\r\n        range = editor.doc.body.createTextRange()\r\n        range.moveToPoint(x, y)\r\n        const end_range = range.duplicate()\r\n        end_range.moveToPoint(x, y)\r\n        range.setEndPoint('EndToEnd', end_range)\r\n        range.select()\r\n      }\r\n      catch (ex) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    insert()\r\n  }\r\n\r\n  /**\r\n   * Remove markers.\r\n   */\r\n  function remove() {\r\n    editor.$el.find('.fr-marker').remove()\r\n  }\r\n\r\n  return {\r\n    place,\r\n    insert,\r\n    split,\r\n    insertAtPoint,\r\n    remove\r\n  }\r\n}\r\n","import './markers.js'\r\n\r\nimport FE from '../../../editor.js'\r\n\r\nFE.MODULES.selection = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Get selection text.\r\n   */\r\n  function text() {\r\n    let text = ''\r\n\r\n    if (editor.win.getSelection) {\r\n      text = editor.win.getSelection()\r\n    }\r\n    else if (editor.doc.getSelection) {\r\n      text = editor.doc.getSelection()\r\n    }\r\n    else if (editor.doc.selection) {\r\n      text = editor.doc.selection.createRange().text\r\n    }\r\n\r\n    return text.toString()\r\n  }\r\n\r\n  /**\r\n   * Get the selection object.\r\n   */\r\n  function get() {\r\n    let selection = ''\r\n\r\n    if (editor.win.getSelection) {\r\n      selection = editor.win.getSelection()\r\n    }\r\n    else if (editor.doc.getSelection) {\r\n      selection = editor.doc.getSelection()\r\n    }\r\n    else {\r\n      selection = editor.doc.selection.createRange()\r\n    }\r\n\r\n    return selection\r\n  }\r\n\r\n  /**\r\n   * Get the selection ranges or a single range at a specified index.\r\n   */\r\n  function ranges(index) {\r\n    const sel = get()\r\n    let ranges = []\r\n\r\n    // Get ranges.\r\n    if (sel && sel.getRangeAt && sel.rangeCount) {\r\n      ranges = []\r\n\r\n      for (let i = 0; i < sel.rangeCount; i++) {\r\n        ranges.push(sel.getRangeAt(i))\r\n      }\r\n    }\r\n    else if (editor.doc.createRange) {\r\n      ranges = [editor.doc.createRange()]\r\n    }\r\n    else {\r\n      ranges = []\r\n    }\r\n\r\n    return typeof index !== 'undefined' ? ranges[index] : ranges\r\n  }\r\n\r\n  /**\r\n   * Clear selection.\r\n   */\r\n  function clear() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.removeAllRanges) {\r\n        sel.removeAllRanges()\r\n      }\r\n      else if (sel.empty) { // IE?\r\n        sel.empty()\r\n      }\r\n      else if (sel.clear) {\r\n        sel.clear()\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Selection element.\r\n   */\r\n  function element() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.rangeCount) {\r\n        const range = ranges(0)\r\n        let node = range.startContainer\r\n        let child\r\n\r\n        // When selection starts in element, look deeper.\r\n        if (editor.node.isElement(node) && range.startOffset === 0 && node.childNodes.length) {\r\n          while (node.childNodes.length && node.childNodes[0].nodeType === Node.ELEMENT_NODE) {\r\n            node = node.childNodes[0];\r\n          }\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1399.\r\n        if (node.nodeType === Node.TEXT_NODE && range.startOffset === (node.textContent || '').length && node.nextSibling) {\r\n          node = node.nextSibling\r\n        }\r\n\r\n        // Get parrent if node type is not DOM.\r\n        if (node.nodeType === Node.ELEMENT_NODE) {\r\n          let node_found = false\r\n\r\n          // Search for node deeper.\r\n          if (node.childNodes.length > 0 && node.childNodes[range.startOffset]) {\r\n            child = node.childNodes[range.startOffset]\r\n\r\n            // Ignore empty elements.\r\n            while (child && child.nodeType === Node.TEXT_NODE && child.textContent.length === 0) {\r\n              child = child.nextSibling\r\n            }\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n\r\n            // Look back maybe me missed something.\r\n            if (!node_found && node.childNodes.length > 1 && range.startOffset > 0 && node.childNodes[range.startOffset - 1]) {\r\n              child = node.childNodes[range.startOffset - 1]\r\n\r\n              while (child && child.nodeType === Node.TEXT_NODE && child.textContent.length === 0) {\r\n                child = child.nextSibling\r\n              }\r\n\r\n              if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n                node = child\r\n                node_found = true\r\n              }\r\n            }\r\n          }\r\n\r\n          // Selection starts just at the end of the node.\r\n          else if (!range.collapsed && node.nextSibling && node.nextSibling.nodeType === Node.ELEMENT_NODE) {\r\n            child = node.nextSibling\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n          }\r\n\r\n          if (!node_found && node.childNodes.length > 0 && $(node.childNodes[0]).text().replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '') && ['BR', 'IMG', 'HR'].indexOf(node.childNodes[0].tagName) < 0) {\r\n            node = node.childNodes[0]\r\n          }\r\n        }\r\n\r\n        while (node.nodeType !== Node.ELEMENT_NODE && node.parentNode) {\r\n          node = node.parentNode\r\n        }\r\n\r\n        // Make sure the node is in editor.\r\n        let p = node\r\n\r\n        while (p && p.tagName !== 'HTML') {\r\n          if (p === editor.el) {\r\n            return node\r\n          }\r\n\r\n          p = $(p).parent()[0]\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n\r\n    return editor.el\r\n  }\r\n\r\n  /**\r\n   * Selection element.\r\n   */\r\n  function endElement() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.rangeCount) {\r\n        const range = ranges(0)\r\n        let node = range.endContainer\r\n        let child\r\n\r\n        // Get parrent if node type is not DOM.\r\n        if (node.nodeType === Node.ELEMENT_NODE) {\r\n          let node_found = false\r\n\r\n          // Search for node deeper.\r\n          if (node.childNodes.length > 0 && node.childNodes[range.endOffset] && $(node.childNodes[range.endOffset]).text() === text()) {\r\n            node = node.childNodes[range.endOffset]\r\n            node_found = true\r\n          }\r\n\r\n          // Selection starts just at the end of the node.\r\n          else if (!range.collapsed && node.previousSibling && node.previousSibling.nodeType === Node.ELEMENT_NODE) {\r\n            child = node.previousSibling\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n          }\r\n\r\n          // Browser sees selection at the beginning of the next node.\r\n          else if (!range.collapsed && node.childNodes.length > 0 && node.childNodes[range.endOffset]) {\r\n            child = node.childNodes[range.endOffset].previousSibling\r\n\r\n            if (child.nodeType === Node.ELEMENT_NODE) {\r\n\r\n              if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n                node = child\r\n                node_found = true\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!node_found && node.childNodes.length > 0 && $(node.childNodes[node.childNodes.length - 1]).text() === text() && ['BR', 'IMG', 'HR'].indexOf(node.childNodes[node.childNodes.length - 1].tagName) < 0) {\r\n            node = node.childNodes[node.childNodes.length - 1]\r\n          }\r\n        }\r\n\r\n        if (node.nodeType === Node.TEXT_NODE && range.endOffset === 0 && node.previousSibling && node.previousSibling.nodeType === Node.ELEMENT_NODE) {\r\n          node = node.previousSibling\r\n        }\r\n\r\n        while (node.nodeType !== Node.ELEMENT_NODE && node.parentNode) {\r\n          node = node.parentNode\r\n        }\r\n\r\n        // Make sure the node is in editor.\r\n        let p = node\r\n\r\n        while (p && p.tagName !== 'HTML') {\r\n\r\n          if (p === editor.el) {\r\n            return node\r\n          }\r\n\r\n          p = $(p).parent()[0]\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n\r\n    return editor.el\r\n  }\r\n\r\n  /**\r\n   * Get the ELEMENTS node where the selection starts.\r\n   * By default TEXT node might be selected.\r\n   */\r\n  function rangeElement(rangeContainer, offset) {\r\n    let node = rangeContainer\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n      // Search for node deeper.\r\n      if (node.childNodes.length > 0 && node.childNodes[offset]) {\r\n        node = node.childNodes[offset]\r\n      }\r\n    }\r\n\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      node = node.parentNode\r\n    }\r\n\r\n    return node\r\n  }\r\n\r\n  /**\r\n   * Search for the current selected blocks.\r\n   */\r\n  function blocks(toggleList) {\r\n    const blks = []\r\n    let i\r\n    let block_parent\r\n\r\n    const sel = get()\r\n\r\n    // Selection must be inside editor.\r\n    if (inEditor() && sel.rangeCount) {\r\n\r\n      // Loop through ranges.\r\n      const rngs = ranges()\r\n\r\n      for (i = 0; i < rngs.length; i++) {\r\n        const range = rngs[i]\r\n\r\n        // Get start node and end node for range.\r\n        const start_node = rangeElement(range.startContainer, range.startOffset)\r\n        const end_node = rangeElement(range.endContainer, range.endOffset)\r\n\r\n        // Add the start node.\r\n        if ((editor.node.isBlock(start_node) || editor.node.hasClass(start_node, 'fr-inner')) && blks.indexOf(start_node) < 0) {\r\n          blks.push(start_node)\r\n        }\r\n\r\n        // Check for the parent node of the start node.\r\n        block_parent = editor.node.blockParent(start_node)\r\n\r\n        if (block_parent && blks.indexOf(block_parent) < 0) {\r\n          blks.push(block_parent)\r\n        }\r\n\r\n        // Do not add nodes where we've been once.\r\n        const was_into = []\r\n\r\n        // Loop until we reach end.\r\n        let next_node = start_node\r\n\r\n        while (next_node !== end_node && next_node !== editor.el) {\r\n\r\n          // Get deeper into the current node.\r\n          if (was_into.indexOf(next_node) < 0 && next_node.children && next_node.children.length) {\r\n            was_into.push(next_node)\r\n            next_node = next_node.children[0]\r\n          }\r\n\r\n          // Get next sibling.\r\n          else if (next_node.nextSibling) {\r\n            next_node = next_node.nextSibling\r\n          }\r\n\r\n          // Get parent node.\r\n          else if (next_node.parentNode) {\r\n            next_node = next_node.parentNode\r\n            was_into.push(next_node)\r\n          }\r\n\r\n          // Add node to the list.\r\n          if (editor.node.isBlock(next_node) && was_into.indexOf(next_node) < 0 && blks.indexOf(next_node) < 0) {\r\n            if (next_node !== end_node || range.endOffset > 0) {\r\n              blks.push(next_node)\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add the end node.\r\n        if (editor.node.isBlock(end_node) && blks.indexOf(end_node) < 0 && range.endOffset > 0) {\r\n          blks.push(end_node)\r\n        }\r\n\r\n        // Check for the parent node of the end node.\r\n        block_parent = editor.node.blockParent(end_node)\r\n\r\n        if (block_parent && blks.indexOf(block_parent) < 0) {\r\n          blks.push(block_parent)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove blocks that we don't need.\r\n    for (i = blks.length - 1; i > 0; i--) {\r\n      // Nodes that contain another node. Don't do it for LI, but remove them if there is a single child and has format.\r\n      if ($(blks[i]).find(blks).length) {\r\n        // While toggle list type, include the node if it contains a UL/OL element\r\n        if (toggleList && $(blks[i]).find('ul, ol').length) {\r\n          continue\r\n        }\r\n        blks.splice(i, 1)\r\n      }\r\n    }\r\n\r\n    return blks\r\n  }\r\n\r\n  /**\r\n   * Save selection.\r\n   */\r\n  function save() {\r\n    if (editor.$wp) {\r\n      editor.markers.remove()\r\n\r\n      const rgs = ranges()\r\n      const new_ranges = []\r\n      let range\r\n      let i\r\n\r\n      for (i = 0; i < rgs.length; i++) {\r\n\r\n        // 2nd condition is for https://github.com/froala/wysiwyg-editor/issues/1750.\r\n        if (rgs[i].startContainer !== editor.doc || editor.browser.msie) {\r\n          range = rgs[i]\r\n\r\n          const collapsed = range.collapsed\r\n\r\n          const start_m = editor.markers.place(range, true, i) // Start.\r\n          const end_m = editor.markers.place(range, false, i) // End.\r\n\r\n          // Put selection at the end when there is no marker.\r\n          if ((typeof start_m === 'undefined' || !start_m) && collapsed) {\r\n            $('.fr-marker').remove()\r\n            editor.selection.setAtEnd(editor.el)\r\n          }\r\n\r\n          // https://github.com/froala/wysiwyg-editor/issues/1398.\r\n          editor.el.normalize()\r\n\r\n          if (editor.browser.safari && !collapsed) {\r\n            try {\r\n              range = editor.doc.createRange()\r\n              range.setStartAfter(start_m)\r\n              range.setEndBefore(end_m)\r\n              new_ranges.push(range)\r\n            }\r\n            catch (ex) {\r\n              // Leave this empty.\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.browser.safari && new_ranges.length) {\r\n        editor.selection.clear()\r\n\r\n        for (i = 0; i < new_ranges.length; i++) {\r\n          editor.selection.get().addRange(new_ranges[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore selection.\r\n   */\r\n  function restore() {\r\n    let i\r\n\r\n    // Get markers.\r\n    const markers = editor.el.querySelectorAll('.fr-marker[data-type=\"true\"]')\r\n\r\n    if (!editor.$wp) {\r\n      editor.markers.remove()\r\n\r\n      return false\r\n    }\r\n\r\n    // No markers.\r\n    if (markers.length === 0) {\r\n\r\n      return false\r\n    }\r\n\r\n    if (editor.browser.msie || editor.browser.edge) {\r\n      for (i = 0; i < markers.length; i++) {\r\n        markers[i].style.display = 'inline-block'\r\n      }\r\n    }\r\n\r\n    // Focus.\r\n    if (!editor.core.hasFocus() && !editor.browser.msie && !editor.browser.webkit) {\r\n      editor.$el.focus()\r\n    }\r\n\r\n    clear()\r\n    const sel = get()\r\n\r\n    // Add ranges.\r\n    for (i = 0; i < markers.length; i++) {\r\n      const id = $(markers[i]).data('id')\r\n      let start_marker = markers[i]\r\n      const range = editor.doc.createRange()\r\n      let end_marker = editor.$el.find(`.fr-marker[data-type=\"false\"][data-id=\"${id}\"]`)\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        end_marker.css('display', 'inline-block')\r\n      }\r\n\r\n      let ghost = null\r\n\r\n      // Make sure there is an start marker.\r\n      if (end_marker.length > 0) {\r\n        end_marker = end_marker[0]\r\n\r\n        try {\r\n          // If we have markers one next to each other inside text, then we should normalize text by joining it.\r\n          let special_case = false\r\n\r\n          // Clear empty text nodes.\r\n          let s_node = start_marker.nextSibling\r\n\r\n          let tmp = null\r\n          while (s_node && s_node.nodeType === Node.TEXT_NODE && s_node.textContent.length === 0) {\r\n            tmp = s_node\r\n            s_node = s_node.nextSibling\r\n            $(tmp).remove()\r\n          }\r\n\r\n          let e_node = end_marker.nextSibling\r\n\r\n          while (e_node && e_node.nodeType === Node.TEXT_NODE && e_node.textContent.length === 0) {\r\n            tmp = e_node\r\n            e_node = e_node.nextSibling\r\n            $(tmp).remove()\r\n          }\r\n\r\n          if (start_marker.nextSibling === end_marker || end_marker.nextSibling === start_marker) {\r\n\r\n            // Decide which is first and which is last between markers.\r\n            const first_node = start_marker.nextSibling === end_marker ? start_marker : end_marker\r\n            const last_node = first_node === start_marker ? end_marker : start_marker\r\n\r\n            // Previous node.\r\n            let prev_node = first_node.previousSibling\r\n\r\n            while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.length === 0) {\r\n              tmp = prev_node\r\n              prev_node = prev_node.previousSibling\r\n              $(tmp).remove()\r\n            }\r\n\r\n            // Normalize text before.\r\n            if (prev_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              while (prev_node && prev_node.previousSibling && prev_node.previousSibling.nodeType === Node.TEXT_NODE) {\r\n                prev_node.previousSibling.textContent += prev_node.textContent\r\n                prev_node = prev_node.previousSibling\r\n                $(prev_node.nextSibling).remove()\r\n              }\r\n            }\r\n\r\n            // Next node.\r\n            let next_node = last_node.nextSibling\r\n\r\n            while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.length === 0) {\r\n              tmp = next_node\r\n              next_node = next_node.nextSibling\r\n              $(tmp).remove()\r\n            }\r\n\r\n            // Normalize text after.\r\n            if (next_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              while (next_node && next_node.nextSibling && next_node.nextSibling.nodeType === Node.TEXT_NODE) {\r\n                next_node.nextSibling.textContent = next_node.textContent + next_node.nextSibling.textContent\r\n                next_node = next_node.nextSibling\r\n                $(next_node.previousSibling).remove()\r\n              }\r\n            }\r\n\r\n            if (prev_node && (editor.node.isVoid(prev_node) || editor.node.isBlock(prev_node))) {\r\n              prev_node = null\r\n            }\r\n\r\n            if (next_node && (editor.node.isVoid(next_node) || editor.node.isBlock(next_node))) {\r\n              next_node = null\r\n            }\r\n\r\n            // Previous node and next node are both text.\r\n            if (prev_node && next_node && prev_node.nodeType === Node.TEXT_NODE && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Save cursor position.\r\n              const len = prev_node.textContent.length\r\n              prev_node.textContent += next_node.textContent\r\n              $(next_node).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(prev_node)\r\n              }\r\n\r\n              // Restore position.\r\n              range.setStart(prev_node, len)\r\n              range.setEnd(prev_node, len)\r\n\r\n              special_case = true\r\n            }\r\n            else if (!prev_node && next_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(next_node)\r\n              }\r\n\r\n              ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              $(next_node).before(ghost)\r\n\r\n              // Restore position.\r\n              range.setStart(next_node, 0)\r\n              range.setEnd(next_node, 0)\r\n              special_case = true\r\n            }\r\n            else if (!next_node && prev_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(prev_node)\r\n              }\r\n\r\n              ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              $(prev_node).after(ghost)\r\n\r\n              // Restore position.\r\n              range.setStart(prev_node, prev_node.textContent.length)\r\n              range.setEnd(prev_node, prev_node.textContent.length)\r\n\r\n              special_case = true\r\n            }\r\n          }\r\n\r\n          if (!special_case) {\r\n            let x\r\n            let y\r\n\r\n            // DO NOT TOUCH THIS OR IT WILL BREAK!!!\r\n            if ((editor.browser.chrome || editor.browser.edge) && start_marker.nextSibling === end_marker) {\r\n              x = _normalizedMarker(end_marker, range, true) || range.setStartAfter(end_marker)\r\n              y = _normalizedMarker(start_marker, range, false) || range.setEndBefore(start_marker)\r\n            }\r\n            else {\r\n              if (start_marker.previousSibling === end_marker) {\r\n                start_marker = end_marker\r\n                end_marker = start_marker.nextSibling\r\n              }\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/759\r\n              if (!(end_marker.nextSibling && end_marker.nextSibling.tagName === 'BR') &&\r\n                !(!end_marker.nextSibling && editor.node.isBlock(start_marker.previousSibling)) &&\r\n                !(start_marker.previousSibling && start_marker.previousSibling.tagName === 'BR')) {\r\n                start_marker.style.display = 'inline'\r\n                end_marker.style.display = 'inline'\r\n                ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              }\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1120 . TODO Check again the below statement on which !editor.opts.enter === FE.ENTER_BR is returing false always.\r\n              // var p_node = start_marker.previousSibling;\r\n              // if (p_node && p_node.style && editor.win.getComputedStyle(p_node).display === 'block' && !editor.opts.enter === FE.ENTER_BR) {\r\n              //   range.setEndAfter(p_node);\r\n              //   range.setStartAfter(p_node);\r\n              // }\r\n              // else {\r\n              //   x = _normalizedMarker(start_marker, range, true) || ($(start_marker).before(ghost) && range.setStartBefore(start_marker));\r\n              //   y = _normalizedMarker(end_marker, range, false) || ($(end_marker).after(ghost) && range.setEndAfter(end_marker));\r\n              // }\r\n              x = _normalizedMarker(start_marker, range, true) || $(start_marker).before(ghost) && range.setStartBefore(start_marker)\r\n              y = _normalizedMarker(end_marker, range, false) || $(end_marker).after(ghost) && range.setEndAfter(end_marker)\r\n            }\r\n\r\n            if (typeof x === 'function') {\r\n              x()\r\n            }\r\n\r\n            if (typeof y === 'function') {\r\n              y()\r\n            }\r\n          }\r\n        }\r\n        catch (ex) {\r\n          console.warn('RESTORE RANGE', ex)\r\n        }\r\n      }\r\n\r\n      if (ghost) {\r\n        $(ghost).remove()\r\n      }\r\n\r\n      try {\r\n        sel.addRange(range)\r\n      }\r\n      catch (ex) {\r\n        console.warn('ADD RANGE', ex)\r\n      }\r\n    }\r\n\r\n    // Remove used markers.\r\n    editor.markers.remove()\r\n  }\r\n\r\n  /**\r\n   * Normalize marker when restoring selection.\r\n   */\r\n  function _normalizedMarker(marker, range, start) {\r\n    let len\r\n    const prev_node = marker.previousSibling\r\n    const next_node = marker.nextSibling\r\n\r\n    // Prev and next node are both text nodes.\r\n    if (prev_node && next_node && prev_node.nodeType === Node.TEXT_NODE && next_node.nodeType === Node.TEXT_NODE) {\r\n      len = prev_node.textContent.length\r\n\r\n      if (start) {\r\n        next_node.textContent = prev_node.textContent + next_node.textContent\r\n        $(prev_node).remove()\r\n        $(marker).remove()\r\n\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(next_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(next_node, len)\r\n        }\r\n      }\r\n\r\n      prev_node.textContent += next_node.textContent\r\n      $(next_node).remove()\r\n      $(marker).remove()\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(prev_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(prev_node, len)\r\n      }\r\n\r\n    }\r\n\r\n    // Prev node is text node.\r\n    else if (prev_node && !next_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n      len = prev_node.textContent.length\r\n\r\n      if (start) {\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(prev_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(prev_node, len)\r\n        }\r\n      }\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(prev_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(prev_node, len)\r\n      }\r\n\r\n    }\r\n\r\n    // Next node is text node.\r\n    else if (next_node && !prev_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n      if (start) {\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(next_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(next_node, 0)\r\n        }\r\n      }\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(next_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(next_node, 0)\r\n      }\r\n\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Determine if we can do delete.\r\n   */\r\n  function _canDelete() {\r\n\r\n    // Check if there are markers inside conteneditable=\"false\".\r\n    const markers = editor.$el.find('.fr-marker')\r\n\r\n    for (let i = 0; i < markers.length; i++) {\r\n      if ($(markers[i]).parentsUntil('.fr-element, [contenteditable=\"true\"]', '[contenteditable=\"false\"]').length) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Check if selection is collapsed.\r\n   */\r\n  function isCollapsed() {\r\n    const rgs = ranges()\r\n\r\n    for (let i = 0; i < rgs.length; i++) {\r\n      if (!rgs[i].collapsed) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  // From: http://www.coderexception.com/0B1B33z1NyQxUQSJ/contenteditable-div-how-can-i-determine-if-the-cursor-is-at-the-start-or-end-of-the-content\r\n  function info(el) {\r\n    let atStart = false\r\n    let atEnd = false\r\n    let selRange\r\n    let testRange\r\n\r\n    if (editor.win.getSelection) {\r\n      const sel = editor.win.getSelection()\r\n\r\n      if (sel.rangeCount) {\r\n        selRange = sel.getRangeAt(0)\r\n        testRange = selRange.cloneRange()\r\n\r\n        testRange.selectNodeContents(el)\r\n        testRange.setEnd(selRange.startContainer, selRange.startOffset)\r\n        atStart = selection(testRange)\r\n\r\n        testRange.selectNodeContents(el)\r\n        testRange.setStart(selRange.endContainer, selRange.endOffset)\r\n\r\n        atEnd = selection(testRange)\r\n      }\r\n    }\r\n    else if (editor.doc.selection && editor.doc.selection.type !== 'Control') {\r\n      selRange = editor.doc.selection.createRange()\r\n      testRange = selRange.duplicate()\r\n\r\n      testRange.moveToElementText(el)\r\n      testRange.setEndPoint('EndToStart', selRange)\r\n      atStart = selection(testRange)\r\n\r\n      testRange.moveToElementText(el)\r\n      testRange.setEndPoint('StartToEnd', selRange)\r\n      atEnd = selection(testRange)\r\n    }\r\n\r\n    return {\r\n      atStart,\r\n      atEnd\r\n    }\r\n  }\r\n\r\n  // https://github.com/froala-labs/froala-editor-js-2/issues/1935\r\n  function selection(sel) {\r\n    const result = sel.toString().replace(/[\\u200B-\\u200D\\uFEFF]/g, '')\r\n\r\n    return  result === ''\r\n  }\r\n\r\n  /**\r\n   * Check if everything is selected inside the editor.\r\n   */\r\n  function isFull() {\r\n    if (isCollapsed()) {\r\n      return false\r\n    }\r\n\r\n    editor.selection.save()\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/710\r\n    let els = editor.el.querySelectorAll('td, th, img, br')\r\n    let i\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      if (els[i].nextSibling || els[i].tagName === 'IMG') {\r\n        // Invisible space character was getting replaced within the \"selection\" method.\r\n        // So replaced it with \"&nbsp;\" as a solution.\r\n        els[i].innerHTML = `<span class=\"fr-mk\" style=\"display: none;\">&nbsp;</span>${els[i].innerHTML}`\r\n      }\r\n    }\r\n\r\n    let full = false\r\n    const inf = info(editor.el)\r\n\r\n    if (inf.atStart && inf.atEnd) {\r\n      full = true\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/710\r\n    els = editor.el.querySelectorAll('.fr-mk')\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      els[i].parentNode.removeChild(els[i])\r\n    }\r\n\r\n    editor.selection.restore()\r\n\r\n    return full\r\n  }\r\n\r\n  /**\r\n   * Remove HTML from inner nodes when we deal with keepFormatOnDelete option.\r\n   */\r\n  function _emptyInnerNodes(node, first) {\r\n    if (typeof first === 'undefined') {\r\n      first = true\r\n    }\r\n\r\n    // Remove invisible spaces.\r\n    const h = $(node).html()\r\n\r\n    if (h && h.replace(/\\u200b/g, '').length !== h.length) {\r\n      $(node).html(h.replace(/\\u200b/g, ''))\r\n    }\r\n\r\n    // Loop contents.\r\n    const contents = editor.node.contents(node)\r\n\r\n    for (let j = 0; j < contents.length; j++) {\r\n\r\n      // Remove text nodes.\r\n      if (contents[j].nodeType !== Node.ELEMENT_NODE) {\r\n        $(contents[j]).remove()\r\n      }\r\n\r\n      // Empty inner nodes further.\r\n      else {\r\n\r\n        // j === 0 determines if the node is the first one and we should keep format.\r\n        _emptyInnerNodes(contents[j], j === 0)\r\n\r\n        // There are inner nodes, ignore the current one.\r\n        if (j === 0) {\r\n          first = false\r\n        }\r\n      }\r\n    }\r\n\r\n    // First node is a text node, so replace it with a span.\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      const span = $(document.createElement('span')).attr('data-first', 'true').attr('data-text', 'true')\r\n      $(node)[0].replaceWith(span[0])\r\n    }\r\n\r\n    // Add the first node marker so that we add selection in it later on.\r\n    else if (first) {\r\n      $(node).attr('data-first', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * TODO: check again this function because it will always return true because fr-inner tag does not exist.\r\n   */\r\n  function _filterFrInner() {\r\n    return $(this).find('fr-inner').length === 0\r\n  }\r\n\r\n  /**\r\n   * Process deleting nodes.\r\n   */\r\n  function _processNodeDelete($node, should_delete) {\r\n    const contents = editor.node.contents($node.get(0))\r\n\r\n    // Node is TD or TH.\r\n    if (['TD', 'TH'].indexOf($node.get(0).tagName) >= 0 && $node.find('.fr-marker').length === 1 && (editor.node.hasClass(contents[0], 'fr-marker') || (contents[0].tagName == 'BR' && editor.node.hasClass(contents[0].nextElementSibling, 'fr-marker')))) {\r\n      $node.attr('data-del-cell', true)\r\n    }\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n      const node = contents[i]\r\n\r\n      // We found a marker.\r\n      if (editor.node.hasClass(node, 'fr-marker')) {\r\n        should_delete = (should_delete + 1) % 2\r\n      }\r\n      else if (should_delete) {\r\n\r\n        // Check if we have a marker inside it.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_delete = _processNodeDelete($(node), should_delete)\r\n        }\r\n        else {\r\n\r\n          // TD, TH or inner, then go further.\r\n          if (['TD', 'TH'].indexOf(node.tagName) < 0 && !editor.node.hasClass(node, 'fr-inner')) {\r\n\r\n            if (!editor.opts.keepFormatOnDelete || editor.$el.find('[data-first]').length > 0 || editor.node.isVoid(node)) {\r\n              $(node).remove()\r\n            }\r\n            else {\r\n              _emptyInnerNodes(node)\r\n            }\r\n          }\r\n          else if (editor.node.hasClass(node, 'fr-inner')) {\r\n            if ($(node).find('.fr-inner').length === 0) {\r\n              $(node).html('<br>')\r\n            }\r\n            else {\r\n              $(node).find('.fr-inner').filter(_filterFrInner).html('<br>')\r\n            }\r\n          }\r\n          else {\r\n            $(node).empty()\r\n            $(node).attr('data-del-cell', true)\r\n          }\r\n        }\r\n      }\r\n      else if ($(node).find('.fr-marker').length > 0) {\r\n        should_delete = _processNodeDelete($(node), should_delete)\r\n      }\r\n    }\r\n\r\n    return should_delete\r\n  }\r\n\r\n  /**\r\n   * Determine if selection is inside the editor.\r\n   */\r\n  function inEditor() {\r\n    try {\r\n      if (!editor.$wp) {\r\n        return false\r\n      }\r\n\r\n      const range = ranges(0)\r\n      let container = range.commonAncestorContainer\r\n\r\n      while (container && !editor.node.isElement(container)) {\r\n        container = container.parentNode\r\n      }\r\n\r\n      if (editor.node.isElement(container)) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    }\r\n    catch (ex) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current selection html.\r\n   */\r\n  function remove() {\r\n    if (isCollapsed()) {\r\n      return true\r\n    }\r\n\r\n    let i\r\n\r\n    save()\r\n\r\n    // Get the previous sibling normalized.\r\n    function _prevSibling(node) {\r\n      let prev_node = node.previousSibling\r\n\r\n      while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 0) {\r\n        const tmp = prev_node\r\n        prev_node = prev_node.previousSibling\r\n        $(tmp).remove()\r\n      }\r\n\r\n      return prev_node\r\n    }\r\n\r\n    // Get the next sibling normalized.\r\n    function _nextSibling(node) {\r\n      let next_node = node.nextSibling\r\n\r\n      while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n        const tmp = next_node\r\n        next_node = next_node.nextSibling\r\n        $(tmp).remove()\r\n      }\r\n\r\n      return next_node\r\n    }\r\n\r\n    // Normalize start markers.\r\n    let start_markers = editor.$el.find('.fr-marker[data-type=\"true\"]')\r\n\r\n    for (i = 0; i < start_markers.length; i++) {\r\n      const sm = start_markers[i]\r\n\r\n      while (!_prevSibling(sm) && !editor.node.isBlock(sm.parentNode) && !editor.$el.is(sm.parentNode) && !editor.node.hasClass(sm.parentNode, 'fr-inner')) {\r\n        $(sm.parentNode).before(sm)\r\n      }\r\n    }\r\n\r\n    // Normalize end markers.\r\n    const end_markers = editor.$el.find('.fr-marker[data-type=\"false\"]')\r\n\r\n    for (i = 0; i < end_markers.length; i++) {\r\n      const em = end_markers[i]\r\n\r\n      while (!_nextSibling(em) && !editor.node.isBlock(em.parentNode) && !editor.$el.is(em.parentNode) && !editor.node.hasClass(em.parentNode, 'fr-inner')) {\r\n        $(em.parentNode).after(em)\r\n      }\r\n\r\n      // Last node is empty and has a BR in it.\r\n      if (em.parentNode && editor.node.isBlock(em.parentNode) && editor.node.isEmpty(em.parentNode) && !editor.$el.is(em.parentNode) && !editor.node.hasClass(em.parentNode, 'fr-inner') && editor.opts.keepFormatOnDelete) {\r\n        $(em.parentNode).after(em)\r\n      }\r\n    }\r\n\r\n    // Check if selection can be deleted.\r\n    if (_canDelete()) {\r\n      _processNodeDelete(editor.$el, 0)\r\n\r\n      // Look for selection marker.\r\n      const $first_node = editor.$el.find('[data-first=\"true\"]')\r\n\r\n      if ($first_node.length) {\r\n\r\n        // Remove markers.\r\n        editor.$el.find('.fr-marker').remove()\r\n\r\n        // Add markers in the node that we marked as the first one.\r\n        $first_node\r\n          .append(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          .removeAttr('data-first')\r\n\r\n        // Remove span with data-text if there is one.\r\n        if ($first_node.attr('data-text')) {\r\n          $first_node.replaceWith($first_node.html())\r\n        }\r\n      }\r\n      else {\r\n        // Remove tables.\r\n        editor.$el.find('table').filter(function () {\r\n          const ok = $(this).find('[data-del-cell]').length > 0 && $(this).find('[data-del-cell]').length === $(this).find('td, th').length\r\n\r\n          return ok\r\n        }).remove()\r\n        editor.$el.find('[data-del-cell]').removeAttr('data-del-cell')\r\n\r\n        // Merge contents between markers.\r\n        start_markers = editor.$el.find('.fr-marker[data-type=\"true\"]')\r\n\r\n        for (i = 0; i < start_markers.length; i++) {\r\n\r\n          // Get start marker.\r\n          const start_marker = start_markers[i]\r\n\r\n          // Get the next node after start marker.\r\n          let next_node = start_marker.nextSibling\r\n\r\n          // Get the end node.\r\n          let end_marker = editor.$el.find(`.fr-marker[data-type=\"false\"][data-id=\"${$(start_marker).data('id')}\"]`).get(0)\r\n\r\n          if (end_marker) {\r\n\r\n            // Markers are not next to other.\r\n            if (start_marker && !(next_node && next_node === end_marker)) {\r\n\r\n              // Get the parents of the nodes.\r\n              let start_parent = editor.node.blockParent(start_marker)\r\n              let end_parent = editor.node.blockParent(end_marker)\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1233\r\n              let list_start = false\r\n              let list_end = false\r\n\r\n              if (start_parent && ['UL', 'OL'].indexOf(start_parent.tagName) >= 0) {\r\n                start_parent = null\r\n                list_start = true\r\n              }\r\n\r\n              if (end_parent && ['UL', 'OL'].indexOf(end_parent.tagName) >= 0) {\r\n                end_parent = null\r\n                list_end = true\r\n              }\r\n\r\n              // Move end marker next to start marker.\r\n              $(start_marker).after(end_marker)\r\n\r\n              // The block parent of the start marker is the element itself. We're not in the same parent or moving marker is not enough.\r\n              if (start_parent !== end_parent) {\r\n                if (start_parent === null && !list_start) {\r\n                  const deep_parent = editor.node.deepestParent(start_marker)\r\n\r\n                  // There is a parent for the marker. Move the end html to it.\r\n                  if (deep_parent) {\r\n                    $(deep_parent).after($(end_parent).html())\r\n                    $(end_parent).remove()\r\n                  }\r\n\r\n                  // There is no parent for the marker.\r\n                  else if ($(end_parent).parentsUntil(editor.$el, 'table').length === 0) {\r\n                    $(start_marker).next().after($(end_parent).html())\r\n                    $(end_parent).remove()\r\n                  }\r\n                }\r\n\r\n                // End marker is inside element. We don't merge in table.\r\n                else if (end_parent === null && !list_end && $(start_parent).parentsUntil(editor.$el, 'table').length === 0) {\r\n\r\n                  // Get the node that has a next sibling.\r\n                  next_node = start_parent\r\n\r\n                  while (!next_node.nextSibling && next_node.parentNode !== editor.el) {\r\n                    next_node = next_node.parentNode\r\n                  }\r\n                  next_node = next_node.nextSibling\r\n\r\n                  // Join HTML inside the start node.\r\n                  while (next_node && next_node.tagName !== 'BR') {\r\n                    const tmp_node = next_node.nextSibling\r\n                    $(start_parent).append(next_node)\r\n                    next_node = tmp_node\r\n                  }\r\n\r\n                  if (next_node && next_node.tagName === 'BR') {\r\n                    $(next_node).remove()\r\n                  }\r\n                }\r\n\r\n                // Join end block with start block.\r\n                else if (start_parent && end_parent && $(start_parent).parentsUntil(editor.$el, 'table').length === 0 && $(end_parent).parentsUntil(editor.$el, 'table').length === 0 && !$(start_parent).contains(end_parent) && !$(end_parent).contains(start_parent)) {\r\n                  $(start_parent).append($(end_parent).html())\r\n                  $(end_parent).remove()\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            end_marker = $(start_marker).clone().attr('data-type', false)\r\n            $(start_marker).after(end_marker)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove remaining empty lists.\r\n    editor.$el.find('li:empty').remove()\r\n\r\n    if (!editor.opts.keepFormatOnDelete) {\r\n      editor.html.fillEmptyBlocks()\r\n    }\r\n\r\n    editor.html.cleanEmptyTags(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.clean.lists()\r\n      editor.$el.find('li:empty').append('<br>')\r\n      editor.spaces.normalize()\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1379 &&\r\n\r\n    const last_marker = editor.$el.find('.fr-marker').last().get(0)\r\n    const first_marker = editor.$el.find('.fr-marker').first().get(0)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/491\r\n    if (typeof last_marker !== 'undefined' && typeof first_marker !== 'undefined' && !last_marker.nextSibling && first_marker.previousSibling && first_marker.previousSibling.tagName === 'BR' && editor.node.isElement(last_marker.parentNode) && editor.node.isElement(first_marker.parentNode)) {\r\n\r\n      editor.$el.append('<br>')\r\n    }\r\n\r\n    restore()\r\n  }\r\n\r\n  function setAtStart(node, deep) {\r\n    if (!node || node.getElementsByClassName('fr-marker').length > 0) {\r\n      return false\r\n    }\r\n\r\n    let child = node.firstChild\r\n\r\n    while (child && (editor.node.isBlock(child) || deep && !editor.node.isVoid(child) && child.nodeType === Node.ELEMENT_NODE)) {\r\n      node = child\r\n      child = child.firstChild\r\n    }\r\n\r\n    node.innerHTML = FE.MARKERS + node.innerHTML\r\n  }\r\n\r\n  function setAtEnd(node, deep) {\r\n    if (!node || node.getElementsByClassName('fr-marker').length > 0) {\r\n      return false\r\n    }\r\n\r\n    let child = node.lastChild\r\n\r\n    while (child && (editor.node.isBlock(child) || deep && !editor.node.isVoid(child) && child.nodeType === Node.ELEMENT_NODE)) {\r\n      node = child\r\n      child = child.lastChild\r\n    }\r\n\r\n    const span = editor.doc.createElement('SPAN')\r\n    span.setAttribute('id', 'fr-sel-markers')\r\n    span.innerHTML = FE.MARKERS\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3078\r\n    while (node.parentNode && editor.opts.htmlAllowedEmptyTags && editor.opts.htmlAllowedEmptyTags.indexOf(node.tagName.toLowerCase()) >= 0) {\r\n      node = node.parentNode;\r\n    }\r\n\r\n    node.appendChild(span)\r\n    const nd = node.querySelector('#fr-sel-markers')\r\n    nd.outerHTML = nd.innerHTML\r\n  }\r\n\r\n  function setBefore(node, use_current_node) {\r\n    if (typeof use_current_node === 'undefined') {\r\n      use_current_node = true\r\n    }\r\n\r\n    // Check if there is any previous sibling by skipping the empty text ones.\r\n    let prev_node = node.previousSibling\r\n\r\n    while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 0) {\r\n      prev_node = prev_node.previousSibling\r\n    }\r\n\r\n    // There is a previous node.\r\n    if (prev_node) {\r\n\r\n      // Previous node is block so set the focus at the end of it.\r\n      if (editor.node.isBlock(prev_node)) {\r\n        setAtEnd(prev_node)\r\n      }\r\n\r\n      // Previous node is BR, so place markers before it.\r\n      else if (prev_node.tagName === 'BR') {\r\n        $(prev_node).before(FE.MARKERS)\r\n      }\r\n\r\n      // Just place marker.\r\n      else {\r\n        $(prev_node).after(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Use current node.\r\n    else if (use_current_node) {\r\n\r\n      // Current node is block, set selection at start.\r\n      if (editor.node.isBlock(node)) {\r\n        setAtStart(node)\r\n      }\r\n\r\n      // Just place markers.\r\n      else {\r\n        $(node).before(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  function setAfter(node, use_current_node) {\r\n    if (typeof use_current_node === 'undefined') {\r\n      use_current_node = true\r\n    }\r\n\r\n    // Check if there is any previous sibling by skipping the empty text ones.\r\n    let next_node = node.nextSibling\r\n\r\n    while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n      next_node = next_node.nextSibling\r\n    }\r\n\r\n    // There is a next node.\r\n    if (next_node) {\r\n\r\n      // Next node is block so set the focus at the end of it.\r\n      if (editor.node.isBlock(next_node)) {\r\n        setAtStart(next_node)\r\n      }\r\n\r\n      // Just place marker.\r\n      else {\r\n        $(next_node).before(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Use current node.\r\n    else if (use_current_node) {\r\n\r\n      // Current node is block, set selection at end.\r\n      if (editor.node.isBlock(node)) {\r\n        setAtEnd(node)\r\n      }\r\n\r\n      // Just place markers.\r\n      else {\r\n        $(node).after(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  return {\r\n    text,\r\n    get,\r\n    ranges,\r\n    clear,\r\n    element,\r\n    endElement,\r\n    save,\r\n    restore,\r\n    isCollapsed,\r\n    isFull,\r\n    inEditor,\r\n    remove,\r\n    blocks,\r\n    info,\r\n    setAtEnd,\r\n    setAtStart,\r\n    setBefore,\r\n    setAfter,\r\n    rangeElement\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  language: null\r\n})\r\n\r\nFE.LANGUAGE = {}\r\n\r\nFE.MODULES.language = function (editor) {\r\n  let lang\r\n\r\n  /**\r\n   * Translate.\r\n   */\r\n  function translate(str) {\r\n    if (lang && lang.translation[str] && lang.translation[str].length) {\r\n      return lang.translation[str]\r\n    }\r\n\r\n    return str\r\n\r\n  }\r\n\r\n  /* Initialize */\r\n  function _init() {\r\n\r\n    // Load lang.\r\n    if (FE.LANGUAGE) {\r\n      lang = FE.LANGUAGE[editor.opts.language]\r\n    }\r\n\r\n    // Set direction.\r\n    if (lang && lang.direction) {\r\n      editor.opts.direction = lang.direction\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    translate\r\n  }\r\n}\r\n\r\n","import './language.js'\r\n\r\nimport FE from '../../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  placeholderText: 'Type something'\r\n})\r\n\r\nFE.MODULES.placeholder = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /* Show placeholder. */\r\n  function show() {\r\n    if (!editor.$placeholder) {\r\n      _add()\r\n    }\r\n\r\n    const margin_offset = editor.opts.iframe ? editor.$iframe.prev().outerHeight(true) : editor.$el.prev().outerHeight(true)\r\n\r\n    // Determine the placeholder position based on the first element inside editor.\r\n    let margin_top = 0\r\n    let margin_left = 0\r\n    let margin_right = 0\r\n    let padding_top = 0\r\n    let padding_left = 0\r\n    let padding_right = 0\r\n    const contents = editor.node.contents(editor.el)\r\n\r\n    const alignment = $(editor.selection.element()).css('text-align')\r\n\r\n    if (contents.length && contents[0].nodeType === Node.ELEMENT_NODE) {\r\n\r\n      const $first_node = $(contents[0])\r\n\r\n      if ((editor.$wp.prev().length > 0 || editor.$el.prev().length > 0) && editor.ready) {\r\n        margin_top = editor.helpers.getPX($first_node.css('margin-top'))\r\n        padding_top = editor.helpers.getPX($first_node.css('padding-top'))\r\n        margin_left = editor.helpers.getPX($first_node.css('margin-left'))\r\n        margin_right = editor.helpers.getPX($first_node.css('margin-right'))\r\n        padding_left = editor.helpers.getPX($first_node.css('padding-left'))\r\n        padding_right = editor.helpers.getPX($first_node.css('padding-right'))\r\n      }\r\n\r\n      editor.$placeholder.css('font-size', $first_node.css('font-size'))\r\n      editor.$placeholder.css('line-height', $first_node.css('line-height'))\r\n    }\r\n    else {\r\n      editor.$placeholder.css('font-size', editor.$el.css('font-size'))\r\n      editor.$placeholder.css('line-height', editor.$el.css('line-height'))\r\n    }\r\n\r\n    editor.$wp.addClass('show-placeholder')\r\n    editor.$placeholder\r\n      .css({\r\n        marginTop: Math.max(editor.helpers.getPX(editor.$el.css('margin-top')), margin_top) + (margin_offset ? margin_offset : 0),\r\n        paddingTop: Math.max(editor.helpers.getPX(editor.$el.css('padding-top')), padding_top),\r\n        paddingLeft: Math.max(editor.helpers.getPX(editor.$el.css('padding-left')), padding_left),\r\n        marginLeft: Math.max(editor.helpers.getPX(editor.$el.css('margin-left')), margin_left),\r\n        paddingRight: Math.max(editor.helpers.getPX(editor.$el.css('padding-right')), padding_right),\r\n        marginRight: Math.max(editor.helpers.getPX(editor.$el.css('margin-right')), margin_right),\r\n        textAlign: alignment\r\n      })\r\n      .text(editor.language.translate(editor.opts.placeholderText || editor.$oel.attr('placeholder') || ''))\r\n\r\n    editor.$placeholder.html(editor.$placeholder.text().replace(/\\n/g, '<br>'))\r\n  }\r\n\r\n  /* Hide placeholder. */\r\n  function hide() {\r\n    editor.$wp.removeClass('show-placeholder')\r\n  }\r\n\r\n  /* Check if placeholder is visible */\r\n  function isVisible() {\r\n    return !editor.$wp ? true : editor.node.hasClass(editor.$wp.get(0), 'show-placeholder')\r\n  }\r\n\r\n  /* Refresh placeholder. */\r\n  function refresh() {\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    if (editor.core.isEmpty()) {\r\n      show()\r\n    }\r\n    else {\r\n      hide()\r\n    }\r\n  }\r\n\r\n  function _add() {\r\n    editor.$placeholder = $(editor.doc.createElement('SPAN')).addClass('fr-placeholder')\r\n    editor.$wp.append(editor.$placeholder)\r\n  }\r\n\r\n  /* Initialize. */\r\n  function _init() {\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    editor.events.on('init input keydown keyup contentChanged initialized', refresh)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    show,\r\n    hide,\r\n    refresh,\r\n    isVisible\r\n  }\r\n}\r\n","import './edit.js'\r\nimport './dom/spaces.js'\r\nimport './dom/selection.js'\r\nimport './options/placeholder.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.UNICODE_NBSP = String.fromCharCode(160)\r\n\r\n// Void Elements http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\r\nFE.VOID_ELEMENTS = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']\r\n\r\nFE.BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote', 'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav', 'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul', 'video']\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  htmlAllowedEmptyTags: ['textarea', 'a', 'iframe', 'object', 'video', 'style', 'script', '.fa', '.fr-emoticon', '.fr-inner', 'path', 'line', 'hr'],\r\n  htmlDoNotWrapTags: ['script', 'style'],\r\n  htmlSimpleAmpersand: false,\r\n  htmlIgnoreCSSProperties: [],\r\n  htmlExecuteScripts: true\r\n})\r\n\r\nFE.MODULES.html = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Determine the default block tag.\r\n   */\r\n  function defaultTag() {\r\n    if (editor.opts.enter === FE.ENTER_P) {\r\n      return 'p'\r\n    }\r\n    if (editor.opts.enter === FE.ENTER_DIV) {\r\n      return 'div'\r\n    }\r\n\r\n    if (editor.opts.enter === FE.ENTER_BR) {\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tells if the node keeps text formating.\r\n   */\r\n  function isPreformatted(node, look_up) {\r\n    // Stop condition.\r\n    if (!node || node === editor.el) {\r\n      return false\r\n    }\r\n\r\n    // Check only first level.\r\n    if (!look_up) {\r\n      // Is preformatted.\r\n      return ['PRE', 'SCRIPT', 'STYLE'].indexOf(node.tagName) !== -1\r\n    }\r\n    else {\r\n      if (['PRE', 'SCRIPT', 'STYLE'].indexOf(node.tagName) != -1) {\r\n        return true\r\n      }\r\n      return isPreformatted(node.parentNode, look_up)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the empty blocs.\r\n   */\r\n  function emptyBlocks(around_markers) {\r\n\r\n    const empty_blocks = []\r\n    let i\r\n\r\n    // Block tag elements.\r\n    let els = []\r\n\r\n    if (around_markers) {\r\n      const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n      for (i = 0; i < markers.length; i++) {\r\n        const p_node = editor.node.blockParent(markers[i]) || markers[i]\r\n\r\n        if (p_node) {\r\n          const next_node = p_node.nextSibling\r\n          const prev_node = p_node.previousSibling\r\n\r\n          // Push current node, prev and next one.\r\n          if (p_node && els.indexOf(p_node) < 0 && editor.node.isBlock(p_node)) {\r\n            els.push(p_node)\r\n          }\r\n\r\n          if (prev_node && editor.node.isBlock(prev_node) && els.indexOf(prev_node) < 0) {\r\n            els.push(prev_node)\r\n          }\r\n\r\n          if (next_node && editor.node.isBlock(next_node) && els.indexOf(next_node) < 0) {\r\n            els.push(next_node)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      els = editor.el.querySelectorAll(blockTagsQuery())\r\n    }\r\n\r\n    let qr = blockTagsQuery()\r\n    qr += `,${FE.VOID_ELEMENTS.join(',')}`\r\n    qr += ', .fr-inner'\r\n    qr += `,${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`\r\n\r\n    // Check if there are empty block tags with markers.\r\n    for (i = els.length - 1; i >= 0; i--) {\r\n\r\n      // If the block tag has text content, ignore it.\r\n      if (els[i].textContent && els[i].textContent.replace(/\\u200B|\\n/g, '').length > 0) {\r\n        continue\r\n      }\r\n\r\n      if (els[i].querySelectorAll(qr).length > 0) {\r\n        continue\r\n      }\r\n\r\n      // We're checking text from here on.\r\n      const contents = editor.node.contents(els[i])\r\n\r\n      let found = false\r\n\r\n      for (let j = 0; j < contents.length; j++) {\r\n        if (contents[j].nodeType === Node.COMMENT_NODE) {\r\n          continue\r\n        }\r\n\r\n        // Text node that is not empty.\r\n        if (contents[j].textContent && contents[j].textContent.replace(/\\u200B|\\n/g, '').length > 0) {\r\n          found = true\r\n\r\n          break\r\n        }\r\n      }\r\n\r\n      // Make sure we don't add TABLE and TD at the same time for instance.\r\n      if (!found) {\r\n        empty_blocks.push(els[i])\r\n      }\r\n    }\r\n\r\n    return empty_blocks\r\n  }\r\n\r\n  /**\r\n   * Create jQuery query for empty block tags.\r\n   */\r\n  function emptyBlockTagsQuery() {\r\n\r\n    return `${FE.BLOCK_TAGS.join(':empty, ')}:empty`\r\n  }\r\n\r\n  /**\r\n   * Create jQuery query for selecting block tags.\r\n   */\r\n  function blockTagsQuery() {\r\n\r\n    return FE.BLOCK_TAGS.join(', ')\r\n  }\r\n\r\n  /**\r\n   * Remove empty elements that are not VOID elements.\r\n   */\r\n  function cleanEmptyTags(remove_blocks) {\r\n    let els = $.merge([], FE.VOID_ELEMENTS)\r\n    els = $.merge(els, editor.opts.htmlAllowedEmptyTags)\r\n\r\n    if (typeof remove_blocks === 'undefined') {\r\n      els = $.merge(els, FE.BLOCK_TAGS)\r\n    }\r\n    else {\r\n      els = $.merge(els, FE.NO_DELETE_TAGS)\r\n    }\r\n\r\n    let elms\r\n    let ok\r\n\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1938\r\n    elms = editor.el.querySelectorAll(`*:empty:not(${els.join('):not(')}):not(.fr-marker):not(template)`)\r\n\r\n    do {\r\n      ok = false\r\n\r\n      // Remove those elements that have no attributes.\r\n      for (let i = 0; i < elms.length; i++) {\r\n        if (elms[i].attributes.length === 0 || typeof elms[i].getAttribute('href') !== 'undefined') {\r\n          elms[i].parentNode.removeChild(elms[i])\r\n          ok = true\r\n        }\r\n      }\r\n\r\n      //https://github.com/froala-labs/froala-editor-js-2/issues/1938\r\n      elms = editor.el.querySelectorAll(`*:empty:not(${els.join('):not(')}):not(.fr-marker):not(template)`)\r\n    } while (elms.length && ok)\r\n  }\r\n\r\n  /**\r\n   * Wrap the content inside the element passed as argument.\r\n   */\r\n  function _wrapElement(el, temp) {\r\n    let default_tag = defaultTag()\r\n\r\n    if (temp) {\r\n      default_tag = 'div'\r\n    }\r\n\r\n    if (default_tag) {\r\n\r\n      // Rewrite the entire content.\r\n      const main_doc = editor.doc.createDocumentFragment()\r\n\r\n      // Anchor.\r\n      let anchor = null\r\n\r\n      // If we found anything inside the current anchor.\r\n      let found = false\r\n\r\n      let node = el.firstChild\r\n\r\n      let changed = false\r\n\r\n      // Loop through contents.\r\n      while (node) {\r\n        const next_node = node.nextSibling\r\n\r\n        // Current node is a block node.\r\n        // Or it is a do not wrap node and not a fr-marker.\r\n        if (node.nodeType === Node.ELEMENT_NODE && (editor.node.isBlock(node) || editor.opts.htmlDoNotWrapTags.indexOf(node.tagName.toLowerCase()) >= 0 && !editor.node.hasClass(node, 'fr-marker'))) {\r\n          anchor = null\r\n          main_doc.appendChild(node.cloneNode(true))\r\n        }\r\n\r\n        // Other node types than element and text.\r\n        else if (node.nodeType !== Node.ELEMENT_NODE && node.nodeType !== Node.TEXT_NODE) {\r\n          anchor = null\r\n          main_doc.appendChild(node.cloneNode(true))\r\n        }\r\n\r\n        // Current node is BR.\r\n        else if (node.tagName === 'BR') {\r\n\r\n          // There is no anchor.\r\n          if (anchor === null) {\r\n            anchor = editor.doc.createElement(default_tag)\r\n            changed = true\r\n\r\n            if (temp) {\r\n              anchor.setAttribute('class', 'fr-temp-div')\r\n              anchor.setAttribute('data-empty', true)\r\n            }\r\n\r\n            anchor.appendChild(node.cloneNode(true))\r\n\r\n            main_doc.appendChild(anchor)\r\n          }\r\n\r\n          // There is anchor. Just remove BR.\r\n          // There is nothing else except markers and BR inside the new formed tag.\r\n          else if (found === false) {\r\n            anchor.appendChild(editor.doc.createElement('br'))\r\n\r\n            if (temp) {\r\n              anchor.setAttribute('class', 'fr-temp-div')\r\n              anchor.setAttribute('data-empty', true)\r\n            }\r\n          }\r\n\r\n          anchor = null\r\n        }\r\n\r\n        // Text node or other node type.\r\n        else {\r\n          const txt = node.textContent\r\n\r\n          // Node is not text node.\r\n          // Node is text node and it doesn't contain only spaces and NL.\r\n          // There are empty spaces but no new lines.\r\n          if (node.nodeType !== Node.TEXT_NODE || (txt.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 || (txt.replace(/(^ *)|( *$)/g, '').length && txt.indexOf('\\n') < 0))) {\r\n\r\n            // No anchor.\r\n            if (anchor === null) {\r\n              anchor = editor.doc.createElement(default_tag)\r\n              changed = true\r\n\r\n              if (temp) {\r\n                anchor.setAttribute('class', 'fr-temp-div')\r\n              }\r\n              main_doc.appendChild(anchor)\r\n\r\n              found = false\r\n            }\r\n\r\n            // Add node to anchor.\r\n            anchor.appendChild(node.cloneNode(true))\r\n\r\n            // Check if maybe we have a non empty node.\r\n            if (!found && (!editor.node.hasClass(node, 'fr-marker') && !(node.nodeType === Node.TEXT_NODE && txt.replace(/ /g, '').length === 0))) {\r\n              found = true\r\n            }\r\n          }\r\n          else {\r\n            changed = true;\r\n          }\r\n\r\n          // Else skip the node because it's empty.\r\n        }\r\n\r\n        node = next_node\r\n      }\r\n\r\n      if (changed) {\r\n        el.innerHTML = ''\r\n        el.appendChild(main_doc)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _wrapElements(els, temp) {\r\n    for (let i = els.length - 1; i >= 0; i--) {\r\n      _wrapElement(els[i], temp)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Wrap the direct content inside the default block tag.\r\n   */\r\n  function _wrap(temp, tables, blockquote, inner, li) {\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    if (typeof temp === 'undefined') {\r\n      temp = false\r\n    }\r\n\r\n    if (typeof tables === 'undefined') {\r\n      tables = false\r\n    }\r\n\r\n    if (typeof blockquote === 'undefined') {\r\n      blockquote = false\r\n    }\r\n\r\n    if (typeof inner === 'undefined') {\r\n      inner = false\r\n    }\r\n\r\n    if (typeof li === 'undefined') {\r\n      li = false\r\n    }\r\n\r\n    // Wrap element.\r\n    const wp_st = editor.$wp.scrollTop()\r\n\r\n    _wrapElement(editor.el, temp)\r\n\r\n    if (inner) {\r\n      _wrapElements(editor.el.querySelectorAll('.fr-inner'), temp)\r\n    }\r\n\r\n    // Wrap table contents.\r\n    if (tables) {\r\n      _wrapElements(editor.el.querySelectorAll('td, th'), temp)\r\n    }\r\n\r\n    // Wrap table contents.\r\n    if (blockquote) {\r\n      _wrapElements(editor.el.querySelectorAll('blockquote'), temp)\r\n    }\r\n\r\n    if (li) {\r\n      _wrapElements(editor.el.querySelectorAll('li'), temp)\r\n    }\r\n\r\n    if (wp_st !== editor.$wp.scrollTop()) {\r\n      editor.$wp.scrollTop(wp_st)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unwrap temporary divs.\r\n   */\r\n  function unwrap() {\r\n    editor.$el.find('div.fr-temp-div').each(function () {\r\n      if (this.previousSibling && this.previousSibling.nodeType === Node.TEXT_NODE) {\r\n        $(this).before('<br>')\r\n      }\r\n\r\n      if ($(this).attr('data-empty') || !this.nextSibling || editor.node.isBlock(this.nextSibling) && !$(this.nextSibling).hasClass('fr-temp-div')) {\r\n        $(this).replaceWith($(this).html())\r\n      }\r\n      else {\r\n        $(this).replaceWith(`${$(this).html()}<br>`)\r\n      }\r\n    })\r\n\r\n    // Remove temp class from other blocks.\r\n    editor.$el.find('.fr-temp-div').removeClass('fr-temp-div').filter(function () {\r\n\r\n      return $(this).attr('class') === ''\r\n    }).removeAttr('class')\r\n  }\r\n\r\n  /**\r\n   * Add BR inside empty elements.\r\n   */\r\n  function fillEmptyBlocks(around_markers) {\r\n    const blocks = emptyBlocks(around_markers)\r\n\r\n    if (editor.node.isEmpty(editor.el) && editor.opts.enter === FE.ENTER_BR) {\r\n      blocks.push(editor.el)\r\n    }\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      const block = blocks[i]\r\n\r\n      if (block.getAttribute('contenteditable') !== 'false' &&\r\n          !block.querySelector(`${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`) &&\r\n          !editor.node.isVoid(block)) {\r\n        if (block.tagName !== 'TABLE' && block.tagName !== 'TBODY' && block.tagName !== 'TR' && block.tagName !== 'UL' && block.tagName !== 'OL') {\r\n          block.appendChild(editor.doc.createElement('br'))\r\n        }\r\n      }\r\n    }\r\n\r\n    // Fix for https://github.com/froala/wysiwyg-editor/issues/1166#issuecomment-204549406.\r\n    if (editor.browser.msie && editor.opts.enter === FE.ENTER_BR) {\r\n      const contents = editor.node.contents(editor.el)\r\n\r\n      if (contents.length && contents[contents.length - 1].nodeType === Node.TEXT_NODE) {\r\n        editor.$el.append('<br>')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the blocks inside the editable area.\r\n   */\r\n  function blocks() {\r\n\r\n    return editor.$el.get(0).querySelectorAll(blockTagsQuery())\r\n  }\r\n\r\n  /**\r\n   * Clean the blank spaces between the block tags.\r\n   */\r\n  function cleanBlankSpaces(el) {\r\n    if (typeof el === 'undefined') {\r\n      el = editor.el\r\n    }\r\n\r\n    if (el && ['SCRIPT', 'STYLE', 'PRE'].indexOf(el.tagName) >= 0) {\r\n      return false\r\n    }\r\n\r\n    const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => node.textContent.match(/([ \\n]{2,})|(^[ \\n]{1,})|([ \\n]{1,}$)/g) !== null), false)\r\n\r\n    while (walker.nextNode()) {\r\n\r\n      const node = walker.currentNode\r\n\r\n      if (isPreformatted(node.parentNode, true)) {\r\n        continue\r\n      }\r\n\r\n      const is_block_or_element = editor.node.isBlock(node.parentNode) || editor.node.isElement(node.parentNode)\r\n\r\n      // Remove middle spaces.\r\n      // Replace new lines with spaces.\r\n      // Replace begin/end spaces.\r\n      let txt = node.textContent\r\n        .replace(/(?!^)( ){2,}(?!$)/g, ' ')\r\n        .replace(/\\n/g, ' ')\r\n        .replace(/^[ ]{2,}/g, ' ')\r\n        .replace(/[ ]{2,}$/g, ' ')\r\n\r\n      if (is_block_or_element) {\r\n        const p_node = node.previousSibling\r\n        const n_node = node.nextSibling\r\n\r\n        if (p_node && n_node && txt === ' ') {\r\n          if (editor.node.isBlock(p_node) && editor.node.isBlock(n_node)) {\r\n            txt = ''\r\n          }\r\n          else {\r\n            txt = ' '\r\n          }\r\n        }\r\n        else {\r\n\r\n          // No previous siblings.\r\n          if (!p_node) {\r\n            txt = txt.replace(/^ */, '')\r\n          }\r\n\r\n          // No next siblings.\r\n          if (!n_node) {\r\n            txt = txt.replace(/ *$/, '')\r\n          }\r\n        }\r\n      }\r\n\r\n      node.textContent = txt\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract a specific match for a RegEx.\r\n   */\r\n  function _extractMatch(html, re, id) {\r\n    const reg_exp = new RegExp(re, 'gi')\r\n    const matches = reg_exp.exec(html)\r\n\r\n    if (matches) {\r\n\r\n      return matches[id]\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * Create new doctype.\r\n   */\r\n  function _newDoctype(string, doc) {\r\n    const matches = string.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?\"?([^\"]*)\"? ?\"?([^\"]*)\"?>/i)\r\n\r\n    if (matches) {\r\n\r\n      return doc.implementation.createDocumentType(\r\n        matches[1],\r\n        matches[3],\r\n        matches[4]\r\n      )\r\n    }\r\n\r\n\r\n    return doc.implementation.createDocumentType('html')\r\n\r\n  }\r\n\r\n  /**\r\n   * Get string doctype of a document.\r\n   */\r\n  function getDoctype(doc) {\r\n    const node = doc.doctype\r\n    let doctype = '<!DOCTYPE html>'\r\n\r\n    if (node) {\r\n      doctype = `<!DOCTYPE ${\r\n        node.name\r\n      }${node.publicId ? ` PUBLIC \"${node.publicId}\"` : ''\r\n      }${!node.publicId && node.systemId ? ' SYSTEM' : ''\r\n      }${node.systemId ? ` \"${node.systemId}\"` : ''\r\n      }>`\r\n    }\r\n\r\n    return doctype\r\n  }\r\n\r\n  function _processBR(br) {\r\n    const parent_node = br.parentNode\r\n\r\n    if (parent_node && (editor.node.isBlock(parent_node) || editor.node.isElement(parent_node)) && ['TD', 'TH'].indexOf(parent_node.tagName) < 0) {\r\n      let prev_node = br.previousSibling\r\n      const next_node = br.nextSibling\r\n\r\n      // Ignore non characters.\r\n      while (prev_node && (prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.replace(/\\n|\\r/g, '').length === 0 || editor.node.hasClass(prev_node, 'fr-tmp'))) {\r\n        prev_node = prev_node.previousSibling\r\n      }\r\n\r\n      if (next_node) {\r\n        return false\r\n      }\r\n\r\n      // Previous node.\r\n      // Previous node is not BR.\r\n      // Previoues node is not block tag.\r\n      // No next node.\r\n      // Parent node has text.\r\n      // Previous node has text.\r\n      if (prev_node && parent_node && prev_node.tagName !== 'BR' && !editor.node.isBlock(prev_node) && !next_node && parent_node.textContent.replace(/\\u200B/g, '').length > 0 && prev_node.textContent.length > 0 && !editor.node.hasClass(prev_node, 'fr-marker')) {\r\n        // Fix for https://github.com/froala/wysiwyg-editor/issues/1166#issuecomment-204549406.\r\n        if (!(editor.el === parent_node && !next_node && editor.opts.enter === FE.ENTER_BR && editor.browser.msie)) {\r\n          br.parentNode.removeChild(br)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Regular node.\r\n    else if (parent_node && !(editor.node.isBlock(parent_node) || editor.node.isElement(parent_node))) {\r\n\r\n      // Check if we have something else than BR.\r\n      if (!br.previousSibling && !br.nextSibling && editor.node.isDeletable(br.parentNode)) {\r\n        _processBR(br.parentNode)\r\n      }\r\n    }\r\n  }\r\n\r\n  function cleanBRs() {\r\n    const brs = editor.el.getElementsByTagName('br')\r\n\r\n    for (let i = 0; i < brs.length; i++) {\r\n      _processBR(brs[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Normalize.\r\n   */\r\n  function _normalize() {\r\n    if (!editor.opts.htmlUntouched) {\r\n\r\n      // Remove empty tags.\r\n      cleanEmptyTags()\r\n\r\n      // Wrap possible text.\r\n      _wrap()\r\n\r\n      // Clean blank spaces.\r\n      cleanBlankSpaces()\r\n\r\n      // Normalize spaces.\r\n      editor.spaces.normalize(null, true)\r\n\r\n      // Add BR tag where it is necessary.\r\n      editor.html.fillEmptyBlocks()\r\n\r\n      // Clean lists.\r\n      editor.clean.lists()\r\n\r\n      // Clean tables.\r\n      editor.clean.tables()\r\n\r\n      // Convert to HTML5.\r\n      editor.clean.toHTML5()\r\n\r\n      // Remove unecessary brs.\r\n      editor.html.cleanBRs()\r\n    }\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n\r\n    // Check if editor is empty and add placeholder.\r\n    checkIfEmpty()\r\n\r\n    // Refresh placeholder.\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  function checkIfEmpty() {\r\n    if (editor.node.isEmpty(editor.el)) {\r\n      if (defaultTag() !== null) {\r\n\r\n        // There is no block tag inside the editor.\r\n        if (!editor.el.querySelector(blockTagsQuery()) &&\r\n              !editor.el.querySelector(`${editor.opts.htmlDoNotWrapTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\r\n          if (editor.core.hasFocus()) {\r\n            editor.$el.html(`<${defaultTag()}>${FE.MARKERS}<br/></${defaultTag()}>`)\r\n            editor.selection.restore()\r\n          }\r\n          else {\r\n            editor.$el.html(`<${defaultTag()}><br/></${defaultTag()}>`)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // There is nothing in the editor.\r\n        if (!editor.el.querySelector('*:not(.fr-marker):not(br)')) {\r\n          if (editor.core.hasFocus()) {\r\n            editor.$el.html(`${FE.MARKERS}<br/>`)\r\n            editor.selection.restore()\r\n          }\r\n          else {\r\n            editor.$el.html('<br/>')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function extractNode(html, tag) {\r\n\r\n    return _extractMatch(html, `<${tag}[^>]*?>([\\\\w\\\\W]*)</${tag}>`, 1)\r\n  }\r\n\r\n  function extractNodeAttrs(html, tag) {\r\n    const $dv = $(`<div ${_extractMatch(html, `<${tag}([^>]*?)>`, 1) || ''}>`)\r\n\r\n    return editor.node.rawAttributes($dv.get(0))\r\n  }\r\n\r\n  function extractDoctype(html) {\r\n\r\n    return (_extractMatch(html, '<!DOCTYPE([^>]*?)>', 0) || '<!DOCTYPE html>').replace(/\\n/g, ' ').replace(/ {2,}/g, ' ')\r\n  }\r\n\r\n  /*\r\n   * Set html to node.\r\n   */\r\n  function _setHtml($node, html) {\r\n\r\n    if (editor.opts.htmlExecuteScripts) {\r\n      $node.html(html)\r\n    }\r\n    else {\r\n      $node.get(0).innerHTML = html\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set HTML.\r\n   */\r\n  function set(html) {\r\n    let cleaned_html = editor.clean.html((html || '').trim(), [], [], editor.opts.fullPage)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2810 - issue 3\r\n    // not using decodeURI since we don't want to decode any html content. This fix is specific to decoding : symbol in th url.\r\n    let re = new RegExp('%3A//', 'g')\r\n    const clean_html = cleaned_html.replace(re, '://')\r\n\r\n    if (!editor.opts.fullPage) {\r\n      _setHtml(editor.$el, clean_html)\r\n    }\r\n    else {\r\n\r\n      // Get BODY data.\r\n      const body_html = extractNode(clean_html, 'body') || (clean_html.indexOf('<body') >= 0 ? '' : clean_html)\r\n      const body_attrs = extractNodeAttrs(clean_html, 'body')\r\n\r\n      // Get HEAD data.\r\n      let head_html = extractNode(clean_html, 'head') || '<title></title>'\r\n      const head_attrs = extractNodeAttrs(clean_html, 'head')\r\n\r\n      // Get HTML that might be in <head> other than meta tags.\r\n      // https://github.com/froala/wysiwyg-editor/issues/1208\r\n      const $dv = $('<div>')\r\n\r\n      $dv.append(head_html)\r\n        .contents().each(function () {\r\n          if (this.nodeType === Node.COMMENT_NODE || ['BASE', 'LINK', 'META', 'NOSCRIPT', 'SCRIPT', 'STYLE', 'TEMPLATE', 'TITLE'].indexOf(this.tagName) >= 0) {\r\n            this.parentNode.removeChild(this)\r\n          }\r\n        })\r\n\r\n      const head_bad_html = $dv.html().trim()\r\n\r\n      // Filter and keep only meta tags in <head>.\r\n      // https://html.spec.whatwg.org/multipage/dom.html#metadata-content-2\r\n      head_html = $('<div>')\r\n        .append(head_html)\r\n        .contents().map(function () {\r\n          if (this.nodeType === Node.COMMENT_NODE) {\r\n\r\n            return `<!--${this.nodeValue}-->`\r\n          }\r\n          else if (['BASE', 'LINK', 'META', 'NOSCRIPT', 'SCRIPT', 'STYLE', 'TEMPLATE', 'TITLE'].indexOf(this.tagName) >= 0) {\r\n            return this.outerHTML\r\n          }\r\n\r\n\r\n          return ''\r\n\r\n        }).toArray()\r\n        .join('')\r\n\r\n      // Get DOCTYPE.\r\n      const doctype = extractDoctype(clean_html)\r\n\r\n      // Get HTML attributes.\r\n      const html_attrs = extractNodeAttrs(clean_html, 'html')\r\n\r\n      _setHtml(editor.$el, `${head_bad_html}\\n${body_html}`)\r\n      editor.node.clearAttributes(editor.el)\r\n      editor.$el.attr(body_attrs)\r\n      editor.$el.addClass('fr-view')\r\n      editor.$el.attr('spellcheck', editor.opts.spellcheck)\r\n      editor.$el.attr('dir', editor.opts.direction)\r\n\r\n      _setHtml(editor.$head, head_html)\r\n      editor.node.clearAttributes(editor.$head.get(0))\r\n      editor.$head.attr(head_attrs)\r\n\r\n      editor.node.clearAttributes(editor.$html.get(0))\r\n\r\n      editor.$html.attr(html_attrs)\r\n\r\n      editor.iframe_document.doctype.parentNode.replaceChild(\r\n        _newDoctype(doctype, editor.iframe_document),\r\n        editor.iframe_document.doctype\r\n      )\r\n    }\r\n\r\n    // Make sure the content is editable.\r\n    const disabled = editor.edit.isDisabled()\r\n    editor.edit.on()\r\n\r\n    editor.core.injectStyle(editor.opts.iframeDefaultStyle + editor.opts.iframeStyle)\r\n\r\n    _normalize()\r\n\r\n    if (!editor.opts.useClasses) {\r\n\r\n      // Restore orignal attributes if present.\r\n      editor.$el.find('[fr-original-class]').each(function () {\r\n        this.setAttribute('class', this.getAttribute('fr-original-class'))\r\n        this.removeAttribute('fr-original-class')\r\n      })\r\n\r\n      editor.$el.find('[fr-original-style]').each(function () {\r\n        this.setAttribute('style', this.getAttribute('fr-original-style'))\r\n        this.removeAttribute('fr-original-style')\r\n      })\r\n    }\r\n\r\n    if (disabled) {\r\n      editor.edit.off()\r\n    }\r\n\r\n    editor.events.trigger('html.set')\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1920\t\t\r\n    editor.events.trigger('charCounter.update');\r\n  }\r\n\r\n  function _specifity(selector) {\r\n    const idRegex = /(#[^\\s+>~.[:]+)/g\r\n    const attributeRegex = /(\\[[^]]+\\])/g\r\n    const classRegex = /(\\.[^\\s+>~.[:]+)/g\r\n    const pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi\r\n    const pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi\r\n\r\n    // A regex for other pseudo classes, which don't have brackets\r\n    const pseudoClassRegex = /(:[^\\s+>~.[:]+)/g\r\n    const elementRegex = /([^\\s+>~.[:]+)/g;\r\n\r\n    // Remove the negation psuedo-class (:not) but leave its argument because specificity is calculated on its argument\r\n    (function () {\r\n      const regex = /:not\\(([^)]*)\\)/g\r\n\r\n      if (regex.test(selector)) {\r\n        selector = selector.replace(regex, '     $1 ')\r\n      }\r\n    }())\r\n\r\n    let s = (selector.match(idRegex) || []).length * 100 +\r\n            (selector.match(attributeRegex) || []).length * 10 +\r\n            (selector.match(classRegex) || []).length * 10 +\r\n            (selector.match(pseudoClassWithBracketsRegex) || []).length * 10 +\r\n            (selector.match(pseudoClassRegex) || []).length * 10 +\r\n            (selector.match(pseudoElementRegex) || []).length\r\n\r\n    // Remove universal selector and separator characters\r\n    selector = selector.replace(/[*\\s+>~]/g, ' ')\r\n\r\n    // Remove any stray dots or hashes which aren't attached to words\r\n    // These may be present if the user is live-editing this selector\r\n    selector = selector.replace(/[#.]/g, ' ')\r\n\r\n    s += (selector.match(elementRegex) || []).length\r\n\r\n    return s\r\n  }\r\n\r\n  /**\r\n   * Do processing on the final html.\r\n   */\r\n  function _processOnGet(el) {\r\n    editor.events.trigger('html.processGet', [el])\r\n\r\n    // Remove class attribute when empty.\r\n    if (el && el.getAttribute && el.getAttribute('class') === '') {\r\n      el.removeAttribute('class')\r\n    }\r\n\r\n    if (el && el.getAttribute && el.getAttribute('style') === '') {\r\n      el.removeAttribute('style')\r\n    }\r\n\r\n    // Look at inner nodes that have no class set.\r\n    if (el && el.nodeType === Node.ELEMENT_NODE) {\r\n      const els = el.querySelectorAll('[class=\"\"],[style=\"\"]')\r\n      let i\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        const _el = els[i]\r\n\r\n        if (_el.getAttribute('class') === '') {\r\n          _el.removeAttribute('class')\r\n        }\r\n\r\n        if (_el.getAttribute('style') === '') {\r\n          _el.removeAttribute('style')\r\n        }\r\n      }\r\n\r\n      if (el.tagName === 'BR') {\r\n        _processBR(el)\r\n      }\r\n      else {\r\n        const brs = el.querySelectorAll('br')\r\n\r\n        for (i = 0; i < brs.length; i++) {\r\n          _processBR(brs[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sort elements by spec.\r\n   */\r\n  function _sortElementsBySpec(a, b) {\r\n    return a[3] - b[3]\r\n  }\r\n\r\n  /**\r\n   * Sync inputs when getting the HTML.\r\n   */\r\n  function syncInputs() {\r\n    const inputs = editor.el.querySelectorAll('input, textarea')\r\n\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      if (inputs[i].type === 'checkbox' || inputs[i].type === 'radio') {\r\n        if (inputs[i].checked) {\r\n          inputs[i].setAttribute('checked', inputs[i].checked)\r\n        } else {\r\n          editor.$(inputs[i]).removeAttr('checked')\r\n        }\r\n      }\r\n\r\n      /**\r\n       * if the input type has value attribute then only updating the value atrribute.\r\n       * Submit and Reset buttons default value is type names\r\n       */ \r\n      if (inputs[i].getAttribute('value')) {\r\n        inputs[i].setAttribute('value', inputs[i].value)\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Get HTML.\r\n   */\r\n  function get(keep_markers, keep_classes) {\r\n    if (!editor.$wp) {\r\n\r\n      return editor.$oel.clone()\r\n        .removeClass('fr-view')\r\n        .removeAttr('contenteditable')\r\n        .get(0).outerHTML\r\n    }\r\n\r\n    let html = ''\r\n\r\n    editor.events.trigger('html.beforeGet')\r\n\r\n    // Convert STYLE from CSS files to inline style.\r\n    const updated_elms = []\r\n    const elms_info = {}\r\n    let i\r\n    let j\r\n    const elems_specs = []\r\n\r\n    syncInputs();\r\n\r\n    if (!editor.opts.useClasses && !keep_classes) {\r\n      const ignoreRegEx = new RegExp(`^${editor.opts.htmlIgnoreCSSProperties.join('$|^')}$`, 'gi')\r\n\r\n      for (i = 0; i < editor.doc.styleSheets.length; i++) {\r\n        let rules\r\n        let head_style = 0\r\n\r\n        try {\r\n          rules = editor.doc.styleSheets[i].cssRules\r\n\r\n          if (editor.doc.styleSheets[i].ownerNode && editor.doc.styleSheets[i].ownerNode.nodeType === 'STYLE') {\r\n            head_style = 1\r\n          }\r\n        }\r\n        catch (ex) {\r\n          // keep empty.\r\n        }\r\n\r\n        if (rules) {\r\n          for (let idx = 0, len = rules.length; idx < len; idx++) {\r\n            if (rules[idx].selectorText) {\r\n              if (rules[idx].style.cssText.length > 0) {\r\n                const selector = rules[idx].selectorText.replace(/body |\\.fr-view /g, '').replace(/::/g, ':')\r\n                let elms\r\n\r\n                try {\r\n                  elms = editor.el.querySelectorAll(selector)\r\n                }\r\n                catch (ex) {\r\n                  elms = []\r\n                }\r\n\r\n                for (j = 0; j < elms.length; j++) {\r\n\r\n                  // Save original style.\r\n                  if (!elms[j].getAttribute('fr-original-style') && elms[j].getAttribute('style')) {\r\n                    elms[j].setAttribute('fr-original-style', elms[j].getAttribute('style'))\r\n                    updated_elms.push(elms[j])\r\n                  }\r\n                  else if (!elms[j].getAttribute('fr-original-style')) {\r\n                    elms[j].setAttribute('fr-original-style', '')\r\n                    updated_elms.push(elms[j])\r\n                  }\r\n\r\n                  if (!elms_info[elms[j]]) {\r\n                    elms_info[elms[j]] = {}\r\n                  }\r\n\r\n                  // Compute specification.\r\n                  const spec = head_style * 1000 + _specifity(rules[idx].selectorText)\r\n\r\n                  // Get CSS text of the rule.\r\n                  const css_text = rules[idx].style.cssText.split(';')\r\n\r\n                  // Get each rule.\r\n                  for (let k = 0; k < css_text.length; k++) {\r\n\r\n                    // Rule.\r\n                    const rule = css_text[k].trim().split(':')[0]\r\n\r\n                    if (!rule) {\r\n                      continue\r\n                    }\r\n\r\n                    // Ignore the CSS rules we don't need.\r\n                    if (rule.match(ignoreRegEx)) {\r\n                      continue\r\n                    }\r\n\r\n                    if (!elms_info[elms[j]][rule]) {\r\n                      elms_info[elms[j]][rule] = 0\r\n\r\n                      if ((elms[j].getAttribute('fr-original-style') || '').indexOf(`${rule}:`) >= 0) {\r\n                        elms_info[elms[j]][rule] = 10000\r\n                      }\r\n                    }\r\n\r\n                    // Current spec is higher than the existing one.\r\n                    if (spec >= elms_info[elms[j]][rule]) {\r\n                      elms_info[elms[j]][rule] = spec\r\n\r\n                      if (css_text[k].trim().length) {\r\n\r\n                        const info = css_text[k].trim().split(':')\r\n                        info.splice(0, 1)\r\n\r\n                        // Add elements with css values and spec. This will be sorted later.\r\n                        elems_specs.push([elms[j], rule.trim(), info.join(':').trim(), spec])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Sort elements by spec.\r\n      elems_specs.sort(_sortElementsBySpec)\r\n\r\n      // Add style to elements in the order of specification.\r\n      for (i = 0; i < elems_specs.length; i++) {\r\n        const specs_elem = elems_specs[i]\r\n        specs_elem[0].style[specs_elem[1]] = specs_elem[2]\r\n      }\r\n\r\n      // Save original class.\r\n      for (i = 0; i < updated_elms.length; i++) {\r\n        if (updated_elms[i].getAttribute('class')) {\r\n          updated_elms[i].setAttribute('fr-original-class', updated_elms[i].getAttribute('class'))\r\n          updated_elms[i].removeAttribute('class')\r\n        }\r\n\r\n        // Make sure that we have the inline style first.\r\n        if ((updated_elms[i].getAttribute('fr-original-style') || '').trim().length > 0) {\r\n          const original_rules = updated_elms[i].getAttribute('fr-original-style').split(';')\r\n\r\n          for (j = 0; j < original_rules.length; j++) {\r\n            if (original_rules[j].indexOf(':') > 0) {\r\n              const splits = original_rules[j].split(':')\r\n              const original_rule = splits[0]\r\n              splits.splice(0, 1)\r\n\r\n              updated_elms[i].style[original_rule.trim()] = splits.join(':').trim()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // If editor is not empty.\r\n    if (!editor.node.isEmpty(editor.el)) {\r\n      if (typeof keep_markers === 'undefined') {\r\n        keep_markers = false\r\n      }\r\n\r\n      if (!editor.opts.fullPage) {\r\n        html = editor.$el.html()\r\n      }\r\n      else {\r\n        html = getDoctype(editor.iframe_document)\r\n        editor.$el.removeClass('fr-view')\r\n        const heightMin = editor.opts.heightMin\r\n        const height = editor.opts.height;\r\n        const heightMax = editor.opts.heightMax;\r\n        editor.opts.heightMin = null\r\n        editor.opts.height = null;\r\n        editor.opts.heightMax = null;\r\n        editor.size.refresh()\r\n        html += `<html${editor.node.attributes(editor.$html.get(0))}>${editor.$html.html()}</html>`\r\n        editor.opts.heightMin = heightMin\r\n        editor.opts.height = height;\r\n        editor.opts.heightMax = heightMax;\r\n        editor.size.refresh()\r\n        editor.$el.addClass('fr-view')\r\n      }\r\n    }\r\n    else if (editor.opts.fullPage) {\r\n      html = getDoctype(editor.iframe_document)\r\n      html += `<html${editor.node.attributes(editor.$html.get(0))}>${editor.$html.find('head').get(0).outerHTML}<body></body></html>`\r\n    }\r\n\r\n    // Remove unwanted attributes.\r\n    if (!editor.opts.useClasses && !keep_classes) {\r\n      for (i = 0; i < updated_elms.length; i++) {\r\n        if (updated_elms[i].getAttribute('fr-original-class')) {\r\n          updated_elms[i].setAttribute('class', updated_elms[i].getAttribute('fr-original-class'))\r\n          updated_elms[i].removeAttribute('fr-original-class')\r\n        }\r\n\r\n        if (updated_elms[i].getAttribute('fr-original-style') !== null && typeof updated_elms[i].getAttribute('fr-original-style') !== 'undefined') {\r\n          if (updated_elms[i].getAttribute('fr-original-style').length !== 0) {\r\n            updated_elms[i].setAttribute('style', updated_elms[i].getAttribute('fr-original-style'))\r\n          }\r\n          else {\r\n            updated_elms[i].removeAttribute('style')\r\n          }\r\n\r\n          updated_elms[i].removeAttribute('fr-original-style')\r\n        }\r\n        else {\r\n          updated_elms[i].removeAttribute('style')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Clean helpers.\r\n    if (editor.opts.fullPage) {\r\n      html = html.replace(/<style data-fr-style=\"true\">(?:[\\w\\W]*?)<\\/style>/g, '')\r\n      html = html.replace(/<link([^>]*)data-fr-style=\"true\"([^>]*)>/g, '')\r\n      html = html.replace(/<style(?:[\\w\\W]*?)class=\"firebugResetStyles\"(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/style>/g, '')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) spellcheck=\"true\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$2>$3</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) contenteditable=\"(true|false)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$3>$4</body>')\r\n\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) dir=\"([\\w]*)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$3>$4</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?))class=\"([\\w\\W]*?)(fr-rtl|fr-ltr)([\\w\\W]*?)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1class=\"$2$4\"$5>$6</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) class=\"\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$2>$3</body>')\r\n    }\r\n\r\n    // Ampersand fix.\r\n    if (editor.opts.htmlSimpleAmpersand) {\r\n      html = html.replace(/&amp;/gi, '&')\r\n    }\r\n\r\n    editor.events.trigger('html.afterGet')\r\n\r\n    // Remove markers.\r\n    if (!keep_markers) {\r\n      html = html.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi, '')\r\n    }\r\n\r\n    html = editor.clean.invisibleSpaces(html)\r\n\r\n    html = editor.clean.exec(html, _processOnGet)\r\n\r\n    const new_html = editor.events.chainTrigger('html.get', html)\r\n\r\n    if (typeof new_html === 'string') {\r\n      html = new_html\r\n    }\r\n\r\n    // Deal with pre.\r\n    html = html.replace(/<pre(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/pre>/g, (str) => str.replace(/<br>/g, '\\n'))\r\n\r\n    // Keep META.\r\n    html = html.replace(/<meta((?:[\\w\\W]*?)) data-fr-http-equiv=\"/g, '<meta$1 http-equiv=\"')\r\n\r\n    return html\r\n  }\r\n\r\n  /**\r\n   * Get selected HTML.\r\n   */\r\n  function getSelected() {\r\n    function wrapSelection(container, node) {\r\n      while (node && (node.nodeType === Node.TEXT_NODE || !editor.node.isBlock(node)) && !editor.node.isElement(node) && !editor.node.hasClass(node, 'fr-inner')) {\r\n        if (node && node.nodeType !== Node.TEXT_NODE) {\r\n          $(container).wrapInner(editor.node.openTagString(node) + editor.node.closeTagString(node))\r\n        }\r\n\r\n        node = node.parentNode\r\n      }\r\n      // else if is for https://github.com/froala/wysiwyg-editor/issues/3352\r\n      if (node && container.innerHTML === node.innerHTML) {\r\n        container.innerHTML = node.outerHTML\r\n      }\r\n      else if (node.innerText.indexOf(container.innerHTML) != -1) {\r\n        container.innerHTML = editor.node.openTagString(node) + node.innerHTML + editor.node.closeTagString(node);\r\n      }\r\n    }\r\n\r\n    function selectionParent() {\r\n      let parent = null\r\n      let sel\r\n\r\n      if (editor.win.getSelection) {\r\n        sel = editor.win.getSelection()\r\n\r\n        if (sel && sel.rangeCount) {\r\n          parent = sel.getRangeAt(0).commonAncestorContainer\r\n\r\n          if (parent.nodeType !== Node.ELEMENT_NODE) {\r\n            parent = parent.parentNode\r\n          }\r\n        }\r\n      }\r\n      else if ((sel = editor.doc.selection) && sel.type !== 'Control') {\r\n        parent = sel.createRange().parentElement()\r\n      }\r\n\r\n      if (parent !== null && ($(parent).parents().toArray().indexOf(editor.el) >= 0 || parent === editor.el)) {\r\n\r\n        return parent\r\n      }\r\n\r\n\r\n      return null\r\n\r\n    }\r\n\r\n    let html = ''\r\n\r\n    if (typeof editor.win.getSelection !== 'undefined') {\r\n\r\n      // Multiple ranges hack.\r\n      if (editor.browser.mozilla) {\r\n        editor.selection.save()\r\n\r\n        if (editor.$el.find('.fr-marker[data-type=\"false\"]').length > 1) {\r\n          editor.$el.find('.fr-marker[data-type=\"false\"][data-id=\"0\"]').remove()\r\n          editor.$el.find('.fr-marker[data-type=\"false\"]:last').attr('data-id', '0')\r\n          editor.$el.find('.fr-marker').not('[data-id=\"0\"]').remove()\r\n        }\r\n        editor.selection.restore()\r\n      }\r\n\r\n      const ranges = editor.selection.ranges()\r\n\r\n      for (let i = 0; i < ranges.length; i++) {\r\n        let container = document.createElement('div')\r\n        container.appendChild(ranges[i].cloneContents())\r\n\r\n        wrapSelection(container, selectionParent())\r\n\r\n        // Fix for https://github.com/froala/wysiwyg-editor/issues/1010.\r\n        if ($(container).find('.fr-element').length > 0) {\r\n          container = editor.el\r\n        }\r\n\r\n        html += container.innerHTML\r\n      }\r\n    }\r\n    else if (typeof editor.doc.selection !== 'undefined') {\r\n      if (editor.doc.selection.type === 'Text') {\r\n        html = editor.doc.selection.createRange().htmlText\r\n      }\r\n    }\r\n\r\n    return html\r\n  }\r\n\r\n  function _hasBlockTags(html) {\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    return tmp.querySelector(blockTagsQuery()) !== null\r\n  }\r\n\r\n  function _setCursorAtEnd(html) {\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    editor.selection.setAtEnd(tmp, true)\r\n\r\n    return tmp.innerHTML\r\n  }\r\n\r\n  function escapeEntities(str) {\r\n\r\n    return str.replace(/</gi, '&lt;')\r\n      .replace(/>/gi, '&gt;')\r\n      .replace(/\"/gi, '&quot;')\r\n      .replace(/'/gi, '&#39;')\r\n  }\r\n\r\n  function _unwrapForLists(html) {\r\n    if (!editor.html.defaultTag()) {\r\n      return html\r\n    }\r\n\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1553. Unwrap default tags from lists.\r\n    const default_tag_els = tmp.querySelectorAll(`:scope > ${editor.html.defaultTag()}`)\r\n\r\n    for (let i = default_tag_els.length - 1; i >= 0; i--) {\r\n      const el = default_tag_els[i]\r\n\r\n      if (!editor.node.isBlock(el.previousSibling)) {\r\n\r\n        // Check previous sibling in order to add br.\r\n        if (el.previousSibling && !editor.node.isEmpty(el)) {\r\n          $('<br>').insertAfter(el.previousSibling)\r\n        }\r\n\r\n        // Unwrap.\r\n        el.outerHTML = el.innerHTML\r\n      }\r\n    }\r\n\r\n    return tmp.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Insert HTML.\r\n   */\r\n  function insert(dirty_html, clean, do_split) {\r\n\r\n    // There is no selection.\r\n    if (!editor.selection.isCollapsed()) {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    let clean_html\r\n\r\n    if (!clean) {\r\n      clean_html = editor.clean.html(dirty_html)\r\n    }\r\n    else {\r\n      clean_html = dirty_html\r\n    }\r\n\r\n    if (dirty_html.indexOf('class=\"fr-marker\"') < 0) {\r\n      clean_html = _setCursorAtEnd(clean_html)\r\n    }\r\n\r\n    // Editor is empty and there are block tags in the pasted HTML.\r\n    if (editor.node.isEmpty(editor.el) && !editor.opts.keepFormatOnDelete && _hasBlockTags(clean_html)) {\r\n      editor.el.innerHTML = clean_html\r\n    }\r\n    else {\r\n\r\n      // Insert a marker.\r\n      let marker = editor.markers.insert()\r\n\r\n      if (!marker) {\r\n        editor.el.innerHTML += clean_html\r\n      }\r\n      else {\r\n\r\n        // Do not insert html inside emoticon.\r\n        if (editor.node.isLastSibling(marker) && $(marker).parent().hasClass('fr-deletable')) {\r\n\r\n          $(marker).insertAfter($(marker).parent())\r\n        }\r\n\r\n        // Check if HTML contains block tags and if so then break the current HTML.\r\n        const block_parent = editor.node.blockParent(marker)\r\n\r\n        if ((_hasBlockTags(clean_html) || do_split) && (editor.node.deepestParent(marker) || block_parent && block_parent.tagName === 'LI')) {\r\n          if (block_parent && block_parent.tagName === 'LI') {\r\n            clean_html = _unwrapForLists(clean_html)\r\n          }\r\n\r\n          marker = editor.markers.split()\r\n\r\n          if (!marker) {\r\n            return false\r\n          }\r\n          marker.outerHTML = clean_html\r\n        }\r\n        else {\r\n          marker.outerHTML = clean_html\r\n        }\r\n      }\r\n    }\r\n\r\n    _normalize()\r\n    editor.keys.positionCaret()\r\n\r\n    editor.events.trigger('html.inserted')\r\n  }\r\n\r\n  /**\r\n   * Clean those tags that have an invisible space inside.\r\n   */\r\n  function cleanWhiteTags(ignore_selection) {\r\n    let current_el = null\r\n\r\n    if (typeof ignore_selection === 'undefined') {\r\n      current_el = editor.selection.element()\r\n    }\r\n\r\n    if (editor.opts.keepFormatOnDelete) {\r\n      return false\r\n    }\r\n\r\n    const current_white = current_el ? (current_el.textContent.match(/\\u200B/g) || []).length - current_el.querySelectorAll('.fr-marker').length : 0\r\n    const total_white = (editor.el.textContent.match(/\\u200B/g) || []).length - editor.el.querySelectorAll('.fr-marker').length\r\n\r\n    if (total_white === current_white) {\r\n      return false\r\n    }\r\n\r\n    let possible_elements\r\n    let removed\r\n\r\n    do {\r\n      removed = false\r\n      possible_elements = editor.el.querySelectorAll('*:not(.fr-marker)')\r\n\r\n      for (let i = 0; i < possible_elements.length; i++) {\r\n        const el = possible_elements[i]\r\n\r\n        if (current_el === el) {\r\n          continue\r\n        }\r\n\r\n        const text = el.textContent\r\n\r\n        if (el.children.length === 0 && text.length === 1 && text.charCodeAt(0) === 8203 && el.tagName !== 'TD') {\r\n          $(el).remove()\r\n          removed = true\r\n        }\r\n      }\r\n    } while (removed)\r\n  }\r\n\r\n  function _cleanTags() {\r\n    cleanWhiteTags()\r\n\r\n    if (editor.placeholder) {\r\n      setTimeout(editor.placeholder.refresh, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    editor.events.$on(editor.$el, 'mousemove', 'span.fr-word-select', function (e) {\r\n      let selection = window.getSelection()\r\n      selection = window.getSelection();\r\n      let range = document.createRange();\r\n      range.selectNodeContents(e.target);\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n    })\r\n    if (editor.$wp) {\r\n      editor.events.on('mouseup', _cleanTags)\r\n      editor.events.on('keydown', _cleanTags)\r\n      editor.events.on('contentChanged', checkIfEmpty)\r\n    }\r\n  }\r\n\r\n  return {\r\n    defaultTag,\r\n    isPreformatted,\r\n    emptyBlocks,\r\n    emptyBlockTagsQuery,\r\n    blockTagsQuery,\r\n    fillEmptyBlocks,\r\n    cleanEmptyTags,\r\n    cleanWhiteTags,\r\n    cleanBlankSpaces,\r\n    blocks,\r\n    getDoctype,\r\n    set,\r\n    syncInputs,\r\n    get,\r\n    getSelected,\r\n    insert,\r\n    wrap: _wrap,\r\n    unwrap,\r\n    escapeEntities,\r\n    checkIfEmpty,\r\n    extractNode,\r\n    extractNodeAttrs,\r\n    extractDoctype,\r\n    cleanBRs,\r\n    _init,\r\n    _setHtml\r\n  }\r\n}\r\n\r\n","import FE from '../../editor.js'\r\n\r\n// Enter possible actions.\r\nFE.ENTER_P = 0\r\nFE.ENTER_DIV = 1\r\nFE.ENTER_BR = 2\r\n\r\nFE.KEYCODE = {\r\n  BACKSPACE: 8,\r\n  TAB: 9,\r\n  ENTER: 13,\r\n  SHIFT: 16,\r\n  CTRL: 17,\r\n  ALT: 18,\r\n  ESC: 27,\r\n  SPACE: 32,\r\n  ARROW_LEFT: 37,\r\n  ARROW_UP: 38,\r\n  ARROW_RIGHT: 39,\r\n  ARROW_DOWN: 40,\r\n  DELETE: 46,\r\n  ZERO: 48,\r\n  ONE: 49,\r\n  TWO: 50,\r\n  THREE: 51,\r\n  FOUR: 52,\r\n  FIVE: 53,\r\n  SIX: 54,\r\n  SEVEN: 55,\r\n  EIGHT: 56,\r\n  NINE: 57,\r\n  FF_SEMICOLON: 59, // Firefox (Gecko) fires this for semicolon instead of 186\r\n  FF_EQUALS: 61, // Firefox (Gecko) fires this for equals instead of 187\r\n  QUESTION_MARK: 63, // needs localization\r\n  A: 65,\r\n  B: 66,\r\n  C: 67,\r\n  D: 68,\r\n  E: 69,\r\n  F: 70,\r\n  G: 71,\r\n  H: 72,\r\n  I: 73,\r\n  J: 74,\r\n  K: 75,\r\n  L: 76,\r\n  M: 77,\r\n  N: 78,\r\n  O: 79,\r\n  P: 80,\r\n  Q: 81,\r\n  R: 82,\r\n  S: 83,\r\n  T: 84,\r\n  U: 85,\r\n  V: 86,\r\n  W: 87,\r\n  X: 88,\r\n  Y: 89,\r\n  Z: 90,\r\n  META: 91,\r\n  NUM_ZERO: 96,\r\n  NUM_ONE: 97,\r\n  NUM_TWO: 98,\r\n  NUM_THREE: 99,\r\n  NUM_FOUR: 100,\r\n  NUM_FIVE: 101,\r\n  NUM_SIX: 102,\r\n  NUM_SEVEN: 103,\r\n  NUM_EIGHT: 104,\r\n  NUM_NINE: 105,\r\n  NUM_MULTIPLY: 106,\r\n  NUM_PLUS: 107,\r\n  NUM_MINUS: 109,\r\n  NUM_PERIOD: 110,\r\n  NUM_DIVISION: 111,\r\n\r\n  F1: 112,\r\n  F2: 113,\r\n  F3: 114,\r\n  F4: 115,\r\n  F5: 116,\r\n  F6: 117,\r\n  F7: 118,\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123,\r\n\r\n  FF_HYPHEN: 173, // Firefox (Gecko) fires this for hyphen instead of 189s\r\n  SEMICOLON: 186, // needs localization\r\n  DASH: 189, // needs localization\r\n  EQUALS: 187, // needs localization\r\n  COMMA: 188, // needs localization\r\n  HYPHEN: 189, // needs localization\r\n  PERIOD: 190, // needs localization\r\n  SLASH: 191, // needs localization\r\n  APOSTROPHE: 192, // needs localization\r\n  TILDE: 192, // needs localization\r\n  SINGLE_QUOTE: 222, // needs localization\r\n  OPEN_SQUARE_BRACKET: 219, // needs localization\r\n  BACKSLASH: 220, // needs localization\r\n  CLOSE_SQUARE_BRACKET: 221, // needs localization\r\n\r\n  IME: 229\r\n}\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  enter: FE.ENTER_P,\r\n  multiLine: true,\r\n  tabSpaces: 0\r\n})\r\n\r\nFE.MODULES.keys = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let IME = false\r\n\r\n  /**\r\n   * ENTER.\r\n   */\r\n  function _enter(e) {\r\n    if (!editor.opts.multiLine) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    }\r\n\r\n    // Not iOS.\r\n    else {\r\n\r\n      // Do not prevent default on IOS.\r\n      if (!editor.helpers.isIOS()) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n\r\n      editor.cursor.enter()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * SHIFT ENTER.\r\n   */\r\n  function _shiftEnter(e) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.opts.multiLine) {\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n\r\n      editor.cursor.enter(true)\r\n    }\r\n  }\r\n  /**\r\n   * Control/Command Backspace.\r\n   */\r\n  function _ctlBackspace() {\r\n\r\n    setTimeout(() => {\r\n      editor.events.disableBlur()\r\n      editor.events.focus()\r\n    }, 0)\r\n  }\r\n\r\n  /**\r\n   * BACKSPACE.\r\n   */\r\n  function _backspace(e) {\r\n\r\n    // There is no selection.\r\n    if (editor.selection.isCollapsed()) {\r\n      if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n        editor.cursor.backspace()\r\n      }\r\n\r\n      if (editor.helpers.isIOS()) {\r\n        const range = editor.selection.ranges(0)\r\n        range.deleteContents()\r\n        range.insertNode(document.createTextNode('\\u200B'))\r\n\r\n        const sel = editor.selection.get()\r\n        sel.modify('move', 'forward', 'character')\r\n      }\r\n      else {\r\n        if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n          e.preventDefault()\r\n        }\r\n\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // We have text selected.\r\n    else {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  /**\r\n   * DELETE\r\n   */\r\n  function _del(e) {\r\n    if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    e.stopPropagation()\r\n\r\n    // There is no selection or only image selection.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3342\r\n    if (editor.selection.text() === '' && (editor.selection.isCollapsed() || editor.selection.element().tagName != 'IMG')) {\r\n      editor.cursor.del();\r\n    }\r\n\r\n    // We have text selected.\r\n    else {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  /**\r\n   * SPACE\r\n   */\r\n  function _space(e) {\r\n    const el = editor.selection.element()\r\n\r\n    // Do nothing on mobile.\r\n    // Browser is Mozilla or we're inside a link tag.\r\n    if (!editor.helpers.isMobile() && (el && el.tagName === 'A')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n      const marker = editor.markers.insert()\r\n\r\n      if (marker) {\r\n        const prev_node = marker.previousSibling\r\n        const next_node = marker.nextSibling\r\n\r\n        if (!next_node && marker.parentNode && marker.parentNode.tagName === 'A') {\r\n          marker.parentNode.insertAdjacentHTML('afterend', `&nbsp;${FE.MARKERS}`)\r\n          marker.parentNode.removeChild(marker)\r\n        }\r\n        else {\r\n          if (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 1 && prev_node.textContent.charCodeAt(0) === 160) {\r\n            prev_node.textContent += ' '\r\n          }\r\n          else {\r\n            marker.insertAdjacentHTML('beforebegin', '&nbsp;')\r\n          }\r\n\r\n          marker.outerHTML = FE.MARKERS\r\n        }\r\n\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle typing in Korean for FF.\r\n   */\r\n  function _input() {\r\n\r\n    // Select is collapsed and we're not using IME.\r\n    if (editor.browser.mozilla && editor.selection.isCollapsed() && !IME) {\r\n      const range = editor.selection.ranges(0)\r\n      const start_container = range.startContainer\r\n      const start_offset = range.startOffset\r\n\r\n      // Start container is text and last char before cursor is space.\r\n      if (start_container && start_container.nodeType === Node.TEXT_NODE && start_offset <= start_container.textContent.length && start_offset > 0 && start_container.textContent.charCodeAt(start_offset - 1) === 32) {\r\n        editor.selection.save()\r\n        editor.spaces.normalize()\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cut.\r\n   */\r\n  function _cut() {\r\n    if (editor.selection.isFull()) {\r\n      setTimeout(() => {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag) {\r\n          editor.$el.html(`<${default_tag}>${FE.MARKERS}<br/></${default_tag}>`)\r\n        }\r\n        else {\r\n          editor.$el.html(`${FE.MARKERS}<br/>`)\r\n        }\r\n        editor.selection.restore()\r\n\r\n        editor.placeholder.refresh()\r\n        editor.button.bulkRefresh()\r\n        editor.undo.saveStep()\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tab.\r\n   */\r\n  function _tab(e) {\r\n    if (editor.opts.tabSpaces > 0) {\r\n      if (editor.selection.isCollapsed()) {\r\n        editor.undo.saveStep()\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        let str = ''\r\n\r\n        for (let i = 0; i < editor.opts.tabSpaces; i++) {\r\n          str += '&nbsp;'\r\n        }\r\n        editor.html.insert(str)\r\n        editor.placeholder.refresh()\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n      else {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        if (!e.shiftKey) {\r\n          editor.commands.indent()\r\n        }\r\n        else {\r\n          editor.commands.outdent()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Map keyPress actions.\r\n   */\r\n  function _mapKeyPress() {\r\n    IME = false\r\n  }\r\n\r\n  function _clearIME() {\r\n    IME = false\r\n  }\r\n\r\n  /**\r\n   * If is IME.\r\n   */\r\n  function isIME() {\r\n    return IME\r\n  }\r\n\r\n  let key_down_code\r\n\r\n  function _empty() {\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    if (default_tag) {\r\n      editor.$el.html(`<${default_tag}>${FE.MARKERS}<br/></${default_tag}>`)\r\n    }\r\n    else {\r\n      editor.$el.html(`${FE.MARKERS}<br/>`)\r\n    }\r\n\r\n    editor.selection.restore()\r\n  }\r\n    \r\n  /**\r\n   * https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n   * Extra Space after Image in list (ul, ol).\r\n   */\r\n\r\n  function ImageCaptionSpace(sel_el,e){\r\n    if(sel_el.innerHTML.indexOf('<span') > -1 || sel_el.parentElement.innerHTML.indexOf('<span') > -1 || sel_el.parentElement.parentElement.innerHTML.indexOf('<span') > -1){\r\n      if (sel_el.classList.contains('fr-img-space-wrap') || sel_el.parentElement.classList.contains('fr-img-space-wrap') || sel_el.parentElement.parentElement.classList.contains('fr-img-space-wrap')){\r\n        if($(sel_el.parentElement).is('p')){\r\n          let strHTML = sel_el.parentElement.innerHTML\r\n          strHTML = strHTML.replace(/<br>/g, '')\r\n          if(strHTML.length < 1){\r\n            sel_el.parentElement.insertAdjacentHTML('afterbegin', '&nbsp;');\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Backspace'){\r\n            _backspace(e)\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Delete'){\r\n            _del(e)\r\n          }\r\n          return true\r\n        }\r\n        else if($(sel_el).is('p')){\r\n          let orgStr = sel_el.innerHTML\r\n          let strHTML = orgStr.replace(/<br>/g, '')\r\n          if(strHTML.length < 1){\r\n            sel_el.insertAdjacentHTML('afterbegin', '&nbsp;');\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Backspace'){\r\n            _backspace(e)\r\n          }\r\n          else if (strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Delete'){\r\n            _del(e)\r\n          }\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Map keyDown actions.\r\n   */\r\n  function _mapKeyDown(e) {\r\n    const sel_el = editor.selection.element()\r\n\r\n    if (sel_el && ['INPUT', 'TEXTAREA'].indexOf(sel_el.tagName) >= 0) {\r\n      return true\r\n    }\r\n\r\n    if (e && isArrow(e.which)) {\r\n      return true\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n\r\n    const key_code = e.which\r\n\r\n    if (key_code === 16) {\r\n      return true\r\n    }\r\n\r\n    key_down_code = key_code\r\n\r\n    // Handle Japanese typing.\r\n    if (key_code === FE.KEYCODE.IME) {\r\n      IME = true\r\n\r\n      return true\r\n    }\r\n\r\n    IME = false\r\n\r\n\r\n    const char_key = isCharacter(key_code) && !ctrlKey(e) && !e.altKey\r\n    const del_key = key_code === FE.KEYCODE.BACKSPACE || key_code === FE.KEYCODE.DELETE\r\n\r\n    // 1. Selection is full.\r\n    // 2. Del key is hit, editor is empty and there is keepFormatOnDelete.\r\n    if (editor.selection.isFull() && !editor.opts.keepFormatOnDelete && !editor.placeholder.isVisible() || del_key && editor.placeholder.isVisible() && editor.opts.keepFormatOnDelete) {\r\n      if (char_key || del_key) {\r\n        _empty()\r\n\r\n        if (!isCharacter(key_code)) {\r\n          e.preventDefault()\r\n\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    // ENTER.\r\n    if (key_code === FE.KEYCODE.ENTER) {\r\n      //code edited https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      // added code for fr-inner class check\r\n      if (e.shiftKey || sel_el.classList.contains('fr-inner') || sel_el.parentElement.classList.contains('fr-inner')){\r\n        _shiftEnter(e)\r\n      }\r\n      else {\r\n        _enter(e)\r\n      }\r\n    }\r\n\r\n    // Ctrl/Command Backspace.\r\n    else if (key_code === FE.KEYCODE.BACKSPACE && (e.metaKey || e.ctrlKey)) {\r\n      _ctlBackspace()\r\n    }\r\n\r\n    // Backspace.\r\n    else if (key_code === FE.KEYCODE.BACKSPACE && !ctrlKey(e) && !e.altKey) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      if(ImageCaptionSpace(sel_el, e)){\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return\r\n      }\r\n      \r\n      if (!editor.placeholder.isVisible()) {\r\n        _backspace(e)\r\n      }\r\n      else {\r\n        if (!editor.opts.keepFormatOnDelete) {\r\n          _empty()\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // Delete.\r\n    else if (key_code === FE.KEYCODE.DELETE && !ctrlKey(e) && !e.altKey && !e.shiftKey) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      if(ImageCaptionSpace(sel_el, e)){\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return\r\n      }\r\n      \r\n      if (!editor.placeholder.isVisible()) {\r\n        _del(e)\r\n      }\r\n      else {\r\n        if (!editor.opts.keepFormatOnDelete) {\r\n          _empty()\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // Space.\r\n    else if (key_code === FE.KEYCODE.SPACE) {\r\n      _space(e)\r\n    }\r\n\r\n    // Tab.\r\n    else if (key_code === FE.KEYCODE.TAB) {\r\n      _tab(e)\r\n    }\r\n\r\n    // Char key.\r\n    else if (!ctrlKey(e) && isCharacter(e.which) && !editor.selection.isCollapsed() && !e.ctrlKey && !e.altKey) {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.events.enableBlur()\r\n  }\r\n\r\n  /**\r\n   * Remove U200B.\r\n   */\r\n  function _replaceU200B(el) {\r\n    const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => /\\u200B/gi.test(node.textContent)), false)\r\n\r\n    while (walker.nextNode()) {\r\n      const node = walker.currentNode\r\n\r\n      node.textContent = node.textContent.replace(/\\u200B/gi, '')\r\n    }\r\n  }\r\n\r\n  function positionCaret() {\r\n    if (!editor.$wp) {\r\n      return true\r\n    }\r\n\r\n    let info\r\n\r\n    if (!editor.opts.height && !editor.opts.heightMax) {\r\n\r\n      // Make sure we scroll bottom.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/834.\r\n      if (editor.opts.toolbarBottom) {\r\n        info += editor.opts.toolbarStickyOffset\r\n      }\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/432 . getBoundingRect will return different results in iframe because the viewport.\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      info += editor.opts.toolbarStickyOffset\r\n\r\n      if (info > editor.o_win.innerHeight - 20) {\r\n        $(editor.o_win)\r\n          .scrollTop(info + editor.helpers.scrollTop() - editor.o_win.innerHeight + 20)\r\n      }\r\n\r\n      // Make sure we scroll top.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/834.\r\n      if (!editor.opts.toolbarBottom) {\r\n        info -= editor.opts.toolbarStickyOffset\r\n      }\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/432 . getBoundingRect will return different results in iframe because the viewport.\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (info < 100) {\r\n        $(editor.o_win)\r\n          .scrollTop(info + editor.helpers.scrollTop() - 100)\r\n      }\r\n    }\r\n    else {\r\n\r\n      // Make sure we scroll bottom.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n      }\r\n\r\n      if (info > editor.$wp.offset()\r\n        .top - editor.helpers.scrollTop() + editor.$wp.height() - 20) {\r\n        editor.$wp.scrollTop(info + editor.$wp.scrollTop() - (editor.$wp.height() + editor.$wp.offset()\r\n          .top) + editor.helpers.scrollTop() + 20)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Map keyUp actions.\r\n   */\r\n  function _mapKeyUp(e) {\r\n    const sel_el = editor.selection.element()\r\n\r\n    if (sel_el && ['INPUT', 'TEXTAREA'].indexOf(sel_el.tagName) >= 0) {\r\n      return true\r\n    }\r\n\r\n    // When using iOS soft keyboard, in keyup we get 0 for keycode,\r\n    // therefore, we are using the one we got on keydown.\r\n    if (e && e.which === 0 && key_down_code) {\r\n      e.which = key_down_code\r\n    }\r\n\r\n    if (editor.helpers.isAndroid() && editor.browser.mozilla) {\r\n\r\n      return true\r\n    }\r\n\r\n    // IME IE.\r\n    if (IME) {\r\n      return false\r\n    }\r\n\r\n    // Revert ios default ENTER.\r\n    if (e && editor.helpers.isIOS() && e.which === FE.KEYCODE.ENTER) {\r\n      editor.doc.execCommand('undo')\r\n    }\r\n\r\n    if (!editor.selection.isCollapsed()) {\r\n      return true\r\n    }\r\n\r\n    if (e && (e.which === FE.KEYCODE.META || e.which === FE.KEYCODE.CTRL)) {\r\n      return true\r\n    }\r\n\r\n    if (e && isArrow(e.which)) {\r\n      return true\r\n    }\r\n\r\n    if (e && !editor.helpers.isIOS() && (e.which === FE.KEYCODE.ENTER || e.which === FE.KEYCODE.BACKSPACE || e.which >= 37 && e.which <= 40 && !editor.browser.msie)) {\r\n      try {\r\n        positionCaret()\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    // Remove invisible space where possible.\r\n    function has_invisible(node) {\r\n      if (!node) {\r\n        return false\r\n      }\r\n\r\n      let text = node.innerHTML\r\n      text = text.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi, '')\r\n\r\n      if (text && /\\u200B/.test(text) && text.replace(/\\u200B/gi, '')\r\n        .length > 0) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    function ios_CJK(el) {\r\n      const CJKRegEx = /[\\u3041-\\u3096\\u30A0-\\u30FF\\u4E00-\\u9FFF\\u3130-\\u318F\\uAC00-\\uD7AF]/gi\r\n\r\n      return !editor.helpers.isIOS() || ((el.textContent || '')\r\n        .match(CJKRegEx) || [])\r\n        .length === 0\r\n    }\r\n\r\n    // Get the selection element.\r\n    const el = editor.selection.element()\r\n\r\n    if (has_invisible(el) && !editor.node.hasClass(el, 'fr-marker') && el.tagName !== 'IFRAME' && ios_CJK(el)) {\r\n      editor.selection.save()\r\n      _replaceU200B(el)\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  // Check if we should consider that CTRL key is pressed.\r\n  function ctrlKey(e) {\r\n    if (navigator.userAgent.indexOf('Mac OS X') !== -1) {\r\n      if (e.metaKey && !e.altKey) {\r\n        return true\r\n      }\r\n    }\r\n    else if (e.ctrlKey && !e.altKey) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function isArrow(key_code) {\r\n    if (key_code >= FE.KEYCODE.ARROW_LEFT && key_code <= FE.KEYCODE.ARROW_DOWN) {\r\n\r\n      return true\r\n    }\r\n  }\r\n\r\n  function isCharacter(key_code) {\r\n    if (key_code >= FE.KEYCODE.ZERO &&\r\n      key_code <= FE.KEYCODE.NINE) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (key_code >= FE.KEYCODE.NUM_ZERO &&\r\n      key_code <= FE.KEYCODE.NUM_MULTIPLY) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (key_code >= FE.KEYCODE.A &&\r\n      key_code <= FE.KEYCODE.Z) {\r\n\r\n      return true\r\n    }\r\n\r\n    // Safari sends zero key code for non-latin characters.\r\n    if (editor.browser.webkit && key_code === 0) {\r\n\r\n      return true\r\n    }\r\n\r\n    switch (key_code) {\r\n    case FE.KEYCODE.SPACE:\r\n    case FE.KEYCODE.QUESTION_MARK:\r\n    case FE.KEYCODE.NUM_PLUS:\r\n    case FE.KEYCODE.NUM_MINUS:\r\n    case FE.KEYCODE.NUM_PERIOD:\r\n    case FE.KEYCODE.NUM_DIVISION:\r\n    case FE.KEYCODE.SEMICOLON:\r\n    case FE.KEYCODE.FF_SEMICOLON:\r\n    case FE.KEYCODE.DASH:\r\n    case FE.KEYCODE.EQUALS:\r\n    case FE.KEYCODE.FF_EQUALS:\r\n    case FE.KEYCODE.COMMA:\r\n    case FE.KEYCODE.PERIOD:\r\n    case FE.KEYCODE.SLASH:\r\n    case FE.KEYCODE.APOSTROPHE:\r\n    case FE.KEYCODE.SINGLE_QUOTE:\r\n    case FE.KEYCODE.OPEN_SQUARE_BRACKET:\r\n    case FE.KEYCODE.BACKSLASH:\r\n    case FE.KEYCODE.CLOSE_SQUARE_BRACKET:\r\n\r\n      return true\r\n    default:\r\n\r\n      return false\r\n    }\r\n\r\n  }\r\n\r\n  let _typing_timeout\r\n  let _temp_snapshot\r\n\r\n  function _typingKeyDown(e) {\r\n    const keycode = e.which\r\n\r\n    if (ctrlKey(e) || keycode >= 37 && keycode <= 40 || !isCharacter(keycode) && keycode !== FE.KEYCODE.DELETE && keycode !== FE.KEYCODE.BACKSPACE && keycode !== FE.KEYCODE.ENTER && keycode !== FE.KEYCODE.IME) {\r\n      return true\r\n    }\r\n\r\n    if (!_typing_timeout) {\r\n      _temp_snapshot = editor.snapshot.get()\r\n\r\n      if (!editor.undo.canDo()) {\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n\r\n    clearTimeout(_typing_timeout)\r\n    _typing_timeout = setTimeout(() => {\r\n      _typing_timeout = null\r\n      editor.undo.saveStep()\r\n    }, Math.max(250, editor.opts.typingTimer))\r\n  }\r\n\r\n  function _typingKeyUp(e) {\r\n    const keycode = e.which\r\n\r\n    if (ctrlKey(e) || keycode >= 37 && keycode <= 40) {\r\n      return true\r\n    }\r\n\r\n    if (_temp_snapshot && _typing_timeout) {\r\n      editor.undo.saveStep(_temp_snapshot)\r\n      _temp_snapshot = null\r\n    }\r\n\r\n    // iOS choosing suggestion.\r\n    else if ((typeof keycode === 'undefined' || keycode === 0) && !_temp_snapshot && !_typing_timeout) {\r\n      editor.undo.saveStep()\r\n    }\r\n  }\r\n\r\n  function forceUndo() {\r\n    if (_typing_timeout) {\r\n      clearTimeout(_typing_timeout)\r\n      editor.undo.saveStep()\r\n      _temp_snapshot = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if key event is part of browser accessibility.\r\n   */\r\n  function isBrowserAction(e) {\r\n    const keycode = e.which\r\n\r\n    return ctrlKey(e) || keycode === FE.KEYCODE.F5\r\n  }\r\n\r\n  // Node doesn't have a BR or text inside it.\r\n  function _isEmpty(node) {\r\n    if (node && node.tagName === 'BR') {\r\n      return false\r\n    }\r\n\r\n    // No text and no BR.\r\n    // Special case for image caption / video.\r\n    try {\r\n      return (node.textContent || '').length === 0 && node.querySelector && !node.querySelector(':scope > br') ||\r\n        node.childNodes && node.childNodes.length === 1 && node.childNodes[0].getAttribute && (node.childNodes[0].getAttribute('contenteditable') === 'false' || editor.node.hasClass(node.childNodes[0], 'fr-img-caption'))\r\n    }\r\n    catch (ex) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Allow typing after/before last element.\r\n   */\r\n  function _allowTypingOnEdges(e) {\r\n    const childs = editor.el.childNodes\r\n    const dt = editor.html.defaultTag()\r\n    let deep_parent = editor.node.blockParent(editor.selection.blocks()[0])\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n    if (deep_parent && deep_parent.tagName == 'TR' && deep_parent.getAttribute('contenteditable') == undefined) {\r\n      deep_parent = deep_parent.closest('table')\r\n    }\r\n\r\n    // https://github.com/CelestialSystem/froala-editor-js-2/tree/1303\r\n    // get the selected text block parent as deep_parent\r\n    // Check for content editable:false node and disable toolbar\r\n    if (!editor.node.isEditable(e.target) || (deep_parent && deep_parent.getAttribute('contenteditable') === 'false')) {\r\n      editor.toolbar.disable()\r\n    }\r\n    else {\r\n      editor.toolbar.enable()\r\n    }\r\n\r\n    if (e.target && e.target !== editor.el) {\r\n      return true\r\n    }\r\n\r\n    // No childs.\r\n    if (childs.length === 0) {\r\n      return true\r\n    }\r\n\r\n    // At the bottom.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3397\r\n    if ((childs[0].offsetHeight + childs[0].offsetTop) <= e.offsetY) {\r\n      if (_isEmpty(childs[childs.length - 1])) {\r\n        if (dt) {\r\n          editor.$el.append(`<${dt}>${FE.MARKERS}<br></${dt}>`)\r\n        }\r\n        else {\r\n          editor.$el.append(`${FE.MARKERS}<br>`)\r\n        }\r\n\r\n        // Restore selection and scroll.\r\n        editor.selection.restore()\r\n        positionCaret()\r\n      }\r\n    }\r\n\r\n    // At the top\r\n    else if (e.offsetY <= 10) {\r\n      if (_isEmpty(childs[0])) {\r\n        if (dt) {\r\n          editor.$el.prepend(`<${dt}>${FE.MARKERS}<br></${dt}>`)\r\n        }\r\n        else {\r\n          editor.$el.prepend(`${FE.MARKERS}<br>`)\r\n        }\r\n\r\n        // Restore selection and scroll.\r\n        editor.selection.restore()\r\n        positionCaret()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clearTypingTimer() {\r\n    if (_typing_timeout) {\r\n      clearTimeout(_typing_timeout)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.events.on('keydown', _typingKeyDown)\r\n    editor.events.on('input', _input)\r\n    editor.events.on('mousedown', _clearIME)\r\n    editor.events.on('keyup input', _typingKeyUp)\r\n\r\n    // Register for handling.\r\n    editor.events.on('keypress', _mapKeyPress)\r\n    editor.events.on('keydown', _mapKeyDown)\r\n    editor.events.on('keyup', _mapKeyUp)\r\n    editor.events.on('destroy', _clearTypingTimer)\r\n\r\n    editor.events.on('html.inserted', _mapKeyUp)\r\n\r\n    // Handle cut.\r\n    editor.events.on('cut', _cut)\r\n\r\n    // Click in editor at beginning / end.\r\n    if (editor.opts.multiLine) {\r\n      editor.events.on('click', _allowTypingOnEdges);\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    ctrlKey,\r\n    isCharacter,\r\n    isArrow,\r\n    forceUndo,\r\n    isIME,\r\n    isBrowserAction,\r\n    positionCaret\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  pastePlain: false,\r\n  pasteDeniedTags: ['colgroup', 'col', 'meta'],\r\n  pasteDeniedAttrs: ['class', 'id'],\r\n  pasteAllowedStyleProps: ['.*'],\r\n  pasteAllowLocalImages: false\r\n})\r\n\r\nFE.MODULES.paste = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let clipboard_html\r\n  let clipboard_rtf\r\n  let clipboard_txt\r\n  let $paste_div\r\n  let snapshot\r\n\r\n  function saveCopiedText(html, plain) {\r\n    try {\r\n      editor.win.localStorage.setItem('fr-copied-html', html)\r\n      editor.win.localStorage.setItem('fr-copied-text', plain)\r\n    }\r\n    catch (ex) {\r\n      // do no matter what\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle copy and cut.\r\n   */\r\n  function _handleCopy(e) {\r\n    const copied_html = editor.html.getSelected()\r\n    saveCopiedText(copied_html, $(editor.doc.createElement('div')).html(copied_html).text())\r\n\r\n    if (e.type === 'cut') {\r\n      editor.undo.saveStep()\r\n\r\n      setTimeout(() => {\r\n        editor.selection.save()\r\n        editor.html.wrap()\r\n        editor.selection.restore()\r\n        editor.events.focus()\r\n        editor.undo.saveStep()\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle pasting.\r\n   */\r\n  let stop_paste = false\r\n\r\n  function _handlePaste(e) {\r\n\r\n    // if content is copied in input tag do the normal paste.\r\n    if (e.target.nodeName === 'INPUT' && e.target.type === 'text') {\r\n      return true\r\n    }\r\n\r\n    if (editor.edit.isDisabled()) {\r\n      return false\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2067\r\n    if (isContetnEditable(e.target)) {\r\n      return false\r\n    }\r\n\r\n    if (stop_paste) {\r\n\r\n      return false\r\n    }\r\n\r\n    if (e.originalEvent) {\r\n      e = e.originalEvent\r\n    }\r\n\r\n    if (editor.events.trigger('paste.before', [e]) === false) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Read data from clipboard.\r\n    if (e && e.clipboardData && e.clipboardData.getData) {\r\n      let types = ''\r\n      const clipboard_types = e.clipboardData.types\r\n\r\n      if (editor.helpers.isArray(clipboard_types)) {\r\n        for (let i = 0; i < clipboard_types.length; i++) {\r\n          types += `${clipboard_types[i]};`\r\n        }\r\n      }\r\n      else {\r\n        types = clipboard_types\r\n      }\r\n\r\n      clipboard_html = ''\r\n\r\n      // Get rtf clipboard.\r\n      if (/text\\/rtf/.test(types)) {\r\n        clipboard_rtf = e.clipboardData.getData('text/rtf')\r\n      }\r\n\r\n      // HTML.\r\n      if (/text\\/html/.test(types) && !editor.browser.safari) {\r\n        clipboard_html = e.clipboardData.getData('text/html')\r\n      }\r\n\r\n      // Safari HTML.\r\n      else if (/text\\/rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = clipboard_rtf\r\n      }\r\n\r\n      // Safari HTML for iOS.\r\n      else if (/public.rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = e.clipboardData.getData('text/rtf')\r\n      }\r\n\r\n      clipboard_txt = e.clipboardData.getData('text')\r\n\r\n      if (clipboard_html !== '') {\r\n        _processPaste()\r\n\r\n        if (e.preventDefault) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n\r\n        return false\r\n      }\r\n\r\n      clipboard_html = null\r\n\r\n    }\r\n\r\n    // Normal paste.\r\n    _beforePaste()\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * check for contentEditable.\r\n   */\r\n  function isContetnEditable (el) {\r\n    return el && el.contentEditable === 'false'\r\n  }\r\n\r\n  /**\r\n   * Handle dropping content in the editor.\r\n   */\r\n  function _dropPaste(e) {\r\n    if (e.originalEvent) {\r\n      e = e.originalEvent\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2067\r\n    if (isContetnEditable(e.target)) {\r\n      return false\r\n    }\r\n\r\n    // Read data from clipboard.\r\n    if (e && e.dataTransfer && e.dataTransfer.getData) {\r\n      let types = ''\r\n      const clipboard_types = e.dataTransfer.types\r\n\r\n      if (editor.helpers.isArray(clipboard_types)) {\r\n        for (let i = 0; i < clipboard_types.length; i++) {\r\n          types += `${clipboard_types[i]};`\r\n        }\r\n      }\r\n      else {\r\n        types = clipboard_types\r\n      }\r\n\r\n      clipboard_html = ''\r\n\r\n      // Get rtf clipboard.\r\n      if (/text\\/rtf/.test(types)) {\r\n        clipboard_rtf = e.dataTransfer.getData('text/rtf')\r\n      }\r\n\r\n      // HTML.\r\n      if (/text\\/html/.test(types)) {\r\n        clipboard_html = e.dataTransfer.getData('text/html')\r\n      }\r\n\r\n      // Safari HTML.\r\n      else if (/text\\/rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = clipboard_rtf\r\n      }\r\n      else if (/text\\/plain/.test(types) && !this.browser.mozilla) {\r\n        clipboard_html = editor.html.escapeEntities(e.dataTransfer.getData('text/plain')).replace(/\\n/g, '<br>')\r\n      }\r\n\r\n      if (clipboard_html !== '') {\r\n        editor.keys.forceUndo()\r\n        snapshot = editor.snapshot.get()\r\n\r\n        // Save selection, but change markers class so that we can restore it later.\r\n        editor.selection.save()\r\n        editor.$el.find('.fr-marker').removeClass('fr-marker').addClass('fr-marker-helper')\r\n\r\n        // Insert marker point helper and change class to restore it later.\r\n        const ok = editor.markers.insertAtPoint(e)\r\n        editor.$el.find('.fr-marker').removeClass('fr-marker').addClass('fr-marker-placeholder')\r\n\r\n        // Restore selection and remove it.\r\n        editor.$el.find('.fr-marker-helper').addClass('fr-marker').removeClass('fr-marker-helper')\r\n        editor.selection.restore()\r\n        editor.selection.remove()\r\n\r\n        // Restore marker point helper.\r\n        editor.$el.find('.fr-marker-placeholder').addClass('fr-marker').removeClass('fr-marker-placeholder')\r\n\r\n        if (ok !== false) {\r\n          // Insert markers.\r\n          const marker = editor.el.querySelector('.fr-marker')\r\n\r\n          $(marker).replaceWith(FE.MARKERS)\r\n          editor.selection.restore()\r\n\r\n          _processPaste()\r\n\r\n          if (e.preventDefault) {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n          }\r\n\r\n          return false\r\n        }\r\n      }\r\n      else {\r\n        clipboard_html = null\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Before starting to paste.\r\n   */\r\n  function _beforePaste() {\r\n\r\n    // Save selection\r\n    editor.selection.save()\r\n    editor.events.disableBlur()\r\n\r\n    // Set clipboard HTML.\r\n    clipboard_html = null\r\n\r\n    // Remove and store the editable content\r\n    if (!$paste_div) {\r\n      $paste_div = $('<div contenteditable=\"true\" style=\"position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%; -moz-user-select: text; -webkit-user-select: text; -ms-user-select: text; user-select: text;\" tabIndex=\"-1\"></div>')\r\n\r\n      // Sketch app fix. https://github.com/froala/wysiwyg-editor/issues/2042\r\n      // Also: when using iframe Safari needs to have focus in the same window.\r\n      if (editor.browser.webkit || editor.browser.mozilla) {\r\n        $paste_div.css('top', editor.$sc.scrollTop())\r\n        editor.$el.after($paste_div)\r\n      }\r\n      else if (editor.browser.edge && editor.opts.iframe) {\r\n        editor.$el.append($paste_div)\r\n      }\r\n      else {\r\n        editor.$box.after($paste_div)\r\n      }\r\n\r\n      editor.events.on('destroy', () => {\r\n        $paste_div.remove()\r\n      })\r\n    }\r\n    else {\r\n      $paste_div.html('')\r\n\r\n      if (editor.browser.edge && editor.opts.iframe) {\r\n        editor.$el.append($paste_div)\r\n      }\r\n    }\r\n\r\n    let st;\r\n\r\n    // Prevent iOS scroll.\r\n    if (editor.helpers.isIOS() && editor.$sc) {\r\n      st = editor.$sc.scrollTop();\r\n    }\r\n\r\n    // Focus on the pasted div.\r\n    if (editor.opts.iframe) {\r\n      editor.$el.attr('contenteditable', 'false')\r\n    }\r\n    $paste_div.focus()\r\n\r\n    // Prevent iOS scroll.\r\n    if (editor.helpers.isIOS() && editor.$sc) {\r\n      editor.$sc.scrollTop(st);\r\n    }\r\n\r\n    // Process paste soon.\r\n    editor.win.setTimeout(_processPaste, 1)\r\n  }\r\n\r\n  /**\r\n   * Clean HTML that was pasted from Word.\r\n   */\r\n  function _wordClean(html) {\r\n\r\n    let i\r\n\r\n    // Single item list.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraph\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ul><li>$3</li></ul>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedText\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ol><li>$3</li></ol>'\r\n    )\r\n\r\n    // List start.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ul><li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ol><li$3>$5</li>'\r\n    )\r\n\r\n    // List middle.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListBullet\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n\r\n    // List end.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li></ul>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li></ol>'\r\n    )\r\n\r\n    // Clean list bullets.\r\n    html = html.replace(/<span([^<]*?)style=\"?'?mso-list:Ignore\"?'?([\\s\\S]*?)>([\\s\\S]*?)<span/gi, '<span><span')\r\n\r\n    // Webkit clean list bullets.\r\n    html = html.replace(/<!--\\[if !supportLists\\]-->([\\s\\S]*?)<!--\\[endif\\]-->/gi, '')\r\n    html = html.replace(/<!\\[if !supportLists\\]>([\\s\\S]*?)<!\\[endif\\]>/gi, '')\r\n\r\n    // Remove mso classes.\r\n    html = html.replace(/(\\n|\\r| class=(\")?Mso[a-zA-Z0-9]+(\")?)/gi, ' ')\r\n\r\n    // Remove comments.\r\n    html = html.replace(/<!--[\\s\\S]*?-->/gi, '')\r\n\r\n    // Remove tags but keep content.\r\n    html = html.replace(/<(\\/)*(meta|link|span|\\\\?xml:|st1:|o:|font)(.*?)>/gi, '')\r\n\r\n    // Remove no needed tags.\r\n    const word_tags = ['style', 'script', 'applet', 'embed', 'noframes', 'noscript']\r\n\r\n    for (i = 0; i < word_tags.length; i++) {\r\n      const regex = new RegExp(`<${word_tags[i]}.*?${word_tags[i]}(.*?)>`, 'gi')\r\n      html = html.replace(regex, '')\r\n    }\r\n\r\n    // Remove spaces.\r\n    html = html.replace(/&nbsp;/gi, ' ')\r\n\r\n    // Keep empty TH and TD.\r\n    html = html.replace(/<td([^>]*)><\\/td>/g, '<td$1><br></td>')\r\n    html = html.replace(/<th([^>]*)><\\/th>/g, '<th$1><br></th>')\r\n\r\n    // Remove empty tags.\r\n    let oldHTML\r\n\r\n    do {\r\n      oldHTML = html\r\n      html = html.replace(/<[^/>][^>]*><\\/[^>]+>/gi, '')\r\n    } while (html !== oldHTML)\r\n\r\n    // Process list indentation.\r\n    html = html.replace(/<lilevel([^1])([^>]*)>/gi, '<li data-indent=\"true\"$2>')\r\n    html = html.replace(/<lilevel1([^>]*)>/gi, '<li$1>')\r\n\r\n    // Clean HTML.\r\n    html = editor.clean.html(html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs)\r\n\r\n    // Clean empty links.\r\n    html = html.replace(/<a>(.[^<]+)<\\/a>/gi, '$1')\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1364.\r\n    html = html.replace(/<br> */g, '<br>')\r\n\r\n    // Process list indent.\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    const lis = div.querySelectorAll('li[data-indent]')\r\n\r\n    for (i = 0; i < lis.length; i++) {\r\n      const li = lis[i]\r\n\r\n      const p_li = li.previousElementSibling\r\n\r\n      if (p_li && p_li.tagName === 'LI') {\r\n        let list = p_li.querySelector(':scope > ul, :scope > ol')\r\n\r\n        if (!list) {\r\n          list = document.createElement('ul')\r\n          p_li.appendChild(list)\r\n        }\r\n\r\n        list.appendChild(li)\r\n      }\r\n      else {\r\n        li.removeAttribute('data-indent')\r\n      }\r\n    }\r\n\r\n    editor.html.cleanBlankSpaces(div)\r\n\r\n    html = div.innerHTML\r\n\r\n    return html\r\n  }\r\n\r\n  /**\r\n   * Plain clean.\r\n   */\r\n  function _plainPasteClean(html) {\r\n\r\n    let el = null\r\n    let i\r\n    const div = editor.doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    let els = div.querySelectorAll('p, div, h1, h2, h3, h4, h5, h6, pre, blockquote')\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      el = els[i]\r\n      el.outerHTML = `<${editor.html.defaultTag() || 'DIV'}>${el.innerText}</${editor.html.defaultTag() || 'DIV'}>`\r\n    }\r\n\r\n    els = div.querySelectorAll(`*:not(${'p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img'.split(',').join('):not(')})`)\r\n\r\n    for (i = els.length - 1; i >= 0; i--) {\r\n      el = els[i]\r\n      el.outerHTML = el.innerHTML\r\n    }\r\n\r\n    // Remove comments.\r\n    function cleanComments(node) {\r\n      const contents = editor.node.contents(node)\r\n\r\n      for (let i = 0; i < contents.length; i++) {\r\n        if (contents[i].nodeType !== Node.TEXT_NODE && contents[i].nodeType !== Node.ELEMENT_NODE) {\r\n          contents[i].parentNode.removeChild(contents[i])\r\n        }\r\n        else {\r\n          cleanComments(contents[i])\r\n        }\r\n      }\r\n    }\r\n\r\n    cleanComments(div)\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Process the pasted HTML.\r\n   */\r\n  function _processPaste() {\r\n    if (editor.opts.iframe) {\r\n      editor.$el.attr('contenteditable', 'true')\r\n    }\r\n    if (editor.browser.edge && editor.opts.iframe) {\r\n      editor.$box.after($paste_div)\r\n    }\r\n\r\n    // Save undo snapshot.\r\n    if (!snapshot) {\r\n      editor.keys.forceUndo()\r\n      snapshot = editor.snapshot.get()\r\n    }\r\n\r\n    // Cannot read from clipboard.\r\n    if (!clipboard_html) {\r\n      clipboard_html = $paste_div.get(0).innerHTML\r\n      clipboard_txt = $paste_div.text()\r\n\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    const is_word = clipboard_html.match(/(class=\"?Mso|class='?Mso|class=\"?Xl|class='?Xl|class=Xl|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument|LibreOffice)/gi)\r\n\r\n    // Trigger chain cleanp.\r\n    const response = editor.events.chainTrigger('paste.beforeCleanup', clipboard_html)\r\n\r\n    if (response && typeof response === 'string') {\r\n      clipboard_html = response\r\n    }\r\n\r\n    // Clean non-word or word if no plugin processed the paste.\r\n    if (!is_word || is_word && editor.events.trigger('paste.wordPaste', [clipboard_html]) !== false) {\r\n      clean(clipboard_html, is_word)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if pasted content comes from the editor.\r\n   */\r\n  function _isFromEditor() {\r\n    let possible_text = null\r\n\r\n    try {\r\n      possible_text = editor.win.localStorage.getItem('fr-copied-text')\r\n    }\r\n    catch (ex) {\r\n      // continue no matter what.a\r\n    }\r\n\r\n    // Updated to handle the whitespace mismatches while comparing.\r\n    if (possible_text && clipboard_txt && (clipboard_txt.replace(/\\u00A0/gi, ' ').replace(/\\r|\\n/gi, '') === possible_text.replace(/\\u00A0/gi, ' ').replace(/\\r|\\n/gi, '') || clipboard_txt.replace(/\\s/g, '') === possible_text.replace(/\\s/g, ''))) {\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function _buildTabs(len) {\r\n    let tabs = ''\r\n    let i = 0\r\n\r\n    while (i++ < len) {\r\n      tabs += '&nbsp;'\r\n    }\r\n\r\n    return tabs\r\n  }\r\n\r\n  /**\r\n   * Clean clipboard html.\r\n   */\r\n  function clean(clipboard_html, is_word, keep_formatting) {\r\n    let els = null\r\n    let el = null\r\n    let i\r\n\r\n    // Keep only body if there is.\r\n    if (clipboard_html.toLowerCase().indexOf('<body') >= 0) {\r\n      let style = ''\r\n\r\n      if (clipboard_html.indexOf('<style') >= 0) {\r\n        style = clipboard_html.replace(/[.\\s\\S\\w\\W<>]*(<style[^>]*>[\\s]*[.\\s\\S\\w\\W<>]*[\\s]*<\\/style>)[.\\s\\S\\w\\W<>]*/gi, '$1')\r\n      }\r\n\r\n      clipboard_html = style + clipboard_html.replace(/[.\\s\\S\\w\\W<>]*<body[^>]*>[\\s]*([.\\s\\S\\w\\W<>]*)[\\s]*<\\/body>[.\\s\\S\\w\\W<>]*/gi, '$1')\r\n      // Replace \\n within <pre> tag with <br /> to retain the formatting\r\n      clipboard_html = clipboard_html.replace(/<pre(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/pre>/g, (str) => str.replace(/ \\n/g, '<br />'))\r\n      clipboard_html = clipboard_html.replace(/ \\n/g, ' ').replace(/\\n /g, ' ').replace(/([^>])\\n([^<])/g, '$1 $2')\r\n    }\r\n\r\n    // Google Docs paste.\r\n    let is_gdocs = false\r\n\r\n    if (clipboard_html.indexOf('id=\"docs-internal-guid') >= 0) {\r\n      clipboard_html = clipboard_html.replace(/^[\\w\\W\\s\\S]* id=\"docs-internal-guid[^>]*>([\\w\\W\\s\\S]*)<\\/b>[\\w\\W\\s\\S]*$/g, '$1')\r\n      is_gdocs = true\r\n    }\r\n\r\n    if (clipboard_html.indexOf('content=\"Sheets\"') >= 0) {\r\n      clipboard_html = clipboard_html.replace(/width:0px;/g, '')\r\n    }\r\n\r\n    // Not word paste.\r\n    let is_editor_content = false\r\n\r\n    if (!is_word) {\r\n      is_editor_content = _isFromEditor()\r\n\r\n      // Remove pasting token.\r\n      if (is_editor_content) {\r\n        clipboard_html = editor.win.localStorage.getItem('fr-copied-html')\r\n      }\r\n\r\n      if (!is_editor_content) {\r\n        // Remove comments.\r\n        const htmlAllowedStylePropsCopy = editor.opts.htmlAllowedStyleProps\r\n        editor.opts.htmlAllowedStyleProps = editor.opts.pasteAllowedStyleProps\r\n        editor.opts.htmlAllowComments = false\r\n\r\n        // Pasting from Apple Notes.\r\n        clipboard_html = clipboard_html.replace(/<span class=\"Apple-tab-span\">\\s*<\\/span>/g, _buildTabs(editor.opts.tabSpaces || 4))\r\n        clipboard_html = clipboard_html.replace(/<span class=\"Apple-tab-span\" style=\"white-space:pre\">(\\t*)<\\/span>/g, (str, x) => _buildTabs(x.length * (editor.opts.tabSpaces || 4)))\r\n\r\n        // Pasting from other sources with tabs.\r\n        clipboard_html = clipboard_html.replace(/\\t/g, _buildTabs(editor.opts.tabSpaces || 4))\r\n\r\n        clipboard_html = editor.clean.html(clipboard_html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs)\r\n\r\n        editor.opts.htmlAllowedStyleProps = htmlAllowedStylePropsCopy\r\n        editor.opts.htmlAllowComments = true\r\n\r\n        // Remove empty tags.\r\n        clipboard_html = cleanEmptyTagsAndDivs(clipboard_html)\r\n\r\n        // Do not keep entities that are not HTML compatible.\r\n        clipboard_html = clipboard_html.replace(/\\r/g, '')\r\n\r\n        // Trail ending and starting spaces.\r\n        clipboard_html = clipboard_html.replace(/^ */g, '').replace(/ *$/g, '')\r\n      }\r\n      else {\r\n        clipboard_html = editor.clean.html(clipboard_html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs);\r\n      }\r\n    }\r\n\r\n    // Word paste cleanup when word plugin is not used.\r\n    if (is_word && (!editor.wordPaste || !keep_formatting)) {\r\n\r\n      // Strip spaces at the beginning.\r\n      clipboard_html = clipboard_html.replace(/^\\n*/g, '').replace(/^ /g, '')\r\n\r\n      // Firefox paste.\r\n      if (clipboard_html.indexOf('<colgroup>') === 0) {\r\n        clipboard_html = `<table>${clipboard_html}</table>`\r\n      }\r\n\r\n      clipboard_html = _wordClean(clipboard_html)\r\n\r\n      clipboard_html = cleanEmptyTagsAndDivs(clipboard_html)\r\n    }\r\n\r\n    // Do plain paste cleanup.\r\n    if (editor.opts.pastePlain && !is_editor_content) {\r\n      clipboard_html = _plainPasteClean(clipboard_html)\r\n    }\r\n\r\n    // After paste cleanup event.\r\n    const response = editor.events.chainTrigger('paste.afterCleanup', clipboard_html)\r\n\r\n    if (typeof response === 'string') {\r\n      clipboard_html = response\r\n    }\r\n\r\n    // Check if there is anything to clean.\r\n    if (clipboard_html !== '') {\r\n      // Normalize spaces.\r\n      const tmp = editor.o_doc.createElement('div')\r\n      tmp.innerHTML = clipboard_html\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/2632.\r\n      if (clipboard_html.indexOf('<body>') >= 0) {\r\n        editor.html.cleanBlankSpaces(tmp)\r\n        editor.spaces.normalize(tmp, true)\r\n      }\r\n      else {\r\n        editor.spaces.normalize(tmp)\r\n      }\r\n\r\n      // Remove all spans.\r\n      const spans = tmp.getElementsByTagName('span')\r\n\r\n      for (i = spans.length - 1; i >= 0; i--) {\r\n        const span = spans[i]\r\n\r\n        if (span.attributes.length === 0) {\r\n          span.outerHTML = span.innerHTML\r\n        }\r\n      }\r\n\r\n      // Check for a tags linkAlwaysBlank.\r\n      if (editor.opts.linkAlwaysBlank === true) {\r\n\r\n        let aTags = tmp.getElementsByTagName('a');\r\n\r\n        for (i = aTags.length - 1; i >= 0; i--) {\r\n          let aTag = aTags[i];\r\n\r\n          if (!aTag.getAttribute('target')) {\r\n            aTag.setAttribute('target', '_blank');\r\n          }\r\n        }\r\n      }\r\n\r\n      // Check if we're inside a list.\r\n      const selection_el = editor.selection.element()\r\n      let in_list = false\r\n\r\n      if (selection_el && $(selection_el).parentsUntil(editor.el, 'ul, ol').length) {\r\n        in_list = true\r\n      }\r\n\r\n      // Unwrap lists if they are the only thing in the pasted HTML.\r\n      if (in_list) {\r\n        const list = tmp.children\r\n\r\n        if (list.length === 1 && ['OL', 'UL'].indexOf(list[0].tagName) >= 0) {\r\n          list[0].outerHTML = list[0].innerHTML\r\n        }\r\n      }\r\n\r\n      // Remove unecessary new_lines.\r\n      if (!is_gdocs) {\r\n        const brs = tmp.getElementsByTagName('br')\r\n\r\n        for (i = brs.length - 1; i >= 0; i--) {\r\n          const br = brs[i]\r\n\r\n          if (editor.node.isBlock(br.previousSibling)) {\r\n            br.parentNode.removeChild(br)\r\n          }\r\n        }\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1493\r\n      if (editor.opts.enter === FE.ENTER_BR) {\r\n        els = tmp.querySelectorAll('p, div')\r\n\r\n        for (i = els.length - 1; i >= 0; i--) {\r\n          el = els[i]\r\n\r\n          // Fixes https://github.com/froala/wysiwyg-editor/issues/1895.\r\n          if (el.attributes.length === 0) {\r\n            el.outerHTML = el.innerHTML + (el.nextSibling && !editor.node.isEmpty(el) ? '<br>' : '')\r\n          }\r\n        }\r\n      }\r\n      else if (editor.opts.enter === FE.ENTER_DIV) {\r\n\r\n        els = tmp.getElementsByTagName('p')\r\n\r\n        for (i = els.length - 1; i >= 0; i--) {\r\n          el = els[i]\r\n\r\n          if (el.attributes.length === 0) {\r\n            el.outerHTML = `<div>${el.innerHTML}</div>`\r\n          }\r\n        }\r\n      }\r\n      else if (editor.opts.enter === FE.ENTER_P) {\r\n        if (tmp.childNodes.length === 1 && tmp.childNodes[0].tagName === 'P' && tmp.childNodes[0].attributes.length === 0) {\r\n          tmp.childNodes[0].outerHTML = tmp.childNodes[0].innerHTML\r\n        }\r\n      }\r\n\r\n      clipboard_html = tmp.innerHTML\r\n\r\n      if (is_editor_content) {\r\n        clipboard_html = removeEmptyTags(clipboard_html)\r\n      }\r\n\r\n      // Insert HTML.\r\n      editor.html.insert(clipboard_html, true)\r\n    }\r\n\r\n    _afterPaste()\r\n\r\n    editor.undo.saveStep(snapshot)\r\n    snapshot = null\r\n    editor.undo.saveStep()\r\n  }\r\n\r\n  /**\r\n   * After pasting.\r\n   */\r\n  function _afterPaste() {\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  /*\r\n   * Get clipboard in RTF format.\r\n   */\r\n  function getRtfClipboard() {\r\n\r\n    return clipboard_rtf\r\n  }\r\n\r\n  /*\r\n   * Remove those nodes with attrs.\r\n   */\r\n  function _filterNoAttrs(arry) {\r\n    for (let t = arry.length - 1; t >= 0; t--) {\r\n      if (arry[t].attributes && arry[t].attributes.length) {\r\n        arry.splice(t, 1)\r\n      }\r\n    }\r\n\r\n    return arry\r\n  }\r\n\r\n  function cleanEmptyTagsAndDivs(html) {\r\n    let i\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    // Workaround for Nodepad paste.\r\n    let divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll(':scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])')))\r\n\r\n    while (divs.length) {\r\n      const dv = divs[divs.length - 1]\r\n\r\n      if (editor.html.defaultTag() && editor.html.defaultTag() !== 'div') {\r\n\r\n        // If we have nested block tags unwrap them.\r\n        if (dv.querySelector(editor.html.blockTagsQuery())) {\r\n          dv.outerHTML = dv.innerHTML\r\n        }\r\n        else {\r\n          dv.outerHTML = `<${editor.html.defaultTag()}>${dv.innerHTML}</${editor.html.defaultTag()}>`\r\n        }\r\n      }\r\n      else {\r\n        const els = dv.querySelectorAll('*')\r\n\r\n        // Node has some other content than BR.\r\n        if (!els.length || els[els.length - 1].tagName !== 'BR' && dv.innerText.length === 0) {\r\n          dv.outerHTML = dv.innerHTML + (dv.nextSibling ? '<br>' : '');\r\n        }\r\n        // Last node is not BR.\r\n        else if (!(els.length && els[els.length - 1].tagName === 'BR' && !els[els.length - 1].nextSibling)) {\r\n          dv.outerHTML = dv.innerHTML + (dv.nextSibling ? '<br>' : '');\r\n        }\r\n        else {\r\n          dv.outerHTML = dv.innerHTML\r\n        }\r\n      }\r\n\r\n      divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll(':scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])')))\r\n    }\r\n\r\n    // Remove divs.\r\n    divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll('div:not([style])')))\r\n\r\n    while (divs.length) {\r\n      for (i = 0; i < divs.length; i++) {\r\n        const el = divs[i]\r\n        const text = el.innerHTML.replace(/\\u0009/gi, '').trim()\r\n\r\n        el.outerHTML = text\r\n      }\r\n\r\n      divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll('div:not([style])')))\r\n    }\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Remove possible empty tags in pasted HTML.\r\n   */\r\n  function removeEmptyTags(html) {\r\n\r\n    let i\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    // Clean empty tags.\r\n    let empty_tags = div.querySelectorAll(`*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(${FE.VOID_ELEMENTS.join('):not(')}):not(${editor.opts.htmlAllowedEmptyTags.join('):not(')})`)\r\n\r\n    while (empty_tags.length) {\r\n      for (i = 0; i < empty_tags.length; i++) {\r\n        empty_tags[i].parentNode.removeChild(empty_tags[i])\r\n      }\r\n\r\n      empty_tags = div.querySelectorAll(`*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(${FE.VOID_ELEMENTS.join('):not(')}):not(${editor.opts.htmlAllowedEmptyTags.join('):not(')})`)\r\n    }\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    editor.el.addEventListener('copy', _handleCopy)\r\n    editor.el.addEventListener('cut', _handleCopy)\r\n    editor.el.addEventListener('paste', _handlePaste, {\r\n      capture: true\r\n    })\r\n\r\n    editor.events.on('drop', _dropPaste)\r\n\r\n    if (editor.browser.msie && editor.browser.version < 11) {\r\n      editor.events.on('mouseup', (e) => {\r\n        if (e.button === 2) {\r\n          setTimeout(() => {\r\n            stop_paste = false\r\n          }, 50)\r\n          stop_paste = true\r\n        }\r\n      }, true)\r\n\r\n      editor.events.on('beforepaste', _handlePaste)\r\n    }\r\n\r\n    editor.events.on('destroy', _destroy)\r\n  }\r\n\r\n  function _destroy() {\r\n    editor.el.removeEventListener('copy', _handleCopy)\r\n    editor.el.removeEventListener('cut', _handleCopy)\r\n    editor.el.removeEventListener('paste', _handlePaste)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    cleanEmptyTagsAndDivs,\r\n    getRtfClipboard,\r\n    saveCopiedText,\r\n    clean\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  shortcutsEnabled: [],\r\n  shortcutsHint: true\r\n})\r\n\r\nFE.SHORTCUTS_MAP = {}\r\n\r\nFE.RegisterShortcut = function (key, cmd, val, letter, shift, option) {\r\n  FE.SHORTCUTS_MAP[(shift ? '^' : '') + (option ? '@' : '') + key] = {\r\n    cmd,\r\n    val,\r\n    letter,\r\n    shift,\r\n    option\r\n  }\r\n\r\n  FE.DEFAULTS.shortcutsEnabled.push(cmd)\r\n}\r\n\r\nFE.RegisterShortcut(FE.KEYCODE.E, 'show', null, 'E', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.B, 'bold', null, 'B', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.I, 'italic', null, 'I', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.U, 'underline', null, 'U', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.S, 'strikeThrough', null, 'S', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.CLOSE_SQUARE_BRACKET, 'indent', null, ']', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.OPEN_SQUARE_BRACKET, 'outdent', null, '[', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.Z, 'undo', null, 'Z', false, false)\r\nFE.RegisterShortcut(FE.KEYCODE.Z, 'redo', null, 'Z', true, false)\r\nFE.RegisterShortcut(FE.KEYCODE.Y, 'redo', null, 'Y', false, false)\r\n\r\nFE.MODULES.shortcuts = function (editor) {\r\n  let inverse_map = null\r\n\r\n  function get(cmd) {\r\n    if (!editor.opts.shortcutsHint) {\r\n      return null\r\n    }\r\n\r\n    if (!inverse_map) {\r\n      inverse_map = {}\r\n\r\n      for (const key in FE.SHORTCUTS_MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(FE.SHORTCUTS_MAP, key) && editor.opts.shortcutsEnabled.indexOf(FE.SHORTCUTS_MAP[key].cmd) >= 0) {\r\n          inverse_map[`${FE.SHORTCUTS_MAP[key].cmd}.${FE.SHORTCUTS_MAP[key].val || ''}`] = {\r\n            shift: FE.SHORTCUTS_MAP[key].shift,\r\n            option: FE.SHORTCUTS_MAP[key].option,\r\n            letter: FE.SHORTCUTS_MAP[key].letter\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const srct = inverse_map[cmd]\r\n\r\n    if (!srct) {\r\n      return null\r\n    }\r\n\r\n    return (editor.helpers.isMac() ? String.fromCharCode(8984) : `${editor.language.translate('Ctrl')}+`) +\r\n            (srct.shift ? editor.helpers.isMac() ? String.fromCharCode(8679) : `${editor.language.translate('Shift')}+` : '') +\r\n            (srct.option ? editor.helpers.isMac() ? String.fromCharCode(8997) : `${editor.language.translate('Alt')}+` : '') +\r\n            srct.letter\r\n  }\r\n\r\n  let active = false\r\n\r\n  /**\r\n   * Execute shortcut.\r\n   */\r\n  function exec(e) {\r\n    if (!editor.core.hasFocus()) {\r\n      return true\r\n    }\r\n\r\n    const keycode = e.which\r\n\r\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\r\n\r\n    if (e.type === 'keyup' && active) {\r\n      if (keycode !== FE.KEYCODE.META) {\r\n        active = false\r\n\r\n        return false\r\n      }\r\n    }\r\n\r\n    if (e.type === 'keydown') {\r\n      active = false\r\n    }\r\n\r\n    // Build shortcuts map.\r\n    const map_key = (e.shiftKey ? '^' : '') + (e.altKey ? '@' : '') + keycode\r\n    let deep_parent = editor.node.blockParent(editor.selection.blocks()[0])\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n    if (deep_parent && deep_parent.tagName == 'TR' && deep_parent.getAttribute('contenteditable') == undefined) {\r\n      deep_parent = deep_parent.closest('table')\r\n    }\r\n\r\n    // https://github.com/CelestialSystem/froala-editor-js-2/tree/1303\r\n    // Check for content editable:false node and do not allow short-cuts\r\n    if (ctrlKey && FE.SHORTCUTS_MAP[map_key] && !(deep_parent && deep_parent.getAttribute('contenteditable') === 'false')) {\r\n      const cmd = FE.SHORTCUTS_MAP[map_key].cmd\r\n\r\n      // Check if shortcut is enabled.\r\n      if (cmd && editor.opts.shortcutsEnabled.indexOf(cmd) >= 0) {\r\n        const val = FE.SHORTCUTS_MAP[map_key].val\r\n\r\n        if (editor.events.trigger('shortcut', [e, cmd, val]) !== false) {\r\n          // Search for command.\r\n          if (cmd && (editor.commands[cmd] || FE.COMMANDS[cmd] && FE.COMMANDS[cmd].callback)) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            if (e.type === 'keydown') {\r\n              (editor.commands[cmd] || FE.COMMANDS[cmd].callback)()\r\n              active = true\r\n            }\r\n\r\n            return false\r\n          }\r\n        }\r\n        else {\r\n          active = true;\r\n\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    editor.events.on('keydown', exec, true)\r\n    editor.events.on('keyup', exec, true)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    get\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.snapshot = function (editor) {\r\n  /**\r\n   * Get the index of a node inside it's parent.\r\n   */\r\n  function _getNodeIndex(node) {\r\n    const childNodes = node.parentNode.childNodes\r\n    let idx = 0\r\n    let prevNode = null\r\n\r\n    for (let i = 0; i < childNodes.length; i++) {\r\n      if (prevNode) {\r\n\r\n        // Current node is text and it is empty.\r\n        const isEmptyText = childNodes[i].nodeType === Node.TEXT_NODE && childNodes[i].textContent === ''\r\n\r\n        // Previous node is text, current node is text.\r\n        const twoTexts = prevNode.nodeType === Node.TEXT_NODE && childNodes[i].nodeType === Node.TEXT_NODE\r\n\r\n        // Empty prev node.\r\n        var emptyPrevNode = (prevNode.nodeType === Node.TEXT_NODE && prevNode.textContent === '');\r\n\r\n        if (!isEmptyText && !twoTexts && !emptyPrevNode) {\r\n          idx++\r\n        }\r\n      }\r\n\r\n      if (childNodes[i] === node) {\r\n        return idx\r\n      }\r\n\r\n      prevNode = childNodes[i]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine the location of the node inside the element.\r\n   */\r\n  function _getNodeLocation(node) {\r\n    const loc = []\r\n\r\n    if (!node.parentNode) {\r\n      return []\r\n    }\r\n\r\n    while (!editor.node.isElement(node)) {\r\n      loc.push(_getNodeIndex(node))\r\n      node = node.parentNode\r\n    }\r\n\r\n    return loc.reverse()\r\n  }\r\n\r\n  /**\r\n   * Get the range offset inside the node.\r\n   */\r\n  function _getRealNodeOffset(node, offset) {\r\n    while (node && node.nodeType === Node.TEXT_NODE) {\r\n      const prevNode = node.previousSibling\r\n\r\n      if (prevNode && prevNode.nodeType === Node.TEXT_NODE) {\r\n        offset += prevNode.textContent.length\r\n      }\r\n      node = prevNode\r\n    }\r\n\r\n    return offset\r\n  }\r\n\r\n  /**\r\n   * Codify each range.\r\n   */\r\n  function _getRange(range) {\r\n    return {\r\n      scLoc: _getNodeLocation(range.startContainer),\r\n      scOffset: _getRealNodeOffset(range.startContainer, range.startOffset),\r\n      ecLoc: _getNodeLocation(range.endContainer),\r\n      ecOffset: _getRealNodeOffset(range.endContainer, range.endOffset)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current snapshot.\r\n   */\r\n  function get() {\r\n    const snapshot = {}\r\n\r\n    editor.events.trigger('snapshot.before')\r\n\r\n    snapshot.html = (editor.$wp ? editor.$el.html() : editor.$oel.get(0).outerHTML).replace(/ style=\"\"/g, '')\r\n\r\n    snapshot.ranges = []\r\n\r\n    if (editor.$wp && editor.selection.inEditor() && editor.core.hasFocus()) {\r\n      const ranges = editor.selection.ranges()\r\n\r\n      for (let i = 0; i < ranges.length; i++) {\r\n        snapshot.ranges.push(_getRange(ranges[i]))\r\n      }\r\n    }\r\n\r\n    editor.events.trigger('snapshot.after', [snapshot])\r\n\r\n    return snapshot\r\n  }\r\n\r\n  /**\r\n   * Determine node by its location in the main element.\r\n   */\r\n  function _getNodeByLocation(loc) {\r\n    let node = editor.el\r\n\r\n    for (let i = 0; i < loc.length; i++) {\r\n      node = node.childNodes[loc[i]]\r\n    }\r\n\r\n    return node\r\n  }\r\n\r\n  /**\r\n   * Restore range from snapshot.\r\n   */\r\n  function _restoreRange(sel, range_snapshot) {\r\n    try {\r\n\r\n      // Get range info.\r\n      const startNode = _getNodeByLocation(range_snapshot.scLoc)\r\n      const startOffset = range_snapshot.scOffset\r\n      const endNode = _getNodeByLocation(range_snapshot.ecLoc)\r\n      const endOffset = range_snapshot.ecOffset\r\n\r\n      // Restore range.\r\n      const range = editor.doc.createRange()\r\n      range.setStart(startNode, startOffset)\r\n      range.setEnd(endNode, endOffset)\r\n\r\n      sel.addRange(range)\r\n    }\r\n    catch (ex) {\r\n      // continue regardless of error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore snapshot.\r\n   */\r\n  function restore(snapshot) {\r\n\r\n    // Restore HTML.\r\n    if (editor.$el.html() !== snapshot.html) {\r\n      if (editor.opts.htmlExecuteScripts) {\r\n        editor.$el.html(snapshot.html)\r\n      }\r\n      else {\r\n        editor.el.innerHTML = snapshot.html\r\n      }\r\n    }\r\n\r\n    // Get selection.\r\n    const sel = editor.selection.get()\r\n\r\n    // Make sure to clear current selection.\r\n    editor.selection.clear()\r\n\r\n    // Focus.\r\n    editor.events.focus(true)\r\n\r\n    // Restore Ranges.\r\n    for (let i = 0; i < snapshot.ranges.length; i++) {\r\n      _restoreRange(sel, snapshot.ranges[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Compare two snapshots.\r\n   */\r\n  function equal(s1, s2) {\r\n    if (s1.html !== s2.html) {\r\n      return false\r\n    }\r\n\r\n    if (editor.core.hasFocus() && JSON.stringify(s1.ranges) !== JSON.stringify(s2.ranges)) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  return {\r\n    get,\r\n    restore,\r\n    equal\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.undo = function (editor) {\r\n  /**\r\n   * Disable the default browser undo.\r\n   */\r\n  function _disableBrowserUndo(e) {\r\n    const keyCode = e.which\r\n    const ctrlKey = editor.keys.ctrlKey(e)\r\n\r\n    // Ctrl Key.\r\n    if (ctrlKey) {\r\n      if (keyCode === FE.KEYCODE.Z && e.shiftKey) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      if (keyCode === FE.KEYCODE.Z) {\r\n        e.preventDefault()\r\n      }\r\n    }\r\n  }\r\n\r\n  function canDo() {\r\n    if (editor.undo_stack.length === 0 || editor.undo_index <= 1) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  function canRedo() {\r\n    if (editor.undo_index === editor.undo_stack.length) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  let last_html = null\r\n\r\n  function saveStep(snapshot) {\r\n    if (!editor.undo_stack || editor.undoing || editor.el.querySelector('.fr-marker')) {\r\n      return\r\n    }\r\n\r\n    if (typeof snapshot === 'undefined') {\r\n      snapshot = editor.snapshot.get()\r\n\r\n      if (!editor.undo_stack[editor.undo_index - 1] || !editor.snapshot.equal(editor.undo_stack[editor.undo_index - 1], snapshot)) {\r\n        dropRedo()\r\n        editor.undo_stack.push(snapshot)\r\n        editor.undo_index++\r\n\r\n        if (snapshot.html !== last_html) {\r\n          editor.events.trigger('contentChanged')\r\n          last_html = snapshot.html\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      dropRedo()\r\n\r\n      if (editor.undo_index > 0) {\r\n        editor.undo_stack[editor.undo_index - 1] = snapshot\r\n      }\r\n      else {\r\n        editor.undo_stack.push(snapshot)\r\n        editor.undo_index++\r\n      }\r\n    }\r\n  }\r\n\r\n  function dropRedo() {\r\n    if (!editor.undo_stack || editor.undoing) {\r\n      return\r\n    }\r\n\r\n    while (editor.undo_stack.length > editor.undo_index) {\r\n      editor.undo_stack.pop()\r\n    }\r\n  }\r\n\r\n  function _do() {\r\n    if (editor.undo_index > 1) {\r\n      editor.undoing = true\r\n\r\n      // Get snapshot.\r\n      const snapshot = editor.undo_stack[--editor.undo_index - 1]\r\n\r\n      // Clear any existing content changed timers.\r\n      clearTimeout(editor._content_changed_timer)\r\n\r\n      // Restore snapshot.\r\n      editor.snapshot.restore(snapshot)\r\n      last_html = snapshot.html\r\n\r\n      // Hide popups.\r\n      editor.popups.hideAll()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n\r\n      // Call content changed.\r\n      editor.events.trigger('contentChanged')\r\n\r\n      editor.events.trigger('commands.undo')\r\n\r\n      editor.undoing = false\r\n    }\r\n  }\r\n\r\n  function _redo() {\r\n    if (editor.undo_index < editor.undo_stack.length) {\r\n      editor.undoing = true\r\n\r\n      // Get snapshot.\r\n      const snapshot = editor.undo_stack[editor.undo_index++]\r\n\r\n      // Clear any existing content changed timers.\r\n      clearTimeout(editor._content_changed_timer)\r\n\r\n      // Restore snapshot.\r\n      editor.snapshot.restore(snapshot)\r\n      last_html = snapshot.html\r\n\r\n      // Hide popups.\r\n      editor.popups.hideAll()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n\r\n      // Call content changed.\r\n      editor.events.trigger('contentChanged')\r\n\r\n      editor.events.trigger('commands.redo')\r\n\r\n      editor.undoing = false\r\n    }\r\n  }\r\n\r\n  function reset() {\r\n    editor.undo_index = 0\r\n    editor.undo_stack = []\r\n  }\r\n\r\n  function _destroy() {\r\n    editor.undo_stack = []\r\n  }\r\n\r\n  /**\r\n   * Initialize\r\n   */\r\n  function _init() {\r\n    reset()\r\n    editor.events.on('initialized', () => {\r\n      last_html = (editor.$wp ? editor.$el.html() : editor.$oel.get(0).outerHTML).replace(/ style=\"\"/g, '')\r\n    })\r\n\r\n    editor.events.on('blur', () => {\r\n      if (!editor.el.querySelector('.fr-dragging')) {\r\n        editor.undo.saveStep()\r\n      }\r\n    })\r\n\r\n    editor.events.on('keydown', _disableBrowserUndo)\r\n\r\n    editor.events.on('destroy', _destroy)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    run: _do,\r\n    redo: _redo,\r\n    canDo,\r\n    canRedo,\r\n    dropRedo,\r\n    reset,\r\n    saveStep\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  height: null,\r\n  heightMax: null,\r\n  heightMin: null,\r\n  width: null\r\n})\r\n\r\nFE.MODULES.size = function (editor) {\r\n\r\n  function syncIframe() {\r\n    refresh()\r\n\r\n    if (editor.opts.height) {\r\n      editor.$el.css('minHeight', editor.opts.height - editor.helpers.getPX(editor.$el.css('padding-top')) - editor.helpers.getPX(editor.$el.css('padding-bottom')))\r\n    }\r\n\r\n    editor.$iframe.height(editor.$el.outerHeight(true))\r\n  }\r\n\r\n  function refresh() {\r\n    if (editor.opts.heightMin) {\r\n      editor.$el.css('minHeight', editor.opts.heightMin)\r\n    }\r\n    else {\r\n      editor.$el.css('minHeight', '')\r\n    }\r\n\r\n    if (editor.opts.heightMax) {\r\n      editor.$wp.css('maxHeight', editor.opts.heightMax)\r\n      editor.$wp.css('overflow', 'auto')\r\n    }\r\n    else {\r\n      editor.$wp.css('maxHeight', '')\r\n      editor.$wp.css('overflow', '')\r\n    }\r\n\r\n    // Set height.\r\n    if (editor.opts.height) {\r\n      editor.$wp.css('height', editor.opts.height)\r\n      editor.$wp.css('overflow', 'auto')\r\n      editor.$el.css('minHeight', editor.opts.height - editor.helpers.getPX(editor.$el.css('padding-top')) - editor.helpers.getPX(editor.$el.css('padding-bottom')))\r\n    }\r\n    else {\r\n      editor.$wp.css('height', '')\r\n\r\n      if (!editor.opts.heightMin) {\r\n        editor.$el.css('minHeight', '')\r\n      }\r\n\r\n      if (!editor.opts.heightMax) {\r\n        editor.$wp.css('overflow', '')\r\n      }\r\n    }\r\n\r\n    if (editor.opts.width) {\r\n      editor.$box.width(editor.opts.width)\r\n    }\r\n  }\r\n\r\n  function _init() {\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    refresh()\r\n\r\n    // Sync iframe height.\r\n    if (editor.$iframe) {\r\n      editor.events.on('keyup keydown', () => {\r\n        setTimeout(syncIframe, 0)\r\n      }, true)\r\n\r\n      editor.events.on('commands.after html.set init initialized paste.after', syncIframe)\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    syncIframe,\r\n    refresh\r\n  }\r\n}\r\n","import './core/clean.js'\r\nimport './core/commands.js'\r\nimport './core/cursor_lists.js'\r\nimport './core/cursor.js'\r\nimport './core/data.js'\r\nimport './core/edit.js'\r\nimport './core/events.js'\r\nimport './core/format.js'\r\nimport './core/helpers.js'\r\nimport './core/html.js'\r\nimport './core/keys.js'\r\nimport './core/paste.js'\r\nimport './core/shortcuts.js'\r\nimport './core/snapshot.js'\r\nimport './core/undo.js'\r\nimport './core/dom/markers.js'\r\nimport './core/dom/node.js'\r\nimport './core/dom/selection.js'\r\nimport './core/dom/spaces.js'\r\nimport './core/options/language.js'\r\nimport './core/options/size.js'\r\n\r\nimport FE from '../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  documentReady: false,\r\n  editorClass: null,\r\n  typingTimer: 500,\r\n  iframe: false,\r\n  requestWithCORS: true,\r\n  requestWithCredentials: false,\r\n  requestHeaders: {},\r\n  useClasses: true,\r\n  spellcheck: true,\r\n  iframeDefaultStyle: 'html{margin:0px;height:auto;}body{height:auto;padding:20px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:\"\";display:block;clear:both;}body::-moz-selection{background:#b5d6fd;color:#000;}body::selection{background:#b5d6fd;color:#000;}',\r\n  iframeStyle: '',\r\n  iframeStyleFiles: [],\r\n  direction: 'auto',\r\n  zIndex: 1,\r\n  tabIndex: null,\r\n  disableRightClick: false,\r\n  scrollableContainer: 'body',\r\n  keepFormatOnDelete: false,\r\n  theme: null\r\n})\r\n\r\nFE.MODULES.core = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function injectStyle(style) {\r\n    if (editor.opts.iframe) {\r\n      editor.$head.find('style[data-fr-style], link[data-fr-style]').remove()\r\n      editor.$head.append(`<style data-fr-style=\"true\">${style}</style>`)\r\n\r\n      for (let i = 0; i < editor.opts.iframeStyleFiles.length; i++) {\r\n        const $link = $(`<link data-fr-style=\"true\" rel=\"stylesheet\" href=\"${editor.opts.iframeStyleFiles[i]}\">`)\r\n\r\n        // Listen to the load event in order to sync iframe.\r\n        $link.get(0).addEventListener('load', editor.size.syncIframe)\r\n\r\n        // Append to the head.\r\n        editor.$head.append($link)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initElementStyle() {\r\n    if (!editor.opts.iframe) {\r\n      editor.$el.addClass('fr-element fr-view')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the editor style.\r\n   */\r\n\r\n  function _initStyle() {\r\n    editor.$box.addClass(`fr-box${editor.opts.editorClass ? ` ${editor.opts.editorClass}` : ''}`)\r\n    editor.$box.attr('role', 'application')\r\n    editor.$wp.addClass('fr-wrapper')\r\n\r\n    if (editor.opts.documentReady) {\r\n      editor.$box.addClass('fr-document');\r\n    }\r\n\r\n    _initElementStyle()\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.$iframe.addClass('fr-iframe')\r\n      editor.$el.addClass('fr-view')\r\n\r\n      for (let i = 0; i < editor.o_doc.styleSheets.length; i++) {\r\n        let rules\r\n\r\n        try {\r\n          rules = editor.o_doc.styleSheets[i].cssRules\r\n        }\r\n        catch (ex) {\r\n          // ok.\r\n        }\r\n\r\n        if (rules) {\r\n          for (let idx = 0, len = rules.length; idx < len; idx++) {\r\n            if (rules[idx].selectorText && (rules[idx].selectorText.indexOf('.fr-view') === 0 || rules[idx].selectorText.indexOf('.fr-element') === 0)) {\r\n              if (rules[idx].style.cssText.length > 0) {\r\n                if (rules[idx].selectorText.indexOf('.fr-view') === 0) {\r\n                  editor.opts.iframeStyle += `${rules[idx].selectorText.replace(/\\.fr-view/g, 'body')}{${rules[idx].style.cssText}}`\r\n                }\r\n                else {\r\n                  editor.opts.iframeStyle += `${rules[idx].selectorText.replace(/\\.fr-element/g, 'body')}{${rules[idx].style.cssText}}`\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (editor.opts.direction !== 'auto') {\r\n      editor.$box.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n    editor.$el.attr('dir', editor.opts.direction)\r\n    editor.$wp.attr('dir', editor.opts.direction)\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      editor.$box.css('z-index', editor.opts.zIndex)\r\n    }\r\n\r\n    if (editor.opts.theme) {\r\n      editor.$box.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    // Set tabIndex option.\r\n    editor.opts.tabIndex = editor.opts.tabIndex || editor.$oel.attr('tabIndex')\r\n\r\n    if (editor.opts.tabIndex) {\r\n      editor.$el.attr('tabIndex', editor.opts.tabIndex)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine if the editor is empty.\r\n   */\r\n\r\n  function isEmpty() {\r\n    return editor.node.isEmpty(editor.el)\r\n  }\r\n\r\n  /**\r\n   * Check if the browser allows drag and init it.\r\n   */\r\n\r\n  function _initDrag() {\r\n\r\n    // Drag and drop support.\r\n    editor.drag_support = {\r\n      filereader: typeof FileReader !== 'undefined',\r\n      formdata: Boolean(editor.win.FormData),\r\n      progress: 'upload' in new XMLHttpRequest()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an XHR object.\r\n   */\r\n\r\n  function getXHR(url, method) {\r\n    const xhr = new XMLHttpRequest()\r\n\r\n    // Make it async.\r\n    xhr.open(method, url, true)\r\n\r\n    // Set with credentials.\r\n    if (editor.opts.requestWithCredentials) {\r\n      xhr.withCredentials = true\r\n    }\r\n\r\n    // Set headers.\r\n    for (const header in editor.opts.requestHeaders) {\r\n      if (Object.prototype.hasOwnProperty.call(editor.opts.requestHeaders, header)) {\r\n        xhr.setRequestHeader(header, editor.opts.requestHeaders[header])\r\n      }\r\n    }\r\n\r\n    return xhr\r\n  }\r\n\r\n  function _destroy(html) {\r\n    if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n      editor.$oel.val(html)\r\n    }\r\n\r\n    if (editor.$box) {\r\n      editor.$box.removeAttr('role')\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n        editor.$el.html('')\r\n        editor.$wp.html('')\r\n        editor.$box.replaceWith(editor.$oel)\r\n        editor.$oel.show()\r\n      }\r\n      else {\r\n        editor.$wp.replaceWith(html)\r\n        editor.$el.html('')\r\n        editor.$box.removeClass(`fr-view fr-ltr fr-box ${editor.opts.editorClass || ''}`)\r\n\r\n        if (editor.opts.theme) {\r\n          editor.$box.addClass(`${editor.opts.theme}-theme`)\r\n        }\r\n      }\r\n    }\r\n\r\n    this.$wp = null\r\n    this.$el = null\r\n    this.el = null\r\n    this.$box = null\r\n  }\r\n\r\n  function hasFocus() {\r\n    if (editor.browser.mozilla && editor.helpers.isMobile()) {\r\n      return editor.selection.inEditor()\r\n    }\r\n\r\n    return editor.node.hasFocus(editor.el) || editor.$el.find('*:focus').length > 0\r\n  }\r\n\r\n  function sameInstance($obj) {\r\n    if (!$obj) {\r\n      return false\r\n    }\r\n\r\n    const inst = $obj.data('instance')\r\n\r\n    return inst ? inst.id === editor.id : false\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n\r\n  function _init() {\r\n    FE.INSTANCES.push(editor)\r\n\r\n    _initDrag()\r\n\r\n    // Call initialization methods.\r\n    if (editor.$wp) {\r\n      _initStyle()\r\n      editor.html.set(editor._original_html)\r\n\r\n      // Set spellcheck.\r\n      editor.$el.attr('spellcheck', editor.opts.spellcheck)\r\n\r\n      // Disable autocomplete.\r\n      if (editor.helpers.isMobile()) {\r\n        editor.$el.attr('autocomplete', editor.opts.spellcheck ? 'on' : 'off')\r\n        editor.$el.attr('autocorrect', editor.opts.spellcheck ? 'on' : 'off')\r\n        editor.$el.attr('autocapitalize', editor.opts.spellcheck ? 'on' : 'off')\r\n      }\r\n\r\n      // Disable right click.\r\n      if (editor.opts.disableRightClick) {\r\n        editor.events.$on(editor.$el, 'contextmenu', (e) => {\r\n          if (e.button === 2) {\r\n\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2150\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            \r\n            return false\r\n          }\r\n        })\r\n      }\r\n\r\n      try {\r\n        editor.doc.execCommand('styleWithCSS', false, false)\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n\r\n      // Sync on contentChanged.\r\n      editor.events.on('contentChanged', () => {\r\n        editor.$oel.val(editor.html.get())\r\n      })\r\n\r\n      // Set HTML on form submit.\r\n      editor.events.on('form.submit', () => {\r\n        editor.$oel.val(editor.html.get())\r\n      })\r\n\r\n      editor.events.on('form.reset', () => {\r\n        editor.html.set(editor._original_html)\r\n      })\r\n\r\n      editor.$oel.val(editor.html.get())\r\n    }\r\n\r\n    // iOS focus fix.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', () => {\r\n        if (!editor.$doc.get(0).hasFocus()) {\r\n          editor.$win.get(0).focus()\r\n        }\r\n      })\r\n    }\r\n\r\n    editor.events.trigger('init')\r\n\r\n    // Autofocus.\r\n    if (editor.opts.autofocus && !editor.opts.initOnClick && editor.$wp) {\r\n      editor.events.on('initialized', () => {\r\n        editor.events.focus(true)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    destroy: _destroy,\r\n    isEmpty,\r\n    getXHR,\r\n    injectStyle,\r\n    hasFocus,\r\n    sameInstance\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.POPUP_TEMPLATES = {\r\n  'text.edit': '[_EDIT_]'\r\n}\r\n\r\nFE.RegisterTemplate = function (name, template) {\r\n  FE.POPUP_TEMPLATES[name] = template\r\n}\r\n\r\nFE.MODULES.popups = function (editor) {\r\n  const $ = editor.$\r\n  let screenHeightofBrowser\r\n\r\n  if (!editor.shared.popups) {\r\n    editor.shared.popups = {}\r\n  }\r\n  let popups = editor.shared.popups\r\n\r\n  // To store active popup buttons\r\n  let $btnActivePopups\r\n\r\n  function setContainer(id, $container) {\r\n    if (!$container.isVisible()) {\r\n      $container = editor.$sc\r\n    }\r\n\r\n    if (!$container.is(popups[id].data('container'))) {\r\n      popups[id].data('container', $container)\r\n      $container.append(popups[id])\r\n    }\r\n  }\r\n\r\n\r\n  function setFileListHeight($popup) {\r\n    $popup.find('.fr-upload-progress').addClass('fr-height-set')\r\n    $popup.find('.fr-upload-progress').removeClass('fr-height-auto')\r\n    editor.popups.get('filesManager.insert').removeClass('fr-height-auto')\r\n    let activeLayerIndex\r\n    $popup.find('.fr-files-upload-layer').hasClass('fr-active') ? activeLayerIndex = 1 : ''  \r\n    $popup.find('.fr-files-by-url-layer').hasClass('fr-active') ? activeLayerIndex = 2 : ''\r\n    $popup.find('.fr-files-embed-layer').hasClass('fr-active') ? activeLayerIndex = 3 : ''\r\n\r\n    if($popup.find('.fr-upload-progress-layer').get(0).clientHeight + 10 < $popup.find('.fr-upload-progress').get(0).clientHeight)\r\n    {\r\n      $popup.find('.fr-upload-progress').addClass('fr-height-auto')\r\n    }\r\n\r\n    if($popup[0].clientHeight > 400)\r\n      $popup[0].childNodes[4].style.height = `${$popup[0].clientHeight - ($popup[0].childNodes[0].clientHeight + $popup[0].childNodes[activeLayerIndex].clientHeight)-80}px`\r\n\r\n  }\r\n\r\n  let prevHeight = 2000\r\n  function setPopupDimensions($popup, isDelete) {\r\n    if (isDelete && $popup.find('.fr-upload-progress-layer').get(0).clientHeight < prevHeight) {\r\n      $popup.find('.fr-upload-progress').addClass('fr-height-auto')\r\n      editor.popups.get('filesManager.insert').addClass('fr-height-auto')\r\n      $popup.find('.fr-upload-progress').removeClass('fr-height-set')\r\n      prevHeight = 2000\r\n    }\r\n    if ($popup.get(0).clientHeight > window.innerHeight / 2) {\r\n      if (window.innerWidth < 500) {\r\n        if ($popup.get(0).clientHeight > screenHeightofBrowser * 0.6) {\r\n\r\n\r\n          setFileListHeight($popup)\r\n        }\r\n      } else {\r\n        if ($popup.get(0).clientHeight > 400) {\r\n\r\n\r\n          setFileListHeight($popup)\r\n        }\r\n      }\r\n\r\n      prevHeight = $popup.find('.fr-upload-progress-layer').get(0).clientHeight\r\n    }\r\n    let width = window.innerWidth\r\n    switch (true) {\r\n    case (width <= 320):\r\n      $popup.width(200)\r\n      break;\r\n    case (width <= 420):\r\n      $popup.width(250)\r\n      break;\r\n    case (width <= 520):\r\n      $popup.width(300)\r\n      break;\r\n    case (width <= 720):\r\n      $popup.width(400)\r\n      break;\r\n    case (width > 720):\r\n      $popup.width(530)\r\n      break;\r\n    }\r\n  }\r\n\r\n  function refreshContainer(id, $container) {\r\n    if (!$container.isVisible()) {\r\n      $container = editor.$sc\r\n    }\r\n\r\n    if (!$container.contains([popups[id].get(0)])) {\r\n      $container.append(popups[id])\r\n    }\r\n  }\r\n\r\n  /**\r\n * Handles focus event on input boxes\r\n */\r\n  function _inputRefreshEmptyOnFocus() {\r\n    $(this).toggleClass('fr-not-empty', true)\r\n  }\r\n\r\n  /**\r\n * Handles blur event on input boxes\r\n */\r\n  function _inputRefreshEmptyOnBlur() {\r\n    const $elm = $(this)\r\n    $elm.toggleClass('fr-not-empty', $elm.val() !== '')\r\n  }\r\n\r\n  /**\r\n * Remove placeholder and attach label next to input box for focus and blur transitions\r\n */\r\n  function _addLabel($inputElms) {\r\n    for (let i = 0; i < $inputElms.length; i++) {\r\n      const elm = $inputElms[i]\r\n      const $elm = $(elm)\r\n\r\n      // Attach a label in place of placeholder for input box transition\r\n      const $label = $elm.next()\r\n      if ($label.length === 0 && $elm.attr('placeholder')) {\r\n        $elm.after(`<label for=\"${$elm.attr('id')}\">${$elm.attr('placeholder')}</label>`)\r\n\r\n        // Remove placeholder\r\n        $elm.attr('placeholder', '')\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Show popup at a specific position.\r\n   */\r\n  function show(id, left, top, obj_height, applyLeftOffset) {\r\n\r\n    // Restore selection on show if it is there.\r\n    if (!isVisible(id)) {\r\n      if (areVisible() && editor.$el.find('.fr-marker').length > 0) {\r\n        editor.events.disableBlur()\r\n        editor.selection.restore()\r\n      }\r\n      else if (!areVisible()) {\r\n\r\n        // We must have focus into editor because we may want to save selection.\r\n        editor.events.disableBlur()\r\n        editor.events.focus()\r\n        editor.events.enableBlur()\r\n      }\r\n    }\r\n\r\n    hideAll([id])\r\n\r\n    if (!popups[id]) {\r\n      return false\r\n    }\r\n\r\n    // Hide active dropdowns.\r\n    const $active_dropdowns = editor.button.getButtons('.fr-dropdown.fr-active')\r\n    $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).parents('.fr-toolbar').css('zIndex', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n    $active_dropdowns.next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n\r\n    // Set the current instance for the popup.\r\n    popups[id].data('instance', editor)\r\n\r\n    if (editor.$tb) {\r\n      editor.$tb.data('instance', editor)\r\n    }\r\n\r\n    const is_visible = isVisible(id)\r\n    popups[id].addClass('fr-active').removeClass('fr-hidden').find('input, textarea').removeAttr('disabled')\r\n\r\n    let $container = popups[id].data('container')\r\n\r\n    refreshContainer(id, $container)\r\n\r\n    // Inline mode when container is toolbar.\r\n    if (editor.opts.toolbarInline && $container && editor.$tb && $container.get(0) === editor.$tb.get(0)) {\r\n      setContainer(id, editor.$sc)\r\n      top = editor.$tb.offset().top - editor.helpers.getPX(editor.$tb.css('margin-top'))\r\n      left = editor.$tb.offset().left + editor.$tb.outerWidth() / 2\r\n\r\n      if (editor.node.hasClass(editor.$tb.get(0), 'fr-above') && top) {\r\n        top += editor.$tb.outerHeight()\r\n      }\r\n\r\n      obj_height = 0\r\n    }\r\n\r\n    // Apply iframe correction.\r\n    $container = popups[id].data('container')\r\n\r\n    if (editor.opts.iframe && !obj_height && !is_visible) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      if (left) {\r\n        left -= editor.$iframe.offset().left + iframePaddingLeft\r\n      }\r\n\r\n      if (top) {\r\n        top -= editor.$iframe.offset().top + iframePaddingTop\r\n      }\r\n    }\r\n\r\n    // If container is toolbar then increase zindex.\r\n    if ($container.is(editor.$tb)) {\r\n      editor.$tb.css('zIndex', (editor.opts.zIndex || 1) + 4)\r\n    }\r\n    else {\r\n      popups[id].css('zIndex', (editor.opts.zIndex || 1) + 3)\r\n    }\r\n\r\n    // Toolbar at the bottom and container is toolbar.\r\n    if (editor.opts.toolbarBottom && $container && editor.$tb && $container.get(0) === editor.$tb.get(0)) {\r\n      popups[id].addClass('fr-above')\r\n\r\n      if (top) {\r\n        top -= popups[id].outerHeight()\r\n      }\r\n    }\r\n\r\n    // Add popup offset left offset based on the popup width\r\n    if (applyLeftOffset) {\r\n      left -= popups[id].width() / 2\r\n    }\r\n    \r\n    // Check if it exceeds window on the right.\r\n    if (left + popups[id].outerWidth() > editor.$sc.offset().left + editor.$sc.width()) {\r\n      left -= (left + popups[id].outerWidth() - editor.$sc.offset().left - editor.$sc.width())\r\n    }\r\n\r\n    // Check if it exceeds window on the left.\r\n    if (left < editor.$sc.offset().left && editor.opts.direction === 'rtl') {\r\n      left = editor.$sc.offset().left\r\n    }\r\n\r\n    // Position editor.\r\n    popups[id].removeClass('fr-active')\r\n    editor.position.at(left, top, popups[id], obj_height || 0)\r\n\r\n    //check if set to contenteditable\r\n    let content_parent = editor.node.blockParent(editor.selection.blocks()[0])\r\n    if (content_parent && content_parent.getAttribute('contenteditable') === 'false') {\r\n      popups[id].removeClass('fr-active')\r\n    } else {\r\n      let parentContent = editor.selection.element().parentElement.getAttribute('contenteditable');\r\n      if (parentContent && parentContent === 'false') {\r\n        popups[id].removeClass('fr-active')\r\n      } else {\r\n        popups[id].addClass('fr-active')\r\n      }\r\n    }\r\n\r\n    if (!is_visible) {\r\n      editor.accessibility.focusPopup(popups[id])\r\n    }\r\n\r\n    if (editor.opts.toolbarInline) {\r\n      editor.toolbar.hide()\r\n    }\r\n\r\n    // Update the button for active popup\r\n    if (editor.$tb) {\r\n      $btnActivePopups = editor.$tb.find('.fr-btn-active-popup')\r\n    }\r\n    editor.events.trigger(`popups.show.${id}`)\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1248\r\n    _events(id)._repositionPopup()\r\n\r\n    _unmarkExit()\r\n  }\r\n\r\n  function onShow(id, callback) {\r\n    editor.events.on(`popups.show.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Find visible popup.\r\n   */\r\n  function isVisible(id) {\r\n    return popups[id] && editor.node.hasClass(popups[id], 'fr-active') && editor.core.sameInstance(popups[id]) || false\r\n  }\r\n\r\n  /**\r\n   * Check if there is any popup visible.\r\n   */\r\n  function areVisible(new_instance) {\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        if (isVisible(id) && (typeof new_instance === 'undefined' || popups[id].data('instance') === new_instance)) {\r\n          return popups[id]\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Hide popup.\r\n   */\r\n  function hide(id) {\r\n    let $popup = null\r\n\r\n    if (typeof id !== 'string') {\r\n      $popup = id\r\n    }\r\n    else {\r\n      $popup = popups[id]\r\n    }\r\n\r\n    if(id === 'filesManager.insert' && (editor.filesManager !== undefined) && editor.filesManager.isChildWindowOpen()){\r\n      return false\r\n    }\r\n\r\n    if ($popup && editor.node.hasClass($popup, 'fr-active')) {\r\n      $popup.removeClass('fr-active fr-above')\r\n      editor.events.trigger(`popups.hide.${id}`)\r\n\r\n      // Reset toolbar zIndex.\r\n      if (editor.$tb) {\r\n        if (editor.opts.zIndex > 1) {\r\n          editor.$tb.css('zIndex', editor.opts.zIndex + 1)\r\n        }\r\n        else {\r\n          editor.$tb.css('zIndex', '')\r\n        }\r\n      }\r\n\r\n      editor.events.disableBlur()\r\n      $popup.find('input, textarea, button').each(function () {\r\n        if (this === this.ownerDocument.activeElement) {\r\n          this.blur()\r\n        }\r\n      })\r\n\r\n      // Mark the input boxes as empty\r\n      $popup.find('input, textarea').attr('disabled', 'disabled')\r\n\r\n      // Remove styling from active popup buttons when popup is closed\r\n      if ($btnActivePopups) {\r\n        for (let index = 0; index < $btnActivePopups.length; index++) {\r\n          $($btnActivePopups[index]).removeClass('fr-btn-active-popup')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Assign an event for hiding.\r\n   */\r\n  function onHide(id, callback) {\r\n    editor.events.on(`popups.hide.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Get the popup with the specific id.\r\n   */\r\n  function get(id) {\r\n    const $popup = popups[id]\r\n\r\n    if ($popup && !$popup.data(`inst${editor.id}`)) {\r\n      const ev = _events(id)\r\n      _bindInstanceEvents(ev, id)\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  function onRefresh(id, callback) {\r\n    editor.events.on(`popups.refresh.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Refresh content inside the popup.\r\n   */\r\n  function refresh(id) {\r\n    // Set the instance id for the popup.\r\n    popups[id].data('instance', editor)\r\n\r\n    editor.events.trigger(`popups.refresh.${id}`)\r\n\r\n    const btns = popups[id].find('.fr-command')\r\n\r\n    for (let i = 0; i < btns.length; i++) {\r\n      const $btn = $(btns[i])\r\n\r\n      if ($btn.parents('.fr-dropdown-menu').length === 0) {\r\n        editor.button.refresh($btn)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide all popups.\r\n   */\r\n  function hideAll(except) {\r\n    if (typeof except === 'undefined') {\r\n      except = []\r\n    }\r\n\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        if (except.indexOf(id) < 0) {\r\n          hide(id)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  editor.shared.exit_flag = false\r\n\r\n  function _markExit() {\r\n    editor.shared.exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    editor.shared.exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n    return editor.shared.exit_flag\r\n  }\r\n\r\n  function _buildTemplate(id, template) {\r\n\r\n    // Load template.\r\n    let html = FE.POPUP_TEMPLATES[id]\r\n\r\n    if (!html) {\r\n      return null\r\n    }\r\n\r\n    if (typeof html === 'function') {\r\n      html = html.apply(editor)\r\n    }\r\n\r\n    for (const nm in template) {\r\n      if (Object.prototype.hasOwnProperty.call(template, nm)) {\r\n        html = html.replace(`[_${nm.toUpperCase()}_]`, template[nm])\r\n      }\r\n    }\r\n\r\n    return html\r\n  }\r\n\r\n  function _build(id, template) {\r\n    let $container\r\n    const html = _buildTemplate(id, template)\r\n\r\n    const $popup = $(editor.doc.createElement('DIV'))\r\n    if (!html) {\r\n      \r\n      if (id === 'filesManager.insert') {\r\n        $popup.addClass('fr-popup fr-files-manager fr-empty')\r\n      } else {\r\n        $popup.addClass('fr-popup fr-empty')\r\n      }\r\n\r\n      $container = $('body').first()\r\n      $container.append($popup)\r\n      $popup.data('container', $container)\r\n\r\n      popups[id] = $popup\r\n\r\n      return $popup\r\n    }\r\n\r\n    if (id === 'filesManager.insert') {\r\n      $popup.addClass(`fr-popup fr-files-manager${editor.helpers.isMobile() ? ' fr-mobile' : ' fr-desktop'}${editor.opts.toolbarInline ? ' fr-inline' : ''}`)\r\n    } else {\r\n      $popup.addClass(`fr-popup${editor.helpers.isMobile() ? ' fr-mobile' : ' fr-desktop'}${editor.opts.toolbarInline ? ' fr-inline' : ''}`)\r\n    }\r\n\r\n    $popup.html(html)\r\n\r\n    if (editor.opts.theme) {\r\n      $popup.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      if (!editor.opts.editInPopup && editor.$tb) {\r\n        editor.$tb.css('z-index', editor.opts.zIndex + 2)\r\n      }\r\n      else {\r\n        $popup.css('z-index', editor.opts.zIndex + 2)\r\n      }\r\n    }\r\n\r\n    if (editor.opts.direction !== 'auto') {\r\n      $popup.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n\r\n    $popup.find('input, textarea').attr('dir', editor.opts.direction).attr('disabled', 'disabled')\r\n\r\n    $container = $('body').first()\r\n    $container.append($popup)\r\n    $popup.data('container', $container)\r\n\r\n    popups[id] = $popup\r\n\r\n    const $colorHexLayer = $popup.find('.fr-color-hex-layer')\r\n    if ($colorHexLayer.length > 0) {\r\n      const spanWidth = editor.helpers.getPX($popup.find('.fr-color-set > span').css('width'))\r\n      const paddingLeft = editor.helpers.getPX($colorHexLayer.css('paddingLeft'))\r\n      const paddingRight = editor.helpers.getPX($colorHexLayer.css('paddingRight'))\r\n      $colorHexLayer.css('width', spanWidth * editor.opts.colorsStep + paddingLeft + paddingRight)\r\n    }\r\n\r\n    // Bind commands from the popup.\r\n    editor.button.bindCommands($popup, false)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _events(id) {\r\n    const $popup = popups[id]\r\n\r\n    return {\r\n      /**\r\n       * Resize window.\r\n       */\r\n      _windowResize() {\r\n        const inst = $popup.data('instance') || editor\r\n        if (!inst.helpers.isMobile() && $popup.isVisible()) {\r\n          inst.events.disableBlur()\r\n          inst.popups.hide(id)\r\n          inst.events.enableBlur()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Focus on an input.\r\n       */\r\n      _inputFocus(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const $target = $(e.currentTarget)\r\n\r\n        if ($target.is('input:file')) {\r\n          $target.closest('.fr-layer').addClass('fr-input-focus')\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        // IE workaround.\r\n        setTimeout(() => {\r\n          inst.events.enableBlur()\r\n        }, 100)\r\n\r\n        // Reposition scroll on mobile to the original one.\r\n        if (inst.helpers.isMobile()) {\r\n          const t = $(inst.o_win).scrollTop()\r\n          setTimeout(() => {\r\n            $(inst.o_win).scrollTop(t)\r\n          }, 0)\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Blur on an input.\r\n       */\r\n      _inputBlur(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const $target = $(e.currentTarget)\r\n\r\n        if ($target.is('input:file')) {\r\n          $target.closest('.fr-layer').removeClass('fr-input-focus')\r\n        }\r\n\r\n        // Do not do blur on window change.\r\n        if (document.activeElement !== this && $(this).isVisible()) {\r\n          if (inst.events.blurActive()) {\r\n            inst.events.trigger('blur')\r\n          }\r\n\r\n          inst.events.enableBlur()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Editor keydown.\r\n       */\r\n      _editorKeydown(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // ESC.\r\n        if (!inst.keys.ctrlKey(e) && e.which !== FE.KEYCODE.ALT && e.which !== FE.KEYCODE.ESC) {\r\n          if (isVisible(id) && $popup.findVisible('.fr-back').length) {\r\n            inst.button.exec($popup.findVisible('.fr-back').first())\r\n          }\r\n          // Don't hide if alt alone is pressed to allow Alt + F10 shortcut for accessibility.\r\n          else if (e.which !== FE.KEYCODE.ALT) {\r\n            inst.popups.hide(id)\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Handling hitting the popup elements with the mouse.\r\n       */\r\n      _preventFocus(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // Get the original target.\r\n        const originalTarget = e.originalEvent ? e.originalEvent.target || e.originalEvent.originalTarget : null\r\n\r\n        // Do not disable blur on mouseup because it is the last event in the chain.\r\n        if (e.type !== 'mouseup' && !$(originalTarget).is(':focus')) {\r\n          inst.events.disableBlur()\r\n        }\r\n\r\n        // Hide popup's active dropdowns on mouseup.\r\n        if (e.type === 'mouseup' && !($(originalTarget).hasClass('fr-command') || $(originalTarget).parents('.fr-command').length > 0) && !$(originalTarget).hasClass('fr-dropdown-content')) {\r\n          editor.button.hideActiveDropdowns($popup)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1733\r\n        // https://github.com/froala/wysiwyg-editor/issues/1838 . Firefox: with Jquery > 2 $(originalTarget).is(':focus') returns the oposite to Jquery < 2.\r\n        if ((editor.browser.safari || editor.browser.mozilla) && e.type === 'mousedown' && $(originalTarget).is('input[type=file]')) {\r\n          inst.events.disableBlur()\r\n        }\r\n\r\n        // Define the input selector.\r\n        const input_selector = 'input, textarea, button, select, label, .fr-command'\r\n\r\n        // Click was not made inside an input.\r\n        if (originalTarget && !$(originalTarget).is(input_selector) && $(originalTarget).parents(input_selector).length === 0) {\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n\r\n        // Click was made on another input inside popup. Prevent propagation of the event.\r\n        else if (originalTarget && $(originalTarget).is(input_selector)) {\r\n          e.stopPropagation()\r\n        }\r\n\r\n        _unmarkExit()\r\n      },\r\n\r\n      /**\r\n       * Mouseup inside the editor.\r\n       */\r\n      _editorMouseup() {\r\n\r\n        // Check if popup is visible and we can exit.\r\n        if ($popup.isVisible() && _canExit()) {\r\n\r\n          // If we have an input focused, then disable blur.\r\n          if ($popup.findVisible('input:focus, textarea:focus, button:focus, select:focus').length > 0) {\r\n            editor.events.disableBlur()\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Mouseup on window.\r\n       */\r\n      _windowMouseup(e) {\r\n        if (!editor.core.sameInstance($popup)) {\r\n          return true\r\n        }\r\n\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        if ($popup.isVisible() && _canExit()) {\r\n          e.stopPropagation()\r\n          inst.markers.remove()\r\n          inst.popups.hide(id)\r\n\r\n          _unmarkExit()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Keydown on window.\r\n       */\r\n      _windowKeydown(e) {\r\n        if (!editor.core.sameInstance($popup)) {\r\n          return true\r\n        }\r\n\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const key_code = e.which\r\n\r\n        // ESC.\r\n        if (FE.KEYCODE.ESC === key_code) {\r\n          if (inst.popups.isVisible(id) && inst.opts.toolbarInline) {\r\n            e.stopPropagation()\r\n\r\n            if (inst.popups.isVisible(id)) {\r\n              if ($popup.findVisible('.fr-back').length) {\r\n                inst.button.exec($popup.findVisible('.fr-back').first())\r\n\r\n                // Focus back popup button.\r\n                inst.accessibility.focusPopupButton($popup)\r\n              }\r\n              else if ($popup.findVisible('.fr-dismiss').length) {\r\n                inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n              }\r\n              else {\r\n                inst.popups.hide(id)\r\n                inst.toolbar.showInline(null, true)\r\n\r\n                // Focus back popup button.\r\n                inst.accessibility.focusPopupButton($popup)\r\n              }\r\n            }\r\n\r\n            return false\r\n          }\r\n          else if (inst.popups.isVisible(id)) {\r\n            if ($popup.findVisible('.fr-back').length) {\r\n              inst.button.exec($popup.findVisible('.fr-back').first)\r\n\r\n              // Focus back popup button.\r\n              inst.accessibility.focusPopupButton($popup)\r\n            }\r\n            else if ($popup.findVisible('.fr-dismiss').length) {\r\n              inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n            }\r\n            else {\r\n              inst.popups.hide(id)\r\n\r\n              // Focus back popup button.\r\n              inst.accessibility.focusPopupButton($popup)\r\n            }\r\n\r\n            return false\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Reposition popup.\r\n       */\r\n      _repositionPopup() {\r\n\r\n        // No height set or toolbar inline.\r\n        if (!(editor.opts.height || editor.opts.heightMax) || editor.opts.toolbarInline) {\r\n          return true\r\n        }\r\n\r\n        if (editor.$wp && isVisible(id) && $popup.parent().get(0) === editor.$sc.get(0)) {\r\n\r\n          // Popup top - wrapper top.\r\n          let p_top = $popup.offset().top - editor.$wp.offset().top\r\n\r\n          // Wrapper height.\r\n          const w_height = editor.$wp.outerHeight()\r\n\r\n          if (editor.node.hasClass($popup.get(0), 'fr-above')) {\r\n            p_top += $popup.outerHeight()\r\n          }\r\n\r\n          // 1. Popup top > w_height.\r\n          // 2. Popup top + popup height < 0.\r\n          if (p_top > w_height || p_top < 0) {\r\n            $popup.addClass('fr-hidden')\r\n          }\r\n          else {\r\n            $popup.removeClass('fr-hidden')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _bindInstanceEvents(ev, id) {\r\n\r\n    // Editor mouseup.\r\n    editor.events.on('mouseup', ev._editorMouseup, true)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('keydown', ev._editorKeydown)\r\n    }\r\n\r\n    // Remove popup class on focus as pop up will be hidden on focus of editor\r\n    editor.events.on('focus', () => {\r\n      popups[id].removeClass('focused');\r\n    })\r\n\r\n    // Hide all popups on blur.\r\n    editor.events.on('blur', () => {\r\n      if (areVisible()) {\r\n        editor.markers.remove()\r\n      }\r\n      \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2044\r\n      if (editor.helpers.isMobile()) {\r\n\r\n        if (popups[id].hasClass('focused')) {\r\n          hideAll()\r\n          popups[id].removeClass('focused')\r\n        } else {\r\n          popups[id].addClass('focused')\r\n        }\r\n      } else {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/858\r\n        if (!popups[id].find('iframe').length) {\r\n          hideAll()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Update the position of the popup.\r\n    if (editor.$wp && !editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$wp, `scroll.popup${id}`, ev._repositionPopup)\r\n    }\r\n\r\n    editor.events.on('window.mouseup', ev._windowMouseup, true)\r\n    editor.events.on('window.keydown', ev._windowKeydown, true)\r\n\r\n    popups[id].data(`inst${editor.id}`, true)\r\n\r\n    editor.events.on('destroy', () => {\r\n      if (editor.core.sameInstance(popups[id])) {\r\n        $('body').first().append(popups[id])\r\n        popups[id].removeClass('fr-active')\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Handles a checkbox label click event\r\n   */\r\n  function _checkboxLabelClick() {\r\n    // Get checkbox next to the label\r\n    const $checkbox = $(this).prev().children().first()\r\n\r\n    // Toggle the checkbox\r\n    $checkbox.attr('checked', !$checkbox.attr('checked'))\r\n  }\r\n\r\n  /**\r\n   * Create a popup.\r\n   */\r\n  function create(id, template) {\r\n    const $popup = _build(id, template)\r\n\r\n    // Build events.\r\n    const ev = _events(id)\r\n\r\n    // Events binded here should be assigned in every instace.\r\n    _bindInstanceEvents(ev, id)\r\n\r\n    // Input Focus / Blur / Keydown.\r\n    editor.events.$on($popup, 'mousedown mouseup touchstart touchend touch', '*', ev._preventFocus, true)\r\n    editor.events.$on($popup, 'focus', 'input, textarea, button, select', ev._inputFocus, true)\r\n    editor.events.$on($popup, 'blur', 'input, textarea, button, select', ev._inputBlur, true)\r\n\r\n    // Attach focus and blur events for transitions\r\n    let $labelElms = $popup.find('input, textarea')\r\n    _addLabel($labelElms)\r\n\r\n    editor.events.$on($labelElms, 'focus', _inputRefreshEmptyOnFocus)\r\n    editor.events.$on($labelElms, 'blur change', _inputRefreshEmptyOnBlur)\r\n\r\n    // Toggle the checkbox on click on label\r\n    editor.events.$on($popup, 'click', '.fr-checkbox + label', _checkboxLabelClick)\r\n\r\n    // Register popup to handle keyboard accessibility.\r\n    editor.accessibility.registerPopup(id)\r\n\r\n    // Toggle checkbox.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchend', 'label', function () {\r\n        $(`#${$(this).attr('for')}`).prop('checked', (i, val) => !val)\r\n      }, true)\r\n    }\r\n\r\n    // Window mouseup.\r\n    editor.events.$on($(editor.o_win), 'resize', ev._windowResize, true)\r\n\r\n    if (id === 'filesManager.insert') {\r\n      popups['filesManager.insert'].css('zIndex', 2147483641)\r\n    }\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _destroy() {\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        const $popup = popups[id]\r\n\r\n        if ($popup) {\r\n          $popup.html('').removeData().remove()\r\n          popups[id] = null\r\n        }\r\n      }\r\n    }\r\n\r\n    popups = []\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    screenHeightofBrowser = window.innerHeight\r\n    editor.events.on('shared.destroy', _destroy, true)\r\n\r\n    editor.events.on('window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    // Prevent hiding popups while we scroll.\r\n    editor.events.$on($(editor.o_win), 'scroll', _unmarkExit)\r\n\r\n    editor.events.on('mousedown', (e) => {\r\n      if (areVisible()) {\r\n        e.stopPropagation()\r\n\r\n        // Remove markers.\r\n        editor.$el.find('.fr-marker').remove()\r\n\r\n        // Prepare for exit.\r\n        _markExit()\r\n\r\n        // Disable blur.\r\n        editor.events.disableBlur()\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    create,\r\n    get,\r\n    show,\r\n    hide,\r\n    onHide,\r\n    hideAll,\r\n    setContainer,\r\n    refresh,\r\n    onRefresh,\r\n    onShow,\r\n    isVisible,\r\n    setFileListHeight,\r\n    areVisible,\r\n    setPopupDimensions\r\n  }\r\n}\r\n","import '../ui/popups.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.MODULES.accessibility = function (editor) {\r\n  const $ = editor.$\r\n\r\n  // Flag to tell if mouseenter can blur popup elements with tabindex. This is in case that popup shows over the cursor so mouseenter should not blur immediately.\r\n  // FireFox issue.\r\n  let can_blur = true\r\n\r\n  /*\r\n   * Focus an element.\r\n   */\r\n  function focusToolbarElement($el) {\r\n    const contenteditableEl = editor.$el.find('[contenteditable=\"true\"]')\r\n    let focusedEditableEl = false\r\n    let ind = 0\r\n    // Check if there is a contenteditable element in focus.\r\n    while (contenteditableEl.get(ind)) {\r\n      if ($(contenteditableEl.get(ind)).is(':focus')) {\r\n        focusedEditableEl = true\r\n      }\r\n      ind++\r\n    }\r\n    // Check if it is empty.\r\n    // https://github.com/froala/wysiwyg-editor/issues/2427.\r\n    if (!$el || !$el.length || focusedEditableEl) {\r\n      return\r\n    }\r\n\r\n    // Add blur event handler on the element that do not reside on a popup.\r\n    if (!$el.data('blur-event-set') && !$el.parents('.fr-popup').length) {\r\n\r\n      // Set shared event for blur on element because it resides in a popup.\r\n      editor.events.$on($el, 'blur', () => {\r\n\r\n        // Get current instance.\r\n        const inst = $el.parents('.fr-toolbar, .fr-popup').data('instance') || editor\r\n\r\n        // Check if we should actually trigger blur.\r\n        if (inst.events.blurActive()  && !editor.core.hasFocus()) {\r\n          inst.events.trigger('blur')\r\n        }\r\n\r\n        // Allow blur.\r\n        // IE hack.\r\n        setTimeout(() => {\r\n          inst.events.enableBlur()\r\n        }, 100)\r\n      }, true)\r\n\r\n      $el.data('blur-event-set', true)\r\n    }\r\n\r\n    // Get current instance.\r\n    const inst = $el.parents('.fr-toolbar, .fr-popup').data('instance') || editor\r\n\r\n    // Do not allow blur on the editor until element focus.\r\n    inst.events.disableBlur()\r\n    $el.get(0).focus()\r\n\r\n    // Store it as the current focused element.\r\n    editor.shared.$f_el = $el\r\n  }\r\n\r\n  /*\r\n   * Focus first or last toolbar button.\r\n   */\r\n  function focusToolbar($tb, last) {\r\n    const position = last ? 'last' : 'first'\r\n    // Get all toobar buttons.\r\n    // Re-order the toolbar buttons\r\n    const $btn = _reorderToolbarButtons(_getVisibleToolbarButtons($tb))[position]()\r\n\r\n    if ($btn.length) {\r\n      focusToolbarElement($btn)\r\n\r\n      return true\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus a popup content element.\r\n   */\r\n  function focusContentElement($el) {\r\n\r\n    // Save editor selection only if the element we want to focus is input text or textarea.\r\n    if ($el.is('input, textarea, select')) {\r\n      saveSelection()\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n    $el.get(0).focus()\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Focus popup's content.\r\n   */\r\n  function focusContent($content, backward) {\r\n\r\n    // First input.\r\n    let $first_input = $content.find('input, textarea, button, select').filter(function () {\r\n      return $(this).isVisible()\r\n    }).not(':disabled')\r\n\r\n    $first_input = backward ? $first_input.last() : $first_input.first()\r\n\r\n    if ($first_input.length) {\r\n      return focusContentElement($first_input)\r\n    }\r\n\r\n    if (editor.shared.with_kb) {\r\n\r\n      // Active item.\r\n      const $active_item = $content.findVisible('.fr-active-item').first()\r\n\r\n      if ($active_item.length) {\r\n        return focusContentElement($active_item)\r\n      }\r\n\r\n      // First element with tabindex.\r\n      const $first_tab_index = $content.findVisible('[tabIndex]').first()\r\n\r\n      if ($first_tab_index.length) {\r\n        return focusContentElement($first_tab_index)\r\n      }\r\n    }\r\n  }\r\n\r\n  function saveSelection() {\r\n    if (editor.$el.find('.fr-marker').length === 0 && editor.core.hasFocus()) {\r\n      editor.selection.save()\r\n    }\r\n  }\r\n\r\n  function restoreSelection() {\r\n\r\n    // Restore selection.\r\n    if (editor.$el.find('.fr-marker').length) {\r\n      editor.events.disableBlur()\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus popup.\r\n   */\r\n  function focusPopup($popup) {\r\n\r\n    // Get popup content without fr-buttons toolbar.\r\n    const $popup_content = $popup.children().not('.fr-buttons')\r\n\r\n    // Blur popup on mouseenter.\r\n    if (!$popup_content.data('mouseenter-event-set')) {\r\n      editor.events.$on($popup_content, 'mouseenter', '[tabIndex]', (e) => {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // FireFox issue.\r\n        if (!can_blur) {\r\n\r\n          // Popup showed over the cursor.\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          return\r\n        }\r\n        const $focused_item = $popup_content.find(':focus').first()\r\n\r\n        if ($focused_item.length && !$focused_item.is('input, button, textarea, select')) {\r\n          inst.events.disableBlur()\r\n          $focused_item.blur()\r\n          inst.events.disableBlur()\r\n          inst.events.focus()\r\n        }\r\n      })\r\n\r\n      $popup_content.data('mouseenter-event-set', true)\r\n    }\r\n\r\n    // Focus content if possible, else focus toolbar if the popup is opened with keyboard.\r\n    if (!focusContent($popup_content) && editor.shared.with_kb) {\r\n      focusToolbar($popup.find('.fr-buttons'))\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus modal.\r\n   */\r\n  function focusModal($modal) {\r\n\r\n    // Make sure we have focus on editing area.\r\n    if (!editor.core.hasFocus()) {\r\n      editor.events.disableBlur()\r\n      editor.events.focus()\r\n    }\r\n\r\n    // Save selection.\r\n    editor.accessibility.saveSelection()\r\n    editor.events.disableBlur()\r\n\r\n    // Blur editor and clear selection to enable arrow keys scrolling.\r\n    editor.el.blur()\r\n    editor.selection.clear()\r\n\r\n    editor.events.disableBlur()\r\n\r\n    if (editor.shared.with_kb) {\r\n      $modal.find('.fr-command[tabIndex], [tabIndex]').first().focus()\r\n    }\r\n    else {\r\n      $modal.find('[tabIndex]').first().focus()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus popup toolbar or main toolbar.\r\n   */\r\n  function focusToolbars() {\r\n\r\n    // Look for active popup.\r\n    const $popup = editor.popups.areVisible()\r\n\r\n    if ($popup) {\r\n      const $tb = $popup.find('.fr-buttons')\r\n\r\n      if (!$tb.find('button:focus, .fr-group span:focus').length) {\r\n        return !focusToolbar($tb)\r\n      }\r\n\r\n      return !focusToolbar($popup.data('instance').$tb)\r\n\r\n    }\r\n\r\n    // Focus main toolbar if no others were found.\r\n    return !focusToolbar(editor.$tb)\r\n  }\r\n\r\n  /*\r\n   * Get the dropdown button that is active and is focused or is active and its commands are focused.\r\n   */\r\n  function _getActiveFocusedDropdown() {\r\n    let $activeDropdown = null\r\n\r\n    // Is active and focused.\r\n    if (editor.shared.$f_el.is('.fr-dropdown.fr-active')) {\r\n      $activeDropdown = editor.shared.$f_el\r\n    }\r\n\r\n    // Is active and its commands are focused. editor.shared.$f_el is a dropdown command.\r\n    else if (editor.shared.$f_el.closest('.fr-dropdown-menu').prev().is('.fr-dropdown.fr-active')) {\r\n      $activeDropdown = editor.shared.$f_el.closest('.fr-dropdown-menu').prev()\r\n    }\r\n\r\n    return $activeDropdown\r\n  }\r\n\r\n  /**\r\n   * Insert the more toolbar buttons after its corresponding more button\r\n   */\r\n  function _reorderToolbarButtons($buttons) {\r\n\r\n    // Get the more button position\r\n    let moreBtnIndex = -1\r\n    for (let i = 0; i < $buttons.length; i++) {\r\n      if ($($buttons[i]).hasClass('fr-open')) {\r\n        moreBtnIndex = i\r\n      }\r\n    }\r\n\r\n    // Get first open more toolbar button position\r\n    let firstMoreToolbarBtnIndex = $buttons.index(editor.$tb.find('.fr-more-toolbar.fr-expanded > button.fr-command').first())\r\n\r\n    // If atleast one more toolbar is expanded\r\n    if (firstMoreToolbarBtnIndex > 0 && moreBtnIndex !== -1) {\r\n      // Insert the more toolbar buttons after its more button\r\n      const $moreToolbarBtns = $buttons.slice(firstMoreToolbarBtnIndex, $buttons.length)\r\n      $buttons = $buttons.slice(0, firstMoreToolbarBtnIndex)\r\n      const left = $buttons.slice(0, moreBtnIndex + 1)\r\n      const right = $buttons.slice(moreBtnIndex + 1, $buttons.length)\r\n      \r\n      $buttons = left\r\n      \r\n      for (let i = 0; i < $moreToolbarBtns.length; i++) {\r\n        $buttons.push($moreToolbarBtns[i])\r\n      }\r\n\r\n      for (let i = 0; i < right.length; i++) {\r\n        $buttons.push(right[i])\r\n      }\r\n    }\r\n\r\n    return $buttons\r\n  }\r\n  \r\n  /**\r\n   * Returns the visible toolbar buttons\r\n   */\r\n  function _getVisibleToolbarButtons($tb) {\r\n    return $tb.findVisible('button:not(.fr-disabled), .fr-group span.fr-command').filter((btn) => {\r\n      const $moreToolbar = $(btn).parents('.fr-more-toolbar')\r\n      // Remove all the buttons which are not part of the open more toolbar\r\n      return ($moreToolbar.length === 0 || ($moreToolbar.length > 0 && $moreToolbar.hasClass('fr-expanded')))\r\n    })\r\n  }\r\n\r\n  function _moveHorizontally($tb, tab_key, forward) {\r\n    if (editor.shared.$f_el) {\r\n      const $activeDropdown = _getActiveFocusedDropdown()\r\n\r\n      // A focused active dropdown button.\r\n      if ($activeDropdown) {\r\n\r\n        // Unclick.\r\n        editor.button.click($activeDropdown)\r\n        editor.shared.$f_el = $activeDropdown\r\n      }\r\n\r\n      // Focus the next/previous button.\r\n\r\n      // Get all toobar buttons.\r\n      // Re-order the toolbar buttons\r\n      const $buttons = _reorderToolbarButtons(_getVisibleToolbarButtons($tb))\r\n\r\n      // Get focused button position.\r\n      let index = $buttons.index(editor.shared.$f_el)\r\n      \r\n      // Last or first button reached.\r\n      if (index === 0 && !forward || index === $buttons.length - 1 && forward) {\r\n        let status\r\n\r\n        // Focus content if last or first toolbar button is reached.\r\n        if (tab_key) {\r\n          if ($tb.parent().is('.fr-popup')) {\r\n            const $popup_content = $tb.parent().children().not('.fr-buttons')\r\n            status = !focusContent($popup_content, !forward)\r\n          }\r\n\r\n          if (status === false) {\r\n            editor.shared.$f_el = null\r\n          }\r\n        }\r\n\r\n        // Arrow used or popup listeners were not active.\r\n        if (!tab_key || status !== false) {\r\n\r\n          // Focus to the opposite side button of the toolbar.\r\n          focusToolbar($tb, !forward)\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Focus next or previous button.\r\n        focusToolbarElement($($buttons.get(index + (forward ? 1 : -1))))\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  function moveForward($tb, tab_key) {\r\n    return _moveHorizontally($tb, tab_key, true)\r\n  }\r\n\r\n  function moveBackward($tb, tab_key) {\r\n    return _moveHorizontally($tb, tab_key)\r\n  }\r\n\r\n  function _moveVertically(down) {\r\n    if (editor.shared.$f_el) {\r\n\r\n      let $destination\r\n\r\n      // Dropdown button.\r\n      if (editor.shared.$f_el.is('.fr-dropdown.fr-active')) {\r\n\r\n        // Focus the first/last dropdown command.\r\n        if (down) {\r\n          $destination = editor.shared.$f_el.next().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n        else {\r\n          $destination = editor.shared.$f_el.next().find('.fr-command:not(.fr-disabled)').last()\r\n        }\r\n\r\n        focusToolbarElement($destination)\r\n\r\n        return false\r\n      }\r\n\r\n      // Dropdown command.\r\n      else if (editor.shared.$f_el.is('a.fr-command')) {\r\n\r\n        // Focus the previous/next dropdown command.\r\n        if (down) {\r\n          $destination = editor.shared.$f_el.closest('li').nextAllVisible().first().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n        else {\r\n          $destination = editor.shared.$f_el.closest('li').prevAllVisible().first().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n\r\n        // Last or first button reached: Focus to the opposite side element of the dropdown.\r\n        if (!$destination.length) {\r\n          if (down) {\r\n            $destination = editor.shared.$f_el.closest('.fr-dropdown-menu').find('.fr-command:not(.fr-disabled)').first()\r\n          }\r\n          else {\r\n            $destination = editor.shared.$f_el.closest('.fr-dropdown-menu').find('.fr-command:not(.fr-disabled)').last()\r\n          }\r\n        }\r\n\r\n        focusToolbarElement($destination)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function moveDown() {\r\n\r\n    // Also enable dropdown opening on arrow down.\r\n    if (editor.shared.$f_el && editor.shared.$f_el.is('.fr-dropdown:not(.fr-active)')) {\r\n      return enter()\r\n    }\r\n\r\n    return _moveVertically(true)\r\n\r\n  }\r\n\r\n  function moveUp() {\r\n    return _moveVertically()\r\n  }\r\n\r\n  function enter() {\r\n    if (editor.shared.$f_el) {\r\n\r\n      // Check if the focused element is a dropdown button.\r\n      if (editor.shared.$f_el.hasClass('fr-dropdown')) {\r\n\r\n        // Do click and focus the first dropdown item.\r\n        editor.button.click(editor.shared.$f_el)\r\n      }\r\n      else if (editor.shared.$f_el.is('button.fr-back')) {\r\n        if (editor.opts.toolbarInline) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        const $popup = editor.popups.areVisible(editor)\r\n\r\n        // Previous popup will show up so we need to not default focus the popup because back popup button have to be focused.\r\n        if ($popup) {\r\n          editor.shared.with_kb = false\r\n        }\r\n\r\n        editor.button.click(editor.shared.$f_el)\r\n\r\n        // Focus back popup button.\r\n        focusPopupButton($popup)\r\n      }\r\n      else {\r\n        editor.events.disableBlur()\r\n        editor.button.click(editor.shared.$f_el)\r\n\r\n        // If it is a more button\r\n        if (editor.shared.$f_el.attr('data-group-name')) {\r\n          // Focus the first active button in the more toolbar only if the more toolbar is open\r\n          const $moreToolbar = editor.$tb.find(`.fr-more-toolbar[data-name=\"${editor.shared.$f_el.attr('data-group-name')}\"]`)\r\n          let $btn = editor.shared.$f_el\r\n          if ($moreToolbar.hasClass('fr-expanded')) {\r\n            $btn = $moreToolbar.findVisible('button:not(.fr-disabled)')['first']()\r\n          }\r\n          if ($btn) {\r\n            focusToolbarElement($btn)\r\n          }\r\n        }\r\n        else if (editor.shared.$f_el.attr('data-popup')) {\r\n\r\n          // Attach button to visible popup.\r\n          const $visible_popup = editor.popups.areVisible(editor)\r\n\r\n          if ($visible_popup) {\r\n            $visible_popup.data('popup-button', editor.shared.$f_el)\r\n          }\r\n        }\r\n        else if (editor.shared.$f_el.attr('data-modal')) {\r\n\r\n          // Attach button to visible modal.\r\n          const $visible_modal = editor.modals.areVisible(editor)\r\n\r\n          if ($visible_modal) {\r\n            $visible_modal.data('modal-button', editor.shared.$f_el)\r\n          }\r\n        }\r\n\r\n        editor.shared.$f_el = null\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  function focusEditor() {\r\n    if (editor.shared.$f_el) {\r\n      editor.events.disableBlur()\r\n      editor.shared.$f_el.blur()\r\n      editor.shared.$f_el = null\r\n    }\r\n\r\n    // Trigger custom behavior.\r\n    if (editor.events.trigger('toolbar.focusEditor') === false) {\r\n      return\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n    editor.$el.get(0).focus()\r\n    editor.events.focus()\r\n  }\r\n\r\n  function esc($tb) {\r\n    if (editor.shared.$f_el) {\r\n      const $activeDropdown = _getActiveFocusedDropdown()\r\n\r\n      // Active focused dropdown.\r\n      if ($activeDropdown) {\r\n\r\n        // Unclick.\r\n        editor.button.click($activeDropdown)\r\n\r\n        // Focus the unactive dropdown.\r\n        focusToolbarElement($activeDropdown)\r\n      }\r\n\r\n      // Toolbar contains a back button.\r\n      else if ($tb.parent().findVisible('.fr-back').length) {\r\n        editor.shared.with_kb = false\r\n\r\n        if (editor.opts.toolbarInline) {\r\n\r\n          // Toolbar inline needs focus in order to show up.\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        editor.button.exec($tb.parent().findVisible('.fr-back')).first()\r\n\r\n        // Focus back popup button.\r\n        focusPopupButton($tb.parent())\r\n      }\r\n\r\n      // A toolbar that gets opened from the editable area.\r\n      else if (editor.shared.$f_el.is('button, .fr-group span')) {\r\n        if ($tb.parent().is('.fr-popup')) {\r\n\r\n          // Restore selection.\r\n          editor.accessibility.restoreSelection()\r\n          editor.shared.$f_el = null\r\n\r\n          // Trigger custom behaviour.\r\n          if (editor.events.trigger('toolbar.esc') !== false) {\r\n\r\n            // Default behaviour.\r\n            // Hide popup.\r\n            editor.popups.hide($tb.parent())\r\n\r\n            // Show inline toolbar.\r\n            if (editor.opts.toolbarInline) {\r\n              editor.toolbar.showInline(null, true)\r\n            }\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($tb.parent())\r\n          }\r\n        }\r\n        else {\r\n          focusEditor()\r\n        }\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Execute shortcut.\r\n   */\r\n  function exec(e, $tb) {\r\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\r\n\r\n    const keycode = e.which\r\n\r\n    let status = false\r\n\r\n    // Tab.\r\n    if (keycode === FE.KEYCODE.TAB && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveForward($tb, true)\r\n    }\r\n\r\n    // Arrow right -> .\r\n    else if (keycode === FE.KEYCODE.ARROW_RIGHT && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveForward($tb)\r\n    }\r\n\r\n    // Shift + Tab.\r\n    else if (keycode === FE.KEYCODE.TAB && !ctrlKey && e.shiftKey && !e.altKey) {\r\n      status = moveBackward($tb, true)\r\n    }\r\n\r\n    // Arrow left <- .\r\n    else if (keycode === FE.KEYCODE.ARROW_LEFT && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveBackward($tb)\r\n    }\r\n\r\n    // Arrow up.\r\n    else if (keycode === FE.KEYCODE.ARROW_UP && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveUp()\r\n    }\r\n\r\n    // Arrow down.\r\n    else if (keycode === FE.KEYCODE.ARROW_DOWN && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveDown()\r\n    }\r\n\r\n    // Enter.\r\n    else if ((keycode === FE.KEYCODE.ENTER || keycode === FE.KEYCODE.SPACE) && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = enter()\r\n    }\r\n\r\n    // Esc.\r\n    else if (keycode === FE.KEYCODE.ESC && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = esc($tb)\r\n    }\r\n\r\n    // Alt + F10.\r\n    else if (keycode === FE.KEYCODE.F10 && !ctrlKey && !e.shiftKey && e.altKey) {\r\n      status = focusToolbars()\r\n    }\r\n\r\n    // No focused element and no action done. Eg: popup is opened.\r\n    if (!editor.shared.$f_el && typeof status === 'undefined') {\r\n      status = true\r\n    }\r\n\r\n    // Check if key event is a browser action. Eg: Ctrl + R.\r\n    if (!status && editor.keys.isBrowserAction(e)) {\r\n      status = true\r\n    }\r\n\r\n    // Propagate to the next key listeners.\r\n    if (status) {\r\n      return true\r\n    }\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  /*\r\n   * Register a toolbar to keydown event.\r\n   */\r\n  function registerToolbar($tb) {\r\n    if (!$tb || !$tb.length) {\r\n      return\r\n    }\r\n\r\n    // Hitting keydown on toolbar.\r\n    editor.events.$on($tb, 'keydown', (e) => {\r\n      // Allow only buttons.fr-command.\r\n      if (!$(e.target).is('a.fr-command, button.fr-command, .fr-group span.fr-command')) {\r\n        return true\r\n      }\r\n\r\n      // Get the current editor instance for the popup.\r\n      const inst = $tb.parents('.fr-popup').data('instance') || $tb.data('instance') || editor\r\n\r\n      // Keyboard used.\r\n      editor.shared.with_kb = true\r\n      const status = inst.accessibility.exec(e, $tb)\r\n      editor.shared.with_kb = false\r\n\r\n      return status\r\n    }, true)\r\n\r\n    // Unfocus the toolbar on mouseenter.\r\n    editor.events.$on($tb, 'mouseenter', '[tabIndex]', (e) => {\r\n      const inst = $tb.parents('.fr-popup').data('instance') || $tb.data('instance') || editor\r\n\r\n      // FireFox issue.\r\n      if (!can_blur) {\r\n\r\n        // Popup showed over the cursor.\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n\r\n        return\r\n      }\r\n\r\n      const $hovered_el = $(e.currentTarget)\r\n\r\n      if (inst.shared.$f_el && inst.shared.$f_el.not($hovered_el)) {\r\n        inst.accessibility.focusEditor()\r\n      }\r\n\r\n    }, true)\r\n\r\n    // Update the focused shared variable after every transition\r\n    if (editor.$tb) {\r\n      editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', function() {\r\n        editor.shared.$f_el = $(document.activeElement)\r\n      })\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Register a popup to a keydown event.\r\n   */\r\n  function registerPopup(id) {\r\n    const $popup = editor.popups.get(id)\r\n    const ev = _getPopupEvents(id)\r\n\r\n    // Register popup toolbar.\r\n    registerToolbar($popup.find('.fr-buttons'))\r\n\r\n    // Clear popup button on mouseenter.\r\n    editor.events.$on($popup, 'mouseenter', 'tabIndex', ev._tiMouseenter, true)\r\n\r\n    // Keydown handler on every element that has tabIndex.\r\n    editor.events.$on($popup.children().not('.fr-buttons'), 'keydown', '[tabIndex]', ev._tiKeydown, true)\r\n\r\n    // Restore selection on popups hide for the current active popup.\r\n    editor.popups.onHide(id, () => {\r\n      const inst = $popup.data('instance') || editor\r\n      inst.accessibility.restoreSelection()\r\n    })\r\n\r\n    // FireFox issue: Prevent immediate popup bluring. Popup could show up over the cursor.\r\n    editor.popups.onShow(id, () => {\r\n      can_blur = false\r\n      setTimeout(() => {\r\n        can_blur = true\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Get popup events.\r\n   */\r\n  function _getPopupEvents(id) {\r\n    const $popup = editor.popups.get(id)\r\n\r\n    return {\r\n      /**\r\n       * Keydown on an input.\r\n       */\r\n      _tiKeydown(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // See if plugins listeners are active.\r\n        if (inst.events.trigger('popup.tab', [e]) === false) {\r\n          return false\r\n        }\r\n\r\n        const key_code = e.which\r\n\r\n        const $focused_item = $popup.find(':focus').first()\r\n\r\n        // Tabbing.\r\n        if (FE.KEYCODE.TAB === key_code) {\r\n          e.preventDefault()\r\n\r\n          // Focus next/previous input.\r\n          const $popup_content = $popup.children().not('.fr-buttons')\r\n          const inputs = $popup_content.findVisible('input, textarea, button, select').not('.fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled').toArray()\r\n          const idx = inputs.indexOf(this) + (e.shiftKey ? -1 : 1)\r\n\r\n          if (idx >= 0 && idx < inputs.length) {\r\n            inst.events.disableBlur()\r\n            $(inputs[idx]).focus()\r\n\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n          // Focus toolbar.\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          if ($tb.length && focusToolbar($tb, Boolean(e.shiftKey))) {\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n          // Focus content.\r\n          if (focusContent($popup_content)) {\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        // ENTER.\r\n        else if (FE.KEYCODE.ENTER === key_code && e.target && e.target.tagName !== 'TEXTAREA') {\r\n          let $active_button = null\r\n\r\n          if ($popup.findVisible('.fr-submit').length > 0) {\r\n            $active_button = $popup.findVisible('.fr-submit').first()\r\n          }\r\n          else if ($popup.findVisible('.fr-dismiss').length) {\r\n            $active_button = $popup.findVisible('.fr-dismiss').first()\r\n          }\r\n\r\n          if ($active_button) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            inst.events.disableBlur()\r\n            inst.button.exec($active_button)\r\n          }\r\n        }\r\n\r\n        // ESC.\r\n        else if (FE.KEYCODE.ESC === key_code) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          // Restore selection.\r\n          inst.accessibility.restoreSelection()\r\n\r\n          if (inst.popups.isVisible(id) && $popup.findVisible('.fr-back').length) {\r\n            if (inst.opts.toolbarInline) {\r\n\r\n              // Toolbar inline needs focus in order to show up.\r\n              inst.events.disableBlur()\r\n              inst.events.focus()\r\n            }\r\n            inst.button.exec($popup.findVisible('.fr-back').first())\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($popup)\r\n          }\r\n          else if (inst.popups.isVisible(id) && $popup.findVisible('.fr-dismiss').length) {\r\n            inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n          }\r\n          else {\r\n            inst.popups.hide(id)\r\n\r\n            if (inst.opts.toolbarInline) {\r\n              inst.toolbar.showInline(null, true)\r\n            }\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($popup)\r\n          }\r\n\r\n          return false\r\n        }\r\n\r\n        // Allow space.\r\n        else if (FE.KEYCODE.SPACE === key_code && ($focused_item.is('.fr-submit') || $focused_item.is('.fr-dismiss'))) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n          inst.events.disableBlur()\r\n          inst.button.exec($focused_item)\r\n\r\n          return true\r\n        }\r\n\r\n        // Other KEY. Stop propagation to the window.\r\n        else {\r\n\r\n          // Check if key event is a browser action. Eg: Ctrl + R.\r\n          if (inst.keys.isBrowserAction(e)) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n\r\n          if ($focused_item.is('input[type=text], textarea')) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n\r\n          if (FE.KEYCODE.SPACE === key_code && ($focused_item.is('.fr-link-attr') || $focused_item.is('input[type=file]'))) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          return false\r\n        }\r\n      },\r\n\r\n      _tiMouseenter() {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        _clearPopupButton(inst)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus the button from which the popup was showed.\r\n   */\r\n  function focusPopupButton($popup) {\r\n    const $popup_button = $popup.data('popup-button')\r\n\r\n    if ($popup_button) {\r\n      setTimeout(() => {\r\n        focusToolbarElement($popup_button)\r\n        $popup.data('popup-button', null)\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus the button from which the modal was showed.\r\n   */\r\n  function focusModalButton($modal) {\r\n    const $modal_button = $modal.data('modal-button')\r\n\r\n    if ($modal_button) {\r\n      setTimeout(() => {\r\n        focusToolbarElement($modal_button)\r\n        $modal.data('modal-button', null)\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  function hasFocus() {\r\n    return editor.shared.$f_el !== null\r\n  }\r\n\r\n  function _clearPopupButton(inst) {\r\n    const $visible_popup = editor.popups.areVisible(inst)\r\n\r\n    if ($visible_popup) {\r\n      $visible_popup.data('popup-button', null)\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\r\n    const keycode = e.which\r\n\r\n    // Alt + F10.\r\n    if (keycode === FE.KEYCODE.F10 && !ctrlKey && !e.shiftKey && e.altKey) {\r\n\r\n      // Keyboard used.\r\n      editor.shared.with_kb = true\r\n\r\n      // Focus active popup content inside the current editor if possible, else focus an available toolbar.\r\n      const $visible_popup = editor.popups.areVisible(editor)\r\n      let focused_content = false\r\n\r\n      if ($visible_popup) {\r\n        focused_content = focusContent($visible_popup.children().not('.fr-buttons'))\r\n      }\r\n\r\n      if (!focused_content) {\r\n        focusToolbars()\r\n      }\r\n\r\n      editor.shared.with_kb = false\r\n\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Key down on the editing area.\r\n    if (editor.$wp) {\r\n      editor.events.on('keydown', _editorKeydownHandler, true)\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler, true)\r\n    }\r\n\r\n    // Mousedown on the editing area.\r\n    editor.events.on('mousedown', (e) => {\r\n      _clearPopupButton(editor)\r\n\r\n      if (editor.shared.$f_el && editor.el.isSameNode(editor.shared.$f_el[0])) {\r\n        editor.accessibility.restoreSelection()\r\n        e.stopPropagation()\r\n        editor.events.disableBlur()\r\n        editor.shared.$f_el = null\r\n      }\r\n    }, true)\r\n\r\n    // Blur on the editing area.\r\n    editor.events.on('blur', () => {\r\n      editor.shared.$f_el = null\r\n      _clearPopupButton(editor)\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    registerPopup,\r\n    registerToolbar,\r\n    focusToolbarElement,\r\n    focusToolbar,\r\n    focusContent,\r\n    focusPopup,\r\n    focusModal,\r\n    focusEditor,\r\n    focusPopupButton,\r\n    focusModalButton,\r\n    hasFocus,\r\n    exec,\r\n    saveSelection,\r\n    restoreSelection\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  tooltips: true\r\n})\r\n\r\nFE.MODULES.tooltip = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function hide() {\r\n    if (editor.helpers.isMobile()) {\r\n      return\r\n    }\r\n\r\n    // Position fixed for: https://github.com/froala/wysiwyg-editor/issues/1247.\r\n    if (editor.$tooltip) {\r\n      editor.$tooltip.removeClass('fr-visible').css('left', '-3000px').css('position', 'fixed')\r\n    }\r\n  }\r\n\r\n  function to($el, above) {\r\n    if (editor.helpers.isMobile()) {\r\n      return\r\n    }\r\n\r\n    if (!$el.data('title')) {\r\n      $el.data('title', $el.attr('title'))\r\n    }\r\n\r\n    if (!$el.data('title')) {\r\n      return\r\n    }\r\n\r\n    if (!editor.$tooltip) {\r\n      _init()\r\n    }\r\n\r\n    $el.removeAttr('title')\r\n    editor.$tooltip.text(editor.language.translate($el.data('title')))\r\n    editor.$tooltip.addClass('fr-visible')\r\n\r\n    let left = $el.offset().left + ($el.outerWidth() - editor.$tooltip.outerWidth()) / 2\r\n\r\n    // Normalize screen position.\r\n    if (left < 0) {\r\n      left = 0\r\n    }\r\n\r\n    if (left + editor.$tooltip.outerWidth() > $(editor.o_win).width()) {\r\n      left = $(editor.o_win).width() - editor.$tooltip.outerWidth()\r\n    }\r\n\r\n    if (typeof above === 'undefined') {\r\n      above = editor.opts.toolbarBottom\r\n    }\r\n\r\n    if ((($el.offset().top - $(window).scrollTop()) + $el.outerHeight() + 10) >= $(window).height()) {\r\n      above = true\r\n    }\r\n\r\n    const top = !above ? $el.offset().top + $el.outerHeight() : $el.offset().top - editor.$tooltip.height()\r\n\r\n    editor.$tooltip.css('position', '')\r\n    editor.$tooltip.css('left', left)\r\n    editor.$tooltip.css('top', Math.ceil(top))\r\n\r\n    if ($(editor.o_doc).find('body').first().css('position') !== 'static') {\r\n      editor.$tooltip.css('margin-left', -$(editor.o_doc).find('body').first().offset().left)\r\n      editor.$tooltip.css('margin-top', -$(editor.o_doc).find('body').first().offset().top)\r\n    }\r\n    else {\r\n      editor.$tooltip.css('margin-left', '')\r\n      editor.$tooltip.css('margin-top', '')\r\n    }\r\n  }\r\n\r\n  function bind($el, selector, above) {\r\n    if (editor.opts.tooltips && !editor.helpers.isMobile()) {\r\n      editor.events.$on($el, 'mouseover', selector, (e) => {\r\n        if (!editor.node.hasClass(e.currentTarget, 'fr-disabled') && !editor.edit.isDisabled()) {\r\n          to($(e.currentTarget), above)\r\n        }\r\n      }, true)\r\n\r\n      editor.events.$on($el, `mouseout ${editor._mousedown} ${editor._mouseup}`, selector, () => {\r\n        hide()\r\n      }, true)\r\n    }\r\n  }\r\n\r\n  function _init() {\r\n    if (editor.opts.tooltips && !editor.helpers.isMobile()) {\r\n      if (!editor.shared.$tooltip) {\r\n        editor.shared.$tooltip = $(editor.doc.createElement('DIV')).addClass('fr-tooltip')\r\n\r\n        editor.$tooltip = editor.shared.$tooltip\r\n\r\n        if (editor.opts.theme) {\r\n          editor.$tooltip.addClass(`${editor.opts.theme}-theme`)\r\n        }\r\n\r\n        $(editor.o_doc).find('body').first().append(editor.$tooltip)\r\n      }\r\n      else {\r\n        editor.$tooltip = editor.shared.$tooltip\r\n      }\r\n\r\n      editor.events.on('shared.destroy', () => {\r\n        editor.$tooltip.html('').removeData().remove()\r\n        editor.$tooltip = null\r\n      }, true)\r\n    }\r\n  }\r\n\r\n  return {\r\n    hide,\r\n    to,\r\n    bind\r\n  }\r\n}\r\n","import './tooltip.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.TOOLBAR_VISIBLE_BUTTONS = 3\r\n\r\nFE.MODULES.button = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let buttons = []\r\n\r\n  if (editor.opts.toolbarInline || editor.opts.toolbarContainer) {\r\n    if (!editor.shared.buttons) {\r\n      editor.shared.buttons = []\r\n    }\r\n    buttons = editor.shared.buttons\r\n  }\r\n\r\n  let popup_buttons = []\r\n\r\n  if (!editor.shared.popup_buttons) {\r\n    editor.shared.popup_buttons = []\r\n  }\r\n  popup_buttons = editor.shared.popup_buttons\r\n\r\n  /**\r\n   * Add a new button to the buttons list\r\n   */\r\n  function addButtons($btns) {\r\n    for (let i = 0; i < $btns.length; i++) {\r\n      buttons.push($btns)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Filter buttons based on a specified selector.\r\n   */\r\n  function _filterButtons(butons_list, selector, search_dropdowns) {\r\n\r\n    let $filtered_buttons = $()\r\n\r\n    for (let i = 0; i < butons_list.length; i++) {\r\n      const $button = $(butons_list[i])\r\n\r\n      if ($button.is(selector)) {\r\n        $filtered_buttons = $filtered_buttons.add($button)\r\n      }\r\n\r\n      // Search for dropdowns menuitems\r\n      if (search_dropdowns && $button.is('.fr-dropdown')) {\r\n        const $dropdown_menu_items = $button.next().find(selector)\r\n        $filtered_buttons = $filtered_buttons.add($dropdown_menu_items)\r\n      }\r\n    }\r\n\r\n    return $filtered_buttons\r\n  }\r\n\r\n  /*\r\n   * Get all buttons from page based on a specified selector.\r\n   */\r\n  function getButtons(selector, search_dropdowns) {\r\n\r\n    let $buttons = $()\r\n    let id\r\n\r\n    if (!selector) {\r\n\r\n      return $buttons\r\n    }\r\n\r\n    // Search all toolbar buttons.\r\n    $buttons = $buttons.add(_filterButtons(buttons, selector, search_dropdowns))\r\n\r\n    // Search all popups buttons.\r\n    $buttons = $buttons.add(_filterButtons(popup_buttons, selector, search_dropdowns))\r\n\r\n    // Look in popup's content.\r\n    for (id in editor.shared.popups) {\r\n\r\n      if (Object.prototype.hasOwnProperty.call(editor.shared.popups, id)) {\r\n        const $popup = editor.shared.popups[id]\r\n        const $popup_buttons = $popup.children().find(selector)\r\n        $buttons = $buttons.add($popup_buttons)\r\n      }\r\n    }\r\n\r\n    // Look in modal's content.\r\n    for (id in editor.shared.modals) {\r\n\r\n      if (Object.prototype.hasOwnProperty.call(editor.shared.modals, id)) {\r\n        const $modal_hash = editor.shared.modals[id]\r\n        const $modal_buttons = $modal_hash.$modal.find(selector)\r\n        $buttons = $buttons.add($modal_buttons)\r\n      }\r\n    }\r\n\r\n    return $buttons\r\n  }\r\n\r\n  /*\r\n  To get popup position with respect to element\r\n  */\r\n  function getPosition($elm) {\r\n    const left = $elm.offset().left\r\n    const toolbarBottomOffset = 10\r\n    const topOffset = (editor.opts.toolbarBottom ? toolbarBottomOffset : $elm.outerHeight() - toolbarBottomOffset)\r\n    const top = $elm.offset().top + topOffset\r\n    return { left, top }\r\n  }\r\n\r\n  /**\r\n   * Expands the dropdown\r\n   */\r\n  function _expandDropdown($dropdownWrapper, height, maxHeight) {\r\n    // Show scroll only when height of the dropdown is more than max height\r\n    if (height >= maxHeight) {\r\n      $dropdownWrapper.parent().css('overflow', 'auto')\r\n    }\r\n\r\n    // Height of the dropdown is minimum of its content height and dropdown max height\r\n    $dropdownWrapper.css('height', Math.min(height, maxHeight))\r\n  }\r\n\r\n  /**\r\n   * Click was made on a dropdown button.\r\n   */\r\n  function _dropdownButtonClick($btn) {\r\n    const $dropdown = $btn.next()\r\n\r\n    const active = editor.node.hasClass($btn.get(0), 'fr-active')\r\n\r\n    const $active_dropdowns = getButtons('.fr-dropdown.fr-active').not($btn)\r\n\r\n    const inst = $btn.parents('.fr-toolbar, .fr-popup').data('instance') || editor\r\n\r\n    // Hide keyboard. We need the entire space.\r\n    if (inst.helpers.isIOS() && !inst.el.querySelector('.fr-marker')) {\r\n      inst.selection.save()\r\n      inst.selection.clear()\r\n      inst.selection.restore()\r\n    }\r\n\r\n    $dropdown.parents('.fr-more-toolbar').addClass('fr-overflow-visible')\r\n\r\n    let ht = 0\r\n    let dropdownMaxHeight = 0\r\n    let $dropdownWrapper = $dropdown.find('> .fr-dropdown-wrapper')\r\n\r\n    // Dropdown is not active.\r\n    if (!active) {\r\n      // Call refresh on show.\r\n      const cmd = $btn.data('cmd')\r\n      $dropdown.find('.fr-command').removeClass('fr-active').attr('aria-selected', false)\r\n\r\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].refreshOnShow) {\r\n        FE.COMMANDS[cmd].refreshOnShow.apply(inst, [$btn, $dropdown])\r\n      }\r\n\r\n      $dropdown.css('left', $btn.offset().left - $btn.parents('.fr-btn-wrap, .fr-toolbar, .fr-buttons').offset().left - (editor.opts.direction === 'rtl' ? $dropdown.width() - $btn.outerWidth() : 0))\r\n\r\n      // Test height.\r\n      $dropdown.addClass('test-height')\r\n      ht = $dropdown.outerHeight()\r\n      dropdownMaxHeight = editor.helpers.getPX($dropdownWrapper.css('max-height'))\r\n      $dropdown.removeClass('test-height')\r\n\r\n      // Reset top and bottom.\r\n      $dropdown.css('top', '').css('bottom', '')\r\n\r\n      // Just to overlap the button with the dropdown by a bit\r\n      const dropdownOffsetTop = $btn.outerHeight() / 10\r\n\r\n      // Toolbar top or dropdown is exceeding the window.\r\n      if (!editor.opts.toolbarBottom && $dropdown.offset().top + $btn.outerHeight() + ht < $(editor.o_doc).height()) {\r\n        $dropdown.css('top', $btn.position().top + $btn.outerHeight() - dropdownOffsetTop)\r\n      }\r\n      else {\r\n        let moreToolbarHeight = 0\r\n        const $moreToolbar = $btn.parents('.fr-more-toolbar')\r\n        if ($moreToolbar.length > 0) {\r\n          moreToolbarHeight = $moreToolbar.first().height()\r\n        }\r\n        $dropdown.css('bottom', $btn.parents('.fr-popup, .fr-toolbar').first().height() - moreToolbarHeight - $btn.position().top)\r\n      }\r\n    }\r\n\r\n    // Blink and activate.\r\n    $btn.addClass('fr-blink').toggleClass('fr-active')\r\n\r\n    if ($btn.hasClass('fr-options')) {\r\n      const $prevBtn = $btn.prev()\r\n      $prevBtn.toggleClass('fr-expanded')\r\n    }\r\n\r\n    if ($btn.hasClass('fr-active')) {\r\n      $dropdown.attr('aria-hidden', false)\r\n      $btn.attr('aria-expanded', true)\r\n      \r\n      // Expand the dropdown\r\n      _expandDropdown($dropdownWrapper, ht, dropdownMaxHeight)\r\n    }\r\n    else {\r\n      $dropdown.attr('aria-hidden', true).css('overflow', '')\r\n      $btn.attr('aria-expanded', false)\r\n\r\n      // Close active dropdowns\r\n      $dropdownWrapper.css('height', '')\r\n    }\r\n\r\n    setTimeout(() => {\r\n      $btn.removeClass('fr-blink')\r\n    }, 300)\r\n\r\n    // Reset left margin for dropdown.\r\n    $dropdown.css('margin-left', '')\r\n\r\n    // Check if it exceeds window on the right.\r\n    if ($dropdown.offset().left + $dropdown.outerWidth() > editor.$sc.offset().left + editor.$sc.width()) {\r\n      $dropdown.css('margin-left', -($dropdown.offset().left + $dropdown.outerWidth() - editor.$sc.offset().left - editor.$sc.width()))\r\n    }\r\n\r\n    // Check if it exceeds window on the left.\r\n    if ($dropdown.offset().left < editor.$sc.offset().left && editor.opts.direction === 'rtl') {\r\n      $dropdown.css('margin-left', editor.$sc.offset().left)\r\n    }\r\n\r\n    // Hide dropdowns that might be active.\r\n    // Close active dropdowns\r\n    $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n    $active_dropdowns.prev('.fr-expanded').removeClass('fr-expanded')\r\n    $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\r\n\r\n    if ($btn.parents('.fr-popup').length === 0 && !editor.opts.toolbarInline) {\r\n      if (editor.node.hasClass($btn.get(0), 'fr-active')) {\r\n        editor.$tb.css('zIndex', (editor.opts.zIndex || 1) + 4)\r\n      }\r\n      else {\r\n        editor.$tb.css('zIndex', '')\r\n      }\r\n    }\r\n\r\n    // Focus the active element or the dropdown button to enable accessibility.\r\n    const $active_element = $dropdown.find('a.fr-command.fr-active').first()\r\n\r\n    // We do not need to focus on mobile.\r\n    if (!editor.helpers.isMobile()) {\r\n\r\n      if ($active_element.length) {\r\n        editor.accessibility.focusToolbarElement($active_element)\r\n\r\n        // Scroll the selected element to the middle\r\n        $dropdownWrapper.scrollTop(Math.abs($active_element.parents('.fr-dropdown-content').offset().top - $active_element.offset().top) - $active_element.offset().top)\r\n      }\r\n      else {\r\n        editor.accessibility.focusToolbarElement($btn)\r\n        $dropdownWrapper.scrollTop(0)\r\n      }\r\n    }\r\n  }\r\n\r\n  function exec($btn) {\r\n\r\n    // Blink.\r\n    $btn.addClass('fr-blink')\r\n    setTimeout(() => {\r\n      $btn.removeClass('fr-blink')\r\n    }, 500)\r\n\r\n    // Get command, value and additional params.\r\n    const cmd = $btn.data('cmd')\r\n    const params = []\r\n\r\n    while (typeof $btn.data(`param${params.length + 1}`) !== 'undefined') {\r\n      params.push($btn.data(`param${params.length + 1}`))\r\n    }\r\n\r\n    // Hide dropdowns that might be active including the current one.\r\n    const $active_dropdowns = getButtons('.fr-dropdown.fr-active')\r\n\r\n    if ($active_dropdowns.length) {\r\n      $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n      $active_dropdowns.prev('.fr-expanded').removeClass('fr-expanded')\r\n      $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\r\n    }\r\n\r\n    // Call the command.\r\n    $btn.parents('.fr-popup, .fr-toolbar').data('instance').commands.exec(cmd, params)\r\n  }\r\n\r\n  /**\r\n   * Click was made on a command button.\r\n   */\r\n  function _commandButtonClick($btn) {\r\n    exec($btn)\r\n  }\r\n\r\n  function click($btn) {\r\n    // Get current editor instance\r\n    const inst = $btn.parents('.fr-popup, .fr-toolbar').data('instance')\r\n\r\n    // Active popup button only if it is not active\r\n    if ($btn.parents('.fr-popup').length === 0 && $btn.data('popup') && !$btn.hasClass('fr-btn-active-popup')) {\r\n      $btn.addClass('fr-btn-active-popup')\r\n    }\r\n\r\n    if ($btn.parents('.fr-popup').length === 0 && !$btn.data('popup')) {\r\n      inst.popups.hideAll()\r\n    }\r\n\r\n    // Popups are visible, but not in the current instance.\r\n    if (inst.popups.areVisible() && !inst.popups.areVisible(inst)) {\r\n\r\n      // Hide markers in other instances.\r\n      for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n        if (FE.INSTANCES[i] !== inst && FE.INSTANCES[i].popups && FE.INSTANCES[i].popups.areVisible()) {\r\n          FE.INSTANCES[i].$el.find('.fr-marker').remove()\r\n        }\r\n      }\r\n\r\n      inst.popups.hideAll()\r\n    }\r\n\r\n    // Dropdown button.\r\n    if (editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\r\n      _dropdownButtonClick($btn)\r\n    }\r\n\r\n    // Regular button.\r\n    else {\r\n      _commandButtonClick($btn)\r\n\r\n      if (FE.COMMANDS[$btn.data('cmd')] && FE.COMMANDS[$btn.data('cmd')].refreshAfterCallback !== false) {\r\n        inst.button.bulkRefresh()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _click(e) {\r\n    const $btn = $(e.currentTarget)\r\n\r\n    click($btn)\r\n  }\r\n\r\n  function hideActiveDropdowns($el) {\r\n    const $active_dropdowns = $el.find('.fr-dropdown.fr-active')\r\n\r\n    if ($active_dropdowns.length) {\r\n      $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n\r\n      $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\r\n      $active_dropdowns.prev().removeClass('fr-expanded')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Click in the dropdown menu.\r\n   */\r\n  function _dropdownMenuClick(e) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n  }\r\n\r\n  /**\r\n   * Click on the dropdown wrapper.\r\n   */\r\n  function _dropdownWrapperClick(e) {\r\n    e.stopPropagation()\r\n\r\n    // Prevent blurring.\r\n    if (!editor.helpers.isMobile()) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Bind callbacks for commands.\r\n   */\r\n  function bindCommands($el, tooltipAbove) {\r\n    editor.events.bindClick($el, '.fr-command:not(.fr-disabled)', _click)\r\n\r\n    // Click on the dropdown menu.\r\n    editor.events.$on($el, `${editor._mousedown} ${editor._mouseup} ${editor._move}`, '.fr-dropdown-menu', _dropdownMenuClick, true)\r\n\r\n    // Click on the dropdown wrapper.\r\n    editor.events.$on($el, `${editor._mousedown} ${editor._mouseup} ${editor._move}`, '.fr-dropdown-menu .fr-dropdown-wrapper', _dropdownWrapperClick, true)\r\n\r\n    // Hide dropdowns that might be active.\r\n    const _document = $el.get(0).ownerDocument\r\n    const _window = 'defaultView' in _document ? _document.defaultView : _document.parentWindow\r\n\r\n    function hideDropdowns(e) {\r\n      if (!e || e.type === editor._mouseup && e.target !== $('html').get(0) || e.type === 'keydown' && (editor.keys.isCharacter(e.which) && !editor.keys.ctrlKey(e) || e.which === FE.KEYCODE.ESC)) {\r\n        hideActiveDropdowns($el)\r\n      }\r\n    }\r\n    editor.events.$on($(_window), `${editor._mouseup} resize keydown`, hideDropdowns, true)\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.events.$on(editor.$win, editor._mouseup, hideDropdowns, true)\r\n    }\r\n\r\n    // Add refresh.\r\n    if (editor.node.hasClass($el.get(0), 'fr-popup')) {\r\n      $.merge(popup_buttons, $el.find('.fr-btn').toArray())\r\n    }\r\n    else {\r\n      $.merge(buttons, $el.find('.fr-btn').toArray())\r\n    }\r\n\r\n    // Assing tooltips to buttons.\r\n    editor.tooltip.bind($el, '.fr-btn, .fr-title', tooltipAbove)\r\n  }\r\n\r\n  /**\r\n   * Create the content for dropdown.\r\n   */\r\n  function _content(command, info) {\r\n    let c = ''\r\n\r\n    if (info.html) {\r\n      if (typeof info.html === 'function') {\r\n        c += info.html.call(editor)\r\n      }\r\n      else {\r\n        c += info.html\r\n      }\r\n    }\r\n    else {\r\n      let options = info.options\r\n\r\n      if (typeof options === 'function') {\r\n        options = options()\r\n      }\r\n\r\n      c += '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n\r\n      for (const val in options) {\r\n        if (Object.prototype.hasOwnProperty.call(options, val)) {\r\n          let shortcut = editor.shortcuts.get(`${command}.${val}`)\r\n\r\n          if (shortcut) {\r\n            shortcut = `<span class=\"fr-shortcut\">${shortcut}</span>`\r\n          }\r\n          else {\r\n            shortcut = ''\r\n          }\r\n\r\n          c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"${(info.type === 'options' ? command.replace(/Options/g, '') : command)}\" data-param1=\"${val}\" title=\"${options[val]}\">${editor.language.translate(options[val])}</a></li>`\r\n        }\r\n      }\r\n      c += '</ul>'\r\n    }\r\n\r\n    return c\r\n  }\r\n\r\n  /**\r\n   * Create button.\r\n   */\r\n  function build(command, info = {}, visible) {\r\n    if (editor.helpers.isMobile() && info.showOnMobile === false) {\r\n      return ''\r\n    }\r\n\r\n    let display_selection = info.displaySelection\r\n\r\n    if (typeof display_selection === 'function') {\r\n      display_selection = display_selection(editor)\r\n    }\r\n\r\n    let icon = ''\r\n\r\n    if (info.type !== 'options') {\r\n      if (display_selection) {\r\n        const default_selection = typeof info.defaultSelection === 'function' ? info.defaultSelection(editor) : info.defaultSelection\r\n        icon = `<span style=\"width:${info.displaySelectionWidth || 100}px\">${editor.language.translate(default_selection || info.title)}</span>`\r\n      }\r\n      else {\r\n        icon = editor.icon.create(info.icon || command)\r\n\r\n        // Used instead of aria-label. The advantage is that it also display text when the css is disabled.\r\n        icon += `<span class=\"fr-sr-only\">${editor.language.translate(info.title) || ''}</span>`\r\n      }\r\n    }\r\n\r\n    const popup = info.popup ? ' data-popup=\"true\"' : ''\r\n\r\n    const modal = info.modal ? ' data-modal=\"true\"' : ''\r\n\r\n    let shortcut = editor.shortcuts.get(`${command}.`)\r\n\r\n    if (shortcut) {\r\n      shortcut = ` (${shortcut})`\r\n    }\r\n    else {\r\n      shortcut = ''\r\n    }\r\n\r\n    // Add custom id if present\r\n    const button_id = `${command}-${editor.id}`\r\n\r\n    const dropdown_id = `dropdown-menu-${button_id}`\r\n\r\n    let btn = `<button id=\"${button_id}\"${info.more_btn ? ` data-group-name=\"${button_id}\" `: ''}type=\"button\" tabIndex=\"-1\" role=\"button\"${info.toggle ? ' aria-pressed=\"false\"' : ''}${info.type === 'dropdown' || info.type === 'options' ? ` aria-controls=\"${dropdown_id}\" aria-expanded=\"false\" aria-haspopup=\"true\"` : ''}${info.disabled ? ' aria-disabled=\"true\"' : ''} title=\"${editor.language.translate(info.title) || ''}${shortcut}\" class=\"fr-command fr-btn${info.type === 'dropdown' || info.type == 'options' ? ' fr-dropdown' : ''}${(info.type == 'options' ? ' fr-options' : '')}${(info.type == 'more' ? ' fr-more' : '')}${info.displaySelection ? ' fr-selection' : ''}${info.back ? ' fr-back' : ''}${info.disabled ? ' fr-disabled' : ''}${!visible ? ' fr-hidden' : ''}\" data-cmd=\"${command}\"${popup}${modal}>${icon}</button>`\r\n\r\n    if (info.type === 'dropdown' || info.type === 'options') {\r\n\r\n      // Build dropdown.\r\n      let dropdown = `<div id=\"${dropdown_id}\" class=\"fr-dropdown-menu\" role=\"listbox\" aria-labelledby=\"${button_id}\" aria-hidden=\"true\"><div class=\"fr-dropdown-wrapper\" role=\"presentation\"><div class=\"fr-dropdown-content\" role=\"presentation\">`\r\n\r\n      dropdown += _content(command, info)\r\n\r\n      dropdown += '</div></div></div>'\r\n\r\n      btn += dropdown\r\n    }\r\n\r\n    if (info.hasOptions && info.hasOptions.apply(editor)) {\r\n      btn = `<div class=\"fr-btn-wrap\">${btn} ${build(command + 'Options', Object.assign({}, info, { type: 'options', hasOptions: false }), visible)}  </div>`\r\n    }\r\n\r\n    return btn\r\n  }\r\n\r\n  function buildList(buttons, visible_buttons) {\r\n    let str = ''\r\n\r\n    for (let i = 0; i < buttons.length; i++) {\r\n      const cmd_name = buttons[i]\r\n      const cmd_info = FE.COMMANDS[cmd_name]\r\n\r\n      if (cmd_info && typeof cmd_info.plugin !== 'undefined' && editor.opts.pluginsEnabled.indexOf(cmd_info.plugin) < 0) {\r\n        continue\r\n      }\r\n\r\n      if (cmd_info) {\r\n        const visible = typeof visible_buttons !== 'undefined' ? visible_buttons.indexOf(cmd_name) >= 0 : true\r\n        str += build(cmd_name, cmd_info, visible)\r\n      }\r\n      else if (cmd_name === '|') {\r\n        str += '<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>'\r\n      }\r\n      else if (cmd_name === '-') {\r\n        str += '<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>'\r\n      }\r\n    }\r\n\r\n    return str\r\n  }\r\n\r\n  /**\r\n   * Build button groups html\r\n   */\r\n  function buildGroup(buttonGroups){\r\n\r\n    // Toolbar Groups HTML\r\n    let mainToolbarGroupsHTML = ''\r\n    let moreToolbarGroupsHTML = ''\r\n\r\n    for (const groupName in buttonGroups) {\r\n\r\n      let buttonGroup = buttonGroups[groupName]\r\n\r\n      // Ignore non-button groups\r\n      if (!buttonGroup.buttons) {\r\n        continue\r\n      }\r\n\r\n      // Current button group Details\r\n      let mainToolbarButtonsHTML = ''\r\n      let moreToolbarButtonsHTML = ''\r\n      let buttonCount = 0\r\n      let alignment = 'left'\r\n      let visibleButtons = FE.TOOLBAR_VISIBLE_BUTTONS\r\n\r\n      for(let i = 0; i < buttonGroup.buttons.length; i++) {\r\n\r\n        // Get command name\r\n        const cmdName = buttonGroup.buttons[i]\r\n\r\n        // Get command details\r\n        const cmdInfo = FE.COMMANDS[cmdName]\r\n\r\n        if (!cmdInfo) {\r\n          if (cmdName == '|') {\r\n            mainToolbarButtonsHTML += '<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>'\r\n          }\r\n          else if (cmdName == '-') {\r\n            mainToolbarButtonsHTML += '<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>'\r\n          }\r\n        }\r\n\r\n        if (!cmdInfo || (cmdInfo && typeof cmdInfo.plugin !== 'undefined' && editor.opts.pluginsEnabled.indexOf(cmdInfo.plugin) < 0)) {\r\n          continue\r\n        }\r\n\r\n        // If alignment of group is provided then use it\r\n        if (buttonGroups[groupName].align !== undefined) {\r\n          alignment = buttonGroups[groupName].align\r\n        }\r\n\r\n        // If buttonsVisible is provided then use it\r\n        if (buttonGroups[groupName].buttonsVisible !== undefined) {\r\n          visibleButtons = buttonGroups[groupName].buttonsVisible\r\n        }\r\n\r\n        // Build button groups from command details\r\n        if (buttonGroups.showMoreButtons && buttonCount >= visibleButtons) {\r\n          moreToolbarButtonsHTML += build(cmdName, cmdInfo, true)\r\n        }\r\n        else {\r\n          mainToolbarButtonsHTML += build(cmdName, cmdInfo, true)\r\n        }\r\n\r\n        buttonCount++\r\n      }\r\n\r\n      // If atleast one hidden group exists then add its corresponding more button\r\n      if (buttonGroups.showMoreButtons && buttonCount > visibleButtons) {\r\n        const cmdName = groupName\r\n        const cmdInfo = FE.COMMANDS[cmdName]\r\n        cmdInfo.more_btn = true\r\n        mainToolbarButtonsHTML += build(cmdName, cmdInfo, true)\r\n      }\r\n\r\n      // Add toolbar buttons html to the groups html\r\n      mainToolbarGroupsHTML += `<div class=\"fr-btn-grp fr-float-${alignment}\">${mainToolbarButtonsHTML}</div>`\r\n      if (buttonGroups.showMoreButtons && moreToolbarButtonsHTML.length > 0) {\r\n        moreToolbarGroupsHTML += `<div class=\"fr-more-toolbar\" data-name=\"${groupName + '-' + editor.id}\">${moreToolbarButtonsHTML}</div>`\r\n      }\r\n\r\n    }\r\n\r\n    // Return toolbar button groups html\r\n    if (editor.opts.toolbarBottom) {\r\n      return `${moreToolbarGroupsHTML}<div class=\"fr-newline\"></div>${mainToolbarGroupsHTML}`\r\n    }\r\n    return `${mainToolbarGroupsHTML}<div class=\"fr-newline\"></div>${moreToolbarGroupsHTML}`\r\n  }\r\n\r\n  function refresh($btn) {\r\n    const inst = $btn.parents('.fr-popup, .fr-toolbar').data('instance') || editor\r\n\r\n    const cmd = $btn.data('cmd')\r\n\r\n    let $dropdown\r\n\r\n    if (!editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\r\n      $btn.removeClass('fr-active')\r\n\r\n      if ($btn.attr('aria-pressed')) {\r\n        $btn.attr('aria-pressed', false)\r\n      }\r\n    }\r\n    else {\r\n      $dropdown = $btn.next()\r\n    }\r\n\r\n    if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].refresh) {\r\n      FE.COMMANDS[cmd].refresh.apply(inst, [$btn, $dropdown])\r\n    }\r\n    else if (editor.refresh[cmd]) {\r\n      inst.refresh[cmd]($btn, $dropdown)\r\n    }\r\n    \r\n  }\r\n\r\n  function _bulkRefresh(btns) {\r\n    const inst = editor.$tb ? editor.$tb.data('instance') || editor : editor\r\n\r\n    // Check the refresh event.\r\n    if (editor.events.trigger('buttons.refresh') === false) {\r\n      return true\r\n    }\r\n\r\n    setTimeout(() => {\r\n      const focused = inst.selection.inEditor() && inst.core.hasFocus()\r\n\r\n      for (let i = 0; i < btns.length; i++) {\r\n        const $btn = $(btns[i])\r\n        const cmd = $btn.data('cmd')\r\n\r\n        if ($btn.parents('.fr-popup').length === 0) {\r\n          if (focused || FE.COMMANDS[cmd] && FE.COMMANDS[cmd].forcedRefresh) {\r\n            inst.button.refresh($btn)\r\n          }\r\n          else if (!editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\r\n            $btn.removeClass('fr-active')\r\n\r\n            if ($btn.attr('aria-pressed')) {\r\n              $btn.attr('aria-pressed', false)\r\n            }\r\n          }\r\n        }\r\n        else if ($btn.parents('.fr-popup').isVisible()) {\r\n          inst.button.refresh($btn)\r\n        }\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  /**\r\n   * Do buttons refresh.\r\n   */\r\n  function bulkRefresh() {\r\n    _bulkRefresh(buttons)\r\n    _bulkRefresh(popup_buttons)\r\n  }\r\n\r\n  function _destroy() {\r\n    buttons = []\r\n    popup_buttons = []\r\n  }\r\n\r\n  let refresh_timeout = null\r\n\r\n  function delayedBulkRefresh() {\r\n    clearTimeout(refresh_timeout)\r\n    refresh_timeout = setTimeout(bulkRefresh, 50)\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Assign refresh and do refresh.\r\n    if (editor.opts.toolbarInline) {\r\n      editor.events.on('toolbar.show', bulkRefresh)\r\n    }\r\n    else {\r\n      editor.events.on('mouseup', delayedBulkRefresh)\r\n      editor.events.on('keyup', delayedBulkRefresh)\r\n      editor.events.on('blur', delayedBulkRefresh)\r\n      editor.events.on('focus', delayedBulkRefresh)\r\n      editor.events.on('contentChanged', delayedBulkRefresh)\r\n\r\n      if (editor.helpers.isMobile()) {\r\n        editor.events.$on(editor.$doc, 'selectionchange', bulkRefresh)\r\n      }\r\n    }\r\n\r\n    editor.events.on('shared.destroy', _destroy)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    build,\r\n    buildList,\r\n    buildGroup,\r\n    bindCommands,\r\n    refresh,\r\n    bulkRefresh,\r\n    exec,\r\n    click,\r\n    hideActiveDropdowns,\r\n    addButtons,\r\n    getButtons,\r\n    getPosition\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.ICON_TEMPLATES = {\r\n  font_awesome: '<i class=\"fa fa-[NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5: '<i class=\"fas fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5r: '<i class=\"far fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5l: '<i class=\"fal fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5b: '<i class=\"fab fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  text: '<span style=\"text-align: center;\">[NAME]</span>',\r\n  image: '<img src=[SRC] alt=[ALT] />',\r\n  svg: '<svg class=\"fr-svg\" focusable=\"false\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"[PATH]\"/></svg>',\r\n  empty: ' '\r\n}\r\n\r\nFE.ICONS = {\r\n  bold: {\r\n    NAME: 'bold',\r\n    SVG_KEY: 'bold'\r\n  },\r\n  italic: {\r\n    NAME: 'italic',\r\n    SVG_KEY: 'italic'\r\n  },\r\n  underline: {\r\n    NAME: 'underline',\r\n    SVG_KEY: 'underline'\r\n  },\r\n  strikeThrough: {\r\n    NAME: 'strikethrough',\r\n    SVG_KEY: 'strikeThrough'\r\n  },\r\n  subscript: {\r\n    NAME: 'subscript',\r\n    SVG_KEY: 'subscript'\r\n  },\r\n  superscript: {\r\n    NAME: 'superscript',\r\n    SVG_KEY: 'superscript'\r\n  },\r\n  cancel: {\r\n    NAME: 'cancel',\r\n    SVG_KEY: 'cancel'\r\n  },\r\n  color: {\r\n    NAME: 'tint',\r\n    SVG_KEY: 'textColor'\r\n  },\r\n  outdent: {\r\n    NAME: 'outdent',\r\n    SVG_KEY: 'outdent'\r\n  },\r\n  indent: {\r\n    NAME: 'indent',\r\n    SVG_KEY: 'indent'\r\n  },\r\n  undo: {\r\n    NAME: 'rotate-left',\r\n    FA5NAME: 'undo',\r\n    SVG_KEY: 'undo'\r\n  },\r\n  redo: {\r\n    NAME: 'rotate-right',\r\n    FA5NAME: 'redo',\r\n    SVG_KEY: 'redo'\r\n  },\r\n  \r\n  insert: {\r\n    NAME: 'insert',\r\n    SVG_KEY: 'insert'\r\n  },\r\n  insertAll: {\r\n    NAME: 'insertAll',\r\n    SVG_KEY: 'insertAll'\r\n  },\r\n  insertHR: {\r\n    NAME: 'minus',\r\n    SVG_KEY: 'horizontalLine'\r\n  },\r\n  clearFormatting: {\r\n    NAME: 'eraser',\r\n    SVG_KEY: 'clearFormatting'\r\n  },\r\n  selectAll: {\r\n    NAME: 'mouse-pointer',\r\n    SVG_KEY: 'selectAll'\r\n  },\r\n  minimize: {\r\n    NAME: 'minimize',\r\n    SVG_KEY: 'minimize'\r\n  },\r\n  moreText: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'textMore'\r\n  },\r\n  moreParagraph: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'paragraphMore'\r\n  },\r\n  moreRich: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'insertMore'\r\n  },\r\n  moreMisc: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'more'\r\n  }\r\n}\r\n\r\nFE.DefineIconTemplate = function (name, options) {\r\n  FE.ICON_TEMPLATES[name] = options\r\n}\r\n\r\nFE.DefineIcon = function (name, options) {\r\n  FE.ICONS[name] = options\r\n}\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  iconsTemplate: 'svg'\r\n})\r\n\r\nFE.MODULES.icon = function (editor) {\r\n  function create(command) {\r\n    let icon = null\r\n    const info = FE.ICONS[command]\r\n\r\n    if (typeof info !== 'undefined') {\r\n      let template = info.template || FE.ICON_DEFAULT_TEMPLATE || editor.opts.iconsTemplate\r\n\r\n      if (template && template.apply) {\r\n        template = template.apply(editor);\r\n      }\r\n\r\n      if (!info.FA5NAME) {\r\n        info.FA5NAME = info.NAME\r\n      }\r\n\r\n      if (template === 'svg'  && !info.PATH) {\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1812\r\n        // if user doesn't specify `SVG_KEY`, pass it as string\r\n        info.PATH = FE.SVG[info.SVG_KEY] || ''\r\n      }\r\n\r\n      if (template && (template = FE.ICON_TEMPLATES[template])) {\r\n        icon = template.replace(/\\[([a-zA-Z0-9]*)\\]/g, (str, a1) => {\r\n\r\n          if (a1 === 'NAME') {\r\n            return info[a1] || command\r\n          }\r\n\r\n          return info[a1]\r\n        })\r\n      }\r\n    }\r\n\r\n    return icon || command\r\n  }\r\n\r\n  function getTemplate(command) {\r\n    const info = FE.ICONS[command]\r\n    let template = editor.opts.iconsTemplate\r\n\r\n    if (typeof info !== 'undefined') {\r\n      template = info.template || FE.ICON_DEFAULT_TEMPLATE || editor.opts.iconsTemplate\r\n\r\n      return template\r\n    }\r\n\r\n    return template\r\n  }\r\n\r\n  function getFileIcon(command) {\r\n    const info = FE.FILEICONS[command]\r\n    if (typeof info !== 'undefined') {\r\n      return info\r\n    }\r\n    return command\r\n  }\r\n  return {\r\n    create,\r\n    getTemplate,\r\n    getFileIcon\r\n  }\r\n}\r\n\r\nFE.SVG = {\r\n  add: 'M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z',\r\n\r\n  advancedImageEditor: 'M3,17v2h6v-2H3z M3,5v2h10V5H3z M13,21v-2h8v-2h-8v-2h-2v6H13z M7,9v2H3v2h4v2h2V9H7z M21,13v-2H11v2H21z M15,9h2V7h4V5h-4  V3h-2V9z',\r\n\r\n  alignCenter: 'M9,18h6v-2H9V18z M6,11v2h12v-2H6z M3,6v2h18V6H3z',\r\n\r\n  alignJustify: 'M3,18h18v-2H3V18z M3,11v2h18v-2H3z M3,6v2h18V6H3z',\r\n\r\n  alignLeft: 'M3,18h6v-2H3V18z M3,11v2h12v-2H3z M3,6v2h18V6H3z',\r\n\r\n  alignRight: 'M15,18h6v-2h-6V18z M9,11v2h12v-2H9z M3,6v2h18V6H3z',\r\n\r\n  anchors: 'M16,4h-4H8C6.9,4,6,4.9,6,6v4v10l6-2.6l6,2.6V10V6C18,4.9,17.1,4,16,4z M16,17l-4-1.8L8,17v-7V6h4h4v4V17z',\r\n\r\n  autoplay: 'M 7.570312 0.292969 C 7.542969 0.292969 7.515625 0.292969 7.488281 0.296875 C 7.203125 0.324219 6.984375 0.539062 6.980469 0.792969 L 6.925781 3.535156 C 2.796875 3.808594 -0.0078125 6.425781 -0.0859375 10.09375 C -0.121094 11.96875 0.710938 13.6875 2.265625 14.921875 C 3.769531 16.117188 5.839844 16.796875 8.097656 16.828125 C 8.140625 16.828125 12.835938 16.898438 13.035156 16.886719 C 15.171875 16.796875 17.136719 16.128906 18.558594 15.003906 C 20.066406 13.816406 20.882812 12.226562 20.917969 10.40625 C 20.960938 8.410156 20.023438 6.605469 18.289062 5.335938 C 18.214844 5.277344 18.128906 5.230469 18.035156 5.203125 C 17.636719 5.074219 17.222656 5.199219 17 5.476562 L 15.546875 7.308594 C 15.304688 7.609375 15.363281 8.007812 15.664062 8.265625 C 16.351562 8.851562 16.707031 9.625 16.6875 10.5 C 16.652344 12.25 15.070312 13.390625 12.757812 13.535156 C 12.59375 13.539062 8.527344 13.472656 8.164062 13.464844 C 5.703125 13.429688 4.101562 12.191406 4.140625 10.3125 C 4.175781 8.570312 5.132812 7.46875 6.847656 7.199219 L 6.796875 9.738281 C 6.792969 9.992188 7 10.214844 7.285156 10.253906 C 7.3125 10.257812 7.339844 10.257812 7.367188 10.257812 C 7.503906 10.261719 7.632812 10.222656 7.738281 10.148438 L 14.039062 5.785156 C 14.171875 5.691406 14.253906 5.558594 14.253906 5.410156 C 14.257812 5.261719 14.1875 5.125 14.058594 5.027344 L 7.941406 0.414062 C 7.835938 0.335938 7.707031 0.292969 7.570312 0.292969 ',\r\n\r\n  back: 'M20 11L7.83 11 11.425 7.405 10.01 5.991 5.416 10.586 5.414 10.584 4 11.998 4.002 12 4 12.002 5.414 13.416 5.416 13.414 10.01 18.009 11.425 16.595 7.83 13 20 13 20 13 20 11 20 11Z',\r\n\r\n  backgroundColor: 'M9.91752,12.24082l7.74791-5.39017,1.17942,1.29591-6.094,7.20747L9.91752,12.24082M7.58741,12.652l4.53533,4.98327a.93412.93412,0,0,0,1.39531-.0909L20.96943,8.7314A.90827.90827,0,0,0,20.99075,7.533l-2.513-2.76116a.90827.90827,0,0,0-1.19509-.09132L7.809,11.27135A.93412.93412,0,0,0,7.58741,12.652ZM2.7939,18.52772,8.41126,19.5l1.47913-1.34617-3.02889-3.328Z',\r\n\r\n  blockquote: 'M10.31788,5l.93817,1.3226A12.88271,12.88271,0,0,0,8.1653,9.40125a5.54242,5.54242,0,0,0-.998,3.07866v.33733q.36089-.04773.66067-.084a4.75723,4.75723,0,0,1,.56519-.03691,2.87044,2.87044,0,0,1,2.11693.8427,2.8416,2.8416,0,0,1,.8427,2.09274,3.37183,3.37183,0,0,1-.8898,2.453A3.143,3.143,0,0,1,8.10547,19,3.40532,3.40532,0,0,1,5.375,17.7245,4.91156,4.91156,0,0,1,4.30442,14.453,9.3672,9.3672,0,0,1,5.82051,9.32933,14.75716,14.75716,0,0,1,10.31788,5Zm8.39243,0,.9369,1.3226a12.88289,12.88289,0,0,0-3.09075,3.07865,5.54241,5.54241,0,0,0-.998,3.07866v.33733q.33606-.04773.63775-.084a4.91773,4.91773,0,0,1,.58938-.03691,2.8043,2.8043,0,0,1,2.1042.83,2.89952,2.89952,0,0,1,.80578,2.10547,3.42336,3.42336,0,0,1-.86561,2.453A3.06291,3.06291,0,0,1,16.49664,19,3.47924,3.47924,0,0,1,13.742,17.7245,4.846,4.846,0,0,1,12.64721,14.453,9.25867,9.25867,0,0,1,14.17476,9.3898,15.26076,15.26076,0,0,1,18.71031,5Z',\r\n\r\n  bold: 'M15.25,11.8h0A3.68,3.68,0,0,0,17,9a3.93,3.93,0,0,0-3.86-4H6.65V19h7a3.74,3.74,0,0,0,3.7-3.78V15.1A3.64,3.64,0,0,0,15.25,11.8ZM8.65,7h4.2a2.09,2.09,0,0,1,2,1.3,2.09,2.09,0,0,1-1.37,2.61,2.23,2.23,0,0,1-.63.09H8.65Zm4.6,10H8.65V13h4.6a2.09,2.09,0,0,1,2,1.3,2.09,2.09,0,0,1-1.37,2.61A2.23,2.23,0,0,1,13.25,17Z',\r\n\r\n  cancel: 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z',\r\n\r\n  cellBackground: 'M16.6,12.4L7.6,3.5L6.2,4.9l2.4,2.4l-5.2,5.2c-0.6,0.6-0.6,1.5,0,2.1l5.5,5.5c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4  l5.5-5.5C17.2,14,17.2,13,16.6,12.4z M5.2,13.5L10,8.7l4.8,4.8H5.2z M19,15c0,0-2,2.2-2,3.5c0,1.1,0.9,2,2,2s2-0.9,2-2  C21,17.2,19,15,19,15z',\r\n\r\n  cellBorderColor: 'M22,22H2v2h20V22z',\r\n\r\n  cellOptions: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M9.5,6.5h5V9h-5V6.5z M8,17.5H4  c-0.3,0-0.5-0.2-0.5-0.4c0,0,0,0,0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M8,9H3.5V7c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0,0H8V9z   M14.5,17.5h-5V15h5V17.5z M20.5,17c0,0.3-0.2,0.5-0.4,0.5c0,0,0,0,0,0H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9H16V6.5h4  c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0V9z',\r\n\r\n  cellStyle: 'M20,19.9l0.9,3.6l-3.2-1.9l-3.3,1.9l0.8-3.6L12.3,17h3.8l1.7-3.5l1.4,3.5H23L20,19.9z M20,5H4C2.9,5,2,5.9,2,7v10  c0,1.1,0.9,2,2,2h7.5l-0.6-0.6L10,17.5H9.5V15h5.4l1.1-2.3v-2.2h4.5v3H20l0.6,1.5H22V7C22,5.9,21.1,5,20,5z M3.5,7  c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0.1,0h4V9H3.5V7z M3.5,10.5H8v3H3.5V10.5z M4,17.5c-0.3,0-0.5-0.2-0.5-0.4c0,0,0,0,0-0.1v-2H8v2.5H4  z M14.5,9h-5V6.5h5V9z M20.5,9H16V6.5h4c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0.1V9z',\r\n\r\n  clearFormatting: 'M11.48,10.09l-1.2-1.21L8.8,7.41,6.43,5,5.37,6.1,8.25,9,4.66,19h2l1.43-4h5.14l1.43,4h2l-.89-2.51L18.27,19l1.07-1.06L14.59,13.2ZM8.8,13l.92-2.56L12.27,13Zm.56-7.15L9.66,5h2l1.75,4.9Z',\r\n\r\n  close: 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z',\r\n\r\n  codeView: 'M9.4,16.6,4.8,12,9.4,7.4,8,6,2,12l6,6Zm5.2,0L19.2,12,14.6,7.4,16,6l6,6-6,6Z',\r\n\r\n  cogs: 'M18.877 12.907a6.459 6.459 0 0 0 0 -1.814l1.952 -1.526a0.468 0.468 0 0 0 0.111 -0.593l-1.851 -3.2a0.461 0.461 0 0 0 -0.407 -0.231 0.421 0.421 0 0 0 -0.157 0.028l-2.3 0.925a6.755 6.755 0 0 0 -1.563 -0.907l-0.352 -2.452a0.451 0.451 0 0 0 -0.453 -0.388h-3.7a0.451 0.451 0 0 0 -0.454 0.388L9.347 5.588A7.077 7.077 0 0 0 7.783 6.5l-2.3 -0.925a0.508 0.508 0 0 0 -0.166 -0.028 0.457 0.457 0 0 0 -0.4 0.231l-1.851 3.2a0.457 0.457 0 0 0 0.111 0.593l1.952 1.526A7.348 7.348 0 0 0 5.063 12a7.348 7.348 0 0 0 0.064 0.907L3.175 14.433a0.468 0.468 0 0 0 -0.111 0.593l1.851 3.2a0.461 0.461 0 0 0 0.407 0.231 0.421 0.421 0 0 0 0.157 -0.028l2.3 -0.925a6.74 6.74 0 0 0 1.564 0.907L9.7 20.864a0.451 0.451 0 0 0 0.454 0.388h3.7a0.451 0.451 0 0 0 0.453 -0.388l0.352 -2.452a7.093 7.093 0 0 0 1.563 -0.907l2.3 0.925a0.513 0.513 0 0 0 0.167 0.028 0.457 0.457 0 0 0 0.4 -0.231l1.851 -3.2a0.468 0.468 0 0 0 -0.111 -0.593Zm-0.09 2.029l-0.854 1.476 -2.117 -0.852 -0.673 0.508a5.426 5.426 0 0 1 -1.164 0.679l-0.795 0.323 -0.33 2.269h-1.7l-0.32 -2.269 -0.793 -0.322a5.3 5.3 0 0 1 -1.147 -0.662L8.2 15.56l-2.133 0.86 -0.854 -1.475 1.806 -1.411 -0.1 -0.847c-0.028 -0.292 -0.046 -0.5 -0.046 -0.687s0.018 -0.4 0.045 -0.672l0.106 -0.854L5.217 9.064l0.854 -1.475 2.117 0.851 0.673 -0.508a5.426 5.426 0 0 1 1.164 -0.679l0.8 -0.323 0.331 -2.269h1.7l0.321 2.269 0.792 0.322a5.3 5.3 0 0 1 1.148 0.661l0.684 0.526 2.133 -0.859 0.853 1.473 -1.8 1.421 0.1 0.847a5 5 0 0 1 0.046 0.679c0 0.193 -0.018 0.4 -0.045 0.672l-0.106 0.853ZM12 14.544A2.544 2.544 0 1 1 14.546 12 2.552 2.552 0 0 1 12 14.544Z',\r\n\r\n  columns: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.4  c0,0,0,0,0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M8,9H3.5V7c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0,0H8V9z M20.5,17  c0,0.3-0.2,0.5-0.4,0.5c0,0,0,0,0,0H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9H16V6.5h4c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0  V9z',\r\n\r\n  edit: 'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z',\r\n\r\n  exitFullscreen: 'M5,16H8v3h2V14H5ZM8,8H5v2h5V5H8Zm6,11h2V16h3V14H14ZM16,8V5H14v5h5V8Z',\r\n\r\n  fileInsert: 'M 8.09375 12.75 L 5.90625 12.75 C 5.542969 12.75 5.25 12.394531 5.25 11.953125 L 5.25 6.375 L 2.851562 6.375 C 2.367188 6.375 2.121094 5.660156 2.464844 5.242188 L 6.625 0.1875 C 6.832031 -0.0585938 7.167969 -0.0585938 7.371094 0.1875 L 11.535156 5.242188 C 11.878906 5.660156 11.632812 6.375 11.148438 6.375 L 8.75 6.375 L 8.75 11.953125 C 8.75 12.394531 8.457031 12.75 8.09375 12.75 Z M 14 12.484375 L 14 16.203125 C 14 16.644531 13.707031 17 13.34375 17 L 0.65625 17 C 0.292969 17 0 16.644531 0 16.203125 L 0 12.484375 C 0 12.042969 0.292969 11.6875 0.65625 11.6875 L 4.375 11.6875 L 4.375 11.953125 C 4.375 12.980469 5.0625 13.8125 5.90625 13.8125 L 8.09375 13.8125 C 8.9375 13.8125 9.625 12.980469 9.625 11.953125 L 9.625 11.6875 L 13.34375 11.6875 C 13.707031 11.6875 14 12.042969 14 12.484375 Z M 10.609375 15.40625 C 10.609375 15.039062 10.363281 14.742188 10.0625 14.742188 C 9.761719 14.742188 9.515625 15.039062 9.515625 15.40625 C 9.515625 15.773438 9.761719 16.070312 10.0625 16.070312 C 10.363281 16.070312 10.609375 15.773438 10.609375 15.40625 Z M 12.359375 15.40625 C 12.359375 15.039062 12.113281 14.742188 11.8125 14.742188 C 11.511719 14.742188 11.265625 15.039062 11.265625 15.40625 C 11.265625 15.773438 11.511719 16.070312 11.8125 16.070312 C 12.113281 16.070312 12.359375 15.773438 12.359375 15.40625 Z M 12.359375 15.40625 ',\r\n\r\n  fileManager: 'M 0 5.625 L 20.996094 5.625 L 21 15.75 C 21 16.371094 20.410156 16.875 19.6875 16.875 L 1.3125 16.875 C 0.585938 16.875 0 16.371094 0 15.75 Z M 0 5.625 M 21 4.5 L 0 4.5 L 0 2.25 C 0 1.628906 0.585938 1.125 1.3125 1.125 L 6.921875 1.125 C 7.480469 1.125 8.015625 1.316406 8.40625 1.652344 L 9.800781 2.847656 C 10.195312 3.183594 10.730469 3.375 11.289062 3.375 L 19.6875 3.375 C 20.414062 3.375 21 3.878906 21 4.5 Z M 21 4.5',\r\n\r\n  fontAwesome: 'M18.99018,13.98212V7.52679c-.08038-1.21875-1.33929-.683-1.33929-.683-2.933,1.39282-4.36274.61938-5.85938.15625a6.23272,6.23272,0,0,0-2.79376-.20062l-.00946.004A1.98777,1.98777,0,0,0,7.62189,5.106a.984.984,0,0,0-.17517-.05432c-.02447-.0055-.04882-.01032-.0736-.0149A.9565.9565,0,0,0,7.1908,5H6.82539a.9565.9565,0,0,0-.18232.0368c-.02472.00458-.04907.0094-.07348.01484a.985.985,0,0,0-.17523.05438,1.98585,1.98585,0,0,0-.573,3.49585v9.394A1.004,1.004,0,0,0,6.82539,19H7.1908a1.00406,1.00406,0,0,0,1.00409-1.00409V15.52234c3.64221-1.09827,5.19709.64282,7.09888.57587a5.57291,5.57291,0,0,0,3.25446-1.05805A1.2458,1.2458,0,0,0,18.99018,13.98212Z',\r\n\r\n  fontFamily: 'M16,19h2L13,5H11L6,19H8l1.43-4h5.14Zm-5.86-6L12,7.8,13.86,13Z',\r\n\r\n  fontSize: 'M20.75,19h1.5l-3-10h-1.5l-3,10h1.5L17,16.5h3Zm-3.3-4,1.05-3.5L19.55,15Zm-5.7,4h2l-5-14h-2l-5,14h2l1.43-4h5.14ZM5.89,13,7.75,7.8,9.61,13Z',\r\n\r\n  fullscreen: 'M7,14H5v5h5V17H7ZM5,10H7V7h3V5H5Zm12,7H14v2h5V14H17ZM14,5V7h3v3h2V5Z',\r\n\r\n  help: 'M11,17h2v2h-2V17z M12,5C9.8,5,8,6.8,8,9h2c0-1.1,0.9-2,2-2s2,0.9,2,2c0,2-3,1.7-3,5v1h2v-1c0-2.2,3-2.5,3-5  C16,6.8,14.2,5,12,5z',\r\n\r\n  horizontalLine: 'M5,12h14 M19,11H5v2h14V11z',\r\n\r\n  imageAltText: 'M19,7h-6v12h-2V7H5V5h6h2h6V7z',\r\n\r\n  imageCaption: 'M14.2,11l3.8,5H6l3-3.9l2.1,2.7L14,11H14.2z M8.5,11c0.8,0,1.5-0.7,1.5-1.5S9.3,8,8.5,8S7,8.7,7,9.5C7,10.3,7.7,11,8.5,11z   M22,6v12c0,1.1-0.9,2-2,2H4c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,8.8V6H4v12h16V8.8z M22,22H2v2h20V22z',\r\n\r\n  imageClass: 'M9.5,13.4l-2.9-2.9h3.8L12.2,7l1.4,3.5h3.8l-3,2.9l0.9,3.6L12,15.1L8.8,17L9.5,13.4z M22,6v12c0,1.1-0.9,2-2,2H4  c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,6H4v12h16V8.8V6z',\r\n\r\n  imageDisplay: 'M3,5h18v2H3V5z M13,9h8v2h-8V9z M13,13h8v2h-8V13z M3,17h18v2H3V17z M3,9h8v6H3V9z',\r\n\r\n  imageManager: 'M20,6h-7l-2-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M20,18H4V6h6.2l2,2H20V18z   M18,16l-3.8-5H14l-2.9,3.8L9,12.1L6,16H18z M10,9.5C10,8.7,9.3,8,8.5,8S7,8.7,7,9.5S7.7,11,8.5,11S10,10.3,10,9.5z',\r\n\r\n  imageSize: 'M16.9,4c-0.3,0-0.5,0.2-0.8,0.3L3.3,13c-0.9,0.6-1.1,1.9-0.5,2.8l2.2,3.3c0.4,0.7,1.2,1,2,0.8c0.3,0,0.5-0.2,0.8-0.3  L20.7,11c0.9-0.6,1.1-1.9,0.5-2.8l-2.2-3.3C18.5,4.2,17.7,3.9,16.9,4L16.9,4z M16.9,9.9L18.1,9l-2-2.9L17,5.6c0.1,0,0.1-0.1,0.2-0.1  c0.2,0,0.4,0,0.5,0.2L19.9,9c0.2,0.2,0.1,0.5-0.1,0.7L7,18.4c-0.1,0-0.1,0.1-0.2,0.1c-0.2,0-0.4,0-0.5-0.2L4.1,15  c-0.2-0.2-0.1-0.5,0.1-0.7L5,13.7l2,2.9l1.2-0.8l-2-2.9L7.5,12l1.1,1.7l1.2-0.8l-1.1-1.7l1.2-0.8l2,2.9l1.2-0.8l-2-2.9l1.2-0.8  l1.1,1.7l1.2-0.8l-1.1-1.7L14.9,7L16.9,9.9z',\r\n\r\n  indent: 'M3,9v6l3-3L3,9z M3,19h18v-2H3V19z M3,7h18V5H3V7z M9,11h12V9H9V11z M9,15h12v-2H9V15z',\r\n\r\n  inlineClass: 'M9.9,13.313A1.2,1.2,0,0,1,9.968,13H6.277l1.86-5.2,1.841,5.148A1.291,1.291,0,0,1,11.212,12h.426l-2.5-7h-2l-5,14h2l1.43-4H9.9Zm2.651,6.727a2.884,2.884,0,0,1-.655-2.018v-2.71A1.309,1.309,0,0,1,13.208,14h3.113a3.039,3.039,0,0,1,2,1.092s1.728,1.818,2.964,2.928a1.383,1.383,0,0,1,.318,1.931,1.44,1.44,0,0,1-.19.215l-3.347,3.31a1.309,1.309,0,0,1-1.832.258h0a1.282,1.282,0,0,1-.258-.257l-1.71-1.728Zm2.48-3.96a.773.773,0,1,0,.008,0Z',\r\n\r\n  inlineStyle: 'M11.88,15h.7l.7-1.7-3-8.3h-2l-5,14h2l1.4-4Zm-4.4-2,1.9-5.2,1.9,5.2ZM15.4,21.545l3.246,1.949-.909-3.637L20.72,17H16.954l-1.429-3.506L13.837,17H10.071l2.857,2.857-.779,3.637Z',\r\n\r\n  insert: 'M13.889,11.611c-0.17,0.17-0.443,0.17-0.612,0l-3.189-3.187l-3.363,3.36c-0.171,0.171-0.441,0.171-0.612,0c-0.172-0.169-0.172-0.443,0-0.611l3.667-3.669c0.17-0.17,0.445-0.172,0.614,0l3.496,3.493C14.058,11.167,14.061,11.443,13.889,11.611 M18.25,10c0,4.558-3.693,8.25-8.25,8.25c-4.557,0-8.25-3.692-8.25-8.25c0-4.557,3.693-8.25,8.25-8.25C14.557,1.75,18.25,5.443,18.25,10 M17.383,10c0-4.07-3.312-7.382-7.383-7.382S2.618,5.93,2.618,10S5.93,17.381,10,17.381S17.383,14.07,17.383,10',\r\n\r\n  insertEmbed: 'M20.73889,15.45929a3.4768,3.4768,0,0,0-5.45965-.28662L9.5661,12.50861a3.49811,3.49811,0,0,0-.00873-1.01331l5.72174-2.66809a3.55783,3.55783,0,1,0-.84527-1.81262L8.70966,9.6839a3.50851,3.50851,0,1,0,.0111,4.63727l5.7132,2.66412a3.49763,3.49763,0,1,0,6.30493-1.526ZM18.00745,5.01056A1.49993,1.49993,0,1,1,16.39551,6.3894,1.49994,1.49994,0,0,1,18.00745,5.01056ZM5.99237,13.49536a1.49989,1.49989,0,1,1,1.61194-1.37878A1.49982,1.49982,0,0,1,5.99237,13.49536Zm11.78211,5.494a1.49993,1.49993,0,1,1,1.61193-1.37885A1.49987,1.49987,0,0,1,17.77448,18.98932Z',\r\n\r\n  insertFile: 'M7,3C5.9,3,5,3.9,5,5v14c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V7.6L14.4,3H7z M17,19H7V5h6v4h4V19z',\r\n\r\n  insertImage: 'M14.2,11l3.8,5H6l3-3.9l2.1,2.7L14,11H14.2z M8.5,11c0.8,0,1.5-0.7,1.5-1.5S9.3,8,8.5,8S7,8.7,7,9.5C7,10.3,7.7,11,8.5,11z   M22,6v12c0,1.1-0.9,2-2,2H4c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,8.8V6H4v12h16V8.8z',\r\n\r\n  insertLink: 'M11,17H7A5,5,0,0,1,7,7h4V9H7a3,3,0,0,0,0,6h4ZM17,7H13V9h4a3,3,0,0,1,0,6H13v2h4A5,5,0,0,0,17,7Zm-1,4H8v2h8Z',\r\n\r\n  insertMore: 'M16.5,13h-6v6h-2V13h-6V11h6V5h2v6h6Zm5,4.5A1.5,1.5,0,1,1,20,16,1.5,1.5,0,0,1,21.5,17.5Zm0-4A1.5,1.5,0,1,1,20,12,1.5,1.5,0,0,1,21.5,13.5Zm0-4A1.5,1.5,0,1,1,20,8,1.5,1.5,0,0,1,21.5,9.5Z',\r\n\r\n  insertTable: 'M20,5H4C2.9,5,2,5.9,2,7v2v1.5v3V15v2c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2v-2v-1.5v-3V9V7C22,5.9,21.1,5,20,5z M9.5,13.5v-3  h5v3H9.5z M14.5,15v2.5h-5V15H14.5z M9.5,9V6.5h5V9H9.5z M3.5,7c0-0.3,0.2-0.5,0.5-0.5h4V9H3.5V7z M3.5,10.5H8v3H3.5V10.5z M3.5,17  v-2H8v2.5H4C3.7,17.5,3.5,17.3,3.5,17z M20.5,17c0,0.3-0.2,0.5-0.5,0.5h-4V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M16,9V6.5h4  c0.3,0,0.5,0.2,0.5,0.5v2H16z',\r\n\r\n  insertVideo: 'M15,8v8H5V8H15m2,2.5V7a1,1,0,0,0-1-1H4A1,1,0,0,0,3,7V17a1,1,0,0,0,1,1H16a1,1,0,0,0,1-1V13.5l2.29,2.29A1,1,0,0,0,21,15.08V8.91a1,1,0,0,0-1.71-.71Z',\r\n\r\n  upload: 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z',\r\n\r\n  uploadFiles: 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z',\r\n\r\n  italic: 'M11.76,9h2l-2.2,10h-2Zm1.68-4a1,1,0,1,0,1,1,1,1,0,0,0-1-1Z',\r\n\r\n  search: 'M15.5 14h-0.79l-0.28 -0.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09 -0.59 4.23 -1.57l0.27 0.28v0.79l5 4.99L20.49 19l-4.99 -5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',\r\n\r\n  lineHeight: 'M6.25,7h2.5L5.25,3.5,1.75,7h2.5V17H1.75l3.5,3.5L8.75,17H6.25Zm4-2V7h12V5Zm0,14h12V17h-12Zm0-6h12V11h-12Z',\r\n\r\n  linkStyles: 'M19,17.9l0.9,3.6l-3.2-1.9l-3.3,1.9l0.8-3.6L11.3,15h3.8l1.7-3.5l1.4,3.5H22L19,17.9z M20,12c0,0.3-0.1,0.7-0.2,1h2.1  c0.1-0.3,0.1-0.6,0.1-1c0-2.8-2.2-5-5-5h-4v2h4C18.7,9,20,10.3,20,12z M14.8,11H8v2h3.3h2.5L14.8,11z M9.9,16.4L8.5,15H7  c-1.7,0-3-1.3-3-3s1.3-3,3-3h4V7H7c-2.8,0-5,2.2-5,5s2.2,5,5,5h3.5L9.9,16.4z',\r\n\r\n  mention: 'M12.4,5c-4.1,0-7.5,3.4-7.5,7.5S8.3,20,12.4,20h3.8v-1.5h-3.8c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6v1.1  c0,0.6-0.5,1.2-1.1,1.2s-1.1-0.6-1.1-1.2v-1.1c0-2.1-1.7-3.8-3.8-3.8s-3.7,1.7-3.7,3.8s1.7,3.8,3.8,3.8c1,0,2-0.4,2.7-1.1  c0.5,0.7,1.3,1.1,2.2,1.1c1.5,0,2.6-1.2,2.6-2.7v-1.1C19.9,8.4,16.6,5,12.4,5z M12.4,14.7c-1.2,0-2.3-1-2.3-2.2s1-2.3,2.3-2.3  s2.3,1,2.3,2.3S13.6,14.7,12.4,14.7z',\r\n\r\n  minimize: 'M5,12h14 M19,11H5v2h14V11z',\r\n\r\n  more: 'M13.5,17c0,0.8-0.7,1.5-1.5,1.5s-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5S13.5,16.2,13.5,17z M13.5,12c0,0.8-0.7,1.5-1.5,1.5 s-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5S13.5,11.2,13.5,12z M13.5,7c0,0.8-0.7,1.5-1.5,1.5S10.5,7.8,10.5,7s0.7-1.5,1.5-1.5 S13.5,6.2,13.5,7z',\r\n\r\n  openLink: 'M17,17H7V7h3V5H7C6,5,5,6,5,7v10c0,1,1,2,2,2h10c1,0,2-1,2-2v-3h-2V17z M14,5v2h1.6l-5.8,5.8l1.4,1.4L17,8.4V10h2V5H14z',\r\n\r\n  orderedList: 'M2.5,16h2v.5h-1v1h1V18h-2v1h3V15h-3Zm1-7h1V5h-2V6h1Zm-1,2H4.3L2.5,13.1V14h3V13H3.7l1.8-2.1V10h-3Zm5-5V8h14V6Zm0,12h14V16H7.5Zm0-5h14V11H7.5Z',\r\n\r\n  outdent: 'M3,12l3,3V9L3,12z M3,19h18v-2H3V19z M3,7h18V5H3V7z M9,11h12V9H9V11z M9,15h12v-2H9V15z',\r\n\r\n  pageBreaker: 'M3,9v6l3-3L3,9z M21,9H8V4h2v3h9V4h2V9z M21,20h-2v-3h-9v3H8v-5h13V20z M11,13H8v-2h3V13z M16,13h-3v-2h3V13z M21,13h-3v-2  h3V13z',\r\n\r\n  paragraphFormat: 'M10.15,5A4.11,4.11,0,0,0,6.08,8.18,4,4,0,0,0,10,13v6h2V7h2V19h2V7h2V5ZM8,9a2,2,0,0,1,2-2v4A2,2,0,0,1,8,9Z',\r\n\r\n  paragraphMore: 'M7.682,5a4.11,4.11,0,0,0-4.07,3.18,4,4,0,0,0,3.11,4.725h0l.027.005a3.766,3.766,0,0,0,.82.09v6h2V7h2V19h2V7h2V5ZM5.532,9a2,2,0,0,1,2-2v4A2,2,0,0,1,5.532,9Zm14.94,8.491a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,17.491Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,13.491Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,9.491Z',\r\n\r\n  paragraphStyle: 'M4,9c0-1.1,0.9-2,2-2v4C4.9,11,4,10.1,4,9z M16.7,20.5l3.2,1.9L19,18.8l3-2.9h-3.7l-1.4-3.5L15.3,16h-3.8l2.9,2.9l-0.9,3.6  L16.7,20.5z M10,17.4V19h1.6L10,17.4z M6.1,5c-1.9,0-3.6,1.3-4,3.2c-0.5,2.1,0.8,4.2,2.9,4.7c0,0,0,0,0,0h0.2C5.5,13,5.8,13,6,13v6  h2V7h2v7h2V7h2V5H6.1z',\r\n\r\n  pdfExport: 'M7,3C5.9,3,5,3.9,5,5v14c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V7.6L14.4,3H7z M17,19H7V5h6v4h4V19z M16.3,13.5  c-0.2-0.6-1.1-0.8-2.6-0.8c-0.1,0-0.1,0-0.2,0c-0.3-0.3-0.8-0.9-1-1.2c-0.2-0.2-0.3-0.3-0.4-0.6c0.2-0.7,0.2-1,0.3-1.5  c0.1-0.9,0-1.6-0.2-1.8c-0.4-0.2-0.7-0.2-0.9-0.2c-0.1,0-0.3,0.2-0.7,0.7c-0.2,0.7-0.1,1.8,0.6,2.8c-0.2,0.8-0.7,1.6-1,2.4  c-0.8,0.2-1.5,0.7-1.9,1.1c-0.7,0.7-0.9,1.1-0.7,1.6c0,0.3,0.2,0.6,0.7,0.6c0.3-0.1,0.3-0.2,0.7-0.3c0.6-0.3,1.2-1.7,1.7-2.4  c0.8-0.2,1.7-0.3,2-0.3c0.1,0,0.3,0,0.6,0c0.8,0.8,1.2,1.1,1.8,1.2c0.1,0,0.2,0,0.3,0c0.3,0,0.8-0.1,1-0.6  C16.4,14.1,16.4,13.9,16.3,13.5z M8.3,15.7c-0.1,0.1-0.2,0.1-0.2,0.1c0-0.1,0-0.3,0.6-0.8c0.2-0.2,0.6-0.3,0.9-0.7  C9,15,8.6,15.5,8.3,15.7z M11.3,9c0-0.1,0.1-0.2,0.1-0.2S11.6,9,11.5,10c0,0.1,0,0.3-0.1,0.7C11.3,10.1,11,9.5,11.3,9z M10.9,13.1  c0.2-0.6,0.6-1,0.7-1.5c0.1,0.1,0.1,0.1,0.2,0.2c0.1,0.2,0.3,0.7,0.7,0.9C12.2,12.8,11.6,13,10.9,13.1z M15.2,14.1  c-0.1,0-0.1,0-0.2,0c-0.2,0-0.7-0.2-1-0.7c1.1,0,1.6,0.2,1.6,0.6C15.5,14.1,15.4,14.1,15.2,14.1z',\r\n\r\n  print: 'M16.1,17c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1s-0.4,1-1,1C16.5,18,16.1,17.6,16.1,17z M22,15v4c0,1.1-0.9,2-2,2H4  c-1.1,0-2-0.9-2-2v-4c0-1.1,0.9-2,2-2h1V5c0-1.1,0.9-2,2-2h7.4L19,7.6V13h1C21.1,13,22,13.9,22,15z M7,13h10V9h-4V5H7V13z M20,15H4  v4h16V15z',\r\n\r\n  redo: 'M13.6,9.4c1.7,0.3,3.2,0.9,4.6,2L21,8.5v7h-7l2.7-2.7C13,10.1,7.9,11,5.3,14.7c-0.2,0.3-0.4,0.5-0.5,0.8L3,14.6  C5.1,10.8,9.3,8.7,13.6,9.4z',\r\n\r\n  removeTable: 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z',\r\n\r\n  insertAll: 'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 ',\r\n\r\n  remove: 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z',\r\n\r\n  replaceImage: 'M16,5v3H4v2h12v3l4-4L16,5z M8,19v-3h12v-2H8v-3l-4,4L8,19z',\r\n\r\n  row: 'M20,5H4C2.9,5,2,5.9,2,7v2v1.5v3V15v2c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2v-2v-1.5v-3V9V7C22,5.9,21.1,5,20,5z M16,6.5h4  c0.3,0,0.5,0.2,0.5,0.5v2H16V6.5z M9.5,6.5h5V9h-5V6.5z M3.5,7c0-0.3,0.2-0.5,0.5-0.5h4V9H3.5V7z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.5  v-2H8V17.5z M14.5,17.5h-5V15h5V17.5z M20.5,17c0,0.3-0.2,0.5-0.5,0.5h-4V15h4.5V17z',\r\n\r\n  selectAll: 'M5,7h2V5C5.9,5,5,5.9,5,7z M5,11h2V9H5V11z M9,19h2v-2H9V19z M5,11h2V9H5V11z M15,5h-2v2h2V5z M17,5v2h2C19,5.9,18.1,5,17,5  z M7,19v-2H5C5,18.1,5.9,19,7,19z M5,15h2v-2H5V15z M11,5H9v2h2V5z M13,19h2v-2h-2V19z M17,11h2V9h-2V11z M17,19c1.1,0,2-0.9,2-2h-2  V19z M17,11h2V9h-2V11z M17,15h2v-2h-2V15z M13,19h2v-2h-2V19z M13,7h2V5h-2V7z M9,15h6V9H9V15z M11,11h2v2h-2V11z',\r\n\r\n  smile: 'M11.991,3A9,9,0,1,0,21,12,8.99557,8.99557,0,0,0,11.991,3ZM12,19a7,7,0,1,1,7-7A6.99808,6.99808,0,0,1,12,19Zm3.105-5.2h1.503a4.94542,4.94542,0,0,1-9.216,0H8.895a3.57808,3.57808,0,0,0,6.21,0ZM7.5,9.75A1.35,1.35,0,1,1,8.85,11.1,1.35,1.35,0,0,1,7.5,9.75Zm6.3,0a1.35,1.35,0,1,1,1.35,1.35A1.35,1.35,0,0,1,13.8,9.75Z',\r\n\r\n  spellcheck: 'M19.1,13.6l-5.6,5.6l-2.7-2.7l-1.4,1.4l4.1,4.1l7-7L19.1,13.6z M10.8,13.7l2.7,2.7l0.8-0.8L10.5,5h-2l-5,14h2l1.4-4h2.6  L10.8,13.7z M9.5,7.8l1.9,5.2H7.6L9.5,7.8z',\r\n\r\n  star: 'M12.1,7.7l1,2.5l0.4,0.9h1h2.4l-2.1,2l-0.6,0.6l0.2,0.9l0.6,2.3l-2.2-1.3L12,15.2l-0.8,0.5L9,17l0.5-2.5l0.1-0.8L9,13.1  l-2-2h2.5h0.9l0.4-0.8L12.1,7.7 M12.2,4L9.5,9.6H3.4L8,14.2L6.9,20l5.1-3.1l5.3,3.1l-1.5-5.8l4.8-4.6h-6.1L12.2,4L12.2,4z',\r\n\r\n  strikeThrough: 'M3,12.20294H21v1.5H16.63422a3.59782,3.59782,0,0,1,.34942,1.5929,3.252,3.252,0,0,1-1.31427,2.6997A5.55082,5.55082,0,0,1,12.20251,19a6.4421,6.4421,0,0,1-2.62335-.539,4.46335,4.46335,0,0,1-1.89264-1.48816,3.668,3.668,0,0,1-.67016-2.15546V14.704h.28723v-.0011h.34149v.0011H9.02v.11334a2.18275,2.18275,0,0,0,.85413,1.83069,3.69,3.69,0,0,0,2.32836.67926,3.38778,3.38778,0,0,0,2.07666-.5462,1.73346,1.73346,0,0,0,.7013-1.46655,1.69749,1.69749,0,0,0-.647-1.43439,3.00525,3.00525,0,0,0-.27491-.17725H3ZM16.34473,7.05981A4.18163,4.18163,0,0,0,14.6236,5.5462,5.627,5.627,0,0,0,12.11072,5,5.16083,5.16083,0,0,0,8.74719,6.06213,3.36315,3.36315,0,0,0,7.44006,8.76855a3.22923,3.22923,0,0,0,.3216,1.42786h2.59668c-.08338-.05365-.18537-.10577-.25269-.16064a1.60652,1.60652,0,0,1-.65283-1.30036,1.79843,1.79843,0,0,1,.68842-1.5108,3.12971,3.12971,0,0,1,1.96948-.55243,3.04779,3.04779,0,0,1,2.106.6687,2.35066,2.35066,0,0,1,.736,1.83258v.11341h2.00317V9.17346A3.90013,3.90013,0,0,0,16.34473,7.05981Z',\r\n\r\n  subscript: 'M10.4,12l3.6,3.6L12.6,17L9,13.4L5.4,17L4,15.6L7.6,12L4,8.4L5.4,7L9,10.6L12.6,7L14,8.4L10.4,12z M18.31234,19.674  l1.06812-1.1465c0.196-0.20141,0.37093-0.40739,0.5368-0.6088c0.15975-0.19418,0.30419-0.40046,0.432-0.617  c0.11969-0.20017,0.21776-0.41249,0.29255-0.6334c0.07103-0.21492,0.10703-0.43986,0.10662-0.66621  c0.00297-0.28137-0.04904-0.56062-0.1531-0.82206c-0.09855-0.24575-0.25264-0.46534-0.45022-0.6416  c-0.20984-0.18355-0.45523-0.32191-0.72089-0.40646c-0.63808-0.19005-1.3198-0.17443-1.94851,0.04465  c-0.28703,0.10845-0.54746,0.2772-0.76372,0.49487c-0.20881,0.20858-0.37069,0.45932-0.47483,0.73548  c-0.10002,0.26648-0.15276,0.54838-0.15585,0.833l-0.00364,0.237H17.617l0.00638-0.22692  c0.00158-0.12667,0.01966-0.25258,0.05377-0.37458c0.03337-0.10708,0.08655-0.20693,0.15679-0.29437  c0.07105-0.08037,0.15959-0.14335,0.25882-0.1841c0.22459-0.08899,0.47371-0.09417,0.7018-0.01458  c0.0822,0.03608,0.15559,0.08957,0.21509,0.15679c0.06076,0.07174,0.10745,0.15429,0.13761,0.24333  c0.03567,0.10824,0.05412,0.22141,0.05469,0.33538c-0.00111,0.08959-0.0118,0.17881-0.0319,0.26612  c-0.02913,0.10428-0.07076,0.20465-0.124,0.29893c-0.07733,0.13621-0.1654,0.26603-0.26338,0.38823  c-0.13438,0.17465-0.27767,0.34226-0.42929,0.50217l-2.15634,2.35315V21H21v-1.326H18.31234z',\r\n\r\n  superscript: 'M10.4,12,14,15.6,12.6,17,9,13.4,5.4,17,4,15.6,7.6,12,4,8.4,5.4,7,9,10.6,12.6,7,14,8.4Zm8.91234-3.326,1.06812-1.1465c.196-.20141.37093-.40739.5368-.6088a4.85745,4.85745,0,0,0,.432-.617,3.29,3.29,0,0,0,.29255-.6334,2.11079,2.11079,0,0,0,.10662-.66621,2.16127,2.16127,0,0,0-.1531-.82206,1.7154,1.7154,0,0,0-.45022-.6416,2.03,2.03,0,0,0-.72089-.40646,3.17085,3.17085,0,0,0-1.94851.04465,2.14555,2.14555,0,0,0-.76372.49487,2.07379,2.07379,0,0,0-.47483.73548,2.446,2.446,0,0,0-.15585.833l-.00364.237H18.617L18.62338,5.25a1.45865,1.45865,0,0,1,.05377-.37458.89552.89552,0,0,1,.15679-.29437.70083.70083,0,0,1,.25882-.1841,1.00569,1.00569,0,0,1,.7018-.01458.62014.62014,0,0,1,.21509.15679.74752.74752,0,0,1,.13761.24333,1.08893,1.08893,0,0,1,.05469.33538,1.25556,1.25556,0,0,1-.0319.26612,1.34227,1.34227,0,0,1-.124.29893,2.94367,2.94367,0,0,1-.26338.38823,6.41629,6.41629,0,0,1-.42929.50217L17.19709,8.92642V10H22V8.674Z',\r\n\r\n  symbols: 'M15.77493,16.98885a8.21343,8.21343,0,0,0,1.96753-2.57651,7.34824,7.34824,0,0,0,.6034-3.07618A6.09092,6.09092,0,0,0,11.99515,5a6.13347,6.13347,0,0,0-4.585,1.79187,6.417,6.417,0,0,0-1.756,4.69207,6.93955,6.93955,0,0,0,.622,2.97415,8.06587,8.06587,0,0,0,1.949,2.53076H5.41452V19h5.54114v-.04331h-.00147V16.84107a5.82825,5.82825,0,0,1-2.2052-2.2352A6.40513,6.40513,0,0,1,7.97672,11.447,4.68548,4.68548,0,0,1,9.07785,8.19191a3.73232,3.73232,0,0,1,2.9173-1.22462,3.76839,3.76839,0,0,1,2.91241,1.21489,4.482,4.482,0,0,1,1.11572,3.154,6.71141,6.71141,0,0,1-.75384,3.24732,5.83562,5.83562,0,0,1-2.22357,2.25759v2.11562H13.0444V19h5.54108V16.98885Z',\r\n\r\n  tags: 'M8.9749 7.47489a1.5 1.5 0 1 1 -1.5 1.5A1.5 1.5 0 0 1 8.9749 7.47489Zm3.78866 -3.12713L16.5362 8.12041l0.33565 0.33564 2.77038 2.77038a2.01988 2.01988 0 0 1 0.59 1.42 1.95518 1.95518 0 0 1 -0.5854 1.40455l0.00044 0.00043 -5.59583 5.59583 -0.00043 -0.00044a1.95518 1.95518 0 0 1 -1.40455 0.5854 1.98762 1.98762 0 0 1 -1.41 -0.58L8.45605 16.87185l-0.33564 -0.33565L4.35777 12.77357a1.99576 1.99576 0 0 1 -0.59 -1.42V9.36358l0 -3.59582a2.00579 2.00579 0 0 1 2 -2l3.59582 0h1.98995A1.98762 1.98762 0 0 1 12.76356 4.34776ZM15.46186 9.866l-0.33564 -0.33564L11.36359 5.76776H5.76776v5.59583L9.866 15.46186l2.7794 2.7794 5.5878 -5.60385 -0.001 -0.001Z',\r\n\r\n  tableHeader: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.4  l0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M14.5,17.5h-5V15h5V17.5z M14.5,13.5h-5v-3h5V13.5z M20.5,17c0,0.3-0.2,0.5-0.4,0.5l0,0  H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9h-4.4H16h-1.5h-5H8H7.9H3.5V7c0-0.3,0.2-0.5,0.4-0.5l0,0h4l0,0h8.2l0,0H20  c0.3,0,0.5,0.2,0.5,0.4l0,0V9z',\r\n\r\n  tableStyle: 'M20.0171,19.89752l.9,3.6-3.2-1.9-3.3,1.9.8-3.6-2.9-2.9h3.8l1.7-3.5,1.4,3.5h3.8ZM20,5H4A2.00591,2.00591,0,0,0,2,7V17a2.00591,2.00591,0,0,0,2,2h7.49115l-.58826-.58826L9.99115,17.5H9.5V14.9975h5.36511L16,12.66089V10.5h4.5v3h-.52783l.599,1.4975H22V7A2.00591,2.00591,0,0,0,20,5ZM3.5,7A.4724.4724,0,0,1,4,6.5H8V9H3.5Zm0,3.5H8v3H3.5Zm.5,7a.4724.4724,0,0,1-.5-.5V15H8v2.5Zm10.5-4h-5v-3h5Zm0-4.5h-5V6.5h5Zm6,0H16V6.5h4a.4724.4724,0,0,1,.5.5Z',\r\n\r\n  textColor: 'M15.2,13.494s-3.6,3.9-3.6,6.3a3.65,3.65,0,0,0,7.3.1v-.1C18.9,17.394,15.2,13.494,15.2,13.494Zm-1.47-1.357.669-.724L12.1,5h-2l-5,14h2l1.43-4h2.943A24.426,24.426,0,0,1,13.726,12.137ZM11.1,7.8l1.86,5.2H9.244Z',\r\n\r\n  textMore: 'M13.55,19h2l-5-14h-2l-5,14h2l1.4-4h5.1Zm-5.9-6,1.9-5.2,1.9,5.2Zm12.8,4.5a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.45,17.5Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.45,13.5Zm0-4A1.5,1.5,0,1,1,18.95,8,1.5,1.5,0,0,1,20.45,9.5Z',\r\n\r\n  underline: 'M19,20v2H5V20Zm-3-6.785a4,4,0,0,1-5.74,3.4A3.75,3.75,0,0,1,8,13.085V5.005H6v8.21a6,6,0,0,0,8,5.44,5.851,5.851,0,0,0,4-5.65v-8H16ZM16,5v0h2V5ZM8,5H6v0H8Z',\r\n\r\n  undo: 'M10.4,9.4c-1.7,0.3-3.2,0.9-4.6,2L3,8.5v7h7l-2.7-2.7c3.7-2.6,8.8-1.8,11.5,1.9c0.2,0.3,0.4,0.5,0.5,0.8l1.8-0.9  C18.9,10.8,14.7,8.7,10.4,9.4z',\r\n\r\n  unlink: 'M14.4,11l1.6,1.6V11H14.4z M17,7h-4v1.9h4c1.7,0,3.1,1.4,3.1,3.1c0,1.3-0.8,2.4-1.9,2.8l1.4,1.4C21,15.4,22,13.8,22,12  C22,9.2,19.8,7,17,7z M2,4.3l3.1,3.1C3.3,8.1,2,9.9,2,12c0,2.8,2.2,5,5,5h4v-1.9H7c-1.7,0-3.1-1.4-3.1-3.1c0-1.6,1.2-2.9,2.8-3.1  L8.7,11H8v2h2.7l2.3,2.3V17h1.7l4,4l1.4-1.4L3.4,2.9L2,4.3z',\r\n\r\n  unorderedList: 'M4,10.5c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S4.8,10.5,4,10.5z M4,5.5C3.2,5.5,2.5,6.2,2.5,7  S3.2,8.5,4,8.5S5.5,7.8,5.5,7S4.8,5.5,4,5.5z M4,15.5c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S4.8,15.5,4,15.5z   M7.5,6v2h14V6H7.5z M7.5,18h14v-2h-14V18z M7.5,13h14v-2h-14V13z',\r\n\r\n  verticalAlignBottom: 'M16,13h-3V3h-2v10H8l4,4L16,13z M3,19v2h18v-2H3z',\r\n\r\n  verticalAlignMiddle: 'M3,11v2h18v-2H3z M8,18h3v3h2v-3h3l-4-4L8,18z M16,6h-3V3h-2v3H8l4,4L16,6z',\r\n\r\n  verticalAlignTop: 'M8,11h3v10h2V11h3l-4-4L8,11z M21,5V3H3v2H21z'\r\n}\r\n\r\nFE.FILEICONS = {\r\n  docIcon: {\r\n    extension: '.doc',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9.617188 46.875 C 13.234375 46.875 16.160156 43.929688 16.160156 40.292969 C 16.160156 36.695312 13.234375 33.75 9.617188 33.75 L 7.402344 33.75 C 6.820312 33.75 6.371094 34.199219 6.371094 34.78125 L 6.371094 45.84375 C 6.371094 46.335938 6.714844 46.757812 7.191406 46.855469 L 7.402344 46.875 Z M 9.617188 44.792969 L 8.453125 44.792969 L 8.453125 35.832031 L 9.617188 35.832031 C 12.089844 35.832031 14.078125 37.835938 14.078125 40.292969 C 14.078125 42.789062 12.089844 44.773438 9.617188 44.792969 Z M 24.816406 46.875 C 26.539062 46.875 28.191406 46.085938 29.296875 44.867188 C 30.460938 43.648438 31.191406 41.980469 31.191406 40.125 C 31.191406 38.269531 30.460938 36.617188 29.296875 35.382812 C 28.191406 34.144531 26.539062 33.375 24.816406 33.375 C 23.015625 33.375 21.367188 34.144531 20.222656 35.382812 C 19.058594 36.617188 18.367188 38.269531 18.367188 40.125 C 18.367188 41.980469 19.058594 43.648438 20.222656 44.867188 C 21.367188 46.085938 23.015625 46.875 24.816406 46.875 Z M 24.816406 44.738281 C 23.617188 44.738281 22.566406 44.230469 21.777344 43.386719 C 20.992188 42.582031 20.503906 41.398438 20.503906 40.125 C 20.503906 38.851562 20.992188 37.667969 21.777344 36.84375 C 22.566406 36 23.617188 35.511719 24.816406 35.511719 C 25.941406 35.511719 26.992188 36 27.777344 36.84375 C 28.546875 37.667969 29.054688 38.851562 29.054688 40.125 C 29.054688 41.398438 28.546875 42.582031 27.777344 43.386719 C 26.992188 44.230469 25.941406 44.738281 24.816406 44.738281 Z M 39.996094 46.875 C 41.648438 46.875 43.148438 46.332031 44.328125 45.414062 C 44.777344 45.054688 44.851562 44.382812 44.515625 43.914062 C 44.140625 43.460938 43.445312 43.386719 43.015625 43.707031 C 42.171875 44.382812 41.160156 44.738281 39.996094 44.738281 C 38.703125 44.738281 37.503906 44.210938 36.621094 43.386719 C 35.777344 42.5625 35.253906 41.398438 35.253906 40.125 C 35.253906 38.851562 35.777344 37.726562 36.621094 36.863281 C 37.503906 36.039062 38.703125 35.511719 39.996094 35.511719 C 41.160156 35.511719 42.191406 35.867188 43.015625 36.542969 C 43.445312 36.882812 44.140625 36.804688 44.515625 36.335938 C 44.851562 35.867188 44.777344 35.210938 44.328125 34.835938 C 43.148438 33.917969 41.648438 33.375 39.996094 33.375 C 36.246094 33.394531 33.132812 36.414062 33.117188 40.125 C 33.132812 43.855469 36.246094 46.875 39.996094 46.875 Z M 39.996094 46.875 \"/>\r\n      </g>`\r\n  },\r\n  gifIcon: {\r\n    extension: '.gif',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 17.394531 46.875 C 18.988281 46.875 20.46875 46.332031 21.648438 45.414062 C 21.835938 45.28125 21.949219 45.132812 22.003906 44.960938 L 22.003906 44.945312 C 22.023438 44.90625 22.023438 44.886719 22.042969 44.851562 C 22.0625 44.738281 22.097656 44.664062 22.097656 44.53125 L 22.097656 40.386719 C 22.097656 39.789062 21.613281 39.335938 21.011719 39.335938 L 17.28125 39.335938 C 16.699219 39.335938 16.210938 39.789062 16.210938 40.386719 C 16.210938 40.96875 16.699219 41.457031 17.28125 41.457031 L 19.960938 41.457031 L 19.960938 44.023438 C 19.210938 44.457031 18.332031 44.738281 17.394531 44.738281 C 16.042969 44.738281 14.863281 44.230469 14.019531 43.367188 C 13.136719 42.523438 12.613281 41.382812 12.613281 40.144531 C 12.613281 38.867188 13.136719 37.726562 14.019531 36.882812 C 14.863281 36.019531 16.042969 35.511719 17.394531 35.511719 C 18.519531 35.511719 19.550781 35.90625 20.355469 36.523438 C 20.824219 36.898438 21.519531 36.804688 21.875 36.355469 C 22.230469 35.886719 22.15625 35.195312 21.667969 34.835938 C 20.503906 33.917969 18.988281 33.375 17.394531 33.375 C 13.585938 33.375 10.472656 36.375 10.472656 40.144531 C 10.472656 43.894531 13.585938 46.875 17.394531 46.875 Z M 26.945312 46.875 C 27.507812 46.875 27.996094 46.425781 27.996094 45.84375 L 27.996094 34.78125 C 27.996094 34.199219 27.507812 33.75 26.945312 33.75 C 26.363281 33.75 25.914062 34.199219 25.914062 34.78125 L 25.914062 45.84375 C 25.914062 46.425781 26.363281 46.875 26.945312 46.875 Z M 33.066406 46.875 C 33.648438 46.875 34.117188 46.40625 34.117188 45.84375 L 34.117188 41.34375 L 38.488281 41.34375 C 39.050781 41.34375 39.519531 40.875 39.519531 40.292969 C 39.519531 39.75 39.050781 39.261719 38.488281 39.261719 L 34.117188 39.261719 L 34.117188 35.832031 L 39.199219 35.832031 C 39.742188 35.832031 40.230469 35.363281 40.230469 34.78125 C 40.230469 34.21875 39.742188 33.75 39.199219 33.75 L 33.066406 33.75 C 32.488281 33.75 32.035156 34.21875 32.035156 34.78125 L 32.035156 45.84375 C 32.035156 46.40625 32.488281 46.875 33.066406 46.875 Z M 33.066406 46.875 \"/>\r\n      </g>`\r\n  },\r\n  jpegIcon: {\r\n    extension: '.jpeg',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9 43.75 C 11.140625 43.75 12.890625 42.015625 12.890625 39.875 L 12.890625 33.671875 C 12.890625 33.1875 12.5 32.8125 12.03125 32.8125 C 11.546875 32.8125 11.15625 33.1875 11.15625 33.671875 L 11.15625 39.875 C 11.15625 41.046875 10.1875 42.015625 9 42.015625 C 8.046875 42.015625 7.234375 41.390625 6.953125 40.53125 C 6.8125 40.078125 6.328125 39.828125 5.859375 39.984375 C 5.421875 40.109375 5.15625 40.59375 5.3125 41.0625 C 5.8125 42.625 7.28125 43.75 9 43.75 Z M 15.640625 43.75 C 16.125 43.75 16.515625 43.359375 16.515625 42.890625 L 16.515625 39.5 L 18.4375 39.5 C 20.296875 39.5 21.796875 38 21.796875 36.171875 C 21.796875 34.3125 20.296875 32.8125 18.4375 32.8125 L 15.640625 32.8125 C 15.171875 32.8125 14.78125 33.1875 14.78125 33.671875 L 14.78125 42.890625 C 14.78125 43.359375 15.171875 43.75 15.640625 43.75 Z M 18.4375 37.765625 L 16.515625 37.765625 L 16.515625 34.546875 L 18.4375 34.546875 C 19.34375 34.546875 20.046875 35.265625 20.0625 36.171875 C 20.046875 37.046875 19.34375 37.765625 18.4375 37.765625 Z M 29.234375 43.75 C 29.6875 43.75 30.09375 43.359375 30.09375 42.890625 C 30.09375 42.40625 29.6875 42.015625 29.234375 42.015625 L 25 42.015625 L 25 39.140625 L 28.640625 39.140625 C 29.109375 39.140625 29.5 38.75 29.5 38.265625 C 29.5 37.8125 29.109375 37.40625 28.640625 37.40625 L 25 37.40625 L 25 34.546875 L 29.234375 34.546875 C 29.6875 34.546875 30.09375 34.15625 30.09375 33.671875 C 30.09375 33.1875 29.6875 32.8125 29.234375 32.8125 L 24.125 32.8125 C 23.640625 32.8125 23.265625 33.1875 23.265625 33.671875 L 23.265625 42.890625 C 23.265625 43.359375 23.640625 43.75 24.125 43.75 C 24.125 43.75 24.140625 43.734375 24.140625 43.734375 C 24.140625 43.734375 24.140625 43.75 24.171875 43.75 Z M 37.1875 43.75 C 38.515625 43.75 39.75 43.296875 40.734375 42.53125 C 40.890625 42.421875 40.984375 42.296875 41.03125 42.15625 L 41.03125 42.140625 C 41.046875 42.109375 41.046875 42.09375 41.0625 42.0625 C 41.078125 41.96875 41.109375 41.90625 41.109375 41.796875 L 41.109375 38.34375 C 41.109375 37.914062 40.8125 37.578125 40.410156 37.492188 L 40.203125 37.46875 L 37.09375 37.46875 C 36.609375 37.46875 36.203125 37.84375 36.203125 38.34375 C 36.203125 38.828125 36.609375 39.234375 37.09375 39.234375 L 39.328125 39.234375 L 39.328125 41.375 C 38.703125 41.734375 37.96875 41.96875 37.1875 41.96875 C 36.0625 41.96875 35.078125 41.546875 34.375 40.828125 C 33.640625 40.125 33.203125 39.171875 33.203125 38.140625 C 33.203125 37.078125 33.640625 36.125 34.375 35.421875 C 35.078125 34.703125 36.0625 34.28125 37.1875 34.28125 C 38.125 34.28125 38.984375 34.609375 39.65625 35.125 C 40.046875 35.4375 40.625 35.359375 40.921875 34.984375 C 41.21875 34.59375 41.15625 34.015625 40.75 33.71875 C 39.78125 32.953125 38.515625 32.5 37.1875 32.5 C 34.015625 32.5 31.421875 35 31.421875 38.140625 C 31.421875 41.265625 34.015625 43.75 37.1875 43.75 Z M 37.1875 43.75 \"/>\r\n      </g>`\r\n  },\r\n  logIcon: {\r\n    extension: '.log',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 13.542969 46.875 C 14.085938 46.875 14.574219 46.40625 14.574219 45.84375 C 14.574219 45.261719 14.085938 44.792969 13.542969 44.792969 L 8.460938 44.792969 L 8.460938 34.78125 C 8.460938 34.21875 7.992188 33.75 7.410156 33.75 C 6.828125 33.75 6.378906 34.21875 6.378906 34.78125 L 6.378906 45.84375 C 6.378906 46.40625 6.828125 46.875 7.410156 46.875 Z M 21.742188 46.875 C 23.46875 46.875 25.117188 46.085938 26.222656 44.867188 C 27.386719 43.648438 28.117188 41.980469 28.117188 40.125 C 28.117188 38.269531 27.386719 36.617188 26.222656 35.382812 C 25.117188 34.144531 23.46875 33.375 21.742188 33.375 C 19.941406 33.375 18.292969 34.144531 17.148438 35.382812 C 15.984375 36.617188 15.292969 38.269531 15.292969 40.125 C 15.292969 41.980469 15.984375 43.648438 17.148438 44.867188 C 18.292969 46.085938 19.941406 46.875 21.742188 46.875 Z M 21.742188 44.738281 C 20.542969 44.738281 19.492188 44.230469 18.703125 43.386719 C 17.917969 42.582031 17.429688 41.398438 17.429688 40.125 C 17.429688 38.851562 17.917969 37.667969 18.703125 36.84375 C 19.492188 36 20.542969 35.511719 21.742188 35.511719 C 22.867188 35.511719 23.917969 36 24.703125 36.84375 C 25.472656 37.667969 25.980469 38.851562 25.980469 40.125 C 25.980469 41.398438 25.472656 42.582031 24.703125 43.386719 C 23.917969 44.230469 22.867188 44.738281 21.742188 44.738281 Z M 37.300781 46.875 C 38.894531 46.875 40.375 46.332031 41.558594 45.414062 C 41.746094 45.28125 41.855469 45.132812 41.914062 44.960938 L 41.914062 44.945312 L 41.949219 44.851562 C 41.96875 44.738281 42.007812 44.664062 42.007812 44.53125 L 42.007812 40.386719 C 42.007812 39.789062 41.519531 39.335938 40.917969 39.335938 L 37.1875 39.335938 C 36.605469 39.335938 36.121094 39.789062 36.121094 40.386719 C 36.121094 40.96875 36.605469 41.457031 37.1875 41.457031 L 39.871094 41.457031 L 39.871094 44.023438 C 39.121094 44.457031 38.238281 44.738281 37.300781 44.738281 C 35.949219 44.738281 34.769531 44.230469 33.925781 43.367188 C 33.042969 42.523438 32.519531 41.382812 32.519531 40.144531 C 32.519531 38.867188 33.042969 37.726562 33.925781 36.882812 C 34.769531 36.019531 35.949219 35.511719 37.300781 35.511719 C 38.425781 35.511719 39.457031 35.90625 40.261719 36.523438 C 40.730469 36.898438 41.425781 36.804688 41.78125 36.355469 C 42.136719 35.886719 42.0625 35.195312 41.574219 34.835938 C 40.414062 33.917969 38.894531 33.375 37.300781 33.375 C 33.496094 33.375 30.382812 36.375 30.382812 40.144531 C 30.382812 43.894531 33.496094 46.875 37.300781 46.875 Z M 37.300781 46.875 \"/>\r\n      </g>`\r\n  },\r\n  movIcon: {\r\n    extension: '.mov',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 15.472656 46.875 C 16.035156 46.875 16.523438 46.40625 16.523438 45.84375 L 16.523438 34.78125 C 16.523438 34.289062 16.152344 33.882812 15.679688 33.777344 L 15.472656 33.75 L 15.453125 33.75 C 15.117188 33.75 14.816406 33.898438 14.609375 34.179688 L 10.878906 39.355469 L 7.148438 34.179688 C 6.960938 33.898438 6.625 33.75 6.324219 33.75 L 6.265625 33.75 C 5.703125 33.75 5.234375 34.21875 5.234375 34.78125 L 5.234375 45.84375 C 5.234375 46.40625 5.703125 46.875 6.265625 46.875 C 6.847656 46.875 7.316406 46.40625 7.316406 45.84375 L 7.316406 37.949219 L 10 41.699219 C 10.203125 41.980469 10.523438 42.132812 10.859375 42.132812 L 10.898438 42.132812 C 11.234375 42.132812 11.535156 41.980469 11.742188 41.699219 L 14.441406 37.949219 L 14.441406 45.84375 C 14.441406 46.40625 14.890625 46.875 15.472656 46.875 Z M 25.460938 46.875 C 27.1875 46.875 28.835938 46.085938 29.941406 44.867188 C 31.105469 43.648438 31.835938 41.980469 31.835938 40.125 C 31.835938 38.269531 31.105469 36.617188 29.941406 35.382812 C 28.835938 34.144531 27.1875 33.375 25.460938 33.375 C 23.660156 33.375 22.011719 34.144531 20.867188 35.382812 C 19.703125 36.617188 19.011719 38.269531 19.011719 40.125 C 19.011719 41.980469 19.703125 43.648438 20.867188 44.867188 C 22.011719 46.085938 23.660156 46.875 25.460938 46.875 Z M 25.460938 44.738281 C 24.261719 44.738281 23.210938 44.230469 22.421875 43.386719 C 21.636719 42.582031 21.148438 41.398438 21.148438 40.125 C 21.148438 38.851562 21.636719 37.667969 22.421875 36.84375 C 23.210938 36 24.261719 35.511719 25.460938 35.511719 C 26.585938 35.511719 27.636719 36 28.421875 36.84375 C 29.191406 37.667969 29.699219 38.851562 29.699219 40.125 C 29.699219 41.398438 29.191406 42.582031 28.421875 43.386719 C 27.636719 44.230469 26.585938 44.738281 25.460938 44.738281 Z M 38.683594 46.855469 L 38.71875 46.855469 C 38.777344 46.835938 38.8125 46.820312 38.871094 46.820312 C 38.886719 46.800781 38.886719 46.800781 38.90625 46.800781 C 38.964844 46.78125 39.019531 46.726562 39.058594 46.707031 L 39.09375 46.6875 L 39.207031 46.59375 C 39.226562 46.574219 39.226562 46.574219 39.246094 46.539062 L 39.339844 46.425781 C 39.355469 46.425781 39.355469 46.425781 39.355469 46.40625 C 39.394531 46.367188 39.414062 46.292969 39.433594 46.257812 L 44.0625 35.304688 C 44.269531 34.800781 44.027344 34.179688 43.5 33.976562 C 42.996094 33.75 42.375 33.992188 42.152344 34.519531 L 38.496094 43.199219 L 34.839844 34.519531 C 34.613281 33.992188 34.011719 33.75 33.507812 33.976562 C 32.964844 34.179688 32.71875 34.800781 32.945312 35.304688 L 37.539062 46.257812 C 37.574219 46.292969 37.613281 46.367188 37.632812 46.40625 C 37.632812 46.425781 37.652344 46.425781 37.652344 46.425781 C 37.667969 46.460938 37.707031 46.5 37.746094 46.539062 C 37.746094 46.574219 37.761719 46.574219 37.761719 46.59375 C 37.820312 46.632812 37.855469 46.648438 37.894531 46.6875 L 37.914062 46.6875 C 37.96875 46.726562 38.042969 46.78125 38.082031 46.800781 L 38.101562 46.800781 C 38.101562 46.800781 38.121094 46.800781 38.121094 46.820312 C 38.15625 46.820312 38.230469 46.835938 38.269531 46.855469 L 38.308594 46.855469 L 38.402344 46.871094 L 38.496094 46.875 C 38.550781 46.875 38.605469 46.875 38.683594 46.855469 Z M 38.683594 46.855469 \"/>\r\n      </g>`\r\n  },\r\n  ogvIcon: {\r\n    extension: '.ogv',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 11.511719 46.875 C 13.238281 46.875 14.886719 46.085938 15.996094 44.867188 C 17.15625 43.648438 17.886719 41.980469 17.886719 40.125 C 17.886719 38.269531 17.15625 36.617188 15.996094 35.382812 C 14.886719 34.144531 13.238281 33.375 11.511719 33.375 C 9.714844 33.375 8.0625 34.144531 6.917969 35.382812 C 5.757812 36.617188 5.0625 38.269531 5.0625 40.125 C 5.0625 41.980469 5.757812 43.648438 6.917969 44.867188 C 8.0625 46.085938 9.714844 46.875 11.511719 46.875 Z M 11.511719 44.738281 C 10.3125 44.738281 9.261719 44.230469 8.476562 43.386719 C 7.6875 42.582031 7.199219 41.398438 7.199219 40.125 C 7.199219 38.851562 7.6875 37.667969 8.476562 36.84375 C 9.261719 36 10.3125 35.511719 11.511719 35.511719 C 12.636719 35.511719 13.6875 36 14.476562 36.84375 C 15.246094 37.667969 15.75 38.851562 15.75 40.125 C 15.75 41.398438 15.246094 42.582031 14.476562 43.386719 C 13.6875 44.230469 12.636719 44.738281 11.511719 44.738281 Z M 27.25 46.875 C 28.84375 46.875 30.324219 46.332031 31.507812 45.414062 C 31.695312 45.28125 31.804688 45.132812 31.863281 44.960938 L 31.863281 44.945312 C 31.882812 44.90625 31.882812 44.886719 31.898438 44.851562 C 31.917969 44.738281 31.957031 44.664062 31.957031 44.53125 L 31.957031 40.386719 C 31.957031 39.789062 31.46875 39.335938 30.867188 39.335938 L 27.136719 39.335938 C 26.554688 39.335938 26.070312 39.789062 26.070312 40.386719 C 26.070312 40.96875 26.554688 41.457031 27.136719 41.457031 L 29.820312 41.457031 L 29.820312 44.023438 C 29.070312 44.457031 28.1875 44.738281 27.25 44.738281 C 25.898438 44.738281 24.71875 44.230469 23.875 43.367188 C 22.992188 42.523438 22.46875 41.382812 22.46875 40.144531 C 22.46875 38.867188 22.992188 37.726562 23.875 36.882812 C 24.71875 36.019531 25.898438 35.511719 27.25 35.511719 C 28.375 35.511719 29.40625 35.90625 30.210938 36.523438 C 30.679688 36.898438 31.375 36.804688 31.730469 36.355469 C 32.085938 35.886719 32.011719 35.195312 31.523438 34.835938 C 30.363281 33.917969 28.84375 33.375 27.25 33.375 C 23.445312 33.375 20.332031 36.375 20.332031 40.144531 C 20.332031 43.894531 23.445312 46.875 27.25 46.875 Z M 40.191406 46.855469 L 40.230469 46.855469 C 40.285156 46.835938 40.324219 46.820312 40.378906 46.820312 C 40.398438 46.800781 40.398438 46.800781 40.417969 46.800781 C 40.472656 46.78125 40.53125 46.726562 40.566406 46.707031 C 40.605469 46.6875 40.605469 46.6875 40.605469 46.6875 L 40.71875 46.59375 C 40.738281 46.574219 40.738281 46.574219 40.753906 46.539062 L 40.847656 46.425781 C 40.867188 46.425781 40.867188 46.425781 40.867188 46.40625 C 40.90625 46.367188 40.925781 46.292969 40.941406 46.257812 L 45.574219 35.304688 C 45.78125 34.800781 45.535156 34.179688 45.011719 33.976562 C 44.503906 33.75 43.886719 33.992188 43.660156 34.519531 L 40.003906 43.199219 L 36.347656 34.519531 C 36.125 33.992188 35.523438 33.75 35.019531 33.976562 C 34.472656 34.179688 34.230469 34.800781 34.457031 35.304688 L 39.050781 46.257812 C 39.085938 46.292969 39.125 46.367188 39.144531 46.40625 C 39.144531 46.425781 39.160156 46.425781 39.160156 46.425781 C 39.179688 46.460938 39.21875 46.5 39.253906 46.539062 C 39.253906 46.574219 39.273438 46.574219 39.273438 46.59375 C 39.332031 46.632812 39.367188 46.648438 39.40625 46.6875 L 39.425781 46.6875 C 39.480469 46.726562 39.554688 46.78125 39.59375 46.800781 L 39.613281 46.800781 C 39.613281 46.800781 39.628906 46.800781 39.628906 46.820312 C 39.667969 46.820312 39.742188 46.835938 39.78125 46.855469 L 39.816406 46.855469 L 39.910156 46.871094 L 40.003906 46.875 C 40.0625 46.875 40.117188 46.875 40.191406 46.855469 Z M 40.191406 46.855469 \"/>\r\n      </g>`\r\n  },\r\n  pngIcon: {\r\n    extension: '.png',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.523438 46.875 C 8.105469 46.875 8.574219 46.40625 8.574219 45.84375 L 8.574219 41.773438 L 10.878906 41.773438 C 13.109375 41.773438 14.910156 39.976562 14.910156 37.78125 C 14.910156 35.550781 13.109375 33.75 10.878906 33.75 L 7.523438 33.75 C 6.960938 33.75 6.492188 34.199219 6.492188 34.78125 L 6.492188 45.84375 C 6.492188 46.40625 6.960938 46.875 7.523438 46.875 Z M 10.878906 39.695312 L 8.574219 39.695312 L 8.574219 35.832031 L 10.878906 35.832031 C 11.964844 35.832031 12.808594 36.695312 12.828125 37.78125 C 12.808594 38.832031 11.964844 39.695312 10.878906 39.695312 Z M 26.75 46.875 C 27.3125 46.875 27.78125 46.40625 27.78125 45.84375 L 27.78125 34.949219 C 27.78125 34.40625 27.3125 33.9375 26.75 33.9375 C 26.1875 33.9375 25.738281 34.40625 25.738281 34.949219 L 25.738281 42.675781 L 19.679688 34.292969 C 19.363281 33.84375 18.722656 33.75 18.253906 34.070312 C 17.972656 34.273438 17.824219 34.613281 17.84375 34.929688 L 17.84375 45.84375 C 17.84375 46.40625 18.292969 46.875 18.875 46.875 C 19.417969 46.875 19.886719 46.40625 19.886719 45.84375 L 19.886719 38.0625 L 25.886719 46.386719 C 25.90625 46.425781 25.941406 46.460938 25.980469 46.5 C 26.167969 46.726562 26.449219 46.875 26.75 46.875 Z M 38.082031 46.875 C 39.675781 46.875 41.15625 46.332031 42.339844 45.414062 C 42.527344 45.28125 42.636719 45.132812 42.695312 44.960938 L 42.695312 44.945312 C 42.714844 44.90625 42.714844 44.886719 42.730469 44.851562 C 42.75 44.738281 42.789062 44.664062 42.789062 44.53125 L 42.789062 40.386719 C 42.789062 39.789062 42.300781 39.335938 41.699219 39.335938 L 37.96875 39.335938 C 37.386719 39.335938 36.902344 39.789062 36.902344 40.386719 C 36.902344 40.96875 37.386719 41.457031 37.96875 41.457031 L 40.652344 41.457031 L 40.652344 44.023438 C 39.902344 44.457031 39.019531 44.738281 38.082031 44.738281 C 36.730469 44.738281 35.550781 44.230469 34.707031 43.367188 C 33.824219 42.523438 33.300781 41.382812 33.300781 40.144531 C 33.300781 38.867188 33.824219 37.726562 34.707031 36.882812 C 35.550781 36.019531 36.730469 35.511719 38.082031 35.511719 C 39.207031 35.511719 40.238281 35.90625 41.042969 36.523438 C 41.511719 36.898438 42.207031 36.804688 42.5625 36.355469 C 42.917969 35.886719 42.84375 35.195312 42.355469 34.835938 C 41.195312 33.917969 39.675781 33.375 38.082031 33.375 C 34.277344 33.375 31.164062 36.375 31.164062 40.144531 C 31.164062 43.894531 34.277344 46.875 38.082031 46.875 Z M 38.082031 46.875 \"/>\r\n      </g>`\r\n  },\r\n  txtIcon: {\r\n    extension: '.txt',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 12.847656 46.875 C 13.429688 46.875 13.878906 46.425781 13.878906 45.84375 L 13.878906 35.832031 L 16.859375 35.832031 C 17.421875 35.832031 17.890625 35.34375 17.890625 34.78125 C 17.890625 34.199219 17.421875 33.75 16.859375 33.75 L 8.855469 33.75 C 8.273438 33.75 7.824219 34.199219 7.824219 34.78125 C 7.824219 35.34375 8.273438 35.832031 8.855469 35.832031 L 11.816406 35.832031 L 11.816406 45.84375 C 11.816406 46.425781 12.285156 46.875 12.847656 46.875 Z M 29.019531 46.875 C 29.222656 46.875 29.429688 46.800781 29.617188 46.667969 C 30.085938 46.351562 30.160156 45.695312 29.84375 45.242188 L 26.28125 40.367188 L 29.84375 35.53125 C 30.160156 35.0625 30.085938 34.425781 29.617188 34.105469 C 29.148438 33.75 28.53125 33.84375 28.175781 34.332031 L 25.023438 38.644531 L 21.855469 34.332031 C 21.535156 33.84375 20.878906 33.75 20.429688 34.105469 C 19.960938 34.425781 19.867188 35.0625 20.1875 35.53125 L 23.75 40.367188 L 20.1875 45.242188 C 19.867188 45.695312 19.960938 46.351562 20.429688 46.667969 C 20.597656 46.800781 20.804688 46.875 21.03125 46.875 C 21.347656 46.875 21.648438 46.707031 21.855469 46.445312 L 25.023438 42.113281 L 28.175781 46.445312 C 28.378906 46.707031 28.679688 46.875 29.019531 46.875 Z M 37.464844 46.875 C 38.042969 46.875 38.496094 46.425781 38.496094 45.84375 L 38.496094 35.832031 L 41.476562 35.832031 C 42.039062 35.832031 42.507812 35.34375 42.507812 34.78125 C 42.507812 34.199219 42.039062 33.75 41.476562 33.75 L 33.46875 33.75 C 32.886719 33.75 32.4375 34.199219 32.4375 34.78125 C 32.4375 35.34375 32.886719 35.832031 33.46875 35.832031 L 36.433594 35.832031 L 36.433594 45.84375 C 36.433594 46.425781 36.902344 46.875 37.464844 46.875 Z M 37.464844 46.875 \"/>\r\n      </g>`\r\n  },\r\n  webmIcon: {\r\n    extension: '.webm',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.195312 43.734375 L 7.242188 43.734375 C 7.273438 43.71875 7.304688 43.703125 7.367188 43.703125 C 7.367188 43.6875 7.382812 43.6875 7.382812 43.6875 L 7.398438 43.6875 C 7.429688 43.671875 7.476562 43.625 7.523438 43.59375 L 7.554688 43.59375 C 7.585938 43.5625 7.617188 43.53125 7.648438 43.515625 C 7.648438 43.5 7.664062 43.5 7.664062 43.46875 L 7.757812 43.375 C 7.757812 43.375 7.757812 43.359375 7.773438 43.359375 C 7.789062 43.328125 7.820312 43.265625 7.835938 43.21875 L 9.882812 38.375 L 11.929688 43.21875 C 11.945312 43.265625 11.960938 43.328125 11.992188 43.359375 C 11.992188 43.359375 11.992188 43.375 12.023438 43.375 L 12.085938 43.46875 C 12.101562 43.5 12.101562 43.5 12.117188 43.515625 C 12.148438 43.53125 12.179688 43.5625 12.226562 43.59375 L 12.242188 43.59375 C 12.273438 43.625 12.320312 43.671875 12.382812 43.6875 C 12.398438 43.6875 12.398438 43.6875 12.414062 43.703125 C 12.445312 43.703125 12.476562 43.71875 12.523438 43.734375 L 12.570312 43.734375 L 12.640625 43.746094 L 12.710938 43.75 C 12.773438 43.75 12.820312 43.75 12.867188 43.734375 L 12.898438 43.734375 C 12.945312 43.71875 12.992188 43.703125 13.023438 43.703125 C 13.023438 43.6875 13.039062 43.6875 13.039062 43.6875 L 13.054688 43.6875 C 13.117188 43.671875 13.148438 43.625 13.195312 43.59375 L 13.210938 43.59375 C 13.242188 43.5625 13.289062 43.53125 13.320312 43.515625 C 13.320312 43.5 13.335938 43.5 13.335938 43.46875 C 13.367188 43.4375 13.398438 43.40625 13.414062 43.375 C 13.414062 43.375 13.429688 43.359375 13.429688 43.359375 C 13.460938 43.328125 13.492188 43.265625 13.507812 43.21875 L 17.335938 34.109375 C 17.523438 33.6875 17.320312 33.171875 16.898438 33 C 16.445312 32.8125 15.945312 33.015625 15.757812 33.453125 L 12.710938 40.6875 L 10.695312 35.890625 C 10.539062 35.546875 10.210938 35.359375 9.882812 35.359375 C 9.539062 35.359375 9.210938 35.546875 9.070312 35.890625 L 7.054688 40.6875 L 3.992188 33.453125 C 3.820312 33.015625 3.304688 32.8125 2.882812 33 C 2.429688 33.171875 2.242188 33.6875 2.414062 34.109375 L 6.257812 43.21875 C 6.289062 43.265625 6.304688 43.328125 6.335938 43.359375 L 6.335938 43.375 C 6.367188 43.40625 6.382812 43.4375 6.414062 43.46875 C 6.429688 43.5 6.429688 43.5 6.445312 43.515625 C 6.492188 43.53125 6.507812 43.5625 6.554688 43.59375 L 6.570312 43.59375 C 6.601562 43.625 6.664062 43.671875 6.710938 43.6875 C 6.726562 43.6875 6.726562 43.6875 6.742188 43.703125 C 6.773438 43.703125 6.804688 43.71875 6.851562 43.734375 L 6.898438 43.734375 L 6.976562 43.746094 L 7.054688 43.75 C 7.101562 43.75 7.148438 43.75 7.195312 43.734375 Z M 25.179688 43.75 C 25.632812 43.75 26.039062 43.359375 26.039062 42.890625 C 26.039062 42.40625 25.632812 42.015625 25.179688 42.015625 L 20.945312 42.015625 L 20.945312 39.140625 L 24.585938 39.140625 C 25.054688 39.140625 25.445312 38.75 25.445312 38.265625 C 25.445312 37.8125 25.054688 37.40625 24.585938 37.40625 L 20.945312 37.40625 L 20.945312 34.546875 L 25.179688 34.546875 C 25.632812 34.546875 26.039062 34.15625 26.039062 33.671875 C 26.039062 33.1875 25.632812 32.8125 25.179688 32.8125 L 20.070312 32.8125 C 19.585938 32.8125 19.210938 33.1875 19.210938 33.671875 L 19.210938 42.890625 C 19.210938 43.359375 19.585938 43.75 20.070312 43.75 C 20.070312 43.75 20.085938 43.734375 20.085938 43.734375 C 20.085938 43.734375 20.085938 43.75 20.117188 43.75 Z M 31.539062 43.75 C 33.382812 43.75 34.882812 42.25 34.882812 40.390625 C 34.882812 39.203125 34.242188 38.15625 33.304688 37.5625 C 33.679688 37.0625 33.898438 36.453125 33.898438 35.78125 C 33.898438 34.140625 32.570312 32.8125 30.929688 32.8125 L 28.710938 32.8125 C 28.242188 32.8125 27.851562 33.1875 27.851562 33.671875 L 27.851562 42.890625 C 27.851562 43.359375 28.242188 43.75 28.710938 43.75 L 28.757812 43.734375 C 28.757812 43.734375 28.757812 43.75 28.773438 43.75 Z M 30.929688 37.046875 L 29.585938 37.046875 L 29.585938 34.546875 L 30.929688 34.546875 C 31.617188 34.546875 32.164062 35.09375 32.164062 35.78125 C 32.164062 36.46875 31.617188 37.046875 30.929688 37.046875 Z M 31.539062 42.015625 L 29.585938 42.015625 L 29.585938 38.78125 L 31.539062 38.78125 C 32.429688 38.796875 33.148438 39.5 33.148438 40.390625 C 33.148438 41.296875 32.429688 42 31.539062 42.015625 Z M 45.664062 43.75 C 46.132812 43.75 46.539062 43.359375 46.539062 42.890625 L 46.539062 33.671875 C 46.539062 33.269531 46.242188 32.9375 45.859375 32.839844 L 45.664062 32.8125 L 45.648438 32.8125 C 45.367188 32.8125 45.117188 32.9375 44.945312 33.171875 L 41.835938 37.484375 L 38.726562 33.171875 C 38.570312 32.9375 38.289062 32.8125 38.039062 32.8125 L 37.992188 32.8125 C 37.523438 32.8125 37.132812 33.203125 37.132812 33.671875 L 37.132812 42.890625 C 37.132812 43.359375 37.523438 43.75 37.992188 43.75 C 38.476562 43.75 38.867188 43.359375 38.867188 42.890625 L 38.867188 36.3125 L 41.101562 39.4375 C 41.273438 39.671875 41.539062 39.796875 41.820312 39.796875 L 41.851562 39.796875 C 42.132812 39.796875 42.382812 39.671875 42.554688 39.4375 L 44.804688 36.3125 L 44.804688 42.890625 C 44.804688 43.359375 45.179688 43.75 45.664062 43.75 Z M 45.664062 43.75 \"/>\r\n      </g>`\r\n  },\r\n  webpIcon: {\r\n    extension: '.webp',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9.234375 43.734375 L 9.28125 43.734375 C 9.3125 43.71875 9.34375 43.703125 9.40625 43.703125 L 9.414062 43.6875 C 9.421875 43.6875 9.421875 43.6875 9.4375 43.6875 C 9.46875 43.671875 9.515625 43.625 9.5625 43.59375 L 9.59375 43.59375 C 9.625 43.5625 9.65625 43.53125 9.6875 43.515625 C 9.6875 43.5 9.703125 43.5 9.703125 43.46875 L 9.796875 43.375 C 9.796875 43.375 9.796875 43.359375 9.8125 43.359375 C 9.828125 43.328125 9.859375 43.265625 9.875 43.21875 L 11.921875 38.375 L 13.96875 43.21875 C 13.984375 43.265625 14 43.328125 14.03125 43.359375 C 14.03125 43.359375 14.03125 43.375 14.0625 43.375 L 14.125 43.46875 C 14.140625 43.5 14.140625 43.5 14.15625 43.515625 L 14.203125 43.546875 L 14.265625 43.59375 C 14.265625 43.59375 14.265625 43.59375 14.28125 43.59375 C 14.3125 43.625 14.359375 43.671875 14.421875 43.6875 C 14.4375 43.6875 14.4375 43.6875 14.453125 43.703125 C 14.484375 43.703125 14.515625 43.71875 14.5625 43.734375 L 14.609375 43.734375 L 14.679688 43.746094 L 14.75 43.75 C 14.8125 43.75 14.859375 43.75 14.90625 43.734375 L 14.9375 43.734375 C 14.984375 43.71875 15.03125 43.703125 15.0625 43.703125 C 15.0625 43.6875 15.078125 43.6875 15.078125 43.6875 L 15.09375 43.6875 C 15.15625 43.671875 15.1875 43.625 15.234375 43.59375 L 15.25 43.59375 C 15.28125 43.5625 15.328125 43.53125 15.359375 43.515625 C 15.359375 43.5 15.375 43.5 15.375 43.46875 C 15.40625 43.4375 15.4375 43.40625 15.453125 43.375 L 15.46875 43.359375 C 15.5 43.328125 15.53125 43.265625 15.546875 43.21875 L 19.375 34.109375 C 19.5625 33.6875 19.359375 33.171875 18.9375 33 C 18.484375 32.8125 17.984375 33.015625 17.796875 33.453125 L 14.75 40.6875 L 12.734375 35.890625 C 12.578125 35.546875 12.25 35.359375 11.921875 35.359375 C 11.578125 35.359375 11.25 35.546875 11.109375 35.890625 L 9.09375 40.6875 L 6.03125 33.453125 C 5.859375 33.015625 5.34375 32.8125 4.921875 33 C 4.46875 33.171875 4.28125 33.6875 4.453125 34.109375 L 8.296875 43.21875 C 8.328125 43.265625 8.34375 43.328125 8.375 43.359375 L 8.375 43.375 C 8.40625 43.40625 8.421875 43.4375 8.453125 43.46875 C 8.46875 43.5 8.46875 43.5 8.484375 43.515625 L 8.539062 43.546875 L 8.59375 43.59375 C 8.59375 43.59375 8.59375 43.59375 8.609375 43.59375 C 8.640625 43.625 8.703125 43.671875 8.75 43.6875 C 8.765625 43.6875 8.765625 43.6875 8.78125 43.703125 C 8.8125 43.703125 8.84375 43.71875 8.890625 43.734375 L 8.9375 43.734375 L 9.015625 43.746094 L 9.09375 43.75 C 9.140625 43.75 9.1875 43.75 9.234375 43.734375 Z M 27.21875 43.75 C 27.671875 43.75 28.078125 43.359375 28.078125 42.890625 C 28.078125 42.40625 27.671875 42.015625 27.21875 42.015625 L 22.984375 42.015625 L 22.984375 39.140625 L 26.625 39.140625 C 27.09375 39.140625 27.484375 38.75 27.484375 38.265625 C 27.484375 37.8125 27.09375 37.40625 26.625 37.40625 L 22.984375 37.40625 L 22.984375 34.546875 L 27.21875 34.546875 C 27.671875 34.546875 28.078125 34.15625 28.078125 33.671875 C 28.078125 33.1875 27.671875 32.8125 27.21875 32.8125 L 22.109375 32.8125 C 21.625 32.8125 21.25 33.1875 21.25 33.671875 L 21.25 42.890625 C 21.25 43.359375 21.625 43.75 22.109375 43.75 L 22.125 43.734375 C 22.125 43.734375 22.125 43.75 22.15625 43.75 Z M 33.578125 43.75 C 35.421875 43.75 36.921875 42.25 36.921875 40.390625 C 36.921875 39.203125 36.28125 38.15625 35.34375 37.5625 C 35.71875 37.0625 35.9375 36.453125 35.9375 35.78125 C 35.9375 34.140625 34.609375 32.8125 32.96875 32.8125 L 30.75 32.8125 C 30.28125 32.8125 29.890625 33.1875 29.890625 33.671875 L 29.890625 42.890625 C 29.890625 43.359375 30.28125 43.75 30.75 43.75 C 30.765625 43.75 30.765625 43.734375 30.796875 43.734375 C 30.796875 43.734375 30.796875 43.75 30.8125 43.75 Z M 32.96875 37.046875 L 31.625 37.046875 L 31.625 34.546875 L 32.96875 34.546875 C 33.65625 34.546875 34.203125 35.09375 34.203125 35.78125 C 34.203125 36.46875 33.65625 37.046875 32.96875 37.046875 Z M 33.578125 42.015625 L 31.625 42.015625 L 31.625 38.78125 L 33.578125 38.78125 C 34.46875 38.796875 35.1875 39.5 35.1875 40.390625 C 35.1875 41.296875 34.46875 42 33.578125 42.015625 Z M 40.03125 43.75 C 40.515625 43.75 40.90625 43.359375 40.90625 42.890625 L 40.90625 39.5 L 42.828125 39.5 C 44.6875 39.5 46.1875 38 46.1875 36.171875 C 46.1875 34.3125 44.6875 32.8125 42.828125 32.8125 L 40.03125 32.8125 C 39.5625 32.8125 39.171875 33.1875 39.171875 33.671875 L 39.171875 42.890625 C 39.171875 43.359375 39.5625 43.75 40.03125 43.75 Z M 42.828125 37.765625 L 40.90625 37.765625 L 40.90625 34.546875 L 42.828125 34.546875 C 43.734375 34.546875 44.4375 35.265625 44.453125 36.171875 C 44.4375 37.046875 43.734375 37.765625 42.828125 37.765625 Z M 42.828125 37.765625 \"/>\r\n      </g>`\r\n  },\r\n  wmvIcon: {\r\n    extension: '.wmv',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.484375 43.734375 L 8.53125 43.734375 C 8.5625 43.71875 8.59375 43.703125 8.65625 43.703125 L 8.664062 43.6875 C 8.671875 43.6875 8.671875 43.6875 8.6875 43.6875 C 8.71875 43.671875 8.765625 43.625 8.8125 43.59375 L 8.84375 43.59375 C 8.875 43.5625 8.90625 43.53125 8.9375 43.515625 C 8.9375 43.5 8.953125 43.5 8.953125 43.46875 L 9.046875 43.375 C 9.046875 43.375 9.046875 43.359375 9.0625 43.359375 C 9.078125 43.328125 9.109375 43.265625 9.125 43.21875 L 11.171875 38.375 L 13.21875 43.21875 C 13.234375 43.265625 13.25 43.328125 13.28125 43.359375 C 13.28125 43.359375 13.28125 43.375 13.3125 43.375 L 13.375 43.46875 C 13.390625 43.5 13.390625 43.5 13.40625 43.515625 L 13.453125 43.546875 L 13.515625 43.59375 C 13.515625 43.59375 13.515625 43.59375 13.53125 43.59375 C 13.5625 43.625 13.609375 43.671875 13.671875 43.6875 C 13.6875 43.6875 13.6875 43.6875 13.703125 43.703125 C 13.734375 43.703125 13.765625 43.71875 13.8125 43.734375 L 13.859375 43.734375 L 13.929688 43.746094 L 14 43.75 C 14.0625 43.75 14.109375 43.75 14.15625 43.734375 L 14.1875 43.734375 C 14.234375 43.71875 14.28125 43.703125 14.3125 43.703125 C 14.3125 43.6875 14.328125 43.6875 14.328125 43.6875 L 14.34375 43.6875 C 14.40625 43.671875 14.4375 43.625 14.484375 43.59375 L 14.5 43.59375 C 14.53125 43.5625 14.578125 43.53125 14.609375 43.515625 C 14.609375 43.5 14.625 43.5 14.625 43.46875 C 14.65625 43.4375 14.6875 43.40625 14.703125 43.375 L 14.71875 43.359375 C 14.75 43.328125 14.78125 43.265625 14.796875 43.21875 L 18.625 34.109375 C 18.8125 33.6875 18.609375 33.171875 18.1875 33 C 17.734375 32.8125 17.234375 33.015625 17.046875 33.453125 L 14 40.6875 L 11.984375 35.890625 C 11.828125 35.546875 11.5 35.359375 11.171875 35.359375 C 10.828125 35.359375 10.5 35.546875 10.359375 35.890625 L 8.34375 40.6875 L 5.28125 33.453125 C 5.109375 33.015625 4.59375 32.8125 4.171875 33 C 3.71875 33.171875 3.53125 33.6875 3.703125 34.109375 L 7.546875 43.21875 C 7.578125 43.265625 7.59375 43.328125 7.625 43.359375 L 7.625 43.375 C 7.65625 43.40625 7.671875 43.4375 7.703125 43.46875 C 7.71875 43.5 7.71875 43.5 7.734375 43.515625 L 7.789062 43.546875 L 7.84375 43.59375 C 7.84375 43.59375 7.84375 43.59375 7.859375 43.59375 C 7.890625 43.625 7.953125 43.671875 8 43.6875 C 8.015625 43.6875 8.015625 43.6875 8.03125 43.703125 C 8.0625 43.703125 8.09375 43.71875 8.140625 43.734375 L 8.1875 43.734375 L 8.265625 43.746094 L 8.34375 43.75 C 8.390625 43.75 8.4375 43.75 8.484375 43.734375 Z M 29.03125 43.75 C 29.5 43.75 29.90625 43.359375 29.90625 42.890625 L 29.90625 33.671875 C 29.90625 33.269531 29.609375 32.9375 29.226562 32.839844 L 29.03125 32.8125 L 29.015625 32.8125 C 28.734375 32.8125 28.484375 32.9375 28.3125 33.171875 L 25.203125 37.484375 L 22.09375 33.171875 C 21.9375 32.9375 21.65625 32.8125 21.40625 32.8125 L 21.359375 32.8125 C 20.890625 32.8125 20.5 33.203125 20.5 33.671875 L 20.5 42.890625 C 20.5 43.359375 20.890625 43.75 21.359375 43.75 C 21.84375 43.75 22.234375 43.359375 22.234375 42.890625 L 22.234375 36.3125 L 24.46875 39.4375 C 24.640625 39.671875 24.90625 39.796875 25.1875 39.796875 L 25.21875 39.796875 C 25.5 39.796875 25.75 39.671875 25.921875 39.4375 L 28.171875 36.3125 L 28.171875 42.890625 C 28.171875 43.359375 28.546875 43.75 29.03125 43.75 Z M 37.015625 43.734375 L 37.0625 43.734375 C 37.09375 43.71875 37.125 43.703125 37.1875 43.703125 L 37.195312 43.6875 C 37.203125 43.6875 37.203125 43.6875 37.21875 43.6875 C 37.25 43.671875 37.296875 43.625 37.34375 43.59375 L 37.375 43.59375 C 37.40625 43.5625 37.4375 43.53125 37.46875 43.515625 C 37.46875 43.5 37.484375 43.5 37.484375 43.46875 L 37.578125 43.375 C 37.578125 43.375 37.578125 43.359375 37.59375 43.359375 C 37.609375 43.328125 37.640625 43.265625 37.65625 43.21875 L 39.703125 38.375 L 41.75 43.21875 C 41.765625 43.265625 41.78125 43.328125 41.8125 43.359375 C 41.8125 43.359375 41.8125 43.375 41.84375 43.375 L 41.90625 43.46875 C 41.921875 43.5 41.921875 43.5 41.9375 43.515625 L 41.984375 43.546875 L 42.046875 43.59375 C 42.046875 43.59375 42.046875 43.59375 42.0625 43.59375 C 42.09375 43.625 42.140625 43.671875 42.203125 43.6875 C 42.21875 43.6875 42.21875 43.6875 42.234375 43.703125 C 42.265625 43.703125 42.296875 43.71875 42.34375 43.734375 L 42.390625 43.734375 L 42.460938 43.746094 L 42.53125 43.75 C 42.59375 43.75 42.640625 43.75 42.6875 43.734375 L 42.71875 43.734375 C 42.765625 43.71875 42.8125 43.703125 42.84375 43.703125 C 42.84375 43.6875 42.859375 43.6875 42.859375 43.6875 L 42.875 43.6875 C 42.9375 43.671875 42.96875 43.625 43.015625 43.59375 L 43.03125 43.59375 C 43.0625 43.5625 43.109375 43.53125 43.140625 43.515625 C 43.140625 43.5 43.15625 43.5 43.15625 43.46875 C 43.1875 43.4375 43.21875 43.40625 43.234375 43.375 L 43.25 43.359375 C 43.28125 43.328125 43.3125 43.265625 43.328125 43.21875 L 47.15625 34.109375 C 47.34375 33.6875 47.140625 33.171875 46.71875 33 C 46.265625 32.8125 45.765625 33.015625 45.578125 33.453125 L 42.53125 40.6875 L 40.515625 35.890625 C 40.359375 35.546875 40.03125 35.359375 39.703125 35.359375 C 39.359375 35.359375 39.03125 35.546875 38.890625 35.890625 L 36.875 40.6875 L 33.8125 33.453125 C 33.640625 33.015625 33.125 32.8125 32.703125 33 C 32.25 33.171875 32.0625 33.6875 32.234375 34.109375 L 36.078125 43.21875 C 36.109375 43.265625 36.125 43.328125 36.15625 43.359375 L 36.15625 43.375 C 36.1875 43.40625 36.203125 43.4375 36.234375 43.46875 C 36.25 43.5 36.25 43.5 36.265625 43.515625 L 36.320312 43.546875 L 36.375 43.59375 C 36.375 43.59375 36.375 43.59375 36.390625 43.59375 C 36.421875 43.625 36.484375 43.671875 36.53125 43.6875 C 36.546875 43.6875 36.546875 43.6875 36.5625 43.703125 C 36.59375 43.703125 36.625 43.71875 36.671875 43.734375 L 36.71875 43.734375 L 36.796875 43.746094 L 36.875 43.75 C 36.921875 43.75 36.96875 43.75 37.015625 43.734375 Z M 37.015625 43.734375 \"/>\r\n      </g>`\r\n  },\r\n  xlsIcon: {\r\n    extension: '.xls',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 17.21875 46.875 C 17.425781 46.875 17.632812 46.800781 17.820312 46.667969 C 18.289062 46.351562 18.363281 45.695312 18.042969 45.242188 L 14.480469 40.367188 L 18.042969 35.53125 C 18.363281 35.0625 18.289062 34.425781 17.820312 34.105469 C 17.351562 33.75 16.730469 33.84375 16.375 34.332031 L 13.226562 38.644531 L 10.054688 34.332031 C 9.738281 33.84375 9.082031 33.75 8.632812 34.105469 C 8.164062 34.425781 8.070312 35.0625 8.386719 35.53125 L 11.949219 40.367188 L 8.386719 45.242188 C 8.070312 45.695312 8.164062 46.351562 8.632812 46.667969 C 8.800781 46.800781 9.007812 46.875 9.230469 46.875 C 9.550781 46.875 9.851562 46.707031 10.054688 46.445312 L 13.226562 42.113281 L 16.375 46.445312 C 16.582031 46.707031 16.882812 46.875 17.21875 46.875 Z M 29.351562 46.875 C 29.894531 46.875 30.382812 46.40625 30.382812 45.84375 C 30.382812 45.261719 29.894531 44.792969 29.351562 44.792969 L 24.269531 44.792969 L 24.269531 34.78125 C 24.269531 34.21875 23.800781 33.75 23.21875 33.75 C 22.636719 33.75 22.1875 34.21875 22.1875 34.78125 L 22.1875 45.84375 C 22.1875 46.335938 22.53125 46.757812 23.007812 46.855469 L 23.222656 46.875 Z M 37.28125 46.855469 C 38.613281 46.855469 39.832031 46.460938 40.75 45.789062 C 41.6875 45.113281 42.363281 44.082031 42.363281 42.882812 C 42.363281 42.300781 42.195312 41.738281 41.914062 41.289062 C 41.480469 40.59375 40.804688 40.105469 40.039062 39.730469 C 39.289062 39.375 38.40625 39.132812 37.449219 38.945312 L 37.414062 38.945312 C 36.398438 38.757812 35.554688 38.457031 35.070312 38.117188 C 34.824219 37.949219 34.65625 37.78125 34.5625 37.632812 C 34.46875 37.480469 34.429688 37.332031 34.429688 37.105469 C 34.429688 36.710938 34.636719 36.300781 35.144531 35.925781 C 35.648438 35.550781 36.398438 35.289062 37.242188 35.289062 C 38.386719 35.289062 39.304688 35.851562 40.261719 36.488281 C 40.710938 36.789062 41.3125 36.65625 41.59375 36.207031 C 41.894531 35.773438 41.761719 35.175781 41.332031 34.875 C 40.375 34.257812 39.042969 33.375 37.242188 33.375 C 36.023438 33.375 34.882812 33.730469 34 34.367188 C 33.136719 35.007812 32.5 35.980469 32.5 37.105469 C 32.5 37.667969 32.648438 38.195312 32.929688 38.644531 C 33.34375 39.300781 33.960938 39.769531 34.675781 40.105469 C 35.386719 40.445312 36.210938 40.667969 37.09375 40.835938 L 37.132812 40.835938 C 38.238281 41.042969 39.15625 41.363281 39.699219 41.71875 C 39.980469 41.90625 40.148438 42.09375 40.261719 42.28125 C 40.375 42.46875 40.429688 42.636719 40.429688 42.882812 C 40.429688 43.351562 40.1875 43.820312 39.625 44.230469 C 39.0625 44.644531 38.21875 44.925781 37.28125 44.925781 C 35.949219 44.945312 34.523438 44.15625 33.699219 43.480469 C 33.289062 43.144531 32.667969 43.199219 32.332031 43.613281 C 32.011719 44.023438 32.070312 44.644531 32.480469 44.980469 C 33.550781 45.824219 35.257812 46.835938 37.28125 46.855469 Z M 37.28125 46.855469 \"/>\r\n      </g>`\r\n  },\r\n\r\n  xlsxIcon: {\r\n    extension: '.xlsx',\r\n\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 13.070312 43.75 C 13.242188 43.75 13.414062 43.6875 13.570312 43.578125 C 13.960938 43.3125 14.023438 42.765625 13.757812 42.390625 L 10.789062 38.328125 L 13.757812 34.296875 C 14.023438 33.90625 13.960938 33.375 13.570312 33.109375 C 13.179688 32.8125 12.664062 32.890625 12.367188 33.296875 L 9.742188 36.890625 L 7.101562 33.296875 C 6.835938 32.890625 6.289062 32.8125 5.914062 33.109375 C 5.523438 33.375 5.445312 33.90625 5.710938 34.296875 L 8.679688 38.328125 L 5.710938 42.390625 C 5.445312 42.765625 5.523438 43.3125 5.914062 43.578125 C 6.054688 43.6875 6.226562 43.75 6.414062 43.75 C 6.679688 43.75 6.929688 43.609375 7.101562 43.390625 L 9.742188 39.78125 L 12.367188 43.390625 C 12.539062 43.609375 12.789062 43.75 13.070312 43.75 Z M 23.179688 43.75 C 23.632812 43.75 24.039062 43.359375 24.039062 42.890625 C 24.039062 42.40625 23.632812 42.015625 23.179688 42.015625 L 18.945312 42.015625 L 18.945312 33.671875 C 18.945312 33.203125 18.554688 32.8125 18.070312 32.8125 C 17.585938 32.8125 17.210938 33.203125 17.210938 33.671875 L 17.210938 42.890625 C 17.210938 43.359375 17.585938 43.75 18.070312 43.75 Z M 29.789062 43.734375 C 30.898438 43.734375 31.914062 43.40625 32.679688 42.84375 C 33.460938 42.28125 34.023438 41.421875 34.023438 40.421875 C 34.023438 39.9375 33.882812 39.46875 33.648438 39.09375 C 33.289062 38.515625 32.726562 38.109375 32.085938 37.796875 C 31.460938 37.5 30.726562 37.296875 29.929688 37.140625 L 29.898438 37.140625 C 29.054688 36.984375 28.351562 36.734375 27.945312 36.453125 C 27.742188 36.3125 27.601562 36.171875 27.523438 36.046875 C 27.445312 35.921875 27.414062 35.796875 27.414062 35.609375 C 27.414062 35.28125 27.585938 34.9375 28.007812 34.625 C 28.429688 34.3125 29.054688 34.09375 29.757812 34.09375 C 30.710938 34.09375 31.476562 34.5625 32.273438 35.09375 C 32.648438 35.34375 33.148438 35.234375 33.382812 34.859375 C 33.632812 34.5 33.523438 34 33.164062 33.75 C 32.367188 33.234375 31.257812 32.5 29.757812 32.5 C 28.742188 32.5 27.789062 32.796875 27.054688 33.328125 C 26.335938 33.859375 25.804688 34.671875 25.804688 35.609375 C 25.804688 36.078125 25.929688 36.515625 26.164062 36.890625 C 26.507812 37.4375 27.023438 37.828125 27.617188 38.109375 C 28.210938 38.390625 28.898438 38.578125 29.632812 38.71875 L 29.664062 38.71875 C 30.585938 38.890625 31.351562 39.15625 31.804688 39.453125 C 32.039062 39.609375 32.179688 39.765625 32.273438 39.921875 C 32.367188 40.078125 32.414062 40.21875 32.414062 40.421875 C 32.414062 40.8125 32.210938 41.203125 31.742188 41.546875 C 31.273438 41.890625 30.570312 42.125 29.789062 42.125 C 28.679688 42.140625 27.492188 41.484375 26.804688 40.921875 C 26.460938 40.640625 25.945312 40.6875 25.664062 41.03125 C 25.398438 41.375 25.445312 41.890625 25.789062 42.171875 C 26.679688 42.875 28.101562 43.71875 29.789062 43.734375 Z M 43.179688 43.75 C 43.351562 43.75 43.523438 43.6875 43.679688 43.578125 C 44.070312 43.3125 44.132812 42.765625 43.867188 42.390625 L 40.898438 38.328125 L 43.867188 34.296875 C 44.132812 33.90625 44.070312 33.375 43.679688 33.109375 C 43.289062 32.8125 42.773438 32.890625 42.476562 33.296875 L 39.851562 36.890625 L 37.210938 33.296875 C 36.945312 32.890625 36.398438 32.8125 36.023438 33.109375 C 35.632812 33.375 35.554688 33.90625 35.820312 34.296875 L 38.789062 38.328125 L 35.820312 42.390625 C 35.554688 42.765625 35.632812 43.3125 36.023438 43.578125 C 36.164062 43.6875 36.335938 43.75 36.523438 43.75 C 36.789062 43.75 37.039062 43.609375 37.210938 43.390625 L 39.851562 39.78125 L 42.476562 43.390625 C 42.648438 43.609375 42.898438 43.75 43.179688 43.75 Z M 43.179688 43.75 \"/>\r\n      </g>`\r\n  },\r\n  zipIcon: {\r\n    extension: '.zip',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 20.175781 46.875 C 20.855469 46.875 21.402344 46.351562 21.402344 45.671875 C 21.402344 44.992188 20.855469 44.445312 20.175781 44.445312 L 13.132812 44.445312 L 21.183594 33.488281 L 21.183594 33.445312 C 21.203125 33.421875 21.226562 33.378906 21.25 33.335938 C 21.269531 33.3125 21.269531 33.289062 21.292969 33.269531 C 21.3125 33.203125 21.3125 33.179688 21.335938 33.136719 C 21.335938 33.09375 21.378906 33.070312 21.378906 33.007812 C 21.378906 32.984375 21.378906 32.960938 21.402344 32.917969 L 21.402344 32.679688 C 21.402344 32.632812 21.402344 32.613281 21.378906 32.546875 C 21.378906 32.503906 21.378906 32.480469 21.335938 32.4375 C 21.335938 32.414062 21.3125 32.371094 21.3125 32.304688 C 21.292969 32.285156 21.269531 32.242188 21.269531 32.21875 C 21.25 32.195312 21.226562 32.152344 21.203125 32.109375 C 21.183594 32.066406 21.160156 32.042969 21.117188 32.023438 C 21.09375 32 21.074219 31.957031 21.050781 31.933594 C 21.03125 31.914062 21.007812 31.867188 20.964844 31.847656 C 20.941406 31.824219 20.941406 31.804688 20.898438 31.78125 L 20.875 31.78125 C 20.832031 31.757812 20.8125 31.738281 20.765625 31.714844 C 20.746094 31.695312 20.722656 31.648438 20.65625 31.648438 L 20.570312 31.605469 L 20.4375 31.585938 C 20.417969 31.585938 20.375 31.5625 20.351562 31.5625 L 10.75 31.5625 C 10.070312 31.5625 9.546875 32.085938 9.546875 32.765625 C 9.546875 33.421875 10.070312 33.992188 10.75 33.992188 L 17.8125 33.992188 L 9.785156 44.972656 L 9.765625 44.972656 C 9.742188 45.015625 9.71875 45.058594 9.699219 45.082031 C 9.699219 45.101562 9.675781 45.148438 9.632812 45.167969 C 9.632812 45.210938 9.609375 45.257812 9.609375 45.277344 C 9.589844 45.320312 9.589844 45.367188 9.566406 45.386719 L 9.566406 45.496094 C 9.546875 45.539062 9.546875 45.585938 9.546875 45.648438 L 9.546875 45.738281 C 9.546875 45.78125 9.566406 45.824219 9.566406 45.890625 C 9.566406 45.933594 9.589844 45.957031 9.589844 45.976562 L 9.632812 46.109375 C 9.632812 46.152344 9.675781 46.175781 9.699219 46.21875 C 9.699219 46.242188 9.71875 46.261719 9.742188 46.328125 C 9.765625 46.351562 9.785156 46.394531 9.808594 46.414062 C 9.828125 46.4375 9.851562 46.460938 9.894531 46.480469 L 9.9375 46.542969 L 9.984375 46.589844 C 10.003906 46.613281 10.027344 46.632812 10.046875 46.632812 L 10.046875 46.65625 C 10.070312 46.679688 10.09375 46.679688 10.136719 46.699219 C 10.179688 46.722656 10.222656 46.742188 10.246094 46.742188 C 10.265625 46.789062 10.289062 46.789062 10.3125 46.808594 C 10.375 46.808594 10.421875 46.832031 10.464844 46.832031 C 10.484375 46.851562 10.507812 46.851562 10.53125 46.851562 L 10.648438 46.871094 Z M 26.214844 46.875 C 26.871094 46.875 27.4375 46.351562 27.4375 45.671875 L 27.4375 32.765625 C 27.4375 32.085938 26.871094 31.5625 26.214844 31.5625 C 25.535156 31.5625 25.011719 32.085938 25.011719 32.765625 L 25.011719 45.671875 C 25.011719 46.351562 25.535156 46.875 26.214844 46.875 Z M 32.734375 46.875 C 33.410156 46.875 33.957031 46.328125 33.957031 45.671875 L 33.957031 40.925781 L 36.648438 40.925781 C 39.25 40.925781 41.351562 38.824219 41.351562 36.265625 C 41.351562 33.664062 39.25 31.5625 36.648438 31.5625 L 32.734375 31.5625 C 32.078125 31.5625 31.53125 32.085938 31.53125 32.765625 L 31.53125 45.671875 C 31.53125 46.328125 32.078125 46.875 32.734375 46.875 Z M 36.648438 38.496094 L 33.957031 38.496094 L 33.957031 33.992188 L 36.648438 33.992188 C 37.917969 33.992188 38.902344 34.996094 38.921875 36.265625 C 38.902344 37.492188 37.917969 38.496094 36.648438 38.496094 Z M 36.648438 38.496094 \"/>\r\n      </g>`\r\n  },\r\n  docxIcon: {\r\n    extension: '.docx',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.789062 43.75 C 9.589844 43.75 10.988281 43.269531 11.984375 42.304688 C 12.980469 41.339844 13.476562 39.984375 13.476562 38.234375 C 13.476562 36.496094 12.980469 35.144531 11.984375 34.179688 C 10.988281 33.214844 9.589844 32.734375 7.789062 32.734375 L 4.695312 32.734375 C 4.394531 32.734375 4.15625 32.816406 3.984375 32.984375 C 3.8125 33.152344 3.726562 33.386719 3.726562 33.6875 L 3.726562 42.796875 C 3.726562 43.097656 3.8125 43.332031 3.984375 43.5 C 4.15625 43.667969 4.394531 43.75 4.695312 43.75 Z M 7.664062 42.109375 L 5.742188 42.109375 L 5.742188 34.375 L 7.664062 34.375 C 10.195312 34.375 11.460938 35.660156 11.460938 38.234375 C 11.460938 40.816406 10.195312 42.109375 7.664062 42.109375 Z M 20.414062 43.890625 C 21.476562 43.890625 22.402344 43.660156 23.1875 43.203125 C 23.972656 42.746094 24.582031 42.089844 25.007812 41.234375 C 25.433594 40.378906 25.648438 39.378906 25.648438 38.234375 C 25.648438 37.089844 25.4375 36.089844 25.015625 35.242188 C 24.59375 34.394531 23.988281 33.738281 23.203125 33.28125 C 22.417969 32.824219 21.488281 32.59375 20.414062 32.59375 C 19.339844 32.59375 18.410156 32.824219 17.617188 33.28125 C 16.824219 33.738281 16.21875 34.394531 15.796875 35.242188 C 15.375 36.089844 15.164062 37.089844 15.164062 38.234375 C 15.164062 39.378906 15.378906 40.378906 15.804688 41.234375 C 16.230469 42.089844 16.839844 42.746094 17.625 43.203125 C 18.410156 43.660156 19.339844 43.890625 20.414062 43.890625 Z M 20.414062 42.28125 C 19.394531 42.28125 18.597656 41.933594 18.03125 41.234375 C 17.464844 40.535156 17.179688 39.535156 17.179688 38.234375 C 17.179688 36.933594 17.464844 35.933594 18.03125 35.242188 C 18.597656 34.550781 19.394531 34.203125 20.414062 34.203125 C 21.425781 34.203125 22.214844 34.550781 22.78125 35.242188 C 23.347656 35.933594 23.632812 36.933594 23.632812 38.234375 C 23.632812 39.535156 23.347656 40.535156 22.78125 41.234375 C 22.214844 41.933594 21.425781 42.28125 20.414062 42.28125 Z M 32.601562 43.890625 C 33.289062 43.890625 33.933594 43.789062 34.539062 43.585938 C 35.144531 43.382812 35.679688 43.089844 36.148438 42.703125 C 36.285156 42.597656 36.378906 42.488281 36.429688 42.367188 C 36.480469 42.246094 36.507812 42.109375 36.507812 41.953125 C 36.507812 41.722656 36.445312 41.53125 36.320312 41.375 C 36.195312 41.21875 36.042969 41.140625 35.867188 41.140625 C 35.753906 41.140625 35.644531 41.160156 35.539062 41.203125 C 35.433594 41.246094 35.332031 41.296875 35.226562 41.359375 C 34.746094 41.683594 34.316406 41.910156 33.9375 42.046875 C 33.558594 42.183594 33.144531 42.25 32.695312 42.25 C 31.613281 42.25 30.792969 41.910156 30.234375 41.234375 C 29.675781 40.558594 29.398438 39.558594 29.398438 38.234375 C 29.398438 36.921875 29.675781 35.925781 30.234375 35.25 C 30.792969 34.574219 31.613281 34.234375 32.695312 34.234375 C 33.164062 34.234375 33.589844 34.300781 33.976562 34.429688 C 34.363281 34.558594 34.777344 34.792969 35.226562 35.125 C 35.445312 35.269531 35.660156 35.34375 35.867188 35.34375 C 36.042969 35.34375 36.195312 35.265625 36.320312 35.109375 C 36.445312 34.953125 36.507812 34.761719 36.507812 34.53125 C 36.507812 34.363281 36.480469 34.222656 36.429688 34.109375 C 36.378906 33.996094 36.285156 33.886719 36.148438 33.78125 C 35.679688 33.394531 35.144531 33.101562 34.539062 32.898438 C 33.933594 32.695312 33.289062 32.59375 32.601562 32.59375 C 31.539062 32.59375 30.609375 32.824219 29.8125 33.28125 C 29.015625 33.738281 28.402344 34.394531 27.976562 35.242188 C 27.550781 36.089844 27.335938 37.089844 27.335938 38.234375 C 27.335938 39.378906 27.550781 40.378906 27.976562 41.234375 C 28.402344 42.089844 29.015625 42.746094 29.8125 43.203125 C 30.609375 43.660156 31.539062 43.890625 32.601562 43.890625 Z M 46.132812 43.84375 C 46.382812 43.84375 46.605469 43.75 46.796875 43.5625 C 46.988281 43.375 47.085938 43.15625 47.085938 42.90625 C 47.085938 42.707031 47.003906 42.511719 46.835938 42.3125 L 43.445312 38.15625 L 46.710938 34.171875 C 46.867188 34.003906 46.945312 33.808594 46.945312 33.578125 C 46.945312 33.328125 46.847656 33.113281 46.65625 32.929688 C 46.464844 32.746094 46.242188 32.65625 45.992188 32.65625 C 45.730469 32.65625 45.507812 32.769531 45.320312 33 L 42.273438 36.765625 L 39.226562 33 C 39.027344 32.769531 38.800781 32.65625 38.539062 32.65625 C 38.289062 32.65625 38.070312 32.746094 37.882812 32.929688 C 37.695312 33.113281 37.601562 33.328125 37.601562 33.578125 C 37.601562 33.808594 37.679688 34.003906 37.835938 34.171875 L 41.101562 38.15625 L 37.695312 42.3125 C 37.539062 42.5 37.460938 42.699219 37.460938 42.90625 C 37.460938 43.15625 37.558594 43.371094 37.75 43.554688 C 37.941406 43.738281 38.164062 43.828125 38.414062 43.828125 C 38.675781 43.828125 38.898438 43.71875 39.085938 43.5 L 42.273438 39.5625 L 45.445312 43.5 C 45.644531 43.730469 45.871094 43.84375 46.132812 43.84375 Z M 46.132812 43.84375 \"/>\r\n      </g>`\r\n  },\r\n  jpgIcon: {\r\n    extension: '.jpg',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.789062 47.007812 L 9.488281 46.960938 C 12.214844 46.757812 13.578125 45.277344 13.578125 42.523438 L 13.578125 32.742188 C 13.578125 32.320312 13.453125 31.980469 13.195312 31.726562 C 12.941406 31.472656 12.59375 31.34375 12.15625 31.34375 C 11.734375 31.34375 11.394531 31.472656 11.140625 31.726562 C 10.886719 31.980469 10.757812 32.320312 10.757812 32.742188 L 10.757812 42.523438 C 10.757812 43.238281 10.605469 43.769531 10.296875 44.117188 C 9.992188 44.46875 9.539062 44.660156 8.941406 44.6875 L 8.242188 44.730469 C 7.847656 44.761719 7.558594 44.867188 7.378906 45.046875 C 7.195312 45.230469 7.105469 45.496094 7.105469 45.847656 C 7.105469 46.664062 7.667969 47.050781 8.789062 47.007812 Z M 18.304688 47.007812 C 18.742188 47.007812 19.089844 46.878906 19.34375 46.625 C 19.597656 46.367188 19.726562 46.023438 19.726562 45.585938 L 19.726562 40.882812 L 23.640625 40.882812 C 25.289062 40.882812 26.574219 40.464844 27.492188 39.632812 C 28.410156 38.804688 28.871094 37.644531 28.871094 36.15625 C 28.871094 34.667969 28.410156 33.511719 27.492188 32.6875 C 26.574219 31.863281 25.289062 31.453125 23.640625 31.453125 L 18.261719 31.453125 C 17.839844 31.453125 17.507812 31.570312 17.265625 31.804688 C 17.023438 32.035156 16.90625 32.363281 16.90625 32.789062 L 16.90625 45.585938 C 16.90625 46.023438 17.03125 46.367188 17.289062 46.625 C 17.542969 46.878906 17.882812 47.007812 18.304688 47.007812 Z M 23.292969 38.714844 L 19.726562 38.714844 L 19.726562 33.640625 L 23.292969 33.640625 C 25.230469 33.640625 26.203125 34.488281 26.203125 36.179688 C 26.203125 37.871094 25.230469 38.714844 23.292969 38.714844 Z M 38.605469 47.070312 C 39.320312 47.070312 40.0625 47.011719 40.835938 46.898438 C 41.609375 46.78125 42.285156 46.621094 42.871094 46.414062 C 43.410156 46.242188 43.765625 46.015625 43.941406 45.738281 C 44.117188 45.460938 44.203125 44.988281 44.203125 44.316406 L 44.203125 39.613281 C 44.203125 39.292969 44.101562 39.03125 43.898438 38.835938 C 43.695312 38.640625 43.425781 38.539062 43.089844 38.539062 L 39.21875 38.539062 C 38.867188 38.539062 38.59375 38.628906 38.398438 38.804688 C 38.199219 38.976562 38.101562 39.226562 38.101562 39.546875 C 38.101562 39.867188 38.199219 40.117188 38.398438 40.289062 C 38.59375 40.464844 38.867188 40.554688 39.21875 40.554688 L 41.6875 40.554688 L 41.6875 44.425781 C 40.699219 44.703125 39.707031 44.839844 38.714844 44.839844 C 35.390625 44.839844 33.726562 42.945312 33.726562 39.152344 C 33.726562 37.300781 34.132812 35.90625 34.941406 34.964844 C 35.75 34.023438 36.949219 33.554688 38.539062 33.554688 C 39.238281 33.554688 39.867188 33.644531 40.421875 33.828125 C 40.972656 34.007812 41.574219 34.324219 42.214844 34.777344 C 42.390625 34.894531 42.542969 34.980469 42.671875 35.03125 C 42.804688 35.082031 42.949219 35.105469 43.109375 35.105469 C 43.359375 35.105469 43.570312 34.996094 43.746094 34.777344 C 43.921875 34.558594 44.007812 34.289062 44.007812 33.96875 C 44.007812 33.75 43.96875 33.558594 43.886719 33.398438 C 43.808594 33.238281 43.679688 33.078125 43.503906 32.917969 C 42.191406 31.808594 40.507812 31.257812 38.453125 31.257812 C 36.90625 31.257812 35.5625 31.574219 34.425781 32.207031 C 33.289062 32.84375 32.410156 33.753906 31.789062 34.941406 C 31.171875 36.128906 30.859375 37.535156 30.859375 39.152344 C 30.859375 40.800781 31.171875 42.21875 31.789062 43.40625 C 32.410156 44.597656 33.304688 45.503906 34.46875 46.132812 C 35.636719 46.757812 37.015625 47.070312 38.605469 47.070312 Z M 38.605469 47.070312 \"/>\r\n      </g>`\r\n  },\r\n  mp3Icon: {\r\n    extension: '.mp3',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 43.828125 43.710938 C 43.605469 44.28125 43.273438 44.804688 42.84375 45.265625 C 42.40625 45.730469 41.867188 46.113281 41.242188 46.398438 C 40.597656 46.699219 39.851562 46.855469 39.027344 46.855469 C 38.328125 46.855469 37.703125 46.757812 37.160156 46.570312 C 36.609375 46.378906 36.160156 46.136719 35.769531 45.839844 C 35.386719 45.550781 35.050781 45.210938 34.796875 44.832031 C 34.570312 44.507812 34.394531 44.195312 34.265625 43.890625 C 34.140625 43.59375 34.054688 43.335938 33.996094 43.101562 C 33.792969 42.261719 34.304688 41.417969 35.140625 41.210938 C 35.980469 41.007812 36.828125 41.519531 37.03125 42.355469 C 37.039062 42.390625 37.066406 42.488281 37.144531 42.671875 C 37.191406 42.777344 37.265625 42.914062 37.371094 43.0625 C 37.4375 43.160156 37.53125 43.257812 37.65625 43.351562 C 37.792969 43.453125 37.972656 43.542969 38.195312 43.625 C 38.332031 43.667969 38.59375 43.730469 39.027344 43.730469 C 39.390625 43.730469 39.695312 43.675781 39.925781 43.566406 C 40.1875 43.445312 40.398438 43.300781 40.558594 43.132812 C 40.71875 42.957031 40.839844 42.773438 40.914062 42.578125 C 40.996094 42.371094 41.03125 42.195312 41.03125 42.023438 C 41.03125 41.789062 41 41.585938 40.921875 41.398438 C 40.871094 41.257812 40.785156 41.148438 40.660156 41.039062 C 40.515625 40.910156 40.296875 40.792969 40.011719 40.699219 C 39.6875 40.59375 39.253906 40.539062 38.738281 40.535156 C 37.882812 40.527344 37.1875 39.832031 37.1875 38.972656 L 37.1875 38.832031 C 37.1875 37.984375 37.859375 37.292969 38.699219 37.265625 C 39.070312 37.257812 39.398438 37.195312 39.679688 37.101562 C 39.921875 37.011719 40.121094 36.902344 40.273438 36.773438 C 40.40625 36.652344 40.507812 36.519531 40.582031 36.359375 C 40.652344 36.210938 40.6875 36.027344 40.6875 35.8125 C 40.6875 35.523438 40.644531 35.289062 40.574219 35.125 C 40.5 34.96875 40.414062 34.847656 40.304688 34.757812 C 40.1875 34.660156 40.042969 34.582031 39.867188 34.53125 C 39.402344 34.386719 38.878906 34.398438 38.480469 34.542969 C 38.289062 34.617188 38.121094 34.714844 37.976562 34.84375 C 37.820312 34.984375 37.695312 35.148438 37.59375 35.339844 C 37.484375 35.550781 37.40625 35.773438 37.367188 36.039062 C 37.230469 36.890625 36.429688 37.472656 35.574219 37.335938 C 34.722656 37.195312 34.140625 36.398438 34.28125 35.542969 C 34.378906 34.9375 34.5625 34.378906 34.835938 33.871094 C 35.109375 33.355469 35.464844 32.898438 35.890625 32.519531 C 36.320312 32.132812 36.824219 31.828125 37.382812 31.617188 C 38.433594 31.226562 39.667969 31.199219 40.78125 31.539062 C 41.351562 31.714844 41.863281 31.992188 42.308594 32.355469 C 42.777344 32.753906 43.148438 33.242188 43.414062 33.824219 C 43.679688 34.402344 43.8125 35.070312 43.8125 35.8125 C 43.8125 36.476562 43.679688 37.097656 43.421875 37.660156 C 43.25 38.046875 43.023438 38.394531 42.746094 38.707031 C 43.242188 39.148438 43.609375 39.671875 43.835938 40.261719 C 44.046875 40.804688 44.15625 41.398438 44.15625 42.023438 C 44.15625 42.578125 44.046875 43.148438 43.828125 43.710938 Z M 31.445312 38.492188 C 31.148438 39.140625 30.734375 39.703125 30.199219 40.164062 C 29.6875 40.605469 29.078125 40.957031 28.390625 41.199219 C 27.71875 41.4375 26.976562 41.5625 26.191406 41.5625 L 25 41.5625 L 25 45 C 25 45.859375 24.296875 46.5625 23.4375 46.5625 C 22.578125 46.5625 21.875 45.859375 21.875 45 L 21.875 32.8125 C 21.875 31.945312 22.578125 31.25 23.4375 31.25 L 26.191406 31.25 C 27.890625 31.25 29.257812 31.667969 30.253906 32.5 C 31.339844 33.398438 31.886719 34.714844 31.886719 36.40625 C 31.886719 37.148438 31.738281 37.851562 31.445312 38.492188 Z M 18.730469 45.210938 C 18.730469 46.070312 18.03125 46.773438 17.167969 46.773438 C 16.300781 46.773438 15.605469 46.070312 15.605469 45.210938 L 15.605469 39.28125 L 14.015625 43.140625 C 14.007812 43.164062 13.996094 43.191406 13.984375 43.214844 C 13.71875 43.777344 13.15625 44.117188 12.566406 44.117188 L 12.53125 44.117188 C 11.9375 44.117188 11.375 43.777344 11.109375 43.214844 L 11.082031 43.160156 L 9.339844 39.101562 L 9.339844 45.210938 C 9.339844 46.070312 8.640625 46.773438 7.777344 46.773438 C 6.910156 46.773438 6.214844 46.070312 6.214844 45.210938 L 6.214844 32.824219 C 6.214844 31.960938 6.910156 31.261719 7.777344 31.261719 L 7.835938 31.261719 C 8.472656 31.261719 9.046875 31.617188 9.335938 32.1875 L 12.527344 39.09375 L 15.59375 32.207031 C 15.894531 31.617188 16.46875 31.261719 17.105469 31.261719 L 17.167969 31.261719 C 18.03125 31.261719 18.730469 31.960938 18.730469 32.824219 Z M 41.382812 28.125 L 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.136719 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.136719 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 41.382812 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 28.257812 34.902344 C 27.835938 34.550781 27.140625 34.375 26.191406 34.375 L 25 34.375 L 25 38.4375 L 26.191406 38.4375 C 26.621094 38.4375 27.007812 38.375 27.34375 38.253906 C 27.667969 38.140625 27.929688 37.992188 28.148438 37.804688 C 28.34375 37.632812 28.492188 37.4375 28.601562 37.195312 C 28.710938 36.964844 28.757812 36.703125 28.757812 36.40625 C 28.757812 35.324219 28.382812 35.003906 28.257812 34.902344 \"/>\r\n      <path style=\"fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(99.607843%,99.607843%,99.607843%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 11.34125 13.57875 C 11.345 13.5925 11.3525 13.62375 11.36375 13.67375 C 11.3775 13.7225 11.3975 13.78125 11.42625 13.85 C 11.45375 13.9175 11.49375 13.9875 11.54625 14.0625 C 11.5975 14.13875 11.66625 14.20875 11.75 14.27125 C 11.83375 14.33625 11.9375 14.38875 12.0575 14.43125 C 12.1775 14.4725 12.32 14.49375 12.4875 14.49375 C 12.67875 14.49375 12.845 14.46125 12.9875 14.39375 C 13.13 14.32875 13.24875 14.245 13.34375 14.1425 C 13.43875 14.0425 13.51125 13.93 13.55875 13.8075 C 13.6075 13.6825 13.63125 13.56375 13.63125 13.4475 C 13.63125 13.31125 13.6075 13.1825 13.5625 13.065 C 13.515 12.9475 13.4425 12.845 13.3425 12.7575 C 13.2425 12.67 13.115 12.6 12.96 12.55 C 12.805 12.49875 12.6175 12.4725 12.4 12.4725 L 12.4 12.42625 C 12.57 12.42 12.72375 12.3925 12.8625 12.34375 C 13.0025 12.29625 13.11875 12.2275 13.21625 12.14375 C 13.31375 12.05875 13.3875 11.96 13.44125 11.845 C 13.4925 11.7275 13.52 11.60125 13.52 11.46 C 13.52 11.29375 13.4925 11.1525 13.43875 11.0325 C 13.38375 10.91375 13.31125 10.81625 13.21875 10.74 C 13.1275 10.66375 13.0225 10.6075 12.90375 10.5725 C 12.78625 10.535 12.66375 10.5175 12.5375 10.5175 C 12.395 10.5175 12.26125 10.54 12.14 10.58625 C 12.0175 10.6325 11.91 10.69625 11.81875 10.77875 C 11.72625 10.8625 11.64875 10.96 11.5875 11.07375 C 11.5275 11.18875 11.48625 11.315 11.4625 11.45375 M 7.5 14.4 L 7.5 10.5 L 8.3825 10.5 C 8.8075 10.5 9.13375 10.595 9.3625 10.78375 C 9.59 10.975 9.7025 11.2625 9.7025 11.65 C 9.7025 11.81625 9.6725 11.97125 9.6075 12.11125 C 9.5425 12.2525 9.4525 12.37375 9.335 12.475 C 9.21875 12.5775 9.0775 12.65625 8.9175 12.71375 C 8.75625 12.77125 8.5775 12.8 8.3825 12.8 L 7.6 12.8 M 2.4875 14.4675 L 2.4875 10.50375 L 2.5075 10.50375 C 2.5225 10.50375 2.53375 10.5125 2.5425 10.52625 L 3.9925 13.58625 C 3.99875 13.5975 4.005 13.6075 4.00875 13.6175 M 4.02125 13.6175 C 4.02625 13.6075 4.03125 13.5975 4.0375 13.58625 L 5.44 10.52625 C 5.4475 10.5125 5.45875 10.50375 5.4725 10.50375 L 5.4925 10.50375 L 5.4925 14.4675 \" transform=\"matrix(3.125,0,0,3.125,0,0)\"/>\r\n      </g>`\r\n  },\r\n  mp4Icon: {\r\n    extension: '.mp4',\r\n    path: `<g id=\"surface6\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 36.898438 40.625 L 40.625 35.480469 L 40.625 40.625 Z M 28.761719 36.40625 C 28.761719 36.703125 28.707031 36.964844 28.605469 37.195312 C 28.496094 37.433594 28.347656 37.632812 28.148438 37.804688 C 27.929688 37.992188 27.667969 38.144531 27.34375 38.257812 C 27.003906 38.375 26.621094 38.4375 26.191406 38.4375 L 25 38.4375 L 25 34.375 L 26.191406 34.375 C 27.140625 34.375 27.835938 34.554688 28.253906 34.902344 C 28.378906 35.007812 28.761719 35.324219 28.761719 36.40625 Z M 44.6875 43.75 L 43.75 43.75 L 43.75 45.3125 C 43.75 46.175781 43.050781 46.875 42.1875 46.875 C 41.324219 46.875 40.625 46.175781 40.625 45.3125 L 40.625 43.75 L 34.066406 43.75 C 33.199219 43.75 32.503906 43.050781 32.503906 42.1875 L 32.503906 41.875 C 32.503906 41.546875 32.605469 41.226562 32.800781 40.957031 L 39.363281 31.898438 C 39.660156 31.492188 40.128906 31.25 40.628906 31.25 L 42.1875 31.25 C 43.050781 31.25 43.75 31.949219 43.75 32.8125 L 43.75 40.625 L 44.6875 40.625 C 45.550781 40.625 46.25 41.324219 46.25 42.1875 C 46.25 43.050781 45.550781 43.75 44.6875 43.75 Z M 31.445312 38.492188 C 31.148438 39.140625 30.730469 39.703125 30.195312 40.167969 C 29.6875 40.605469 29.082031 40.957031 28.390625 41.203125 C 27.71875 41.441406 26.976562 41.5625 26.191406 41.5625 L 25 41.5625 L 25 45 C 25 45.863281 24.300781 46.5625 23.4375 46.5625 C 22.578125 46.5625 21.875 45.863281 21.875 45 L 21.875 32.8125 C 21.875 31.949219 22.578125 31.25 23.4375 31.25 L 26.191406 31.25 C 27.890625 31.25 29.257812 31.671875 30.253906 32.5 C 31.339844 33.398438 31.886719 34.714844 31.886719 36.40625 C 31.886719 37.148438 31.738281 37.851562 31.445312 38.492188 Z M 18.730469 45.210938 C 18.730469 46.070312 18.027344 46.773438 17.167969 46.773438 C 16.300781 46.773438 15.605469 46.070312 15.605469 45.210938 L 15.605469 39.6875 L 14.035156 43.105469 C 14.019531 43.144531 14.003906 43.179688 13.984375 43.214844 C 13.71875 43.78125 13.15625 44.117188 12.566406 44.117188 L 12.53125 44.117188 C 11.941406 44.117188 11.378906 43.78125 11.113281 43.214844 C 11.097656 43.183594 11.078125 43.152344 11.066406 43.125 L 9.339844 39.484375 L 9.339844 45.210938 C 9.339844 46.070312 8.640625 46.773438 7.777344 46.773438 C 6.910156 46.773438 6.214844 46.070312 6.214844 45.210938 L 6.214844 32.824219 C 6.214844 31.960938 6.910156 31.261719 7.777344 31.261719 L 7.835938 31.261719 C 8.472656 31.261719 9.046875 31.617188 9.335938 32.191406 L 9.355469 32.226562 L 12.523438 38.90625 L 15.578125 32.242188 C 15.585938 32.226562 15.597656 32.210938 15.605469 32.191406 C 15.894531 31.617188 16.46875 31.261719 17.105469 31.261719 L 17.164062 31.261719 C 18.027344 31.261719 18.726562 31.960938 18.726562 32.824219 L 18.726562 45.210938 Z M 41.382812 28.125 L 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 41.382812 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface6\" mask=\"url(#mask0)\"/>\r\n      <path style=\"fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(99.607843%,99.607843%,99.607843%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 14.3 13.5 L 10.90125 13.5 L 10.90125 13.4 L 13.00125 10.5 L 13.5 10.5 L 13.5 14.5 M 7.5 14.4 L 7.5 10.5 L 8.3825 10.5 C 8.8075 10.5 9.13375 10.595 9.3625 10.78375 C 9.59 10.975 9.7025 11.2625 9.7025 11.65 C 9.7025 11.81625 9.6725 11.97125 9.6075 12.11125 C 9.5425 12.2525 9.4525 12.37375 9.335 12.47625 C 9.21875 12.5775 9.0775 12.65625 8.9175 12.71375 C 8.75625 12.77125 8.5775 12.8 8.3825 12.8 L 7.6 12.8 M 2.4875 14.4675 L 2.4875 10.50375 L 2.5075 10.50375 C 2.5225 10.50375 2.53375 10.5125 2.5425 10.52625 L 3.9925 13.58625 C 3.99875 13.5975 4.005 13.6075 4.00875 13.6175 M 4.02125 13.6175 C 4.02625 13.6075 4.03125 13.5975 4.0375 13.58625 L 5.44 10.52625 C 5.4475 10.5125 5.45875 10.50375 5.4725 10.50375 L 5.4925 10.50375 L 5.4925 14.4675 \" transform=\"matrix(3.125,0,0,3.125,0,0)\"/>\r\n      </g>`\r\n  },\r\n  oggIcon: {\r\n    extension: '.ogg',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.976562 47.070312 C 10.464844 47.070312 11.757812 46.75 12.859375 46.109375 C 13.960938 45.46875 14.808594 44.550781 15.40625 43.351562 C 16.003906 42.15625 16.304688 40.757812 16.304688 39.152344 C 16.304688 37.550781 16.007812 36.152344 15.417969 34.964844 C 14.828125 33.777344 13.980469 32.859375 12.882812 32.21875 C 11.78125 31.578125 10.480469 31.257812 8.976562 31.257812 C 7.472656 31.257812 6.167969 31.578125 5.0625 32.21875 C 3.953125 32.859375 3.101562 33.777344 2.511719 34.964844 C 1.921875 36.152344 1.625 37.550781 1.625 39.152344 C 1.625 40.757812 1.925781 42.15625 2.523438 43.351562 C 3.121094 44.550781 3.972656 45.46875 5.070312 46.109375 C 6.171875 46.75 7.472656 47.070312 8.976562 47.070312 Z M 8.976562 44.820312 C 7.546875 44.820312 6.433594 44.332031 5.640625 43.351562 C 4.847656 42.375 4.449219 40.976562 4.449219 39.152344 C 4.449219 37.332031 4.847656 35.933594 5.640625 34.964844 C 6.433594 33.996094 7.546875 33.507812 8.976562 33.507812 C 10.390625 33.507812 11.496094 33.996094 12.289062 34.964844 C 13.085938 35.933594 13.484375 37.332031 13.484375 39.152344 C 13.484375 40.976562 13.085938 42.375 12.289062 43.351562 C 11.496094 44.332031 10.390625 44.820312 8.976562 44.820312 Z M 26.410156 47.070312 C 27.125 47.070312 27.871094 47.011719 28.640625 46.898438 C 29.414062 46.78125 30.09375 46.621094 30.675781 46.414062 C 31.214844 46.242188 31.574219 46.015625 31.75 45.738281 C 31.921875 45.460938 32.011719 44.988281 32.011719 44.316406 L 32.011719 39.613281 C 32.011719 39.292969 31.910156 39.03125 31.703125 38.835938 C 31.5 38.640625 31.230469 38.539062 30.894531 38.539062 L 27.023438 38.539062 C 26.671875 38.539062 26.398438 38.628906 26.203125 38.804688 C 26.007812 38.976562 25.90625 39.226562 25.90625 39.546875 C 25.90625 39.867188 26.007812 40.117188 26.203125 40.289062 C 26.398438 40.464844 26.671875 40.554688 27.023438 40.554688 L 29.496094 40.554688 L 29.496094 44.425781 C 28.503906 44.703125 27.511719 44.839844 26.519531 44.839844 C 23.195312 44.839844 21.53125 42.945312 21.53125 39.152344 C 21.53125 37.300781 21.9375 35.90625 22.746094 34.964844 C 23.554688 34.023438 24.753906 33.554688 26.34375 33.554688 C 27.046875 33.554688 27.671875 33.644531 28.226562 33.828125 C 28.78125 34.007812 29.378906 34.324219 30.019531 34.777344 C 30.195312 34.894531 30.347656 34.980469 30.480469 35.03125 C 30.609375 35.082031 30.757812 35.105469 30.917969 35.105469 C 31.164062 35.105469 31.375 34.996094 31.550781 34.777344 C 31.726562 34.558594 31.8125 34.289062 31.8125 33.96875 C 31.8125 33.75 31.773438 33.558594 31.695312 33.398438 C 31.613281 33.238281 31.484375 33.078125 31.3125 32.917969 C 30 31.808594 28.3125 31.257812 26.257812 31.257812 C 24.710938 31.257812 23.371094 31.574219 22.234375 32.207031 C 21.09375 32.84375 20.214844 33.753906 19.597656 34.941406 C 18.976562 36.128906 18.667969 37.535156 18.667969 39.152344 C 18.667969 40.800781 18.976562 42.21875 19.597656 43.40625 C 20.214844 44.597656 21.109375 45.503906 22.277344 46.132812 C 23.441406 46.757812 24.820312 47.070312 26.410156 47.070312 Z M 42.445312 47.070312 C 43.160156 47.070312 43.902344 47.011719 44.675781 46.898438 C 45.449219 46.78125 46.128906 46.621094 46.710938 46.414062 C 47.25 46.242188 47.609375 46.015625 47.78125 45.738281 C 47.957031 45.460938 48.046875 44.988281 48.046875 44.316406 L 48.046875 39.613281 C 48.046875 39.292969 47.941406 39.03125 47.738281 38.835938 C 47.535156 38.640625 47.265625 38.539062 46.929688 38.539062 L 43.058594 38.539062 C 42.707031 38.539062 42.433594 38.628906 42.238281 38.804688 C 42.039062 38.976562 41.941406 39.226562 41.941406 39.546875 C 41.941406 39.867188 42.039062 40.117188 42.238281 40.289062 C 42.433594 40.464844 42.707031 40.554688 43.058594 40.554688 L 45.53125 40.554688 L 45.53125 44.425781 C 44.539062 44.703125 43.546875 44.839844 42.554688 44.839844 C 39.230469 44.839844 37.566406 42.945312 37.566406 39.152344 C 37.566406 37.300781 37.972656 35.90625 38.78125 34.964844 C 39.589844 34.023438 40.789062 33.554688 42.378906 33.554688 C 43.078125 33.554688 43.707031 33.644531 44.261719 33.828125 C 44.816406 34.007812 45.414062 34.324219 46.054688 34.777344 C 46.230469 34.894531 46.382812 34.980469 46.515625 35.03125 C 46.644531 35.082031 46.792969 35.105469 46.953125 35.105469 C 47.199219 35.105469 47.410156 34.996094 47.585938 34.777344 C 47.761719 34.558594 47.847656 34.289062 47.847656 33.96875 C 47.847656 33.75 47.808594 33.558594 47.726562 33.398438 C 47.648438 33.238281 47.519531 33.078125 47.34375 32.917969 C 46.03125 31.808594 44.347656 31.257812 42.292969 31.257812 C 40.746094 31.257812 39.40625 31.574219 38.265625 32.207031 C 37.128906 32.84375 36.25 33.753906 35.632812 34.941406 C 35.011719 36.128906 34.703125 37.535156 34.703125 39.152344 C 34.703125 40.800781 35.011719 42.21875 35.632812 43.40625 C 36.25 44.597656 37.144531 45.503906 38.3125 46.132812 C 39.476562 46.757812 40.855469 47.070312 42.445312 47.070312 Z M 42.445312 47.070312 \"/>\r\n      </g>`\r\n  },\r\n  pdfIcon: {\r\n    extension: '.pdf',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.59375 25 L 39.4375 25 C 41.476562 25.003906 43.484375 25.472656 45.3125 26.375 L 45.3125 15.375 C 45.347656 14.191406 44.867188 13.054688 44 12.25 L 34.625 2.875 C 33.875 2.003906 32.773438 1.523438 31.625 1.5625 L 6.625 1.5625 C 5.589844 1.5625 4.75 2.402344 4.75 3.4375 L 4.75 26.375 C 6.566406 25.480469 8.566406 25.007812 10.59375 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.71875 L 42.15625 12.5 L 34.53125 12.5 C 34.480469 12.511719 34.425781 12.511719 34.375 12.5 Z M 6.25 25.71875 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.300781 13.980469 32.316406 15.253906 33.75 15.625 C 33.957031 15.675781 34.167969 15.675781 34.375 15.625 L 43.75 15.625 L 43.75 25.71875 C 44.859375 26.09375 45.910156 26.621094 46.875 27.28125 L 46.875 15.375 C 46.964844 13.722656 46.3125 12.117188 45.09375 11 L 35.71875 1.625 C 34.648438 0.523438 33.160156 -0.0664062 31.625 0 L 6.625 0 C 5.703125 -0.015625 4.8125 0.339844 4.152344 0.984375 C 3.496094 1.632812 3.125 2.515625 3.125 3.4375 L 3.125 27.28125 C 4.09375 26.625 5.144531 26.101562 6.25 25.71875 Z M 6.25 25.71875 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.625 28.125 C 6.335938 28.117188 4.136719 29.023438 2.515625 30.640625 C 0.898438 32.261719 -0.0078125 34.460938 0 36.75 L 0 41.375 C 0 46.136719 3.863281 50 8.625 50 L 41.375 50 C 46.132812 49.984375 49.984375 46.132812 50 41.375 L 50 36.75 C 50 31.988281 46.136719 28.125 41.375 28.125 Z M 8.625 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 14.40625 41.78125 L 12.09375 41.78125 L 12.09375 45.84375 C 12.003906 46.351562 11.5625 46.726562 11.046875 46.726562 C 10.53125 46.726562 10.089844 46.351562 10 45.84375 L 10 34.78125 C 10 34.210938 10.460938 33.75 11.03125 33.75 L 14.40625 33.75 C 15.925781 33.617188 17.390625 34.351562 18.191406 35.648438 C 18.992188 36.945312 18.992188 38.585938 18.191406 39.882812 C 17.390625 41.179688 15.925781 41.914062 14.40625 41.78125 Z M 12.09375 39.6875 L 14.40625 39.6875 C 15.152344 39.78125 15.882812 39.4375 16.289062 38.804688 C 16.691406 38.171875 16.691406 37.359375 16.289062 36.726562 C 15.882812 36.09375 15.152344 35.75 14.40625 35.84375 L 12.09375 35.84375 Z M 12.09375 39.6875 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 20.3125 45.84375 L 20.3125 34.78125 C 20.3125 34.210938 20.773438 33.75 21.34375 33.75 L 23.5625 33.75 C 27.1875 33.75 30.125 36.6875 30.125 40.3125 C 30.125 43.9375 27.1875 46.875 23.5625 46.875 L 21.34375 46.875 C 20.773438 46.875 20.3125 46.414062 20.3125 45.84375 Z M 22.40625 44.78125 L 23.5625 44.78125 C 26.03125 44.78125 28.03125 42.78125 28.03125 40.3125 C 28.03125 37.84375 26.03125 35.84375 23.5625 35.84375 L 22.40625 35.84375 Z M 22.40625 44.78125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 33.1875 45.84375 L 33.1875 34.78125 C 33.183594 34.476562 33.3125 34.1875 33.542969 33.992188 C 33.769531 33.792969 34.074219 33.703125 34.375 33.75 L 40.625 33.75 C 41.132812 33.839844 41.507812 34.28125 41.507812 34.796875 C 41.507812 35.3125 41.132812 35.753906 40.625 35.84375 L 35.25 35.84375 L 35.25 39.28125 L 39.625 39.28125 C 40.195312 39.28125 40.65625 39.742188 40.65625 40.3125 C 40.65625 40.882812 40.195312 41.34375 39.625 41.34375 L 35.25 41.34375 L 35.25 45.84375 C 35.257812 46.359375 34.882812 46.796875 34.375 46.875 C 34.074219 46.921875 33.769531 46.832031 33.542969 46.632812 C 33.3125 46.4375 33.183594 46.148438 33.1875 45.84375 Z M 33.1875 45.84375 \"/>\r\n      </g>`\r\n  },\r\n  defaultIcon: {\r\n    extension: '.default',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 3.117188 44.777344 C 1.394531 44.777344 0 43.386719 0 41.671875 L 0 3.484375 C 0 1.769531 1.394531 0.378906 3.117188 0.378906 L 25.792969 0.378906 C 27.164062 0.304688 28.5 0.808594 29.480469 1.765625 L 37.980469 10.230469 C 39.144531 11.242188 39.769531 12.730469 39.683594 14.265625 L 39.683594 41.671875 C 39.683594 43.386719 38.289062 44.777344 36.5625 44.777344 Z M 25.511719 3.203125 L 3.117188 3.203125 C 2.960938 3.203125 2.832031 3.328125 2.832031 3.484375 L 2.832031 41.671875 C 2.832031 41.828125 2.960938 41.957031 3.117188 41.957031 L 36.5625 41.957031 C 36.679688 41.949219 36.785156 41.867188 36.820312 41.757812 L 36.820312 14.492188 L 28.34375 14.492188 C 28.160156 14.539062 27.964844 14.539062 27.777344 14.492188 C 26.480469 14.15625 25.554688 13.007812 25.511719 11.671875 Z M 28.34375 4.640625 L 28.34375 11.671875 C 28.390625 11.683594 28.441406 11.683594 28.488281 11.671875 L 35.402344 11.671875 Z M 28.34375 4.640625 \"/>\r\n      </g>`\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.modals = function (editor) {\r\n  const $ = editor.$\r\n\r\n  if (!editor.shared.modals) {\r\n    editor.shared.modals = {}\r\n  }\r\n  let modals = editor.shared.modals\r\n  let $overlay\r\n\r\n  /**\r\n   * Get the modal with the specific id.\r\n   */\r\n  function get(id) {\r\n    return modals[id]\r\n  }\r\n\r\n  /*\r\n   *  Get modal html\r\n   */\r\n  function _modalHTML(head, body) {\r\n\r\n    // Modal wrapper.\r\n    let html = `<div tabIndex=\"-1\" class=\"fr-modal${editor.opts.theme ? ` ${editor.opts.theme}-theme` : ''}\"><div class=\"fr-modal-wrapper\">`\r\n\r\n    // Modal title.\r\n    const close_button = `<button title=\"${editor.language.translate('Cancel')}\" class=\"fr-command fr-btn fr-modal-close\"><svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\"><path d=\"${FE.SVG.close}\"/></svg></button>`\r\n    html += `<div class=\"fr-modal-head\">${head}${close_button}</div>`\r\n\r\n    // Body.\r\n    html += `<div tabIndex=\"-1\" class=\"fr-modal-body\">${body}</div>`\r\n\r\n    // End Modal.\r\n    html += '</div></div>'\r\n\r\n    const $tmp = $(editor.doc.createElement('DIV'))\r\n    $tmp.html(html)\r\n\r\n    return $tmp.find('> .fr-modal')\r\n  }\r\n\r\n  /*\r\n   * Create modal.\r\n   */\r\n  function create(id, head, body) {\r\n\r\n    // Wrap all head elements inside a div\r\n    head = `<div class=\"fr-modal-head-line\">${head}</div>`\r\n\r\n    // Build modal overlay.\r\n    if (!editor.shared.$overlay) {\r\n      editor.shared.$overlay = $(editor.doc.createElement('DIV')).addClass('fr-overlay')\r\n      $('body').first().append(editor.shared.$overlay)\r\n    }\r\n    $overlay = editor.shared.$overlay\r\n\r\n    if (editor.opts.theme) {\r\n      $overlay.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    // Build modal.\r\n    if (!modals[id]) {\r\n      const $modal = _modalHTML(head, body)\r\n      modals[id] = {\r\n        $modal,\r\n        $head: $modal.find('.fr-modal-head'),\r\n        $body: $modal.find('.fr-modal-body')\r\n      }\r\n\r\n      // Desktop or mobile device.\r\n      if (!editor.helpers.isMobile()) {\r\n        $modal.addClass('fr-desktop')\r\n      }\r\n\r\n      // Append modal to body.\r\n      $('body').first().append($modal)\r\n\r\n      // Click on close button.\r\n      editor.events.$on($modal, 'click', '.fr-modal-close', () => {\r\n        hide(id)\r\n      }, true)\r\n\r\n      modals[id].$body.css('margin-top', modals[id].$head.outerHeight())\r\n\r\n      // Keydown handler.\r\n      editor.events.$on($modal, 'keydown', (e) => {\r\n        const keycode = e.which\r\n\r\n        // Esc.\r\n        if (keycode === FE.KEYCODE.ESC) {\r\n          hide(id)\r\n          editor.accessibility.focusModalButton($modal)\r\n\r\n          return false\r\n        }\r\n        else if (!$(e.currentTarget).is('input[type=text], textarea') && keycode !== FE.KEYCODE.ARROW_UP && keycode !== FE.KEYCODE.ARROW_DOWN && !editor.keys.isBrowserAction(e)) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n\r\n\r\n        return true\r\n\r\n      }, true)\r\n\r\n      hide(id, true)\r\n    }\r\n\r\n    return modals[id]\r\n  }\r\n\r\n  /*\r\n   * Destroy modals.\r\n   */\r\n  function destroy() {\r\n\r\n    // Destroy all modals.\r\n    for (const i in modals) {\r\n      if (Object.prototype.hasOwnProperty.call(modals, i)) {\r\n        const modalHash = modals[i]\r\n        if (modalHash && modalHash.$modal) {\r\n          modalHash.$modal.removeData().remove()\r\n        }\r\n      }\r\n    }\r\n\r\n    if ($overlay) {\r\n      $overlay.removeData().remove()\r\n    }\r\n\r\n    modals = {}\r\n  }\r\n\r\n  /*\r\n   * Show modal.\r\n   */\r\n  function show(id) {\r\n    if (!modals[id]) {\r\n      return\r\n    }\r\n\r\n    const $modal = modals[id].$modal\r\n\r\n    // Set the current instance for the modal.\r\n    $modal.data('instance', editor)\r\n\r\n    // Show modal.\r\n    $modal.show()\r\n    $overlay.show()\r\n\r\n    // Prevent scrolling in page.\r\n    $(editor.o_doc).find('body').first().addClass('fr-prevent-scroll')\r\n\r\n    // Mobile device\r\n    if (editor.helpers.isMobile()) {\r\n      $(editor.o_doc).find('body').first().addClass('fr-mobile')\r\n    }\r\n\r\n    $modal.addClass('fr-active')\r\n\r\n    editor.accessibility.focusModal($modal)\r\n  }\r\n\r\n  /*\r\n   * Hide modal.\r\n   */\r\n  function hide(id, init) {\r\n    if (!modals[id]) {\r\n      return\r\n    }\r\n\r\n    const $modal = modals[id].$modal\r\n    const inst = $modal.data('instance') || editor\r\n\r\n    inst.events.enableBlur()\r\n    $modal.hide()\r\n    $overlay.hide()\r\n    $(inst.o_doc).find('body').first().removeClass('fr-prevent-scroll fr-mobile')\r\n\r\n    $modal.removeClass('fr-active')\r\n\r\n    if (!init) {\r\n\r\n      // Restore selection.\r\n      inst.accessibility.restoreSelection()\r\n\r\n      inst.events.trigger('modals.hide')\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Resize modal according to its body or editor heights.\r\n   */\r\n  function resize(id) {\r\n    if (!modals[id]) {\r\n      return\r\n    }\r\n\r\n    const modalHash = modals[id]\r\n    const $modal = modalHash.$modal\r\n    const $body = modalHash.$body\r\n\r\n    const height = editor.o_win.innerHeight\r\n\r\n    // The wrapper object.\r\n    const $wrapper = $modal.find('.fr-modal-wrapper')\r\n\r\n    // Calculate max allowed height.\r\n    const allWrapperHeight = $wrapper.outerHeight(true)\r\n    const exteriorBodyHeight = $wrapper.height() - ($body.outerHeight(true) - $body.height())\r\n    const maxHeight = height - allWrapperHeight + exteriorBodyHeight\r\n\r\n    // Get body content height.\r\n    const body_content_height = $body.get(0).scrollHeight\r\n\r\n    // Calculate the new height.\r\n    let newHeight = 'auto'\r\n\r\n    if (body_content_height > maxHeight) {\r\n      newHeight = maxHeight\r\n    }\r\n\r\n    $body.height(newHeight)\r\n  }\r\n\r\n  /**\r\n   * Find visible modal.\r\n   */\r\n  function isVisible(id) {\r\n    let $modal\r\n\r\n    // By id.\r\n    if (typeof id === 'string') {\r\n      if (!modals[id]) {\r\n        return\r\n      }\r\n      $modal = modals[id].$modal\r\n    }\r\n\r\n    // By modal object.\r\n    else {\r\n      $modal = id\r\n    }\r\n\r\n    return $modal && editor.node.hasClass($modal, 'fr-active') && editor.core.sameInstance($modal) || false\r\n  }\r\n\r\n  /**\r\n   * Check if there is any modal visible.\r\n   */\r\n  function areVisible(new_instance) {\r\n    for (const id in modals) {\r\n      if (Object.prototype.hasOwnProperty.call(modals, id)) {\r\n        if (isVisible(id) && (typeof new_instance === 'undefined' || modals[id].$modal.data('instance') === new_instance)) {\r\n          return modals[id].$modal\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    editor.events.on('shared.destroy', destroy, true)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    get,\r\n    create,\r\n    show,\r\n    hide,\r\n    resize,\r\n    isVisible,\r\n    areVisible\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.position = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n  * Get bounding rect around selection.\r\n  *\r\n  */\r\n  function getBoundingRect() {\r\n    const range = editor.selection.ranges(0)\r\n    let boundingRect = range.getBoundingClientRect()\r\n\r\n    if (boundingRect.top === 0 && boundingRect.left === 0 && boundingRect.width === 0 || boundingRect.height === 0) {\r\n      let remove = false\r\n\r\n      if (editor.$el.find('.fr-marker').length === 0) {\r\n        editor.selection.save()\r\n        remove = true\r\n      }\r\n\r\n      const $marker = editor.$el.find('.fr-marker').first()\r\n      $marker.css('display', 'inline')\r\n      $marker.css('line-height', '')\r\n      const offset = $marker.offset()\r\n      const height = $marker.outerHeight()\r\n      $marker.css('display', 'none')\r\n      $marker.css('line-height', 0)\r\n\r\n      boundingRect = {}\r\n      boundingRect.left = offset && offset.left;\r\n      boundingRect.width = 0\r\n      boundingRect.height = height\r\n      boundingRect.top = offset && offset.top - (editor.helpers.isMobile() && !editor.helpers.isIOS() || editor.opts.iframe ? 0 : editor.helpers.scrollTop())\r\n      boundingRect.right = 1\r\n      boundingRect.bottom = 1\r\n      boundingRect.ok = true\r\n\r\n      if (remove) {\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n\r\n    return boundingRect\r\n  }\r\n\r\n  /**\r\n   * Normalize top positioning.\r\n   */\r\n  function _topNormalized($el, top, obj_height) {\r\n    const height = $el.outerHeight(true)\r\n\r\n    if (!editor.helpers.isMobile() && editor.$tb && $el.parent().get(0) !== editor.$tb.get(0)) {\r\n      // Get the parent of the element.\r\n      let p_offset = $el.parent().offset().top\r\n      const new_top = top - height - (obj_height || 0)\r\n\r\n      // Parent is scrollable container.\r\n      // Substract the top of the container.\r\n      if ($el.parent().get(0) === editor.$sc.get(0)) {\r\n        p_offset -= $el.parent().position().top\r\n      }\r\n\r\n      // Scrollable container height.\r\n      const s_height = editor.$sc.get(0).clientHeight\r\n\r\n      // 1. Parent offset + toolbar top + toolbar height > scrollableContainer height.\r\n      // 2. Selection doesn't go above the screen.\r\n      if (p_offset + top + height > editor.$sc.offset().top + s_height && $el.parent().offset().top + new_top > 0 && new_top > 0) {\r\n\r\n        // Make sure we can display it.\r\n        if (new_top > editor.$wp.scrollTop()) {\r\n          top = new_top\r\n          $el.addClass('fr-above')\r\n        }\r\n      }\r\n      else {\r\n        $el.removeClass('fr-above')\r\n      }\r\n    }\r\n\r\n    return top\r\n  }\r\n\r\n  /**\r\n   * Normalize left position.\r\n   */\r\n  function _leftNormalized($el, left) {\r\n    const width = $el.outerWidth(true)\r\n\r\n    // Normalize right.\r\n    if (left + width > editor.$sc.get(0).clientWidth - 10) {\r\n      left = editor.$sc.get(0).clientWidth - width - 10\r\n    }\r\n\r\n    // Normalize left.\r\n    if (left < 0) {\r\n      left = 10\r\n    }\r\n\r\n    return left\r\n  }\r\n\r\n  /**\r\n   * Place editor below selection.\r\n   */\r\n  function forSelection($el) {\r\n    const selection_rect = getBoundingRect()\r\n\r\n    $el.css({\r\n      top: 0,\r\n      left: 0\r\n    })\r\n\r\n    let top = selection_rect.top + selection_rect.height\r\n    const left = selection_rect.left + selection_rect.width / 2 - $el.get(0).offsetWidth / 2 + editor.helpers.scrollLeft()\r\n\r\n    if (!editor.opts.iframe) {\r\n      top += editor.helpers.scrollTop()\r\n    }\r\n\r\n    at(left, top, $el, selection_rect.height)\r\n  }\r\n\r\n  /**\r\n   * Position element at the specified position.\r\n   */\r\n  function at(left, top, $el, obj_height) {\r\n    const $container = $el.data('container')\r\n\r\n    if ($container && ($container.get(0).tagName !== 'BODY' || $container.css('position') !== 'static')) {\r\n\r\n      if (left) {\r\n        left -= $container.offset().left\r\n      }\r\n\r\n      if (top) {\r\n        top -= $container.offset().top\r\n      }\r\n\r\n      if ($container.get(0).tagName !== 'BODY') {\r\n        if (left) {\r\n          left += $container.get(0).scrollLeft\r\n        }\r\n\r\n        if (top) {\r\n          top += $container.get(0).scrollTop\r\n        }\r\n      }\r\n      else if ($container.css('position') === 'absolute') {\r\n        if (left) {\r\n          left += $container.position().left\r\n        }\r\n\r\n        if (top) {\r\n          top += $container.position().top\r\n        }\r\n      }\r\n    }\r\n\r\n    // Apply iframe correction.\r\n    if (editor.opts.iframe && $container && editor.$tb && $container.get(0) !== editor.$tb.get(0)) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      if (left) {\r\n        left += editor.$iframe.offset().left + iframePaddingLeft\r\n      }\r\n\r\n      if (top) {\r\n        top += editor.$iframe.offset().top + iframePaddingTop\r\n      }\r\n    }\r\n\r\n    const new_left = _leftNormalized($el, left)\r\n\r\n    if (left) {\r\n\r\n      // Set the new left.\r\n      $el.css('left', new_left)\r\n\r\n    }\r\n\r\n    if (top) {\r\n      $el.css('top', _topNormalized($el, top, obj_height))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Special case for update sticky on iOS.\r\n   */\r\n  function _updateIOSSticky(el) {\r\n    const $el = $(el)\r\n    const is_on = $el.is('.fr-sticky-on')\r\n    const prev_top = $el.data('sticky-top')\r\n    const scheduled_top = $el.data('sticky-scheduled')\r\n\r\n    // Create a dummy div that we show then sticky is on.\r\n    if (typeof prev_top === 'undefined') {\r\n      $el.data('sticky-top', 0)\r\n      const $dummy = $(`<div class=\"fr-sticky-dummy\" style=\"height: ${$el.outerHeight()}px;\"></div>`)\r\n      editor.$box.prepend($dummy)\r\n    }\r\n    else {\r\n      editor.$box.find('.fr-sticky-dummy').css('height', $el.outerHeight())\r\n    }\r\n\r\n    // Position sticky doesn't work when the keyboard is on the screen.\r\n    if (editor.core.hasFocus() || editor.$tb.findVisible('input:focus').length > 0) {\r\n\r\n      // Get the current scroll.\r\n      const x_scroll = editor.helpers.scrollTop()\r\n\r\n      // Get the current top.\r\n      // We make sure that we keep it within the editable box.\r\n      const x_top = Math.min(Math.max(x_scroll - editor.$tb.parent().offset().top, 0), editor.$tb.parent().outerHeight() - $el.outerHeight())\r\n\r\n      // Not the same top and different than the already scheduled.\r\n      if (x_top !== prev_top && x_top !== scheduled_top) {\r\n\r\n        // Clear any too soon change to avoid flickering.\r\n        clearTimeout($el.data('sticky-timeout'))\r\n\r\n        // Store the current scheduled top.\r\n        $el.data('sticky-scheduled', x_top)\r\n\r\n        // Hide the toolbar for a rich experience.\r\n        if ($el.outerHeight() < x_scroll - editor.$tb.parent().offset().top) {\r\n          $el.addClass('fr-opacity-0')\r\n        }\r\n\r\n        // Set the timeout for changing top.\r\n        // Based on the test 100ms seems to be the best timeout.\r\n        $el.data('sticky-timeout', setTimeout(() => {\r\n\r\n          // Get the current top.\r\n          const c_scroll = editor.helpers.scrollTop()\r\n          let c_top = Math.min(Math.max(c_scroll - editor.$tb.parent().offset().top, 0), editor.$tb.parent().outerHeight() - $el.outerHeight())\r\n\r\n          if (c_top > 0 && editor.$tb.parent().get(0).tagName === 'BODY') {\r\n            c_top += editor.$tb.parent().position().top\r\n          }\r\n\r\n          // Don't update if it is not different than the prev top.\r\n          if (c_top !== prev_top) {\r\n            $el.css('top', Math.max(c_top, 0))\r\n\r\n            $el.data('sticky-top', c_top)\r\n            $el.data('sticky-scheduled', c_top)\r\n          }\r\n\r\n          // Show toolbar.\r\n          $el.removeClass('fr-opacity-0')\r\n        }, 100))\r\n      }\r\n\r\n      // Turn on sticky mode.\r\n      if (!is_on) {\r\n        const $parent = editor.$tb.parent()\r\n        const parentBorderWidth = $parent.get(0).offsetWidth - $parent.get(0).clientWidth\r\n\r\n        $el.css('top', '0')\r\n        $el.width($parent.width() - parentBorderWidth)\r\n        $el.addClass('fr-sticky-on')\r\n        editor.$box.addClass('fr-sticky-box')\r\n      }\r\n    }\r\n\r\n    // Turn off sticky mode.\r\n    else {\r\n      clearTimeout($(el).css('sticky-timeout'))\r\n      $el.css('top', '0')\r\n      $el.css('position', '')\r\n      $el.css('width', '')\r\n      $el.data('sticky-top', 0)\r\n      $el.removeClass('fr-sticky-on')\r\n      editor.$box.removeClass('fr-sticky-box')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update sticky location for browsers that don't support sticky.\r\n   * https://github.com/filamentgroup/fixed-sticky\r\n   *\r\n   * The MIT License (MIT)\r\n   *\r\n   * Copyright (c) 2013 Filament Group\r\n   */\r\n  function _updateSticky(el) {\r\n    if (!el.offsetWidth) {\r\n      return\r\n    }\r\n\r\n    const $el = $(el)\r\n    const height = $el.outerHeight()\r\n\r\n    let position = $el.data('sticky-position')\r\n\r\n    // Viewport height.\r\n    const viewport_height = $(editor.opts.scrollableContainer === 'body' ? editor.o_win : editor.opts.scrollableContainer).outerHeight()\r\n\r\n    let scrollable_top = 0\r\n    let scrollable_bottom = 0\r\n\r\n    if (editor.opts.scrollableContainer !== 'body') {\r\n      scrollable_top = editor.$sc.offset().top\r\n      scrollable_bottom = $(editor.o_win).outerHeight() - scrollable_top - viewport_height\r\n    }\r\n\r\n    const offset_top = editor.opts.scrollableContainer === 'body' ? editor.helpers.scrollTop() : scrollable_top\r\n\r\n    const is_on = $el.is('.fr-sticky-on')\r\n\r\n    // Decide parent.\r\n    if (!$el.data('sticky-parent')) {\r\n      $el.data('sticky-parent', $el.parent())\r\n    }\r\n    const $parent = $el.data('sticky-parent')\r\n    const parent_top = $parent.offset().top\r\n    const parent_height = $parent.outerHeight()\r\n\r\n\r\n    if (!$el.data('sticky-offset')) {\r\n      $el.data('sticky-offset', true)\r\n      $el.after(`<div class=\"fr-sticky-dummy\" style=\"height: ${height}px;\"></div>`)\r\n    }\r\n    else {\r\n      editor.$box.find('.fr-sticky-dummy').css('height', `${height}px`)\r\n    }\r\n\r\n    // Detect position placement.\r\n    if (!position) {\r\n\r\n      // Some browsers require fixed/absolute to report accurate top/left values.\r\n      const skip_setting_fixed = $el.css('top') !== 'auto' || $el.css('bottom') !== 'auto'\r\n\r\n      // Set to position fixed for a split of second.\r\n      if (!skip_setting_fixed) {\r\n        $el.css('position', 'fixed')\r\n      }\r\n\r\n      // Find position.\r\n      position = {\r\n        top: editor.node.hasClass($el.get(0), 'fr-top'),\r\n        bottom: editor.node.hasClass($el.get(0), 'fr-bottom')\r\n      }\r\n\r\n      // Remove position fixed.\r\n      if (!skip_setting_fixed) {\r\n        $el.css('position', '')\r\n      }\r\n\r\n      // Store position.\r\n      $el.data('sticky-position', position)\r\n\r\n      $el.data('top', editor.node.hasClass($el.get(0), 'fr-top') ? $el.css('top') : 'auto')\r\n      $el.data('bottom', editor.node.hasClass($el.get(0), 'fr-bottom') ? $el.css('bottom') : 'auto')\r\n    }\r\n\r\n    const el_top = editor.helpers.getPX($el.data('top'))\r\n    const el_bottom = editor.helpers.getPX($el.data('bottom'))\r\n\r\n    // Detect if is OK to fix at the top.\r\n    function isFixedToTop() {\r\n\r\n      // 1. Top condition.\r\n      // 2. Bottom condition.\r\n      return parent_top < offset_top + el_top &&\r\n              parent_top + parent_height - height >= offset_top + el_top\r\n    }\r\n\r\n    // Detect if it is OK to fix at the bottom.\r\n    function isFixedToBottom() {\r\n      return parent_top + height < offset_top + viewport_height - el_bottom &&\r\n              parent_top + parent_height > offset_top + viewport_height - el_bottom\r\n    }\r\n\r\n    const at_top = position.top && isFixedToTop() && (editor.helpers.isInViewPort(editor.$sc.get(0)) || editor.opts.scrollableContainer === 'body')\r\n    const at_bottom = position.bottom && isFixedToBottom()\r\n\r\n    // Should be fixed.\r\n    if (at_top || at_bottom) {\r\n\r\n      // Account for parent border in calculating toolbar width\r\n      const parentBorderWidth = $parent.get(0).offsetWidth - $parent.get(0).clientWidth\r\n      $el.css('width', `${$parent.get(0).getBoundingClientRect().width - parentBorderWidth}px`);\r\n\r\n      if (!is_on) {\r\n        $el.addClass('fr-sticky-on')\r\n        $el.removeClass('fr-sticky-off')\r\n\r\n        if ($el.css('top')) {\r\n          if ($el.data('top') !== 'auto') {\r\n            $el.css('top', editor.helpers.getPX($el.data('top')) + scrollable_top)\r\n          }\r\n          else {\r\n            $el.data('top', 'auto')\r\n          }\r\n        }\r\n\r\n        if ($el.css('bottom')) {\r\n          if ($el.data('bottom') !== 'auto') {\r\n            $el.css('bottom', editor.helpers.getPX($el.data('bottom')) + scrollable_bottom)\r\n          }\r\n          else {\r\n            $el.css('bottom', 'auto')\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Shouldn't be fixed.\r\n    else if (!editor.node.hasClass($el.get(0), 'fr-sticky-off')) {\r\n\r\n      // Reset.\r\n      $el.css('width', '')\r\n      $el.removeClass('fr-sticky-on')\r\n      $el.addClass('fr-sticky-off')\r\n\r\n      if ($el.css('top') && $el.data('top') !== 'auto' && position.top) {\r\n        $el.css('top', 0)\r\n      }\r\n\r\n      if ($el.css('bottom') && $el.data('bottom') !== 'auto' && position.bottom) {\r\n        $el.css('bottom', 0)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test if browser supports sticky.\r\n   */\r\n  function _testSticky() {\r\n    return false\r\n  }\r\n\r\n  // Use an animation frame to make sure we're always OK with the updates.\r\n  function animate() {\r\n    editor.helpers.requestAnimationFrame()(animate)\r\n\r\n    if (editor.events.trigger('position.refresh') === false) {\r\n      return\r\n    }\r\n\r\n    for (let i = 0; i < editor._stickyElements.length; i++) {\r\n      _updateIOSSticky(editor._stickyElements[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize sticky position.\r\n   */\r\n  function _initSticky() {\r\n    if (!_testSticky()) {\r\n      editor._stickyElements = []\r\n\r\n      // iOS special case.\r\n      if (editor.helpers.isIOS()) {\r\n        animate()\r\n\r\n        // Hide toolbar on touchmove. This is very useful on iOS versions < 8.\r\n        editor.events.$on($(editor.o_win), 'scroll', () => {\r\n          if (editor.core.hasFocus()) {\r\n            for (let i = 0; i < editor._stickyElements.length; i++) {\r\n              const $el = $(editor._stickyElements[i])\r\n              const $parent = $el.parent()\r\n              const c_scroll = editor.helpers.scrollTop()\r\n\r\n              if ($el.outerHeight() < c_scroll - $parent.offset().top) {\r\n                $el.addClass('fr-opacity-0')\r\n                $el.data('sticky-top', -1)\r\n                $el.data('sticky-scheduled', -1)\r\n              }\r\n            }\r\n          }\r\n        }, true)\r\n      }\r\n\r\n      // Default case. Do the updates on scroll.\r\n      else {\r\n        if (editor.opts.scrollableContainer !== 'body') {\r\n          editor.events.$on($(editor.opts.scrollableContainer), 'scroll', refresh, true)\r\n        }\r\n\r\n        editor.events.$on($(editor.o_win), 'scroll', refresh, true)\r\n        editor.events.$on($(editor.o_win), 'resize', refresh, true)\r\n\r\n        editor.events.on('initialized', refresh)\r\n        editor.events.on('focus', refresh)\r\n\r\n        editor.events.$on($(editor.o_win), 'resize', 'textarea', refresh, true)\r\n      }\r\n    }\r\n\r\n    editor.events.on('destroy', () => {\r\n      editor._stickyElements = []\r\n    })\r\n  }\r\n\r\n  function refresh() {\r\n    if (editor._stickyElements) {\r\n      for (let i = 0; i < editor._stickyElements.length; i++) {\r\n        _updateSticky(editor._stickyElements[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark element as sticky.\r\n   */\r\n  function addSticky($el) {\r\n    $el.addClass('fr-sticky')\r\n\r\n    if (editor.helpers.isIOS()) {\r\n      $el.addClass('fr-sticky-ios')\r\n    }\r\n\r\n    if (!_testSticky()) {\r\n      $el.removeClass('fr-sticky')\r\n      editor._stickyElements.push($el.get(0))\r\n    }\r\n  }\r\n\r\n  function _init() {\r\n    _initSticky()\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    forSelection,\r\n    addSticky,\r\n    refresh,\r\n    at,\r\n    getBoundingRect\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.refresh = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function undo($btn) {\r\n    _setDisabled($btn, !editor.undo.canDo())\r\n  }\r\n\r\n  function redo($btn) {\r\n    _setDisabled($btn, !editor.undo.canRedo())\r\n  }\r\n\r\n  function indent($btn) {\r\n    if (editor.node.hasClass($btn.get(0), 'fr-no-refresh')) {\r\n      return false\r\n    }\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      let p_node = blocks[i].previousSibling\r\n\r\n      while (p_node && p_node.nodeType === Node.TEXT_NODE && p_node.textContent.length === 0) {\r\n        p_node = p_node.previousSibling\r\n      }\r\n\r\n      if (blocks[i].tagName === 'LI' && !p_node) {\r\n        _setDisabled($btn, true)\r\n      }\r\n      else {\r\n        _setDisabled($btn, false)\r\n\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  function outdent($btn) {\r\n    if (editor.node.hasClass($btn.get(0), 'fr-no-refresh')) {\r\n      return false\r\n    }\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      const prop = editor.opts.direction === 'rtl' || $(blocks[i]).css('direction') === 'rtl' ? 'margin-right' : 'margin-left'\r\n\r\n      //Outend is not allowed if parent is not an list\r\n      let parentBlk = blocks[0].parentElement\r\n      if (parentBlk.parentNode.tagName != 'UL' && parentBlk.parentNode.tagName != 'OL' && parentBlk.parentNode.tagName != 'LI') {\r\n        _setDisabled($btn, true)\r\n        return true\r\n      }\r\n      if (blocks[0].previousSibling && parentBlk.parentNode.style.listStyleType == 'none') {\r\n        _setDisabled($btn, true)\r\n        return true\r\n      }\r\n      \r\n      if (blocks[i].tagName === 'LI' || blocks[i].parentNode.tagName === 'LI') {\r\n        _setDisabled($btn, false)\r\n\r\n        return true\r\n      }\r\n\r\n      if (editor.helpers.getPX($(blocks[i]).css(prop)) > 0) {\r\n        _setDisabled($btn, false)\r\n\r\n        return true\r\n      }\r\n    }\r\n\r\n    _setDisabled($btn, true)\r\n  }\r\n\r\n  /**\r\n   * Disable/enable buton.\r\n   */\r\n  function _setDisabled($btn, disabled) {\r\n    $btn.toggleClass('fr-disabled', disabled).attr('aria-disabled', disabled)\r\n  }\r\n\r\n  /**\r\n   * Apply styles to button groups\r\n   */\r\n  function more($moreButton) {\r\n    // Align the hidden toolbar with respect to its corresponding more button\r\n    // Set its width to cover the complete editor width\r\n    const $moreToolbar = editor.$tb.find(`.fr-more-toolbar[data-name=\"${$moreButton.attr('data-group-name')}\"]`)\r\n\r\n    let offset = _computeMoreToolbarPosition($moreButton, $moreToolbar)\r\n\r\n    // Position hidden toolbar w.r.t. more button\r\n    if (editor.opts.direction === 'rtl') {\r\n      $moreToolbar.css('padding-right', offset)\r\n    }\r\n    else {\r\n      $moreToolbar.css('padding-left', offset)\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Compute more toolbar new position w.r.t more button\r\n   */\r\n  function _computeMoreToolbarPosition($moreButton, $moreToolbar) {\r\n\r\n    // Compute total buttons width in the more toolbar\r\n    let totalButtonWidth = 0\r\n    const $moreToolbarBtns = $moreToolbar.find('> .fr-command, > .fr-btn-wrap')\r\n    $moreToolbarBtns.each((index, btn) => {\r\n      totalButtonWidth += $(btn).outerWidth()\r\n    })\r\n\r\n    // Calculate the position to place the hidden toolbar w.r.t. its more button\r\n    const buttonMarginLeft = editor.helpers.getPX($($moreToolbarBtns[0]).css('margin-left'))\r\n    const buttonMarginRight = editor.helpers.getPX($($moreToolbarBtns[0]).css('margin-right'))\r\n\r\n    let offset\r\n    if (editor.opts.direction === 'rtl') {\r\n      offset = editor.$tb.outerWidth() - $moreButton.offset().left + editor.$tb.offset().left - (totalButtonWidth + $moreButton.outerWidth() + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight)) / 2\r\n    }\r\n    else {\r\n      offset = $moreButton.offset().left - editor.$tb.offset().left - (totalButtonWidth - $moreButton.outerWidth() + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight)) / 2\r\n    }\r\n    \r\n    // Handle right side going outside the editor\r\n    if (offset + totalButtonWidth + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight) > editor.$tb.outerWidth()) {\r\n      offset -= (totalButtonWidth + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight) - $moreButton.outerWidth()) / 2\r\n    }\r\n    \r\n    // Handle left side going outside the editor\r\n    if (offset < 0) {\r\n      offset = 0\r\n    }\r\n\r\n    return offset\r\n  }\r\n\r\n  return {\r\n    undo,\r\n    redo,\r\n    outdent,\r\n    indent,\r\n    moreText: more,\r\n    moreParagraph: more,\r\n    moreMisc: more,\r\n    moreRich: more\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  attribution: true,\r\n  toolbarBottom: false,\r\n  toolbarButtons: null,\r\n  toolbarButtonsXS: null,\r\n  toolbarButtonsSM: null,\r\n  toolbarButtonsMD: null,\r\n  toolbarContainer: null,\r\n  toolbarInline: false,\r\n  toolbarSticky: true,\r\n  toolbarStickyOffset: 0,\r\n  toolbarVisibleWithoutSelection: false\r\n})\r\n\r\n// Default toolbar buttons.\r\nFE.TOOLBAR_BUTTONS = {\r\n  'moreText': {\r\n    'buttons': ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', 'textColor', 'backgroundColor', 'inlineClass', 'inlineStyle', 'clearFormatting']\r\n  },\r\n  'moreParagraph': {\r\n    'buttons': ['alignLeft', 'alignCenter', 'formatOLSimple', 'alignRight', 'alignJustify', 'formatOL', 'formatUL', 'paragraphFormat', 'paragraphStyle', 'lineHeight', 'outdent', 'indent', 'quote']\r\n  },\r\n  'moreRich': {\r\n    'buttons': ['insertLink', 'insertFiles', 'insertImage', 'insertVideo', 'insertTable', 'emoticons', 'fontAwesome', 'specialCharacters', 'embedly', 'insertFile', 'insertHR']\r\n  },\r\n  'moreMisc': {\r\n    'buttons': ['undo', 'redo', 'fullscreen', 'print', 'getPDF', 'spellChecker', 'selectAll', 'html', 'help'],\r\n    'align': 'right',\r\n    'buttonsVisible': 2\r\n  }\r\n}\r\n\r\nFE.TOOLBAR_BUTTONS_MD = null\r\n\r\nFE.TOOLBAR_BUTTONS_SM = {}\r\nFE.TOOLBAR_BUTTONS_SM.moreText = Object.assign({}, FE.TOOLBAR_BUTTONS.moreText, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreParagraph = Object.assign({}, FE.TOOLBAR_BUTTONS.moreParagraph, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreRich = Object.assign({}, FE.TOOLBAR_BUTTONS.moreRich, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreMisc = Object.assign({}, FE.TOOLBAR_BUTTONS.moreMisc, {'buttonsVisible': 2})\r\n\r\nFE.TOOLBAR_BUTTONS_XS = {}\r\nFE.TOOLBAR_BUTTONS_XS.moreText = Object.assign({}, FE.TOOLBAR_BUTTONS.moreText, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreParagraph = Object.assign({}, FE.TOOLBAR_BUTTONS.moreParagraph, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreRich = Object.assign({}, FE.TOOLBAR_BUTTONS.moreRich, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreMisc = Object.assign({}, FE.TOOLBAR_BUTTONS.moreMisc, {'buttonsVisible': 2})\r\n\r\nFE.POWERED_BY = '<a id=\"fr-logo\" href=\"https://froala.com/wysiwyg-editor\" target=\"_blank\" title=\"Froala WYSIWYG HTML Editor\"><span>Powered by</span><svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 822.8 355.33\"><defs><style>.fr-logo{fill:#b1b2b7;}</style></defs><title>Froala</title><path class=\"fr-logo\" d=\"M123.58,78.65A16.16,16.16,0,0,0,111.13,73H16.6C7.6,73,0,80.78,0,89.94V128.3a16.45,16.45,0,0,0,32.9,0V104.14h78.5A15.63,15.63,0,0,0,126.87,91.2,15.14,15.14,0,0,0,123.58,78.65Z\"/><path class=\"fr-logo\" d=\"M103.54,170a16.05,16.05,0,0,0-11.44-4.85H15.79A15.81,15.81,0,0,0,0,180.93v88.69a16.88,16.88,0,0,0,5,11.92,16,16,0,0,0,11.35,4.7h.17a16.45,16.45,0,0,0,16.41-16.6v-73.4H92.2A15.61,15.61,0,0,0,107.89,181,15.1,15.1,0,0,0,103.54,170Z\"/><path class=\"fr-logo\" d=\"M233,144.17c-5.29-6.22-16-7.52-24.14-7.52-16.68,0-28.72,7.71-36.5,23.47v-5.67a16.15,16.15,0,1,0-32.3,0v115.5a16.15,16.15,0,1,0,32.3,0v-38.7c0-19.09,3.5-63.5,35.9-63.5a44.73,44.73,0,0,1,5.95.27h.12c12.79,1.2,20.06-2.73,21.6-11.69C236.76,151.48,235.78,147.39,233,144.17Z\"/><path class=\"fr-logo\" d=\"M371.83,157c-13.93-13.11-32.9-20.33-53.43-20.33S279,143.86,265.12,157c-14.67,13.88-22.42,32.82-22.42,54.77,0,21.68,8,41.28,22.4,55.2,13.92,13.41,32.85,20.8,53.3,20.8s39.44-7.38,53.44-20.79c14.55-13.94,22.56-33.54,22.56-55.21S386.39,170.67,371.83,157Zm-9.73,54.77c0,25.84-18.38,44.6-43.7,44.6s-43.7-18.76-43.7-44.6c0-25.15,18.38-43.4,43.7-43.4S362.1,186.59,362.1,211.74Z\"/><path class=\"fr-logo\" d=\"M552.7,138.14a16.17,16.17,0,0,0-16,16.3v1C526.41,143.85,509,136.64,490,136.64c-19.83,0-38.19,7.24-51.69,20.4C424,171,416.4,190,416.4,212c0,21.61,7.78,41.16,21.9,55,13.56,13.33,31.92,20.67,51.7,20.67,18.83,0,36.29-7.41,46.7-19.37v1.57a16.15,16.15,0,1,0,32.3,0V154.44A16.32,16.32,0,0,0,552.7,138.14Zm-16.3,73.6c0,30.44-22.81,44.3-44,44.3-24.57,0-43.1-19-43.1-44.3s18.13-43.4,43.1-43.4C513.73,168.34,536.4,183.55,536.4,211.74Z\"/><path class=\"fr-logo\" d=\"M623.5,61.94a16.17,16.17,0,0,0-16,16.3v191.7a16.15,16.15,0,1,0,32.3,0V78.24A16.32,16.32,0,0,0,623.5,61.94Z\"/><path class=\"fr-logo\" d=\"M806.5,138.14a16.17,16.17,0,0,0-16,16.3v1c-10.29-11.63-27.74-18.84-46.7-18.84-19.83,0-38.19,7.24-51.69,20.4-14.33,14-21.91,33-21.91,55,0,21.61,7.78,41.16,21.9,55,13.56,13.33,31.92,20.67,51.7,20.67,18.83,0,36.29-7.41,46.7-19.37v1.57a16.15,16.15,0,1,0,32.3,0V154.44A16.32,16.32,0,0,0,806.5,138.14Zm-16.3,73.6c0,30.44-22.81,44.3-44,44.3-24.57,0-43.1-19-43.1-44.3s18.13-43.4,43.1-43.4C767.53,168.34,790.2,183.55,790.2,211.74Z\"/></svg></a>'\r\n\r\nFE.MODULES.toolbar = function (editor) {\r\n\r\n  const $ = editor.$\r\n\r\n  // Create a button map for each screen size.\r\n  const _buttons_map = []\r\n  _buttons_map[FE.XS] = _normalizeButtons(editor.opts.toolbarButtonsXS || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_XS || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.SM] = _normalizeButtons(editor.opts.toolbarButtonsSM || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_SM || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.MD] = _normalizeButtons(editor.opts.toolbarButtonsMD || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_MD || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.LG] = _normalizeButtons(editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS || [])\r\n\r\n  // Store previous screen size for resizing optimization\r\n  let previousScreenSize\r\n\r\n  /**\r\n   * Normalize buttons for regular structure.\r\n   */\r\n  function _normalizeButtons (buttons) {\r\n    // All this method should do is to change the structure of the _buttons_map to be inline with the specs for buttons in V3.\r\n    // Buttons is an array\r\n    let buttonGroups = {}\r\n    if (Array.isArray(buttons)) {\r\n\r\n      // Convert from old button list to new button list\r\n      if (!Array.isArray(buttons[0])) {\r\n\r\n        let toolbarButtonGroups = []\r\n        let currentButtonGroup = []\r\n        for (let i = 0; i < buttons.length; i++) {\r\n          // If the value is of type separator then add the currentButtonGroup to the toolbarButtonGroups\r\n          // Re-initialize the currentButtonGroup for new group\r\n          if (buttons[i] === '|' || buttons[i] === '-') {\r\n            if (currentButtonGroup.length > 0) {\r\n              toolbarButtonGroups.push(currentButtonGroup)\r\n            }\r\n            currentButtonGroup = []\r\n          }\r\n          // Otherwise add the button to the currentButtonGroup\r\n          else {\r\n            currentButtonGroup.push(buttons[i])\r\n          }\r\n        }\r\n\r\n        // If there are buttons in the currentButtonGroup then add the group to the toolbar button groups\r\n        if (currentButtonGroup.length > 0) {\r\n          toolbarButtonGroups.push(currentButtonGroup)\r\n        }\r\n\r\n        buttons = toolbarButtonGroups\r\n      }\r\n\r\n      // Create a button group object from button group array\r\n      buttons.forEach((button, index) => {\r\n        buttonGroups[`group${index + 1}`] = { buttons: button }\r\n      })\r\n\r\n      // Don't show more buttons when input buttons is a list\r\n      buttonGroups.showMoreButtons = false\r\n\r\n    }\r\n    // Button is an Object with group name and buttons info\r\n    else if (typeof buttons === 'object' && !Array.isArray(buttons)) {\r\n      buttonGroups = buttons\r\n\r\n      // Show more buttons when input is more button groups\r\n      buttonGroups.showMoreButtons = true\r\n    }\r\n\r\n    return buttonGroups\r\n  }\r\n\r\n  /**\r\n   * Add buttons to the toolbar.\r\n   */\r\n  function _addButtons() {\r\n    const buttons_list = editor.button.buildGroup(_screenButtons())\r\n    editor.$tb.append(buttons_list)\r\n\r\n    // Set the height of all more toolbars\r\n    setMoreToolbarsHeight()\r\n\r\n    editor.button.bindCommands(editor.$tb)\r\n  }\r\n\r\n  /**\r\n   * The buttons that should be visible on the current screen size.\r\n   */\r\n  function _screenButtons() {\r\n    const screen_size = editor.helpers.screenSize()\r\n\r\n    // Update previous screen size\r\n    previousScreenSize = screen_size\r\n\r\n    return _buttons_map[screen_size]\r\n  }\r\n\r\n  /**\r\n   * Remove button group wrappers\r\n   */\r\n  function _removeButtonGroupWrappers() {\r\n    // Remove all wrapper button groups\r\n    let $buttonGroups = editor.$tb.find('.fr-btn-grp, .fr-more-toolbar')\r\n    for (let index = 0; index < $buttonGroups.length; index++) {\r\n      // Remove parent wrapper\r\n      const $buttonGroup = $($buttonGroups[index])\r\n      $buttonGroup.children().each((index, $btn) => {\r\n        $buttonGroup.before($btn)\r\n      })\r\n      $buttonGroup.remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the more toolbar height\r\n   */\r\n  function setMoreToolbarsHeight() {\r\n    const $moreToolbars = editor.$tb.find('.fr-more-toolbar')\r\n    let toolbarPaddingBottom = ''\r\n    for (let i = 0; i < $moreToolbars.length; i++) {\r\n      const $moreToolbar = $($moreToolbars[i])\r\n\r\n      // Do only if more toolbar is expanded\r\n      if ($moreToolbar.hasClass('fr-expanded')) {\r\n\r\n        // More toolbar left padding\r\n        let moreToolbarWidth = editor.helpers.getPX($moreToolbar.css('padding-left'))\r\n\r\n        // Get all more toolbar buttons\r\n        const $moreToolbarBtns = $moreToolbar.find('> .fr-command, > .fr-btn-wrap')\r\n        const $moreToolbarBtn = $($moreToolbarBtns[0])\r\n\r\n        // Compute button margins if any\r\n        const buttonMarginLeft = editor.helpers.getPX($moreToolbarBtn.css('margin-left'))\r\n        const buttonMarginRight = editor.helpers.getPX($moreToolbarBtn.css('margin-right'))\r\n        const buttonMarginTop = editor.helpers.getPX($moreToolbarBtn.css('margin-top'))\r\n        const buttonMarginBottom = editor.helpers.getPX($moreToolbarBtn.css('margin-bottom'))\r\n\r\n        // Compute more toolbar content width\r\n        $moreToolbarBtns.each((index, btn) => {\r\n          moreToolbarWidth += ($(btn).outerWidth() + buttonMarginLeft + buttonMarginRight)\r\n        })\r\n\r\n        // Compute complete toolbar width\r\n        const toolbarWidth = editor.$tb.outerWidth()\r\n\r\n        // If all the more toolbar buttons can't be accomodated in one row\r\n        if (moreToolbarWidth > toolbarWidth) {\r\n\r\n          // Compute no of rows required to accomodate all more toolbar buttons\r\n          let moreToolbarRows = Math.floor(moreToolbarWidth / editor.$tb.outerWidth())\r\n          moreToolbarWidth += (moreToolbarRows * (moreToolbarWidth / $moreToolbar[0].childElementCount))\r\n          moreToolbarRows = Math.ceil(moreToolbarWidth / editor.$tb.outerWidth())\r\n\r\n          // Set more toolbar height\r\n          const moreToolbarHeight = (editor.helpers.getPX($moreToolbarBtn.css('height')) + buttonMarginTop + buttonMarginBottom) * moreToolbarRows\r\n          $moreToolbar.css('height', moreToolbarHeight)\r\n          toolbarPaddingBottom = moreToolbarHeight\r\n        }\r\n      }\r\n      // Otherwise reset the properties\r\n      else {\r\n        $moreToolbar.css('height', '')\r\n      }\r\n    }\r\n    // Shift the editor area by the new toolbar height\r\n    editor.$tb.css('padding-bottom', toolbarPaddingBottom)\r\n  }\r\n\r\n  /**\r\n   * Reorder the toolbar buttons on resize\r\n   */\r\n  function _showScreenButtons() {\r\n\r\n    // Update the toolbar only if screen size is changed\r\n    if (previousScreenSize !== editor.helpers.screenSize()) {\r\n\r\n      // Get screen button groups\r\n      let buttonGroups = _screenButtons()\r\n\r\n      // Toolbar groups\r\n      let mainToolbarButtonGroups = $()\r\n      let moreToolbarButtonGroups = $()\r\n\r\n      // Hide all buttons\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').addClass('fr-hidden')\r\n\r\n      // Remove wrapper div from button groups\r\n      _removeButtonGroupWrappers()\r\n\r\n      for (const groupName in buttonGroups) {\r\n\r\n        // Current button group\r\n        let buttonGroup = buttonGroups[groupName]\r\n\r\n        // Ignore non-button groups\r\n        if (!buttonGroup.buttons) {\r\n          continue\r\n        }\r\n\r\n        // Current button group Details\r\n        let moreToolbarButtons\r\n        let buttonCount = 0\r\n        let visibleButtons = 3\r\n        const mainToolbarButtons = $(`<div class=\"fr-btn-grp fr-float-${buttonGroups[groupName].align ? buttonGroups[groupName].align : 'left'}\"></div>`)\r\n        if (buttonGroups.showMoreButtons) {\r\n          moreToolbarButtons = $('<div class=\"fr-more-toolbar\"></div>').data('name', `${groupName}-${editor.id}`)\r\n        }\r\n\r\n        for (let i = 0; i < buttonGroup.buttons.length; i++) {\r\n\r\n          // If buttonVisible is provided then use it\r\n          if (buttonGroup.buttonsVisible !== undefined) {\r\n            visibleButtons = buttonGroup.buttonsVisible\r\n          }\r\n\r\n          // Get the button for the command\r\n          let $btn = editor.$tb.find('> .fr-command[data-cmd=\"' + buttonGroup.buttons[i] + '\"], > div.fr-btn-wrap > .fr-command[data-cmd=\"' + buttonGroup.buttons[i] + '\"]')\r\n          let $dropdown = null\r\n\r\n          // If it is a dropdown button\r\n          if (editor.node.hasClass($btn.next().get(0), 'fr-dropdown-menu')) {\r\n            $dropdown = $btn.next()\r\n          }\r\n\r\n          // If it is a button with options\r\n          if (editor.node.hasClass($btn.next().get(0), 'fr-options')) {\r\n            $btn.removeClass('fr-hidden')\r\n            $btn.next().removeClass('fr-hidden')\r\n            $btn = $btn.parent()\r\n          }\r\n\r\n          // Show the buttons in the toolbar\r\n          $btn.removeClass('fr-hidden')\r\n\r\n          // Wrap the buttons in a button group\r\n          if (buttonGroups.showMoreButtons && buttonCount >= visibleButtons) {\r\n            moreToolbarButtons.append($btn)\r\n            if ($dropdown) {\r\n              moreToolbarButtons.append($dropdown)\r\n            }\r\n          }\r\n          else {\r\n            mainToolbarButtons.append($btn)\r\n            if ($dropdown) {\r\n              mainToolbarButtons.append($dropdown)\r\n            }\r\n          }\r\n\r\n          buttonCount++\r\n        }\r\n\r\n        // Add more button if buttons in group are more than 'buttonsVisible'\r\n        if (buttonGroups.showMoreButtons && buttonCount > visibleButtons) {\r\n          let $moreButton = editor.$tb.find(`.fr-command[data-cmd=\"${groupName}\"]`)\r\n          if ($moreButton.length > 0) {\r\n            $moreButton.removeClass('fr-hidden fr-open')\r\n          }\r\n          else {\r\n            // Create a new more button if not present already\r\n            const cmdName = groupName\r\n            const cmdInfo = FE.COMMANDS[cmdName]\r\n            cmdInfo.more_btn = true\r\n            $moreButton = $(editor.button.build(cmdName, cmdInfo, true))\r\n\r\n            // Register the more button\r\n            editor.button.addButtons($moreButton)\r\n          }\r\n          mainToolbarButtons.append($moreButton)\r\n        }\r\n\r\n        // Append visible buttons on the main toolbar\r\n        mainToolbarButtonGroups.push(mainToolbarButtons)\r\n\r\n        // Append more toolbar buttons\r\n        if (buttonGroups.showMoreButtons) {\r\n          moreToolbarButtonGroups.push(moreToolbarButtons)\r\n        }\r\n      }\r\n\r\n      // Append button groups to the editor\r\n      if (editor.opts.toolbarBottom) {\r\n        editor.$tb.append(moreToolbarButtonGroups)\r\n        editor.$tb.find('.fr-newline').remove()\r\n        editor.$tb.append('<div class=\"fr-newline\"></div>')\r\n        editor.$tb.append(mainToolbarButtonGroups)\r\n      }\r\n      else {\r\n        editor.$tb.append(mainToolbarButtonGroups)\r\n        editor.$tb.find('.fr-newline').remove()\r\n        editor.$tb.append('<div class=\"fr-newline\"></div>')\r\n        editor.$tb.append(moreToolbarButtonGroups)\r\n      }\r\n\r\n      // Close the more toolbar\r\n      editor.$tb.removeClass('fr-toolbar-open')\r\n      editor.$box.removeClass('fr-toolbar-open')\r\n\r\n      // Switch to normal view if in code view\r\n      editor.events.trigger('codeView.toggle')\r\n    }\r\n\r\n    // Refresh more toolbar height on resize\r\n    setMoreToolbarsHeight()\r\n  }\r\n\r\n  /**\r\n   * Set the buttons visibility based on screen size.\r\n   */\r\n  function _setVisibility() {\r\n    editor.events.$on($(editor.o_win), 'resize', _showScreenButtons)\r\n    editor.events.$on($(editor.o_win), 'orientationchange', _showScreenButtons)\r\n  }\r\n\r\n  function showInline(e, force) {\r\n    setTimeout(() => {\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n      // Condition added to avoid showing toolbar when the table has contenteditable:false\r\n      if ((!e || e.which != FE.KEYCODE.ESC) && editor.selection.inEditor() && editor.core.hasFocus() && !editor.popups.areVisible() && $(editor.selection.blocks()[0]).closest('table').attr('contenteditable') != 'false') {\r\n        if (editor.opts.toolbarVisibleWithoutSelection || !editor.selection.isCollapsed() && !editor.keys.isIME() || force) {\r\n          editor.$tb.data('instance', editor)\r\n\r\n          // Check if we should actually show the toolbar.\r\n          if (editor.events.trigger('toolbar.show', [e]) === false) {\r\n            return\r\n          }\r\n\r\n          editor.$tb.show()\r\n\r\n          if (!editor.opts.toolbarContainer) {\r\n            editor.position.forSelection(editor.$tb)\r\n          }\r\n\r\n          if (editor.opts.zIndex > 1) {\r\n            editor.$tb.css('z-index', editor.opts.zIndex + 1)\r\n          }\r\n          else {\r\n            editor.$tb.css('z-index', null)\r\n          }\r\n        }\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  function hide(e) {\r\n\r\n    // Prevent hiding the editor toolbar when changing the window.\r\n    if (e && e.type === 'blur' && document.activeElement === editor.el) {\r\n      return false\r\n    }\r\n\r\n    // Do not hide toolbar if we press CTRL.\r\n    if (e && e.type === 'keydown' && editor.keys.ctrlKey(e)) {\r\n      return true\r\n    }\r\n\r\n    // Prevent hiding when dropdown is active and we scoll in it.\r\n    // https://github.com/froala/wysiwyg-editor/issues/1290\r\n    const $active_dropdowns = editor.button.getButtons('.fr-dropdown.fr-active')\r\n\r\n    if ($active_dropdowns.next().find(editor.o_doc.activeElement).length) {\r\n      return true\r\n    }\r\n\r\n    // Check if we should actually hide the toolbar.\r\n    if (editor.events.trigger('toolbar.hide') !== false) {\r\n      editor.$tb.hide()\r\n    }\r\n  }\r\n\r\n  function show() {\r\n\r\n    // Check if we should actually hide the toolbar.\r\n    if (editor.events.trigger('toolbar.show') === false) {\r\n      return false\r\n    }\r\n\r\n    editor.$tb.show()\r\n  }\r\n\r\n  let tm = null\r\n\r\n  function _showInlineWithTimeout(e) {\r\n    clearTimeout(tm)\r\n\r\n    if (!e || e.which !== FE.KEYCODE.ESC) {\r\n      tm = setTimeout(showInline, editor.opts.typingTimer)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the events for show / hide toolbar.\r\n   */\r\n  function _initInlineBehavior() {\r\n\r\n    // Window mousedown.\r\n    editor.events.on('window.mousedown', hide)\r\n\r\n    // Element keydown.\r\n    editor.events.on('keydown', hide)\r\n\r\n    // Element blur.\r\n    editor.events.on('blur', hide)\r\n\r\n    // Position the toolbar after expanding the more toolbar completely if toolbar is inline\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', function() {\r\n      editor.position.forSelection(editor.$tb)\r\n    })\r\n\r\n    // Window mousedown.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.on('window.mouseup', showInline)\r\n    }\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      if (!editor.helpers.isIOS()) {\r\n        editor.events.on('window.touchend', showInline)\r\n\r\n        if (editor.browser.mozilla) {\r\n          setInterval(showInline, 200)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      editor.events.on('window.keyup', _showInlineWithTimeout)\r\n    }\r\n\r\n    // Hide editor on ESC.\r\n    editor.events.on('keydown', (e) => {\r\n      if (e && e.which === FE.KEYCODE.ESC) {\r\n        editor.events.trigger('toolbar.esc')\r\n      }\r\n    })\r\n\r\n    // Enable accessibility shortcut.\r\n    editor.events.on('keydown', (e) => {\r\n      if (e.which === FE.KEYCODE.ALT) {\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    editor.events.$on(editor.$wp, 'scroll.toolbar', showInline)\r\n    editor.events.on('commands.after', showInline)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', _showInlineWithTimeout)\r\n      editor.events.$on(editor.$doc, 'orientationchange', showInline)\r\n    }\r\n  }\r\n\r\n\r\n  function _initPositioning() {\r\n\r\n    // Toolbar is inline.\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Mobile should handle this as regular.\r\n      editor.$sc.append(editor.$tb)\r\n\r\n      // Add toolbar to body.\r\n      editor.$tb.data('container', editor.$sc)\r\n\r\n      // Add inline class.\r\n      editor.$tb.addClass('fr-inline')\r\n\r\n\r\n      // Init mouse behavior.\r\n      _initInlineBehavior()\r\n\r\n      editor.opts.toolbarBottom = false\r\n    }\r\n\r\n    // Toolbar is normal.\r\n    else {\r\n\r\n      // Won't work on iOS.\r\n      if (editor.opts.toolbarBottom && !editor.helpers.isIOS()) {\r\n        editor.$box.append(editor.$tb)\r\n        editor.$tb.addClass('fr-bottom')\r\n        editor.$box.addClass('fr-bottom')\r\n      }\r\n      else {\r\n        editor.opts.toolbarBottom = false\r\n        editor.$box.prepend(editor.$tb)\r\n        editor.$tb.addClass('fr-top')\r\n        editor.$box.addClass('fr-top')\r\n      }\r\n\r\n      editor.$tb.addClass('fr-basic')\r\n\r\n      if (editor.opts.toolbarSticky) {\r\n        if (editor.opts.toolbarStickyOffset) {\r\n          if (editor.opts.toolbarBottom) {\r\n            editor.$tb.css('bottom', editor.opts.toolbarStickyOffset)\r\n          }\r\n          else {\r\n            editor.$tb.css('top', editor.opts.toolbarStickyOffset)\r\n          }\r\n        }\r\n\r\n        editor.position.addSticky(editor.$tb)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _sharedDestroy() {\r\n    editor.$tb.html('').removeData().remove()\r\n    editor.$tb = null\r\n\r\n    if (editor.$second_tb) {\r\n      editor.$second_tb.html('').removeData().remove()\r\n      editor.$second_tb = null\r\n    }\r\n  }\r\n\r\n  function _destroy() {\r\n    editor.$box.removeClass('fr-top fr-bottom fr-inline fr-basic')\r\n    editor.$box.find('.fr-sticky-dummy').remove()\r\n  }\r\n\r\n  function _setDefaults() {\r\n    if (editor.opts.theme) {\r\n      editor.$tb.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      editor.$tb.css('z-index', editor.opts.zIndex + 1)\r\n    }\r\n\r\n    // Set direction.\r\n    if (editor.opts.direction !== 'auto') {\r\n      editor.$tb.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n\r\n    // Mark toolbar for desktop / mobile.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.$tb.addClass('fr-desktop')\r\n    }\r\n    else {\r\n      editor.$tb.addClass('fr-mobile')\r\n    }\r\n\r\n    // Set the toolbar specific position inline / normal.\r\n    if (!editor.opts.toolbarContainer) {\r\n      _initPositioning()\r\n    }\r\n    else {\r\n      if (editor.opts.toolbarInline) {\r\n        _initInlineBehavior()\r\n        hide()\r\n      }\r\n\r\n      if (editor.opts.toolbarBottom) {\r\n        editor.$tb.addClass('fr-bottom')\r\n      }\r\n      else {\r\n        editor.$tb.addClass('fr-top')\r\n      }\r\n    }\r\n\r\n    // Add buttons to the toolbar.\r\n    // Set their visibility for different screens.\r\n    // Asses commands to the butttons.\r\n    _addButtons()\r\n    _setVisibility()\r\n\r\n    editor.accessibility.registerToolbar(editor.$tb)\r\n\r\n    // Make sure we don't trigger blur.\r\n    editor.events.$on(editor.$tb, `${editor._mousedown} ${editor._mouseup}`, (e) => {\r\n      const originalTarget = e.originalEvent ? e.originalEvent.target || e.originalEvent.originalTarget : null\r\n\r\n      if (originalTarget && originalTarget.tagName !== 'INPUT' && !editor.edit.isDisabled()) {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1972\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$tb,'click',() =>{\r\n        // Check for active popups and retain focus in editor if none.\r\n        if (!editor.popups.areVisible().length) {\r\n          editor.$el.focus();\r\n        }\r\n      })\r\n    }\r\n\r\n    // Refresh the screen size if in fullscreen mode after the more toolbar expands completely\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', () => {\r\n      if (editor.$box.hasClass('fr-fullscreen')) {\r\n        editor.opts.height = editor.o_win.innerHeight - (editor.opts.toolbarInline ? 0 : editor.$tb.outerHeight() + (editor.$second_tb ? editor.$second_tb.outerHeight() : 0))\r\n        editor.size.refresh()\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Initialize\r\n   */\r\n  function _init() {\r\n    editor.$sc = $(editor.opts.scrollableContainer).first()\r\n\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    // Add second toolbar\r\n    if (!editor.opts.toolbarInline && !editor.opts.toolbarBottom) {\r\n      editor.$second_tb = $(editor.doc.createElement('div')).attr('class', 'fr-second-toolbar')\r\n      editor.$box.append(editor.$second_tb)\r\n\r\n      // Add powered by attribution.\r\n      if (!(editor.ul === false && !editor.opts.attribution)) {\r\n        editor.$second_tb.prepend(FE.POWERED_BY)\r\n      }\r\n    }\r\n\r\n    // Container for toolbar.\r\n    if (editor.opts.toolbarContainer) {\r\n\r\n      // Shared toolbar.\r\n      if (!editor.shared.$tb) {\r\n        editor.shared.$tb = $(editor.doc.createElement('DIV'))\r\n        editor.shared.$tb.addClass('fr-toolbar')\r\n        editor.$tb = editor.shared.$tb\r\n        $(editor.opts.toolbarContainer).append(editor.$tb)\r\n        _setDefaults()\r\n        editor.$tb.data('instance', editor)\r\n      }\r\n      else {\r\n        editor.$tb = editor.shared.$tb\r\n\r\n        if (editor.opts.toolbarInline) {\r\n          _initInlineBehavior()\r\n        }\r\n      }\r\n\r\n      if (editor.opts.toolbarInline) {\r\n\r\n        // Update box.\r\n        editor.$box.addClass('fr-inline')\r\n      }\r\n      else {\r\n        editor.$box.addClass('fr-basic')\r\n      }\r\n\r\n      // On focus set the current instance.\r\n      editor.events.on('focus', () => {\r\n        editor.$tb.data('instance', editor)\r\n      }, true)\r\n\r\n      editor.opts.toolbarInline = false\r\n    }\r\n    else if (editor.opts.toolbarInline) {\r\n      // Update box.\r\n      editor.$box.addClass('fr-inline')\r\n\r\n      // Check for shared toolbar.\r\n      if (!editor.shared.$tb) {\r\n        editor.shared.$tb = $(editor.doc.createElement('DIV'))\r\n        editor.shared.$tb.addClass('fr-toolbar')\r\n        editor.$tb = editor.shared.$tb\r\n        _setDefaults()\r\n      }\r\n      else {\r\n        editor.$tb = editor.shared.$tb\r\n\r\n        // Init mouse behavior.\r\n        _initInlineBehavior()\r\n      }\r\n    }\r\n    else {\r\n      editor.$box.addClass('fr-basic')\r\n      editor.$tb = $(editor.doc.createElement('DIV'))\r\n      editor.$tb.addClass('fr-toolbar')\r\n      _setDefaults()\r\n\r\n      editor.$tb.data('instance', editor)\r\n    }\r\n\r\n    // Destroy.\r\n    editor.events.on('destroy', _destroy, true)\r\n    editor.events.on(!editor.opts.toolbarInline && !editor.opts.toolbarContainer ? 'destroy' : 'shared.destroy', _sharedDestroy, true)\r\n\r\n    // Bind edit on /off events.\r\n    editor.events.on('edit.on', function () {\r\n      editor.$tb.removeClass('fr-disabled').removeAttr('aria-disabled')\r\n    })\r\n\r\n    editor.events.on('edit.off', function () {\r\n      editor.$tb.addClass('fr-disabled').attr('aria-disabled', true)\r\n    })\r\n\r\n    _initShortcuts();\r\n  }\r\n\r\n  function _initShortcuts() {\r\n    editor.events.on('shortcut', function (e, cmd, val) {\r\n      // Search for button.\r\n      let $btn\r\n\r\n      if (cmd && !val) {\r\n        $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd}\"]`)\r\n      }\r\n      else if (cmd && val) {\r\n        $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd}\"][data-param1=\"${val}\"]`)\r\n      }\r\n\r\n      // Button found.\r\n      if ($btn.length) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        $btn.parents('.fr-toolbar').data('instance', editor)\r\n\r\n        if (e.type === 'keydown') {\r\n          editor.button.exec($btn)\r\n\r\n          return false\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  let disabled = false\r\n\r\n  function disable() {\r\n    if (!disabled && editor.$tb) {\r\n      // Toolbar Button is two level down from toolbar div\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').addClass('fr-disabled fr-no-refresh').attr('aria-disabled', true)\r\n      disabled = true\r\n    }\r\n  }\r\n\r\n  function enable() {\r\n    if (disabled && editor.$tb) {\r\n      // Toolbar Button is two level down from toolbar div\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').removeClass('fr-disabled fr-no-refresh').attr('aria-disabled', false)\r\n      disabled = false\r\n    }\r\n\r\n    editor.button.bulkRefresh()\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    hide,\r\n    show,\r\n    showInline,\r\n    disable,\r\n    enable,\r\n    setMoreToolbarsHeight\r\n  }\r\n}\r\n","\r\nconst passiveEvents = ['scroll', 'wheel', 'touchmove', 'touchstart', 'touchend']\r\n\r\n// All possible prefixes of an event\r\nconst eventPrefixes = [ 'webkit', 'moz', 'ms', 'o' ]\r\n\r\n// Events which are browser dependent\r\nconst irregularEvents = [ 'transitionend' ]\r\n\r\n// List of all styles\r\nconst stylesList = document.createElement('div').style\r\n\r\n// All possible prefixes of a css property\r\nconst cssPrefixes = [ 'Webkit', 'Moz', 'ms', 'O', 'css', 'style' ]\r\n\r\n// Properties to be applied to get correct element styles\r\nconst cssShow = { visibility: 'hidden', display: 'block' }\r\n\r\n// Special Events\r\nconst specialEvents = ['focus', 'blur', 'click']\r\n\r\n// Map to cache computed correct style names\r\nconst correctStyleName = {}\r\n\r\nvar _getEvent = function (e, target) {\r\n  return {\r\n    altKey: e.altKey,\r\n    bubbles: e.bubbles,\r\n    cancelable: e.cancelable,\r\n    changedTouches: e.changedTouches,\r\n    ctrlKey: e.ctrlKey,\r\n    detail: e.detail,\r\n    eventPhase: e.eventPhase,\r\n    metaKey: e.metaKey,\r\n    pageX: e.pageX,\r\n    pageY: e.pageY,\r\n    shiftKey: e.shiftKey,\r\n    view: e.view,\r\n    'char': e.char,\r\n    key: e.key,\r\n    keyCode: e.keyCode,\r\n    button: e.button,\r\n    buttons: e.buttons,\r\n    clientX: e.clientX,\r\n    clientY: e.clientY,\r\n    offsetX: e.offsetX,\r\n    offsetY: e.offsetY,\r\n    pointerId: e.pointerId,\r\n    pointerType: e.pointerType,\r\n    screenX: e.screenX,\r\n    screenY: e.screenY,\r\n    targetTouches: e.targetTouches,\r\n    toElement: e.toElement,\r\n    touches: e.touches,\r\n    type: e.type,\r\n    which: e.which,\r\n    target: e.target,\r\n    currentTarget: target,\r\n    originalEvent: e,\r\n    stopPropagation: function () { e.stopPropagation(); },\r\n    stopImmediatePropagation: function () { e.stopImmediatePropagation(); },\r\n    preventDefault: function () {\r\n      if (passiveEvents.indexOf(e.type) === -1) { \r\n        e.preventDefault(); \r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar isPartOfDOM = function isPartOfDOM (target) {\r\n  return ((target.ownerDocument && target.ownerDocument.body.contains(target)) || target.nodeName === '#document' || target.nodeName === 'HTML' || target === window)\r\n}\r\n\r\nvar _getDelegator = function (fn, selector) {\r\n  return function (e) {\r\n    // Get the element the event was raised by.\r\n    let target = e.target;\r\n\r\n    // Loop parents.\r\n    if (selector) {\r\n      selector = _normalizeSelector(selector);\r\n\r\n      while (target && target !== this) {\r\n\r\n        // Check if the current target matches\r\n        if (target.matches && target.matches(_normalizeSelector(selector))) {\r\n\r\n          fn.call(target, _getEvent(e, target));\r\n        }\r\n\r\n        target = target.parentNode;\r\n      }\r\n    }\r\n    else {\r\n      if(isPartOfDOM(target)) {\r\n        fn.call(target, _getEvent(e, target));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar jQuery = function (selector, context) {\r\n  return new init(selector, context);\r\n}\r\n\r\nvar _normalizeSelector = function(selector) {\r\n  if (selector && typeof selector == 'string') {\r\n    // Modified the regex to handle the spaces before '>'\r\n    return selector.replace(/^\\s*>/g, ':scope >').replace(/,\\s*>/g, ', :scope >');\r\n  }\r\n  return selector;\r\n};\r\n\r\nvar isFunction = function isFunction(obj) {\r\n\r\n  // Support: Chrome <=57, Firefox <=52\r\n  // In some browsers, typeof returns \"function\" for HTML <object> elements\r\n  // (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\r\n  // We don't want to classify *any* DOM node as a function.\r\n  return typeof obj === 'function' && typeof obj.nodeType !== 'number';\r\n};\r\n\r\nvar $ = jQuery;\r\n\r\njQuery.fn = jQuery.prototype = {\r\n  constructor: jQuery,\r\n\r\n  // The default length of a jQuery object is 0\r\n  length: 0,\r\n\r\n  contains: function (obj) {\r\n    if (!obj) return false;\r\n\r\n    if (Array.isArray(obj)) {\r\n      for (let i = 0; i < obj.length; i++) {\r\n        if (this.contains(obj[i]) && this != obj[i]) return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      let node = obj;\r\n\r\n      while (node) {\r\n        if (node == this[i] || (node[0] && node[0].isEqualNode(this[i]))) {\r\n          return true\r\n        }\r\n\r\n        node = node.parentNode\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  findVisible: function (selector) {\r\n    const $els = this.find(selector);\r\n\r\n    for (let i = $els.length - 1; i >= 0; i--) {\r\n      if (!$($els[i]).isVisible()) {\r\n        $els.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    return $els;\r\n  },\r\n\r\n  // Encode URL parameters\r\n  formatParams: function ( params ){\r\n    var formattedParams = `${Object\r\n      .keys(params)\r\n      .map(function(key){\r\n        return `${key}=${encodeURIComponent(params[key])}`\r\n      })\r\n      .join('&')}`\r\n\r\n    return formattedParams ? formattedParams : '';\r\n  },\r\n\r\n  // Takes a request object for making http requests using XMLHttpRequest\r\n  ajax: function (request) {\r\n\r\n    const xhr = new XMLHttpRequest()\r\n    const data = this.formatParams(request.data)\r\n\r\n    // Add request params to the URL for GET request \r\n    if(request.method.toUpperCase() === 'GET'){\r\n      request.url = data ? request.url + '?' + data : request.url\r\n    }\r\n\r\n    // Make it async.\r\n    xhr.open(request.method, request.url, true)\r\n\r\n    // Set with credentials.\r\n    if (request.withCredentials) {\r\n      xhr.withCredentials = true\r\n    }\r\n\r\n    // Set with CORS\r\n    if (request.crossDomain) {\r\n      xhr.setRequestHeader('Access-Control-Allow-Origin', '*')\r\n    }\r\n\r\n    // Set headers.\r\n    for (const header in request.headers) {\r\n      if (Object.prototype.hasOwnProperty.call(request.headers, header)) {\r\n        xhr.setRequestHeader(header, request.headers[header])\r\n      }\r\n    }\r\n\r\n    if(!Object.prototype.hasOwnProperty.call(request.headers, 'Content-Type')) {\r\n      // Set json data type\r\n      if (request.dataType === 'json') {\r\n        xhr.setRequestHeader('Content-Type', 'application/json')\r\n      } else {\r\n        //Set deafult Content-Type\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8')\r\n      }\r\n    }\r\n\r\n    // Set events.\r\n    xhr.onload = function () {\r\n      if (xhr.status == 200) {\r\n        let data = xhr.responseText\r\n        if (request.dataType === 'json') {\r\n          data = JSON.parse(data)\r\n        }\r\n        request.done(data, xhr.status, xhr)  \r\n      } else {\r\n        request.fail(xhr)\r\n      }\r\n    }\r\n\r\n    // Send data.\r\n    xhr.send(data)\r\n  },\r\n\r\n  // Get all previous siblings of an element\r\n  prevAll: function() {\r\n    const res = $()\r\n    if (!this[0]) {\r\n      return res\r\n    }\r\n\r\n    let elem = this[0]\r\n    while (elem && elem.previousSibling) {\r\n      elem = elem.previousSibling\r\n      res.push(elem)\r\n    }\r\n    return res\r\n  },\r\n\r\n  // Determine the position of an element within the set\r\n  index: function( elem ) {\r\n\r\n    // No argument, return index in parent\r\n    if ( !elem ) {\r\n      return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\r\n    }\r\n\r\n    // Index in selector\r\n    if ( typeof elem === 'string' ) {\r\n      return [].indexOf.call( $( elem ), this[ 0 ] );\r\n    }\r\n\r\n    // Locate the position of the desired element\r\n    return [].indexOf.call( this,\r\n\r\n      // If it receives a jQuery object, the first element is used\r\n      elem.length ? elem[ 0 ] : elem\r\n    );\r\n  },\r\n\r\n  isVisible: function () {\r\n    if(!this[0]){\r\n      return false\r\n    }\r\n    return !!(this[0].offsetWidth || this[0].offsetHeight || this[0].getClientRects().length)\r\n  },\r\n\r\n  toArray: function () {\r\n    return [].slice.call(this);\r\n  },\r\n\r\n  // Get the Nth element in the matched element set OR\r\n  // Get the whole matched element set as a clean array\r\n  get: function (num) {\r\n\r\n    // Return all the elements in a clean array\r\n    if (num == null) {\r\n      return [].slice.call(this);\r\n    }\r\n\r\n    // Return just the one element from the set\r\n    return num < 0 ? this[num + this.length] : this[num];\r\n  },\r\n\r\n  // Take an array of elements and push it onto the stack\r\n  // (returning the new matched element set)\r\n  pushStack: function (elems) {\r\n\r\n    // Build a new jQuery matched element set\r\n    const ret = jQuery.merge(this.constructor(), elems);\r\n\r\n    // Add the old object onto the stack (as a reference)\r\n    ret.prevObject = this;\r\n\r\n    // Return the newly-formed element set\r\n    return ret;\r\n  },\r\n\r\n  wrapAll: function (html) {\r\n    let wrap;\r\n\r\n    if (this[0]) {\r\n      if (isFunction(html)) {\r\n        html = html.call(this[0]);\r\n      }\r\n\r\n      // The elements to wrap the target around\r\n      wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);\r\n\r\n      if (this[0].parentNode) {\r\n        wrap.insertBefore(this[0]);\r\n      }\r\n\r\n      wrap.map(function () {\r\n        let elem = this;\r\n\r\n        while (elem.firstElementChild) {\r\n          elem = elem.firstElementChild;\r\n        }\r\n\r\n        return elem;\r\n      }).append(this);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  wrapInner: function(wrapper) {\r\n    if (typeof wrapper === 'string') {\r\n      const wrapperProps = wrapper.split(' ')\r\n      let i = 0\r\n\r\n      // Remove all empty props\r\n      while (i < wrapperProps.length && wrapperProps[i].trim().length === 0) i++\r\n\r\n      // First non-empty property is the element itself\r\n      if (i < wrapperProps.length) {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1928\r\n        if ($(wrapper).length && wrapperProps[i].trim() === $(wrapper)[0].tagName) {\r\n          wrapper = document.createElement(wrapperProps[i].trim())\r\n        }\r\n\r\n        i++\r\n      }\r\n\r\n      // Make sure it is re-initialized\r\n      if (typeof wrapper !== 'string') {\r\n        \r\n        // Add all wrapper attributes\r\n        const $wrapper = $(wrapper)\r\n        for (; i < wrapperProps.length; i++) {\r\n          wrapperProps[i] = wrapperProps[i].trim()\r\n          const attr = wrapperProps[i].split('=')\r\n          $wrapper.attr(attr[0], attr[1].replace('\"', ''))\r\n        }\r\n      }\r\n    }\r\n\r\n    while(this[0].firstChild && this[0].firstChild !== wrapper && typeof wrapper !== 'string') {\r\n      wrapper.appendChild(this[0].firstChild)\r\n    }\r\n  },\r\n\r\n  wrap: function (html) {\r\n    const htmlIsFunction = isFunction(html);\r\n\r\n    return this.each(function (i) {\r\n      $(this).wrapAll(htmlIsFunction ? html.call(this, i) : html);\r\n    });\r\n  },\r\n\r\n  unwrap: function() {\r\n\r\n    return this.parent().each( function() {\r\n      if ( !(this.nodeName && this.nodeName.toLowerCase() === name.toLowerCase())) {\r\n        jQuery( this ).replaceWith( this.childNodes );\r\n      }\r\n    } );\r\n\r\n  },\r\n\r\n  grep: function (elems, callback, invert) {\r\n    let callbackInverse,\r\n      matches = [],\r\n      i = 0,\r\n      length = elems.length,\r\n      callbackExpect = !invert;\r\n\r\n    // Go through the array, only saving the items\r\n    // that pass the validator function\r\n    for (; i < length; i++) {\r\n      callbackInverse = !callback(elems[i], i);\r\n      if (callbackInverse !== callbackExpect) {\r\n        matches.push(elems[i]);\r\n      }\r\n    }\r\n\r\n    return matches;\r\n  },\r\n\r\n  map: function (callback) {\r\n    return this.pushStack(jQuery.map(this, function (elem, i) {\r\n      return callback.call(elem, i, elem);\r\n    }));\r\n  },\r\n\r\n  slice: function () {\r\n    return this.pushStack([].slice.apply(this, arguments));\r\n  },\r\n\r\n  each: function (fn) {\r\n    if (this.length) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (fn.call(this[i], i, this[i]) === false) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  first: function () {\r\n    return this.eq(0);\r\n  },\r\n\r\n  last: function () {\r\n    return this.eq(-1);\r\n  },\r\n\r\n  eq: function (i) {\r\n    const len = this.length,\r\n      j = +i + (i < 0 ? len : 0);\r\n    return this.pushStack(j >= 0 && j < len ? [this[j]] : []);\r\n  },\r\n\r\n  empty: function () {\r\n    for (let i = 0; i < this.length; i++) {\r\n      this[i].innerHTML = ''\r\n    }\r\n  },\r\n\r\n  \r\n\r\n  contents: function () {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const cldrn = this[i].childNodes;\r\n      for (let j = 0; j < cldrn.length; j++) {\r\n        ret.push(cldrn[j]);\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  attr: function (name, val) {\r\n    if (typeof name === 'object') {\r\n      for (let k in name) {\r\n        if (Object.prototype.hasOwnProperty.call(name, k)) {\r\n          if(name[k] !== null) {\r\n            this.attr(k, name[k])\r\n          }\r\n        } \r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    if (typeof val !== 'undefined') {\r\n\r\n      if(name === 'checked') {\r\n        for(let i = 0; i < this.length; i++) { \r\n          this[i].checked = val\r\n        }\r\n      }\r\n      else if (name === 'tagName') {\r\n        for(let i = 0; i < this.length; i++) { \r\n          this[i].tagName = val\r\n        }\r\n      }\r\n      else {\r\n        for (let i = 0; i < this.length; i++) {\r\n          this[i].setAttribute(name, val);\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n    else {\r\n      if (this.length === 0 || !(this[0].getAttribute || name === 'checked')) {\r\n        return undefined;\r\n      }\r\n\r\n      if(name === 'checked') {\r\n        return this[0].checked\r\n      }\r\n      else if (name === 'tagName') {\r\n        return this[0].tagName\r\n      }\r\n\r\n      return this[0].getAttribute(name);\r\n    }\r\n  },\r\n\r\n  removeAttr: function (name) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].removeAttribute) this[i].removeAttribute(name);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  hide: function () {\r\n    this.css('display', 'none');\r\n\r\n    return this;\r\n  },\r\n\r\n  show: function () {\r\n    this.css('display', 'block');\r\n\r\n    return this;\r\n  },\r\n\r\n  focus: function () {\r\n    if (this.length) {\r\n      this[0].focus();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  blur: function () {\r\n    if (this.length) {\r\n      this[0].blur();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  data: function (name, val) {\r\n    // Object.\r\n    if (typeof val !== 'undefined') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i]['data-' + name] = val;\r\n\r\n        if (typeof val !== 'object' && typeof val !== 'function') {\r\n          if(this[i].setAttribute) {\r\n            this[i].setAttribute('data-' + name, val);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n    else {\r\n      if (typeof val !== 'undefined') {\r\n        return this.attr('data-' + name, val);\r\n      }\r\n      else {\r\n        if (this.length === 0) return undefined;\r\n\r\n        for (let i = 0; i < this.length; i++) {\r\n          let dt = this[i]['data-' + name];\r\n\r\n          if (typeof dt === 'undefined' || dt === null) {\r\n            if (this[i].getAttribute) {\r\n              dt = this[i].getAttribute('data-' + name);\r\n            }\r\n          }\r\n\r\n          if (typeof dt != 'undefined' && dt != null) {\r\n            return dt;\r\n          }\r\n        }\r\n\r\n        return undefined;\r\n      }\r\n    }\r\n  },\r\n\r\n  removeData: function (name) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].removeAttribute) this[i].removeAttribute('data-' + name);\r\n      this[i]['data-' + name] = null;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  getCorrectStyleName: function (name) {\r\n    // Compute only if not computed before\r\n    if (!correctStyleName[name]) {\r\n      let finalName\r\n      \r\n      // If a style with same name exists then it is the original name\r\n      if (name in stylesList) {\r\n        finalName = name\r\n      }\r\n      \r\n      // Make first letter capital\r\n      let capName = name[0].toUpperCase() + name.slice(1)\r\n\r\n      // Try attaching the prefixes and checking if it is a valid style name\r\n      let i = cssPrefixes.length\r\n      while (i--) {\r\n        name = cssPrefixes[i] + capName;\r\n        if (name in stylesList) {\r\n          finalName = name\r\n        }\r\n      }\r\n\r\n      // Store for future use\r\n      correctStyleName[name] = finalName\r\n    }\r\n    return correctStyleName[name]\r\n  },\r\n\r\n  css: function (name, val) {\r\n\r\n    if (typeof val !== 'undefined') {\r\n      if (this.length === 0) return this;\r\n\r\n      if (((typeof val === 'string' && val.trim() !== '' && !isNaN(val)) || typeof val === 'number') && /(margin)|(padding)|(height)|(width)|(top)|(left)|(right)|(bottom)/gi.test(name) && !/(line-height)/gi.test(name)) {\r\n        val = val + 'px'\r\n      }\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        // Make sure the style name is correct\r\n        name = $(this).getCorrectStyleName(name)\r\n        this[i].style[name] = val;\r\n      }\r\n\r\n      return this;\r\n    }\r\n    else if (typeof name == 'string') {\r\n      if (this.length === 0) return undefined;\r\n\r\n      const doc = this[0].ownerDocument || document;\r\n      const win = doc.defaultView || doc.parentWindow;\r\n\r\n      // Make sure the style name is correct\r\n      name = $(this).getCorrectStyleName(name)\r\n      \r\n      return win.getComputedStyle(this[0])[name];\r\n    }\r\n    else {\r\n      for (let key in name) {\r\n        if (Object.prototype.hasOwnProperty.call(name, key)) {\r\n          this.css(key, name[key]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n  },\r\n\r\n  toggleClass: function (name, val) {\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        this.toggleClass(names[i], val);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (typeof val === 'undefined') {\r\n        if(this[i].classList.contains(name)){\r\n          this[i].classList.remove(name)\r\n        }\r\n        else {\r\n          this[i].classList.add(name)\r\n        }\r\n      } \r\n      else {\r\n        if (val) {\r\n          if(!this[i].classList.contains(name)){\r\n            this[i].classList.add(name)\r\n          }\r\n        }\r\n        else {\r\n          if(this[i].classList.contains(name)){\r\n            this[i].classList.remove(name)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  addClass: function (name) {\r\n    if (name.length === 0) return this;\r\n\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        this.addClass(names[i]);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      this[i].classList.add(name);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  removeClass: function (name) {\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        names[i] = names[i].trim();\r\n\r\n        if (names[i].length) {\r\n          this.removeClass(names[i]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (name.length) {\r\n        this[i].classList.remove(name);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  \r\n  getClass: function getClass( elem ) {\r\n    return elem.getAttribute && elem.getAttribute( 'class' ) || '';\r\n  },\r\n\r\n  stripAndCollapse: function stripAndCollapse( value ) {\r\n    const rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\r\n    const tokens = value.match( rnothtmlwhite ) || [];\r\n    return tokens.join( ' ' );\r\n  },\r\n\r\n  hasClass: function( selector ) {\r\n    let className, elem,\r\n      i = 0;\r\n\r\n    className = ' ' + selector + ' ';\r\n    while ( ( elem = this[ i++ ] ) ) {\r\n      if ( elem.nodeType === 1 &&\r\n\t\t\t\t( ' ' + $(this).stripAndCollapse( $(this).getClass( elem ) ) + ' ' ).indexOf( className ) > -1 ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  scrollTop: function (val) {\r\n    if (typeof val !== 'undefined') {\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i] === document) {\r\n          window.scrollTo(document.documentElement.scrollLeft, val)\r\n        } \r\n        else {\r\n          this[i].scrollTop = val\r\n        }\r\n      }\r\n    }\r\n    else {\r\n\r\n      if (this.length === 0) return undefined\r\n\r\n      if (this[0] === document) {\r\n        return document.documentElement.scrollTop\r\n      }\r\n\r\n      return this[0].scrollTop\r\n    }\r\n  },\r\n\r\n  scrollLeft: function (val) {\r\n    if (typeof val !== 'undefined') {\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i] === document) {\r\n          window.scrollTo(val, document.documentElement.scrollTop)\r\n        } \r\n        else {\r\n          this[i].scrollLeft = val\r\n        }\r\n      }\r\n    }\r\n    else {\r\n\r\n      if (this.length === 0) return undefined\r\n\r\n      if (this[0] === document) {\r\n        return document.documentElement.scrollLeft\r\n      }\r\n\r\n      return this[0].scrollLeft\r\n    }\r\n  },\r\n\r\n\r\n  on: function (eventName, selector, fn) {\r\n    if (eventName.split(' ').length > 1) {\r\n      const events = eventName.split(' ');\r\n      for (let i = 0; i < events.length; i++) {\r\n        // If it is a browser dependent or irregular event\r\n        if (irregularEvents.indexOf(eventName) !== -1) {\r\n          // Bind all events created by attaching all possible prefixes\r\n          for (let j = 0; j < eventPrefixes.length; j++) {\r\n            this.on(eventPrefixes[j] + eventName[0].toUpperCase() + eventName.slice(1), selector, fn)\r\n          }\r\n        }\r\n        else {\r\n          this.on(events[i], selector, fn)\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n\r\n    if (typeof selector === 'function') {\r\n      fn = _getDelegator(selector, null);\r\n    }\r\n    else {\r\n      fn = _getDelegator(fn, selector);\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const $el = $(this[i]);\r\n\r\n      if (!$el.data('events')) {\r\n        $el.data('events', []);\r\n      }\r\n\r\n      const eventHandlers = $el.data('events');\r\n\r\n      eventHandlers.push([eventName, fn]);\r\n\r\n      let domEvent = eventName.split('.');\r\n      domEvent = domEvent[0];\r\n\r\n      if (passiveEvents.indexOf(domEvent) >= 0) {\r\n        $el.get(0).addEventListener(domEvent, fn, { passive: true })\r\n      } \r\n      else {\r\n        $el.get(0).addEventListener(domEvent, fn)\r\n      }\r\n    }\r\n  },\r\n\r\n  off: function (eventName) {\r\n    if (eventName.split(' ').length > 1) {\r\n      const events = eventName.split(' ');\r\n      for (let i = 0; i < events.length; i++) {\r\n        this.off(events[i]);\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const $el = $(this[i]);\r\n\r\n      const eventHandlers = $el.data('events');\r\n\r\n      if (eventHandlers) {\r\n        let domEvent = eventName.split('.');\r\n        domEvent = domEvent[0];\r\n\r\n        const eventHandlers = $el.data('events') || [];\r\n\r\n        for (let k = eventHandlers.length - 1; k >= 0; k--) {\r\n          const eventHandler = eventHandlers[k];\r\n\r\n          if (eventHandler[0] == eventName) {\r\n            $el.get(0).removeEventListener(domEvent, eventHandler[1]);\r\n\r\n            eventHandlers.splice(k, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  trigger: function (type) {\r\n    for(let i = 0; i < this.length; i++) {\r\n      let event;\r\n      // If it is a mouse event\r\n      if (typeof(Event) === 'function') {\r\n        if (type.search(/^mouse/g) >= 0) {\r\n          event = new MouseEvent(type, { view: window, cancelable: true, bubbles: true })\r\n        }\r\n        else {\r\n          event = new Event(type)\r\n        }\r\n      }\r\n      else {\r\n        // If it is a mouse event\r\n        if (type.search(/^mouse/g) >= 0) {\r\n          event = document.createEvent('MouseEvents')\r\n          event.initMouseEvent(type, true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\r\n        }\r\n        else {\r\n          event = document.createEvent('Event')\r\n          event.initEvent(type, true, true)\r\n        }\r\n      }\r\n      // Handle special events separately\r\n      if (specialEvents.indexOf(type) >= 0 && typeof this[i][type] === 'function') {\r\n        this[i][type]()\r\n      } \r\n      else {\r\n        this[i].dispatchEvent(event)\r\n      }\r\n    }\r\n  },\r\n\r\n  triggerHandler: function () {\r\n  },\r\n\r\n  val: function (new_val) {\r\n    if (typeof new_val != 'undefined') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].value = new_val;\r\n      }\r\n\r\n      return this;\r\n    }\r\n    else {\r\n      return this[0].value;\r\n    }\r\n  },\r\n\r\n  siblings: function () {\r\n    return $(this[0]).parent().children().not(this);\r\n  },\r\n\r\n  find: function (selector) {\r\n    \r\n    const ret = $();\r\n\r\n    if(typeof selector !== 'string') {\r\n      for (let i = 0; i < selector.length; i++) {\r\n        for (let j = 0; j < this.length; j++ ) {\r\n          if ( this[j] !== selector[i] && $(this[j]).contains( selector[i]) ) {\r\n            ret.push(selector[i])\r\n            break\r\n          }\r\n        }\r\n      }\r\n      return ret\r\n    }\r\n\r\n    \r\n    const isElement = function (o) {\r\n      return (\r\n        typeof HTMLElement === 'object' ? o instanceof HTMLElement : //DOM2\r\n          o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string'\r\n      )\r\n    }\r\n\r\n    selector = _normalizeSelector(selector);\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].querySelectorAll) {\r\n        let els = []\r\n        if (selector && typeof selector == 'string') {\r\n          els = this[i].querySelectorAll(selector);\r\n        } else if (isElement(selector)) {\r\n          els = [selector];\r\n        }\r\n        for (let j = 0; j < els.length; j++) {\r\n          ret.push(els[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  children: function () {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const cldrn = this[i].children;\r\n      for (let j = 0; j < cldrn.length; j++) {\r\n        ret.push(cldrn[j]);\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  not: function (selector) {\r\n    if (typeof selector === 'string') {\r\n      for (let i = this.length - 1; i >= 0; i--) {\r\n        if (this[i].matches(selector)) {\r\n          this.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (selector instanceof jQuery) {\r\n        for (let i = this.length - 1; i >= 0; i--) {\r\n          for (let j = 0; j < selector.length; j++) {\r\n            if (this[i] === selector[j]) {\r\n              this.splice(i, 1);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        for (let i = this.length - 1; i >= 0; i--) {\r\n          if (this[i] === selector[0]) {\r\n            this.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  add: function (ary) {\r\n    for (let i = 0; i < ary.length; i++) {\r\n      this.push(ary[i]);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  closest: function (selector) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      const clst = this[i].closest && this[i].closest(selector);\r\n\r\n      if (clst) return $(clst);\r\n    }\r\n\r\n    return $();\r\n  },\r\n\r\n  html: function (str) {\r\n    if (typeof str == 'undefined') {\r\n      if (this.length === 0) return undefined;\r\n\r\n      return this[0].innerHTML;\r\n    }\r\n\r\n    if (typeof str === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].innerHTML = str;\r\n\r\n        // If any of the child nodes are scripts then run them\r\n        let children = this[i].children\r\n        let doc = this[i].ownerDocument || document\r\n        for (let j = 0; j < children.length; j++) {\r\n          if (children[j].tagName === 'SCRIPT') {\r\n            const script = doc.createElement('script')\r\n            script.innerHTML = children[j].innerHTML\r\n            doc.head.appendChild( script ).parentNode.removeChild( script )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this[0].innerHTML = '';\r\n\r\n      this.append(str[0]);\r\n\r\n      // Execute if it is script tag\r\n      let doc = this[0].ownerDocument || document\r\n      if (str[0].tagName === 'SCRIPT') {\r\n        const script = doc.createElement('script')\r\n        script.innerHTML = str[0].innerHTML\r\n        doc.head.appendChild( script ).parentNode.removeChild( script )\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  text: function (content) {\r\n    if (content) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].textContent = content;\r\n      }\r\n    }\r\n    else {\r\n      if (!this.length) return '';\r\n\r\n      return this[0].textContent;\r\n    }\r\n  },\r\n\r\n  after: function (content) {\r\n    if (content) {\r\n      if (typeof content == 'string') {\r\n        for (let i = 0; i < this.length; i++) {\r\n          const after = this[i];\r\n\r\n          if (after.nodeType != Node.ELEMENT_NODE) {\r\n            const doc = after.ownerDocument;\r\n            const tmp = doc.createElement('SPAN');\r\n\r\n            $(after).after(tmp);\r\n            $(tmp).after(content).remove();\r\n          }\r\n          else {\r\n            after.insertAdjacentHTML('afterend', content);\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        const after = this[0];\r\n\r\n        if (after.nextSibling) {\r\n          if (content instanceof jQuery) {\r\n            for (let i = 0; i < content.length; i++) {\r\n              after.nextSibling.parentNode.insertBefore(content[i], after.nextSibling)\r\n            }\r\n          }\r\n          else {\r\n            after.nextSibling.parentNode.insertBefore(content, after.nextSibling)\r\n          }\r\n        }\r\n        else {\r\n          $(after.parentNode).append(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  clone: function (deep) {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      ret.push(this[i].cloneNode(deep));\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  replaceWith: function (content) {\r\n    if (typeof content === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i].parentNode) {\r\n          this[i].outerHTML = content\r\n        }\r\n      }\r\n    }\r\n    else if (content.length) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this.replaceWith(content[i]);\r\n      }\r\n    }\r\n    else {\r\n      this.after(content).remove();\r\n    }\r\n  },\r\n\r\n  insertBefore: function (el) {\r\n    $(el).before(this[0]);\r\n\r\n    return this;\r\n  },\r\n\r\n  before: function (content) {\r\n    if (content instanceof jQuery) {\r\n      for (let i = 0; i < content.length; i++) {\r\n        this.before(content[i]);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    if (content) {\r\n      if (typeof content == 'string') {\r\n        for (let i = 0; i < this.length; i++) {\r\n          const before = this[i];\r\n\r\n          if (before.nodeType != Node.ELEMENT_NODE) {\r\n            const doc = before.ownerDocument;\r\n            const tmp = doc.createElement('SPAN')\r\n\r\n            $(before).before(tmp);\r\n            $(tmp).before(content).remove();\r\n          }\r\n          else {\r\n            if(before.parentNode) {\r\n              before.insertAdjacentHTML('beforebegin', content);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        const before = this[0];\r\n        if(before.parentNode) {\r\n          if (content instanceof jQuery) {\r\n            for (let i = 0; i < content.length; i++) {\r\n              before.parentNode.insertBefore(content[i], before)\r\n            }\r\n          }\r\n          else {\r\n            before.parentNode.insertBefore(content, before)\r\n          }\r\n        }\r\n      } \r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  append: function (content) {\r\n    if (this.length == 0) return this;\r\n\r\n    if (typeof content == 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        const parent = this[i];\r\n        const doc = parent.ownerDocument;\r\n        const tmp = doc.createElement('SPAN');\r\n\r\n        $(parent).append(tmp);\r\n        $(tmp).after(content).remove();\r\n      }\r\n    }\r\n    else {\r\n      if (content instanceof jQuery || Array.isArray(content)) {\r\n        for (let i = 0; i < content.length; i++) {\r\n          this.append(content[i]);\r\n        }\r\n      }\r\n      else {\r\n        if (typeof content !== 'function') {\r\n          this[0].appendChild(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n  \r\n  prepend: function (content) {\r\n    if (this.length == 0) return this;\r\n\r\n    if (typeof content == 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        const parent = this[i];\r\n\r\n        const doc = parent.ownerDocument;\r\n        const tmp = doc.createElement('SPAN')\r\n\r\n        $(parent).prepend(tmp);\r\n        $(tmp).before(content).remove();\r\n      }\r\n    }\r\n    else {\r\n      if (content instanceof jQuery) {\r\n        for (let i = 0; i < content.length; i++) {\r\n          this.prepend(content[i]);\r\n        }\r\n      }\r\n      else {\r\n        const parent = this[0];\r\n\r\n        if (!parent.firstChild) {\r\n          $(parent).append(content);\r\n        }\r\n        else {\r\n          if (parent.firstChild) {\r\n            parent.insertBefore(content, parent.firstChild);\r\n          }\r\n          else {\r\n            parent.appendChild(content);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  remove: function () {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].parentNode) {\r\n        this[i].parentNode.removeChild(this[i]);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  prev: function () {\r\n    // replicate the jQuery behavior\r\n    if (this.length && this[0].previousElementSibling) {\r\n      return $(this[0].previousElementSibling);\r\n    }\r\n    else {\r\n      return $();\r\n    }\r\n  },\r\n\r\n  next: function () {\r\n    if (this.length && this[0].nextElementSibling) {\r\n      return $(this[0].nextElementSibling);\r\n    }\r\n    else {\r\n      return $();\r\n    }\r\n  },\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1874\r\n  nextAllVisible: function () {\r\n    return this.next();\r\n  },\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1874\r\n  prevAllVisible: function () {\r\n    return this.prev();\r\n  },\r\n\r\n  outerHeight: function (margin) {\r\n    if (this.length === 0) return undefined\r\n\r\n    const el = this[0]\r\n    \r\n    if (el === el.window) {\r\n      return el.innerHeight\r\n    }\r\n\r\n    // Remember the old values, and insert the new ones\r\n    const old = {}\r\n    const isVisible = this.isVisible()\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        old[ name ] = el.style[ name ]\r\n        el.style[ name ] = cssShow[ name ]\r\n      }\r\n    }\r\n\r\n    let height = el.offsetHeight\r\n    if (margin) {\r\n      height += parseInt($(el).css('marginTop')) + parseInt($(el).css('marginBottom'))\r\n    }\r\n\r\n    // Revert the old values\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        el.style[ name ] = old[ name ]\r\n      }\r\n    }\r\n\r\n    return height\r\n  },\r\n\r\n  outerWidth: function (margin) {\r\n    if (this.length === 0) return undefined\r\n\r\n    const el = this[0]\r\n\r\n    if (el === el.window) {\r\n      return el.outerWidth\r\n    }\r\n\r\n    // Remember the old values, and insert the new ones\r\n    const old = {}\r\n    const isVisible = this.isVisible()\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        old[ name ] = el.style[ name ]\r\n        el.style[ name ] = cssShow[ name ]\r\n      }\r\n    }\r\n\r\n    let width = el.offsetWidth\r\n    if (margin) {\r\n      width += parseInt($(el).css('marginLeft')) + parseInt($(el).css('marginRight'))\r\n    }\r\n\r\n    // Revert the old values\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        el.style[ name ] = old[ name ]\r\n      }\r\n    }\r\n\r\n    return width\r\n  },\r\n\r\n  width: function (newWidth) {\r\n    if (newWidth === undefined) {\r\n      if (this[0] instanceof HTMLDocument) {\r\n        return this[0].body.offsetWidth\r\n      }\r\n\r\n      if (this[0]) {\r\n        return this[0].offsetWidth\r\n      }\r\n    }\r\n    else {\r\n      this[0].style.width = newWidth + 'px'\r\n    }\r\n  },\r\n\r\n  height: function (newHeight) {\r\n    const elem = this[0]\r\n    if(newHeight === undefined){\r\n      if (elem instanceof HTMLDocument) {\r\n        const doc = elem.documentElement\r\n        return Math.max(elem.body.scrollHeight, doc.scrollHeight,\r\n          elem.body.offsetHeight, doc.offsetHeight,\r\n          doc.clientHeight);\r\n      }\r\n  \r\n      return elem.offsetHeight;\r\n    }\r\n    else {\r\n      elem.style.height = newHeight + 'px'\r\n    }\r\n    \r\n  },\r\n\r\n  is: function (el) {\r\n    if (this.length === 0) return false;\r\n\r\n    if (typeof el == 'string' && this[0].matches) {\r\n      return this[0].matches(el);\r\n    }\r\n    else if (el instanceof jQuery) {\r\n      return this[0] == el[0];\r\n    }\r\n    else {\r\n      return this[0] == el;\r\n    }\r\n  },\r\n\r\n  parent: function () {\r\n    if (this.length === 0) return $();\r\n\r\n    return $(this[0].parentNode);\r\n  },\r\n\r\n  _matches: function (el, selector) {\r\n    let matchesFn = (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector)\r\n    if (el && !selector) {\r\n      return matchesFn\r\n    }\r\n\r\n    return matchesFn.call(el, selector)\r\n  },\r\n\r\n  parents: function (selector) {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      let el = this[i].parentNode;\r\n\r\n      while (el && el != document && this._matches(el)) {\r\n        if (selector) {\r\n\r\n          if (this._matches(el, selector)) {\r\n            ret.push(el);\r\n          }\r\n        }\r\n        else {\r\n          ret.push(el);\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  parentsUntil: function (until, selector) {\r\n    const ret = $();\r\n    \r\n    if (until instanceof jQuery && until.length > 0) {\r\n      until = until[0]\r\n    }\r\n    \r\n    for (let i = 0; i < this.length; i++) {\r\n      let el = this[i].parentNode;\r\n\r\n      while (el && el != document && el.matches && el != until && this[i] != until && !(typeof until == 'string' && el.matches(until))) {\r\n        if (selector) {\r\n          if (el.matches(selector)) {\r\n            ret.push(el);\r\n          }\r\n        }\r\n        else {\r\n          ret.push(el);\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  insertAfter: function(elem) {\r\n    const parentNode = elem.parent()[0]\r\n    if ( parentNode ) {\r\n      parentNode.insertBefore(this[0], elem[0].nextElementSibling)\r\n    }\r\n  },\r\n\r\n  filter: function (fn) {\r\n    const ret = $();\r\n\r\n    if (typeof fn === 'function') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (fn.call(this[i], this[i])) {\r\n          ret.push(this[i]);\r\n        }\r\n      }\r\n    }\r\n    else if (typeof fn === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i].matches(fn)) {\r\n          ret.push(this[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  offset: function () {\r\n    if (this.length === 0) return undefined;\r\n    const rect = this[0].getBoundingClientRect();\r\n    const win = this[0].ownerDocument.defaultView;\r\n\r\n    return {\r\n      top: rect.top + win.pageYOffset,\r\n      left: rect.left + win.pageXOffset\r\n    }\r\n  },\r\n\r\n  position: function () {\r\n    return {\r\n      left: this[0].offsetLeft,\r\n      top: this[0].offsetTop\r\n    }\r\n  },\r\n\r\n  // For internal use only.\r\n  // Behaves like an Array's method, not like a jQuery method.\r\n  push: [].push,\r\n  splice: [].splice\r\n};\r\n\r\njQuery.extend = function (new_obj) {\r\n  new_obj = new_obj || {};\r\n\r\n  // Loop arguments.\r\n  for (let i = 1; i < arguments.length; i++) {\r\n    if (!arguments[i])\r\n      continue;\r\n\r\n    for (let key in arguments[i]) {\r\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key))\r\n        new_obj[key] = arguments[i][key];\r\n    }\r\n  }\r\n\r\n  return new_obj;\r\n}\r\n\r\njQuery.merge = function (first, second) {\r\n  let len = +second.length,\r\n    j = 0,\r\n    i = first.length;\r\n\r\n  for (; j < len; j++) {\r\n    first[i++] = second[j];\r\n  }\r\n\r\n  first.length = i;\r\n\r\n  return first;\r\n}\r\n\r\njQuery.map = function (elems, callback, arg) {\r\n  let length, value,\r\n    i = 0,\r\n    ret = [];\r\n\r\n  // Go through the array, translating each of the items to their new values\r\n  if (Array.isArray(elems)) {\r\n    length = elems.length;\r\n    for (; i < length; i++) {\r\n      value = callback(elems[i], i, arg);\r\n\r\n      if (value != null) {\r\n        ret.push(value);\r\n      }\r\n    }\r\n\r\n    // Go through every key on the object,\r\n  } else {\r\n    for (i in elems) {\r\n      value = callback(elems[i], i, arg);\r\n\r\n      if (value != null) {\r\n        ret.push(value);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Flatten any nested arrays\r\n  return [].concat.apply([], ret);\r\n}\r\n\r\nvar init = function (selector, context) {\r\n  if (!selector) {\r\n    return this;\r\n  }\r\n\r\n  if (typeof selector == 'string' && selector[0] === '<') {\r\n    const tmp = document.createElement('DIV')\r\n    tmp.innerHTML = selector\r\n\r\n    return $(tmp.firstElementChild);\r\n  }\r\n\r\n  context = context instanceof jQuery ? context[0] : context;\r\n\r\n  if (typeof selector == 'string') {\r\n\r\n    selector = _normalizeSelector(selector);\r\n\r\n    const els = (context || document).querySelectorAll(selector);\r\n\r\n    for (let i = 0; i < els.length; i++) {\r\n      this[i] = els[i];\r\n    }\r\n\r\n    this.length = els.length;\r\n\r\n    return this;\r\n  }\r\n  else {\r\n    if (!(selector instanceof jQuery)) {\r\n      this[0] = selector;\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n    return selector;\r\n  }\r\n}\r\n\r\ninit.prototype = jQuery.prototype;\r\n\r\nexport default jQuery;\r\n","import './modules/core.js';\r\nimport './modules/ui.js';\r\n\r\nimport $ from './$.js'\r\nimport FroalaEditor from './editor'\r\nconst FE = FroalaEditor\r\n\r\nfunction init(e) {\r\n  if (e.type === 'touchend' && !this.$el.data('touched')) {\r\n    return true\r\n  }\r\n\r\n  if (e.which === 1 || !e.which) {\r\n    this.$el.off('mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init')\r\n\r\n    this.load(FE.MODULES)\r\n    this.load(FE.PLUGINS)\r\n\r\n    const target = e.originalEvent && e.originalEvent.originalTarget\r\n\r\n    if (target && target.tagName === 'IMG') {\r\n      $(target).trigger('mousedown')\r\n    }\r\n\r\n    if (typeof this.ul === 'undefined') {\r\n      this.destroy()\r\n    }\r\n\r\n    if (e.type === 'touchend' && this.image && e.originalEvent && e.originalEvent.target && $(e.originalEvent.target).is('img')) {\r\n      const that = this\r\n\r\n      setTimeout(() => {\r\n        that.image.edit($(e.originalEvent.target))\r\n      }, 100)\r\n    }\r\n\r\n    this.ready = true\r\n    this.events.trigger('initialized')\r\n  }\r\n}\r\n\r\nfunction doInit() {\r\n  this.doc = this.$el.get(0).ownerDocument\r\n  this.win = 'defaultView' in this.doc ? this.doc.defaultView : this.doc.parentWindow\r\n  this.$doc = $(this.doc)\r\n  this.$win = $(this.win)\r\n\r\n  if (!this.opts.pluginsEnabled) {\r\n    this.opts.pluginsEnabled = Object.keys(FE.PLUGINS)\r\n  }\r\n\r\n  if (this.opts.initOnClick) {\r\n    this.load(FE.MODULES)\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1207.\r\n    this.$el.on('touchstart.init', function () {\r\n      $(this).data('touched', true)\r\n    })\r\n\r\n    this.$el.on('touchmove.init', function () {\r\n      $(this).removeData('touched')\r\n    })\r\n\r\n    this.$el.on('mousedown.init touchend.init dragenter.init focus.init', init.bind(this))\r\n\r\n    this.events.trigger('initializationDelayed')\r\n  }\r\n  else {\r\n    this.load(FE.MODULES)\r\n    this.load(FE.PLUGINS)\r\n\r\n    $(this.o_win).scrollTop(this.c_scroll)\r\n\r\n    if (typeof this.ul === 'undefined') {\r\n      this.destroy()\r\n    }\r\n\r\n    this.ready = true\r\n    this.events.trigger('initialized')\r\n  }\r\n}\r\n\r\nFE.Bootstrap = function (element, options, initCallback) {\r\n  this.id = ++FE.ID\r\n  this.$ = $\r\n\r\n  let presets = {}\r\n\r\n  // If init callback is passed and no options.\r\n  if (typeof options == 'function') {\r\n    initCallback = options\r\n    options = {}\r\n  }\r\n\r\n  if (initCallback) {\r\n    if (!options.events) options.events = {}\r\n    options.events.initialized = initCallback\r\n  }\r\n\r\n  if (options && options.documentReady) {\r\n    presets.toolbarButtons = [ ['fullscreen', 'undo', 'redo', 'getPDF', 'print'], ['bold', 'italic', 'underline', 'textColor', 'backgroundColor', 'clearFormatting'], ['alignLeft', 'alignCenter', 'alignRight', 'alignJustify'], ['formatOL', 'formatUL', 'indent', 'outdent'], ['paragraphFormat'], ['fontFamily'], ['fontSize'], ['insertLink', 'insertImage', 'quote'] ]\r\n    presets.paragraphFormatSelection = true\r\n    presets.fontFamilySelection = true\r\n    presets.fontSizeSelection = true\r\n    presets.placeholderText = ''\r\n    presets.quickInsertEnabled = false\r\n    presets.charCounterCount = false\r\n  }\r\n\r\n  this.opts = Object.assign({}, Object.assign({}, FE.DEFAULTS, presets, typeof options === 'object' && options))\r\n  const opts_string = JSON.stringify(this.opts)\r\n\r\n  FE.OPTS_MAPPING[opts_string] = FE.OPTS_MAPPING[opts_string] || this.id\r\n  this.sid = FE.OPTS_MAPPING[opts_string]\r\n  FE.SHARED[this.sid] = FE.SHARED[this.sid] || {}\r\n  this.shared = FE.SHARED[this.sid]\r\n  this.shared.count = (this.shared.count || 0) + 1\r\n\r\n  this.$oel = $(element)\r\n  this.$oel.data('froala.editor', this)\r\n\r\n  this.o_doc = element.ownerDocument\r\n  this.o_win = 'defaultView' in this.o_doc ? this.o_doc.defaultView : this.o_doc.parentWindow\r\n  this.c_scroll = $(this.o_win).scrollTop()\r\n\r\n  this._init()\r\n}\r\n\r\nFE.Bootstrap.prototype._init = function () {\r\n\r\n  // Get the tag name of the original element.\r\n  const tag_name = this.$oel.get(0).tagName\r\n\r\n  if (this.$oel.closest('label').length >= 1) {\r\n    //\r\n    console.warn('Note! It is not recommended to initialize the Froala Editor within a label tag.')\r\n  }\r\n\r\n  const initOnDefault = function () {\r\n    if (tag_name !== 'TEXTAREA') {\r\n      this._original_html = this._original_html || this.$oel.html()\r\n    }\r\n\r\n    this.$box = this.$box || this.$oel\r\n\r\n    // Turn on iframe if fullPage is on.\r\n    if (this.opts.fullPage) {\r\n      this.opts.iframe = true\r\n    }\r\n\r\n    if (!this.opts.iframe) {\r\n      this.$el = $(this.o_doc.createElement('DIV'))\r\n      this.el = this.$el.get(0)\r\n      this.$wp = $(this.o_doc.createElement('DIV')).append(this.$el)\r\n      this.$box.html(this.$wp)\r\n\r\n      setTimeout(doInit.bind(this), 0)\r\n    }\r\n    else {\r\n      this.$iframe = $('<iframe src=\"about:blank\" frameBorder=\"0\">')\r\n      this.$wp = $('<div></div>')\r\n      this.$box.html(this.$wp)\r\n      this.$wp.append(this.$iframe)\r\n      this.$iframe.get(0).contentWindow.document.open()\r\n      this.$iframe.get(0).contentWindow.document.write('<!DOCTYPE html>')\r\n      this.$iframe.get(0).contentWindow.document.write('<html><head></head><body></body></html>')\r\n      this.$iframe.get(0).contentWindow.document.close()\r\n\r\n      this.iframe_document = this.$iframe.get(0).contentWindow.document\r\n\r\n      this.$el = $(this.iframe_document.querySelector('body'))\r\n      this.el = this.$el.get(0)\r\n      this.$head = $(this.iframe_document.querySelector('head'))\r\n      this.$html = $(this.iframe_document.querySelector('html'))\r\n\r\n      setTimeout(doInit.bind(this), 0)\r\n    }\r\n  }.bind(this)\r\n\r\n  const initOnTextarea = function () {\r\n    this.$box = $('<div>')\r\n    this.$oel.before(this.$box).hide()\r\n\r\n    this._original_html = this.$oel.val()\r\n\r\n    // Before submit textarea do a sync.\r\n    const that = this\r\n\r\n    this.$oel.parents('form').on(`submit.${this.id}`, () => {\r\n      that.events.trigger('form.submit')\r\n    })\r\n\r\n    this.$oel.parents('form').on(`reset.${this.id}`, () => {\r\n      that.events.trigger('form.reset')\r\n    })\r\n\r\n    initOnDefault()\r\n  }.bind(this)\r\n\r\n  const initOnA = function () {\r\n    this.$el = this.$oel\r\n    this.el = this.$el.get(0)\r\n    this.$el.attr('contenteditable', true).css('outline', 'none').css('display', 'inline-block')\r\n    this.opts.multiLine = false\r\n    this.opts.toolbarInline = false\r\n\r\n    setTimeout(doInit.bind(this), 0)\r\n  }.bind(this)\r\n\r\n  const initOnImg = function () {\r\n    this.$el = this.$oel\r\n    this.el = this.$el.get(0)\r\n    this.opts.toolbarInline = false\r\n\r\n    setTimeout(doInit.bind(this), 0)\r\n  }.bind(this)\r\n\r\n  const editInPopup = function () {\r\n    this.$el = this.$oel\r\n    this.el = this.$el.get(0)\r\n    this.opts.toolbarInline = false\r\n\r\n    this.$oel.on('click.popup', (e) => {\r\n      e.preventDefault()\r\n    })\r\n\r\n    setTimeout(doInit.bind(this), 0)\r\n  }.bind(this)\r\n\r\n  // Check on what element it was initialized.\r\n  if (this.opts.editInPopup) {\r\n    editInPopup()\r\n  }\r\n  else if (tag_name === 'TEXTAREA') {\r\n    initOnTextarea()\r\n  }\r\n  else if (tag_name === 'A') {\r\n    initOnA()\r\n  }\r\n  else if (tag_name === 'IMG') {\r\n    initOnImg()\r\n  }\r\n  else if (tag_name === 'BUTTON' || tag_name === 'INPUT') {\r\n    this.opts.editInPopup = true\r\n    this.opts.toolbarInline = false\r\n    editInPopup()\r\n  }\r\n  else {\r\n    initOnDefault()\r\n  }\r\n}\r\n\r\nFE.Bootstrap.prototype.load = function (module_list) {\r\n  // Bind modules to the current instance and tear them up.\r\n  for (const m_name in module_list) {\r\n    if (Object.prototype.hasOwnProperty.call(module_list, m_name)) {\r\n      if (this[m_name]) {\r\n        continue\r\n      }\r\n\r\n      // Do not include plugin.\r\n      if (FE.PLUGINS[m_name] && this.opts.pluginsEnabled.indexOf(m_name) < 0) {\r\n        continue\r\n      }\r\n\r\n      this[m_name] = new module_list[m_name](this)\r\n\r\n      if (this[m_name]._init) {\r\n        this[m_name]._init()\r\n\r\n        if (this.opts.initOnClick && m_name === 'core') {\r\n\r\n          return false\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nFE.Bootstrap.prototype.destroy = function () {\r\n  this.destrying = true\r\n\r\n  this.shared.count--\r\n\r\n  this.events && this.events.$off()\r\n\r\n  // HTML.\r\n  const html = this.html && this.html.get()\r\n\r\n  // Focus main frame.\r\n  if (this.opts.iframe) {\r\n    this.events.disableBlur()\r\n    this.win.focus()\r\n    this.events.enableBlur()\r\n  }\r\n\r\n  if(this.events) {\r\n    this.events.trigger('destroy', [], true)\r\n    this.events.trigger('shared.destroy', [], true)\r\n  }\r\n\r\n  // Remove shared.\r\n  if (this.shared.count === 0) {\r\n    for (const k in this.shared) {\r\n      if (Object.prototype.hasOwnProperty.call(this.shared, k)) {\r\n        this.shared[k] = null\r\n        FE.SHARED[this.sid][k] = null\r\n      }\r\n    }\r\n\r\n    delete FE.SHARED[this.sid]\r\n  }\r\n\r\n  this.$oel.parents('form').off(`.${this.id}`)\r\n  this.$oel.off('click.popup')\r\n  this.$oel.removeData('froala.editor')\r\n\r\n  this.$oel.off('froalaEditor')\r\n\r\n  // Destroy editor basic elements.\r\n  if (this.core) {\r\n    this.core.destroy(html)\r\n  }\r\n\r\n  FE.INSTANCES.splice(FE.INSTANCES.indexOf(this), 1)\r\n}\r\n\r\nexport default FroalaEditor","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.align = function (editor) {\r\n\r\n  const { $ } =  editor\r\n\r\n  function apply(val) {\r\n\r\n    const el = editor.selection.element()\r\n\r\n    if ($(el).parents('.fr-img-caption').length) {\r\n      $(el).css('text-align', val)\r\n    }\r\n    else {\r\n      // Wrap.\r\n      editor.selection.save()\r\n      editor.html.wrap(true, true, true, true)\r\n      editor.selection.restore()\r\n\r\n      const blocks = editor.selection.blocks()\r\n\r\n      for (let i = 0; i < blocks.length; i++) {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/674\r\n\r\n        $(blocks[i]).css('text-align', val).removeClass('fr-temp-div')\r\n\r\n        if ($(blocks[i]).attr('class') === '') $(blocks[i]).removeAttr('class')\r\n\r\n        if ($(blocks[i]).attr('style') === '') $(blocks[i]).removeAttr('style')\r\n      }\r\n\r\n      editor.selection.save()\r\n      editor.html.unwrap()\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  function refresh($btn) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      $btn.find('> *').first().replaceWith(editor.icon.create(`align-${alignment}`))\r\n    }\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      $dropdown.find(`a.fr-command[data-param1=\"${alignment}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  function refreshForToolbar($btn) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      let alignment = editor.helpers.getAlignment($(blocks[0]))\r\n\r\n      // Capitalize.\r\n      alignment = alignment.charAt(0).toUpperCase() + alignment.slice(1)\r\n\r\n      if (`align${alignment}` === $btn.attr('data-cmd')) {\r\n        $btn.addClass('fr-active')\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refresh: refresh,\r\n    refreshOnShow: refreshOnShow,\r\n    refreshForToolbar: refreshForToolbar\r\n  }\r\n}\r\n\r\nFE.DefineIcon('align', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('align-center', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.DefineIcon('align-justify', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\nFE.RegisterCommand('align', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'Align Center',\r\n    right: 'Align Right',\r\n    justify: 'Align Justify'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { options } = FE.COMMANDS.align\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"align\"data-param1=\"\r\n        ${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`align-${val}`)}<span class=\"fr-sr-only\">\r\n        ${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.align.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.align.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignLeft', {\r\n  type: 'button',\r\n  icon: 'align-left',\r\n  title: 'Align Left',\r\n  callback: function () {\r\n    this.align.apply('left')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignRight', {\r\n  type: 'button',\r\n  icon: 'align-right',\r\n  title: 'Align Right',\r\n  callback: function () {\r\n    this.align.apply('right')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignCenter', {\r\n  type: 'button',\r\n  icon: 'align-center',\r\n  title: 'Align Center',\r\n  callback: function () {\r\n    this.align.apply('center')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n\r\nFE.RegisterCommand('alignJustify', {\r\n  type: 'button',\r\n  icon: 'align-justify',\r\n  title: 'Align Justify',\r\n  callback: function () {\r\n    this.align.apply('justify')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.align.refreshForToolbar($btn)\r\n  },\r\n  plugin: 'align'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  charCounterMax: -1,\r\n  charCounterCount: true\r\n})\r\n\r\nFE.PLUGINS.charCounter = function (editor) {\r\n  const { $ } =  editor\r\n  let $counter\r\n\r\n  /**\r\n   * Get the char number.\r\n   */\r\n  const count = () => (editor.el.textContent || '').replace(/\\u200B/g, '').length\r\n\r\n  /**\r\n   * Check chars on typing.\r\n   */\r\n  function _checkCharNumber(e) {\r\n\r\n    // Continue if infinite characters.\r\n    if (editor.opts.charCounterMax < 0) return true\r\n\r\n    // Continue if enough characters.\r\n    if (count() < editor.opts.charCounterMax) return true\r\n\r\n    // Stop if the key will produce a new char.\r\n    const keyCode = e.which\r\n\r\n    if ((!editor.keys.ctrlKey(e) && editor.keys.isCharacter(keyCode)) || (keyCode === FE.KEYCODE.IME)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      editor.events.trigger('charCounter.exceeded')\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Check chars on paste.\r\n   */\r\n  function _checkCharNumberOnPaste(html) {\r\n    if (editor.opts.charCounterMax < 0) return html\r\n\r\n    const len = $('<div>').html(html).text().length\r\n\r\n    if (len + count() <= editor.opts.charCounterMax) return html\r\n\r\n    editor.events.trigger('charCounter.exceeded')\r\n\r\n    return ''\r\n  }\r\n\r\n  /**\r\n   * Update the char counter.\r\n   */\r\n  function _updateCharNumber() {\r\n    if (editor.opts.charCounterCount) {\r\n      const chars = count() + (editor.opts.charCounterMax > 0 ? '/' + editor.opts.charCounterMax : '')\r\n\r\n      $counter.text(`${editor.language.translate('Characters')} : ${chars}`)\r\n\r\n      if (editor.opts.toolbarBottom) {\r\n        $counter.css('margin-bottom', editor.$tb.outerHeight(true))\r\n      }\r\n\r\n      // Scroll size correction.\r\n      const scroll_size = editor.$wp.get(0).offsetWidth - editor.$wp.get(0).clientWidth\r\n\r\n      if (scroll_size >= 0) {\r\n        if (editor.opts.direction == 'rtl') {\r\n          $counter.css('margin-left', scroll_size)\r\n        }\r\n        else {\r\n          $counter.css('margin-right', scroll_size)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    if (!editor.opts.charCounterCount) return false\r\n\r\n    $counter = $(document.createElement('span')).attr('class', 'fr-counter')\r\n    $counter.css('bottom', editor.$wp.css('border-bottom-width'))\r\n\r\n    // Append char counter only if second toolbar exists\r\n    if (editor.$second_tb) {\r\n      editor.$second_tb.append($counter)\r\n    }\r\n\r\n    editor.events.on('keydown', _checkCharNumber, true)\r\n    editor.events.on('paste.afterCleanup', _checkCharNumberOnPaste)\r\n    editor.events.on('keyup contentChanged input', function () {\r\n      editor.events.trigger('charCounter.update')\r\n    })\r\n\r\n    editor.events.on('charCounter.update', _updateCharNumber)\r\n    editor.events.trigger('charCounter.update')\r\n\r\n    editor.events.on('destroy', function () {\r\n      $(editor.o_win).off(`resize.char${editor.id}`)\r\n      $counter.removeData().remove()\r\n      $counter = null\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    count: count\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.codeBeautifier = function () {\r\n  /**\r\n     * HTML BEAUTIFIER\r\n     *\r\n     * LICENSE: The MIT License (MIT)\r\n     *\r\n     * Written by Nochum Sossonko, (nsossonko@hotmail.com)\r\n     *\r\n     * Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\r\n     * http://jsbeautifier.org/\r\n     *\r\n     */\r\n  /* jshint ignore:start */\r\n  /* jscs:disable */\r\n\r\n\r\n  const acorn = {};\r\n\r\n  (function (exports) {\r\n    /* jshint curly: false */\r\n    // This section of code is taken from acorn.\r\n    //\r\n    // Acorn was written by Marijn Haverbeke and released under an MIT\r\n    // license. The Unicode regexps (for identifiers and whitespace) were\r\n    // taken from [Esprima](http://esprima.org) by Ariya Hidayat.\r\n    //\r\n    // Git repositories for Acorn are available at\r\n    //\r\n    //     http://marijnhaverbeke.nl/git/acorn\r\n    //     https://github.com/marijnh/acorn.git\r\n\r\n    // ## Character categories\r\n\r\n    // Big ugly regular expressions that match characters in the\r\n    // whitespace, identifier, and identifier-start categories. These\r\n    // are only applied when a character is found to actually have a\r\n    // code point above 128.\r\n\r\n    const nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/ // jshint ignore:line\r\n    const nonASCIIidentifierStartChars = '\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc'\r\n    const nonASCIIidentifierChars = '\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f'\r\n    const nonASCIIidentifierStart = new RegExp(`[${nonASCIIidentifierStartChars}]`)\r\n    const nonASCIIidentifier = new RegExp(`[${nonASCIIidentifierStartChars} ${nonASCIIidentifierChars}]`)\r\n\r\n    // Whether a single character denotes a newline.\r\n\r\n    exports.newline = /[\\n\\r\\u2028\\u2029]/\r\n\r\n    // Matches a whole line break (where CRLF is considered a single\r\n    // line break). Used to count lines.\r\n\r\n    // in javascript, these two differ\r\n    // in python they are the same, different methods are called on them\r\n    exports.lineBreak = new RegExp(`\\r\\n|${exports.newline.source}`)\r\n    exports.allLineBreaks = new RegExp(exports.lineBreak.source, 'g')\r\n\r\n\r\n    // Test whether a given character code starts an identifier.\r\n\r\n    exports.isIdentifierStart = function (code) {\r\n      // permit $ (36) and @ (64). @ is used in ES7 decorators.\r\n      if (code < 65) return code === 36 || code === 64\r\n      // 65 through 91 are uppercase letters.\r\n      if (code < 91) return true\r\n      // permit _ (95).\r\n      if (code < 97) return code === 95\r\n      // 97 through 123 are lowercase letters.\r\n      if (code < 123) return true\r\n      return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code))\r\n    }\r\n\r\n    // Test whether a given character is part of an identifier.\r\n\r\n    exports.isIdentifierChar = function (code) {\r\n      if (code < 48) return code === 36\r\n      if (code < 58) return true\r\n      if (code < 65) return false\r\n      if (code < 91) return true\r\n      if (code < 97) return code === 95\r\n      if (code < 123) return true\r\n      return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code))\r\n    }\r\n  })(acorn)\r\n\r\n  function run(html_source, options) {\r\n    function ltrim(s) {\r\n      return s.replace(/^\\s+/g, '')\r\n    }\r\n\r\n    function rtrim(s) {\r\n      return s.replace(/\\s+$/g, '')\r\n    }\r\n\r\n    let multi_parser\r\n    let indent_inner_html\r\n    let indent_size\r\n    let indent_character\r\n    let wrap_line_length\r\n    let brace_style\r\n    let unformatted\r\n    let preserve_newlines\r\n    let max_preserve_newlines\r\n    let indent_handlebars\r\n    let wrap_attributes\r\n    let wrap_attributes_indent_size\r\n    let end_with_newline\r\n    let extra_liners\r\n\r\n    options = options || {}\r\n\r\n    // backwards compatibility to 1.3.4\r\n    if ((options.wrap_line_length === undefined || parseInt(options.wrap_line_length, 10) === 0) &&\r\n            (options.max_char !== undefined && parseInt(options.max_char, 10) !== 0)) {\r\n      options.wrap_line_length = options.max_char\r\n    }\r\n\r\n    indent_inner_html = (options.indent_inner_html === undefined) ? false : options.indent_inner_html\r\n    indent_size = (options.indent_size === undefined) ? 4 : parseInt(options.indent_size, 10)\r\n    indent_character = (options.indent_char === undefined) ? ' ' : options.indent_char\r\n    brace_style = (options.brace_style === undefined) ? 'collapse' : options.brace_style\r\n    wrap_line_length = parseInt(options.wrap_line_length, 10) === 0 ? 32786 : parseInt(options.wrap_line_length || 250, 10) \r\n    unformatted = options.unformatted || ['a', 'span', 'img', 'bdo', 'em', 'strong', 'dfn', 'code', 'samp', 'kbd',\r\n      'const', 'cite', 'abbr', 'acronym', 'q', 'sub', 'sup', 'tt', 'i', 'b', 'big', 'small', 'u', 's', 'strike',\r\n      'font', 'ins', 'del', 'address', 'pre'\r\n    ]\r\n    preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines \r\n    max_preserve_newlines = preserve_newlines ?\r\n      (isNaN(parseInt(options.max_preserve_newlines, 10)) ? 32786 : parseInt(options.max_preserve_newlines, 10)) : 0 \r\n    indent_handlebars = (options.indent_handlebars === undefined) ? false : options.indent_handlebars \r\n    wrap_attributes = (options.wrap_attributes === undefined) ? 'auto' : options.wrap_attributes \r\n    wrap_attributes_indent_size = (options.wrap_attributes_indent_size === undefined) ? indent_size : parseInt(options.wrap_attributes_indent_size, 10) || indent_size \r\n    end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    extra_liners = Array.isArray(options.extra_liners) ?\r\n      options.extra_liners.concat() : (typeof options.extra_liners === 'string') ?\r\n        options.extra_liners.split(',') : 'head,body,/html'.split(',') \r\n\r\n    if (options.indent_with_tabs) {\r\n      indent_character = '\\t' \r\n      indent_size = 1 \r\n    }\r\n\r\n    function Parser() {\r\n\r\n      this.pos = 0  //Parser position\r\n      this.token = '' \r\n      this.current_mode = 'CONTENT'  //reflects the current Parser mode: TAG/CONTENT\r\n      this.tags = { //An object to hold tags, their position, and their parent-tags, initiated with default values\r\n        parent: 'parent1',\r\n        parentcount: 1,\r\n        parent1: ''\r\n      } \r\n      this.tag_type = '' \r\n      this.token_text = this.last_token = this.last_text = this.token_type = '' \r\n      this.newlines = 0 \r\n      this.indent_content = indent_inner_html \r\n\r\n      this.Utils = { //Uilities made available to the various functions\r\n        whitespace: '\\n\\r\\t '.split(''),\r\n        single_token: 'br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed'.split(','), //all the single tags for HTML\r\n        extra_liners: extra_liners, //for tags that need a line of whitespace before them\r\n        in_array: function (what, arr) {\r\n          for (let i = 0;    i < arr.length;   i++) {\r\n            if (what === arr[i]) {\r\n              return true \r\n            }\r\n          }\r\n          return false \r\n        }\r\n      } \r\n\r\n      // Return true if the given text is composed entirely of whitespace.\r\n      this.is_whitespace = function (text) {\r\n        for (const n = 0;  n < text.length;  text++) {\r\n          if (!this.Utils.in_array(text.charAt(n), this.Utils.whitespace)) {\r\n            return false \r\n          }\r\n        }\r\n        return true \r\n      } \r\n\r\n      this.traverse_whitespace = function () {\r\n        let input_char = '' \r\n\r\n        input_char = this.input.charAt(this.pos) \r\n        if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n          this.newlines = 0 \r\n          while (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n            if (preserve_newlines && input_char === '\\n' && this.newlines <= max_preserve_newlines) {\r\n              this.newlines += 1 \r\n            }\r\n\r\n            this.pos++ \r\n            input_char = this.input.charAt(this.pos) \r\n          }\r\n          return true \r\n        }\r\n        return false \r\n      } \r\n\r\n      // Append a space to the given content (string array) or, if we are\r\n      // at the wrap_line_length, append a newline/indentation.\r\n      this.space_or_wrap = function (content) {\r\n        if (this.line_char_count >= this.wrap_line_length) { //insert a line when the wrap_line_length is reached\r\n          this.print_newline(false, content) \r\n          this.print_indentation(content) \r\n        } else {\r\n          this.line_char_count++ \r\n          content.push(' ') \r\n        }\r\n      } \r\n\r\n      this.get_content = function () { //function to capture regular content between tags\r\n        let input_char = '',\r\n          content = [] \r\n\r\n        while (this.input.charAt(this.pos) != '<') {\r\n          if (this.pos >= this.input.length) {\r\n            return content.length ? content.join('') : ['', 'TK_EOF'] \r\n          }\r\n\r\n          if (this.traverse_whitespace()) {\r\n            this.space_or_wrap(content) \r\n            continue \r\n          }\r\n\r\n          if (indent_handlebars) {\r\n            // Handlebars parsing is complicated.\r\n            // {{#foo}} and {{/foo}} are formatted tags.\r\n            // {{something}} should get treated as content, except:\r\n            // {{else}} specifically behaves like {{#if}} and {{/if}}\r\n            const peek3 = this.input.substr(this.pos, 3) \r\n            if (peek3 === '{{#' || peek3 === '{{/') {\r\n              // These are tags and not content.\r\n              break \r\n            } else if (peek3 === '{{!') {\r\n              return [this.get_tag(), 'TK_TAG_HANDLEBARS_COMMENT'] \r\n            } else if (this.input.substr(this.pos, 2) === '{{') {\r\n              if (this.get_tag(true) === '{{else}}') {\r\n                break \r\n              }\r\n            }\r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n          this.line_char_count++ \r\n          content.push(input_char)  //letter at-a-time (or string) inserted to an array\r\n        }\r\n        return content.length ? content.join('') : '' \r\n      } \r\n\r\n      this.get_contents_to = function (name) { //get the full content of a script or style to pass to js_beautify\r\n        if (this.pos === this.input.length) {\r\n          return ['', 'TK_EOF'] \r\n        }\r\n        let content = '' \r\n        const reg_match = new RegExp(`</${name}\\\\s*>`, 'igm') \r\n        reg_match.lastIndex = this.pos \r\n        const reg_array = reg_match.exec(this.input) \r\n        const end_script = reg_array ? reg_array.index : this.input.length  //absolute end of script\r\n        if (this.pos < end_script) { //get everything in between the script tags\r\n          content = this.input.substring(this.pos, end_script) \r\n          this.pos = end_script \r\n        }\r\n        return content \r\n      } \r\n\r\n      this.record_tag = function (tag) { //function to record a tag and its parent in this.tags Object\r\n        if (this.tags[`${tag}count`]) { //check for the existence of this tag type\r\n          this.tags[`${tag}count`]++ \r\n          this.tags[tag + this.tags[`${tag}count`]] = this.indent_level  //and record the present indent level\r\n        } else { //otherwise initialize this tag type\r\n          this.tags[`${tag}count`] = 1 \r\n          this.tags[tag + this.tags[`${tag}count`]] = this.indent_level  //and record the present indent level\r\n        }\r\n        this.tags[tag + this.tags[`${tag}count`] + 'parent'] = this.tags.parent  //set the parent (i.e. in the case of a div this.tags.div1parent)\r\n        this.tags.parent = tag + this.tags[`${tag}count`]  //and make this the current parent (i.e. in the case of a div 'div1')\r\n      } \r\n\r\n      this.retrieve_tag = function (tag) { //function to retrieve the opening tag to the corresponding closer\r\n        if (this.tags[`${tag}count`]) { //if the openener is not in the Object we ignore it\r\n          let temp_parent = this.tags.parent  //check to see if it's a closable tag.\r\n          while (temp_parent) { //till we reach '' (the initial value) \r\n            if (tag + this.tags[`${tag}count`] === temp_parent) { //if this is it use it\r\n              break \r\n            }\r\n            temp_parent = this.tags[`${temp_parent}parent`]  //otherwise keep on climbing up the DOM Tree\r\n          }\r\n          if (temp_parent) { //if we caught something\r\n            this.indent_level = this.tags[tag + this.tags[`${tag}count`]]  //set the indent_level accordingly\r\n            this.tags.parent = this.tags[temp_parent + 'parent']  //and set the current parent\r\n          }\r\n          delete this.tags[tag + this.tags[`${tag}count`] + 'parent']  //delete the closed tags parent reference...\r\n          delete this.tags[tag + this.tags[`${tag}count`]]  //...and the tag itself\r\n          if (this.tags[`${tag}count`] === 1) {\r\n            delete this.tags[`${tag}count`] \r\n          } else {\r\n            this.tags[`${tag}count`]-- \r\n          }\r\n        }\r\n      } \r\n\r\n      this.indent_to_tag = function (tag) {\r\n        // Match the indentation level to the last use of this tag, but don't remove it.\r\n        if (!this.tags[`${tag}count`]) {\r\n          return \r\n        }\r\n        let temp_parent = this.tags.parent \r\n        while (temp_parent) {\r\n          if (tag + this.tags[`${tag}count`] === temp_parent) {\r\n            break \r\n          }\r\n          temp_parent = this.tags[`${temp_parent}parent`] \r\n        }\r\n        if (temp_parent) {\r\n          this.indent_level = this.tags[tag + this.tags[`${tag}count`]] \r\n        }\r\n      } \r\n\r\n      this.get_tag = function (peek) { //function to get a full tag and parse its type\r\n        let input_char = '',\r\n          content = [],\r\n          comment = '',\r\n          space = false,\r\n          first_attr = true,\r\n          tag_start, \r\n          tag_end,\r\n          tag_start_char,\r\n          orig_pos = this.pos,\r\n          orig_line_char_count = this.line_char_count \r\n\r\n        peek = peek !== undefined ? peek : false \r\n\r\n        do {\r\n          if (this.pos >= this.input.length) {\r\n            if (peek) {\r\n              this.pos = orig_pos \r\n              this.line_char_count = orig_line_char_count \r\n            }\r\n            return content.length ? content.join('') : ['', 'TK_EOF'] \r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n\r\n          if (this.Utils.in_array(input_char, this.Utils.whitespace)) { //don't want to insert unnecessary space\r\n            space = true \r\n            continue \r\n          }\r\n\r\n          if (input_char === '\\'' || input_char === '\"') {\r\n            input_char += this.get_unformatted(input_char) \r\n            space = true \r\n\r\n          }\r\n\r\n          if (input_char === '=') { //no space before =\r\n            space = false \r\n          }\r\n\r\n          if (content.length && content[content.length - 1] != '=' && input_char != '>' && space) {\r\n            //no space after = or before >\r\n            this.space_or_wrap(content) \r\n            space = false \r\n            if (!first_attr && wrap_attributes === 'force' && input_char != '/') {\r\n              this.print_newline(true, content) \r\n              this.print_indentation(content) \r\n              for (let count = 0;  count < wrap_attributes_indent_size;  count++) {\r\n                content.push(indent_character) \r\n              }\r\n            }\r\n            for (let i = 0;  i < content.length;  i++) {\r\n              if (content[i] === ' ') {\r\n                first_attr = false \r\n                break \r\n              }\r\n            }\r\n          }\r\n\r\n          if (indent_handlebars && tag_start_char === '<') {\r\n            // When inside an angle-bracket tag, put spaces around\r\n            // handlebars not inside of strings.\r\n            if ((input_char + this.input.charAt(this.pos)) === '{{') {\r\n              input_char += this.get_unformatted('}}') \r\n              if (content.length && content[content.length - 1] != ' ' && content[content.length - 1] != '<') {\r\n                input_char = ` ${input_char}` \r\n              }\r\n              space = true \r\n            }\r\n          }\r\n\r\n          if (input_char === '<' && !tag_start_char) {\r\n            tag_start = this.pos - 1 \r\n            tag_start_char = '<' \r\n          }\r\n\r\n          if (indent_handlebars && !tag_start_char) {\r\n            if (content.length >= 2 && content[content.length - 1] === '{' && content[content.length - 2] === '{') {\r\n              if (input_char === '#' || input_char === '/' || input_char === '!') {\r\n                tag_start = this.pos - 3 \r\n              } else {\r\n                tag_start = this.pos - 2 \r\n              }\r\n              tag_start_char = '{' \r\n            }\r\n          }\r\n\r\n          this.line_char_count++ \r\n          content.push(input_char)  //inserts character at-a-time (or string)\r\n\r\n          if (content[1] && (content[1] === '!' || content[1] === '?' || content[1] === '%')) { //if we're in a comment, do something special\r\n            // We treat all comments as literals, even more than preformatted tags\r\n            // we just look for the appropriate close tag\r\n            content = [this.get_comment(tag_start)] \r\n            break \r\n          }\r\n\r\n          if (indent_handlebars && content[1] && content[1] === '{' && content[2] && content[2] === '!') { //if we're in a comment, do something special\r\n            // We treat all comments as literals, even more than preformatted tags\r\n            // we just look for the appropriate close tag\r\n            content = [this.get_comment(tag_start)] \r\n            break \r\n          }\r\n\r\n          if (indent_handlebars && tag_start_char === '{' && content.length > 2 && content[content.length - 2] === '}' && content[content.length - 1] === '}') {\r\n            break \r\n          }\r\n        } while (input_char != '>') \r\n\r\n        const tag_complete = content.join('') \r\n        let tag_index \r\n        let tag_offset \r\n\r\n        if (tag_complete.indexOf(' ') != -1) { //if there's whitespace, thats where the tag name ends\r\n          tag_index = tag_complete.indexOf(' ') \r\n        } else if (tag_complete[0] === '{') {\r\n          tag_index = tag_complete.indexOf('}') \r\n        } else { //otherwise go with the tag ending\r\n          tag_index = tag_complete.indexOf('>') \r\n        }\r\n        if (tag_complete[0] === '<' || !indent_handlebars) {\r\n          tag_offset = 1 \r\n        } else {\r\n          tag_offset = tag_complete[2] === '#' ? 3 : 2 \r\n        }\r\n        const tag_check = tag_complete.substring(tag_offset, tag_index).toLowerCase() \r\n        if (tag_complete.charAt(tag_complete.length - 2) === '/' ||\r\n                    this.Utils.in_array(tag_check, this.Utils.single_token)) { //if this tag name is a single tag type (either in the list or has a closing /)\r\n          if (!peek) {\r\n            this.tag_type = 'SINGLE' \r\n          }\r\n        } else if (indent_handlebars && tag_complete[0] === '{' && tag_check === 'else') {\r\n          if (!peek) {\r\n            this.indent_to_tag('if') \r\n            this.tag_type = 'HANDLEBARS_ELSE' \r\n            this.indent_content = true \r\n            this.traverse_whitespace() \r\n          }\r\n        } else if (this.is_unformatted(tag_check, unformatted)) { // do not reformat the \"unformatted\" tags\r\n          comment = this.get_unformatted(`</${tag_check}>`, tag_complete)  //...delegate to get_unformatted function\r\n          content.push(comment) \r\n          tag_end = this.pos - 1 \r\n          this.tag_type = 'SINGLE' \r\n        } else if (tag_check === 'script' &&\r\n                    (tag_complete.search('type') === -1 ||\r\n                        (tag_complete.search('type') > -1 &&\r\n                            tag_complete.search(/\\b(text|application)\\/(x-)?(javascript|ecmascript|jscript|livescript)/) > -1))) {\r\n          if (!peek) {\r\n            this.record_tag(tag_check) \r\n            this.tag_type = 'SCRIPT' \r\n          }\r\n        } else if (tag_check === 'style' &&\r\n                    (tag_complete.search('type') === -1 ||\r\n                        (tag_complete.search('type') > -1 && tag_complete.search('text/css') > -1))) {\r\n          if (!peek) {\r\n            this.record_tag(tag_check) \r\n            this.tag_type = 'STYLE' \r\n          }\r\n        } else if (tag_check.charAt(0) === '!') { //peek for <! comment\r\n          // for comments content is already correct.\r\n          if (!peek) {\r\n            this.tag_type = 'SINGLE' \r\n            this.traverse_whitespace() \r\n          }\r\n        } else if (!peek) {\r\n          if (tag_check.charAt(0) === '/') { //this tag is a double tag so check for tag-ending\r\n            this.retrieve_tag(tag_check.substring(1))  //remove it and all ancestors\r\n            this.tag_type = 'END' \r\n          } else { //otherwise it's a start-tag\r\n            this.record_tag(tag_check)  //push it on the tag stack\r\n            if (tag_check.toLowerCase() != 'html') {\r\n              this.indent_content = true \r\n            }\r\n            this.tag_type = 'START' \r\n          }\r\n\r\n          // Allow preserving of newlines after a start or end tag\r\n          if (this.traverse_whitespace()) {\r\n            this.space_or_wrap(content) \r\n          }\r\n\r\n          if (this.Utils.in_array(tag_check, this.Utils.extra_liners)) { //check if this double needs an extra line\r\n            this.print_newline(false, this.output) \r\n            if (this.output.length && this.output[this.output.length - 2] != '\\n') {\r\n              this.print_newline(true, this.output) \r\n            }\r\n          }\r\n        }\r\n\r\n        if (peek) {\r\n          this.pos = orig_pos \r\n          this.line_char_count = orig_line_char_count \r\n        }\r\n\r\n        return content.join('')  //returns fully formatted tag\r\n      } \r\n\r\n      this.get_comment = function (start_pos) { //function to return comment content in its entirety\r\n        // this is will have very poor perf, but will work for now.\r\n        let comment = '',\r\n          delimiter = '>',\r\n          matched = false \r\n\r\n        this.pos = start_pos \r\n        let input_char = this.input.charAt(this.pos) \r\n        this.pos++ \r\n\r\n        while (this.pos <= this.input.length) {\r\n          comment += input_char \r\n\r\n          // only need to check for the delimiter if the last chars match\r\n          if (comment[comment.length - 1] === delimiter[delimiter.length - 1] &&\r\n                        comment.indexOf(delimiter) != -1) {\r\n            break \r\n          }\r\n\r\n          // only need to search for custom delimiter for the first few characters\r\n          if (!matched && comment.length < 10) {\r\n            if (comment.indexOf('<![if') === 0) { //peek for <![if conditional comment\r\n              delimiter = '<![endif]>' \r\n              matched = true \r\n            } else if (comment.indexOf('<![cdata[') === 0) { //if it's a <[cdata[ comment...\r\n              delimiter = ']]>' \r\n              matched = true \r\n            } else if (comment.indexOf('<![') === 0) { // some other ![ comment? ...\r\n              delimiter = ']>' \r\n              matched = true \r\n            } else if (comment.indexOf('<!--') === 0) { // <!-- comment ...\r\n              delimiter = '-->' \r\n              matched = true \r\n            } else if (comment.indexOf('{{!') === 0) { // {{! handlebars comment\r\n              delimiter = '}}' \r\n              matched = true \r\n            } else if (comment.indexOf('<?') === 0) { // {{! handlebars comment\r\n              delimiter = '?>' \r\n              matched = true \r\n            } else if (comment.indexOf('<%') === 0) { // {{! handlebars comment\r\n              delimiter = '%>' \r\n              matched = true \r\n            }\r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n        }\r\n\r\n        return comment \r\n      } \r\n\r\n      this.get_unformatted = function (delimiter, orig_tag) { //function to return unformatted content in its entirety\r\n\r\n        if (orig_tag && orig_tag.toLowerCase().indexOf(delimiter) != -1) {\r\n          return '' \r\n        }\r\n        let input_char = '' \r\n        let content = '' \r\n        let min_index = 0 \r\n        let space = true \r\n        do {\r\n\r\n          if (this.pos >= this.input.length) {\r\n            return content \r\n          }\r\n\r\n          input_char = this.input.charAt(this.pos) \r\n          this.pos++ \r\n\r\n          if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\r\n            if (!space) {\r\n              this.line_char_count-- \r\n              continue \r\n            }\r\n            if (input_char === '\\n' || input_char === '\\r') {\r\n              content += '\\n' \r\n              /*  Don't change tab indention for unformatted blocks.  If using code for html editing, this will greatly affect <pre> tags if they are specified in the 'unformatted array'\r\n                          for (const i=0  i<this.indent_level  i++) {\r\n                            content += this.indent_string \r\n                          }\r\n                          space = false  //...and make sure other indentation is erased\r\n                          */\r\n              this.line_char_count = 0 \r\n              continue \r\n            }\r\n          }\r\n          content += input_char \r\n          this.line_char_count++ \r\n          space = true \r\n\r\n          if (indent_handlebars && input_char === '{' && content.length && content[content.length - 2] === '{') {\r\n            // Handlebars expressions in strings should also be unformatted.\r\n            content += this.get_unformatted('}}') \r\n            // These expressions are opaque.  Ignore delimiters found in them.\r\n            min_index = content.length \r\n          }\r\n        } while (content.toLowerCase().indexOf(delimiter, min_index) === -1) \r\n        return content \r\n      } \r\n\r\n      this.get_token = function () { //initial handler for token-retrieval\r\n        let token \r\n\r\n        if (this.last_token === 'TK_TAG_SCRIPT' || this.last_token === 'TK_TAG_STYLE') { //check if we need to format javascript\r\n          const type = this.last_token.substr(7) \r\n          token = this.get_contents_to(type) \r\n          if (typeof token != 'string') {\r\n            return token \r\n          }\r\n          return [token, `TK_${type}`] \r\n        }\r\n        if (this.current_mode === 'CONTENT') {\r\n          token = this.get_content() \r\n          if (typeof token != 'string') {\r\n            return token \r\n          } else {\r\n            return [token, 'TK_CONTENT'] \r\n          }\r\n        }\r\n\r\n        if (this.current_mode === 'TAG') {\r\n          token = this.get_tag() \r\n          if (typeof token != 'string') {\r\n            return token \r\n          } else {\r\n            const tag_name_type = `TK_TAG_${this.tag_type}` \r\n            return [token, tag_name_type] \r\n          }\r\n        }\r\n      } \r\n\r\n      this.get_full_indent = function (level) {\r\n        level = this.indent_level + level || 0 \r\n        if (level < 1) {\r\n          return '' \r\n        }\r\n\r\n        return (new Array(level + 1)).join(this.indent_string) \r\n      } \r\n\r\n      this.is_unformatted = function (tag_check, unformatted) {\r\n        //is this an HTML5 block-level link?\r\n        if (!this.Utils.in_array(tag_check, unformatted)) {\r\n          return false \r\n        }\r\n\r\n        if (tag_check.toLowerCase() != 'a' || !this.Utils.in_array('a', unformatted)) {\r\n          return true \r\n        }\r\n\r\n        //at this point we have an  tag  is its first child something we want to remain\r\n        //unformatted?\r\n        const next_tag = this.get_tag(true /* peek. */) \r\n\r\n        // test next_tag to see if it is just html tag (no external content)\r\n        const tag = (next_tag || '').match(/^\\s*<\\s*\\/?([a-z]*)\\s*[^>]*>\\s*$/) \r\n\r\n        // if next_tag comes back but is not an isolated tag, then\r\n        // let's treat the 'a' tag as having content\r\n        // and respect the unformatted option\r\n        if (!tag || this.Utils.in_array(tag, unformatted)) {\r\n          return true \r\n        } else {\r\n          return false \r\n        }\r\n      } \r\n\r\n      this.printer = function (js_source, indent_character, indent_size, wrap_line_length, brace_style) { //handles input/output and some other printing functions\r\n\r\n        this.input = js_source || ''  //gets the input for the Parser\r\n        this.output = [] \r\n        this.indent_character = indent_character \r\n        this.indent_string = '' \r\n        this.indent_size = indent_size \r\n        this.brace_style = brace_style \r\n        this.indent_level = 0 \r\n        this.wrap_line_length = wrap_line_length \r\n        this.line_char_count = 0  //count to see if wrap_line_length was exceeded\r\n\r\n        for (let i = 0;  i < this.indent_size;  i++) {\r\n          this.indent_string += this.indent_character \r\n        }\r\n\r\n        this.print_newline = function (force, arr) {\r\n          this.line_char_count = 0 \r\n          if (!arr || !arr.length) {\r\n            return \r\n          }\r\n          if (force || (arr[arr.length - 1] != '\\n')) { //we might want the extra line\r\n            if ((arr[arr.length - 1] != '\\n')) {\r\n              arr[arr.length - 1] = rtrim(arr[arr.length - 1]) \r\n            }\r\n            arr.push('\\n') \r\n          }\r\n        } \r\n\r\n        this.print_indentation = function (arr) {\r\n          for (let i = 0;  i < this.indent_level;  i++) {\r\n            arr.push(this.indent_string) \r\n            this.line_char_count += this.indent_string.length \r\n          }\r\n        } \r\n\r\n        this.print_token = function (text) {\r\n          // Avoid printing initial whitespace.\r\n          if (this.is_whitespace(text) && !this.output.length) {\r\n            return \r\n          }\r\n          if (text || text !== '') {\r\n            if (this.output.length && this.output[this.output.length - 1] === '\\n') {\r\n              this.print_indentation(this.output) \r\n              text = ltrim(text) \r\n            }\r\n          }\r\n          this.print_token_raw(text) \r\n        } \r\n\r\n        this.print_token_raw = function (text) {\r\n          // If we are going to print newlines, truncate trailing\r\n          // whitespace, as the newlines will represent the space.\r\n          if (this.newlines > 0) {\r\n            text = rtrim(text) \r\n          }\r\n\r\n          if (text && text !== '') {\r\n            if (text.length > 1 && text[text.length - 1] === '\\n') {\r\n              // unformatted tags can grab newlines as their last character\r\n              this.output.push(text.slice(0, -1)) \r\n              this.print_newline(false, this.output) \r\n            } else {\r\n              this.output.push(text) \r\n            }\r\n          }\r\n\r\n          for (let n = 0;  n < this.newlines;  n++) {\r\n            this.print_newline(n > 0, this.output) \r\n          }\r\n          this.newlines = 0 \r\n        } \r\n\r\n        this.indent = function () {\r\n          this.indent_level++ \r\n        } \r\n\r\n        this.unindent = function () {\r\n          if (this.indent_level > 0) {\r\n            this.indent_level-- \r\n          }\r\n        } \r\n      } \r\n      return this \r\n    }\r\n\r\n    /*_____________________--------------------_____________________*/\r\n\r\n    multi_parser = new Parser()  //wrapping functions Parser\r\n    multi_parser.printer(html_source, indent_character, indent_size, wrap_line_length, brace_style)  //initialize starting values\r\n\r\n    while (true) {\r\n      const t = multi_parser.get_token() \r\n      multi_parser.token_text = t[0] \r\n      multi_parser.token_type = t[1] \r\n\r\n      if (multi_parser.token_type === 'TK_EOF') {\r\n        break \r\n      }\r\n\r\n      switch (multi_parser.token_type) {\r\n      case 'TK_TAG_START':\r\n        multi_parser.print_newline(false, multi_parser.output) \r\n        multi_parser.print_token(multi_parser.token_text) \r\n        if (multi_parser.indent_content) {\r\n          multi_parser.indent() \r\n          multi_parser.indent_content = false \r\n        }\r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_STYLE':\r\n      case 'TK_TAG_SCRIPT':\r\n        multi_parser.print_newline(false, multi_parser.output) \r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_END':\r\n        // Print new line only if the tag has no content and has child\r\n        if (multi_parser.last_token === 'TK_CONTENT' && multi_parser.last_text === '') {\r\n          const tag_name = multi_parser.token_text.match(/\\w+/)[0] \r\n          let tag_extracted_from_last_output = null \r\n          if (multi_parser.output.length) {\r\n            tag_extracted_from_last_output = multi_parser.output[multi_parser.output.length - 1].match(/(?:<|{{#)\\/?\\s*(\\w+)/)\r\n          }\r\n          if (tag_extracted_from_last_output === null ||\r\n                            (tag_extracted_from_last_output[1] != tag_name && !multi_parser.Utils.in_array(tag_extracted_from_last_output[1], unformatted))) {\r\n            multi_parser.print_newline(false, multi_parser.output) \r\n          }\r\n        }\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_SINGLE':\r\n        // Don't add a newline before elements that should remain unformatted.\r\n        const tag_check = multi_parser.token_text.match(/^\\s*<([a-z-]+)/i) \r\n        if (!tag_check || !multi_parser.Utils.in_array(tag_check[1], unformatted)) {\r\n          multi_parser.print_newline(false, multi_parser.output) \r\n        }\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_HANDLEBARS_ELSE':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        if (multi_parser.indent_content) {\r\n          multi_parser.indent() \r\n          multi_parser.indent_content = false \r\n        }\r\n        multi_parser.current_mode = 'CONTENT' \r\n        break \r\n      case 'TK_TAG_HANDLEBARS_COMMENT':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      case 'TK_CONTENT':\r\n        multi_parser.print_token(multi_parser.token_text) \r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      case 'TK_STYLE':\r\n      case 'TK_SCRIPT':\r\n        if (multi_parser.token_text !== '') {\r\n          multi_parser.print_newline(false, multi_parser.output) \r\n          let { token_text : text } = multi_parser \r\n          let _beautifier \r\n          let script_indent_level = 1 \r\n\r\n          if (multi_parser.token_type === 'TK_SCRIPT') {\r\n            _beautifier = typeof js_beautify === 'function' && js_beautify \r\n          } else if (multi_parser.token_type === 'TK_STYLE') {\r\n            _beautifier = typeof css_beautify === 'function' && css_beautify \r\n          }\r\n\r\n          if (options.indent_scripts === 'keep') {\r\n            script_indent_level = 0 \r\n          } else if (options.indent_scripts === 'separate') {\r\n            script_indent_level = -multi_parser.indent_level \r\n          }\r\n\r\n          const indentation = multi_parser.get_full_indent(script_indent_level) \r\n          if (_beautifier) {\r\n            // call the Beautifier if avaliable\r\n            text = _beautifier(text.replace(/^\\s*/, indentation), options) \r\n          } else {\r\n            // simply indent the string otherwise\r\n            const white = text.match(/^\\s*/)[0] \r\n            const _level = white.match(/[^\\n\\r]*$/)[0].split(multi_parser.indent_string).length - 1 \r\n            const reindent = multi_parser.get_full_indent(script_indent_level - _level) \r\n\r\n            text = text.replace(/^\\s*/, indentation)\r\n              .replace(/\\r\\n|\\r|\\n/g, '\\n' + reindent)\r\n              .replace(/\\s+$/, '') \r\n          }\r\n          if (text) {\r\n            multi_parser.print_token_raw(text) \r\n            multi_parser.print_newline(true, multi_parser.output) \r\n          }\r\n        }\r\n        multi_parser.current_mode = 'TAG' \r\n        break \r\n      default:\r\n        // We should not be getting here but we don't want to drop input on the floor\r\n        // Just output the text and move on\r\n        if (multi_parser.token_text !== '') {\r\n          multi_parser.print_token(multi_parser.token_text) \r\n        }\r\n        break \r\n      }\r\n      multi_parser.last_token = multi_parser.token_type \r\n      multi_parser.last_text = multi_parser.token_text \r\n    }\r\n    let sweet_code = multi_parser.output.join('').replace(/[\\r\\n\\t ]+$/, '') \r\n    if (end_with_newline) {\r\n      sweet_code += '\\n' \r\n    }\r\n    return sweet_code \r\n  }\r\n\r\n  function css_beautify(source_text, options) {\r\n    const NESTED_AT_RULE = {\r\n      '@page': true,\r\n      '@font-face': true,\r\n      '@keyframes': true,\r\n      // also in CONDITIONAL_GROUP_RULE below\r\n      '@media': true,\r\n      '@supports': true,\r\n      '@document': true\r\n    } \r\n    const CONDITIONAL_GROUP_RULE = {\r\n      '@media': true,\r\n      '@supports': true,\r\n      '@document': true\r\n    } \r\n\r\n    options = options || {} \r\n    source_text = source_text || '' \r\n    // HACK: newline parsing inconsistent. This brute force normalizes the input.\r\n    source_text = source_text.replace(/\\r\\n|[\\r\\u2028\\u2029]/g, '\\n')\r\n\r\n    let indentSize = options.indent_size || 4 \r\n    let indentCharacter = options.indent_char || ' ' \r\n    const selectorSeparatorNewline = (options.selector_separator_newline === undefined) ? true : options.selector_separator_newline \r\n    const end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    const newline_between_rules = (options.newline_between_rules === undefined) ? true : options.newline_between_rules \r\n    let eol = options.eol ? options.eol : '\\n' \r\n\r\n    // compatibility\r\n    if (typeof indentSize === 'string') {\r\n      indentSize = parseInt(indentSize, 10) \r\n    }\r\n\r\n    if (options.indent_with_tabs) {\r\n      indentCharacter = '\\t' \r\n      indentSize = 1 \r\n    }\r\n\r\n    eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n')\r\n\r\n\r\n    // tokenizer\r\n    const whiteRe = /^\\s+$/ \r\n    const wordRe = /[\\w$\\-_]/ \r\n\r\n    let pos = -1,\r\n      ch \r\n    let parenLevel = 0 \r\n\r\n    function next() {\r\n      ch = source_text.charAt(++pos) \r\n      return ch || '' \r\n    }\r\n\r\n    function peek(skipWhitespace) {\r\n      let result = '' \r\n      const prev_pos = pos \r\n      if (skipWhitespace) {\r\n        eatWhitespace() \r\n      }\r\n      result = source_text.charAt(pos + 1) || '' \r\n      pos = prev_pos - 1 \r\n      next() \r\n      return result \r\n    }\r\n\r\n    function eatString(endChars) {\r\n      const start = pos \r\n      while (next()) {\r\n        if (ch === '\\\\') {\r\n          next() \r\n        } else if (endChars.indexOf(ch) !== -1) {\r\n          break \r\n        } else if (ch === '\\n') {\r\n          break \r\n        }\r\n      }\r\n      return source_text.substring(start, pos + 1) \r\n    }\r\n\r\n    function peekString(endChar) {\r\n      const prev_pos = pos \r\n      const str = eatString(endChar) \r\n      pos = prev_pos - 1 \r\n      next() \r\n      return str \r\n    }\r\n\r\n    function eatWhitespace() {\r\n      let result = '' \r\n      while (whiteRe.test(peek())) {\r\n        next() \r\n        result += ch \r\n      }\r\n      return result \r\n    }\r\n\r\n    function skipWhitespace() {\r\n      let result = '' \r\n      if (ch && whiteRe.test(ch)) {\r\n        result = ch \r\n      }\r\n      while (whiteRe.test(next())) {\r\n        result += ch \r\n      }\r\n      return result \r\n    }\r\n\r\n    function eatComment(singleLine) {\r\n      const start = pos \r\n      singleLine = peek() === '/' \r\n      next() \r\n      while (next()) {\r\n        if (!singleLine && ch === '*' && peek() === '/') {\r\n          next() \r\n          break \r\n        } else if (singleLine && ch === '\\n') {\r\n          return source_text.substring(start, pos) \r\n        }\r\n      }\r\n\r\n      return source_text.substring(start, pos) + ch \r\n    }\r\n\r\n\r\n    function lookBack(str) {\r\n      return source_text.substring(pos - str.length, pos).toLowerCase() ===\r\n                str \r\n    }\r\n\r\n    // Nested pseudo-class if we are insideRule\r\n    // and the next special character found opens\r\n    // a new block\r\n    function foundNestedPseudoClass() {\r\n      let openParen = 0 \r\n      for (let i = pos + 1;  i < source_text.length;  i++) {\r\n        const ch = source_text.charAt(i) \r\n        if (ch === '{') {\r\n          return true \r\n        } else if (ch === '(') {\r\n          // pseudoclasses can contain ()\r\n          openParen += 1 \r\n        } else if (ch === ')') {\r\n          if (openParen === 0) {\r\n            return false \r\n          }\r\n          openParen -= 1 \r\n        } else if (ch === ' ' || ch === '}') {\r\n          return false \r\n        }\r\n      }\r\n      return false \r\n    }\r\n\r\n    // printer\r\n    let basebaseIndentString = source_text.match(/^[\\t ]*/)[0] \r\n    const singleIndent = new Array(indentSize + 1).join(indentCharacter) \r\n    let indentLevel = 0 \r\n    let nestedLevel = 0 \r\n\r\n    function indent() {\r\n      indentLevel++ \r\n      basebaseIndentString += singleIndent \r\n    }\r\n\r\n    function outdent() {\r\n      indentLevel-- \r\n      basebaseIndentString = basebaseIndentString.slice(0, -indentSize) \r\n    }\r\n\r\n    const print = {} \r\n    print['{'] = function (ch) {\r\n      print.singleSpace() \r\n      output.push(ch) \r\n      print.newLine() \r\n    } \r\n    print['}'] = function (ch) {\r\n      print.newLine() \r\n      output.push(ch) \r\n      print.newLine() \r\n    } \r\n\r\n    print._lastCharWhitespace = function () {\r\n      return whiteRe.test(output[output.length - 1]) \r\n    } \r\n\r\n    print.newLine = function (keepWhitespace) {\r\n      if (output.length) {\r\n        if (!keepWhitespace && output[output.length - 1] !== '\\n') {\r\n          print.trim() \r\n        }\r\n\r\n        output.push('\\n') \r\n\r\n        if (basebaseIndentString) {\r\n          output.push(basebaseIndentString) \r\n        }\r\n      }\r\n    } \r\n    print.singleSpace = function () {\r\n      if (output.length && !print._lastCharWhitespace()) {\r\n        output.push(' ') \r\n      }\r\n    } \r\n\r\n    print.preserveSingleSpace = function () {\r\n      if (isAfterSpace) {\r\n        print.singleSpace() \r\n      }\r\n    } \r\n\r\n    print.trim = function () {\r\n      while (print._lastCharWhitespace()) {\r\n        output.pop() \r\n      }\r\n    } \r\n\r\n\r\n    const output = [] \r\n    /*_____________________--------------------_____________________*/\r\n\r\n    let insideRule = false \r\n    let insidePropertyValue = false \r\n    let enteringConditionalGroup = false \r\n    let top_ch = '' \r\n    let last_top_ch = '' \r\n    let isAfterSpace\r\n\r\n    while (true) {\r\n      const whitespace = skipWhitespace() \r\n      isAfterSpace = whitespace !== '' \r\n      const isAfterNewline = whitespace.indexOf('\\n') !== -1 \r\n      last_top_ch = top_ch \r\n      top_ch = ch \r\n\r\n      if (!ch) {\r\n        break \r\n      } else if (ch === '/' && peek() === '*') { /* css comment */\r\n        const header = indentLevel === 0 \r\n\r\n        if (isAfterNewline || header) {\r\n          print.newLine() \r\n        }\r\n\r\n        output.push(eatComment()) \r\n        print.newLine() \r\n        if (header) {\r\n          print.newLine(true) \r\n        }\r\n      } else if (ch === '/' && peek() === '/') { // single line comment\r\n        if (!isAfterNewline && last_top_ch !== '{') {\r\n          print.trim() \r\n        }\r\n        print.singleSpace() \r\n        output.push(eatComment()) \r\n        print.newLine() \r\n      } else if (ch === '@') {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n\r\n        // strip trailing space, if present, for hash property checks\r\n        let variableOrRule = peekString(': , {}()[]/=\\'\"') \r\n\r\n        if (variableOrRule.match(/[ :]$/)) {\r\n          // we have a variable or pseudo-class, add it and insert one space before continuing\r\n          next() \r\n          variableOrRule = eatString(': ').replace(/\\s$/, '') \r\n          output.push(variableOrRule) \r\n          print.singleSpace() \r\n        }\r\n\r\n        variableOrRule = variableOrRule.replace(/\\s$/, '')\r\n\r\n        // might be a nesting at-rule\r\n        if (variableOrRule in NESTED_AT_RULE) {\r\n          nestedLevel += 1 \r\n          if (variableOrRule in CONDITIONAL_GROUP_RULE) {\r\n            enteringConditionalGroup = true \r\n          }\r\n        }\r\n      } else if (ch === '#' && peek() === '{') {\r\n        print.preserveSingleSpace() \r\n        output.push(eatString('}')) \r\n      } else if (ch === '{') {\r\n        if (peek(true) === '}') {\r\n          eatWhitespace() \r\n          next() \r\n          print.singleSpace() \r\n          output.push('{}') \r\n          print.newLine() \r\n          if (newline_between_rules && indentLevel === 0) {\r\n            print.newLine(true) \r\n          }\r\n        } else {\r\n          indent() \r\n          print['{'](ch) \r\n          // when entering conditional groups, only rulesets are allowed\r\n          if (enteringConditionalGroup) {\r\n            enteringConditionalGroup = false \r\n            insideRule = (indentLevel > nestedLevel) \r\n          } else {\r\n            // otherwise, declarations are also allowed\r\n            insideRule = (indentLevel >= nestedLevel) \r\n          }\r\n        }\r\n      } else if (ch === '}') {\r\n        outdent() \r\n        print['}'](ch) \r\n        insideRule = false \r\n        insidePropertyValue = false \r\n        if (nestedLevel) {\r\n          nestedLevel-- \r\n        }\r\n        if (newline_between_rules && indentLevel === 0) {\r\n          print.newLine(true) \r\n        }\r\n      } else if (ch === ':') {\r\n        eatWhitespace() \r\n        if ((insideRule || enteringConditionalGroup) &&\r\n                    !(lookBack('&') || foundNestedPseudoClass())) {\r\n          // 'property: value' delimiter\r\n          // which could be in a conditional group query\r\n          insidePropertyValue = true \r\n          output.push(':') \r\n          print.singleSpace() \r\n        } else {\r\n          // sass/less parent reference don't use a space\r\n          // sass nested pseudo-class don't use a space\r\n          if (peek() === ':') {\r\n            // pseudo-element\r\n            next() \r\n            output.push('::') \r\n          } else {\r\n            // pseudo-class\r\n            output.push(':') \r\n          }\r\n        }\r\n      } else if (ch === '\"' || ch === '\\'') {\r\n        print.preserveSingleSpace() \r\n        output.push(eatString(ch)) \r\n      } else if (ch === ' ') {\r\n        insidePropertyValue = false \r\n        output.push(ch) \r\n        print.newLine() \r\n      } else if (ch === '(') { // may be a url\r\n        if (lookBack('url')) {\r\n          output.push(ch) \r\n          eatWhitespace() \r\n          if (next()) {\r\n            if (ch !== ')' && ch !== '\"' && ch !== '\\'') {\r\n              output.push(eatString(')')) \r\n            } else {\r\n              pos-- \r\n            }\r\n          }\r\n        } else {\r\n          parenLevel++ \r\n          print.preserveSingleSpace() \r\n          output.push(ch) \r\n          eatWhitespace() \r\n        }\r\n      } else if (ch === ')') {\r\n        output.push(ch) \r\n        parenLevel-- \r\n      } else if (ch === ',') {\r\n        output.push(ch) \r\n        eatWhitespace() \r\n        if (selectorSeparatorNewline && !insidePropertyValue && parenLevel < 1) {\r\n          print.newLine() \r\n        } else {\r\n          print.singleSpace() \r\n        }\r\n      } else if (ch === ']') {\r\n        output.push(ch) \r\n      } else if (ch === '[') {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n      } else if (ch === '=') { // no whitespace before or after\r\n        eatWhitespace()\r\n        ch = '=' \r\n        output.push(ch) \r\n      } else {\r\n        print.preserveSingleSpace() \r\n        output.push(ch) \r\n      }\r\n    }\r\n\r\n\r\n    let sweetCode = '' \r\n    if (basebaseIndentString) {\r\n      sweetCode += basebaseIndentString \r\n    }\r\n\r\n    sweetCode += output.join('').replace(/[\\r\\n\\t ]+$/, '') \r\n\r\n    // establish end_with_newline\r\n    if (end_with_newline) {\r\n      sweetCode += '\\n' \r\n    }\r\n\r\n    if (eol != '\\n') {\r\n      sweetCode = sweetCode.replace(/[\\n]/g, eol) \r\n    }\r\n\r\n    return sweetCode \r\n  }\r\n\r\n  function in_array(what, arr) {\r\n    for (let i = 0 ; i < arr.length;  i += 1) {\r\n      if (arr[i] === what) {\r\n        return true \r\n      }\r\n    }\r\n    return false \r\n  }\r\n\r\n  function trim(s) {\r\n    return s.replace(/^\\s+|\\s+$/g, '') \r\n  }\r\n\r\n  function ltrim(s) {\r\n    return s.replace(/^\\s+/g, '') \r\n  }\r\n\r\n  function rtrim(s) {\r\n    return s.replace(/\\s+$/g, '') \r\n  }\r\n\r\n  function js_beautify(js_source_text, options) {\r\n    'use strict' \r\n    const beautifier = new Beautifier(js_source_text, options) \r\n    return beautifier.beautify() \r\n  }\r\n\r\n  const MODE = {\r\n    BlockStatement: 'BlockStatement', // 'BLOCK'\r\n    Statement: 'Statement', // 'STATEMENT'\r\n    ObjectLiteral: 'ObjectLiteral', // 'OBJECT',\r\n    ArrayLiteral: 'ArrayLiteral', //'[EXPRESSION]',\r\n    ForInitializer: 'ForInitializer', //'(FOR-EXPRESSION)',\r\n    Conditional: 'Conditional', //'(COND-EXPRESSION)',\r\n    Expression: 'Expression' //'(EXPRESSION)'\r\n  } \r\n\r\n  function Beautifier(js_source_text, options) {\r\n    'use strict' \r\n    let output\r\n    let tokens = [], token_pos \r\n    let Tokenizer \r\n    let current_token \r\n    let last_type, last_last_text, indent_string \r\n    let flags, previous_flags, flag_store \r\n    let prefix \r\n\r\n    let handlers, opt \r\n    let baseIndentString = '' \r\n\r\n    handlers = {\r\n      'TK_START_EXPR': handle_start_expr,\r\n      'TK_END_EXPR': handle_end_expr,\r\n      'TK_START_BLOCK': handle_start_block,\r\n      'TK_END_BLOCK': handle_end_block,\r\n      'TK_WORD': handle_word,\r\n      'TK_RESERVED': handle_word,\r\n      'TK_SEMICOLON': handle_semicolon,\r\n      'TK_STRING': handle_string,\r\n      'TK_EQUALS': handle_equals,\r\n      'TK_OPERATOR': handle_operator,\r\n      'TK_COMMA': handle_comma,\r\n      'TK_BLOCK_COMMENT': handle_block_comment,\r\n      'TK_COMMENT': handle_comment,\r\n      'TK_DOT': handle_dot,\r\n      'TK_UNKNOWN': handle_unknown,\r\n      'TK_EOF': handle_eof\r\n    } \r\n\r\n    function create_flags(flags_base, mode) {\r\n      let next_indent_level = 0 \r\n      if (flags_base) {\r\n        next_indent_level = flags_base.indentation_level \r\n        if (!output.just_added_newline() &&\r\n                    flags_base.line_indent_level > next_indent_level) {\r\n          next_indent_level = flags_base.line_indent_level \r\n        }\r\n      }\r\n\r\n      const next_flags = {\r\n        mode: mode,\r\n        parent: flags_base,\r\n        last_text: flags_base ? flags_base.last_text : '', // last token text\r\n        last_word: flags_base ? flags_base.last_word : '', // last 'TK_WORD' passed\r\n        declaration_statement: false,\r\n        declaration_assignment: false,\r\n        multiline_frame: false,\r\n        if_block: false,\r\n        else_block: false,\r\n        do_block: false,\r\n        do_while: false,\r\n        in_case_statement: false, // switch(..){ INSIDE HERE }\r\n        in_case: false, // we're on the exact line with \"case 0:\"\r\n        case_body: false, // the indented case-action block\r\n        indentation_level: next_indent_level,\r\n        line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\r\n        start_line_index: output.get_line_number(),\r\n        ternary_depth: 0\r\n      } \r\n      return next_flags \r\n    }\r\n\r\n    // Some interpreters have unexpected results with foo = baz || bar \r\n    options = options ? options : {} \r\n    opt = {} \r\n\r\n    // compatibility\r\n    if (options.braces_on_own_line !== undefined) { //graceful handling of deprecated option\r\n      opt.brace_style = options.braces_on_own_line ? 'expand' : 'collapse' \r\n    }\r\n    opt.brace_style = options.brace_style ? options.brace_style : (opt.brace_style ? opt.brace_style : 'collapse') \r\n\r\n    // graceful handling of deprecated option\r\n    if (opt.brace_style === 'expand-strict') {\r\n      opt.brace_style = 'expand' \r\n    }\r\n\r\n\r\n    opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4 \r\n    opt.indent_char = options.indent_char ? options.indent_char : ' ' \r\n    opt.eol = options.eol ? options.eol : '\\n' \r\n    opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines \r\n    opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods \r\n    opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10) \r\n    opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren \r\n    opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren \r\n    opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy \r\n    opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function \r\n    opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation \r\n    opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional \r\n    opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings \r\n    opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10) \r\n    opt.e4x = (options.e4x === undefined) ? false : options.e4x \r\n    opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline \r\n    opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first \r\n\r\n    // For testing of beautify ignore:start directive\r\n    opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw \r\n\r\n    // force opt.space_after_anon_function to true if opt.jslint_happy\r\n    if (opt.jslint_happy) {\r\n      opt.space_after_anon_function = true \r\n    }\r\n\r\n    if (options.indent_with_tabs) {\r\n      opt.indent_char = '\\t' \r\n      opt.indent_size = 1 \r\n    }\r\n\r\n    opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n')\r\n\r\n    //----------------------------------\r\n    indent_string = '' \r\n    while (opt.indent_size > 0) {\r\n      indent_string += opt.indent_char \r\n      opt.indent_size -= 1 \r\n    }\r\n\r\n    let preindent_index = 0 \r\n    if (js_source_text && js_source_text.length) {\r\n      while ((js_source_text.charAt(preindent_index) === ' ' ||\r\n                js_source_text.charAt(preindent_index) === '\\t')) {\r\n        baseIndentString += js_source_text.charAt(preindent_index) \r\n        preindent_index += 1 \r\n      }\r\n      js_source_text = js_source_text.substring(preindent_index) \r\n    }\r\n\r\n    last_type = 'TK_START_BLOCK'  // last token type\r\n    last_last_text = ''  // pre-last token text\r\n    output = new Output(indent_string, baseIndentString) \r\n\r\n    // If testing the ignore directive, start with output disable set to true\r\n    output.raw = opt.test_output_raw \r\n\r\n\r\n    // Stack of parsing/formatting states, including MODE.\r\n    // We tokenize, parse, and output in an almost purely a forward-only stream of token input\r\n    // and formatted output.  This makes the beautifier less accurate than full parsers\r\n    // but also far more tolerant of syntax errors.\r\n    //\r\n    // For example, the default mode is MODE.BlockStatement. If we see a '{' we push a new frame of type\r\n    // MODE.BlockStatement on the the stack, even though it could be object literal.  If we later\r\n    // encounter a \":\", we'll switch to to MODE.ObjectLiteral.  If we then see a \" \",\r\n    // most full parsers would die, but the beautifier gracefully falls back to\r\n    // MODE.BlockStatement and continues on.\r\n    flag_store = [] \r\n    set_mode(MODE.BlockStatement) \r\n\r\n    this.beautify = function () {\r\n\r\n      /*jshint onevar:true */\r\n      let local_token, sweet_code \r\n      Tokenizer = new tokenizer(js_source_text, opt, indent_string) \r\n      tokens = Tokenizer.tokenize() \r\n      token_pos = 0 \r\n\r\n      while (local_token = get_token()) {\r\n        for (let i = 0;  i < local_token.comments_before.length;  i++) {\r\n          // The cleanest handling of inline comments is to treat them as though they aren't there.\r\n          // Just continue formatting and the behavior should be logical.\r\n          // Also ignore unknown tokens.  Again, this should result in better behavior.\r\n          handle_token(local_token.comments_before[i]) \r\n        }\r\n        handle_token(local_token) \r\n\r\n        last_last_text = flags.last_text \r\n        last_type = local_token.type \r\n        flags.last_text = local_token.text \r\n\r\n        token_pos += 1 \r\n      }\r\n\r\n      sweet_code = output.get_code() \r\n      if (opt.end_with_newline) {\r\n        sweet_code += '\\n' \r\n      }\r\n\r\n      if (opt.eol != '\\n') {\r\n        sweet_code = sweet_code.replace(/[\\n]/g, opt.eol) \r\n      }\r\n\r\n      return sweet_code \r\n    } \r\n\r\n    function handle_token(local_token) {\r\n      let { newlines } = local_token \r\n      const keep_whitespace = opt.keep_array_indentation && is_array(flags.mode) \r\n\r\n      if (keep_whitespace) {\r\n        for (let i = 0;  i < newlines;  i += 1) {\r\n          print_newline(i > 0) \r\n        }\r\n      } else {\r\n        if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\r\n          newlines = opt.max_preserve_newlines \r\n        }\r\n\r\n        if (opt.preserve_newlines) {\r\n          if (local_token.newlines > 1) {\r\n            print_newline() \r\n            for (let i = 1;  i < newlines;  i += 1) {\r\n              print_newline(true) \r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      current_token = local_token \r\n      handlers[current_token.type]() \r\n    }\r\n\r\n    // we could use just string.split, but\r\n    // IE doesn't like returning empty strings\r\n    function split_newlines(s) {\r\n      //return s.split(/\\x0d\\x0a|\\x0a/) \r\n      let idx\r\n      s = s.replace(/\\x0d/g, '') \r\n      const out = []\r\n      idx = s.indexOf('\\n') \r\n      while (idx !== -1) {\r\n        out.push(s.substring(0, idx)) \r\n        s = s.substring(idx + 1) \r\n        idx = s.indexOf('\\n') \r\n      }\r\n      if (s.length) {\r\n        out.push(s) \r\n      }\r\n      return out \r\n    }\r\n\r\n    function allow_wrap_or_preserved_newline(force_linewrap) {\r\n      force_linewrap = (force_linewrap === undefined) ? false : force_linewrap \r\n\r\n      // Never wrap the first token on a line\r\n      if (output.just_added_newline()) {\r\n        return\r\n      }\r\n\r\n      if ((opt.preserve_newlines && current_token.wanted_newline) || force_linewrap) {\r\n        print_newline(false, true) \r\n      } else if (opt.wrap_line_length) {\r\n        const proposed_line_length = output.current_line.get_character_count() + current_token.text.length +\r\n                    (output.space_before_token ? 1 : 0) \r\n        if (proposed_line_length >= opt.wrap_line_length) {\r\n          print_newline(false, true) \r\n        }\r\n      }\r\n    }\r\n\r\n    function print_newline(force_newline, preserve_statement_flags) {\r\n      if (!preserve_statement_flags) {\r\n        if (flags.last_text !== ' ' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\r\n          while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\r\n            restore_mode() \r\n          }\r\n        }\r\n      }\r\n\r\n      if (output.add_new_line(force_newline)) {\r\n        flags.multiline_frame = true \r\n      }\r\n    }\r\n\r\n    function print_token_line_indentation() {\r\n      if (output.just_added_newline()) {\r\n        if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\r\n          output.current_line.push(current_token.whitespace_before) \r\n          output.space_before_token = false \r\n        } else if (output.set_indent(flags.indentation_level)) {\r\n          flags.line_indent_level = flags.indentation_level \r\n        }\r\n      }\r\n    }\r\n\r\n    function print_token(printable_token) {\r\n      if (output.raw) {\r\n        output.add_raw_token(current_token)\r\n        return \r\n      }\r\n\r\n      if (opt.comma_first && last_type === 'TK_COMMA'\r\n                && output.just_added_newline()) {\r\n        if (output.previous_line.last() === ',') {\r\n          output.previous_line.pop() \r\n          print_token_line_indentation() \r\n          output.add_token(',') \r\n          output.space_before_token = true \r\n        }\r\n      }\r\n\r\n      printable_token = printable_token || current_token.text \r\n      print_token_line_indentation() \r\n      output.add_token(printable_token) \r\n    }\r\n\r\n    function indent() {\r\n      flags.indentation_level += 1 \r\n    }\r\n\r\n    function deindent() {\r\n      if (flags.indentation_level > 0 &&\r\n                ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level))\r\n        flags.indentation_level -= 1 \r\n    }\r\n\r\n    function set_mode(mode) {\r\n      if (flags) {\r\n        flag_store.push(flags) \r\n        previous_flags = flags \r\n      } else {\r\n        previous_flags = create_flags(null, mode) \r\n      }\r\n\r\n      flags = create_flags(previous_flags, mode) \r\n    }\r\n\r\n    function is_array(mode) {\r\n      return mode === MODE.ArrayLiteral \r\n    }\r\n\r\n    function is_expression(mode) {\r\n      return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]) \r\n    }\r\n\r\n    function restore_mode() {\r\n      if (flag_store.length > 0) {\r\n        previous_flags = flags \r\n        flags = flag_store.pop() \r\n        if (previous_flags.mode === MODE.Statement) {\r\n          output.remove_redundant_indentation(previous_flags) \r\n        }\r\n      }\r\n    }\r\n\r\n    function start_of_object_property() {\r\n      return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && (\r\n        (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))) \r\n    }\r\n\r\n    function start_of_statement() {\r\n      if (\r\n        (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const']) && current_token.type === 'TK_WORD') ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'do') ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'return' && !current_token.wanted_newline) ||\r\n                (last_type === 'TK_RESERVED' && flags.last_text === 'else' && !(current_token.type === 'TK_RESERVED' && current_token.text === 'if')) ||\r\n                (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) ||\r\n                (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement\r\n                    && !flags.in_case\r\n                    && !(current_token.text === '--' || current_token.text === '++')\r\n                    && last_last_text !== 'function'\r\n                    && current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') ||\r\n                (flags.mode === MODE.ObjectLiteral && (\r\n                  (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))\r\n      ) {\r\n\r\n        set_mode(MODE.Statement) \r\n        indent() \r\n\r\n        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const']) && current_token.type === 'TK_WORD') {\r\n          flags.declaration_statement = true \r\n        }\r\n\r\n        // Issue #276:\r\n        // If starting a new statement with [if, for, while, do], push to a new line.\r\n        // if (a) if (b) if(c) d()  else e()  else f() \r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline(\r\n            current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while'])) \r\n        }\r\n\r\n        return true \r\n      }\r\n      return false \r\n    }\r\n\r\n    function all_lines_start_with(lines, c) {\r\n      for (let i = 0;  i < lines.length;  i++) {\r\n        const line = trim(lines[i]) \r\n        if (line.charAt(0) !== c) {\r\n          return false \r\n        }\r\n      }\r\n      return true \r\n    }\r\n\r\n    function each_line_matches_indent(lines, indent) {\r\n      let i = 0,\r\n        len = lines.length,\r\n        line \r\n      for ( ; i < len;  i++) {\r\n        line = lines[i] \r\n        // allow empty lines to pass through\r\n        if (line && line.indexOf(indent) !== 0) {\r\n          return false \r\n        }\r\n      }\r\n      return true \r\n    }\r\n\r\n    function is_special_word(word) {\r\n      return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']) \r\n    }\r\n\r\n    function get_token(offset) {\r\n      const index = token_pos + (offset || 0) \r\n      return (index < 0 || index >= tokens.length) ? null : tokens[index] \r\n    }\r\n\r\n    function handle_start_expr() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      let next_mode = MODE.Expression \r\n      if (current_token.text === '[') {\r\n\r\n        if (last_type === 'TK_WORD' || flags.last_text === ')') {\r\n          // this is array index specifier, break immediately\r\n          // a[x], fn()[x]\r\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\r\n            output.space_before_token = true \r\n          }\r\n          set_mode(next_mode) \r\n          print_token() \r\n          indent() \r\n          if (opt.space_in_paren) {\r\n            output.space_before_token = true \r\n          }\r\n          return \r\n        }\r\n\r\n        next_mode = MODE.ArrayLiteral \r\n        if (is_array(flags.mode)) {\r\n          if (flags.last_text === '[' ||\r\n                        (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\r\n            // ], [ goes to new line\r\n            // }, [ goes to new line\r\n            if (!opt.keep_array_indentation) {\r\n              print_newline() \r\n            }\r\n          }\r\n        }\r\n\r\n      } else {\r\n        if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\r\n          next_mode = MODE.ForInitializer \r\n        } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\r\n          next_mode = MODE.Conditional \r\n        } else {\r\n          // next_mode = MODE.Expression \r\n        }\r\n      }\r\n\r\n      if (flags.last_text === ' ' || last_type === 'TK_START_BLOCK') {\r\n        print_newline() \r\n      } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\r\n        // TODO: Consider whether forcing this is required.  Review failing tests when removed.\r\n        allow_wrap_or_preserved_newline(current_token.wanted_newline) \r\n        // do nothing on (( and )( and ][ and ]( and .(\r\n      } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\r\n        output.space_before_token = true \r\n      } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) ||\r\n                (flags.last_text === '*' && last_last_text === 'function')) {\r\n        // function() vs function ()\r\n        if (opt.space_after_anon_function) {\r\n          output.space_before_token = true \r\n        }\r\n      } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\r\n        if (opt.space_before_conditional) {\r\n          output.space_before_token = true \r\n        }\r\n      }\r\n\r\n      // Should be a space between await and an IIFE\r\n      if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\r\n        output.space_before_token = true \r\n      }\r\n\r\n      // Support of this kind of newline preservation.\r\n      // a = (b &&\r\n      //     (c || d)) \r\n      if (current_token.text === '(') {\r\n        if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n          if (!start_of_object_property()) {\r\n            allow_wrap_or_preserved_newline() \r\n          }\r\n        }\r\n      }\r\n\r\n      set_mode(next_mode) \r\n      print_token() \r\n      if (opt.space_in_paren) {\r\n        output.space_before_token = true \r\n      }\r\n\r\n      // In all cases, if we newline while inside an expression it should be indented.\r\n      indent() \r\n    }\r\n\r\n    function handle_end_expr() {\r\n      // statements inside expressions are not valid syntax, but...\r\n      // statements must all be closed when their container closes\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n\r\n      if (flags.multiline_frame) {\r\n        allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation) \r\n      }\r\n\r\n      if (opt.space_in_paren) {\r\n        if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\r\n          // () [] no inner space in empty parens like these, ever, ref #320\r\n          output.trim() \r\n          output.space_before_token = false \r\n        } else {\r\n          output.space_before_token = true \r\n        }\r\n      }\r\n      if (current_token.text === ']' && opt.keep_array_indentation) {\r\n        print_token() \r\n        restore_mode() \r\n      } else {\r\n        restore_mode() \r\n        print_token() \r\n      }\r\n      output.remove_redundant_indentation(previous_flags) \r\n\r\n      // do {} while () // no statement required after\r\n      if (flags.do_while && previous_flags.mode === MODE.Conditional) {\r\n        previous_flags.mode = MODE.Expression \r\n        flags.do_block = false \r\n        flags.do_while = false \r\n\r\n      }\r\n    }\r\n\r\n    function handle_start_block() {\r\n      // Check if this is should be treated as a ObjectLiteral\r\n      const next_token = get_token(1)\r\n      const second_token = get_token(2)\r\n      if (second_token && (\r\n        (second_token.text === ':' && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED']))\r\n                || (in_array(next_token.text, ['get', 'set']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED']))\r\n      )) {\r\n        // We don't support TypeScript,but we didn't break it for a very long time.\r\n        // We'll try to keep not breaking it.\r\n        if (!in_array(last_last_text, ['class', 'interface'])) {\r\n          set_mode(MODE.ObjectLiteral) \r\n        } else {\r\n          set_mode(MODE.BlockStatement) \r\n        }\r\n      } else {\r\n        set_mode(MODE.BlockStatement) \r\n      }\r\n\r\n      const empty_braces = !next_token.comments_before.length && next_token.text === '}' \r\n      const empty_anonymous_function = empty_braces && flags.last_word === 'function' &&\r\n                last_type === 'TK_END_EXPR' \r\n\r\n      if (opt.brace_style === 'expand' ||\r\n                (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n        if (last_type !== 'TK_OPERATOR' &&\r\n                    (empty_anonymous_function ||\r\n                        last_type === 'TK_EQUALS' ||\r\n                        (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\r\n          output.space_before_token = true \r\n        } else {\r\n          print_newline(false, true) \r\n        }\r\n      } else { // collapse\r\n        if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\r\n          if (last_type === 'TK_START_BLOCK') {\r\n            print_newline() \r\n          } else {\r\n            output.space_before_token = true \r\n          }\r\n        } else {\r\n          // if TK_OPERATOR or TK_START_EXPR\r\n          if (is_array(previous_flags.mode) && flags.last_text === ',') {\r\n            if (last_last_text === '}') {\r\n              // }, { in array context\r\n              output.space_before_token = true \r\n            } else {\r\n              print_newline()  // [a, b, c, {\r\n            }\r\n          }\r\n        }\r\n      }\r\n      print_token() \r\n      indent() \r\n    }\r\n\r\n    function handle_end_block() {\r\n      // statements must all be closed when their container closes\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n      const empty_braces = last_type === 'TK_START_BLOCK' \r\n\r\n      if (opt.brace_style === 'expand') {\r\n        if (!empty_braces) {\r\n          print_newline() \r\n        }\r\n      } else {\r\n        // skip {}\r\n        if (!empty_braces) {\r\n          if (is_array(flags.mode) && opt.keep_array_indentation) {\r\n            // we REALLY need a newline here, but newliner would skip that\r\n            opt.keep_array_indentation = false \r\n            print_newline() \r\n            opt.keep_array_indentation = true \r\n\r\n          } else {\r\n            print_newline() \r\n          }\r\n        }\r\n      }\r\n      restore_mode() \r\n      print_token() \r\n    }\r\n\r\n    function handle_word() {\r\n      if (current_token.type === 'TK_RESERVED' && flags.mode !== MODE.ObjectLiteral &&\r\n                in_array(current_token.text, ['set', 'get'])) {\r\n        current_token.type = 'TK_WORD' \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && flags.mode === MODE.ObjectLiteral) {\r\n        const next_token = get_token(1) \r\n        if (next_token.text === ':') {\r\n          current_token.type = 'TK_WORD' \r\n        }\r\n      }\r\n\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      } else if (current_token.wanted_newline && !is_expression(flags.mode) &&\r\n                (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) &&\r\n                last_type !== 'TK_EQUALS' &&\r\n                (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['const', 'let', 'const', 'set', 'get'])))) {\r\n\r\n        print_newline() \r\n      }\r\n\r\n      if (flags.do_block && !flags.do_while) {\r\n        if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\r\n          // do {} ## while ()\r\n          output.space_before_token = true \r\n          print_token() \r\n          output.space_before_token = true \r\n          flags.do_while = true \r\n          return \r\n        } else {\r\n          // do {} should always have while as the next word.\r\n          // if we don't see the expected while, recover\r\n          print_newline() \r\n          flags.do_block = false \r\n        }\r\n      }\r\n\r\n      // if may be followed by else, or not\r\n      // Bare/inline ifs are tricky\r\n      // Need to unwind the modes correctly: if (a) if (b) c()  else d()  else e() \r\n      if (flags.if_block) {\r\n        if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\r\n          flags.else_block = true \r\n        } else {\r\n          while (flags.mode === MODE.Statement) {\r\n            restore_mode() \r\n          }\r\n          flags.if_block = false \r\n          flags.else_block = false \r\n        }\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\r\n        print_newline() \r\n        if (flags.case_body || opt.jslint_happy) {\r\n          // switch cases following one another\r\n          deindent() \r\n          flags.case_body = false \r\n        }\r\n        print_token() \r\n        flags.in_case = true \r\n        flags.in_case_statement = true \r\n        return \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\r\n        if (in_array(flags.last_text, ['}', ' ']) || (output.just_added_newline() && !in_array(flags.last_text, ['[', '{', ':', '=', ',']))) {\r\n          // make sure there is a nice clean space of at least one blank line\r\n          // before a new function definition\r\n          if (!output.just_added_blankline() && !current_token.comments_before.length) {\r\n            print_newline() \r\n            print_newline(true) \r\n          }\r\n        }\r\n        if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\r\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\r\n            output.space_before_token = true \r\n          } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\r\n            output.space_before_token = true \r\n          } else {\r\n            print_newline() \r\n          }\r\n        } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\r\n          // foo = function\r\n          output.space_before_token = true \r\n        } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {\r\n          // (function\r\n        } else {\r\n          print_newline() \r\n        }\r\n      }\r\n\r\n      if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['function', 'get', 'set'])) {\r\n        print_token() \r\n        flags.last_word = current_token.text \r\n        return \r\n      }\r\n\r\n      prefix = 'NONE' \r\n\r\n      if (last_type === 'TK_END_BLOCK') {\r\n        if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally']))) {\r\n          prefix = 'NEWLINE' \r\n        } else {\r\n          if (opt.brace_style === 'expand' ||\r\n                        opt.brace_style === 'end-expand' ||\r\n                        (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n            prefix = 'NEWLINE' \r\n          } else {\r\n            prefix = 'SPACE' \r\n            output.space_before_token = true \r\n          }\r\n        }\r\n      } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\r\n        // TODO: Should this be for STATEMENT as well?\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\r\n        prefix = 'SPACE' \r\n      } else if (last_type === 'TK_STRING') {\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' ||\r\n                (flags.last_text === '*' && last_last_text === 'function')) {\r\n        prefix = 'SPACE' \r\n      } else if (last_type === 'TK_START_BLOCK') {\r\n        prefix = 'NEWLINE' \r\n      } else if (last_type === 'TK_END_EXPR') {\r\n        output.space_before_token = true \r\n        prefix = 'NEWLINE' \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\r\n        if (flags.last_text === 'else' || flags.last_text === 'export') {\r\n          prefix = 'SPACE' \r\n        } else {\r\n          prefix = 'NEWLINE' \r\n        }\r\n\r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\r\n        if (last_type !== 'TK_END_BLOCK' ||\r\n                    opt.brace_style === 'expand' ||\r\n                    opt.brace_style === 'end-expand' ||\r\n                    (opt.brace_style === 'none' && current_token.wanted_newline)) {\r\n          print_newline() \r\n        } else {\r\n          output.trim(true) \r\n          const line = output.current_line \r\n          // If we trimmed and there's something other than a close block before us\r\n          // put a newline back in.  Handles '} // comment' scenario.\r\n          if (line.last() !== '}') {\r\n            print_newline() \r\n          }\r\n          output.space_before_token = true \r\n        }\r\n      } else if (prefix === 'NEWLINE') {\r\n        if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n          // no newline between 'return nnn'\r\n          output.space_before_token = true \r\n        } else if (last_type !== 'TK_END_EXPR') {\r\n          if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['const', 'let', 'const']))) && flags.last_text !== ':') {\r\n            // no need to force newline on 'const': for (const x = 0...)\r\n            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\r\n              // no newline for } else if {\r\n              output.space_before_token = true \r\n            } else {\r\n              print_newline() \r\n            }\r\n          }\r\n        } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\r\n          print_newline() \r\n        }\r\n      } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\r\n        print_newline()  // }, in lists get a newline treatment\r\n      } else if (prefix === 'SPACE') {\r\n        output.space_before_token = true \r\n      }\r\n      print_token() \r\n      flags.last_word = current_token.text \r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'do') {\r\n        flags.do_block = true \r\n      }\r\n\r\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'if') {\r\n        flags.if_block = true \r\n      }\r\n    }\r\n\r\n    function handle_semicolon() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n        // Semicolon can be the start (and end) of a statement\r\n        output.space_before_token = false \r\n      }\r\n      while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\r\n        restore_mode() \r\n      }\r\n      print_token() \r\n    }\r\n\r\n    function handle_string() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n        // One difference - strings want at least a space before\r\n        output.space_before_token = true \r\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\r\n        output.space_before_token = true \r\n      } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\r\n        if (!start_of_object_property()) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      } else {\r\n        print_newline() \r\n      }\r\n      print_token() \r\n    }\r\n\r\n    function handle_equals() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (flags.declaration_statement) {\r\n        // just got an '=' in a const-line, different formatting/line-breaking, etc will now be done\r\n        flags.declaration_assignment = true \r\n      }\r\n      output.space_before_token = true \r\n      print_token() \r\n      output.space_before_token = true \r\n    }\r\n\r\n    function handle_comma() {\r\n      if (flags.declaration_statement) {\r\n        if (is_expression(flags.parent.mode)) {\r\n          // do not break on comma, for(const a = 1, b = 2)\r\n          flags.declaration_assignment = false \r\n        }\r\n\r\n        print_token() \r\n\r\n        if (flags.declaration_assignment) {\r\n          flags.declaration_assignment = false \r\n          print_newline(false, true) \r\n        } else {\r\n          output.space_before_token = true \r\n          // for comma-first, we want to allow a newline before the comma\r\n          // to turn into a newline after the comma, which we will fixup later\r\n          if (opt.comma_first) {\r\n            allow_wrap_or_preserved_newline() \r\n          }\r\n        }\r\n        return \r\n      }\r\n\r\n      print_token() \r\n      if (flags.mode === MODE.ObjectLiteral ||\r\n                (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\r\n        if (flags.mode === MODE.Statement) {\r\n          restore_mode() \r\n        }\r\n        print_newline() \r\n      } else {\r\n        // EXPR or DO_BLOCK\r\n        output.space_before_token = true \r\n        // for comma-first, we want to allow a newline before the comma\r\n        // to turn into a newline after the comma, which we will fixup later\r\n        if (opt.comma_first) {\r\n          allow_wrap_or_preserved_newline() \r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    function handle_operator() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n        // \"return\" had a special handling in TK_WORD. Now we need to return the favor\r\n        output.space_before_token = true \r\n        print_token() \r\n        return \r\n      }\r\n\r\n      // hack for actionscript's import .* \r\n      if (current_token.text === '*' && last_type === 'TK_DOT') {\r\n        print_token() \r\n        return \r\n      }\r\n\r\n      if (current_token.text === ':' && flags.in_case) {\r\n        flags.case_body = true \r\n        indent() \r\n        print_token() \r\n        print_newline() \r\n        flags.in_case = false \r\n        return \r\n      }\r\n\r\n      if (current_token.text === '::') {\r\n        // no spaces around exotic namespacing syntax operator\r\n        print_token() \r\n        return \r\n      }\r\n\r\n      // Allow line wrapping between operators\r\n      if (last_type === 'TK_OPERATOR') {\r\n        allow_wrap_or_preserved_newline() \r\n      }\r\n\r\n      let space_before = true \r\n      let space_after = true \r\n\r\n      if (in_array(current_token.text, ['--', '++', '!', '~']) || (in_array(current_token.text, ['-', '+']) && (in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) || in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === ','))) {\r\n        // unary operators (and binary +/- pretending to be unary) special cases\r\n\r\n        space_before = false \r\n        space_after = false \r\n\r\n        // http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1\r\n        // if there is a newline between -- or ++ and anything else we should preserve it.\r\n        if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\r\n          print_newline(false, true) \r\n        }\r\n\r\n        if (flags.last_text === ' ' && is_expression(flags.mode)) {\r\n          // for (   ++i)\r\n          //        ^^^\r\n          space_before = true \r\n        }\r\n\r\n        if (last_type === 'TK_RESERVED') {\r\n          space_before = true \r\n        } else if (last_type === 'TK_END_EXPR') {\r\n          space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++')) \r\n        } else if (last_type === 'TK_OPERATOR') {\r\n          // a++ + ++b \r\n          // a - -b\r\n          space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']) \r\n          // + and - are not unary when preceeded by -- or ++ operator\r\n          // a-- + b\r\n          // a * +b\r\n          // a - -b\r\n          if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\r\n            space_after = true \r\n          }\r\n        }\r\n\r\n        if ((flags.mode === MODE.BlockStatement || flags.mode === MODE.Statement) && (flags.last_text === '{' || flags.last_text === ' ')) {\r\n          // { foo  --i }\r\n          // foo()  --bar \r\n          print_newline() \r\n        }\r\n      } else if (current_token.text === ':') {\r\n        if (flags.ternary_depth === 0) {\r\n          // Colon is invalid javascript outside of ternary and object, but do our best to guess what was meant.\r\n          space_before = false \r\n        } else {\r\n          flags.ternary_depth -= 1 \r\n        }\r\n      } else if (current_token.text === '?') {\r\n        flags.ternary_depth += 1 \r\n      } else if (current_token.text === '*' && last_type === 'TK_RESERVED' && flags.last_text === 'function') {\r\n        space_before = false \r\n        space_after = false \r\n      }\r\n      output.space_before_token = output.space_before_token || space_before \r\n      print_token() \r\n      output.space_before_token = space_after \r\n    }\r\n\r\n    function handle_block_comment() {\r\n      if (output.raw) {\r\n        output.add_raw_token(current_token)\r\n        if (current_token.directives && current_token.directives['preserve'] === 'end') {\r\n          // If we're testing the raw output behavior, do not allow a directive to turn it off.\r\n          if (!opt.test_output_raw) {\r\n            output.raw = false \r\n          }\r\n        }\r\n        return \r\n      }\r\n\r\n      if (current_token.directives) {\r\n        print_newline(false, true) \r\n        print_token() \r\n        if (current_token.directives['preserve'] === 'start') {\r\n          output.raw = true \r\n        }\r\n        print_newline(false, true) \r\n        return \r\n      }\r\n\r\n      // inline block\r\n      if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\r\n        output.space_before_token = true \r\n        print_token() \r\n        output.space_before_token = true \r\n        return \r\n      }\r\n\r\n      const lines = split_newlines(current_token.text) \r\n      let j  // iterator for this case\r\n      let javadoc = false \r\n      let starless = false \r\n      const { whitespace_before : lastIndent } = current_token \r\n      const { length : lastIndentLength } = lastIndent \r\n\r\n      // block comment starts with a new line\r\n      print_newline(false, true) \r\n      if (lines.length > 1) {\r\n        if (all_lines_start_with(lines.slice(1), '*')) {\r\n          javadoc = true \r\n        }\r\n        else if (each_line_matches_indent(lines.slice(1), lastIndent)) {\r\n          starless = true \r\n        }\r\n      }\r\n\r\n      // first line always indented\r\n      print_token(lines[0]) \r\n      for (j = 1;  j < lines.length;  j++) {\r\n        print_newline(false, true) \r\n        if (javadoc) {\r\n          // javadoc: reformat and re-indent\r\n          print_token(` ${ltrim(lines[j])}`) \r\n        } else if (starless && lines[j].length > lastIndentLength) {\r\n          // starless: re-indent non-empty content, avoiding trim\r\n          print_token(lines[j].substring(lastIndentLength)) \r\n        } else {\r\n          // normal comments output raw\r\n          output.add_token(lines[j]) \r\n        }\r\n      }\r\n\r\n      // for comments of more than one line, make sure there's a new line after\r\n      print_newline(false, true) \r\n    }\r\n\r\n    function handle_comment() {\r\n      if (current_token.wanted_newline) {\r\n        print_newline(false, true) \r\n      } else {\r\n        output.trim(true) \r\n      }\r\n\r\n      output.space_before_token = true \r\n      print_token() \r\n      print_newline(false, true) \r\n    }\r\n\r\n    function handle_dot() {\r\n      if (start_of_statement()) {\r\n        // The conditional starts the statement if appropriate.\r\n      }\r\n\r\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\r\n        output.space_before_token = true \r\n      } else {\r\n        // allow preserved newlines before dots in general\r\n        // force newlines on dots after close paren when break_chained - for bar().baz()\r\n        allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods) \r\n      }\r\n\r\n      print_token() \r\n    }\r\n\r\n    function handle_unknown() {\r\n      print_token() \r\n\r\n      if (current_token.text[current_token.text.length - 1] === '\\n') {\r\n        print_newline() \r\n      }\r\n    }\r\n\r\n    function handle_eof() {\r\n      // Unwind any open statements\r\n      while (flags.mode === MODE.Statement) {\r\n        restore_mode() \r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  function OutputLine(parent) {\r\n    let _character_count = 0 \r\n    // use indent_count as a marker for lines that have preserved indentation\r\n    let _indent_count = -1 \r\n\r\n    const _items = [] \r\n    let _empty = true \r\n\r\n    this.set_indent = function (level) {\r\n      _character_count = parent.baseIndentLength + level * parent.indent_length\r\n      _indent_count = level \r\n    }\r\n\r\n    this.get_character_count = function () {\r\n      return _character_count \r\n    }\r\n\r\n    this.is_empty = function () {\r\n      return _empty \r\n    }\r\n\r\n    this.last = function () {\r\n      if (!this._empty) {\r\n        return _items[_items.length - 1] \r\n      } else {\r\n        return null \r\n      }\r\n    }\r\n\r\n    this.push = function (input) {\r\n      _items.push(input) \r\n      _character_count += input.length \r\n      _empty = false \r\n    }\r\n\r\n    this.pop = function () {\r\n      let item = null \r\n      if (!_empty) {\r\n        item = _items.pop() \r\n        _character_count -= item.length \r\n        _empty = _items.length === 0 \r\n      }\r\n      return item \r\n    }\r\n\r\n    this.remove_indent = function () {\r\n      if (_indent_count > 0) {\r\n        _indent_count -= 1 \r\n        _character_count -= parent.indent_length\r\n      }\r\n    }\r\n\r\n    this.trim = function () {\r\n      while (this.last() === ' ') {\r\n        _items.pop() \r\n        _character_count -= 1 \r\n      }\r\n      _empty = _items.length === 0 \r\n    }\r\n\r\n    this.toString = function () {\r\n      let result = '' \r\n      if (!this._empty) {\r\n        if (_indent_count >= 0) {\r\n          result = parent.indent_cache[_indent_count] \r\n        }\r\n        result += _items.join('')\r\n      }\r\n      return result \r\n    }\r\n  }\r\n\r\n  function Output(indent_string, baseIndentString) {\r\n    baseIndentString = baseIndentString || '' \r\n    this.indent_cache = [baseIndentString] \r\n    this.baseIndentLength = baseIndentString.length \r\n    this.indent_length = indent_string.length \r\n    this.raw = false \r\n\r\n    const lines = [] \r\n    this.baseIndentString = baseIndentString \r\n    this.indent_string = indent_string \r\n    this.previous_line = null \r\n    this.current_line = null \r\n    this.space_before_token = false \r\n\r\n    this.add_outputline = function () {\r\n      this.previous_line = this.current_line \r\n      this.current_line = new OutputLine(this) \r\n      lines.push(this.current_line) \r\n    }\r\n\r\n    // initialize\r\n    this.add_outputline() \r\n\r\n\r\n    this.get_line_number = function () {\r\n      return lines.length \r\n    }\r\n\r\n    // Using object instead of string to allow for later expansion of info about each line\r\n    this.add_new_line = function (force_newline) {\r\n      if (this.get_line_number() === 1 && this.just_added_newline()) {\r\n        return false  // no newline on start of file\r\n      }\r\n\r\n      if (force_newline || !this.just_added_newline()) {\r\n        if (!this.raw) {\r\n          this.add_outputline() \r\n        }\r\n        return true \r\n      }\r\n\r\n      return false \r\n    }\r\n\r\n    this.get_code = function () {\r\n      const sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '') \r\n      return sweet_code \r\n    }\r\n\r\n    this.set_indent = function (level) {\r\n      // Never indent your first output indent at the start of the file\r\n      if (lines.length > 1) {\r\n        while (level >= this.indent_cache.length) {\r\n          this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string) \r\n        }\r\n\r\n        this.current_line.set_indent(level) \r\n        return true \r\n      }\r\n      this.current_line.set_indent(0) \r\n      return false \r\n    }\r\n\r\n    this.add_raw_token = function (token) {\r\n      for (let x = 0;  x < token.newlines;  x++) {\r\n        this.add_outputline() \r\n      }\r\n      this.current_line.push(token.whitespace_before) \r\n      this.current_line.push(token.text) \r\n      this.space_before_token = false \r\n    }\r\n\r\n    this.add_token = function (printable_token) {\r\n      this.add_space_before_token() \r\n      this.current_line.push(printable_token) \r\n    }\r\n\r\n    this.add_space_before_token = function () {\r\n      if (this.space_before_token && !this.just_added_newline()) {\r\n        this.current_line.push(' ') \r\n      }\r\n      this.space_before_token = false \r\n    }\r\n\r\n    this.remove_redundant_indentation = function (frame) {\r\n      // This implementation is effective but has some issues:\r\n      //     - can cause line wrap to happen too soon due to indent removal\r\n      //           after wrap points are calculated\r\n      // These issues are minor compared to ugly indentation.\r\n\r\n      if (frame.multiline_frame ||\r\n                frame.mode === MODE.ForInitializer ||\r\n                frame.mode === MODE.Conditional) {\r\n        return \r\n      }\r\n\r\n      // remove one indent from each line inside this section\r\n      let index = frame.start_line_index \r\n      \r\n      const output_length = lines.length \r\n      while (index < output_length) {\r\n        lines[index].remove_indent() \r\n        index++ \r\n      }\r\n    }\r\n\r\n    this.trim = function (eat_newlines) {\r\n      eat_newlines = (eat_newlines === undefined) ? false : eat_newlines \r\n\r\n      this.current_line.trim(indent_string, baseIndentString) \r\n\r\n      while (eat_newlines && lines.length > 1 &&\r\n                this.current_line.is_empty()) {\r\n        lines.pop() \r\n        this.current_line = lines[lines.length - 1]\r\n        this.current_line.trim() \r\n      }\r\n\r\n      this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null \r\n    }\r\n\r\n    this.just_added_newline = function () {\r\n      return this.current_line.is_empty() \r\n    }\r\n\r\n    this.just_added_blankline = function () {\r\n      if (this.just_added_newline()) {\r\n        if (lines.length === 1) {\r\n          return true  // start of the file and newline = blank\r\n        }\r\n\r\n        const line = lines[lines.length - 2] \r\n        return line.is_empty() \r\n      }\r\n      return false \r\n    }\r\n  }\r\n\r\n\r\n  const Token = function (type, text, newlines, whitespace_before, mode, parent) {\r\n    this.type = type \r\n    this.text = text \r\n    this.comments_before = [] \r\n    this.newlines = newlines || 0 \r\n    this.wanted_newline = newlines > 0 \r\n    this.whitespace_before = whitespace_before || '' \r\n    this.parent = null \r\n    this.directives = null \r\n  }\r\n\r\n  function tokenizer(input, opts, indent_string) {\r\n\r\n    const whitespace = '\\n\\r\\t '.split('') \r\n    const digit = /[0-9]/ \r\n    const digit_oct = /[01234567]/ \r\n    const digit_hex = /[0123456789abcdefABCDEF]/ \r\n\r\n    const punct = ('+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>').split(' ') \r\n    // words which should always start on new line.\r\n    this.line_starters = 'continue,try,throw,return,const,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',') \r\n    const reserved_words = this.line_starters.concat(['do', 'in', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await']) \r\n\r\n    //  /* ... */ comment ends with nearest */ or end of file\r\n    const block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g \r\n\r\n    // comment ends just before nearest linefeed or end of file\r\n    const comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g \r\n\r\n    const directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g \r\n    const directive_pattern = / (\\w+)[:](\\w+)/g \r\n    const directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g \r\n\r\n    const template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g\r\n\r\n    let n_newlines, whitespace_before_token, in_html_comment, tokens, parser_pos \r\n    let input_length \r\n\r\n    this.tokenize = function () {\r\n      // cache the source's length.\r\n      input_length = input.length\r\n      parser_pos = 0 \r\n      in_html_comment = false\r\n      tokens = [] \r\n\r\n      let next, last \r\n      let token_values \r\n      let open = null \r\n      const open_stack = [] \r\n      let comments = [] \r\n\r\n      while (!(last && last.type === 'TK_EOF')) {\r\n        token_values = tokenize_next() \r\n        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token) \r\n        while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\r\n          if (next.type === 'TK_BLOCK_COMMENT') {\r\n            next.directives = token_values[2] \r\n          }\r\n          comments.push(next) \r\n          token_values = tokenize_next() \r\n          next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token) \r\n        }\r\n\r\n        if (comments.length) {\r\n          next.comments_before = comments \r\n          comments = [] \r\n        }\r\n\r\n        if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\r\n          next.parent = last \r\n          open_stack.push(open) \r\n          open = next \r\n        } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') &&\r\n                    (open && (\r\n                      (next.text === ']' && open.text === '[') ||\r\n                        (next.text === ')' && open.text === '(') ||\r\n                        (next.text === '}' && open.text === '{')))) {\r\n          next.parent = open.parent \r\n          open = open_stack.pop() \r\n        }\r\n\r\n        tokens.push(next) \r\n        last = next \r\n      }\r\n\r\n      return tokens \r\n    }\r\n\r\n    function get_directives(text) {\r\n      if (!text.match(directives_block_pattern)) {\r\n        return null \r\n      }\r\n\r\n      const directives = {} \r\n      directive_pattern.lastIndex = 0 \r\n      let directive_match = directive_pattern.exec(text) \r\n\r\n      while (directive_match) {\r\n        directives[directive_match[1]] = directive_match[2] \r\n        directive_match = directive_pattern.exec(text) \r\n      }\r\n\r\n      return directives \r\n    }\r\n\r\n    function tokenize_next() {\r\n      let resulting_string \r\n      let whitespace_on_this_line = [] \r\n\r\n      n_newlines = 0 \r\n      whitespace_before_token = '' \r\n\r\n      if (parser_pos >= input_length) {\r\n        return ['', 'TK_EOF'] \r\n      }\r\n\r\n      let last_token \r\n      if (tokens.length) {\r\n        last_token = tokens[tokens.length - 1] \r\n      } else {\r\n        // For the sake of tokenizing we can pretend that there was on open brace to start\r\n        last_token = new Token('TK_START_BLOCK', '{') \r\n      }\r\n\r\n\r\n      let c = input.charAt(parser_pos) \r\n      parser_pos += 1 \r\n\r\n      while (in_array(c, whitespace)) {\r\n\r\n        if (acorn.newline.test(c)) {\r\n          if (!(c === '\\n' && input.charAt(parser_pos - 2) === '\\r')) {\r\n            n_newlines += 1 \r\n            whitespace_on_this_line = [] \r\n          }\r\n        } else {\r\n          whitespace_on_this_line.push(c) \r\n        }\r\n\r\n        if (parser_pos >= input_length) {\r\n          return ['', 'TK_EOF'] \r\n        }\r\n\r\n        c = input.charAt(parser_pos) \r\n        parser_pos += 1 \r\n      }\r\n\r\n      if (whitespace_on_this_line.length) {\r\n        whitespace_before_token = whitespace_on_this_line.join('') \r\n      }\r\n\r\n      if (digit.test(c)) {\r\n        let allow_decimal = true \r\n        let allow_e = true \r\n        let local_digit = digit \r\n\r\n        if (c === '0' && parser_pos < input_length && /[Xxo]/.test(input.charAt(parser_pos))) {\r\n          // switch to hex/oct number, no decimal or e, just hex/oct digits\r\n          allow_decimal = false \r\n          allow_e = false \r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n          local_digit = /[o]/.test(input.charAt(parser_pos)) ? digit_oct : digit_hex \r\n        } else {\r\n          // we know this first loop will run.  It keeps the logic simpler.\r\n          c = '' \r\n          parser_pos -= 1 \r\n        }\r\n\r\n        // Add the digits\r\n        while (parser_pos < input_length && local_digit.test(input.charAt(parser_pos))) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n\r\n          if (allow_decimal && parser_pos < input_length && input.charAt(parser_pos) === '.') {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n            allow_decimal = false \r\n          }\r\n\r\n          if (allow_e && parser_pos < input_length && /[Ee]/.test(input.charAt(parser_pos))) {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n\r\n            if (parser_pos < input_length && /[+-]/.test(input.charAt(parser_pos))) {\r\n              c += input.charAt(parser_pos) \r\n              parser_pos += 1 \r\n            }\r\n\r\n            allow_e = false \r\n            allow_decimal = false \r\n          }\r\n        }\r\n\r\n        return [c, 'TK_WORD'] \r\n      }\r\n\r\n      if (acorn.isIdentifierStart(input.charCodeAt(parser_pos - 1))) {\r\n        if (parser_pos < input_length) {\r\n          while (acorn.isIdentifierChar(input.charCodeAt(parser_pos))) {\r\n            c += input.charAt(parser_pos) \r\n            parser_pos += 1 \r\n            if (parser_pos === input_length) {\r\n              break \r\n            }\r\n          }\r\n        }\r\n\r\n        if (!(last_token.type === 'TK_DOT' ||\r\n                    (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get'])))\r\n                    && in_array(c, reserved_words)) {\r\n          if (c === 'in') { // hack for 'in' operator\r\n            return [c, 'TK_OPERATOR'] \r\n          }\r\n          return [c, 'TK_RESERVED'] \r\n        }\r\n\r\n        return [c, 'TK_WORD'] \r\n      }\r\n\r\n      if (c === '(' || c === '[') {\r\n        return [c, 'TK_START_EXPR'] \r\n      }\r\n\r\n      if (c === ')' || c === ']') {\r\n        return [c, 'TK_END_EXPR'] \r\n      }\r\n\r\n      if (c === '{') {\r\n        return [c, 'TK_START_BLOCK'] \r\n      }\r\n\r\n      if (c === '}') {\r\n        return [c, 'TK_END_BLOCK'] \r\n      }\r\n\r\n      if (c === ' ') {\r\n        return [c, 'TK_SEMICOLON'] \r\n      }\r\n\r\n      if (c === '/') {\r\n        let comment = '' \r\n        // peek for comment /* ... */\r\n        if (input.charAt(parser_pos) === '*') {\r\n          parser_pos += 1 \r\n          block_comment_pattern.lastIndex = parser_pos \r\n          let comment_match = block_comment_pattern.exec(input) \r\n          comment = `/*${comment_match[0]}` \r\n          parser_pos += comment_match[0].length \r\n          const directives = get_directives(comment) \r\n          if (directives && directives['ignore'] === 'start') {\r\n            directives_end_ignore_pattern.lastIndex = parser_pos \r\n            comment_match = directives_end_ignore_pattern.exec(input)\r\n            comment += comment_match[0] \r\n            parser_pos += comment_match[0].length \r\n          }\r\n          comment = comment.replace(acorn.lineBreak, '\\n') \r\n          return [comment, 'TK_BLOCK_COMMENT', directives] \r\n        }\r\n        // peek for comment // ...\r\n        if (input.charAt(parser_pos) === '/') {\r\n          parser_pos += 1 \r\n          comment_pattern.lastIndex = parser_pos \r\n          const comment_match = comment_pattern.exec(input) \r\n          comment = `//${comment_match[0]}` \r\n          parser_pos += comment_match[0].length \r\n          return [comment, 'TK_COMMENT'] \r\n        }\r\n\r\n      }\r\n\r\n      if (c === '`' || c === '\\'' || c === '\"' || // string\r\n                (\r\n                  (c === '/') || // regexp\r\n                    (opts.e4x && c === '<' && input.slice(parser_pos - 1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/)) // xml\r\n                ) && ( // regex and xml can only appear in specific locations during parsing\r\n                  (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) ||\r\n                    (last_token.type === 'TK_END_EXPR' && last_token.text === ')' &&\r\n                        last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) ||\r\n                    (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK',\r\n                      'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'\r\n                    ]))\r\n                )) {\r\n\r\n        let sep = c,\r\n          esc = false,\r\n          has_char_escapes = false \r\n\r\n        resulting_string = c \r\n\r\n        if (sep === '/') {\r\n          //\r\n          // handle regexp\r\n          //\r\n          let in_char_class = false \r\n          while (parser_pos < input_length &&\r\n                        ((esc || in_char_class || input.charAt(parser_pos) !== sep) &&\r\n                            !acorn.newline.test(input.charAt(parser_pos)))) {\r\n            resulting_string += input.charAt(parser_pos) \r\n            if (!esc) {\r\n              esc = input.charAt(parser_pos) === '\\\\' \r\n              if (input.charAt(parser_pos) === '[') {\r\n                in_char_class = true \r\n              } else if (input.charAt(parser_pos) === ']') {\r\n                in_char_class = false \r\n              }\r\n            } else {\r\n              esc = false \r\n            }\r\n            parser_pos += 1 \r\n          }\r\n        } else if (opts.e4x && sep === '<') {\r\n          //\r\n          // handle e4x xml literals\r\n          //\r\n          const xmlRegExp = /<(\\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/g \r\n          let xmlStr = input.slice(parser_pos - 1) \r\n          let match = xmlRegExp.exec(xmlStr) \r\n          if (match && match.index === 0) {\r\n            const rootTag = match[2] \r\n            let depth = 0 \r\n            while (match) {\r\n              const isEndTag = !!match[1] \r\n              const tagName = match[2] \r\n              const isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === '![CDATA[') \r\n              if (tagName === rootTag && !isSingletonTag) {\r\n                if (isEndTag) {\r\n                  --depth \r\n                } else {\r\n                  ++depth \r\n                }\r\n              }\r\n              if (depth <= 0) {\r\n                break \r\n              }\r\n              match = xmlRegExp.exec(xmlStr) \r\n            }\r\n            const xmlLength = match ? match.index + match[0].length : xmlStr.length \r\n            xmlStr = xmlStr.slice(0, xmlLength) \r\n            parser_pos += xmlLength - 1 \r\n            xmlStr = xmlStr.replace(acorn.lineBreak, '\\n') \r\n            return [xmlStr, 'TK_STRING'] \r\n          }\r\n        } else {\r\n          //\r\n          // handle string\r\n          //\r\n          // Template strings can travers lines without escape characters.\r\n          // Other strings cannot\r\n          while (parser_pos < input_length &&\r\n                        (esc || (input.charAt(parser_pos) !== sep &&\r\n                            (sep === '`' || !acorn.newline.test(input.charAt(parser_pos)))))) {\r\n            // Handle \\r\\n linebreaks after escapes or in template strings\r\n            if ((esc || sep === '`') && acorn.newline.test(input.charAt(parser_pos))) {\r\n              if (input.charAt(parser_pos) === '\\r' && input.charAt(parser_pos + 1) === '\\n') {\r\n                parser_pos += 1 \r\n              }\r\n              resulting_string += '\\n' \r\n            } else {\r\n              resulting_string += input.charAt(parser_pos) \r\n            }\r\n            if (esc) {\r\n              if (input.charAt(parser_pos) === 'x' || input.charAt(parser_pos) === 'u') {\r\n                has_char_escapes = true \r\n              }\r\n              esc = false \r\n            } else {\r\n              esc = input.charAt(parser_pos) === '\\\\' \r\n            }\r\n            parser_pos += 1 \r\n          }\r\n\r\n        }\r\n\r\n        if (has_char_escapes && opts.unescape_strings) {\r\n          resulting_string = unescape_string(resulting_string) \r\n        }\r\n\r\n        if (parser_pos < input_length && input.charAt(parser_pos) === sep) {\r\n          resulting_string += sep \r\n          parser_pos += 1 \r\n\r\n          if (sep === '/') {\r\n            // regexps may have modifiers /regexp/MOD , so fetch those, too\r\n            // Only [gim] are valid, but if the user puts in garbage, do what we can to take it.\r\n            while (parser_pos < input_length && acorn.isIdentifierStart(input.charCodeAt(parser_pos))) {\r\n              resulting_string += input.charAt(parser_pos) \r\n              parser_pos += 1 \r\n            }\r\n          }\r\n        }\r\n        return [resulting_string, 'TK_STRING'] \r\n      }\r\n\r\n      if (c === '#') {\r\n\r\n        if (tokens.length === 0 && input.charAt(parser_pos) === '!') {\r\n          // shebang\r\n          resulting_string = c \r\n          while (parser_pos < input_length && c !== '\\n') {\r\n            c = input.charAt(parser_pos) \r\n            resulting_string += c \r\n            parser_pos += 1 \r\n          }\r\n          return [`${trim(resulting_string)}\\n`, 'TK_UNKNOWN'] \r\n        }\r\n\r\n\r\n\r\n        // Spidermonkey-specific sharp variables for circular references\r\n        // https://developer.mozilla.org/En/Sharp_variables_in_JavaScript\r\n        // http://mxr.mozilla.org/mozilla-central/source/js/src/jsscan.cpp around line 1935\r\n        let sharp = '#' \r\n        if (parser_pos < input_length && digit.test(input.charAt(parser_pos))) {\r\n          do {\r\n            c = input.charAt(parser_pos) \r\n            sharp += c \r\n            parser_pos += 1 \r\n          } while (parser_pos < input_length && c !== '#' && c !== '=') \r\n          if (c === '#') {\r\n            //\r\n          } else if (input.charAt(parser_pos) === '[' && input.charAt(parser_pos + 1) === ']') {\r\n            sharp += '[]' \r\n            parser_pos += 2 \r\n          } else if (input.charAt(parser_pos) === '{' && input.charAt(parser_pos + 1) === '}') {\r\n            sharp += '{}' \r\n            parser_pos += 2 \r\n          }\r\n          return [sharp, 'TK_WORD'] \r\n        }\r\n      }\r\n\r\n      if (c === '<' && (input.charAt(parser_pos) === '?' || input.charAt(parser_pos) === '%')) {\r\n        template_pattern.lastIndex = parser_pos - 1 \r\n        const template_match = template_pattern.exec(input) \r\n        if (template_match) {\r\n          c = template_match[0] \r\n          parser_pos += c.length - 1 \r\n          c = c.replace(acorn.lineBreak, '\\n') \r\n          return [c, 'TK_STRING'] \r\n        }\r\n      }\r\n\r\n      if (c === '<' && input.substring(parser_pos - 1, parser_pos + 3) === '<!--') {\r\n        parser_pos += 3 \r\n        c = '<!--' \r\n        while (!acorn.newline.test(input.charAt(parser_pos)) && parser_pos < input_length) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos++ \r\n        }\r\n        in_html_comment = true \r\n        return [c, 'TK_COMMENT'] \r\n      }\r\n\r\n      if (c === '-' && in_html_comment && input.substring(parser_pos - 1, parser_pos + 2) === '-->') {\r\n        in_html_comment = false \r\n        parser_pos += 2 \r\n        return ['-->', 'TK_COMMENT'] \r\n      }\r\n\r\n      if (c === '.') {\r\n        return [c, 'TK_DOT'] \r\n      }\r\n\r\n      if (in_array(c, punct)) {\r\n        while (parser_pos < input_length && in_array(c + input.charAt(parser_pos), punct)) {\r\n          c += input.charAt(parser_pos) \r\n          parser_pos += 1 \r\n          if (parser_pos >= input_length) {\r\n            break \r\n          }\r\n        }\r\n\r\n        if (c === ',') {\r\n          return [c, 'TK_COMMA'] \r\n        } else if (c === '=') {\r\n          return [c, 'TK_EQUALS'] \r\n        } else {\r\n          return [c, 'TK_OPERATOR'] \r\n        }\r\n      }\r\n\r\n      return [c, 'TK_UNKNOWN'] \r\n    }\r\n\r\n\r\n    function unescape_string(s) {\r\n      let esc = false,\r\n        out = '',\r\n        pos = 0,\r\n        s_hex = '',\r\n        escaped = 0,\r\n        c \r\n\r\n      while (esc || pos < s.length) {\r\n\r\n        c = s.charAt(pos) \r\n        pos++ \r\n\r\n        if (esc) {\r\n          esc = false \r\n          if (c === 'x') {\r\n            // simple hex-escape \\x24\r\n            s_hex = s.substr(pos, 2) \r\n            pos += 2 \r\n          } else if (c === 'u') {\r\n            // unicode-escape, \\u2134\r\n            s_hex = s.substr(pos, 4) \r\n            pos += 4 \r\n          } else {\r\n            // some common escape, e.g \\n\r\n            out += `\\\\${c}` \r\n            continue \r\n          }\r\n          if (!s_hex.match(/^[0123456789abcdefABCDEF]+$/)) {\r\n            // some weird escaping, bail out,\r\n            // leaving whole string intact\r\n            return s \r\n          }\r\n\r\n          escaped = parseInt(s_hex, 16) \r\n\r\n          if (escaped >= 0x00 && escaped < 0x20) {\r\n            // leave 0x00...0x1f escaped\r\n            if (c === 'x') {\r\n              out += `\\\\x${s_hex}` \r\n            } else {\r\n              out += `\\\\u${s_hex}` \r\n            }\r\n            continue \r\n          } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\r\n            // single-quote, apostrophe, backslash - escape these\r\n            out += `\\\\${String.fromCharCode(escaped)}` \r\n          } else if (c === 'x' && escaped > 0x7e && escaped <= 0xff) {\r\n            // we bail out on \\x7f..\\xff,\r\n            // leaving whole string escaped,\r\n            // as it's probably completely binary\r\n            return s \r\n          } else {\r\n            out += String.fromCharCode(escaped) \r\n          }\r\n        } else if (c === '\\\\') {\r\n          esc = true \r\n        } else {\r\n          out += c \r\n        }\r\n      }\r\n      return out \r\n    }\r\n\r\n  }\r\n\r\n  return {\r\n    run: run\r\n  }\r\n\r\n  /* jshint ignore:end */\r\n  /* jscs:enable */\r\n} \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  codeMirror: window.CodeMirror,\r\n  codeMirrorOptions: {\r\n    lineNumbers: true,\r\n    tabMode: 'indent',\r\n    indentWithTabs: true,\r\n    lineWrapping: true,\r\n    mode: 'text/html',\r\n    tabSize: 2\r\n  },\r\n  codeBeautifierOptions: {\r\n    end_with_newline: true,\r\n    indent_inner_html: true,\r\n    extra_liners: ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'table', 'dl'],\r\n    brace_style: 'expand',\r\n    indent_char: '\\t',\r\n    indent_size: 1,\r\n    wrap_line_length: 0\r\n  },\r\n  codeViewKeepActiveButtons: ['fullscreen']\r\n})\r\n\r\nFE.PLUGINS.codeView = function (editor) {\r\n  const { $ } = editor\r\n  let $html_area\r\n  let code_mirror\r\n\r\n  /**\r\n   * Check if code view is enabled.\r\n   */\r\n  const isActive = () => editor.$box.hasClass('fr-code-view')\r\n\r\n  function get() {\r\n    if (code_mirror) {\r\n      return code_mirror.getValue()\r\n    }\r\n    else {\r\n      return $html_area.val()\r\n    }\r\n  }\r\n\r\n  function refresh() {\r\n    if (isActive()) {\r\n      if (code_mirror) {\r\n        code_mirror.setSize(null, editor.opts.height ? editor.opts.height : 'auto')\r\n      }\r\n\r\n      if (editor.opts.heightMin || editor.opts.height) {\r\n        editor.$box.find('.CodeMirror-scroll, .CodeMirror-gutters').css('min-height', editor.opts.heightMin || editor.opts.height);\r\n        $html_area.css('height', editor.opts.height);\r\n      }\r\n      else {\r\n        editor.$box.find('.CodeMirror-scroll, .CodeMirror-gutters').css('min-height', '')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to edit mode.\r\n   */\r\n  function _showText($btn) {\r\n    const html = get()\r\n\r\n    // Code mirror enabled.\r\n    editor.html.set(html)\r\n\r\n    // Blur the element.\r\n    editor.$el.blur()\r\n\r\n    // Toolbar no longer disabled.\r\n    editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').not($btn).removeClass('fr-disabled').attr('aria-disabled', false)\r\n    \r\n    $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n\r\n    editor.selection.setAtStart(editor.el)\r\n    editor.selection.restore()\r\n    editor.placeholder.refresh()\r\n\r\n    editor.undo.saveStep()\r\n  }\r\n\r\n  let _can_focus = false\r\n\r\n  function _blur() {\r\n    if (isActive()) {\r\n      editor.events.trigger('blur')\r\n    }\r\n  }\r\n\r\n  function _focus() {\r\n    if (isActive() && _can_focus) {\r\n      editor.events.trigger('focus')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get to code mode.\r\n   */\r\n  function _showHTML($btn) {\r\n    if (!$html_area) {\r\n      _initArea()\r\n\r\n      // Enable code mirror.\r\n      if (!code_mirror && editor.opts.codeMirror) {\r\n        code_mirror = editor.opts.codeMirror.fromTextArea($html_area.get(0), editor.opts.codeMirrorOptions)\r\n\r\n        code_mirror.on('blur', _blur)\r\n        code_mirror.on('focus', _focus)\r\n      }\r\n      else {\r\n        editor.events.$on($html_area, 'keydown keyup change input', function () {\r\n          if (!editor.opts.height) {\r\n            this.rows = 1\r\n\r\n            // Textarea has no content anymore.\r\n            if (this.value.length === 0) {\r\n              this.style.height = 'auto'\r\n            }\r\n\r\n            else {\r\n              this.style.height = `${this.scrollHeight}px`\r\n            }\r\n          }\r\n          else {\r\n            this.removeAttribute('rows')\r\n          }\r\n        })\r\n\r\n        editor.events.$on($html_area, 'blur', _blur)\r\n        editor.events.$on($html_area, 'focus', _focus)\r\n      }\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    // Clean white tags but ignore selection.\r\n    editor.html.cleanEmptyTags()\r\n    editor.html.cleanWhiteTags(true)\r\n\r\n    // Blur the element.\r\n    if (editor.core.hasFocus()) {\r\n      if (!editor.core.isEmpty()) {\r\n        editor.selection.save()\r\n        editor.$el.find('.fr-marker[data-type=\"true\"]').first().replaceWith('<span class=\"fr-tmp fr-sm\">F</span>')\r\n        editor.$el.find('.fr-marker[data-type=\"false\"]').last().replaceWith('<span class=\"fr-tmp fr-em\">F</span>')\r\n      }\r\n    }\r\n\r\n    // Get HTML.\r\n    let html = editor.html.get(false, true)\r\n    editor.$el.find('span.fr-tmp').remove()\r\n\r\n    editor.$box.toggleClass('fr-code-view', true)\r\n\r\n    let was_focused = false\r\n\r\n    if (editor.core.hasFocus()) {\r\n      was_focused = true\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    html = html.replace(/<span class=\"fr-tmp fr-sm\">F<\\/span>/, 'FROALA-SM')\r\n    html = html.replace(/<span class=\"fr-tmp fr-em\">F<\\/span>/, 'FROALA-EM')\r\n\r\n    // Beautify HTML.\r\n    if (editor.codeBeautifier && !html.includes('fr-embedly')) {\r\n      html = editor.codeBeautifier.run(html, editor.opts.codeBeautifierOptions)\r\n    }\r\n\r\n    let s_index\r\n    let e_index\r\n\r\n    // Code mirror is enabled.\r\n    if (code_mirror) {\r\n      s_index = html.indexOf('FROALA-SM')\r\n      e_index = html.indexOf('FROALA-EM')\r\n\r\n      if (s_index > e_index) {\r\n        s_index = e_index\r\n      }\r\n      else {\r\n        e_index = e_index - 9\r\n      }\r\n\r\n      html = html.replace(/FROALA-SM/g, '').replace(/FROALA-EM/g, '')\r\n      const s_line = html.substring(0, s_index).length - html.substring(0, s_index).replace(/\\n/g, '').length\r\n      const e_line = html.substring(0, e_index).length - html.substring(0, e_index).replace(/\\n/g, '').length\r\n\r\n      s_index = html.substring(0, s_index).length - html.substring(0, html.substring(0, s_index).lastIndexOf('\\n') + 1).length\r\n      e_index = html.substring(0, e_index).length - html.substring(0, html.substring(0, e_index).lastIndexOf('\\n') + 1).length\r\n\r\n      code_mirror.setSize(null, editor.opts.height ? editor.opts.height : 'auto')\r\n\r\n      if (editor.opts.heightMin) editor.$box.find('.CodeMirror-scroll').css('min-height', editor.opts.heightMin)\r\n      code_mirror.setValue(html)\r\n      _can_focus = !was_focused\r\n      code_mirror.focus()\r\n      _can_focus = true\r\n      code_mirror.setSelection({ line: s_line, ch: s_index }, { line: e_line, ch: e_index })\r\n      code_mirror.refresh()\r\n      code_mirror.clearHistory()\r\n    }\r\n\r\n    // No code mirror.\r\n    else {\r\n      s_index = html.indexOf('FROALA-SM')\r\n      e_index = html.indexOf('FROALA-EM') - 9\r\n\r\n      if (editor.opts.heightMin) {\r\n        $html_area.css('min-height', editor.opts.heightMin)\r\n      }\r\n\r\n      if (editor.opts.height) {\r\n        $html_area.css('height', editor.opts.height)\r\n      }\r\n\r\n      if (editor.opts.heightMax) {\r\n        $html_area.css('max-height', editor.opts.height || editor.opts.heightMax)\r\n      }\r\n\r\n      $html_area.val(html.replace(/FROALA-SM/g, '').replace(/FROALA-EM/g, '')).trigger('change')\r\n\r\n      const scroll_top = $(editor.o_doc).scrollTop()\r\n      _can_focus = !was_focused\r\n      $html_area.focus()\r\n      _can_focus = true\r\n      $html_area.get(0).setSelectionRange(s_index, e_index)\r\n      $(editor.o_doc).scrollTop(scroll_top)\r\n    }\r\n\r\n    // Disable buttons.\r\n    editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').not($btn).filter(function () {\r\n      return editor.opts.codeViewKeepActiveButtons.indexOf($(this).data('cmd')) < 0\r\n    }).addClass('fr-disabled').attr('aria-disabled', true)\r\n    $btn.addClass('fr-active').attr('aria-pressed', true)\r\n\r\n    if (!editor.helpers.isMobile() && editor.opts.toolbarInline) {\r\n      editor.toolbar.hide()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the code view.\r\n   */\r\n  function toggle(val) {\r\n    if (typeof val == 'undefined') val = !isActive()\r\n\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"html\"]')\r\n\r\n    if (!val) {\r\n      editor.$box.toggleClass('fr-code-view', false)\r\n      _showText($btn)\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2036\r\n      // fire codeView.update event when switching to html view\r\n      editor.events.trigger('codeView.update')\r\n    }\r\n    else {\r\n      editor.popups.hideAll()\r\n      _showHTML($btn)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _destroy() {\r\n    if (isActive()) {\r\n      toggle(false)\r\n    }\r\n\r\n    if (code_mirror) code_mirror.toTextArea()\r\n    $html_area.val('').removeData().remove()\r\n    $html_area = null\r\n\r\n    if ($back_button) {\r\n      $back_button.remove()\r\n      $back_button = null\r\n    }\r\n  }\r\n\r\n  function _refreshToolbar() {\r\n\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"html\"]')\r\n\r\n    if (!isActive()) {\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').not($btn).removeClass('fr-disabled').attr('aria-disabled', false)\r\n      $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n    }\r\n    else {\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').not($btn).filter(function () {\r\n        return editor.opts.codeViewKeepActiveButtons.indexOf($(this).data('cmd')) < 0\r\n      }).addClass('fr-disabled').attr('aria-disabled', false)\r\n      $btn.addClass('fr-active').attr('aria-pressed', false)\r\n    }\r\n  }\r\n\r\n  function _initArea() {\r\n\r\n    // Add the coding textarea to the wrapper.\r\n    $html_area = $('<textarea class=\"fr-code\" tabIndex=\"-1\">')\r\n    editor.$wp.append($html_area)\r\n\r\n    $html_area.attr('dir', editor.opts.direction)\r\n\r\n    // Exit code view button for inline toolbar.\r\n    if (!editor.$box.hasClass('fr-basic')) {\r\n      $back_button = $(`<a data-cmd=\"html\" title=\"Code View\" class=\"fr-command fr-btn html-switch${(editor.helpers.isMobile() ? '' : ' fr-desktop')}\" role=\"button\" tabIndex=\"-1\"><i class=\"fa fa-code\"></i></button>`)\r\n      editor.$box.append($back_button)\r\n\r\n      editor.events.bindClick(editor.$box, 'a.html-switch', function () {\r\n        editor.events.trigger('commands.before', ['html'])\r\n\r\n        toggle(false)\r\n\r\n        editor.events.trigger('commands.after', ['html'])\r\n      })\r\n    }\r\n\r\n    const cancel = function () {\r\n      return !isActive()\r\n    }\r\n\r\n    // Disable refresh of the buttons while enabled.\r\n    editor.events.on('buttons.refresh', cancel)\r\n    editor.events.on('copy', cancel, true)\r\n    editor.events.on('cut', cancel, true)\r\n    editor.events.on('paste', cancel, true)\r\n\r\n    editor.events.on('destroy', _destroy, true)\r\n\r\n    editor.events.on('html.set', function () {\r\n      if (isActive()) toggle(true)\r\n    })\r\n\r\n    editor.events.on('codeView.update', refresh)\r\n    \r\n    editor.events.on('codeView.toggle', function () {\r\n      if (editor.$box.hasClass('fr-code-view')) {\r\n        toggle()\r\n      }\r\n    })\r\n\r\n    editor.events.on('form.submit', function () {\r\n      if (isActive()) {\r\n\r\n        // Code mirror enabled.\r\n        editor.html.set(get())\r\n\r\n        editor.events.trigger('contentChanged', [], true)\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  let $back_button\r\n\r\n  function _init() {\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/672\r\n\r\n    editor.events.on('focus', function () {\r\n\r\n      if (editor.opts.toolbarContainer) {\r\n        _refreshToolbar()\r\n      }\r\n    })\r\n\r\n    if (!editor.$wp) return false\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    toggle: toggle,\r\n    isActive: isActive,\r\n    get: get\r\n  }\r\n}\r\n\r\nFE.RegisterCommand('html', {\r\n  title: 'Code View',\r\n  undo: false,\r\n  focus: false,\r\n  forcedRefresh: true,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.codeView.toggle()\r\n  },\r\n  plugin: 'codeView'\r\n})\r\n\r\nFE.DefineIcon('html', {\r\n  NAME: 'code',\r\n  SVG_KEY: 'codeView'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Popup templates for both textColor and backgroundColor\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'textColor.picker': '[_BUTTONS_][_TEXT_COLORS_][_CUSTOM_COLOR_]',\r\n  'backgroundColor.picker': '[_BUTTONS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  colorsText: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  colorsBackground: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  colorsStep: 7,\r\n  colorsHEXInput: true,\r\n  colorsButtons: ['colorsBack', '|', '-']\r\n})\r\n\r\nFE.PLUGINS.colors = function (editor) {\r\n\r\n  const { $ } = editor\r\n  const custom_color_template = `<div class=\"fr-color-hex-layer fr-active fr-layer\" id=\"fr-color-hex-layer- \r\n  ${editor.id}\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"[ID]\"\r\n  type=\"text\" placeholder=\"${editor.language.translate('HEX Color')}\" \r\n  tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button \r\n  type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"[COMMAND]\" tabIndex=\"2\" role=\"button\">\r\n  ${editor.language.translate('OK')}</button></div></div>`\r\n\r\n  /*\r\n   * Show the colors popup.\r\n   */\r\n  function _showColorsPopup(cmd_type) {\r\n    const $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd_type}\"]`)\r\n\r\n    // Get color picker based on command type\r\n    let $popup = editor.popups.get(`${cmd_type}.picker`) \r\n\r\n    if (!$popup) $popup = _initColorsPopup(cmd_type)\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      // Colors popup\r\n      editor.popups.setContainer(`${cmd_type}.picker`, editor.$tb)\r\n\r\n      // Refresh colors in the current popup\r\n      if (cmd_type === 'textColor') {\r\n        _refreshColor('text')\r\n      }\r\n      else {\r\n        _refreshColor('background')\r\n      }\r\n\r\n      // Colors popup left and top position.\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show(`${cmd_type}.picker`, left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show(`${cmd_type}.picker`)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the colors popup.\r\n   */\r\n  function _initColorsPopup(cmd_type) {\r\n    \r\n    let colors_buttons = ''\r\n    \r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Colors buttons.\r\n      if (editor.opts.colorsButtons.length > 0) {\r\n        colors_buttons += `<div class=\"fr-buttons fr-colors-buttons fr-tabs\">\r\n        ${editor.button.buildList(editor.opts.colorsButtons)}\r\n        </div>`\r\n      }\r\n    }\r\n\r\n    // Custom HEX.\r\n    let custom_color = ''\r\n\r\n    let template\r\n    if (cmd_type === 'textColor') {\r\n\r\n      if (editor.opts.colorsHEXInput) {\r\n        custom_color = custom_color_template.replace(/\\[ID\\]/g, `fr-color-hex-layer-text-${editor.id}`)\r\n          .replace(/\\[COMMAND\\]/g, 'customTextColor')\r\n      }\r\n\r\n      // Template for textColor picker\r\n      template = {\r\n        buttons: colors_buttons,\r\n        text_colors: _colorPickerHTML('text'),\r\n        custom_color: custom_color\r\n      }\r\n    } \r\n    else {\r\n\r\n      if (editor.opts.colorsHEXInput) {\r\n        custom_color = custom_color_template.replace(/\\[ID\\]/g, `fr-color-hex-layer-background-${editor.id}`)\r\n          .replace(/\\[COMMAND\\]/g, 'customBackgroundColor')\r\n      }\r\n\r\n      // Template for backgroundColor picker\r\n      template = {\r\n        buttons: colors_buttons,\r\n        background_colors: _colorPickerHTML('background'),\r\n        custom_color: custom_color\r\n      }\r\n    }\r\n    // Create a popup and add accessibility to it\r\n    let $popup = editor.popups.create(`${cmd_type}.picker`, template)\r\n    _addAccessibility($popup, `${cmd_type}.picker`)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * HTML for the color picker colors.\r\n   */\r\n  function _colorPickerHTML(tab) {\r\n\r\n    // Get colors according to tab name.\r\n    const colors = (tab === 'text' ? editor.opts.colorsText : editor.opts.colorsBackground)\r\n\r\n    // Create colors html.\r\n    let colors_html = `<div class=\"fr-color-set fr-${tab}-color fr-selected-set\">`\r\n\r\n    // Add colors.\r\n    for (let i = 0; i < colors.length; i++) {\r\n      if (i !== 0 && i % editor.opts.colorsStep === 0) {\r\n        colors_html += '<br>'\r\n      }\r\n\r\n      if (colors[i] !== 'REMOVE') {\r\n        colors_html += `<span class=\"fr-command fr-select-color\" style=\"background:${colors[i]};\" \r\n        tabIndex=\"-1\" aria-selected=\"false\" role=\"button\" data-cmd=\"apply${tab}Color\" \r\n        data-param1=\"${colors[i]}\"><span class=\"fr-sr-only\"> ${editor.language.translate('Color')}${colors[i]} \r\n        &nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n\r\n      else {\r\n        colors_html += `<span class=\"fr-command fr-select-color\" data-cmd=\"apply${tab}Color\"\r\n         tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" \r\n         title=\"${editor.language.translate('Clear Formatting')}\">${editor.icon.create('remove')} \r\n        <span class=\"fr-sr-only\"> ${editor.language.translate('Clear Formatting')} </span></span>`\r\n      }\r\n    }\r\n\r\n    return `${colors_html}</div>`\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events.\r\n   */\r\n  function _addAccessibility($popup, popupName) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible(popupName) || !$focused_item.is('span')) {\r\n        return true\r\n      }\r\n      const key_code = e.which\r\n      let status = true\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB === key_code) {\r\n        const $tb = $popup.find('.fr-buttons')\r\n\r\n        // Focus back the popup's toolbar if exists.\r\n        status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP === key_code || FE.KEYCODE.ARROW_DOWN === key_code \r\n        || FE.KEYCODE.ARROW_LEFT === key_code || FE.KEYCODE.ARROW_RIGHT === key_code) {\r\n        if ($focused_item.is('span.fr-select-color')) {\r\n\r\n          // Get all current colors.\r\n          const $colors = $focused_item.parent().find('span.fr-select-color')\r\n\r\n          // Get focused item position.\r\n          const index = $colors.index($focused_item)\r\n\r\n          // Get color matrix dimensions.\r\n          const columns = editor.opts.colorsStep\r\n          const lines = Math.floor($colors.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP === key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN === key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT === key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT === key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          const $el = $($colors.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER === key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Show the current selected color.\r\n   */\r\n  function _refreshColor(tab) {\r\n    const $popup = editor.popups.get(`${tab}Color.picker`)\r\n    let $element = $(editor.selection.element())\r\n\r\n    // The color css property.\r\n    let color_type\r\n\r\n    if (tab === 'background') {\r\n      color_type = 'background-color'\r\n    }\r\n    else {\r\n      color_type = 'color'\r\n    }\r\n\r\n    const $current_color = $popup.find(`.fr-${tab}-color .fr-select-color`)\r\n\r\n    // Remove current color selection.\r\n\r\n    $current_color.find('.fr-selected-color').remove()\r\n    $current_color.removeClass('fr-active-item')\r\n    $current_color.not('[data-param1=\"REMOVE\"]').attr('aria-selected', false)\r\n\r\n    // Find the selected color.\r\n    while ($element.get(0) !== editor.el) {\r\n\r\n      // Transparent or black.\r\n      if ($element.css(color_type) === 'transparent' || $element.css(color_type) === 'rgba(0, 0, 0, 0)') {\r\n        $element = $element.parent()\r\n      }\r\n\r\n      // Select the correct color.\r\n      else {\r\n        const $select_color = $popup.find(`.fr-${tab}-color .fr-select-color[data-param1=\"${editor.helpers.RGBToHex($element.css(color_type))}\"]`)\r\n\r\n        // Add checked icon.\r\n        $select_color.append('<span class=\"fr-selected-color\" aria-hidden=\"true\">\\uf00c</span>')\r\n        $select_color.addClass('fr-active-item').attr('aria-selected', true)\r\n        break\r\n      }\r\n    }\r\n\r\n    _updateColor(tab)\r\n  }\r\n\r\n  function _updateColor(val) {\r\n    const $popup = editor.popups.get(`${val}Color.picker`)\r\n    let $selectionColor = $popup.find(`.fr-${val}-color .fr-active-item`).attr('data-param1')\r\n    const $input = $popup.find('.fr-color-hex-layer input')\r\n\r\n    if (!$selectionColor) {\r\n      $selectionColor = ''\r\n    }\r\n\r\n    if ($input.length) {\r\n      $($input.val($selectionColor).input).trigger('change')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Change background color.\r\n   */\r\n  function background(val) {\r\n\r\n    // Set background  color.\r\n    if (val !== 'REMOVE') {\r\n      editor.format.applyStyle('background-color', editor.helpers.HEXtoRGB(val))\r\n    }\r\n\r\n    // Remove background color.\r\n    else {\r\n      editor.format.removeStyle('background-color')\r\n    }\r\n\r\n    editor.popups.hide('backgroundColor.picker')\r\n  }\r\n\r\n  /*\r\n   * Change text color.\r\n   */\r\n  function text(val) {\r\n\r\n    // Set text color.\r\n    if (val !== 'REMOVE') {\r\n      editor.format.applyStyle('color', editor.helpers.HEXtoRGB(val))\r\n    }\r\n\r\n    // Remove text color.\r\n    else {\r\n      editor.format.removeStyle('color')\r\n    }\r\n\r\n    editor.popups.hide('textColor.picker')\r\n  }\r\n\r\n  /*\r\n   * Go back to the inline editor.\r\n   */\r\n  function back() {\r\n    editor.popups.hide('textColor.picker')\r\n    editor.popups.hide('backgroundColor.picker')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  function customColor(tab) {\r\n    const $popup = editor.popups.get(`${tab}Color.picker`)\r\n\r\n    const $input = $popup.find('.fr-color-hex-layer input')\r\n\r\n    if ($input.length) {\r\n      const color = $input.val()\r\n\r\n      // Set custom color\r\n      if (tab === 'background') {\r\n        background(color)\r\n      }\r\n      else {\r\n        text(color)\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    showColorsPopup: _showColorsPopup,\r\n    background: background,\r\n    customColor: customColor,\r\n    text: text,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Select text color command.\r\nFE.DefineIcon('textColor', { NAME: 'tint', SVG_KEY: 'textColor' })\r\nFE.RegisterCommand('textColor', {\r\n  title: 'Text Color',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('textColor.picker')) {\r\n      this.colors.showColorsPopup('textColor')\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('textColor.picker')\r\n    }\r\n  }\r\n})\r\n// Command to apply text color from the available colors\r\nFE.RegisterCommand('applytextColor', {\r\n  undo: true,\r\n  callback: function (cmd, val) {\r\n    this.colors.text(val)\r\n  }\r\n})\r\n// Command to set custom text color\r\nFE.RegisterCommand('customTextColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.colors.customColor('text')\r\n  }\r\n})\r\n\r\n// Select background color command.\r\nFE.DefineIcon('backgroundColor', { NAME: 'paint-brush', SVG_KEY: 'backgroundColor' })\r\nFE.RegisterCommand('backgroundColor', {\r\n  title: 'Background Color',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('backgroundColor.picker')) {\r\n      this.colors.showColorsPopup('backgroundColor')\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('backgroundColor.picker')\r\n    }\r\n  }\r\n})\r\n// Command to apply background color from the available colors\r\nFE.RegisterCommand('applybackgroundColor', {\r\n  undo: true,\r\n  callback: function (cmd, val) {\r\n    this.colors.background(val)\r\n  }\r\n})\r\n// Command to set custom background color\r\nFE.RegisterCommand('customBackgroundColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.colors.customColor('background')\r\n  }\r\n})\r\n\r\n// Colors back.\r\nFE.DefineIcon('colorsBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('colorsBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.colors.back()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('remove', { NAME: 'eraser', SVG_KEY: 'remove' })\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  dragInline: true\r\n})\r\n\r\nFE.PLUGINS.draggable = function(editor) {\r\n  const { $ } = editor\r\n  function _dragStart(e) {\r\n    if (e.originalEvent && e.originalEvent.target && e.originalEvent.target.nodeType === Node.TEXT_NODE) {\r\n\r\n      return true \r\n    }\r\n\r\n    // Image with link.\r\n    if (e.target && e.target.tagName === 'A' && e.target.childNodes.length === 1 && e.target.childNodes[0].tagName === 'IMG') {\r\n      e.target = e.target.childNodes[0] \r\n    }\r\n\r\n    if (!$(e.target).hasClass('fr-draggable')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Save in undo step if we cannot do.\r\n    if (!editor.undo.canDo()) {\r\n      editor.undo.saveStep()\r\n    }\r\n\r\n    if (editor.opts.dragInline) {\r\n      editor.$el.attr('contenteditable', true)\r\n    }\r\n    else {\r\n      editor.$el.attr('contenteditable', false)\r\n    }\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.hide()\r\n\r\n    $(e.target).addClass('fr-dragging')\r\n\r\n    if (!editor.browser.msie && !editor.browser.edge) {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    e.originalEvent.dataTransfer.setData('text', 'Froala')\r\n  }\r\n\r\n  const _tagOK = (tag_under) => !(tag_under && (tag_under.tagName === 'HTML' || tag_under.tagName === 'BODY' || editor.node.isElement(tag_under)))\r\n\r\n  function _setHelperSize(top, left, width) {\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      top += editor.$iframe.offset().top + iframePaddingTop\r\n      left += editor.$iframe.offset().left + iframePaddingLeft\r\n    }\r\n\r\n    if ($draggable_helper.offset().top !== top) $draggable_helper.css('top', top)\r\n\r\n    if ($draggable_helper.offset().left !== left) $draggable_helper.css('left', left)\r\n\r\n    if ($draggable_helper.width() !== width) $draggable_helper.css('width', width)\r\n  }\r\n\r\n  function _positionHelper(e) {\r\n\r\n    // The tag under the mouse cursor.\r\n    let tag_under = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset)\r\n\r\n    if (!_tagOK(tag_under)) {\r\n\r\n      // Look above for the closest tag.\r\n      let top_offset = 0\r\n      let top_tag = tag_under\r\n\r\n      while (!_tagOK(top_tag) && top_tag === tag_under && e.originalEvent.pageY - editor.win.pageYOffset - top_offset > 0) {\r\n        top_offset++ \r\n        top_tag = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset - top_offset)\r\n      }\r\n\r\n      if (!_tagOK(top_tag) || ($draggable_helper && editor.$el.find(top_tag).length === 0 && top_tag !== $draggable_helper.get(0))) { top_tag = null  }\r\n\r\n      // Look below for the closest tag.\r\n      let bottom_offset = 0 \r\n      let bottom_tag = tag_under \r\n\r\n      while (!_tagOK(bottom_tag) && bottom_tag === tag_under && e.originalEvent.pageY - editor.win.pageYOffset + bottom_offset < $(editor.doc).height()) {\r\n        bottom_offset++ \r\n        bottom_tag = editor.doc.elementFromPoint(e.originalEvent.pageX - editor.win.pageXOffset, e.originalEvent.pageY - editor.win.pageYOffset + bottom_offset)\r\n      }\r\n\r\n      if (!_tagOK(bottom_tag) || ($draggable_helper && editor.$el.find(bottom_tag).length === 0 && bottom_tag !== $draggable_helper.get(0))) { bottom_tag = null }\r\n\r\n      if (bottom_tag === null && top_tag) tag_under = top_tag\r\n\r\n      else if (bottom_tag && top_tag === null) tag_under = bottom_tag\r\n\r\n      else if (bottom_tag && top_tag) {\r\n        tag_under = (top_offset < bottom_offset ? top_tag : bottom_tag)\r\n      }\r\n      else {\r\n        tag_under = null\r\n      }\r\n    }\r\n\r\n    // Stop if tag under is draggable helper.\r\n    if ($(tag_under).hasClass('fr-drag-helper')) return false\r\n\r\n    // Get block parent.\r\n    if (tag_under && !editor.node.isBlock(tag_under)) {\r\n      tag_under = editor.node.blockParent(tag_under)\r\n    }\r\n\r\n    // Normalize TABLE parent.\r\n    if (tag_under && ['TD', 'TH', 'TR', 'THEAD', 'TBODY'].indexOf(tag_under.tagName) >= 0) {\r\n      tag_under = $(tag_under).parents('table').get(0)\r\n    }\r\n\r\n    // Normalize LIST parent.\r\n    if (tag_under && ['LI'].indexOf(tag_under.tagName) >= 0) {\r\n      tag_under = $(tag_under).parents('UL, OL').get(0)\r\n    }\r\n\r\n    if (tag_under && !$(tag_under).hasClass('fr-drag-helper')) {\r\n\r\n      // Init helper.\r\n      if (!$draggable_helper) {\r\n        if (!FE.$draggable_helper) FE.$draggable_helper = $(document.createElement('div')).attr('class', 'fr-drag-helper')\r\n\r\n        $draggable_helper = FE.$draggable_helper\r\n\r\n        editor.events.on('shared.destroy', function () {\r\n          $draggable_helper.html('').removeData().remove()\r\n          $draggable_helper = null\r\n        }, true)\r\n      }\r\n\r\n      let above\r\n      const mouse_y = e.originalEvent.pageY\r\n\r\n      if (mouse_y < $(tag_under).offset().top + $(tag_under).outerHeight() / 2) above = true\r\n      else above = false\r\n\r\n      let $tag_under = $(tag_under)\r\n      let margin = 0\r\n\r\n      // Should go below and there is no tag below.\r\n      if (!above && $tag_under.next().length === 0) {\r\n        if ($draggable_helper.data('fr-position') !== 'after' || !$tag_under.is($draggable_helper.data('fr-tag'))) {\r\n          margin = parseFloat($tag_under.css('margin-bottom')) || 0\r\n\r\n          _setHelperSize(\r\n            $tag_under.offset().top + $(tag_under).height() + margin / 2 - editor.$box.offset().top,\r\n            $tag_under.offset().left - editor.win.pageXOffset - editor.$box.offset().left,\r\n            $tag_under.width()\r\n          ) \r\n\r\n          $draggable_helper.data('fr-position', 'after')\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Should go below then we take the next tag.\r\n        if (!above) {\r\n          $tag_under = $tag_under.next()\r\n        }\r\n\r\n        if ($draggable_helper.data('fr-position') !== 'before' || !$tag_under.is($draggable_helper.data('fr-tag'))) {\r\n          if ($tag_under.prev().length > 0) {\r\n            margin = parseFloat($tag_under.prev().css('margin-bottom')) || 0\r\n          }\r\n          margin = Math.max(margin, parseFloat($tag_under.css('margin-top')) || 0)\r\n\r\n          _setHelperSize(\r\n            $tag_under.offset().top - margin / 2 - editor.$box.offset().top,\r\n            $tag_under.offset().left - editor.win.pageXOffset - editor.$box.offset().left,\r\n            $tag_under.width()\r\n          )\r\n\r\n          $draggable_helper.data('fr-position', 'before')\r\n        }\r\n      }\r\n\r\n      $draggable_helper.data('fr-tag', $tag_under)\r\n\r\n      $draggable_helper.addClass('fr-visible')\r\n      editor.$box.append($draggable_helper)\r\n    }\r\n    else if ($draggable_helper && editor.$box.find($draggable_helper).length > 0) {\r\n      $draggable_helper.removeClass('fr-visible')\r\n    }\r\n  }\r\n\r\n  function _dragOver(e) {\r\n    e.originalEvent.dataTransfer.dropEffect = 'move'\r\n\r\n    if (!editor.opts.dragInline) {\r\n      e.preventDefault()\r\n\r\n      _positionHelper(e)\r\n    }\r\n\r\n    else if (!_getDraggedEl() || editor.browser.msie || editor.browser.edge) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  function _dragEnter(e) {\r\n    e.originalEvent.dataTransfer.dropEffect = 'move'\r\n\r\n    if (!editor.opts.dragInline) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  function _documentDragEnd(e) {\r\n    editor.$el.attr('contenteditable', true) \r\n    const $draggedEl = editor.$el.find('.fr-dragging') \r\n\r\n    if ($draggable_helper && $draggable_helper.hasClass('fr-visible') && editor.$box.find($draggable_helper).length) {\r\n      _drop(e) \r\n    }\r\n    else if ($draggedEl.length) {\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n    }\r\n\r\n    if ($draggable_helper && editor.$box.find($draggable_helper).length) {\r\n      $draggable_helper.removeClass('fr-visible') \r\n    }\r\n\r\n    $draggedEl.removeClass('fr-dragging') \r\n  }\r\n\r\n  function _getDraggedEl() {\r\n    let $draggedEl = null \r\n\r\n    // Search of the instance we're dragging from.\r\n    for (let i = 0;  i < FE.INSTANCES.length;  i++) {\r\n      $draggedEl = FE.INSTANCES[i].$el.find('.fr-dragging') \r\n\r\n      if ($draggedEl.length) {\r\n        return $draggedEl.get(0) \r\n      }\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n    editor.$el.attr('contenteditable', true) \r\n    let $draggedEl \r\n    let inst \r\n\r\n    // Inst is the intance we're dragging from.\r\n    for (let i = 0;  i < FE.INSTANCES.length;  i++) {\r\n      $draggedEl = FE.INSTANCES[i].$el.find('.fr-dragging') \r\n\r\n      if ($draggedEl.length) {\r\n        inst = FE.INSTANCES[i] \r\n        break \r\n      }\r\n    }\r\n\r\n    // There is a dragged element.\r\n    if ($draggedEl.length) {\r\n\r\n      // Cancel anything else.\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n\r\n      // Look for draggable helper.\r\n      if ($draggable_helper && $draggable_helper.hasClass('fr-visible') && editor.$box.find($draggable_helper).length) {\r\n        $draggable_helper.data('fr-tag')[$draggable_helper.data('fr-position')]('<span class=\"fr-marker\"></span>') \r\n        $draggable_helper.removeClass('fr-visible') \r\n      }\r\n      else {\r\n        const ok = editor.markers.insertAtPoint(e.originalEvent) \r\n\r\n        if (ok === false) return false \r\n      }\r\n\r\n      // Remove dragging class.\r\n      $draggedEl.removeClass('fr-dragging') \r\n\r\n      $draggedEl = editor.events.chainTrigger('element.beforeDrop', $draggedEl) \r\n\r\n      if ($draggedEl === false) {\r\n        return false \r\n      }\r\n\r\n      // Image with link.\r\n      let $droppedEl = $draggedEl \r\n\r\n      if ($draggedEl.parent().is('A') && $draggedEl.parent().get(0).childNodes.length === 1) {\r\n        $droppedEl = $draggedEl.parent() \r\n      }\r\n\r\n      // Replace marker with the dragged element.\r\n      if (!editor.core.isEmpty()) {\r\n        const $marker = editor.$el.find('.fr-marker') \r\n        $marker.replaceWith(FE.MARKERS) \r\n        editor.selection.restore() \r\n      }\r\n      else {\r\n        editor.events.focus() \r\n      }\r\n\r\n      // Save undo step if the current instance is different than the original one.\r\n      if (inst !== editor && !editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n      // Place new elements.\r\n      if (!editor.core.isEmpty()) {\r\n        const marker = editor.markers.insert() \r\n\r\n        // Make sure we do not have marker inside $droppedEl.\r\n        if ($droppedEl.find(marker).length === 0) {\r\n          $(marker).replaceWith($droppedEl) \r\n        }\r\n        else if ($draggedEl.find(marker).length === 0) {\r\n          $(marker).replaceWith($draggedEl) \r\n        }\r\n\r\n        $draggedEl.after(FE.MARKERS) \r\n        editor.selection.restore() \r\n      }\r\n      else {\r\n        editor.$el.html($droppedEl) \r\n      }\r\n\r\n      // Hide all popups.\r\n      editor.popups.hideAll() \r\n      editor.selection.save() \r\n      editor.$el.find(editor.html.emptyBlockTagsQuery()).not('TD, TH, LI, .fr-inner').not(editor.opts.htmlAllowedEmptyTags.join(',')).remove() \r\n      editor.html.wrap() \r\n      editor.html.fillEmptyBlocks() \r\n      editor.selection.restore() \r\n      editor.undo.saveStep() \r\n\r\n      if (editor.opts.iframe) editor.size.syncIframe() \r\n\r\n      // Mark changes in the original instance as well.\r\n      if (inst !== editor) {\r\n        inst.popups.hideAll() \r\n        inst.$el.find(inst.html.emptyBlockTagsQuery()).not('TD, TH, LI, .fr-inner').remove() \r\n        inst.html.wrap() \r\n        inst.html.fillEmptyBlocks() \r\n        inst.undo.saveStep() \r\n        inst.events.trigger('element.dropped') \r\n\r\n        if (inst.opts.iframe) inst.size.syncIframe() \r\n      }\r\n\r\n      editor.events.trigger('element.dropped', [$droppedEl]) \r\n\r\n      // Stop bubbling.\r\n\r\n      return false \r\n    }\r\n\r\n    // Save step when something else is dragged into the editor.\r\n    else {\r\n      if ($draggable_helper) $draggable_helper.removeClass('fr-visible') \r\n\r\n      if (!editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n      setTimeout(function () {\r\n        editor.undo.saveStep() \r\n      }, 0) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do cleanup when the html is taken.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Remove drag helper.\r\n    if (el && el.tagName === 'DIV' && editor.node.hasClass(el, 'fr-drag-helper')) {\r\n      el.parentNode.removeChild(el) \r\n    }\r\n\r\n    // Remove from nested elements too.\r\n    else if (el && el.nodeType === Node.ELEMENT_NODE) {\r\n      const els = el.querySelectorAll('div.fr-drag-helper') \r\n\r\n      for (let i = 0;  i < els.length;  i++) {\r\n        els[i].parentNode.removeChild(els[i]) \r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  let $draggable_helper \r\n\r\n  function _init() {\r\n\r\n    // Force drag inline when ENTER_BR is active.\r\n    if (editor.opts.enter === FE.ENTER_BR) editor.opts.dragInline = true \r\n\r\n    // Starting to drag.\r\n    editor.events.on('dragstart', _dragStart, true) \r\n\r\n    // Inline dragging is off.\r\n    editor.events.on('dragover', _dragOver, true) \r\n    editor.events.on('dragenter', _dragEnter, true) \r\n\r\n    // Document drop. Remove moving class.\r\n    editor.events.on('document.dragend', _documentDragEnd, true) \r\n    editor.events.on('document.drop', _documentDragEnd, true) \r\n\r\n    // Drop.\r\n    editor.events.on('drop', _drop, true) \r\n\r\n    // Clean getting the HTML.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js';\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  editInPopup: false\r\n})\r\n\r\nFE.MODULES.editInPopup = function (editor) {\r\n  function _initPopup() {\r\n\r\n    // Image buttons.\r\n    const txt = `<div id=\"fr-text-edit-${editor.id}\" class=\"fr-layer fr-text-edit-layer\"><div class=\"fr-input-line\"><input type=\"text\" placeholder=\"${editor.language.translate('Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"updateText\" tabIndex=\"2\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      edit: txt\r\n    }\r\n\r\n    editor.popups.create('text.edit', template)\r\n  }\r\n\r\n  function _showPopup() {\r\n    const $popup = editor.popups.get('text.edit')\r\n\r\n    let text\r\n\r\n    if (editor.el.tagName === 'INPUT') {\r\n      text = editor.$el.attr('placeholder')\r\n    }\r\n    else {\r\n      text = editor.$el.text()\r\n    }\r\n\r\n    $popup.find('input').val(text).trigger('change')\r\n    editor.popups.setContainer('text.edit', editor.$sc)\r\n    editor.popups.show('text.edit', editor.$el.offset().left + editor.$el.outerWidth() / 2, editor.$el.offset().top + editor.$el.outerHeight(), editor.$el.outerHeight())\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Show edit popup.\r\n    editor.events.$on(editor.$el, editor._mouseup, () => {\r\n      setTimeout(() => {\r\n        _showPopup()\r\n      }, 10)\r\n    })\r\n  }\r\n\r\n  function update() {\r\n    const $popup = editor.popups.get('text.edit')\r\n\r\n    let new_text = $popup.find('input').val()\r\n\r\n    if (new_text.length === 0) {\r\n      new_text = editor.opts.placeholderText\r\n    }\r\n\r\n    if (editor.el.tagName === 'INPUT') {\r\n      editor.$el.attr('placeholder', new_text)\r\n    }\r\n    else {\r\n      editor.$el.text(new_text)\r\n    }\r\n\r\n    editor.events.trigger('contentChanged')\r\n\r\n    editor.popups.hide('text.edit')\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  const _init = () => {\r\n    if (editor.opts.editInPopup) {\r\n      _initPopup()\r\n      _initEvents()\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    update\r\n  }\r\n}\r\n\r\nFE.RegisterCommand('updateText', {\r\n  focus: false,\r\n  undo: false,\r\n  callback() {\r\n    this.editInPopup.update()\r\n  }\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  emoticons: '[_BUTTONS_][_CUSTOM_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  emoticonsSet: [\r\n    {\r\n      'id': 'people',\r\n      'name': 'Smileys & People',\r\n      'code': '1f600',\r\n      'emoticons': [\r\n        { code: '1f600', desc: 'Grinning face' },\r\n        { code: '1f601', desc: 'Grinning Face with Smiling Eyes' },\r\n        { code: '1f602', desc: 'Face with Tears of Joy' },\r\n        { code: '1f603', desc: 'Smiling Face with Open Mouth' },\r\n        { code: '1f604', desc: 'Smiling Face with Open Mouth and Smiling Eyes' },\r\n        { code: '1f605', desc: 'Smiling Face with Open Mouth and Cold Sweat' },\r\n        { code: '1f606', desc: 'Smiling Face with Open Mouth and Tightly-Closed Eyes' },\r\n        { code: '1f609', desc: 'Winking Face' },\r\n        { code: '1f60a', desc: 'Smiling Face with Smiling Eyes' },\r\n        { code: '1f608', desc: 'Face Savouring Delicious Food' },\r\n        { code: '1f60e', desc: 'Smiling Face with Sunglasses' },\r\n        { code: '1f60d', desc: 'Smiling Face with Heart-Shaped Eyes' },\r\n        { code: '1f618', desc: 'Face Throwing a Kiss' },\r\n        { code: '1f617', desc: 'Kissing Face' },\r\n        { code: '1f619', desc: 'Kissing Face with Smiling Eyes' },\r\n        { code: '1f61a', desc: 'Kissing Face with Closed Eyes' },\r\n        { code: '263a', desc: 'White Smiling Face' },\r\n        { code: '1f642', desc: 'Slightly Smiling Face' },\r\n        { code: '1f610', desc: 'Neutral Face' },\r\n        { code: '1f611', desc: 'Expressionless Face' },\r\n        { code: '1f636', desc: 'Face Without Mouth' },\r\n        { code: '1f60f', desc: 'Smirking Face' },\r\n        { code: '1f623', desc: 'Persevering Face' },\r\n        { code: '1f625', desc: 'Disappointed but Relieved Face' },\r\n        { code: '1f62e', desc: 'Face with Open Mouth' },\r\n        { code: '1f62f', desc: 'Hushed Face' },\r\n        { code: '1f62a', desc: 'Sleepy Face' },\r\n        { code: '1f62b', desc: 'Tired Face' },\r\n        { code: '1f634', desc: 'Sleeping Face' },\r\n        { code: '1f60c', desc: 'Relieved Face' },\r\n        { code: '1f61b', desc: 'Face with Stuck-out Tongue' },\r\n        { code: '1f61c', desc: 'Face with Stuck-out Tongue and Winking Eye' },\r\n        { code: '1f61d', desc: 'Face with Stuck-out Tongue and Tightly-Closed Eyes' },\r\n        { code: '1f612', desc: 'Unamused Face' },\r\n        { code: '1f613', desc: 'Face with Cold Sweat' },\r\n        { code: '1f613', desc: 'Face with Cold Sweat' },\r\n        { code: '1f614', desc: 'Pensive Face' },\r\n        { code: '1f615', desc: 'Confused Face' },\r\n        { code: '1f632', desc: 'Astonished  Face' },\r\n        { code: '1f616', desc: 'Confounded Face' },\r\n        { code: '1f61e', desc: 'Disappointed Face' },\r\n        { code: '1f61f', desc: 'Worried Face' },\r\n        { code: '1f624', desc: 'Face with Look of Triumph' },\r\n        { code: '1f622', desc: 'Crying Face' },\r\n        { code: '1f62d', desc: 'Loudly Crying Face' },\r\n        { code: '1f626', desc: 'Frowning Face with Open Mouth' },\r\n        { code: '1f627', desc: 'Anguished Face' },\r\n        { code: '1f628', desc: 'Fearful Face' },\r\n        { code: '1f629', desc: 'Weary Face' },\r\n        { code: '1f62c', desc: 'Grimacing Face' },\r\n        { code: '1f630', desc: 'Face with Open Mouth and Cold Sweat' },\r\n        { code: '1f631', desc: 'Face Screaming in Fear' },\r\n        { code: '1f633', desc: 'Flushed Face' },\r\n        { code: '1f635', desc: 'Dizzy Face' },\r\n        { code: '1f621', desc: 'Pouting Face' },\r\n        { code: '1f620', desc: 'Angry Face' },\r\n        { code: '1f637', desc: 'Face with Medical Mask' },\r\n        { code: '1f607', desc: 'Smiling Face with Halo' },\r\n        { code: '1f608', desc: 'Smiling Face with Horns' },\r\n        { code: '1f47f', desc: 'Imp' },\r\n        { code: '1f479', desc: 'Japanese Ogre' },\r\n        { code: '1f47a', desc: 'Japanese Goblin' },\r\n        { code: '1f480', desc: 'Skull' },\r\n        { code: '1f47b', desc: 'Ghost' },\r\n        { code: '1f47d', desc: 'Extraterrestrial Alien' },\r\n        { code: '1f47e', desc: 'Alien Monster' },\r\n        { code: '1f4a9', desc: 'Pile of Poo' },\r\n        { code: '1f63a', desc: 'Smiling Cat Face with Open Mouth' },\r\n        { code: '1f638', desc: 'Grinning Cat Face with Smiling Eyes' },\r\n        { code: '1f639', desc: 'Cat Face with Tears of Joy' },\r\n        { code: '1f63b', desc: 'Smiling Cat Face with Heart-Shaped Eyes' },\r\n        { code: '1f63c', desc: 'Cat Face with Wry Smile' },\r\n        { code: '1f63d', desc: 'Kissing Cat Face with Closed Eyes' },\r\n        { code: '1f640', desc: 'Weary Cat Face' },\r\n        { code: '1f63f', desc: 'Crying Cat Face' },\r\n        { code: '1f63e', desc: 'Pouting Cat Face' },\r\n        { code: '1f648', desc: 'See-No-Evil Monkey' },\r\n        { code: '1f649', desc: 'Hear-No-Evil Monkey' },\r\n        { code: '1f64a', desc: 'Speak-No-Evil Monkey' },\r\n        { code: '1f476', desc: 'Baby' },\r\n        { code: '1f466', desc: 'Boy' },\r\n        { code: '1f467', desc: 'Girl' },\r\n        { code: '1f468', desc: 'Man' },\r\n        { code: '1f469', desc: 'Woman' },\r\n        { code: '1f474', desc: 'Older Man' },\r\n        { code: '1f475', desc: 'Older Woman' },\r\n        { code: '1f46e', desc: 'Police Officer' },\r\n        { code: '1f482', desc: ' Guardsman' },\r\n        { code: '1f477', desc: ' Construction Worker' },\r\n        { code: '1f478', desc: 'Princess' },\r\n        { code: '1f473', desc: 'Man with Turban' },\r\n        { code: '1f472', desc: 'Man with Gua Pi Mao' },\r\n        { code: '1f471', desc: 'Person with Blond Hair' },\r\n        { code: '1f470', desc: 'Bride with Veil' },\r\n        { code: '1f47c', desc: 'Baby Angel' },\r\n        { code: '1f385', desc: 'Father Christmas' },\r\n        { code: '1f64e', desc: 'Person with Pouting Face' },\r\n        { code: '1f645', desc: 'Face with No Good Gesture' },\r\n        { code: '1f646', desc: 'Face with Ok Gesture' },\r\n        { code: '1f481', desc: 'Information Desk Person' },\r\n        { code: '1f64b', desc: 'Happy Person Raising One Hand' },\r\n        { code: '1f647', desc: 'Person Bowing Deeply' },\r\n        { code: '1f486', desc: 'Face Massage' },\r\n        { code: '1f487', desc: 'Haircut' },\r\n        { code: '1f6b6', desc: 'Pedestrian' },\r\n        { code: '1f3c3', desc: 'Runner' },\r\n        { code: '1f483', desc: 'Dancer' },\r\n        { code: '1f46f', desc: 'Woman with Bunny Ears' },\r\n        { code: '1f6c0', desc: 'Bath' },\r\n        { code: '1f464', desc: 'Bust in Silhouette' },\r\n        { code: '1f465', desc: 'Busts in Silhouette' },\r\n        { code: '1f3c7', desc: 'Horse Racing' },\r\n        { code: '1f3c2', desc: ' Snowboarder' },\r\n        { code: '1f3c4', desc: ' Surfer' },\r\n        { code: '1f6a3', desc: ' Rowboat' },\r\n        { code: '1f3ca', desc: ' Swimmer' },\r\n        { code: '1f6b4', desc: ' Bicyclist' },\r\n        { code: '1f6b5', desc: 'Mountain Bicyclist' },\r\n        { code: '1f46b', desc: ' Man and Woman Holding Hands' },\r\n        { code: '1f46c', desc: 'Two Men Holding Hands' },\r\n        { code: '1f46d', desc: 'Two Women Holding Hands' },\r\n        { code: '1f48f', desc: 'Kiss' },\r\n        { code: '1f468-2764-1f48b-1f468', uCode: '\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68', desc: 'Man Kiss Man' },\r\n        { code: '1f469-2764-1f48b-1f469', uCode: '\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69', desc: 'Woman Kiss Woman' },\r\n        { code: '1f491', desc: 'Couple with Heart' },\r\n        { code: '1f468-2764-1f468', uCode: '\\uD83D\\uDC68\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC68', desc: 'Man Heart Man' },\r\n        { code: '1f469-2764-1f469', uCode: '\\uD83D\\uDC69\\u200D\\u2764\\uFE0F\\u200D\\uD83D\\uDC69', desc: 'Woman Heart Woman' },\r\n        { code: '1f46a', desc: 'Family' },\r\n        { code: '1f468', desc: 'Man Woman Boy' },\r\n        { code: '1f468-1f469-1f467', desc: 'Man Woman Girl' },\r\n        { code: '1f468-1f469-1f467-1f466', desc: 'Man Woman Girl Boy' },\r\n        { code: '1f468-1f469-1f466-1f466', desc: 'Man Woman Boy Boy' },\r\n        { code: '1f468-1f469-1f467-1f467', desc: 'Man Woman Girl Girl' },\r\n        { code: '1f468-1f468-1f466', desc: 'Man Man Boy' },\r\n        { code: '1f468-1f468-1f467', desc: 'Man Man Girl' },\r\n        { code: '1f468-1f468-1f467-1f466', desc: 'Man Man Girl Boy' },\r\n        { code: '1f468-1f468-1f466-1f466', desc: 'Man Man Boy Boy' },\r\n        { code: '1f469-1f469-1f466', desc: 'Woman Woman Boy' },\r\n        { code: '1f469-1f469-1f467', desc: 'Woman Woman Girl' },\r\n        { code: '1f469-1f469-1f467-1f466', desc: 'Woman Woman Girl Boy' },\r\n        { code: '1f469-1f469-1f467-1f467', desc: 'Woman Woman Girl Girl' },\r\n        { code: '1f4aa', desc: 'Flexed Biceps' },\r\n        { code: '1f448', desc: 'White Left Pointing Backhand Index' },\r\n        { code: '1f449', desc: 'White Right Pointing Backhand Index' },\r\n        { code: '1f446', desc: 'White Up Pointing Backhand Index' },\r\n        { code: '1f447', desc: 'White Down Pointing Backhand Index' },\r\n        { code: '270c', desc: 'Victory Hand' },\r\n        { code: '270b', desc: 'Raised Hand' },\r\n        { code: '1f44c', desc: 'Ok Hand Sign' },\r\n        { code: '1f44d', desc: 'Thumbs Up Sign' },\r\n        { code: '1f44e', desc: 'Thumbs Down Sign' },\r\n        { code: '270a', desc: 'Raised Fist' },\r\n        { code: '1f44a', desc: 'Fisted Hand Sign' },\r\n        { code: '1f44b', desc: 'Waving Hand Sign' },\r\n        { code: '1f44f', desc: 'Clapping Hands Sign' },\r\n        { code: '1f450', desc: 'Open  Hands Sign' },\r\n        { code: '1f64c', desc: 'Person Raising Both Hands in Celebration' },\r\n        { code: '1f64f', desc: 'Person with Folded Hands' },\r\n        { code: '1f485', desc: 'Nail Polish' },\r\n        { code: '1f442', desc: 'Ear' },\r\n        { code: '1f443', desc: 'Nose' },\r\n        { code: '1f463', desc: 'Footprints' },\r\n        { code: '1f440', desc: 'Eyes' },\r\n        { code: '1f445', desc: 'Tongue' },\r\n        { code: '1f444', desc: 'Mouth' },\r\n        { code: '1f48b', desc: 'Kiss Mark' },\r\n        { code: '1f498', desc: 'Heart with Arrow' },\r\n        { code: '2764', desc: 'Heavy Black Heart' },\r\n        { code: '1f493', desc: 'Heavy Black Heart' },\r\n        { code: '1f494', desc: 'Broken Heart' },\r\n        { code: '1f495', desc: 'Two Hearts' },\r\n        { code: '1f496', desc: 'Sparkling Hearts' },\r\n        { code: '1f497', desc: 'Growing Hearts' },\r\n        { code: '1f499', desc: 'Blue Heart' },\r\n        { code: '1f49a', desc: 'Green Heart' },\r\n        { code: '1f49b', desc: 'Yellow Heart' },\r\n        { code: '1f49c', desc: 'Purple Heart' },\r\n        { code: '1f49d', desc: 'Heart with Ribbon' },\r\n        { code: '1f49e', desc: 'Revolving Hearts' },\r\n        { code: '1f49f', desc: 'Heart Decoration' },\r\n        { code: '1f48c', desc: 'Love Letter' },\r\n        { code: '1f4a4', desc: 'Sleeping Symbol' },\r\n        { code: '1f4a2', desc: 'Anger Symbol' },\r\n        { code: '1f4a3', desc: 'Bomb' },\r\n        { code: '1f4a5', desc: 'Collision Symbol' },\r\n        { code: '1f4a6', desc: 'Splashing Sweat Symbol' },\r\n        { code: '1f4a8', desc: 'Dash Symbol' },\r\n        { code: '1f4ab', desc: 'Dizzy Symbol' },\r\n        { code: '1f4ab', desc: 'Dizzy Symbol' },\r\n        { code: '1f4ac', desc: 'Speech Balloon' },\r\n        { code: '1f4ad', desc: 'Thought Balloon' },\r\n        { code: '1f453', desc: 'Eyeglasses' },\r\n        { code: '1f454', desc: 'Necktie' },\r\n        { code: '1f455', desc: 'T-Shirt' },\r\n        { code: '1f456', desc: 'Jeans' },\r\n        { code: '1f457', desc: 'Dress' },\r\n        { code: '1f458', desc: 'Kimono' },\r\n        { code: '1f459', desc: 'Bikini' },\r\n        { code: '1f45a', desc: 'Womans Clothes' },\r\n        { code: '1f45b', desc: 'Purse' },\r\n        { code: '1f45c', desc: 'Handbag' },\r\n        { code: '1f45d', desc: 'Pouch' },\r\n        { code: '1f392', desc: 'School Satchel' },\r\n        { code: '1f45e', desc: 'Mans Shoe' },\r\n        { code: '1f45f', desc: 'Athletic Shoe' },\r\n        { code: '1f460', desc: 'High-Heeled Shoe' },\r\n        { code: '1f461', desc: 'Womans Sandal' },\r\n        { code: '1f462', desc: 'Womans Boots' },\r\n        { code: '1f451', desc: 'Crown' },\r\n        { code: '1f452', desc: 'Womans Hat' },\r\n        { code: '1f462', desc: 'Top Hat' },\r\n        { code: '1f393', desc: 'Graduation Cap' },\r\n        { code: '1f484', desc: 'Lipstick' },\r\n        { code: '1f48d', desc: 'Ring' },\r\n        { code: '1f48e', desc: 'Gem Stone' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'nature',\r\n      'name': 'Animals & Nature',\r\n      'code': '1F435',\r\n      'emoticons': [\r\n        { code: '1F435', desc: 'Monkey Face' },\r\n        { code: '1F412', desc: 'Monkey' },\r\n        { code: '1F436', desc: 'Dog Face' },\r\n        { code: '1F415', desc: 'Dog' },\r\n        { code: '1F429', desc: 'Poodle' },\r\n        { code: '1F43A', desc: 'Wolf Face' },\r\n        { code: '1F431', desc: 'Cat Face' },\r\n        { code: '1F408', desc: 'Cat' },\r\n        { code: '1F42F', desc: 'Tiger Face' },\r\n        { code: '1F405', desc: 'Tiger' },\r\n        { code: '1F406', desc: 'Leopard' },\r\n        { code: '1F434', desc: 'Horse Face' },\r\n        { code: '1F40E', desc: 'Horse' },\r\n        { code: '1F42E', desc: 'Cow Face' },\r\n        { code: '1F402', desc: 'Ox' },\r\n        { code: '1F403', desc: 'Water Buffalo' },\r\n        { code: '1F404', desc: 'Cow' },\r\n        { code: '1F437', desc: 'Pig Face' },\r\n        { code: '1F416', desc: 'Pig' },\r\n        { code: '1F417', desc: 'Boar' },\r\n        { code: '1F43D', desc: 'Pig Nose' },\r\n        { code: '1F40F', desc: 'Ram' },\r\n        { code: '1F411', desc: 'Sheep' },\r\n        { code: '1F410', desc: 'Goat' },\r\n        { code: '1F42A', desc: 'Dromedary Camel' },\r\n        { code: '1F42B', desc: 'Bactrian Camel' },\r\n        { code: '1F418', desc: 'Elephant' },\r\n        { code: '1F42D', desc: 'Mouse Face' },\r\n        { code: '1F401', desc: 'Mouse' },\r\n        { code: '1F400', desc: 'Rat' },\r\n        { code: '1F439', desc: 'Hamster Face' },\r\n        { code: '1F430', desc: 'Rabbit Face' },\r\n        { code: '1F407', desc: 'Rabbit' },\r\n        { code: '1F43B', desc: 'Bear Face' },\r\n        { code: '1F428', desc: 'Koala' },\r\n        { code: '1F43C', desc: 'Panda Face' },\r\n        { code: '1F43E', desc: 'Paw Prints' },\r\n        { code: '1F414', desc: 'Chicken' },\r\n        { code: '1F413', desc: 'Rooster' },\r\n        { code: '1F423', desc: 'Hatching Chick' },\r\n        { code: '1F424', desc: 'Baby Chick' },\r\n        { code: '1F425', desc: 'Front-Facing Baby Chick' },\r\n        { code: '1F426', desc: 'Bird' },\r\n        { code: '1F427', desc: 'Penguin' },\r\n        { code: '1F438', desc: 'Frog Face' },\r\n        { code: '1F40A', desc: 'Crocodile' },\r\n        { code: '1F422', desc: 'Turtle' },\r\n        { code: '1F40D', desc: 'Snake' },\r\n        { code: '1F432', desc: 'Dragon Face' },\r\n        { code: '1F409', desc: 'Dragon' },\r\n        { code: '1F433', desc: 'Spouting Whale' },\r\n        { code: '1F40B', desc: 'Whale' },\r\n        { code: '1F42C', desc: 'Dolphin' },\r\n        { code: '1F41F', desc: 'Fish' },\r\n        { code: '1F420', desc: 'Tropical Fish' },\r\n        { code: '1F421', desc: 'Blowfish' },\r\n        { code: '1F419', desc: 'Octopus' },\r\n        { code: '1F41A', desc: 'Spiral Shell' },\r\n        { code: '1F40C', desc: 'Snail' },\r\n        { code: '1F41B', desc: 'Bug' },\r\n        { code: '1F41C', desc: 'Ant' },\r\n        { code: '1F41D', desc: 'Honeybee' },\r\n        { code: '1F41E', desc: 'Lady Beetle' },\r\n        { code: '1F490', desc: 'Bouquet' },\r\n        { code: '1F338', desc: 'Cherry Blossom' },\r\n        { code: '1F4AE', desc: 'White Flower' },\r\n        { code: '1F339', desc: 'Rose' },\r\n        { code: '1F33A', desc: 'Hibiscus' },\r\n        { code: '1F33B', desc: 'Sunflower' },\r\n        { code: '1F33C', desc: 'Blossom' },\r\n        { code: '1F337', desc: 'Tulip' },\r\n        { code: '1F331', desc: 'Seedling' },\r\n        { code: '1F332', desc: 'Evergreen Tree' },\r\n        { code: '1F333', desc: 'Deciduous Tree' },\r\n        { code: '1F334', desc: 'Palm Tree' },\r\n        { code: '1F335', desc: 'Cactus' },\r\n        { code: '1F33E', desc: 'Ear of Rice' },\r\n        { code: '1F33F', desc: 'Herb' },\r\n        { code: '2618', desc: 'Four Leaf Clover' },\r\n        { code: '1F341', desc: 'Maple Leaf' },\r\n        { code: '1F342', desc: 'Fallen Leaf' },\r\n        { code: '1F343', desc: 'Leaf Fluttering in Wind' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'foods',\r\n      'name': 'Food & Drink',\r\n      'code': '1F347',\r\n      'emoticons': [\r\n        { code: '1F347', desc: 'Grapes' },\r\n        { code: '1F348', desc: 'Melon' },\r\n        { code: '1F349', desc: 'Watermelon' },\r\n        { code: '1F34A', desc: 'Tangerine' },\r\n        { code: '1F34B', desc: 'Lemon' },\r\n        { code: '1F34C', desc: 'Banana' },\r\n        { code: '1F34D', desc: 'Pineapple' },\r\n        { code: '1F34E', desc: 'Red Apple' },\r\n        { code: '1F34F', desc: 'Green Apple' },\r\n        { code: '1F350', desc: 'Pear' },\r\n        { code: '1F351', desc: 'Peach' },\r\n        { code: '1F352', desc: 'Cherries' },\r\n        { code: '1F353', desc: 'Strawberry' },\r\n        { code: '1F345', desc: 'Tomato' },\r\n        { code: '1F346', desc: 'Aubergine' },\r\n        { code: '1F33D', desc: 'Ear of Maize' },\r\n        { code: '1F344', desc: 'Mushroom' },\r\n        { code: '1F330', desc: 'Chestnut' },\r\n        { code: '1F35E', desc: 'Bread' },\r\n        { code: '1F356', desc: 'Meat on Bone' },\r\n        { code: '1F357', desc: 'Poultry Leg' },\r\n        { code: '1F354', desc: 'Hamburger' },\r\n        { code: '1F35F', desc: 'French Fries' },\r\n        { code: '1F355', desc: 'Slice of Pizza' },\r\n        { code: '1F373', desc: 'Cooking' },\r\n        { code: '1F372', desc: 'Pot of Food' },\r\n        { code: '1F371', desc: 'Bento Box' },\r\n        { code: '1F358', desc: 'Rice Cracker' },\r\n        { code: '1F359', desc: 'Rice Ball' },\r\n        { code: '1F35A', desc: 'Cooked Rice' },\r\n        { code: '1F35B', desc: 'Curry and Rice' },\r\n        { code: '1F35C', desc: 'Steaming Bowl' },\r\n        { code: '1F35D', desc: 'Spaghetti' },\r\n        { code: '1F360', desc: 'Roasted Sweet Potato' },\r\n        { code: '1F362', desc: 'Oden' },\r\n        { code: '1F363', desc: 'Sushi' },\r\n        { code: '1F364', desc: 'Fried Shrimp' },\r\n        { code: '1F365', desc: 'Fish Cake with Swirl Design' },\r\n        { code: '1F361', desc: 'Dango' },\r\n        { code: '1F366', desc: 'Soft Ice Cream' },\r\n        { code: '1F367', desc: 'Shaved Ice' },\r\n        { code: '1F368', desc: 'Ice Cream' },\r\n        { code: '1F369', desc: 'Doughnut' },\r\n        { code: '1F36A', desc: 'Cookie' },\r\n        { code: '1F382', desc: 'Birthday Cake' },\r\n        { code: '1F370', desc: 'Shortcake' },\r\n        { code: '1F36B', desc: 'Chocolate Bar' },\r\n        { code: '1F36C', desc: 'Candy' },\r\n        { code: '1F36D', desc: 'Lollipop' },\r\n        { code: '1F36E', desc: 'Custard' },\r\n        { code: '1F36F', desc: 'Honey Pot' },\r\n        { code: '1F37C', desc: 'Baby Bottle' },\r\n        { code: '2615', desc: 'Hot Beverage' },\r\n        { code: '1F375', desc: 'Teacup Without Handle' },\r\n        { code: '1F376', desc: 'Sake Bottle and Cup' },\r\n        { code: '1F377', desc: 'Wine Glass' },\r\n        { code: '1F378', desc: 'Cocktail Glass' },\r\n        { code: '1F379', desc: 'Tropical Drink' },\r\n        { code: '1F37A', desc: 'Beer Mug' },\r\n        { code: '1F37B', desc: 'Clinking Beer Mugs' },\r\n        { code: '1F374', desc: 'Fork and Knife' },\r\n        { code: '1F52A', desc: 'Hocho' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'activity',\r\n      'name': 'Activities',\r\n      'code': '1f383',\r\n      'emoticons': [\r\n        { code: '1f383', desc: ' Jack-O-Lantern' },\r\n        { code: '1f384', desc: 'Christmas Tree' },\r\n        { code: '1f386', desc: ' Fireworks' },\r\n        { code: '1f387', desc: 'Firework Sparkler' },\r\n        { code: '2728', desc: ' Sparkles' },\r\n        { code: '1f388', desc: 'Balloon' },\r\n        { code: '1f389', desc: 'Party Popper' },\r\n        { code: '1f38a', desc: 'Confetti Ball' },\r\n        { code: '1f38b', desc: 'Tanabata Tree' },\r\n        { code: '1f38d', desc: 'Pine Decoration' },\r\n        { code: '1f38e', desc: 'Japanese Dolls' },\r\n        { code: '1f38f', desc: 'Carp Streamer' },\r\n        { code: '1f390', desc: 'Wind Chime' },\r\n        { code: '1f391', desc: 'Moon Viewing Ceremony' },\r\n        { code: '1f380', desc: 'Ribbon' },\r\n        { code: '1f381', desc: 'Wrapped Present' },\r\n        { code: '1f3ab', desc: 'Ticket' },\r\n        { code: '1f3c6', desc: 'Trophy' },\r\n        { code: '1f388', desc: 'Balloon' },\r\n        { code: '26bd', desc: 'Soccer Ball' },\r\n        { code: '26be', desc: 'Baseball' },\r\n        { code: '1f3c0', desc: 'Basketball and Hoop' },\r\n        { code: '1f3c8', desc: 'American Football' },\r\n        { code: '1f3c9', desc: 'Rugby Football' },\r\n        { code: '1f3be', desc: 'Tennis Racquet and Ball' },\r\n        { code: '1f3b1', desc: 'Billiards' },\r\n        { code: '1f3b3', desc: 'Bowling' },\r\n        { code: '1f3af', desc: 'Direct Hit' },\r\n        { code: '26f3', desc: 'Flag in Hole' },\r\n        { code: '1f3a3', desc: 'Fishing Pole and Fish' },\r\n        { code: '1f3bd', desc: 'Running Shirt with Sash' },\r\n        { code: '1f3bf', desc: 'Ski and Ski Boot' },\r\n        { code: '1f3ae', desc: 'Video Game' },\r\n        { code: '1f3b2', desc: 'Game Die' },\r\n        { code: '2660', desc: 'Black Spade Suit' },\r\n        { code: '2665', desc: 'Black Heart SuiT' },\r\n        { code: '2666', desc: 'Black Diamond Suit' },\r\n        { code: '2663', desc: 'Black Club Suit' },\r\n        { code: '1f0cf', desc: 'Playing Card Black Joker' },\r\n        { code: '1f004', desc: 'Mahjong Tile Red Dragon' },\r\n        { code: '1f3b4', desc: 'Flower Playing Cards' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'places',\r\n      'name': 'Travel & Places',\r\n      'code': '1f30d',\r\n      'emoticons': [\r\n        { code: '1f30d', desc: 'Earth Globe Europe-Africa' },\r\n        { code: '1f30e', desc: 'Earth Globe Americas' },\r\n        { code: '1f30f', desc: 'Earth Globe Asia-Australia' },\r\n        { code: '1f310', desc: 'Globe with Meridians' },\r\n        { code: '1f5fe', desc: 'Silhouette of Japan' },\r\n        { code: '1f30b', desc: 'Volcano' },\r\n        { code: '1f5fb', desc: 'Mount Fuji' },\r\n        { code: '1f3e0', desc: 'House Building' },\r\n        { code: '1f3e1', desc: 'House with Garden' },\r\n        { code: '1f3e2', desc: 'Office Building' },\r\n        { code: '1f3e3', desc: 'Japanese Post Office' },\r\n        { code: '1f3e4', desc: 'European Post Office' },\r\n        { code: '1f3e5', desc: 'Hospital' },\r\n        { code: '1f3e6', desc: 'Bank' },\r\n        { code: '1f3e8', desc: 'Hotel' },\r\n        { code: '1f3e9', desc: 'Love Hotel' },\r\n        { code: '1f3ea', desc: 'Convenience Store' },\r\n        { code: '1f3eb', desc: 'School' },\r\n        { code: '1f3ec', desc: 'Department Store' },\r\n        { code: '1f3ed', desc: 'Factory' },\r\n        { code: '1f3ef', desc: 'Japanese Castle' },\r\n        { code: '1f3f0', desc: 'European Castle' },\r\n        { code: '1f492', desc: 'Wedding' },\r\n        { code: '1f5fc', desc: 'Tokyo Tower' },\r\n        { code: '1f5fd', desc: 'Statue of Liberty' },\r\n        { code: '26ea', desc: 'Church' },\r\n        { code: '26f2', desc: 'Fountain' },\r\n        { code: '26fa', desc: 'Tent' },\r\n        { code: '1f301', desc: 'Foggy' },\r\n        { code: '1f303', desc: 'Night with Stars' },\r\n        { code: '1f304', desc: 'Sunrise over Mountains' },\r\n        { code: '1f305', desc: 'Sunrise' },\r\n        { code: '1f306', desc: 'Cityscape at Dusk' },\r\n        { code: '1f307', desc: 'Sunset over Buildings' },\r\n        { code: '1f309', desc: 'Bridge at Night' },\r\n        { code: '2668', desc: 'Hot Springs' },\r\n        { code: '1f30c', desc: 'Milky Way' },\r\n        { code: '1f3a0', desc: 'Carousel Horse' },\r\n        { code: '1f3a1', desc: 'Ferris Wheel' },\r\n        { code: '1f3a2', desc: 'Roller Coaster' },\r\n        { code: '1f488', desc: 'Barber Pole' },\r\n        { code: '1f3aa', desc: 'Circus Tent' },\r\n        { code: '1f3ad', desc: 'Performing Arts' },\r\n        { code: '1f3a8', desc: 'Artist Palette' },\r\n        { code: '1f3b0', desc: 'Slot Machine' },\r\n        { code: '1f682', desc: 'Steam Locomotive' },\r\n        { code: '1f683', desc: 'Railway Car' },\r\n        { code: '1f684', desc: 'High-Speed Train' },\r\n        { code: '1f685', desc: 'High-Speed Train with Bullet Nose' },\r\n        { code: '1f686', desc: 'Train' },\r\n        { code: '1f687', desc: 'Metro' },\r\n        { code: '1f688', desc: 'Light Rail' },\r\n        { code: '1f689', desc: 'Station' },\r\n        { code: '1f68a', desc: 'Tram' },\r\n        { code: '1f69d', desc: 'Monorail' },\r\n        { code: '1f69e', desc: 'Mountain Railway' },\r\n        { code: '1f68b', desc: 'Tram Car' },\r\n        { code: '1f68c', desc: 'Bus' },\r\n        { code: '1f68d', desc: 'Oncoming Bus' },\r\n        { code: '1f68e', desc: 'Trolleybus' },\r\n        { code: '1f690', desc: 'Minibus' },\r\n        { code: '1f691', desc: 'Ambulance' },\r\n        { code: '1f692', desc: 'Fire Engine' },\r\n        { code: '1f693', desc: 'Police Car' },\r\n        { code: '1f694', desc: 'Oncoming Police Car' },\r\n        { code: '1f695', desc: 'Taxi' },\r\n        { code: '1f695', desc: 'Oncoming Taxi' },\r\n        { code: '1f697', desc: 'Automobile' },\r\n        { code: '1f698', desc: 'Oncoming Automobile' },\r\n        { code: '1f699', desc: 'Recreational Vehicle' },\r\n        { code: '1f69a', desc: 'Delivery Truck' },\r\n        { code: '1f69b', desc: 'Articulated Lorry' },\r\n        { code: '1f69c', desc: 'Tractor' },\r\n        { code: '1f6b2', desc: 'Bicycle' },\r\n        { code: '1f68f', desc: 'Bus Stop' },\r\n        { code: '26fd', desc: 'Fuel Pump' },\r\n        { code: '1f6a8', desc: 'Police Cars Revolving Light' },\r\n        { code: '1f6a5', desc: 'Horizontal Traffic Light' },\r\n        { code: '1f6a6', desc: 'Vertical Traffic Light' },\r\n        { code: '1f6a7', desc: 'Construction Sign' },\r\n        { code: '2693', desc: 'Anchor' },\r\n        { code: '26f5', desc: 'Sailboat' },\r\n        { code: '1f6a4', desc: 'Speedboat' },\r\n        { code: '1f6a2', desc: 'Ship' },\r\n        { code: '2708', desc: 'Airplane' },\r\n        { code: '1f4ba', desc: 'Seat' },\r\n        { code: '1f681', desc: 'Helicopter' },\r\n        { code: '1f69f', desc: 'Suspension Railway' },\r\n        { code: '1f6a0', desc: 'Mountain Cableway' },\r\n        { code: '1f6a1', desc: 'Aerial Tramway' },\r\n        { code: '1f680', desc: 'Rocket' },\r\n        { code: '1f6aa', desc: 'Door' },\r\n        { code: '1f6bd', desc: 'Toilet' },\r\n        { code: '1f6bf', desc: 'Shower' },\r\n        { code: '1f6c1', desc: 'Bathtub' },\r\n        { code: '231b', desc: 'Hourglass' },\r\n        { code: '23f3', desc: 'Hourglass with Flowing Sand' },\r\n        { code: '231a', desc: 'Watch' },\r\n        { code: '23f0', desc: 'Alarm Clock' },\r\n        { code: '1f55b', desc: 'Clock Face Twelve Oclock' },\r\n        { code: '1f567', desc: 'Clock Face Twelve-Thirty' },\r\n        { code: '1f550', desc: 'Clock Face One Oclock' },\r\n        { code: '1f55c', desc: 'Clock Face One-thirty' },\r\n        { code: '1f551', desc: 'Clock Face Two Oclock' },\r\n        { code: '1f55d', desc: 'Clock Face Two-thirty' },\r\n        { code: '1f552', desc: 'Clock Face Three Oclock' },\r\n        { code: '1f55e', desc: 'Clock Face Three-thirty' },\r\n        { code: '1f553', desc: 'Clock Face Four Oclock' },\r\n        { code: '1f55f', desc: 'Clock Face Four-thirty' },\r\n        { code: '1f554', desc: 'Clock Face Five Oclock' },\r\n        { code: '1f560', desc: 'Clock Face Five-thirty' },\r\n        { code: '1f555', desc: 'Clock Face Six Oclock' },\r\n        { code: '1f561', desc: 'Clock Face Six-thirty' },\r\n        { code: '1f556', desc: 'Clock Face Seven Oclock' },\r\n        { code: '1f562', desc: 'Clock Face Seven-thirty' },\r\n        { code: '1f557', desc: 'Clock Face Eight Oclock' },\r\n        { code: '1f563', desc: 'Clock Face Eight-thirty' },\r\n        { code: '1f558', desc: 'Clock Face Nine Oclock' },\r\n        { code: '1f564', desc: 'Clock Face Nine-thirty' },\r\n        { code: '1f559', desc: 'Clock Face Ten Oclock' },\r\n        { code: '1f565', desc: 'Clock Face Ten-thirty' },\r\n        { code: '1f55a', desc: 'Clock Face Eleven Oclock' },\r\n        { code: '1f566', desc: 'Clock Face Eleven-thirty' },\r\n        { code: '1f311', desc: 'New Moon Symbol' },\r\n        { code: '1f312', desc: 'Waxing Crescent Moon Symbol' },\r\n        { code: '1f313', desc: 'First Quarter Moon Symbol' },\r\n        { code: '1f314', desc: 'Waxing Gibbous Moon Symbol' },\r\n        { code: '1f315', desc: 'Full Moon Symbol' },\r\n        { code: '1f316', desc: 'Waning Gibbous Moon Symbol' },\r\n        { code: '1f317', desc: 'Last Quarter Moon Symbol' },\r\n        { code: '1f318', desc: 'Waning Crescent Moon Symbol' },\r\n        { code: '1f319', desc: 'Crescent Moon' },\r\n        { code: '1f31a', desc: 'New Moon with Face' },\r\n        { code: '1f31b', desc: 'First Quarter Moon with Face' },\r\n        { code: '1f31c', desc: 'Last Quarter Moon with Face' },\r\n        { code: '2600', desc: 'Black Sun with Rays' },\r\n        { code: '1f31d', desc: 'Full Moon with Face' },\r\n        { code: '1f31e', desc: 'Sun with Face' },\r\n        { code: '2b50', desc: 'White Medium Star' },\r\n        { code: '1f31f', desc: 'Glowing Star' },\r\n        { code: '1f320', desc: 'Shooting Star' },\r\n        { code: '2601', desc: 'Cloud' },\r\n        { code: '26c5', desc: 'Sun Behind Cloud' },\r\n        { code: '1f300', desc: 'Cyclone' },\r\n        { code: '1f308', desc: 'Rainbow' },\r\n        { code: '1f302', desc: 'Closed Umbrella' },\r\n        { code: '2614', desc: 'Umbrella with Rain Drops' },\r\n        { code: '26a1', desc: 'High Voltage Sign' },\r\n        { code: '2744', desc: 'Snowflake' },\r\n        { code: '2603', desc: 'Snowman Without Snow' },\r\n        { code: '1f525', desc: 'Fire' },\r\n        { code: '1f4a7', desc: 'Droplet' },\r\n        { code: '1F30A', desc: 'Water Wave' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'objects',\r\n      'name': 'Objects',\r\n      'code': '1F507',\r\n      'emoticons': [\r\n        { code: '1F507', desc: 'Speaker with Cancellation Stroke' },\r\n        { code: '1F508', desc: 'Speaker' },\r\n        { code: '1F509', desc: 'Speaker with One Sound Wave' },\r\n        { code: '1F50A', desc: 'Speaker with Three Sound Wave' },\r\n        { code: '1F4E2', desc: 'Public Address Loudspeaker' },\r\n        { code: '1F4E3', desc: 'Cheering Megaphone' },\r\n        { code: '1F4EF', desc: 'Postal Horn' },\r\n        { code: '1F514', desc: 'Bell' },\r\n        { code: '1F515', desc: 'Bell with Cancellation Stroke' },\r\n        { code: '1F3BC', desc: 'Musical Score' },\r\n        { code: '1F3B5', desc: 'Musical Note' },\r\n        { code: '1F3B6', desc: 'Multiple Musical Notes' },\r\n        { code: '1F3A4', desc: 'Microphone' },\r\n        { code: '1F3A7', desc: 'Headphone' },\r\n        { code: '1F4FB', desc: 'Radio' },\r\n        { code: '1F3B7', desc: 'Saxophone' },\r\n        { code: '1F3B8', desc: 'Guitar' },\r\n        { code: '1F3B9', desc: 'Musical Keyboard' },\r\n        { code: '1F3BA', desc: 'Trumpet' },\r\n        { code: '1F3BB', desc: 'Violin' },\r\n        { code: '1F4F1', desc: 'Mobile Phone' },\r\n        { code: '1F4F2', desc: 'Mobile Phone with Rightwards Arrow at Left' },\r\n        { code: '260E', desc: 'Black Telephone' },\r\n        { code: '1F4DE', desc: 'Telephone Receiver' },\r\n        { code: '1F4DF', desc: 'Pager' },\r\n        { code: '1F4E0', desc: 'Fax Machine' },\r\n        { code: '1F50B', desc: 'Battery' },\r\n        { code: '1F50C', desc: 'Electric Plug' },\r\n        { code: '1F4BB', desc: 'Personal Computer' },\r\n        { code: '1F4BD', desc: 'Minidisc' },\r\n        { code: '1F4BE', desc: 'Floppy Disk' },\r\n        { code: '1F4BF', desc: 'Optical Disk' },\r\n        { code: '1F4C0', desc: 'Dvd' },\r\n        { code: '1F3A5', desc: 'Movie Camera' },\r\n        { code: '1F3AC', desc: 'Clapper Board' },\r\n        { code: '1F4FA', desc: 'Television' },\r\n        { code: '1F4F7', desc: 'Camera' },\r\n        { code: '1F4F9', desc: 'Video Camera' },\r\n        { code: '1F4FC', desc: 'Videocassette' },\r\n        { code: '1F50D', desc: 'Left-Pointing Magnifying Glass' },\r\n        { code: '1F50E', desc: 'Right-Pointing Magnifying Glass' },\r\n        { code: '1F52C', desc: 'Microscope' },\r\n        { code: '1F52D', desc: 'Telelscope' },\r\n        { code: '1F4E1', desc: 'Satellite Antenna' },\r\n        { code: '1F4A1', desc: 'Electric Light Bulb' },\r\n        { code: '1F526', desc: 'Electric Torch' },\r\n        { code: '1F3EE', desc: 'Izakaya Lantern' },\r\n        { code: '1F4D4', desc: 'Notebook with Decorative Cover' },\r\n        { code: '1F4D5', desc: 'Closed Book' },\r\n        { code: '1F4D6', desc: 'Open Book' },\r\n        { code: '1F4D7', desc: 'Green Book' },\r\n        { code: '1F4D8', desc: 'Blue Book' },\r\n        { code: '1F4D9', desc: 'Orange Book' },\r\n        { code: '1F4DA', desc: 'Books' },\r\n        { code: '1F4D3', desc: 'Notebook' },\r\n        { code: '1F4D2', desc: 'Ledger' },\r\n        { code: '1F4C3', desc: 'Curl' },\r\n        { code: '1F4DC', desc: 'Scroll' },\r\n        { code: '1F4C4', desc: 'Page Facing Up' },\r\n        { code: '1F4F0', desc: 'Newspaper' },\r\n        { code: '1F4D1', desc: 'Bookmark Tabs' },\r\n        { code: '1F516', desc: 'Bookmark' },\r\n        { code: '1F4B0', desc: 'Money Bag' },\r\n        { code: '1F4B4', desc: 'Banknote with Yen Sign' },\r\n        { code: '1F4B5', desc: 'Banknote with Dollar Sign' },\r\n        { code: '1F4B6', desc: 'Banknote with Euro Sign' },\r\n        { code: '1F4B7', desc: 'Banknote with Pound Sign' },\r\n        { code: '1F4B8', desc: 'Money with Wings' },\r\n        { code: '1F4B3', desc: 'Credit Card' },\r\n        { code: '1F4B9', desc: 'Chart with Upwards Trend and Yen Sign' },\r\n        { code: '1F4B1', desc: 'Currency Exchange' },\r\n        { code: '1F4B2', desc: 'Heavy Dollar Sign' },\r\n        { code: '2709', desc: 'Envelope' },\r\n        { code: '1F4E7', desc: 'E-Mail Symbol' },\r\n        { code: '1F4E8', desc: 'Incoming Envelope' },\r\n        { code: '1F4E9', desc: 'Envelope with Downwards Arrow Above' },\r\n        { code: '1F4E4', desc: 'Outbox Tray' },\r\n        { code: '1F4E5', desc: 'Inbox Tray' },\r\n        { code: '1F4E6', desc: 'Package' },\r\n        { code: '1F4BE', desc: 'Closed Mailbox with Raised Flag' },\r\n        { code: '1F4EA', desc: 'Closed Mailbox with Lowered Flag' },\r\n        { code: '1F4EC', desc: 'Open Mailbox with Raised Flag' },\r\n        { code: '1F4ED', desc: 'Open Mailbox with Lowered Flag' },\r\n        { code: '1F5F3', desc: 'Postbox' },\r\n        { code: '270F', desc: 'Pencil' },\r\n        { code: '2712', desc: 'Black Nib' },\r\n        { code: '1F4DD', desc: 'Memo' },\r\n        { code: '1F4BC', desc: 'Briefcase' },\r\n        { code: '1F4C1', desc: 'File Folder' },\r\n        { code: '1F4C2', desc: 'Open File Folder' },\r\n        { code: '1F4C5', desc: 'Calender' },\r\n        { code: '1F4C6', desc: 'Tear-off Calender' },\r\n        { code: '1F4C7', desc: 'Card Index' },\r\n        { code: '1F4C8', desc: 'Chart with Upwards Trend' },\r\n        { code: '1F4C9', desc: 'Chart with Downwards Trend' },\r\n        { code: '1F4CA', desc: 'Bar Chart' },\r\n        { code: '1F4CB', desc: 'Clipboard' },\r\n        { code: '1F4CC', desc: 'Pushpin' },\r\n        { code: '1F4CD', desc: 'Round Pushpin' },\r\n        { code: '1F4CE', desc: 'Paperclip' },\r\n        { code: '1F4CF', desc: 'Straight Ruler' },\r\n        { code: '1F4D0', desc: 'Triangular Ruler' },\r\n        { code: '2702', desc: 'Black Scissors' },\r\n        { code: '1F512', desc: 'Lock' },\r\n        { code: '1F513', desc: 'Open Lock' },\r\n        { code: '1F50F', desc: 'Lock with Ink Pen' },\r\n        { code: '1F510', desc: 'Closed Lock with Key' },\r\n        { code: '1F511', desc: 'Key' },\r\n        { code: '1F528', desc: 'Hammer' },\r\n        { code: '1F52B', desc: 'Pistol' },\r\n        { code: '1F527', desc: 'Wrench' },\r\n        { code: '1F529', desc: 'Nut and Bolt' },\r\n        { code: '1F517', desc: 'Link Symbol' },\r\n        { code: '1F489', desc: 'Syringe' },\r\n        { code: '1F48A', desc: 'Pill' },\r\n        { code: '1F6AC', desc: 'Smoking Symbol' },\r\n        { code: '1F5FF', desc: 'Moyai' },\r\n        { code: '1F52E', desc: 'Crystal Ball' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'symbols',\r\n      'name': 'Symbols',\r\n      'code': '1F3E7',\r\n      'emoticons': [\r\n        { code: '1F3E7', desc: 'Automated Teller Machine' },\r\n        { code: '1F6AE', desc: 'Put Litter in Its Place Symbol' },\r\n        { code: '1F6B0', desc: 'Potable Water Symbol' },\r\n        { code: '267F', desc: 'Wheelchair Symbol' },\r\n        { code: '1F6B9', desc: 'Mens Symbol' },\r\n        { code: '1F6BA', desc: 'Womens Symbol' },\r\n        { code: '1F6BB', desc: 'Restroom' },\r\n        { code: '1F6BC', desc: 'Baby Symbol' },\r\n        { code: '1F6BE', desc: 'Water Closet' },\r\n        { code: '1F6C2', desc: 'Passport Control' },\r\n        { code: '1F6C3', desc: 'Customs' },\r\n        { code: '1F6C4', desc: 'Baggage Claim' },\r\n        { code: '1F6C5', desc: 'Left Luggage' },\r\n        { code: '26A0', desc: 'Warning Sign' },\r\n        { code: '1F6B8', desc: 'Children Crossing' },\r\n        { code: '26D4', desc: 'No Entry' },\r\n        { code: '1F6AB', desc: 'No Entry Sign' },\r\n        { code: '1F6B3', desc: 'No Bicycles' },\r\n        { code: '1F6AD', desc: 'No Smoking Symbol' },\r\n        { code: '1F6AF', desc: 'Do Not Litter Symbol' },\r\n        { code: '1F6B1', desc: 'Non-Potable Water Symbol' },\r\n        { code: '1F6B7', desc: 'No Pedestrians' },\r\n        { code: '1F4F5', desc: 'No Mobile Phones' },\r\n        { code: '1F51E', desc: 'No One Under Eighteen Symbol' },\r\n        { code: '2B06', desc: 'Upwards Black Arrow' },\r\n        { code: '2197', desc: 'North East Arrow' },\r\n        { code: '27A1', desc: 'Black Rightwards Arrow' },\r\n        { code: '2198', desc: 'South East Arrow' },\r\n        { code: '2B07', desc: 'Downwards Black Arrow' },\r\n        { code: '2199', desc: 'South West Arrow' },\r\n        { code: '2B05', desc: 'Leftwards Black Arrow' },\r\n        { code: '2196', desc: 'North West Arrow' },\r\n        { code: '2195', desc: 'Up Down Arrow' },\r\n        { code: '2194', desc: 'Left Right Arrow' },\r\n        { code: '21A9', desc: 'Leftwards Arrow with Hook' },\r\n        { code: '21AA', desc: 'Rightwards Arrow with Hook' },\r\n        { code: '2934', desc: 'Arrow Pointing Rightwards Then Curving Upwards' },\r\n        { code: '2935', desc: 'Arrow Pointing Rightwards Then Curving Downwards' },\r\n        { code: '1F503', desc: 'Clockwise Downwards and Upwards Open Circle Arrows' },\r\n        { code: '1F504', desc: 'Anticlockwise Downwards and Upwards Open Circle Arrows' },\r\n        { code: '1F519', desc: 'Back with Leftwards Arrow Above' },\r\n        { code: '1F51A', desc: 'End with Leftwards Arrow Above' },\r\n        { code: '1F51B', desc: 'On with Exclamation Mark with Left Right Arrow Above' },\r\n        { code: '1F51C', desc: 'Soon with Rightwards Arrow Above' },\r\n        { code: '1F51D', desc: 'Top with Upwards Arrow Above' },\r\n        { code: '1F52F', desc: 'Six Pointed Star with Middle Dot' },\r\n        { code: '2648', desc: 'Aries' },\r\n        { code: '2649', desc: 'Taurus' },\r\n        { code: '264A', desc: 'Gemini' },\r\n        { code: '264B', desc: 'Cancer' },\r\n        { code: '264C', desc: 'Leo' },\r\n        { code: '264D', desc: 'Virgo' },\r\n        { code: '264E', desc: 'Libra' },\r\n        { code: '264F', desc: 'Scorpius' },\r\n        { code: '2650', desc: 'Sagittarius' },\r\n        { code: '2651', desc: 'Capricorn' },\r\n        { code: '2652', desc: 'Aquarius' },\r\n        { code: '2653', desc: 'Pisces' },\r\n        { code: '26CE', desc: 'Ophiuchus' },\r\n        { code: '1F500', desc: 'Twisted Rightwards Arrows' },\r\n        { code: '1F501', desc: 'Clockwise Rightwards and Leftwards Open Circle Arrows' },\r\n        { code: '1F502', desc: 'Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay' },\r\n        { code: '25B6', desc: 'Black Right-Pointing Triangle' },\r\n        { code: '23E9', desc: 'Black Right-Pointing Double Triangle' },\r\n        { code: '25C0', desc: 'Black Left-Pointing Triangle' },\r\n        { code: '23EA', desc: 'Black Left-Pointing Double Triangle' },\r\n        { code: '1F53C', desc: 'Up-Pointing Small Red Triangle' },\r\n        { code: '23EB', desc: 'Black Up-Pointing Double Triangle' },\r\n        { code: '1F53D', desc: 'Down-Pointing Small Red Triangle' },\r\n        { code: '23EC', desc: 'Black Down-Pointing Double Triangle' },\r\n        { code: '1F3A6', desc: 'Cinema' },\r\n        { code: '1F505', desc: 'Low Brightness Symbol' },\r\n        { code: '1F506', desc: 'High Brightness Symbol' },\r\n        { code: '1F4F6', desc: 'Antenna with Bars' },\r\n        { code: '1F4F3', desc: 'Vibration Mode' },\r\n        { code: '1F4F4', desc: 'Mobile Phone off' },\r\n        { code: '267B', desc: 'Black Universal Recycling Symbol' },\r\n        { code: '1F531', desc: 'Trident Emblem' },\r\n        { code: '1F4DB', desc: 'Name Badge' },\r\n        { code: '1F530', desc: 'Japanese Symbol for Beginner' },\r\n        { code: '2B55', desc: 'Heavy Large Circle' },\r\n        { code: '2705', desc: 'White Heavy Check Mark' },\r\n        { code: '2611', desc: 'Ballot Box with Check' },\r\n        { code: '2714', desc: 'Heavy Check Mark' },\r\n        { code: '2716', desc: 'Heavy Multiplication X' },\r\n        { code: '274C', desc: 'Cross Mark' },\r\n        { code: '274E', desc: 'Negative Squared Cross Mark' },\r\n        { code: '2795', desc: 'Heavy Plus Sign' },\r\n        { code: '2796', desc: 'Heavy Minus Sign' },\r\n        { code: '2797', desc: 'Heavy Division Sign' },\r\n        { code: '27B0', desc: 'Curly Loop' },\r\n        { code: '27BF', desc: 'Double Curly Loop' },\r\n        { code: '303D', desc: 'Part Alternation Mark' },\r\n        { code: '2733', desc: 'Eight Spoked Asterisk' },\r\n        { code: '2734', desc: 'Eight Pointed Black Star' },\r\n        { code: '2747', desc: 'Sparkle' },\r\n        { code: '203C', desc: 'Double Exclamation Mark' },\r\n        { code: '2049', desc: 'Exclamation Question Mark' },\r\n        { code: '2753', desc: 'Black Question Mark Ornament' },\r\n        { code: '2754', desc: 'White Question Mark Ornament' },\r\n        { code: '2755', desc: 'White Exclamation Mark Ornament' },\r\n        { code: '2757', desc: 'Heavy Exclamation Mark Symbol' },\r\n        { code: '3030', desc: 'Wavy Dash' },\r\n        { code: '2122', desc: 'Trade Mark Sign' },\r\n        { code: '1F51F', desc: 'Keycap Ten' },\r\n        { code: '1F4AF', desc: 'Hundred Points Symbol' },\r\n        { code: '1F520', desc: 'Input Symbol for Latin Capital Letters' },\r\n        { code: '1F521', desc: 'Input Symbol for Latin Small Letters' },\r\n        { code: '1F522', desc: 'Input Symbol for Numbers' },\r\n        { code: '1F523', desc: 'Input Symbol for Symbols' },\r\n        { code: '1F524', desc: 'Input Symbol for Latin Letters' },\r\n        { code: '1F170', desc: 'Negative Squared Latin Capital Letter a' },\r\n        { code: '1F18E', desc: 'Negative Squared Ab' },\r\n        { code: '1F171', desc: 'Negative Squared Latin Capital Letter B' },\r\n        { code: '1F191', desc: 'Squared Cl' },\r\n        { code: '1F192', desc: 'Squared Cool' },\r\n        { code: '1F193', desc: 'Squared Free' },\r\n        { code: '2139', desc: 'Information Source' },\r\n        { code: '1F194', desc: 'Squared Id' },\r\n        { code: '24C2', desc: 'Circled Latin Capital Letter M' },\r\n        { code: '1F195', desc: 'Squared New' },\r\n        { code: '1F196', desc: 'Squared Ng' },\r\n        { code: '1F17E', desc: 'Negative Squared Latin Capital Letter O' },\r\n        { code: '1F197', desc: 'Squared Ok' },\r\n        { code: '1F17F', desc: 'Negative Squared Latin Capital Letter P' },\r\n        { code: '1F198', desc: 'Squared Sos' },\r\n        { code: '1F199', desc: 'Squared Up with Exclamation Mark' },\r\n        { code: '1F19A', desc: 'Squared Vs' },\r\n        { code: '1F201', desc: 'Squared Katakana Koko' },\r\n        { code: '1F202', desc: 'Squared Katakana Sa' },\r\n        { code: '1F237', desc: 'Squared Cjk Unified Ideograph-6708' },\r\n        { code: '1F236', desc: 'Squared Cjk Unified Ideograph-6709' },\r\n        { code: '1F22F', desc: 'Squared Cjk Unified Ideograph-6307' },\r\n        { code: '1F250', desc: 'Circled Ideograph Advantage' },\r\n        { code: '1F239', desc: 'Squared Cjk Unified Ideograph-5272' },\r\n        { code: '1F21A', desc: 'Squared Cjk Unified Ideograph-7121' },\r\n        { code: '1F232', desc: 'Squared Cjk Unified Ideograph-7981' },\r\n        { code: '1F251', desc: 'Circled Ideograph Accept' },\r\n        { code: '1F238', desc: 'Squared Cjk Unified Ideograph-7533' },\r\n        { code: '1F234', desc: 'Squared Cjk Unified Ideograph-5408' },\r\n        { code: '1F233', desc: 'Squared Cjk Unified Ideograph-7a7a' },\r\n        { code: '3297', desc: 'Circled Ideograph Congratulation' },\r\n        { code: '3299', desc: 'Circled Ideograph Secret' },\r\n        { code: '1F23A', desc: 'Squared Cjk Unified Ideograph-55b6' },\r\n        { code: '1F235', desc: 'Squared Cjk Unified Ideograph-6e80' },\r\n        { code: '25AA', desc: 'Black Small Square' },\r\n        { code: '25AB', desc: 'White Small Square' },\r\n        { code: '25FB', desc: 'White Medium Square' },\r\n        { code: '25FC', desc: 'Black Medium Square' },\r\n        { code: '25FD', desc: 'White Medium Small Square' },\r\n        { code: '25FE', desc: 'Black Medium Small Square' },\r\n        { code: '2B1B', desc: 'Black Large Square' },\r\n        { code: '2B1C', desc: 'White Large Square' },\r\n        { code: '1F536', desc: 'Large Orange Diamond' },\r\n        { code: '1F537', desc: 'Large Blue Diamond' },\r\n        { code: '1F538', desc: 'Small Orange Diamond' },\r\n        { code: '1F539', desc: 'Small Blue Diamond' },\r\n        { code: '1F53A', desc: 'Up-Pointing Red Triangle' },\r\n        { code: '1F53B', desc: 'Down-Pointing Red Triangle' },\r\n        { code: '1F4A0', desc: 'Diamond Shape with a Dot Inside' },\r\n        { code: '1F518', desc: 'Radio Button' },\r\n        { code: '1F532', desc: 'Black Square Button' },\r\n        { code: '1F533', desc: 'White Square Button' },\r\n        { code: '26AA', desc: 'Medium White Circle' },\r\n        { code: '26AB', desc: 'Medium Black Circle' },\r\n        { code: '1F534', desc: 'Large Red Circle' },\r\n        { code: '1F535', desc: 'Large Blue Circle' }\r\n      ]\r\n    },\r\n    {\r\n      'id': 'flags',\r\n      'name': 'Flags',\r\n      'code': '1F3C1',\r\n      'emoticons': [\r\n        { code: '1f3c1', desc: 'Chequered Flag' },\r\n        { code: '1f1e8-1f1f3', desc: 'China Flag' },\r\n        { code: '1f38c', desc: 'Crossed Flags' },\r\n        { code: '1f1e9-1f1ea', desc: 'Germany Flag' },\r\n        { code: '1f1ea-1f1f8', desc: 'Spain Flag' },\r\n        { code: '1f1e6-1f1e8', desc: 'Ascension Island Flag' },\r\n        { code: '1f1e6-1f1e9', desc: 'Andorra Flag' },\r\n        { code: '1f1e6-1f1ea', desc: 'United Arab Emirates Flag' },\r\n        { code: '1f1e6-1f1eb', desc: 'Afghanistan Flag' },\r\n        { code: '1f1e6-1f1ec', desc: 'Antigua & Barbuda Flag' },\r\n        { code: '1f1e6-1f1ee', desc: 'Anguilla Flag' },\r\n        { code: '1f1e6-1f1f1', desc: 'Albania Flag' },\r\n        { code: '1f1e6-1f1f2', desc: 'Armenia Flag' },\r\n        { code: '1f1e6-1f1f4', desc: 'Angola Flag' },\r\n        { code: '1f1e6-1f1f6', desc: 'Antarctica Flag' },\r\n        { code: '1f1e6-1f1f7', desc: 'Argentina Flag' },\r\n        { code: '1f1e6-1f1f8', desc: 'American Samoa Flag' },\r\n        { code: '1f1e6-1f1f9', desc: 'Austria Flag' },\r\n        { code: '1f1e6-1f1fa', desc: 'Australia Flag' },\r\n        { code: '1f1e6-1f1fc', desc: 'Aruba Flag' },\r\n        { code: '1f1e6-1f1fd', desc: 'Åland Islands Flag' },\r\n        { code: '1f1e6-1f1ff', desc: 'Azerbaijan Flag' },\r\n        { code: '1f1e7-1f1e7', desc: 'Barbados Flag' },\r\n        { code: '1f1e7-1f1e9', desc: 'Bangladesh Flag' },\r\n        { code: '1f1e7-1f1ea', desc: 'Belgium Flag' },\r\n        { code: '1f1e7-1f1eb', desc: 'Burkina Faso Flag' },\r\n        { code: '1f1e7-1f1ec', desc: 'Bulgaria Flag' },\r\n        { code: '1f1e7-1f1ed', desc: 'Bahrain Flag' },\r\n        { code: '1f1e7-1f1ee', desc: 'Burundi Flag' },\r\n        { code: '1f1e7-1f1ef', desc: 'Benin Flag' },\r\n        { code: '1f1e7-1f1f1', desc: 'St. Barthélemy Flag' },\r\n        { code: '1f1e7-1f1f2', desc: 'Bermuda Flag' },\r\n        { code: '1f1e7-1f1f4', desc: 'Bolivia Flag' },\r\n        { code: '1f1e7-1f1f6', desc: 'Caribbean Netherlands Flag' },\r\n        { code: '1f1e7-1f1f7', desc: 'Brazil Flag' },\r\n        { code: '1f1e7-1f1f8', desc: 'Bahamas Flag' },\r\n        { code: '1f1e7-1f1f9', desc: 'Bhutan Flag' },\r\n        { code: '1f1e7-1f1fb', desc: 'Bouvet Island Flag' },\r\n        { code: '1f1e7-1f1fc', desc: 'Botswana Flag' },\r\n        { code: '1f1e7-1f1fe', desc: 'Belarus Flag' },\r\n        { code: '1f1e7-1f1ff', desc: 'Belize Flag' },\r\n        { code: '1f1e8-1f1e6', desc: 'Canada Flag' },\r\n        { code: '1f1e8-1f1e8', desc: 'Cocos (keeling) Islands Flag' },\r\n        { code: '1f1e8-1f1e9', desc: 'Congo - Kinshasa Flag' },\r\n        { code: '1f1e8-1f1eb', desc: 'Central African Republic Flag' },\r\n        { code: '1f1e8-1f1ec', desc: 'Congo - Brazzaville Flag' },\r\n        { code: '1f1e8-1f1ed', desc: 'Switzerland Flag' },\r\n        { code: '1f1e8-1f1ee', desc: 'Côte D’ivoire Flag' },\r\n        { code: '1f1e8-1f1f0', desc: 'Cook Islands Flag' },\r\n        { code: '1f1e8-1f1f1', desc: 'Chile Flag' },\r\n        { code: '1f1e8-1f1f2', desc: 'Cameroon Flag' },\r\n        { code: '1f1e8-1f1f4', desc: 'Colombia Flag' },\r\n        { code: '1f1e8-1f1f7', desc: 'Costa Rica Flag' },\r\n        { code: '1f1e8-1f1fa', desc: 'Cuba Flag' },\r\n        { code: '1f1e8-1f1fb', desc: 'Cape Verde Flag' },\r\n        { code: '1f1e8-1f1fc', desc: 'Curaçao Flag' },\r\n        { code: '1f1e8-1f1fd', desc: 'Christmas Island Flag' },\r\n        { code: '1f1e8-1f1fe', desc: 'Cyprus Flag' },\r\n        { code: '1f1e8-1f1ff', desc: 'Czechia Flag\"' },\r\n        { code: '1f1e9-1f1ec', desc: 'Diego Garcia Flag' },\r\n        { code: '1f1e9-1f1ef', desc: 'Djibouti Flag' },\r\n        { code: '1f1e9-1f1f0', desc: 'Denmark Flag' },\r\n        { code: '1f1e9-1f1f2', desc: 'Dominica Flag' },\r\n        { code: '1f1e9-1f1f4', desc: 'Dominican Republic Flag' },\r\n        { code: '1f1e9-1f1ff', desc: 'Algeria Flag' },\r\n        { code: '1f1ea-1f1e6', desc: 'Ceuta & Melilla Flag' },\r\n        { code: '1f1ea-1f1e8', desc: 'Ecuador Flag' },\r\n        { code: '1f1ea-1f1ea', desc: 'Estonia Flag' },\r\n        { code: '1f1ea-1f1ec', desc: 'Egypt Flag' },\r\n        { code: '1f1ea-1f1ed', desc: 'Western Sahara Flag' },\r\n        { code: '1f1ea-1f1f7', desc: 'Eritrea Flag' },\r\n        { code: '1f1ea-1f1f9', desc: 'Ethiopia Flag' },\r\n        { code: '1f1ea-1f1fa', desc: 'European Union Flag' },\r\n        { code: '1f1eb-1f1ee', desc: 'Finland Flag' },\r\n        { code: '1f1eb-1f1ef', desc: 'Fiji Flag' },\r\n        { code: '1f1eb-1f1f0', desc: 'Falkland Islands Flag' },\r\n        { code: '1f1eb-1f1f2', desc: 'Micronesia Flag' },\r\n        { code: '1f1eb-1f1f4', desc: 'Faroe Islands Flag' },\r\n        { code: '1f1ec-1f1e6', desc: 'Gabon Flag' },\r\n        { code: '1f1ec-1f1e9', desc: 'Grenada Flag' },\r\n        { code: '1f1ec-1f1ea', desc: 'Georgia Flag' },\r\n        { code: '1f1ec-1f1eb', desc: 'French Guiana Flag' },\r\n        { code: '1f1ec-1f1ec', desc: 'Guernsey Flag' },\r\n        { code: '1f1ec-1f1ed', desc: 'Ghana Flag' },\r\n        { code: '1f1ec-1f1ee', desc: 'Gibraltar Flag' },\r\n        { code: '1f1ec-1f1f1', desc: 'Greenland Flag' },\r\n        { code: '1f1ec-1f1f2', desc: 'Gambia Flag' },\r\n        { code: '1f1ec-1f1f3', desc: 'Guinea Flag' },\r\n        { code: '1f1ec-1f1f5', desc: 'Guadeloupe Flag' },\r\n        { code: '1f1ec-1f1f6', desc: 'Equatorial Guinea Flag' },\r\n        { code: '1f1ec-1f1f7', desc: 'Greece Flag' },\r\n        { code: '1f1ec-1f1f8', desc: 'South Georgia & South Sandwich Islands Flag' },\r\n        { code: '1f1ec-1f1f9', desc: 'Guatemala Flag' },\r\n        { code: '1f1ec-1f1fa', desc: 'Guam Flag' },\r\n        { code: '1f1ec-1f1fc', desc: 'Guinea-Bissau Flag' },\r\n        { code: '1f1ec-1f1fe', desc: 'Guyana Flag' },\r\n        { code: '1f1ed-1f1f0', desc: 'Hong Kong Sar China Flag' },\r\n        { code: '1f1ed-1f1f2', desc: 'Heard & Mcdonald Islands Flag' },\r\n        { code: '1f1ed-1f1f3', desc: 'Honduras Flag' },\r\n        { code: '1f1ed-1f1f7', desc: 'Croatia Flag' },\r\n        { code: '1f1ed-1f1f9', desc: 'Haiti Flag' },\r\n        { code: '1f1ed-1f1fa', desc: 'Hungary Flag' },\r\n        { code: '1f1ee-1f1e8', desc: 'Canary Islands Flag' },\r\n        { code: '1f1ee-1f1e9', desc: 'Indonesia Flag' },\r\n        { code: '1f1ee-1f1ea', desc: 'Ireland Flag' },\r\n        { code: '1f1ee-1f1f1', desc: 'Israel Flag' },\r\n        { code: '1f1ee-1f1f2', desc: 'Isle of Man Flag' },\r\n        { code: '1f1ee-1f1f3', desc: 'India Flag' },\r\n        { code: '1f1ee-1f1f4', desc: 'British Indian Ocean Territory Flag' },\r\n        { code: '1f1ee-1f1f6', desc: 'Iraq Flag' },\r\n        { code: '1f1ee-1f1f7', desc: 'Iran Flag' },\r\n        { code: '1f1ee-1f1f8', desc: 'Iceland Flag' },\r\n        { code: '1f1ef-1f1ea', desc: 'Jersey Flag' },\r\n        { code: '1f1ef-1f1f2', desc: 'Jamaica Flag' },\r\n        { code: '1f1ef-1f1f4', desc: 'Jordan Flag' },\r\n        { code: '1f1f0-1f1ea', desc: 'Kenya Flag' },\r\n        { code: '1f1f0-1f1ec', desc: 'Kyrgyzstan Flag' },\r\n        { code: '1f1f0-1f1ed', desc: 'Cambodia Flag' },\r\n        { code: '1f1f0-1f1ee', desc: 'Kiribati Flag' },\r\n        { code: '1f1f0-1f1f2', desc: 'Comoros Flag' },\r\n        { code: '1f1f0-1f1f3', desc: 'St. Kitts & Nevis Flag' },\r\n        { code: '1f1f0-1f1f5', desc: 'North Korea Flag' },\r\n        { code: '1f1f0-1f1fc', desc: 'Kuwait Flag' },\r\n        { code: '1f1f0-1f1fe', desc: 'Cayman Islands Flag' },\r\n        { code: '1f1f0-1f1ff', desc: 'Kazakhstan Flag' },\r\n        { code: '1f1f1-1f1e6', desc: 'Laos Flag' },\r\n        { code: '1f1f1-1f1e7', desc: 'Lebanon Flag' },\r\n        { code: '1f1f1-1f1e8', desc: 'St. Lucia Flag' },\r\n        { code: '1f1f1-1f1ee', desc: 'Liechtenstein Flag' },\r\n        { code: '1f1f1-1f1f0', desc: 'Sri Lanka Flag' },\r\n        { code: '1f1f1-1f1f7', desc: 'Liberia Flag' },\r\n        { code: '1f1f1-1f1f8', desc: 'Lesotho Flag' },\r\n        { code: '1f1f1-1f1f9', desc: 'Lithuania Flag' },\r\n        { code: '1f1f1-1f1fa', desc: 'Luxembourg Flag' },\r\n        { code: '1f1f1-1f1fb', desc: 'Latvia Flag' },\r\n        { code: '1f1f1-1f1fe', desc: 'Libya Flag' },\r\n        { code: '1f1f2-1f1e6', desc: 'Morocco Flag' },\r\n        { code: '1f1f2-1f1e8', desc: 'Monaco Flag' },\r\n        { code: '1f1f2-1f1e9', desc: 'Moldova Flag' },\r\n        { code: '1f1f2-1f1ea', desc: 'Montenegro Flag' },\r\n        { code: '1f1f2-1f1eb', desc: 'St. Martin Flag' },\r\n        { code: '1f1f2-1f1ec', desc: 'Madagascar Flag' },\r\n        { code: '1f1f2-1f1ed', desc: 'Marshall Islands Flag' },\r\n        { code: '1f1f2-1f1f0', desc: 'Macedonia Flag' },\r\n        { code: '1f1f2-1f1f1', desc: 'Mali Flag' },\r\n        { code: '1f1f2-1f1f2', desc: 'Myanmar (burma) Flag' },\r\n        { code: '1f1f2-1f1f3', desc: 'Mongolia Flag' },\r\n        { code: '1f1f2-1f1f4', desc: 'Macau Sar China Flag' },\r\n        { code: '1f1f2-1f1f5', desc: 'Northern Mariana Islands Flag' },\r\n        { code: '1f1f2-1f1f6', desc: 'Martinique Flag' },\r\n        { code: '1f1f2-1f1f7', desc: 'Mauritania Flag' },\r\n        { code: '1f1f2-1f1f8', desc: 'Montserrat Flag' },\r\n        { code: '1f1f2-1f1f9', desc: 'Malta Flag' },\r\n        { code: '1f1f2-1f1fa', desc: 'Mauritius Flag' },\r\n        { code: '1f1f2-1f1fb', desc: 'Maldives Flag' },\r\n        { code: '1f1f2-1f1fc', desc: 'Malawi Flag' },\r\n        { code: '1f1f2-1f1fd', desc: 'Mexico Flag' },\r\n        { code: '1f1f2-1f1fe', desc: 'Malaysia Flag' },\r\n        { code: '1f1f2-1f1ff', desc: 'Mozambique Flag' },\r\n        { code: '1f1f3-1f1e6', desc: 'Namibia Flag' },\r\n        { code: '1f1f3-1f1e8', desc: 'New Caledonia Flag' },\r\n        { code: '1f1f3-1f1ea', desc: 'Niger Flag' },\r\n        { code: '1f1f3-1f1eb', desc: 'Norfolk Island Flag' },\r\n        { code: '1f1f3-1f1ec', desc: 'Nigeria Flag' },\r\n        { code: '1f1f3-1f1ee', desc: 'Nicaragua Flag' },\r\n        { code: '1f1f3-1f1f1', desc: 'Netherlands Flag' },\r\n        { code: '1f1f3-1f1f4', desc: 'Norway Flag' },\r\n        { code: '1f1f3-1f1f5', desc: 'Nepal Flag' },\r\n        { code: '1f1f3-1f1f7', desc: 'Nauru Flag' },\r\n        { code: '1f1f3-1f1fa', desc: 'Niue Flag' },\r\n        { code: '1f1f3-1f1ff', desc: 'New Zealand Flag' },\r\n        { code: '1f1f4-1f1f2', desc: 'Oman Flag' },\r\n        { code: '1f1f8-1f1ff', desc: 'Swaziland Flag' },\r\n        { code: '1f1f5-1f1e6', desc: 'Panama Flag' },\r\n        { code: '1f1f5-1f1ea', desc: 'Peru Flag' },\r\n        { code: '1f1f5-1f1eb', desc: 'French Polynesia Flag' },\r\n        { code: '1f1f5-1f1ec', desc: 'Papua New Guinea Flag' },\r\n        { code: '1f1f5-1f1ed', desc: 'Philippines Flag' },\r\n        { code: '1f1f5-1f1f0', desc: 'Pakistan Flag' },\r\n        { code: '1f1f5-1f1f1', desc: 'Poland Flag' },\r\n        { code: '1f1f5-1f1f2', desc: 'St. Pierre & Miquelon  Flag' },\r\n        { code: '1f1f5-1f1f3', desc: 'Pitcairn Islands Flag' },\r\n        { code: '1f1f5-1f1f7', desc: 'Puerto Rico Flag' },\r\n        { code: '1f1f5-1f1f8', desc: 'Palestinian Territories Flag' },\r\n        { code: '1f1f5-1f1f9', desc: 'Portugal Flag' },\r\n        { code: '1f1f5-1f1fc', desc: 'Palau Flag' },\r\n        { code: '1f1f5-1f1fe', desc: 'Paraguay Flag' },\r\n        { code: '1f1f6-1f1e6', desc: 'Qatar Flag' },\r\n        { code: '1f1f7-1f1ea', desc: 'Réunion Flag' },\r\n        { code: '1f1f7-1f1f4', desc: 'Romania Flag' },\r\n        { code: '1f1f7-1f1f8', desc: 'Serbia Flag' },\r\n        { code: '1f1f7-1f1fc', desc: 'Rwanda Flag' },\r\n        { code: '1f1f8-1f1e6', desc: 'Saudi Arabia Flag' },\r\n        { code: '1f1f8-1f1e7', desc: 'Solomon Islands Flag' },\r\n        { code: '1f1f8-1f1e8', desc: 'Seychelles Flag' },\r\n        { code: '1f1f8-1f1e9', desc: 'Sudan Flag' },\r\n        { code: '1f1f8-1f1ea', desc: 'Sweden Flag' },\r\n        { code: '1f1f8-1f1ec', desc: 'Singapore Flag' },\r\n        { code: '1f1f8-1f1ee', desc: 'Slovenia Flag' },\r\n        { code: '1f1f8-1f1ed', desc: 'St. Helena  Flag' },\r\n        { code: '1f1f8-1f1ef', desc: 'Svalbard & Jan Mayen  Flag' },\r\n        { code: '1f1f8-1f1f1', desc: 'Sierra Leone Flag' },\r\n        { code: '1f1f8-1f1f2', desc: 'San Marino Flag' },\r\n        { code: '1f1f8-1f1f3', desc: 'Senegal Flag' },\r\n        { code: '1f1f8-1f1f4', desc: 'Somalia Flag' },\r\n        { code: '1f1f8-1f1f7', desc: 'Suriname Flag' },\r\n        { code: '1f1f8-1f1f8', desc: 'South Sudan  Flag' },\r\n        { code: '1f1f8-1f1f9', desc: 'São Tomé & Príncipe Flag' },\r\n        { code: '1f1f8-1f1fb', desc: 'El Salvador Flag' },\r\n        { code: '1f1f8-1f1fd', desc: 'Sint Maarten Flag' },\r\n        { code: '1f1f8-1f1fe', desc: 'Syria Flag' },\r\n        { code: '1f1f9-1f1e6', desc: 'Tristan Da Cunha Flag' },\r\n        { code: '1f1f9-1f1e8', desc: 'Turks & Caicos Islands  Flag' },\r\n        { code: '1f1f9-1f1eb', desc: 'French Southern Territories Flag' },\r\n        { code: '1f1f9-1f1ec', desc: 'Togo Flag' },\r\n        { code: '1f1f9-1f1ed', desc: 'Thailand Flag' },\r\n        { code: '1f1f9-1f1ef', desc: 'Tajikistan Flag' },\r\n        { code: '1f1f9-1f1f0', desc: 'Tokelau Flag' },\r\n        { code: '1f1f9-1f1f1', desc: 'Timor-Leste Flag' },\r\n        { code: '1f1f9-1f1f2', desc: 'Turkmenistan Flag' },\r\n        { code: '1f1f9-1f1f3', desc: 'Tunisia Flag' },\r\n        { code: '1f1f9-1f1f4', desc: 'Tonga Flag' },\r\n        { code: '1f1f9-1f1f7', desc: 'Turkey Flag' },\r\n        { code: '1f1f9-1f1f9', desc: 'Trinidad & Tobago Flag' },\r\n        { code: '1f1f9-1f1fb', desc: 'Tuvalu Flag' },\r\n        { code: '1f1f9-1f1fc', desc: 'Taiwan Flag' },\r\n        { code: '1f1f9-1f1ff', desc: 'Tanzania Flag' },\r\n        { code: '1f1fa-1f1e6', desc: 'Ukraine City  Flag' },\r\n        { code: '1f1fa-1f1ec', desc: 'Uganda Flag' },\r\n        { code: '1f1fa-1f1f2', desc: 'U.s. Outlying Islands  Flag' },\r\n        { code: '1f1fa-1f1fe', desc: 'Uruguay  Flag' },\r\n        { code: '1f1fa-1f1ff', desc: 'Uzbekistan Flag' },\r\n        { code: '1f1fb-1f1e6', desc: 'Vatican City  Flag' },\r\n        { code: '1f1fb-1f1e8', desc: 'St. Vincent & Grenadines Flag' },\r\n        { code: '1f1fb-1f1ea', desc: 'Venezuela Flag' },\r\n        { code: '1f1fb-1f1ec', desc: 'British Virgin Islands Flag' },\r\n        { code: '1f1fb-1f1ee', desc: 'U.s. Virgin Islands Flag' },\r\n        { code: '1f1fb-1f1f3', desc: 'Vietnam Flag' },\r\n        { code: '1f1fc-1f1f8', desc: 'Samoa Flag' },\r\n        { code: '1f1fb-1f1fa', desc: 'Vanuatu Flag' },\r\n        { code: '1f1fc-1f1eb', desc: '\"Wallis & Futuna Flag' },\r\n        { code: '1f1fd-1f1f0', desc: 'Kosovo Flag' },\r\n        { code: '1f1fe-1f1ea', desc: 'Yemen Flag' },\r\n        { code: '1f1fe-1f1f9', desc: 'Mayotte Flag' },\r\n        { code: '1f1ff-1f1e6', desc: 'South Africa Flag' },\r\n        { code: '1f1ff-1f1f2', desc: 'Zambia Flag' },\r\n        { code: '1f1ff-1f1fc', desc: 'Zimbabwe Flag' },\r\n        { code: '1f1eb-1f1f7', desc: 'France Flag' },\r\n        { code: '1f1ec-1f1e7', desc: 'United Kingdom  Flag' },\r\n        { code: '1f1ee-1f1f9', desc: 'Italy Flag' },\r\n        { code: '1f1ef-1f1f5', desc: 'Japan Flag' },\r\n        { code: '1f1f0-1f1f7', desc: 'South Korea Flag' },\r\n        { code: '1f1f7-1f1fa', desc: 'Russia Flag' },\r\n        { code: '1F6A9', desc: 'Triangular Flag on Post' },\r\n        { code: '1f1fa-1f1f8', desc: 'United States Flag' },\r\n      ]\r\n    }\r\n  ],\r\n  emoticonsButtons: ['emoticonsBack', '|'],\r\n  emoticonsUseImage: true\r\n})\r\n\r\nFE.PLUGINS.emoticons = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  // Load the categories for the emoticons\r\n  let { emoticonsSet : categories } = editor.opts\r\n  let selectedCategory = categories && categories[0]\r\n  let emoticonsButtons = ''\r\n\r\n  /**\r\n   *  Show emoticons popup\r\n   */\r\n  function _showEmoticonsPopup() {\r\n    \r\n    let $popup = editor.popups.get('emoticons')\r\n    \r\n    if (!$popup) $popup = _initEmoticonsPopup()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      editor.popups.refresh('emoticons')\r\n      editor.popups.setContainer('emoticons', editor.$tb)\r\n\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"emoticons\"]')\r\n\r\n      // Get popup left and top position\r\n      const { left, top } = editor.button.getPosition($btn)\r\n\r\n      // Show popup\r\n      editor.popups.show('emoticons', left, top, $btn.outerHeight())\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Initialize the emoticons popup \r\n   */\r\n  function _initEmoticonsPopup() {\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // If toolbar is inline then load emoticons buttons\r\n      if (editor.opts.emoticonsButtons.length > 0) {\r\n        emoticonsButtons = `<div class=\"fr-buttons fr-emoticons-buttons fr-tabs\">${editor.button.buildList(editor.opts.emoticonsButtons)}</div>`\r\n      }\r\n    }\r\n\r\n    // Template for popup\r\n    const template = {\r\n      buttons: emoticonsButtons,\r\n      custom_layer: _emoticonsHTML()\r\n    }\r\n\r\n    // Create popup\r\n    const $popup = editor.popups.create('emoticons', template)\r\n\r\n    // Add accessibility to popup\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _inEmoticon() {\r\n    if (!editor.selection.isCollapsed()) return false\r\n\r\n    let s_el = editor.selection.element()\r\n    let e_el = editor.selection.endElement()\r\n\r\n    if (s_el && editor.node.hasClass(s_el, 'fr-emoticon')) return s_el\r\n\r\n    if (e_el && editor.node.hasClass(e_el, 'fr-emoticon')) return e_el\r\n\r\n    let range = editor.selection.ranges(0)\r\n    let { startContainer : container } = range\r\n\r\n    if (container.nodeType == Node.ELEMENT_NODE) {\r\n\r\n      if (container.childNodes.length > 0 && range.startOffset > 0) {\r\n        let node = container.childNodes[range.startOffset - 1]\r\n\r\n        if (editor.node.hasClass(node, 'fr-emoticon')) {\r\n          return node\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /** \r\n   * Add emoticon \r\n   */\r\n  function addEmoticon(emoticon, img) {\r\n\r\n    const el = _inEmoticon()\r\n    const range = editor.selection.ranges(0)\r\n\r\n    if (!el) {\r\n      editor.html.insert(`<span class=\"fr-emoticon fr-deletable${(img ? ' fr-emoticon-img' : '')}\"${(img ? ` style=\"background: url(${img});\"` : '')}>${(img ? '&nbsp;' : emoticon)}</span>&nbsp;`, true)\r\n    }\r\n    else {\r\n\r\n      if (range.startOffset === 0 && editor.selection.element() === el) {\r\n        $(el).before(FE.MARKERS + FE.INVISIBLE_SPACE)\r\n      }\r\n      else if (range.startOffset > 0 && editor.selection.element() === el && range.commonAncestorContainer.parentNode.classList.contains('fr-emoticon')) {\r\n\r\n        // Inside emoticon move out side of it.\r\n        $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n      }\r\n      editor.selection.restore()\r\n      editor.html.insert(`<span class=\"fr-emoticon fr-deletable${(img ? ' fr-emoticon-img' : '')}\"${(img ? ` style=\"background: url(${img});\"` : '')}>${(img ? '&nbsp;' : emoticon)}</span>&nbsp;${FE.MARKERS}`, true)\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Load emoticons\r\n   */\r\n  function _load() {\r\n    const setDeletable = function () {\r\n      const emtcs = editor.el.querySelectorAll('.fr-emoticon:not(.fr-deletable)')\r\n\r\n      for (let i = 0; i < emtcs.length; i++) {\r\n        emtcs[i].className += ' fr-deletable'\r\n      }\r\n    }\r\n    setDeletable()\r\n\r\n    editor.events.on('html.set', setDeletable)\r\n\r\n    editor.events.on('keydown', function (e) {\r\n      if (editor.keys.isCharacter(e.which) && editor.selection.inEditor()) {\r\n        const range = editor.selection.ranges(0)\r\n        const el = _inEmoticon()\r\n\r\n        if (editor.node.hasClass(el, 'fr-emoticon-img')) {\r\n\r\n          if (el) {\r\n\r\n            if (range.startOffset === 0 && editor.selection.element() === el) {\r\n              $(el).before(FE.MARKERS + FE.INVISIBLE_SPACE)\r\n            }\r\n            else {\r\n              $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n            }\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    editor.events.on('keyup', function (e) {\r\n      const emtcs = editor.el.querySelectorAll('.fr-emoticon')\r\n\r\n      for (let i = 0; i < emtcs.length; i++) {\r\n        if (typeof emtcs[i].textContent != 'undefined' && emtcs[i].textContent.replace(/\\u200B/gi, '').length === 0) {\r\n          $(emtcs[i]).remove()\r\n        }\r\n      }\r\n\r\n      if (!(e.which >= FE.KEYCODE.ARROW_LEFT && e.which <= FE.KEYCODE.ARROW_DOWN)) {\r\n        const el = _inEmoticon()\r\n\r\n        if (editor.node.hasClass(el, 'fr-emoticon-img')) {\r\n          $(el).append(FE.MARKERS)\r\n          editor.selection.restore()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n    * Returns the HTML for the emoticons popup.\r\n    */\r\n  function _emoticonsHTML() {\r\n    let emoticons_html = ''\r\n    emoticons_html = `${_renderCategoryHtml(categories, selectedCategory)}\r\n                      ${_renderEmoticonHtml(selectedCategory)}\r\n                      ${_renderUseImage()}`\r\n\r\n    return emoticons_html\r\n  }\r\n\r\n  /**\r\n    * Replaces the pop-up's HTML with updated HTML - should be called\r\n    * when the selected category changes.\r\n    */\r\n  function _refreshPopup() {\r\n    editor.popups.get('emoticons').html(emoticonsButtons + _emoticonsHTML())\r\n  }\r\n\r\n  /**\r\n    * Set the currently selected emoticon category and refresh the popup\r\n    */\r\n  function setEmoticonCategory(categoryId) {\r\n    selectedCategory = categories.filter(category => {\r\n      return category.id === categoryId\r\n    })[0]\r\n\r\n    // Refresh the popup to update the emoticons in the popup view\r\n    _refreshPopup()\r\n  }\r\n\r\n  /**\r\n    * Returns the HTML of the Category selector\r\n    */\r\n  function _renderCategoryHtml(categories, selectedCategory) {\r\n    const categoryHtml = `<div class=\"fr-buttons fr-tabs fr-tabs-scroll\">\r\n                        ${_renderCategory(categories, selectedCategory)}\r\n                        </div>`\r\n    return categoryHtml\r\n  }\r\n\r\n  /** \r\n   * Returns the HTML for the emoticon selector part of the popup \r\n   */\r\n  function _renderEmoticonHtml(selectedCategory) {\r\n    const emoticonHtml = `\r\n        <div class=\"fr-icon-container fr-emoticon-container\">\r\n            ${_renderEmoticon(selectedCategory)}\r\n        </div>\r\n        `\r\n    return emoticonHtml\r\n  }\r\n\r\n  /** \r\n   * Register keyboard events. \r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('emoticons') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n      let index\r\n      let $el\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n\r\n        // Extremities reached.\r\n        if (($focused_item.is('span.fr-emoticon') && e.shiftKey) || ($focused_item.is('a') && !e.shiftKey)) {\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          // Focus back the popup's toolbar if exists.\r\n          status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n        }\r\n\r\n        if (status !== false) {\r\n\r\n          // Build elements that should be focused next.\r\n          let $tabElements = $popup.find('span.fr-emoticon:focus').first().concat($popup.findVisible(' div.fr-tabs').first().concat($popup.find('a')))\r\n\r\n          if ($focused_item.is('span.fr-emoticon')) {\r\n            $tabElements = $tabElements.not('span.fr-emoticon:not(:focus)')\r\n          }\r\n\r\n          // Get focused item position.\r\n          index = $tabElements.index($focused_item)\r\n\r\n          // Backwards.\r\n          if (e.shiftKey) {\r\n            index = (((index - 1) % $tabElements.length) + $tabElements.length) % $tabElements.length\r\n\r\n            // Javascript negative modulo bug.\r\n            // Forward.\r\n          }\r\n          else {\r\n            index = (index + 1) % $tabElements.length\r\n          }\r\n\r\n          // Find next element to focus.\r\n          $el = $tabElements.get(index)\r\n\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-emoticon')) {\r\n\r\n          // Get all current emoticons.\r\n          const $emoticons = $focused_item.parent().find('span.fr-emoticon')\r\n\r\n          // Get focused item position.\r\n          index = $emoticons.index($focused_item)\r\n\r\n          // Get emoticons matrix dimensions.\r\n          const { emoticonsStep : columns } = editor.opts\r\n          const lines = Math.floor($emoticons.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          $el = $($emoticons.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n        if ($focused_item.is('a')) {\r\n          $focused_item[0].click()\r\n        }\r\n        else {\r\n          editor.button.exec($focused_item)\r\n        }\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n     * Go back to the inline editor.\r\n     */\r\n  function back() {\r\n    editor.popups.hide('emoticons')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  /** \r\n   * Render and return the emoticon span html\r\n   */\r\n  function _renderEmoticon(selectedCategory) {\r\n    let emoticon_html = ''\r\n    \r\n    let i = 0\r\n    selectedCategory.emoticons.forEach(emoticon => {\r\n     \r\n      const compiledCode = emoticon.code.split('-').reduce((compiledCode, code) => {\r\n        return compiledCode ? (`${compiledCode}&zwj;&#x${code.toLowerCase()};`) : (`&#x${code.toLowerCase()};`)\r\n      }, '')\r\n\r\n      const imageMap = {\r\n        image: emoticon.code.toLowerCase(),\r\n        compiledCode: emoticon.uCode ? emoticon.uCode : compiledCode\r\n      }\r\n\r\n      const emoticonMap = {\r\n        dataParam1: emoticon.code.toLowerCase(),\r\n        dataParam2: imageMap.compiledCode,\r\n        title: editor.language.translate(emoticon.desc),\r\n        image: editor.opts.emoticonsUseImage ? `<img src=\"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${imageMap.image}.svg\"/>` : `${imageMap.compiledCode}`,\r\n        desc: editor.language.translate(emoticon.desc)\r\n      }\r\n      \r\n      emoticon_html += `<span class=\"fr-command fr-emoticon fr-icon\" role=\"button\" \r\n      data-cmd=\"insertEmoticon\" data-param1=\"${emoticonMap.dataParam1}\" \r\n      data-param2=\"${emoticonMap.dataParam2}\"  title=\"${emoticonMap.title}\" >\r\n      ${emoticonMap.image}<span class=\"fr-sr-only\">${emoticonMap.desc}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      \r\n      i++\r\n    })\r\n    return emoticon_html\r\n  }\r\n\r\n  /** \r\n   * Render and return tab button html\r\n   */\r\n  function _renderCategory(categories, selectedCategory) {\r\n    let buttonHtml = ''\r\n    \r\n    categories.forEach(category => {\r\n\r\n      const imageMap = {\r\n        image: category.code.toLowerCase()\r\n      }\r\n\r\n      const buttonMap = {\r\n        elementClass: category.id === selectedCategory.id ? 'fr-active fr-active-tab' : '',\r\n        emoticonsUnicodeClass: editor.opts.emoticonsUseImage ? '' : 'fr-tabs-unicode',\r\n        title: editor.language.translate(category.name),\r\n        dataCmd: 'setEmoticonCategory',\r\n        dataParam1: category.id,\r\n        image: editor.opts.emoticonsUseImage ? `<img src=\"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${imageMap.image}.svg\"/>` : `&#x${imageMap.image};`\r\n      }\r\n\r\n      buttonHtml += `<button class=\"fr-command fr-btn ${buttonMap.elementClass} ${buttonMap.emoticonsUnicodeClass}\" \r\n      title=\"${buttonMap.title}\" data-cmd=\"${buttonMap.dataCmd}\" data-param1=\"${buttonMap.dataParam1}\">\r\n       ${buttonMap.image} </button>`\r\n    })\r\n    return buttonHtml\r\n  }\r\n\r\n  /**\r\n   * Render image if emoticonsUseImage option is set to 'true'\r\n   */\r\n  function _renderUseImage() {\r\n    if (editor.opts.emoticonsUseImage) {\r\n      return '<p style=\"font-size: 12px; text-align: center; padding: 0 5px;\">Emoji free by <a class=\"fr-link\" tabIndex=\"-1\" href=\"http://emojione.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" role=\"link\" aria-label=\"Open Emoji One website.\">Emoji One</a></p>'\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _load,\r\n    insert: addEmoticon,\r\n    setEmoticonCategory: setEmoticonCategory,\r\n    showEmoticonsPopup: _showEmoticonsPopup,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Toolbar emoticons button.\r\nFE.DefineIcon('emoticons', {\r\n  NAME: 'smile-o',\r\n  FA5NAME: 'smile',\r\n  SVG_KEY: 'smile'\r\n})\r\nFE.RegisterCommand('emoticons', {\r\n  title: 'Emoticons',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (this.popups.isVisible('emoticons')) {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('emoticons')\r\n    }\r\n    else {\r\n      this.emoticons.showEmoticonsPopup()\r\n    }\r\n  },\r\n  plugin: 'emoticons'\r\n})\r\n\r\n// Insert emoticon command.\r\nFE.RegisterCommand('insertEmoticon', {\r\n  callback(cmd, code, compiledCode) {\r\n\r\n    // Insert emoticon\r\n    this.emoticons.insert(compiledCode, this.opts.emoticonsUseImage ? `https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/${code}.svg` : null)\r\n\r\n    // Hide emoticons popup.\r\n    this.popups.hide('emoticons')\r\n  }\r\n})\r\n\r\n/* set and show the emoticon category */\r\nFE.RegisterCommand('setEmoticonCategory', {\r\n  undo: false,\r\n  focus: false,\r\n  callback(cmd, category) {\r\n    this.emoticons.setEmoticonCategory(category)\r\n  }\r\n})\r\n\r\n// Emoticons back.\r\nFE.DefineIcon('emoticonsBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('emoticonsBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.emoticons.back()\r\n  }\r\n})\r\n\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  entities: '&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;'\r\n  + '&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;'\r\n  + '&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;'\r\n  + '&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;'\r\n  + '&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;'\r\n  + '&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;'\r\n  + '&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;'\r\n  + '&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;'\r\n  + '&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;'\r\n  + '&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;'\r\n  + '&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;'\r\n  + '&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;'\r\n  + '&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;'\r\n  + '&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;'\r\n  + '&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;'\r\n  + '&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;'\r\n  + '&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;'\r\n})\r\n\r\nFE.PLUGINS.entities = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  let _reg_exp \r\n  let _map \r\n\r\n  // if &, then index should be 0\r\n  function _process(el) {\r\n    const { textContent : text } = el \r\n\r\n    if (text.match(_reg_exp)) {\r\n      let new_text = '' \r\n\r\n      for (let j = 0;  j < text.length; j++) {\r\n        if (_map[text[j]]) new_text += _map[text[j]] \r\n        else new_text += text[j] \r\n      }\r\n\r\n      el.textContent = new_text \r\n    }\r\n  }\r\n\r\n  function _encode(el) {\r\n    if (el && ['STYLE', 'SCRIPT', 'svg', 'IFRAME'].indexOf(el.tagName) >= 0) return true \r\n\r\n    const contents = editor.node.contents(el) \r\n\r\n    // Process contents.\r\n    for (let i = 0; i < contents.length; i++) {\r\n      if (contents[i].nodeType === Node.TEXT_NODE) {\r\n        _process(contents[i]) \r\n      }\r\n      else {\r\n        _encode(contents[i]) \r\n      }\r\n    }\r\n\r\n    // Process node itself.\r\n    if (el.nodeType === Node.TEXT_NODE) _process(el)\r\n    \r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Encode entities.\r\n   */\r\n  const _encodeEntities = (html) => {\r\n    if (html.length === 0) return '' \r\n\r\n    return editor.clean.exec(html, _encode).replace(/\\&amp;/g, '&') \r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  const _init = () => {\r\n    if (!editor.opts.htmlSimpleAmpersand) {\r\n      editor.opts.entities = `${editor.opts.entities}&amp;`\r\n    }\r\n\r\n    // Do escape.\r\n    const entities_text = $(document.createElement('div')).html(editor.opts.entities).text() \r\n    const entities_array = editor.opts.entities.split(';') \r\n    _map = {} \r\n    _reg_exp = '' \r\n\r\n    for (let i = 0; i < entities_text.length; i++) {\r\n      const chr = entities_text.charAt(i) \r\n      _map[chr] = `${entities_array[i]};` \r\n      _reg_exp += `\\\\${chr + (i < entities_text.length - 1 ? '|' : '')}`\r\n    }\r\n    _reg_exp = new RegExp(`(${_reg_exp})`, 'g') \r\n\r\n    editor.events.on('html.get', _encodeEntities, true) \r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'file.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fileUpload: true,\r\n  fileUploadURL: null,\r\n  fileUploadParam: 'file',\r\n  fileUploadParams: {},\r\n  fileUploadToS3: false,\r\n  fileUploadToAzure: false,\r\n  fileUploadMethod: 'POST',\r\n  fileMaxSize: 10 * 1024 * 1024,\r\n  fileAllowedTypes: ['*'],\r\n  fileInsertButtons: ['fileBack', '|'],\r\n  fileUseSelectedText: false\r\n})\r\n\r\nFE.PLUGINS.file = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_FILE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'File cannot be loaded from the passed link.'\r\n  error_messages[MISSING_LINK] = 'No link in upload response.'\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.'\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.'\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.'\r\n  error_messages[BAD_FILE_TYPE] = 'File file type is invalid.'\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFile\"]')\r\n\r\n    let $popup = editor.popups.get('file.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    hideProgressBar()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('file.insert')\r\n      editor.popups.setContainer('file.insert', editor.$tb)\r\n\r\n      if ($btn.isVisible) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('file.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('file.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n  function showProgressBar() {\r\n    let $popup = editor.popups.get('file.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-file-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('file.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-file-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      if (dismiss) {\r\n        editor.events.focus()\r\n        editor.popups.hide('file.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('file.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-file-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('file.insert')\r\n    const $layer = $popup.find('.fr-file-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n  /**\r\n   * Insert the uploaded file.\r\n   */\r\n  function insert(link, text, response) {\r\n    editor.edit.on()\r\n\r\n    // Focus in the editor.\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n\r\n    if (editor.opts.fileUseSelectedText && editor.selection.text().length) {\r\n      text = editor.selection.text()\r\n    }\r\n\r\n    // Insert the link.\r\n    editor.html.insert(`<a href=\"${link}\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">${text}</a>`)\r\n\r\n    // Get the file.\r\n    const $file = editor.$el.find('#fr-inserted-file')\r\n\r\n    $file.removeAttr('id')\r\n\r\n    editor.popups.hide('file.insert')\r\n\r\n    editor.undo.saveStep()\r\n\r\n    _syncFiles()\r\n\r\n    editor.events.trigger('file.inserted', [$file, response])\r\n  }\r\n\r\n  /**\r\n   * Parse file response.\r\n   */\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('file.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response)\r\n\r\n        return false\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse file response.\r\n   */\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('file.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * File was uploaded to the server and we have a response.\r\n   */\r\n  function _fileUploaded(text, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.fileUploadToS3 || editor.opts.fileUploadToAzure) {\r\n        if (status === 201) {\r\n          let link\r\n          if(editor.opts.fileUploadToAzure) {\r\n            if (editor.events.trigger('file.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          }\r\n\r\n          if (link) {\r\n            insert(link, text, response || responseXML)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText)\r\n\r\n          if (resp) {\r\n            insert(resp.link, text, response || responseText)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText)\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * File upload error.\r\n   */\r\n  function _fileUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * File upload progress.\r\n   */\r\n  function _fileUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      _setProgressMessage(editor.language.translate('Uploading'), complete)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Throw an file error.\r\n   */\r\n  function _throwError(code, response) {\r\n    editor.edit.on()\r\n    _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'))\r\n\r\n    editor.events.trigger('file.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  /**\r\n   * File upload aborted.\r\n   */\r\n  function _fileUploadAborted() {\r\n    editor.edit.on()\r\n    hideProgressBar(true)\r\n  }\r\n\r\n  function _browserUpload(file) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let { result : link } = reader\r\n\r\n      // Convert image to local blob.\r\n      const binary = atob(reader.result.split(',')[1])\r\n      const array = []\r\n\r\n      for (let i = 0; i < binary.length; i++) {\r\n        array.push(binary.charCodeAt(i))\r\n      }\r\n\r\n      // Get local image link.\r\n      link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n        type: file.type\r\n      }))\r\n\r\n      editor.file.insert(link, file.name, null)\r\n    }\r\n\r\n    showProgressBar()\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n\r\n  function upload(files) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof files !== 'undefined' && files.length > 0) {\r\n\r\n      // Check if we should cancel the file upload.\r\n      if (editor.events.trigger('file.beforeUpload', [files]) === false) {\r\n\r\n        return false\r\n      }\r\n\r\n\r\n      const file = files[0]\r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.fileUploadURL === null || editor.opts.fileUploadURL === DEFAULT_FILE_UPLOAD_URL) && !editor.opts.fileUploadToS3 && !editor.opts.fileUploadToAzure) {\r\n        _browserUpload(file)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check file max size.\r\n      if (file.size > editor.opts.fileMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check file types.\r\n      if (editor.opts.fileAllowedTypes.indexOf('*') < 0 && editor.opts.fileAllowedTypes.indexOf(file.type.replace(/file\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE)\r\n\r\n        return false\r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data\r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null\r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key\r\n\r\n        // Upload to S3.\r\n        if (editor.opts.fileUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.fileUploadToS3.keyStart + (new Date()).getTime() + '-' + (file.name || 'untitled'))\r\n          form_data.append('success_action_status', '201')\r\n          form_data.append('X-Requested-With', 'xhr')\r\n          form_data.append('Content-Type', file.type)\r\n\r\n          for (key in editor.opts.fileUploadToS3.params) {\r\n            if (editor.opts.fileUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.fileUploadToS3.params[key])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.fileUploadParams) {\r\n          if (editor.opts.fileUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.fileUploadParams[key])\r\n          }\r\n        }\r\n\r\n        // Set the file in the request.\r\n        form_data.append(editor.opts.fileUploadParam, file)\r\n\r\n        // Create XHR request.\r\n        let { fileUploadURL : url } = editor.opts\r\n\r\n        if (editor.opts.fileUploadToS3) {\r\n          if (editor.opts.fileUploadToS3.uploadURL) {\r\n            url = editor.opts.fileUploadToS3.uploadURL\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.fileUploadToS3.region}.amazonaws.com/${editor.opts.fileUploadToS3.bucket}`\r\n          }\r\n        }\r\n        let fileURL\r\n        let azureKey\r\n        let fileUploadMethod = editor.opts.fileUploadMethod\r\n        if (editor.opts.fileUploadToAzure) {\r\n          if (editor.opts.fileUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.fileUploadToAzure.uploadURL}/${file.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.fileUploadToAzure.account}.blob.core.windows.net/${editor.opts.fileUploadToAzure.container}/${file.name}`)\r\n          }\r\n          fileURL = url\r\n          if (editor.opts.fileUploadToAzure.SASToken) {\r\n            url +=  editor.opts.fileUploadToAzure.SASToken\r\n          }\r\n          fileUploadMethod = 'PUT'\r\n        }        \r\n        \r\n        const xhr = editor.core.getXHR(url, fileUploadMethod)\r\n\r\n        if (editor.opts.fileUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.fileUploadToAzure.SASToken && editor.opts.fileUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.fileUploadToAzure.account\r\n            let azureContainer = editor.opts.fileUploadToAzure.container\r\n            if(editor.opts.fileUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.fileUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + file.name)\r\n            let stringToSign = fileUploadMethod + '\\n\\n\\n' + file.size + '\\n\\n' + file.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.fileUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", file.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.fileUploadParams) {\r\n            if (editor.opts.fileUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.fileUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.fileUploadToAzure.params) {\r\n            if (editor.opts.fileUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.fileUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        // Set upload events.\r\n        xhr.onload = function () {\r\n          _fileUploaded.call(xhr, file.name, fileURL, azureKey)\r\n        }\r\n        xhr.onerror = _fileUploadError\r\n        xhr.upload.onprogress = _fileUploadProgress\r\n        xhr.onabort = _fileUploadAborted\r\n\r\n        showProgressBar()\r\n\r\n        // editor.edit.off()\r\n\r\n        const $popup = editor.popups.get('file.insert')\r\n\r\n        if ($popup) {\r\n          $popup.off('abortUpload')\r\n          $popup.on('abortUpload', function () {\r\n            if (xhr.readyState !== 4) {\r\n              xhr.abort()\r\n            }\r\n          })\r\n        }\r\n\r\n        // Send data.\r\n      xhr.send(editor.opts.fileUploadToAzure ? file : form_data)   \r\n      }\r\n    }\r\n  }\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-file-upload-layer', function () {\r\n      $(this).addClass('fr-drop')\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-file-upload-layer', function () {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-file-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      $(this).removeClass('fr-drop')\r\n\r\n      const { dataTransfer : dt } = e.originalEvent\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.file.upload(dt.files)\r\n      }\r\n    }, true)\r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-file-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click')\r\n      })\r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-file-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        inst.events.disableBlur()\r\n        $popup.find('input:focus').blur()\r\n        inst.events.enableBlur()\r\n\r\n        inst.file.upload(this.files)\r\n      }\r\n\r\n      // Else IE 9 case.\r\n\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar()\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('file.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let file_buttons = ''\r\n\r\n    if (!editor.opts.fileUpload) {\r\n      editor.opts.fileInsertButtons.splice(editor.opts.fileInsertButtons.indexOf('fileUpload'), 1)\r\n    }\r\n\r\n    file_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.fileInsertButtons)}</div>`\r\n\r\n    // File upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (editor.opts.fileUpload) {\r\n      upload_layer = `<div class=\"fr-file-upload-layer fr-layer fr-active\" id=\"fr-file-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop file')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" name=\"${editor.opts.fileUploadParam}\" accept=\"${(editor.opts.fileAllowedTypes.indexOf('*') >= 0 ? '/' : '')}${editor.opts.fileAllowedTypes.join(', ').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-file-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-file-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"fileDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: file_buttons,\r\n      upload_layer: upload_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('file.insert', template)\r\n\r\n    _bindInsertEvents($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _onRemove(link) {\r\n    if (editor.node.hasClass(link, 'fr-file')) {\r\n\r\n      return\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const { dataTransfer : dt } = e.originalEvent\r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const file = dt.files[0]\r\n\r\n      if (file && typeof file.type !== 'undefined') {\r\n\r\n        // Dropped file is an file that we allow.\r\n        if (file.type.indexOf('image') < 0) {\r\n          if (!editor.opts.fileUpload) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n\r\n          editor.markers.remove()\r\n          editor.markers.insertAtPoint(e.originalEvent)\r\n          editor.$el.find('.fr-marker').replaceWith(FE.MARKERS)\r\n\r\n          // Hide popups.\r\n          editor.popups.hideAll()\r\n\r\n          // Show the file insert popup.\r\n          let $popup = editor.popups.get('file.insert')\r\n\r\n          if (!$popup) $popup = _initInsertPopup()\r\n          editor.popups.setContainer('file.insert', editor.$sc)\r\n          editor.popups.show('file.insert', e.originalEvent.pageX, e.originalEvent.pageY)\r\n          showProgressBar()\r\n\r\n          // Upload files.\r\n          upload(dt.files)\r\n\r\n          // Cancel anything else.\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n      }\r\n      else if (file.type.indexOf('image') < 0) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop)\r\n\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n      const $popup = editor.popups.get('file.insert')\r\n\r\n      if ($popup && key_code === FE.KEYCODE.ESC) {\r\n        $popup.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      const $popup = editor.popups.get('file.insert')\r\n\r\n      if ($popup) {\r\n        $popup.trigger('abortUpload')\r\n      }\r\n    })\r\n  }\r\n\r\n  function back() {\r\n    editor.events.disableBlur()\r\n    editor.selection.restore()\r\n    editor.events.enableBlur()\r\n\r\n    editor.popups.hide('file.insert')\r\n    editor.toolbar.showInline()\r\n  }\r\n\r\n  let files\r\n\r\n  function _syncFiles() {\r\n\r\n    // Get current files.\r\n    const c_files = Array.prototype.slice.call(editor.el.querySelectorAll('a.fr-file'))\r\n\r\n    // Current files src.\r\n    const file_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_files.length; i++) {\r\n      file_srcs.push(c_files[i].getAttribute('href'))\r\n    }\r\n\r\n    // Loop previous files and check their src.\r\n    if (files) {\r\n      for (i = 0; i < files.length; i++) {\r\n        if (file_srcs.indexOf(files[i].getAttribute('href')) < 0) {\r\n          editor.events.trigger('file.unlink', [files[i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current files are the old ones.\r\n    files = c_files\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    editor.events.on('link.beforeRemove', _onRemove)\r\n\r\n    if (editor.$wp) {\r\n      _syncFiles()\r\n      editor.events.on('contentChanged', _syncFiles)\r\n    }\r\n\r\n    _initInsertPopup(true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    upload: upload,\r\n    insert: insert,\r\n    back: back,\r\n    hideProgressBar: hideProgressBar\r\n  }\r\n}\r\n\r\n// Insert file button.\r\nFE.DefineIcon('insertFile', {\r\n  NAME: 'file-o',\r\n  FA5NAME: 'file',\r\n  SVG_KEY: 'insertFile'\r\n})\r\nFE.RegisterCommand('insertFile', {\r\n  title: 'Upload File',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('file.insert')) {\r\n      this.file.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('file.insert');\r\n    }\r\n  },\r\n  plugin: 'file'\r\n})\r\n\r\nFE.DefineIcon('fileBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('fileBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.file.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('fileDismissError', {\r\n  title: 'OK',\r\n  callback: function () {\r\n    this.file.hideProgressBar(true)\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'filesManager.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]',\r\n  'image.edit': '[_BUTTONS_]',\r\n  'image.alt': '[_BUTTONS_][_ALT_LAYER_]',\r\n  'image.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  filesInsertButtons: ['imageBack', '|', 'filesUpload', 'filesByURL', 'filesEmbed'],\r\n  filesInsertButtons2: ['deleteAll', 'insertAll', 'cancel', 'minimize'],\r\n  imageEditButtons: ['imageReplace', 'imageAlign', 'imageCaption', 'imageRemove', 'imageLink', 'linkOpen', 'linkEdit', 'linkRemove', '-', 'imageDisplay', 'imageStyle', 'imageAlt', 'imageSize'],\r\n  imageAltButtons: ['imageBack', '|'],\r\n  imageSizeButtons: ['imageBack', '|'],\r\n  imageUpload: true,\r\n  filesManagerUploadURL: null,\r\n  imageCORSProxy: 'https://cors-anywhere.froala.com',\r\n  imageUploadRemoteUrls: true,\r\n  filesManagerUploadParam: 'file',\r\n  filesManagerUploadParams: {},\r\n  googleOptions:{},\r\n  filesManagerUploadToS3: false,\r\n  filesManagerUploadToAzure: false,\r\n  filesManagerUploadMethod: 'POST',\r\n  filesManagerMaxSize: 10* 1024 * 1024,  \r\n  filesManagerAllowedTypes: ['*'],\r\n  imageResize: true,\r\n  imageResizeWithPercent: false,\r\n  imageRoundPercent: false,\r\n  imageDefaultWidth: 300,\r\n  imageDefaultAlign: 'center',\r\n  imageDefaultDisplay: 'block',\r\n  imageSplitHTML: false,\r\n  imageStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-bordered': 'Bordered',\r\n    'fr-shadow': 'Shadow'\r\n  },\r\n  imageMove: true,\r\n  imageMultipleStyles: true,\r\n  imageTextNear: true,\r\n  imagePaste: true,\r\n  imagePasteProcess: false,\r\n  imageMinWidth: 16,\r\n  imageOutputSize: false,\r\n  imageDefaultMargin: 5,\r\n  imageAddNewLine: false\r\n})\r\n\r\nFE.VIDEO_PROVIDERS = [\r\n  {\r\n    test_regex: /^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,\r\n    url_text: 'https://www.youtube.com/embed/$1?$2',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'youtube'\r\n  },\r\n  {\r\n    test_regex: /^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/​\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,\r\n    url_text: 'https://player.vimeo.com/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vimeo'\r\n  },\r\n  {\r\n    test_regex: /^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,\r\n    url_text: 'https://www.dailymotion.com/embed/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'dailymotion'\r\n  },\r\n  {\r\n    test_regex: /^.+(screen.yahoo.com)\\/[^_&]+/,\r\n    url_regex: '',\r\n    url_text: '',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'yahoo'\r\n  },\r\n  {\r\n    test_regex: /^.+(rutube.ru)\\/[^_&]+/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,\r\n    url_text: 'https://rutube.ru/play/embed/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'rutube'\r\n  },\r\n  {\r\n    test_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,\r\n    url_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,\r\n    url_text: 'https://play.vidyard.com/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vidyard'\r\n  }\r\n] \r\n\r\nFE.VIDEO_EMBED_REGEX = /^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i \r\nFE.IMAGE_EMBED_REGEX = /^\\W*((<img(.|\\n)*>(\\s|\\n)*))\\W*$/i\r\n\r\nFE.PLUGINS.filesManager = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_FILE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $current_image\r\n  let $current_image_index\r\n  let current_index\r\n  let $file_manager_dialog_open = false\r\n  let $child_window_open = false\r\n  let $image_resizer\r\n  let $handler\r\n  let $overlay\r\n  let disableEdit \r\n  let mousedown = false\r\n  let file_list = new Map();\r\n  let file_list_values = new Map();\r\n  let XMLHttpRequests = new Map()\r\n  let fileUploads = new Map()\r\n  let checked_files = new Map()\r\n  let failedUploadFiles = new Map()\r\n  let totalUploadPercent = 0\r\n  let completedUploads = 0\r\n  let fileKeys = []\r\n  let imageEditIndex = -1\r\n  let editImageValue\r\n  let autoplayCheckbox=[]\r\n  let fileListIndex = 0\r\n  const requiredPlugins = ['file', 'image','imageTUI', 'video']\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n  const CORRUPTED_IMAGE = 8\r\n  const ERROR_LINK = 9\r\n  const UPLOAD_CANCEL = 10\r\n\r\n  const unsupported_file_types=['video/avi','video/mpeg','video/x-ms-wmv']\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'File cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'File type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n  error_messages[CORRUPTED_IMAGE] = 'File is corrupted.'\r\n  error_messages[ERROR_LINK] = 'Error during file loading.'\r\n  error_messages[UPLOAD_CANCEL] = 'File upload cancelled'\r\n\r\n  var fileFormats = [\r\n    ['png', 'PNG', 'jpg', 'JPG', 'jpeg', 'JPEG', 'gif', 'GIF', 'webp', 'WEBP'],\r\n    ['docx', 'DOCX', 'xlsx'],\r\n    ['mp4', 'avi', 'mov', 'url']\r\n  ];\r\n\r\n  /**\r\n   * Refresh the image insert popup.\r\n   */\r\n    function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    const $url_input = $popup.find('.fr-files-by-url-layer input')\r\n    $url_input.val('')\r\n\r\n    let $embed_area = $popup.find('.fr-files-embed-layer textarea')\r\n    $embed_area.val('').trigger('change')\r\n\r\n    $url_input.trigger('change')\r\n  }\r\n\r\n  /**\r\n   * Show the image upload popup.\r\n   */\r\n\r\n  function showInsertPopup(rerender) {\r\n    if(!editor.hasOwnProperty('imageTUI')){\r\n      if(isImage){\r\n        disableEdit = 'fr-disabled'\r\n       }\r\n    }\r\n    $file_manager_dialog_open = true\r\n    // removing all files with errors\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      deleteFile(index)\r\n    })\r\n    let $popup\r\n    // check for required plugins\r\n    if(checkRequiredPlugins()){\r\n      $popup = editor.popups.get('filesManager.insert')\r\n      if (!$popup) $popup = _initInsertPopup()\r\n    }\r\n    else{\r\n      $popup = editor.popups.get('filesManager.insert')\r\n      if (!$popup) $popup = _initPluginErrorPopup()\r\n    }\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFiles\"]')\r\n    hideProgressBar()   \r\n    if (rerender || !$popup.hasClass('fr-active')) {      \r\n      if(!rerender){\r\n        resetAllFilesCheckbox()\r\n      }\r\n      editor.popups.refresh('filesManager.insert')\r\n      editor.popups.setContainer('filesManager.insert', editor.$tb)     \r\n      \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn, file_list.size)\r\n        editor.popups.show('filesManager.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('filesManager.insert')        \r\n      }\r\n    }\r\n    editor.popups.setPopupDimensions($popup)\r\n    if(checkRequiredPlugins()){\r\n      editor.popups.setFileListHeight($popup)\r\n    }\r\n\r\n    if($popup.find('.fr-upload-progress') && file_list.size == 0)\r\n        $popup.find('.fr-upload-progress').addClass('fr-none')\r\n\r\n  }\r\n\r\n  function checkRequiredPlugins(){\r\n    let plugins = true\r\n    requiredPlugins.forEach(function(plugin){\r\n      if(editor.opts.pluginsEnabled.indexOf(plugin) < 0){\r\n        plugins = false\r\n      }\r\n    })\r\n    return plugins\r\n  }\r\n\r\n  function addPlugins(){\r\n    requiredPlugins.forEach(function(plugin){\r\n      if(editor.opts.pluginsEnabled.indexOf(plugin) < 0){\r\n        editor.opts.pluginsEnabled.push(plugin)\r\n      }\r\n    })\r\n  }\r\n\r\n  function loadPlugins(module_list){\r\n    for (const m_name in module_list) {\r\n      if(!editor[m_name]){\r\n        if(FE.PLUGINS[m_name] && editor.opts.pluginsEnabled.indexOf(m_name) < 0){\r\n          continue\r\n        }\r\n        editor[m_name] = new module_list[m_name](editor)\r\n        if (editor[m_name]._init) {\r\n          editor[m_name]._init()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n      hideProgressBar()\r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n\r\n  function _repositionResizer() {\r\n    if (!$image_resizer) _initImageResizer()\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $container = editor.$wp || editor.$sc\r\n\r\n    $container.append($image_resizer)\r\n    $image_resizer.data('instance', editor)\r\n\r\n    let wrap_correction_top = $container.scrollTop() - (($container.css('position') != 'static' ? $container.offset().top : 0))\r\n    let wrap_correction_left = $container.scrollLeft() - (($container.css('position') != 'static' ? $container.offset().left : 0))\r\n\r\n    wrap_correction_left -= editor.helpers.getPX($container.css('border-left-width'))\r\n    wrap_correction_top -= editor.helpers.getPX($container.css('border-top-width'))\r\n\r\n    if (editor.$el.is('img') && editor.$sc.is('body')) {\r\n      wrap_correction_top = 0\r\n      wrap_correction_left = 0\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let iframePaddingTop = 0\r\n    let iframePaddingLeft = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $image_resizer\r\n      .css('top', (editor.opts.iframe ? $el.offset().top + iframePaddingTop : $el.offset().top + wrap_correction_top) - 1)\r\n      .css('left', (editor.opts.iframe ? $el.offset().left + iframePaddingLeft : $el.offset().left + wrap_correction_left) - 1)\r\n      .css('width', $el.get(0).getBoundingClientRect().width)\r\n      .css('height', $el.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active')\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>`\r\n  }\r\n\r\n  /**\r\n   * Set the image with\r\n   */\r\n  function _setWidth(width) {\r\n    if (hasCaption()) {\r\n      $current_image.parents('.fr-img-caption').css('width', width)\r\n    }\r\n    else {\r\n      $current_image.css('width', width)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.$el.find('img.fr-error').left) return false\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n    // Get offset.\r\n    let start_x = e.pageX || e.originalEvent.touches[0].pageX\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n      // See if the entire editor is inside iframe to adjust starting offset.\r\n      const oel = editor.$oel.get(0)\r\n      const doc = oel.ownerDocument\r\n      const win = doc.defaultView || doc.parentWindow\r\n      let editor_inside_iframe = false\r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE))\r\n      } catch (ex) { }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        start_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft\r\n      }\r\n    }\r\n\r\n    $handler = $(this)\r\n    $handler.data('start-x', start_x)\r\n    $handler.data('start-width', $current_image.width())\r\n    $handler.data('start-height', $current_image.height())\r\n\r\n    // Set current width.\r\n    let width = $current_image.width()\r\n\r\n    // Update width value if resizing with percent.\r\n    if (editor.opts.imageResizeWithPercent) {\r\n      const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n      width = (width / $(p_node).outerWidth() * 100).toFixed(2) + '%'\r\n    }\r\n    // Set the image width.\r\n    _setWidth(width)\r\n    $overlay.show()\r\n    editor.popups.hideAll()\r\n    _unmarkExit()\r\n  }\r\n\r\n  function insertEmbed(code) {\r\n    if (typeof code == 'undefined') {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n      code = $popup.find('.fr-files-embed-layer textarea').val() || ''\r\n    }\r\n\r\n    if (code.length === 0 || !(FE.VIDEO_EMBED_REGEX.test(code)||FE.IMAGE_EMBED_REGEX.test(code))) {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      if(FE.VIDEO_EMBED_REGEX.test(code))\r\n      {\r\n        editor.events.trigger('video.codeError', [code])\r\n      }\r\n    }\r\n    else {\r\n      insertEmbeddedFile(code)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n    let real_image_size\r\n\r\n    if ($handler && $current_image) {\r\n      e.preventDefault()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null)\r\n\r\n      if (!c_x) return false\r\n\r\n      const s_x = $handler.data('start-x')\r\n      let diff_x = c_x - s_x\r\n      let width = $handler.data('start-width')\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x\r\n      }\r\n\r\n      if (editor.opts.imageResizeWithPercent) {\r\n        const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n        width = ((width + diff_x) / $(p_node).outerWidth() * 100).toFixed(2)\r\n\r\n        if (editor.opts.imageRoundPercent) width = Math.round(width)\r\n\r\n        // Set the image width.\r\n        _setWidth(`${width}%`)\r\n\r\n        // Get the real image width after resize.\r\n        if (hasCaption()) {\r\n          real_image_size = (editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n        else {\r\n          real_image_size = (editor.helpers.getPX($current_image.css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width && !editor.opts.imageRoundPercent) {\r\n          _setWidth(`${real_image_size}%`)\r\n        }\r\n\r\n        $current_image.css('height', '').removeAttr('height')\r\n      }\r\n      else {\r\n        if (width + diff_x >= editor.opts.imageMinWidth) {\r\n          // Set width for image parent node as well.\r\n          _setWidth(width + diff_x)\r\n\r\n          // Get the real image width after resize.\r\n          if (hasCaption()) {\r\n            real_image_size = editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width'))\r\n          }\r\n          else {\r\n            real_image_size = editor.helpers.getPX($current_image.css('width'))\r\n          }\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width + diff_x) {\r\n          _setWidth(real_image_size)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1963.\r\n        if (($current_image.attr('style') || '').match(/(^height:)|(; *height:)/) || $current_image.attr('height')) {\r\n          $current_image.css('height', $handler.data('start-height') * $current_image.width() / $handler.data('start-width'))\r\n          $current_image.removeAttr('height')\r\n        }\r\n      }\r\n\r\n      _repositionResizer()\r\n\r\n      editor.events.trigger('image.resize', [get()])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    if ($handler && $current_image) {\r\n      if (e) e.stopPropagation()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      $handler = null\r\n      $overlay.hide()\r\n      _repositionResizer()\r\n\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('image.resizeEnd', [get()])\r\n    }\r\n    else { //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n      $image_resizer.removeClass('fr-active')\r\n    }\r\n  }\r\n\r\n  function _disableInsertCheckbox () {\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n      if(document.getElementById('fr-file-autoplay-button-' + index)){\r\n        document.getElementById('fr-file-autoplay-button-' + index).disabled = true\r\n        document.getElementById('fr-file-autoplay-button-' + index).parentElement.classList.add('fr-checkbox-disabled')\r\n        document.getElementById('fr-file-autoplay-button-' + index).parentElement.classList.remove('fr-files-checkbox')\r\n      }\r\n            $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-files-checkbox')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-checkbox-disabled')\r\n    })   \r\n  }\r\n\r\n  function _disableFileIcons () {\r\n    failedUploadFiles.forEach(function(errorMessage, index) {\r\n      const $popup = editor.popups.get('filesManager.insert')\r\n\r\n      if(document.getElementById(`fr-file-edit-button-${index}`)){\r\n        document.getElementById(`fr-file-edit-button-${index}`).classList.add('fr-disabled')\r\n        document.getElementById(`fr-file-view-button-${index}`).classList.add('fr-disabled')\r\n        document.getElementById(`fr-file-insert-button-${index}`).classList.add('fr-disabled')\r\n      }\r\n    })   \r\n  }\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n\r\n  function _throwError(code, response, $img, index) {\r\n    editor.edit.on()\r\n    if ($current_image) $current_image.addClass('fr-error')\r\n    // https://github.com/froala/wysiwyg-editor/issues/3407\r\n    if (error_messages[code]) {\r\n       if(code == ERROR_DURING_UPLOAD || code == MISSING_LINK || code == BAD_RESPONSE){\r\n         updateFileUploadingProgress(100, index, true)\r\n       }\r\n       failedUploadFiles.set(index, error_messages[code])\r\n       _disableInsertCheckbox()\r\n       _disableFileIcons()\r\n      _showFileErrorMessage(editor.language.translate(error_messages[code]), index)\r\n    }\r\n    else {\r\n      _showFileErrorMessage(editor.language.translate('Something went wrong. Please try again.'), index)\r\n    }\r\n\r\n    // Remove image if it exists.\r\n    if (!$current_image && $img) remove($img)\r\n\r\n    editor.events.trigger('filesManager.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response,\r\n    $img\r\n    ])\r\n  }\r\n\r\n  /**\r\n   * Init the image edit popup.\r\n   */\r\n\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      if (editor.$wp) {\r\n        editor.events.$on(editor.$wp, 'scroll.image-edit', function () {\r\n          if ($current_image && editor.popups.isVisible('image.edit')) {\r\n            editor.events.disableBlur()\r\n          }\r\n        })\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    if (editor.opts.imageEditButtons.length > 0) {\r\n\r\n      image_buttons += `<div class=\"fr-buttons\"> \r\n        ${editor.button.buildList(editor.opts.imageEditButtons)}\r\n        </div>`\r\n\r\n      const template = {\r\n        buttons: image_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('image.edit', template)\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n    /**\r\n   * Cancel File Insert.\r\n   */\r\n\r\n  function cancelFileInsert(){\r\n    this.file_manager_dialog_open = false\r\n    XMLHttpRequests.forEach(function(req, index){      \r\n      if(req.readyState != 4){\r\n        req.abort()\r\n        deleteFile(index)\r\n      }\r\n    })\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find('.fr-progress-bar').removeClass('fr-display-block').addClass('fr-none')\r\n    $popup.find('.fr-command[data-cmd=\"filesUpload\"]').removeClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesByURL\"]').removeClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').removeClass('fr-disabled')\r\n    completedUploads = 0\r\n    XMLHttpRequests = new Map()\r\n    fileUploads = new Map()\r\n    resetAllFilesCheckbox()\r\n    editor.popups.hide('filesManager.insert')\r\n  }\r\n\r\n  /**\r\n   * Cancel File Upload.\r\n   */\r\n\r\n  function cancelFileUpload(index){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const right = $popup.find('.fr-file-item-right-'+index)\r\n    right.get(0).innerHTML = getFileActionButtons(index)\r\n    XMLHttpRequests.get(index).abort()\r\n    updateProgressBar(index, 100, true)\r\n    $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n  }\r\n  \r\n  /**\r\n   * Delete File Upload.\r\n   */\r\n\r\n  function deleteFileUpload(index){\r\n    if(XMLHttpRequests.get(index).readyState != 0){\r\n      XMLHttpRequests.get(index).abort()\r\n      updateProgressBar(index, 100, true)\r\n      XMLHttpRequests.delete(index)\r\n    }\r\n    deleteFile(index)\r\n  }\r\n\r\n  /** \r\n   * \r\n   */\r\n\r\n  function checkInsertAllState() {\r\n    const $popup = editor.popups.get('filesManager.insert') \r\n    let $btnInsert = $popup.find('.fr-command[data-cmd=\"insertAll\"]'),\r\n      $btnDelete = $popup.find('.fr-command[data-cmd=\"deleteAll\"]'),\r\n      isDisabled = true\r\n\r\n    function addCheck(file, i, map) {\r\n      if (checked_files.get(i)) {\r\n        isDisabled = false\r\n      }\r\n    }\r\n    checked_files.forEach(addCheck)\r\n    isDisabled ? $btnInsert.addClass('fr-disabled') : $btnInsert.removeClass('fr-disabled')\r\n    isDisabled ? $btnDelete.addClass('fr-disabled') : $btnDelete.removeClass('fr-disabled')\r\n   }\r\n\r\n  /**\r\n   * Delete File.\r\n   */\r\n\r\n  function deleteFile(index){\r\n    if(file_list_values.get(index) && file_list_values.get(index).link)\r\n      editor.events.trigger('filesManager.removed', [file_list_values.get(index).link])\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2848\r\n    if ($popup.find('.fr-file-' + index).get(0) !== undefined) {\r\n      $popup.find('.fr-file-' + index).get(0).outerHTML = \"\"\r\n    }\r\n    file_list_values.delete(index)\r\n    file_list.delete(index)\r\n    checked_files.delete(index)\r\n    checkInsertAllState()\r\n    if (file_list.size == 0) {\r\n      fileListIndex = 0\r\n    }\r\n    failedUploadFiles.delete(index)\r\n    editor.popups.setPopupDimensions($popup, true)\r\n    if(editor.opts.toolbarBottom) \r\n      showInsertPopup(true)\r\n    else\r\n      editor.popups.setPopupDimensions($popup)\r\n\r\n    if($popup.find('.fr-upload-progress') && file_list.size == 0)\r\n        $popup.find('.fr-upload-progress').addClass('fr-none')\r\n\r\n  }\r\n\r\n  /**\r\n   * Minimize popup.\r\n   */\r\n\r\n  function minimizePopup(current_index) {\r\n    this.file_manager_dialog_open = false\r\n    editor.popups.hide(\"filesManager.insert\");\r\n    resetAllFilesCheckbox(current_index)\r\n    \r\n  }\r\n\r\n/**\r\n   * Reset checkbox of all files.\r\n   */\r\n\r\n  function resetAllFilesCheckbox() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    let checked = $popup.find('.fr-insert-checkbox')\r\n    for(let i = 0 ; i < checked.length ; i++){\r\n      checked.get(i).children['target'].checked = false\r\n      $popup.find('.fr-file-' + checked.get(i).id.split('-').pop()).get(0).classList.add('fr-unchecked')\r\n    }\r\n    if(current_index){\r\n      if(document.getElementById(`fr-file-autoplay-button-${current_index}`))\r\n        document.getElementById(`fr-file-autoplay-button-${current_index}`).checked=false\r\n      autoplayCheckbox=autoplayCheckbox.filter(function(i){\r\n        return i!=current_index\r\n      })\r\n    }else{\r\n      let autoplay = $popup.find('.fr-file-autoplay-button')\r\n      for(let i = 0 ; i < autoplay.length ; i++){\r\n        autoplay.get(i).checked = false\r\n      }\r\n      autoplayCheckbox = []\r\n    }\r\n    checked_files = new Map()\r\n    checkInsertAllState()\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-files-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    if ($current_image) {\r\n      const $el = getEl()\r\n\r\n      editor.popups.setContainer('filesManager.insert', editor.$sc)\r\n      const left = $el.offset().left\r\n      const top = $el.offset().top + $el.height()\r\n\r\n      editor.popups.show('filesManager.insert', left, top, $el.outerHeight())\r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-files-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('img.fr-error').length) {\r\n        editor.events.focus()\r\n\r\n        if (editor.$el.find('img.fr-error').length) {\r\n          editor.$el.find('img.fr-error').remove()\r\n          editor.undo.saveStep()\r\n          editor.undo.run()\r\n          editor.undo.dropRedo()\r\n        }\r\n\r\n        if (!editor.$wp && $current_image) {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n        editor.popups.hide('filesManager.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-files-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $layer = $popup.find('.fr-files-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n\r\n  /**\r\n   * Show error message to the  user for file upload.\r\n   */\r\n\r\n  function _showFileErrorMessage(message, index) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $layer = $popup.find('.fr-upload-progress-layer')\r\n    const $row = $popup.find(`.fr-file-${index}`)\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $row.find('h5')\r\n    $message_header.text(message)\r\n  }\r\n\r\n  /*\r\n   * Drag and Drop Functions\r\n   */\r\n\r\n  let globalListClass = '',\r\n    sortableLists,\r\n    globalX, globalY\r\n\r\n  function enableDragSort(listClass) {\r\n    globalListClass = listClass;\r\n    sortableLists = document.getElementsByClassName(listClass);\r\n    Array.prototype.map.call(sortableLists, (list) => {\r\n      enableDragItem(list)\r\n    });\r\n  }\r\n\r\n  function enableDragItem(item) {\r\n    item.addEventListener(\"dragover\", function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      globalX = event.pageX\r\n      globalY = event.pageY\r\n      let el = document.getElementById('filesList')\r\n      if (globalY + 20 > el.getBoundingClientRect().bottom)\r\n        scrollBy(el, 0, 10)\r\n      if (globalY - 20 < el.getBoundingClientRect().top)\r\n        scrollBy(el, 0, -10)\r\n    }, false);\r\n\r\n    if(editor.helpers.isMobile()){\r\n    let el = item.getElementsByClassName('dot')\r\n    el[0].addEventListener(\"touchmove\", function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      let sourceElement = event.target\r\n      while (sourceElement && !sourceElement.classList.contains(globalListClass)) {\r\n        sourceElement = sourceElement.parentElement\r\n      }  \r\n\r\n      let hoveredItem = document.elementFromPoint(event.targetTouches[0].clientX, event.targetTouches[0].clientY)\r\n      while (hoveredItem && !hoveredItem.classList.contains(globalListClass)) {\r\n        hoveredItem = hoveredItem.parentElement\r\n      }     \r\n\r\n      let elementsWithHoverClass = document.getElementsByClassName('fr-hovered-over-file')\r\n      Array.prototype.forEach.call(elementsWithHoverClass, function(element) {\r\n        element.classList.remove('fr-hovered-over-file')\r\n    });\r\n \r\n    if(hoveredItem && !sourceElement.classList.contains('fr-unchecked'))   \r\n        hoveredItem.classList.add('fr-hovered-over-file')\r\n\r\n      let el = document.getElementById('filesList')\r\n        if (event.targetTouches[0].clientY + 5 > el.getBoundingClientRect().bottom)\r\n          {\r\n            scrollBy(el, 0, 5)\r\n          }\r\n        if (event.targetTouches[0].clientY - 5 < el.getBoundingClientRect().top)\r\n          {\r\n            scrollBy(el, 0, -5)\r\n          }\r\n    }, false);\r\n  }\r\n\r\n    item.ondrag = handleDrag;\r\n    item.ondragend = handleDrop;\r\n    if (editor.helpers.isMobile()) {  \r\n      let el = item.getElementsByClassName('dot')\r\n      el[0].addEventListener('touchmove', handleDrag, false);\r\n      el[0].addEventListener('touchend', handleDrop, false);\r\n    }\r\n  }\r\n\r\n\r\n  let selectedItem,\r\n   selectedLocX,\r\n   selectedLocY\r\n\r\n   function scrollBy(el, x, y) {\r\n    el.scrollLeft += x;\r\n    el.scrollTop += y;\r\n  }\r\n\r\n  function handleDrag(item) {\r\n    if (editor.helpers.isMobile()) {\r\n      selectedLocX = event.touches[0].clientX\r\n      selectedLocY = event.touches[0].clientY\r\n    }\r\n    selectedItem = item.target\r\n    while (!selectedItem.classList.contains(globalListClass)) {\r\n      selectedItem = selectedItem.parentElement\r\n    }\r\n\r\n    if(!selectedItem.classList.contains(globalListClass) || selectedItem.classList.contains('fr-unchecked')) {\r\n      selectedItem = undefined\r\n      return\r\n    }\r\n    if(editor.helpers.isMobile())\r\n      selectedItem.classList.add('drag-sort-active')\r\n\r\n    return\r\n  }\r\n\r\n  function handleDrop(item) {\r\n    let droppedItem\r\n    if (selectedItem === undefined) {\r\n      return\r\n    }\r\n\r\n    let x, y\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      x = selectedLocX\r\n      y = selectedLocY\r\n      droppedItem = event.target\r\n      while (!droppedItem.classList.contains(globalListClass)) {\r\n        droppedItem = droppedItem.parentElement\r\n      }\r\n    } else {\r\n      x = event.clientX\r\n      y = event.clientY\r\n    }\r\n    //Condition for Firefox and Safari MAC\r\n    if ( !editor.helpers.isMobile() && ( editor.browser.safari || editor.browser.mozilla)) {\r\n      x = globalX\r\n      y = globalY\r\n    }\r\n\r\n    let swapItem = document.elementFromPoint(x, y)\r\n\r\n    while (swapItem && !swapItem.classList.contains(globalListClass)) {\r\n      swapItem = swapItem.parentElement\r\n    }\r\n\r\n    if(swapItem && !swapItem.classList.contains(globalListClass)) {\r\n      swapItem = undefined\r\n    }\r\n    else if (swapItem && selectedItem !== swapItem) {\r\n      swapNodes(selectedItem, swapItem)\r\n    }\r\n    \r\n    if(editor.helpers.isMobile()) {   \r\n      droppedItem.classList.remove('fr-hovered-over-file')\r\n      swapItem.classList.remove('fr-hovered-over-file')\r\n    }\r\n\r\n\r\n  }\r\n\r\n  function swapNodes(n1, n2) {\r\n    var p1 = n1.parentNode;\r\n    var p2 = n2.parentNode;\r\n    var i1, i2;\r\n\r\n    if ( !p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1) ) return;\r\n\r\n    for (var i = 0; i < p1.children.length; i++) {\r\n        if (p1.children[i].isEqualNode(n1)) {\r\n            i1 = i;\r\n        }\r\n    }\r\n    for (var i = 0; i < p2.children.length; i++) {\r\n        if (p2.children[i].isEqualNode(n2)) {\r\n            i2 = i;\r\n        }\r\n    }\r\n\r\n    if ( p1.isEqualNode(p2) && i1 < i2 ) {\r\n        i2++;\r\n    }\r\n    p1.insertBefore(n2, p1.children[i1]);\r\n    p2.insertBefore(n1, p2.children[i2]);\r\n}\r\n\r\n  function showFileUploadProgressLayer(i) { \r\n      let $popup = editor.popups.get('filesManager.insert')    \r\n      if(!$popup.find('.fr-upload-progress-layer').hasClass('fr-active')){\r\n        $popup.find('.fr-upload-progress-layer').addClass('fr-active')\r\n      }\r\n\r\n      $popup.find('.fr-upload-progress').removeClass('fr-none')\r\n\r\n      let file = file_list.get(i)\r\n      let description = getFileDescription(new Date())\r\n      let checkedClass = checked_files.get(i) ? '' : 'fr-unchecked '  \r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>'       \r\n      let upload_progress_layer = `\r\n        <div id='fr-file-${i}' class='fr-file-list-item fr-file-${i} ${checkedClass}' draggable = \"${checkedClass ? false : true}\" >\r\n        <div class='fr-file-item-left' >\r\n\r\n    \r\n            <div class=\"fr-file-item-insert-checkbox fr-files-checkbox-line\">\r\n            ${editor.helpers.isMobile() ? `<div id='fr-pick-${i}}' class='dot'>\r\n            </div>`:``}\r\n            <div id=\"checkbox-key-${i}\" class=\"fr-files-checkbox fr-insert-checkbox  fr-checkbox-${i}\">\r\n            <input name=\"target\" class=\"fr-insert-attr fr-checkbox-file-${i} fr-file-insert-check\" data-cmd=\"fileInsertCheckbox\"\r\n             data-checked=\"_blank\" type=\"checkbox\" id=\"fr-link-target-${editor.id}\" tabIndex=\"0\" />\r\n            <span>${checkmark}\r\n            </span>\r\n        </div>\r\n                <label id=\"fr-label-target-${editor.id}\"></label>\r\n            </div>\r\n    \r\n            <div class='fr-file-item-icon fr-file-item-icon-${i}' >\r\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='thumbnail-padding' height='36px' width='36px' />\r\n            </div>\r\n\r\n            <div class='fr-file-item-description' >\r\n                <div class='fr-file-name fr-files-manager-tooltip'>\r\n                   ${text_truncate(file.name,20)}\r\n                      <span class=\"${ file.name.length > 20 ? 'tooltiptext':'fr-none'}\">${file.name}\r\n                      </span>\r\n                 </div>\r\n                 <div class='fr-file-details'>\r\n                 <div class='fr-file-date'>${description}\r\n                 </div>\r\n \r\n                 <div class='fr-file-size'>\r\n                     ${getFileSize(file.size)}\r\n                 </div>\r\n                 </div>\r\n\r\n                  <div class='fr-file-error'>\r\n                    <h5 class='fr-file-error-h5'></h5>\r\n                 </div>\r\n             </div>\r\n    \r\n        </div>\r\n\r\n        <div class='fr-file-item-right fr-file-item-right-${i}'>` + getFileActionButtons(i) + `</div>\r\n    </div>`;\r\n\r\n    $popup.find('.fr-upload-progress-layer')[0].innerHTML = upload_progress_layer + $popup.find('.fr-upload-progress-layer')[0].innerHTML;\r\n    // adding checked to already checked files\r\n    function addCheck(file, i, map) {\r\n      if (checked_files.get(i)) {\r\n        $popup.find(`input.fr-insert-attr.fr-checkbox-file-${i}`)[0].setAttribute('checked', null)\r\n      }\r\n    }\r\n    file_list.forEach(addCheck)\r\n    autoplayCheckbox.forEach(function(index){\r\n      document.getElementById('fr-file-autoplay-button-' + index).checked = true\r\n    })\r\n    getFileThumbnail(i, file)\r\n    hideProgressBar()\r\n    if(editor.opts.toolbarBottom) \r\n      showInsertPopup(true)\r\n    else\r\n      editor.popups.setPopupDimensions($popup)\r\n      enableDragSort('fr-file-list-item')\r\n\r\n  }\r\n\r\n  function text_truncate(str, length, ending) {\r\n    if (length == null) {\r\n      length = 100;\r\n    }\r\n    if (ending == null) {\r\n      ending = '...';\r\n    }\r\n    if (str.length > length) {\r\n      return str.substring(0, length - ending.length) + ending;\r\n    } else {\r\n      return str;\r\n    }\r\n  }\r\n  \r\n\r\nfunction getFileThumbnailSrc(type){  \r\n  switch (type){ \r\n\r\n    case 'application/msword': \r\n      return editor.icon.getFileIcon('docIcon')\r\n    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document': \r\n      return editor.icon.getFileIcon('docxIcon')\r\n    case 'image/gif': \r\n      return editor.icon.getFileIcon('gifIcon')\r\n    case 'image/jpeg': \r\n      return editor.icon.getFileIcon('jpegIcon')\r\n    case 'image/jpeg': \r\n      return editor.icon.getFileIcon('jpgIcon')\r\n    case 'type/text': \r\n      return editor.icon.getFileIcon('logIcon')\r\n    case 'video/quicktime': \r\n      return editor.icon.getFileIcon('movIcon') \r\n    case 'audio/mp3': \r\n    case 'audio/mpeg':\r\n      return editor.icon.getFileIcon('mp3Icon')\r\n    case 'video/mp4': \r\n      return editor.icon.getFileIcon('mp4Icon')\r\n    case 'audio/ogg': \r\n      return editor.icon.getFileIcon('oggIcon') \r\n    case 'video/ogg': \r\n      return editor.icon.getFileIcon('ogvIcon')\r\n    case 'application/pdf': \r\n      return editor.icon.getFileIcon('pdfIcon')\r\n    case 'image/png': \r\n      return editor.icon.getFileIcon('pngIcon') \r\n    case 'text/plain': \r\n      return editor.icon.getFileIcon('txtIcon')\r\n    case 'video/webm': \r\n      return editor.icon.getFileIcon('webmIcon')\r\n    case 'image/webp': \r\n      return editor.icon.getFileIcon('webpIcon')\r\n    case 'video/x-ms-wmv': \r\n      return editor.icon.getFileIcon('wmvIcon')\r\n    case 'application/vnd.ms-excel': \r\n      return editor.icon.getFileIcon('xlsIcon')\r\n    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': \r\n      return editor.icon.getFileIcon('xlsxIcon')\r\n    case 'application/x-zip-compressed': \r\n    case 'application/zip': \r\n      return editor.icon.getFileIcon('zipIcon')\r\n\r\n    default:\r\n     return editor.icon.getFileIcon('defaultIcon')\r\n   }  \r\n}\r\nfunction getFileThumbnail(index, file, update){\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    let thumbnail = $popup.find('.fr-file-item-icon-' + index).get(0)\r\n    if (isImage(_getFileType(file)) && _getFileType(file) != 'image/gif' && _getFileType(file) != 'image/webp') {\r\n      if (thumbnail.children[0].localName != 'a') {\r\n        thumbnail.innerHTML = `<a target='_blank' href=''>` + thumbnail.innerHTML + `</a>`\r\n      }\r\n      let thumbnailLink = $popup.find('.fr-file-item-icon-' + index).get(0).children[0]\r\n      let thumbnailImage = thumbnailLink.children[0]\r\n      let reader = new FileReader()\r\n      if (update != null && update) {\r\n        let oldImage = file_list.get(index)\r\n        file.name = oldImage.name\r\n        file_list.set(index, file)\r\n      }\r\n      reader.onloadend = function () {\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).children[0].children[0].src = reader.result\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).children[0].href = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: _getFileType(file)\r\n        }))\r\n        $popup.find('.fr-file-item-icon-' + index).get(0).classList.add('file-item-thumbnail-hover')\r\n      }\r\n\r\n      if (file) {\r\n        reader.readAsDataURL(file);\r\n      } else {\r\n        let x = getFileThumbnailSrc(_getFileType(file))\r\n        thumbnail.innerHTML = `<svg height=\"40px\" width=\"40px\" viewBox=\"0 0 55 5\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n        ${x.path}\r\n        </svg>`\r\n      }\r\n    } else {\r\n      let x = getFileThumbnailSrc(_getFileType(file))\r\n      thumbnail.innerHTML = `<svg height=\"40px\" width=\"40px\" viewBox=\"0 0 55 55\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n      ${x.path}\r\n      </svg>`\r\n    }\r\n}\r\n\r\n\r\n  function getFileActionButtons(i) {\r\n    let fileActionButtons = ''\r\n\r\n    if(isVideo(_getFileType(file_list.get(i)))){\r\n      let disableAutoplay = 'fr-files-checkbox'\r\n      let disableAutoplayCheckBox = ''\r\n      if(!isFormatSupported(_getFileType(file_list.get(i)))) {\r\n        disableAutoplay = 'fr-checkbox-disabled'\r\n        disableAutoplayCheckBox = 'disabled'\r\n\r\n      }\r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>'  \r\n      fileActionButtons = `\r\n      <div class=\"fr-files-checkbox-line align-autoplay\">\r\n      <div id=\"checkbox-key-${i}\" class=\"${disableAutoplay} fr-autoplay-checkbox  fr-checkbox-${i}\">  \r\n                   \r\n      <input type=\"checkbox\" id=\"fr-file-autoplay-button-${i}\" class=\"fr-file-button-${i} fr-file-autoplay-button\" data-title=\"Edit\" data-param1=\"${i}\" role=\"button\" ${disableAutoplayCheckBox}/>\r\n\r\n      <span>${checkmark} </span>\r\n      </div>      \r\n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\r\n      </div>`\r\n    }\r\n\r\n    let pdf = 'application/pdf'\r\n    let txt = 'text/plain'\r\n    let doc = 'application/msword'\r\n    let docx = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n    let xlsx = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n    let xls = 'application/vnd.ms-excel'\r\n    let log = 'type/text'\r\n\r\n   let disbleView = ''\r\n\r\n   \r\n   if(isAudio(_getFileType(file_list.get(i))) || !isFormatSupported(_getFileType(file_list.get(i)))){\r\n    disableEdit = 'fr-disabled'\r\n   }\r\n    \r\n   if(isVideo(_getFileType(file_list.get(i)))){\r\n    disableEdit = 'fr-disabled'\r\n   }\r\n   \r\n \r\n   if(isFile(_getFileType(file_list.get(i))))\r\n\r\n   {\r\n     disableEdit = 'fr-disabled'\r\n    if(_getFileType(file_list.get(i)) == doc ||  _getFileType(file_list.get(i)) == docx )\r\n    {\r\n      if(editor.opts.googleOptions && !editor.helpers.isMobile())\r\n\r\n        {\r\n          if( editor.opts.googleOptions.API_KEY && editor.opts.googleOptions.CLIENT_ID ){\r\n          disableEdit = ''\r\n          }\r\n        }\r\n    } \r\n    \r\n    if(_getFileType(file_list.get(i)) == txt ||  _getFileType(file_list.get(i)) == doc || _getFileType(file_list.get(i)) == pdf || _getFileType(file_list.get(i)) == docx || _getFileType(file_list.get(i)) == xlsx || _getFileType(file_list.get(i)) == xls || _getFileType(file_list.get(i)) == log)\r\n\r\n    {\r\n     disbleView = ''\r\n    }\r\n   }\r\n   if (_getFileType(file_list.get(i)) === 'video/url') { \r\n     disableEdit = 'fr-disabled' \r\n   }\r\n    fileActionButtons += `<div class='fr-file-item-action-buttons' >\r\n                <button type=\"button\" id=\"fr-file-insert-button-${i}\" class=\" fr-doc-edit-${i} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n                fr-file-button-${i} fr-file-insert-button-${i} fr-file-insert-button\" data-cmd=\"imageInsertByUpload\" data-title=\"Insert\" data-param1=\"${i}\" tabIndex=\"2\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-5 0 28 28\" xlmns = \"http://w3.org/200/svg\"><path d = 'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 '></path></svg>\r\n                </button>\r\n\r\n                <button type=\"button\" id=\"fr-file-edit-button-${i}\" class=\" fr-doc-edit-${i} ${disableEdit} fr-img-icon fr-btn fr-command fr-submit \r\n                fr-file-action-icons fr-file-edit-button-${i} fr-file-button-${i} fr-file-edit-button\" data-cmd=\"editImage\" data-title=\"Edit\" data-param1=\"${i}\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"0 4 25 25\" xlmns = \"http://w3.org/200/svg\"><path d = 'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z'></path></svg>\r\n                </button>\r\n                \r\n                <span class=\"fr-file-view-${i}\"><button type=\"button\" id=\"fr-file-view-button-${i}\" class=\" fr-doc-edit-${i} ${disbleView} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n                fr-file-view-button-${i} fr-file-view-button\" data-cmd=\"viewImage\" data-title=\"View\" data-param1=\"${i}\" tabIndex=\"2\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"15 19 21 21\" xlmns = \"http://w3.org/200/svg\"> <path style=\"fill:none;stroke-width:0.9077;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;\" d=\"M 19.086094 16.541466 C 16.185625 16.541466 14.318281 19.447115 14.318281 19.447115 L 14.318281 19.555288 C 14.318281 19.555288 16.176719 22.475962 19.077187 22.475962 C 21.977656 22.475962 23.847969 19.576322 23.847969 19.576322 L 23.847969 19.465144 C 23.847969 19.465144 21.989531 16.541466 19.086094 16.541466 Z M 19.07125 21.024639 C 18.248906 21.024639 17.583906 20.357572 17.583906 19.53726 C 17.583906 18.716947 18.248906 18.04988 19.07125 18.04988 C 19.890625 18.04988 20.555625 18.716947 20.555625 19.53726 C 20.555625 20.357572 19.890625 21.024639 19.07125 21.024639 Z M 19.07125 21.024639 \" transform=\"matrix(1.315789,0,0,1.3,0,0)\"/></svg></button></span>\r\n\r\n                <button type=\"button\" id=\"fr-file-delete-button-${i}\" class=\" fr-doc-edit-${i} fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\r\n                fr-file-button-${i} fr-file-delete-button\" data-cmd=\"deleteImage\" data-title=\"Delete\" data-param1=\"${i}\" role=\"button\">\r\n                <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z'></path></svg>\r\n                </button>\r\n                 \r\n            </div>\r\n            <div id=\"user_area-${i}\" style=\"display: none;\">\r\n            \r\n              <div id=\"file_container\"></div>\r\n\r\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\r\n\r\n          </div> \r\n            `\r\n  \r\n    return fileActionButtons\r\n  }\r\n \r\n  function updateFileUploadingProgress(percent, index, loaded){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if(!loaded && percent <= 100){\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = true\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-files-checkbox')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-checkbox-disabled')\r\n      const row = $popup.find('.fr-file-progress-circle-'+index)\r\n      const progressCircle = $popup.find('.fr-file-upload-percent-'+index)\r\n      if (percent > 50) {\r\n        row.get(0).setAttribute('class', 'fr-file-progress-circle-'+index + ' progress-circle p' + Math.floor(percent) + ' over50');\r\n        progressCircle.get(0).innerHTML = Math.floor(percent) + '%';\r\n      } else {\r\n        row.get(0).setAttribute('class', 'fr-file-progress-circle-'+index + ' progress-circle p' + Math.floor(percent));\r\n        progressCircle.get(0).innerHTML = Math.floor(percent) + '%';\r\n      }\r\n      updateProgressBar(index, percent, loaded)\r\n      return\r\n    }\r\n    if(loaded){\r\n      $popup.find('.fr-checkbox-file-'+index).get(0).disabled = false\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.remove('fr-checkbox-disabled')\r\n      $popup.find('.fr-checkbox-'+index).get(0).classList.add('fr-files-checkbox')\r\n      const right = $popup.find('.fr-file-item-right-'+index)\r\n      right.get(0).innerHTML = getFileActionButtons(index)\r\n      updateProgressBar(index, 100, loaded)\r\n    }\r\n  }\r\n\r\n  function initialFileUploadStatus(index){\r\n    if (isNaN(index)) {\r\n      return\r\n    }\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const row = $popup.find('.fr-file-item-right-'+index)\r\n    row.get(0).innerHTML = `<div class='fr-file-item-action-buttons' >\r\n    <button type=\"button\" id=\"fr-file-cancel-upload-button-${index}\" class=\"fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n    fr-file-button-${index} fr-file-cancel-upload-button\" data-cmd=\"cancelUpload\" data-title=\"Cancel\" data-param1=\"${index}\" role=\"button\">\r\n    <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z'></path></svg>\r\n    </button>\r\n\r\n    <button type=\"button\" id=\"fr-upload-delete-button-${index}\" class=\"fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \r\n    fr-file-button-${index} fr-upload-delete-button\" data-cmd=\"deleteUpload\" data-title=\"Delete\" data-param1=\"${index}\" role=\"button\">\r\n    <svg style='margin:0px !important; opacity:0.9' class = \"fr-svg\" focusable=\"false\" width=\"16px\" height=\"16px\" viewBox = \"-2 3 30 30\" xlmns = \"http://w3.org/200/svg\"><path d = 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z'></path></svg>\r\n    </button>\r\n\r\n    <div class='progress-circle p0 fr-file-progress-circle-${index}'>\r\n                  <span class='fr-file-upload-percent-${index} fr-file-upload-percent'>0%</span>\r\n                  <div class='left-half-clipper'>\r\n                    <div class='first50-bar'></div>\r\n                    <div class='value-bar'></div>\r\n                  </div>\r\n                </div>\r\n            </div>`\r\n    \r\n    fileUploads.set(index,0)\r\n  }\r\n\r\n  function updateProgressBar(index, percent, loaded){\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    $popup.find('.fr-progress-bar').removeClass('fr-none').addClass('fr-display-block')\r\n\r\n    if($popup.find('.fr-upload-progress').hasClass('fr-height-set'))\r\n      editor.popups.setFileListHeight($popup)\r\n    \r\n    let totalUploadPercent = 0;\r\n    fileUploads.set(index, percent)\r\n    fileUploads.forEach(function(value, index){\r\n      totalUploadPercent += value\r\n    })\r\n    totalUploadPercent = totalUploadPercent/fileUploads.size\r\n    if(percent == 100 && loaded){\r\n      completedUploads++;\r\n    }\r\n    $popup.find('.fr-command[data-cmd=\"filesUpload\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesByURL\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').addClass('fr-disabled')\r\n    $popup.find('.fr-progress-bar').get(0).style.width = totalUploadPercent+'%'\r\n    if(completedUploads == fileUploads.size){\r\n      $popup.find('.fr-progress-bar').removeClass('fr-display-block').addClass('fr-none') \r\n      fileUploads = new Map()\r\n      completedUploads = 0\r\n      $popup.find('.fr-command[data-cmd=\"filesUpload\"]').removeClass('fr-disabled')\r\n      $popup.find('.fr-command[data-cmd=\"filesByURL\"]').removeClass('fr-disabled')\r\n      $popup.find('.fr-command[data-cmd=\"filesEmbed\"]').removeClass('fr-disabled')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert image using URL callback.\r\n   */\r\n  function validURL(str) {\r\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\r\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\r\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\r\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\r\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\r\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\r\n    return !!pattern.test(str);\r\n  }\r\n  function insertByURL() {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    const $input = $popup.find('.fr-files-by-url-layer input')\r\n    let urls = $input.val().trim().split(/[ ,]+/)\r\n    let $urls =[]\r\n    let j=0\r\n    for( let i=0; i<urls.length;i++)\r\n    {\r\n      \r\n      if(validURL(urls[i]))\r\n      {\r\n        $urls[j]=urls[i]\r\n        j++\r\n      }\r\n    }\r\n    if($urls.length == 0)\r\n    {\r\n      _showErrorMessage(editor.language.translate('Url entered is invalid. Please try again.'));\r\n      return\r\n    }\r\n    if ($input.val().trim().length > 0 && $urls.length > 0) {\r\n      var files = []\r\n      var files_index = []\r\n      var initial_index = fileListIndex\r\n      var validUrls = $urls.length\r\n      $urls.forEach(function (url, index) {\r\n        if (url.trim().length == 0){\r\n          --validUrls\r\n          if (fileListIndex == initial_index + validUrls) {\r\n            addFilesToList(files, files_index)\r\n          }\r\n        }\r\n        else {\r\n          hideProgressBar()\r\n          showProgressBar()\r\n          _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n\r\n          const file_url = url.trim()\r\n\r\n          // check if URL is a video\r\n          let video = getVideoByURL(file_url)\r\n          if (video) {\r\n            let obj = {\r\n              link: file_url,\r\n              name: file_url,\r\n              type: 'video/url',\r\n              size: 2,\r\n              video: video\r\n            }\r\n            file_list.set(initial_index + index, obj)\r\n            showFileUploadProgressLayer(initial_index + index)\r\n            hideProgressBar()\r\n            showProgressBar()\r\n            _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n            file_list_values.set(initial_index + index, obj)\r\n            ++fileListIndex\r\n            if (fileListIndex == initial_index + validUrls) {\r\n              addFilesToList(files, files_index)\r\n            }\r\n          } else {\r\n            const xhr = new XMLHttpRequest()\r\n            xhr.onload = function () {\r\n\r\n              if (this.status == 200) {\r\n                let file = new Blob([this.response], {\r\n                  type: this.response.type || ''\r\n                })\r\n                file.name = getUrlFileName(file_url)\r\n                file.link = file_url\r\n                if (isImage(this.response.type)) {\r\n                  file.sanitize = true\r\n                  file.existing_image = $current_image\r\n                } else if (isFile(this.response.type)) {\r\n                  file.text = getUrlFileName(file_url)\r\n                }\r\n                files.push(file)\r\n                files_index.push(initial_index + index)\r\n                file_list.set(initial_index + index, file)\r\n                showFileUploadProgressLayer(initial_index + index)\r\n                if(unsupported_file_types.indexOf(_getFileType(file)) > -1 || !_getFileType(file)){\r\n                  _throwError(BAD_FILE_TYPE, null, null, initial_index + index)\r\n                }\r\n              } else {\r\n                let file = new Blob([this.response], {\r\n                  type: this.response.type || ' '\r\n                })\r\n                file.name = getUrlFileName(file_url)\r\n                file.link = file_url\r\n                file_list.set(initial_index + index, file)\r\n                showFileUploadProgressLayer(initial_index + index)\r\n                _throwError(BAD_LINK, this.response, $current_image, initial_index + index)\r\n              }\r\n              hideProgressBar()\r\n              showProgressBar()\r\n              _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n              ++fileListIndex\r\n              if (fileListIndex == initial_index + validUrls) {\r\n                addFilesToList(files, files_index)\r\n              }\r\n            }\r\n\r\n            // If file couldn't be uploaded, insert as it is.\r\n            xhr.onerror = function () {\r\n              let obj = {\r\n                link: file_url,\r\n                name: getUrlFileName(file_url),\r\n                size: 0,\r\n                type: ''\r\n              }\r\n              _throwError(ERROR_LINK, this.response, $current_image, initial_index + index)\r\n              let file_index = fileListIndex\r\n              file_list.set(file_index, obj)\r\n              showFileUploadProgressLayer(file_index)\r\n              hideProgressBar()\r\n              showProgressBar()\r\n              _setProgressMessage(editor.language.translate('Loading file(s)'))\r\n              ++fileListIndex\r\n              if (fileListIndex == initial_index + validUrls) {\r\n                addFilesToList(files, files_index)\r\n              }\r\n            }\r\n\r\n            xhr.open('GET', `${editor.opts.imageCORSProxy}/${file_url}`, true)\r\n            xhr.responseType = 'blob'\r\n\r\n            xhr.send()\r\n          }\r\n        }\r\n      });\r\n      $input.val('')\r\n      $input.blur()\r\n    }\r\n  }\r\n    \r\n  function addFilesToList(files, files_index) {\r\n    hideProgressBar()\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find('.fr-upload-progress-layer').addClass('fr-active')\r\n    files.forEach(function (file, i) {\r\n      // If image needs to be uploaded\r\n      if (isImage(_getFileType(file)) && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy && editor.opts.imageUpload) {\r\n        upload(file, files, $current_image, files_index[i])\r\n      } else {\r\n        file_list_values.set(files_index[i], file)\r\n      }\r\n    })\r\n  }\r\n\r\n  function getVideoByURL(link) {\r\n    if (typeof link == 'undefined') {\r\n      return link\r\n    }\r\n\r\n    let video = null\r\n\r\n    if (!/^http/.test(link)) {\r\n      link = `https://${link}`\r\n    }\r\n\r\n    if (editor.helpers.isURL(link)) {\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        const vp = FE.VIDEO_PROVIDERS[i]\r\n\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n          video = link.replace(vp.url_regex, vp.url_text)\r\n          video = vp.html.replace(/\\{url\\}/, video)\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return video\r\n  }\r\n\r\n  function _editImg($img) {\r\n    if ($img && $img.get) {\r\n      _edit.call($img.get(0))\r\n    }\r\n  }\r\n\r\n  function viewImage(index) {\r\n    if(!isFormatSupported(_getFileType(file_list_values.get(index)))){\r\n      let link = file_list_values.get(index).link\r\n      let text = file_list_values.get(index).link\r\n      if(file_list.get(index) && file_list.get(index).name){\r\n        text = file_list.get(index).name\r\n      } else if(file_list_values.get(index).text){\r\n        text = file_list_values.get(index).text\r\n      }\r\n      if(link.indexOf('blob:') === 0 && editor.browser.msie && window.navigator && window.navigator.msSaveBlob){\r\n        window.navigator.msSaveBlob(file_list.get(index), text);\r\n      }\r\n      else{\r\n        let el = document.createElement('a');\r\n        el.href = link;\r\n        el.download = text;\r\n        el.click()\r\n      }\r\n      return false\r\n    }\r\n    let $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup.find('.fr-file-view-image-' + index).length > 0) {\r\n      $popup.find('.fr-file-view-image-' + index)[0].remove()\r\n    } else {\r\n      const viewImages = $popup.find('.fr-file-view')\r\n      for (let i = 0; i < viewImages.length; i++) {\r\n        viewImages.get(i).remove()\r\n      }\r\n      let imageView = $popup.find('.fr-file-view-' + index)\r\n\r\n      if (isImage(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image = `<div class=\"fr-file-view-modal\">\r\n              <div class=\"fr-file-view-modal-content\">\r\n              <div class=\"fr-file-view-close\">&times;</div> \r\n                <img src=\"` + file_list_values.get(index).link + `\" class ='fr-file-view-image'/>\r\n                </div>\r\n              </div>`\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isVideo(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image\r\n        if (file_list_values.get(index).hasOwnProperty('video')) {\r\n          let videoIframe = file_list_values.get(index).video.substring(file_list_values.get(index).video.indexOf('src') + 3)\r\n          let url = videoIframe.substring(videoIframe.indexOf('\"') + 1)\r\n          url = url.substring(0, url.indexOf('\"'))\r\n          let autoplayURL = url + '&autoplay=1'\r\n          image = `<div class=\"fr-file-view-modal\">\r\n        <div class=\"fr-file-view-modal-content \">\r\n          <div class=\"fr-file-view-close\">&times;</div> \r\n          <iframe width=\"640\" height=\"360\" src=\"${autoplayURL}\" frameborder=\"0\" class = \"fr-file-view-image\"></iframe>\r\n        </div>\r\n      </div>`\r\n        } else {\r\n          image = `<div class=\"fr-file-view-modal\">\r\n          <div class=\"fr-file-view-modal-content \">\r\n            <div class=\"fr-file-view-close\">&times;</div> \r\n            <video controls src=\"` + file_list_values.get(index).link + `\"  class ='fr-file-view-image' autoplay></video>\r\n          </div>\r\n        </div>`\r\n        }\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isAudio(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let image = `<div class=\"fr-file-view-modal\">\r\n        <div class=\"fr-file-view-modal-content \">\r\n          <div  class=\"fr-file-view-close\">&times;</div> \r\n          <audio controls=\"controls\"  class ='fr-file-view-image' autoplay>\r\n\r\n          <source src=\"${file_list_values.get(index).link}\" type=\"${_getFileType(file_list_values.get(index))}\" />\r\n\r\n            Your browser does not support the audio element.\r\n          </audio>\r\n        </div>\r\n      </div>`\r\n        imageView[0].innerHTML = image + imageView[0].innerHTML\r\n\r\n      } else if (isFile(_getFileType(file_list_values.get(index)))) {\r\n\r\n        let link = file_list_values.get(index).link\r\n        let text = file_list_values.get(index).text\r\n        if (link.endsWith('.pdf') || link.endsWith('.txt')) {\r\n          let image = `<div class=\"fr-file-view-modal\">\t\r\n              <div class=\"fr-file-view-modal-content \" >\t\r\n              <div class=\"fr-file-view-close\">&times;</div> \t\r\n              <iframe src=\"${link}\" style='background-color: white;' height='50%' width='50%' title=\"${text}\" class=\"fr-file fr-file-view-image\"></iframe>\t\r\n            </div>\t\r\n            </div>`\r\n          imageView[0].innerHTML = image + imageView[0].innerHTML\r\n        } else {\r\n          if(link.indexOf('blob:') === 0 && editor.browser.msie && window.navigator && window.navigator.msSaveBlob){\r\n            window.navigator.msSaveBlob(file_list.get(index), text);\r\n          }\r\n          else{\r\n            let el = document.createElement('a');\r\n            el.href = link;\r\n            el.download = text;\r\n            el.click()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $img = $(this)\r\n\r\n    $img.removeClass('fr-uploading')\r\n\r\n    // Select the image.\r\n    if ($img.next().is('br')) {\r\n      $img.next().remove()\r\n    }\r\n\r\n    if(fileKeys.length == 0 || (fileKeys.length > 0 && fileKeys.length == imageEditIndex)){\r\n      editImageValue = $img\r\n    }\r\n    if($img.get(0).tagName == 'VIDEO' || $img.get(0).tagName == 'AUDIO') {\r\n      editor.selection.setAfter($img.parent())\r\n    }\r\n    else {\r\n      editor.selection.setAfter($img)\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n    editor.events.trigger('filesManager.loaded', [$img])\r\n    insertFiles(fileKeys)\r\n  }\r\n\r\n   /**\r\n   * Keep videos in sync when content changed.\r\n   */\r\n  let videos \r\n\r\n  function _syncVideos() {\r\n\r\n    // Get current videos.\r\n    const c_videos = Array.prototype.slice.call(editor.el.querySelectorAll('video, .fr-video > *')) \r\n\r\n    // Current videos src.\r\n    const video_srcs = [] \r\n    let i \r\n\r\n    for (i = 0; i < c_videos.length; i++) {\r\n      video_srcs.push(c_videos[i].getAttribute('src')) \r\n\r\n      $(c_videos[i]).toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n      if (c_videos[i].getAttribute('class') === '') c_videos[i].removeAttribute('class') \r\n\r\n      if (c_videos[i].getAttribute('style') === '') c_videos[i].removeAttribute('style') \r\n    }\r\n\r\n    // Loop previous videos and check their src.\r\n    if (videos) {\r\n      for (i = 0; i < videos.length; i++) {\r\n        if (video_srcs.indexOf(videos[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('video.removed', [$(videos[i])]) \r\n        }\r\n      }\r\n    }\r\n\r\n    // Current videos are the old ones.\r\n    videos = c_videos \r\n  }\r\n\r\n\r\n  let files\r\n\r\n  function _syncFiles() {\r\n\r\n    // Get current files.\r\n    const c_files = Array.prototype.slice.call(editor.el.querySelectorAll('a.fr-file'))\r\n\r\n    // Current files src.\r\n    const file_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_files.length; i++) {\r\n      file_srcs.push(c_files[i].getAttribute('href'))\r\n    }\r\n\r\n    // Loop previous files and check their src.\r\n    if (files) {\r\n      for (i = 0; i < files.length; i++) {\r\n        if (file_srcs.indexOf(files[i].getAttribute('href')) < 0) {\r\n          editor.events.trigger('file.unlink', [files[i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current files are the old ones.\r\n    files = c_files\r\n  }\r\n\r\n  /**\r\n   * Insert all files into the editor.\r\n   */\r\n\r\n   function insertAllFiles()\r\n   {\r\n    fileKeys = []\r\n    const $popup = editor.popups.get('filesManager.insert')  \r\n    function insertMapElements(el, index, map) {      \r\n      if(el.children['target'].checked)\r\n        {\r\n          fileKeys.push(parseInt(el.id.split('-').pop()))\r\n          if(isImage(file_list_values.get(parseInt(el.id.split('-').pop())).type) && imageEditIndex == -1){\r\n            imageEditIndex = index\r\n          }\r\n        }\r\n     }\r\n     imageEditIndex = -1\r\n     editImageValue = null\r\n     $popup.find('.fr-insert-checkbox').toArray().forEach(insertMapElements)\r\n     insertFiles(fileKeys)\r\n    checkInsertAllState()\r\n  }\r\n\r\n   /**\r\n   * Delete all files.\r\n   */\r\n\r\n  function deleteAllFiles()\r\n  {\r\n   const $popup = editor.popups.get('filesManager.insert')  \r\n   function deleteMapElements(el, index, map) {\r\n     if(el.children['target'].checked)\r\n       {\r\n         let fileIndex = parseInt(el.id.split('-').pop())\r\n         if(XMLHttpRequests.has(fileIndex)){\r\n          XMLHttpRequests.delete(fileIndex)\r\n         }\r\n         deleteFile(fileIndex)\r\n       }\r\n    }\r\n    $popup.find('.fr-insert-checkbox').toArray().forEach(deleteMapElements)\r\n    checkInsertAllState()\r\n  }\r\n\r\n   function insertFiles(fileKeys){\r\n     if(fileKeys != null){\r\n     if(fileKeys.length == 0){\r\n       if(editImageValue != null){\r\n         if(editImageValue.get(0).tagName == 'VIDEO'){\r\n           editor.video._editVideo(editImageValue.parent())\r\n         }\r\n         else if(editImageValue.get(0).tagName == 'IMG'){\r\n          editor.image.edit(editImageValue)\r\n         }\r\n         else{\r\n           editImageValue.trigger('click')\r\n         }\r\n         editor.toolbar.disable()\r\n        } \r\n        return\r\n      }\r\n        let index = fileKeys.shift()\r\n        insert(index, fileKeys)\r\n      }\r\n    }\r\n    \r\n  function isChildWindowOpen() {\r\n    return $child_window_open\r\n  }\r\n\r\n  function setChildWindowState(childWindowState) {\r\n    if(childWindowState !== undefined) {\r\n      $child_window_open = childWindowState\r\n    }    \r\n  }\r\n // file edit task starts\r\n\r\n var docEditor;  \r\n\r\n function loadScripts(array,callback){\r\n   var loader = function(src,handler){\r\n       var script = document.createElement(\"script\");\r\n       script.src = src;\r\n       script.onload = function() { \r\n         this.onload=function(){};docEditor.handleClientLoad();\r\n       }\r\n       script.onreadystatechange = function(){\r\n         if (this.readyState === 'complete') this.onload();\r\n       }\r\n       var head = document.getElementsByTagName(\"head\")[0];\r\n       (head || document.body).appendChild( script );\r\n   };\r\n   (function run(){\r\n       if(array.length!=0){\r\n           loader(array.shift(), run);\r\n       }else{\r\n           callback && callback();\r\n       }\r\n   })();\r\n}\r\n\r\n  /**\r\n   * Edit Image\r\n   */\r\n  function editImage(index) {\r\n    let isChildWindowTriggered = false\r\n\r\n    if (isVideo(_getFileType(file_list_values.get(index)))) {\r\n      editor.trimVideoPlugin.trimVideo(file_list.get(index), index,file_list);\r\n      isChildWindowTriggered = true\r\n    }else if(isImage(_getFileType(file_list_values.get(index)))){\r\n\r\n      let src = file_list_values.get(index).link;\r\n      const image = editor.o_doc.createElement('img');\r\n      image.src = src;\r\n      $current_image = image;\r\n      $current_image_index = index;\r\n      editor.imageTUI.launch(editor, false, index);\r\n      isChildWindowTriggered = true\r\n\r\n    }else if(isFile(_getFileType(file_list_values.get(index)))){\r\n\r\n      \r\n    var options={\r\n      apiKey: editor.opts.googleOptions.API_KEY, // google developer console API Key\r\n      clientId:editor.opts.googleOptions.CLIENT_ID, // google developer client ID\r\n      authorizeButton: `authorize_button-${index}`, // authorize in Google button element ID\r\n      signoutButton: 'signout_button', // sign out button element ID\r\n      userArea: `user_area-${index}`, // authorized user HTML container element ID \r\n      fileInput: 'file_input', // file upload input ID\r\n      fileIndex: index, // created\r\n      file: file_list.get(index), // created//, type=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"),\r\n      fileContainer: 'file_container', // HTML container ID for file editor \r\n      loadingText: 'File is being uploaded...', // text that shown while file is loaded\r\n      events: {\r\n        onInvalidFile: function(text){console.log(text);}, // fired if file is not uploaded or not supported (supported files are .DOC and .DOCX)\r\n        onError: function(error){console.log(error);} // fired in case of any other errors\r\n      }\r\n   }   \r\n    docEditor = googleDocEditor(options);\r\n         loadScripts([\r\n        \"https://apis.google.com/js/api.js\"\r\n     ],function(){\r\n         console.log('All things are loaded');\r\n     });\r\n    }\r\n    if (isChildWindowTriggered) {\r\n      $child_window_open = true\r\n    } \r\n  }\r\n\r\n  /**GoogleDocEdit Code */\r\n  function googleDocEditor(options){\r\n\r\n    // Array of API discovery doc URLs for APIs used by the quickstart\r\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/drive/v2/rest\"];\r\n    // Authorization scopes required by the API; multiple scopes can be\r\n    // included, separated by spaces.\r\n    var SCOPES = 'https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata';\r\n    var DEFAULT_FIELDS = 'id,title,mimeType,userPermission,editable,copyable,shared,fileSize';\r\n    var BOUNDARY = '-------314159265358979323846';\r\n    var DELIMITER = \"\\r\\n--\" + BOUNDARY + \"\\r\\n\";\r\n    var CLOSE_DELIMITER = \"\\r\\n--\" + BOUNDARY + \"--\";\r\n    var ALLOWED_FILES = ['doc', 'docx'];\r\n    var authorizeButton = document.getElementById(options.authorizeButton);\r\n    var userArea = document.getElementById(options.userArea);\r\n    var fileIndex = fileIndex; //created\r\n    var responseFileId; //created\r\n    \r\n    if (!options.events) {\r\n      options.events = {};\r\n    }\r\n    \r\n    options.events.onInvalidFile = options.events.onInvalidFile || function(text){console.log(text);};\r\n    options.events.onError = options.events.onError || function(text){console.log(text);};\r\n    /**\r\n        *  Initializes the API client library and sets up sign-in state\r\n        *  listeners.\r\n        */\r\n    function initClient() {\r\n      gapi.client.init({\r\n        apiKey: options.apiKey,\r\n        clientId: options.clientId,\r\n        discoveryDocs: DISCOVERY_DOCS,\r\n        scope: SCOPES\r\n          }).then(function () {\r\n            // Listen for sign-in state changes.\r\n            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\r\n            // Handle the initial sign-in state.\r\n            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n            handleAuthClick();\r\n          }, function(error) {\r\n          options.events.onError(error);\r\n          });\r\n      }\r\n\r\n  /**\r\n       *  Called when the signed in status changes, to update the UI\r\n       *  appropriately. After a sign-in, the API is called.\r\n       */\r\n    function updateSigninStatus(isSignedIn) {\r\n        if (isSignedIn) {\r\n         userArea.style.display = 'block';\r\n        } \r\n      }\r\n\r\n    /**\r\n      *  Sign in the user upon button click.\r\n      */\r\n    function handleAuthClick(event) {\r\n      if(!gapi.auth2.getAuthInstance().isSignedIn.get() || (gapi.auth.getToken() !== undefined && gapi.auth.getToken().access_token === undefined)){ \r\n        Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function(){\r\n        handleFileUpload();\r\n      })}\r\n      else{\r\n        handleFileUpload();\r\n      }\r\n     \r\n    }\r\n\r\n    /**\r\n      *  Sign out the user upon button click.\r\n      */\r\n    function handleSignoutClick(event) {\r\n      var accessToken = gapi.auth.getToken().access_token;\r\n      var id = responseFileId;\r\n      var url = \"https://docs.google.com/feeds/download/documents/export/Export?id=\" + id + \"&format=docx&access_token=\" + accessToken;\r\n      var xhr = new XMLHttpRequest();\r\n      xhr.open('get', url);\r\n      xhr.responseType = \"arraybuffer\";\r\n      xhr.onload = function() {   \r\n        var link =new Blob([new Uint8Array(this.response)], {\r\n        type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n        });\r\n\r\n        const currentFile=file_list.get(options.fileIndex)\r\n        link.name = currentFile.name;\r\n        link.lastModified = currentFile.lastModified;\r\n        link.lastModifiedDate = currentFile.lastModifiedDate;\r\n        file_list.set(options.fileIndex, link);\r\n        editor.filesManager.upload(\r\n          link,\r\n          file_list_values,\r\n          $current_image,\r\n          options.fileIndex\r\n          ); \r\n          closeEditDocContainer();\r\n        };\r\n      xhr.send();\r\n    return\r\n  }\r\n    \r\n    /**\r\n      * Handles file uploaded event\r\n      */\r\n    function handleFileUpload(event) {\r\n      disableOnEdit(options.fileIndex)\r\n      var file = options.file; //created\r\n      if (!file) {\r\n        options.events.onInvalidFile(\"File is not selected\");\r\n        return;\r\n      }\r\n      saveSingleFile(file, showEditableDoc);\r\n    };\r\n  \r\n    /**\r\n      * Shows google doc in iframe\r\n      */\r\n    function showEditableDoc(doc) {\r\n      responseFileId = doc.id; //created\r\n      var googleDocUrl = 'https://docs.google.com/document/d/' + doc.id +'/edit';     \r\n      const body = editor.o_doc.body;\r\n      const editDocContainer = editor.o_doc.createElement('div');\r\n      editDocContainer.setAttribute('id', 'editDocContainer');\r\n      editDocContainer.style.cssText ='position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block';\r\n     // margin-top is given for wordpress-framework\r\n      editDocContainer.innerHTML = '<div style=\"margin-top:25px; text-align:center\"><label>Sign Out : </label><input type=\"checkbox\" id =\"markSignOut\" role=\"button\"/>  <button id=\"signout_button\"  class=\"fr-trim-button\" >Save </button> <button id=\"cancel_file_edit\" class=\"fr-trim-button\">Cancel</button></div>  <iframe title=\"Edit your file\" frameBorder=\"0\" width=\"100%\" height=\"700px\" src=\"' + googleDocUrl + '\"></iframe>';\r\n      body.appendChild(editDocContainer);     \r\n      document.getElementById('signout_button').onclick=handleSignoutClick;\r\n      document.getElementById('cancel_file_edit').onclick=closeEditDocContainer;\r\n     \r\n    }\r\n    function closeEditDocContainer(){\r\n      document.getElementById('markSignOut').checked && gapi.auth2.getAuthInstance().signOut().then(function(){ \r\n        if (gapi.auth.getToken()) {\r\n          gapi.auth.getToken().access_token = undefined;\r\n          }\r\n         });\r\n      let container = document.getElementById('editDocContainer');\r\n      container.parentNode.removeChild(container);\r\n      if(document.getElementById(`user_area-${options.fileIndex}`))\r\n       document.getElementById(`user_area-${options.fileIndex}`).style.display = 'none';\r\n      enableAfterEdit(options.fileIndex);\r\n\r\n    }\r\n      /**\r\n      * Saves file to google drive\r\n      */\t\r\n    function saveSingleFile(file, callback) {\r\n      var reader = new FileReader();\r\n      reader.readAsArrayBuffer(file);\r\n      reader.onload = function(e) {\r\n        var contentType = 'application/vnd.google-apps.document';\r\n        var metadata = {\r\n          'title': file.name,\r\n          'mimeType': contentType\r\n        };\r\n        var binary = '';\r\n          var bytes = new Uint8Array( reader.result );\r\n          var len = bytes.byteLength;\r\n          for (var i = 0; i < len; i++) {\r\n              binary += String.fromCharCode(bytes[i]);\r\n          }\r\n        var base64Data = btoa(binary);\r\n        var multipartRequestBody =\r\n          DELIMITER +\r\n          'Content-Type: application/json; charset=UTF-8\\r\\n\\r\\n' +\r\n          JSON.stringify(metadata) +\r\n          DELIMITER +\r\n          'Content-Type: ' + 'application/octet-stream' + '\\r\\n' +\t\t\t\t\r\n          'Content-Transfer-Encoding: base64\\r\\n' +\r\n          '\\r\\n' +\r\n          base64Data +\r\n          CLOSE_DELIMITER;\r\n                \r\n        var request = gapi.client.request({\r\n          'path': '/upload/drive/v2/files',\r\n          'method': 'POST',\r\n          'params': {\r\n            'uploadType': 'multipart',\r\n            'fields': DEFAULT_FIELDS\r\n          },\r\n          'headers': {\r\n            'Content-Type': 'multipart/related; boundary=\"' + BOUNDARY + '\"',\r\n            'Content-Length': multipartRequestBody.Length\r\n          },\r\n          'body': multipartRequestBody\r\n        });\r\n        if (!callback) {\r\n          callback = function(file) {\r\n            console.log(file);\r\n          };\r\n        }\r\n        request.execute(function(doc, resp) {\r\n          if (!doc.error) {\r\n            callback(doc);\r\n          } else {\r\n            options.events.onError(doc.error);\r\n          }\r\n          \r\n        });\r\n      }\r\n      };\r\n      \r\n    var docEditor = {};\r\n    docEditor.handleClientLoad = function() {\r\n      gapi.load('client:auth2', initClient);\r\n       };\r\n    return docEditor;\r\n  }\r\n\r\n  function disableOnEdit(index){\r\n    const buttons = document.getElementsByClassName(`fr-doc-edit-${index}`);\r\n    for(var i = 0; i < buttons.length; i++){\r\n      buttons[i].setAttribute('disabled',true)\r\n      buttons[i].classList.add('fr-disabled')\r\n    }\r\n  }\r\n\r\n  function enableAfterEdit(index){\r\n\r\n    const buttons = document.getElementsByClassName(`fr-doc-edit-${index}`);\r\n    for(var i = 0; i < buttons.length; i++){\r\n      buttons[i].removeAttribute('disabled')\r\n      buttons[i].classList.remove('fr-disabled')\r\n    }\r\n  }\r\n \r\n\r\n  function saveImage($img) {\r\n    let obj = file_list_values.get($current_image_index);\r\n    obj.link = window.URL.createObjectURL(\r\n      new Blob($img, { type: 'image/png' })\r\n    );\r\n    file_list_values.set($current_image_index, obj);\r\n  }\r\n\r\n  /*\r\n  * Get file.type for machines which do not return type by default.\r\n  */\r\n  function _getFileType (file)\r\n  {\r\n\r\n    let fileTypeMap = [['.doc', 'application/msword'], ['.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'], ['.gif', 'image/gif'], ['.jpeg', 'image/jpeg'], ['.jpg', 'image/jpeg'], ['.txt', 'text/plain'], ['.log', 'type/text'], ['.mov', 'video/quicktime'], ['.mp3', 'audio/mpeg'], ['.mp4', 'video/mp4'], ['.ogg', 'audio/ogg'], ['.ogv', 'video/ogg'], ['.pdf', 'application/pdf'], ['.png', 'image/png'], ['.webm', 'video/webm'], ['.webp', 'image/webp'], ['.wmv', 'video/x-ms-wmv'], ['.xls', 'application/vnd.ms-excel'], ['.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'], ['.zip', 'application/x-zip-compressed']];\r\n\r\n\r\n    if(file.type == \"\")\r\n    {\r\n      let re = /(?:\\.([^.]+))?$/;\r\n      let ext = re.exec(file.name)[1];\r\n      let fileType\r\n      fileTypeMap.forEach(function(value, index){\r\n        if(value[0] == `.${ext}`){\r\n          fileType = value[1];\r\n        }\r\n      })\r\n      return fileType\r\n    }\r\n    return file.type\r\n  }\r\n\r\n  /**\r\n   * Insert image into the editor.\r\n   */\r\n\r\n  function insert(index, fileKeys) {\r\n    if (isFile(_getFileType(file_list_values.get(index))) || !isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n      let link = file_list_values.get(index).link\r\n      let text = file_list_values.get(index).text\r\n      if(!text && file_list.get(index) && file_list.get(index).name){\r\n        text = file_list.get(index).name\r\n      }\r\n       let response = file_list_values.get(index).response\r\n      editor.edit.on()\r\n\r\n      // Focus in the editor.\r\n      editor.events.focus(true)\r\n      editor.selection.restore()\r\n\r\n      if (editor.opts.fileUseSelectedText && editor.selection.text().length) {\r\n        text = editor.selection.text()\r\n      }\r\n\r\n      if (link.endsWith('.pdf') || link.endsWith('.txt')) {\r\n        let code = `<iframe src=\"${link}\" title=\"${text}\" width=\"”100%”\" height=\"”100%”\" class=\"fr-file\"></iframe>`\r\n        insertEmbeddedFile(code, true)\r\n      } else {\r\n        editor.html.insert(`<a href=\"${link}\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">${text}</a>`)\r\n      }\r\n      // Get the file.\r\n      const $file = editor.$el.find('#fr-inserted-file')\r\n\r\n      $file.removeAttr('id')\r\n\r\n      editor.undo.saveStep()\r\n\r\n      _syncFiles()\r\n      editor.selection.clear()\r\n      editor.selection.setAfter($file)\r\n\r\n      editor.events.trigger('file.inserted', [$file, response])    \r\n      insertFiles(fileKeys)\r\n    }\r\n\r\n\r\n    if (isImage(_getFileType(file_list_values.get(index))) && isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n\r\n      let link = file_list_values.get(index).link;\r\n      let sanitize = file_list_values.get(index).sanitize;\r\n      let data = file_list_values.get(index).data;\r\n      let $existing_img = file_list_values.get(index).$existing_img;\r\n      let response = file_list_values.get(index).response;\r\n\r\n    if ($existing_img && typeof $existing_img === 'string') {\r\n      $existing_img = editor.$($existing_img)\r\n    }\r\n\r\n    editor.edit.off()\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n\r\n    const image = new Image()\r\n\r\n    image.onload = function () {\r\n      let $img\r\n      let attr\r\n\r\n      if ($existing_img) {\r\n        if (!editor.undo.canDo() && !$existing_img.hasClass('fr-uploading')) editor.undo.saveStep()\r\n\r\n        let old_src = $existing_img.data('fr-old-src')\r\n\r\n        if ($existing_img.data('fr-image-pasted')) {\r\n          old_src = null\r\n        }\r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing image.\r\n          $img = $existing_img.clone()\r\n            .removeData('fr-old-src')\r\n            .removeClass('fr-uploading')\r\n            .removeAttr('data-fr-image-pasted')\r\n\r\n          // Remove load event.\r\n          $img.off('load')\r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_img.attr('src', old_src)\r\n\r\n          // Replace existing image with its clone.\r\n          $existing_img.replaceWith($img)\r\n\r\n        }\r\n        else {\r\n          $img = $existing_img\r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $img.get(0).attributes\r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i]\r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                $img.attr(`data-${attr}`, data[attr])\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $img.on('load', _loadedCallback)\r\n        $img.attr('src', link)\r\n        editor.edit.on()\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger(old_src ? 'image.replaced' : 'image.inserted', [$img, response])\r\n      }\r\n      else {\r\n        $img = _addImage(link, data, _loadedCallback)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger('image.inserted', [$img, response])\r\n      }\r\n    }\r\n\r\n    image.onerror = function () {\r\n      _throwError(BAD_LINK, null, null, index)\r\n      insertFiles(fileKeys)\r\n    }\r\n    image.src = link\r\n    }\r\n\r\n\r\n    if ((isVideo(_getFileType(file_list_values.get(index))) || isAudio(_getFileType(file_list_values.get(index)))) && isFormatSupported(_getFileType(file_list_values.get(index)))) {\r\n      current_index=index\r\n      if (_getFileType(file_list_values.get(index)) == 'video/url') {\r\n\r\n\r\n        let video_autoplay = false\r\n        if (document.getElementById('fr-file-autoplay-button-' + index) !== undefined) {\r\n          video_autoplay = document.getElementById('fr-file-autoplay-button-' + index).checked\r\n        }\r\n        if (video_autoplay && file_list_values.get(index) !== undefined && file_list_values.get(index).video.indexOf('iframe') > -1 \r\n          && file_list_values.get(index).video.indexOf('autoplay=1') < 0) {\r\n        \r\n          let url = file_list_values.get(index).video.substring(file_list_values.get(index).video.indexOf('src') + 3)\r\n          url = url.substring(url.indexOf('\"') + 1)\r\n          url = url.substring(0, url.indexOf('\"'))\r\n          let appendSymbol = '&'\r\n          if (url.indexOf('?') < 0) {\r\n            appendSymbol = '?'\r\n          }\r\n\r\n          file_list_values.get(index).video = file_list_values.get(index).video.replace(url, (url += appendSymbol + 'autoplay=1'))             \r\n        }\r\n        else if(!video_autoplay && file_list_values.get(index).video.indexOf('iframe' > -1)) {\r\n          if (file_list_values.get(index).video.indexOf('&autoplay=1') > -1) {\r\n            file_list_values.get(index).video = file_list_values.get(index).video.replace('&autoplay=1', '')\r\n          }\r\n\r\n          if (file_list_values.get(index).video.indexOf('?autoplay=1') > -1) {\r\n            file_list_values.get(index).video = file_list_values.get(index).video.replace('?autoplay=1', '')\r\n          }\r\n        }\r\n\r\n        // Make sure we have focus.\r\n        editor.events.focus(true)\r\n        editor.selection.restore()\r\n\r\n        editor.html.insert(`<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video fr-deletable\">${file_list_values.get(index).video}</span>`, false, editor.opts.videoSplitHTML)\r\n        \r\n        editor.popups.hide('filesManager.insert')\r\n\r\n        const $video = editor.$el.find('.fr-jiv')\r\n        $video.removeClass('fr-jiv')\r\n        $video.toggleClass('fr-rv', editor.opts.videoResponsive)\r\n\r\n        _setVideoStyle($video, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign)\r\n\r\n        $video.toggleClass('fr-draggable', editor.opts.videoMove)\r\n        \r\n        editor.events.trigger('video.inserted', [$video])\r\n        _loadedCallback.call($video)\r\n      }\r\n        else {\r\n          let link = file_list_values.get(index).link;\r\n          let sanitize = file_list_values.get(index).sanitize;\r\n          let data = file_list_values.get(index).data;\r\n          let $existing_video = file_list_values.get(index).$existing_img;\r\n          let response = file_list_values.get(index).response;\r\n          editor.edit.off()\r\n    \r\n          if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n    \r\n          const _add = function () {\r\n            let $video\r\n            let attr\r\n    \r\n            if ($existing_video) {\r\n              if (!editor.undo.canDo() && !$existing_video.find('video').hasClass('fr-uploading')) editor.undo.saveStep()\r\n    \r\n              const old_src = $existing_video.find('video').data('fr-old-src')\r\n    \r\n              const replaced = $existing_video.data('fr-replaced')\r\n              $existing_video.data('fr-replaced', false)\r\n    \r\n              if (editor.$wp) {\r\n    \r\n                // Clone existing video.\r\n                $video = $existing_video.clone(true)\r\n                $video.find('video').removeData('fr-old-src').removeClass('fr-uploading')\r\n    \r\n                // Remove load event.\r\n                $video.find('video').off('canplay')\r\n    \r\n                // Set new SRC.\r\n                if (old_src) $existing_video.find('video').attr('src', old_src)\r\n    \r\n                // Replace existing video with its clone.\r\n                $existing_video.replaceWith($video)\r\n              }\r\n              else {\r\n                $video = $existing_video\r\n              }\r\n    \r\n              // Remove old data.\r\n              const atts = $video.find('video').get(0).attributes\r\n    \r\n              for (let i = 0; i < atts.length; i++) {\r\n                const att = atts[i]\r\n    \r\n                if (att.nodeName.indexOf('data-') === 0) {\r\n                  $video.find('video').removeAttr(att.nodeName)\r\n                }\r\n              }\r\n    \r\n              // Set new data.\r\n              if (typeof data != 'undefined') {\r\n                for (attr in data) {\r\n                  if (data.hasOwnProperty(attr)) {\r\n                    if (attr != 'link') {\r\n                      $video.find('video').attr(`data-${attr}`, data[attr])\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n    \r\n              $video.find('video').on('canplay', _loadedCallback)\r\n              $video.find('video').attr('src', link)\r\n              editor.edit.on()\r\n              _syncVideos()\r\n              editor.undo.saveStep()\r\n    \r\n              // Cursor will not appear if we don't make blur.\r\n              editor.$el.blur()\r\n    \r\n              editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video, response])\r\n            }\r\n            else {\r\n\r\n              $video = _addVideo(link, data, _loadedCallback, _getFileType(file_list_values.get(index)) ,index)\r\n\r\n              _syncVideos()\r\n              editor.undo.saveStep()\r\n              editor.events.trigger('video.inserted', [$video, response])\r\n              }\r\n          }\r\n          _add()\r\n        }\r\n    }\r\n    editor.popups.hide('filesManager.insert')\r\n    checked_files.delete(index)\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    $popup.find(`input.fr-insert-attr.fr-checkbox-file-${index}`)[0].checked = false\r\n    $popup.find(`.fr-file-` + index).get(0).classList.add('fr-unchecked')\r\n    checkInsertAllState();\r\n    if (document.getElementById('fr-file-autoplay-button-' + index)) {\r\n      document.getElementById('fr-file-autoplay-button-' + index).checked = false\r\n    }\r\n    autoplayCheckbox = autoplayCheckbox.filter(function (i){\r\n      return i != index\r\n    })\r\n  }\r\n\r\n  function _setVideoStyle($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* insert Embed \r\n  */\r\n\r\n function insertEmbeddedFile(embedded_code, file) {\r\n   let type\r\n   let fileSplitHTML\r\n   if (FE.VIDEO_EMBED_REGEX.test(embedded_code)) {\r\n     type = 'video'\r\n     fileSplitHTML = editor.opts.videoSplitHTML\r\n   } else if (FE.IMAGE_EMBED_REGEX.test(embedded_code)) {\r\n     type = 'image'\r\n     fileSplitHTML = editor.opts.imageSplitHTML\r\n   }\r\n   // Make sure we have focus.\r\n   editor.events.focus(true)\r\n   editor.selection.restore()\r\n\r\n   // Flag to tell if the video is replaced.\r\n   let replaced = false\r\n\r\n   // If current video found we have to replace it.\r\n   if ($current_image) {\r\n\r\n     // Remove the old video.\r\n     remove()\r\n\r\n     // Mark that the video is replaced.\r\n     replaced = true\r\n   }\r\n   editor.html.insert(`<span id=\"fr-inserted-file\" contenteditable=\"true\" draggable=\"true\" class=\"fr-${type} fr-jiv fr-deletable\">${embedded_code}</span>`, false, fileSplitHTML)\r\n\r\n   // add the below code for image as well\r\n   editor.popups.hide('filesManager.insert')\r\n\r\n   const $file = editor.$el.find('.fr-jiv')\r\n   $file.removeClass('fr-jiv')\r\n\r\n   if (type == 'video') {\r\n\r\n     $file.toggleClass('fr-rv', editor.opts.videoResponsive)\r\n\r\n     _setStyleVideo($file, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign)\r\n\r\n     $file.toggleClass('fr-draggable', editor.opts.videoMove)\r\n\r\n     editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$file])\r\n   }\r\n\r\n   if (type == 'image') {\r\n\r\n     _setStyleImage($file, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n     $file.find('img').removeClass('fr-dii')\r\n\r\n     $file.find('img').addClass('fr-dib')\r\n\r\n     $file.toggleClass('fr-draggable', editor.opts.imageMove)\r\n\r\n     editor.events.trigger(replaced ? 'image.replaced' : 'image.inserted', [$file])\r\n   }\r\n   if(file)\r\n   {\r\n    editImageValue = $file\r\n    editor.selection.clear()\r\n    editor.toolbar.disable()\r\n    editor.video._editVideo(editImageValue)\r\n   }   \r\n }\r\n\r\n  function _addVideo(link, data, loadCallback, type,index) {\r\n\r\n    // Build video data string.\r\n    let data_str = ''\r\n    let attr\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let { videoDefaultWidth: width } = editor.opts\r\n\r\n    if (width && width != 'auto') {\r\n      width = `${width}px`\r\n    }\r\n    let $video\r\n    if (isAudio(type)) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2810\r\n      // Create audio object and set the load event.\r\n      $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<audio src=\"' + link + '\" ' + data_str + ' controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</audio>')\r\n    }\r\n    else {\r\n      let autoplay=''\r\n      let video_autoplay=document.getElementById('fr-file-autoplay-button-' + index).checked\r\n      if(video_autoplay){\r\n        autoplay=\"autoplay\"\r\n      }\r\n      // Create video object and set the load event.\r\n      $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<video src=\"' + link + '\" ' + data_str + (width ? ' style=\"width: ' + width + ';\" ' : '')+ autoplay + '  controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</video>')\r\n    }\r\n\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the video.\r\n    if (editor.opts.videoSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    // Do not insert video inside emoticon.\r\n    if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n      $marker.insertAfter($marker.parent())\r\n    }\r\n\r\n    $marker.replaceWith($video)\r\n\r\n    let typeVar = ''\r\n     isAudio(type) ?  typeVar= 'audio' :  typeVar = 'video'\r\n     if ($video.find(typeVar).get(0).readyState > $video.find(typeVar).get(0).HAVE_FUTURE_DATA || editor.helpers.isIOS()) {\r\n      loadCallback.call($video.find(typeVar).get(0))\r\n    }\r\n    else {\r\n      $video.find(typeVar).on('canplaythrough load', loadCallback)\r\n      $video.find(typeVar).on('error', loadCallback)\r\n    }\r\n    return $video\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseResponse(response, index) {\r\n    try {\r\n      if (editor.events.trigger('filesManager.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response, null, index)\r\n\r\n        return false\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response, null, index)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseXMLResponse(response, index) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('filesManager.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response, null, index)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _fileUploaded(text, index, type, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.filesManagerUploadToS3 || editor.opts.filesManagerUploadToAzure) {\r\n        if (status === 201) {\r\n          let link\r\n          if(editor.opts.filesManagerUploadToAzure){\r\n            if (editor.events.trigger('filesManager.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML, index)\r\n          }\r\n          if (link) {\r\n            let obj =\r\n            {\r\n              link: link,\r\n              text: text,\r\n              response: response,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, null, index)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText, index)\r\n\r\n          if (resp) {\r\n            let obj =\r\n            {\r\n              link: resp.link,\r\n              text: text,\r\n              response: response,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, null, index)\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, null, index)\r\n    }\r\n  }\r\n\r\n  function _imageUploaded($image_placeholder, index, type, url, key) {\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.filesManagerUploadToS3 || editor.opts.filesManagerUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.filesManagerUploadToAzure){\r\n            if (editor.events.trigger('filesManager.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML, index)\r\n          }\r\n          if (link) {\r\n            let obj = {\r\n              link: link,\r\n              sanitize: false,\r\n              data: [],\r\n              $existing_img: $image_placeholder,\r\n              response: response || responseXML,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, $image_placeholder, index)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText, index)\r\n\r\n          if (resp) {\r\n            let obj = {\r\n              link: resp.link,\r\n              sanitize: false,\r\n              data: resp,\r\n              $existing_img: $image_placeholder,\r\n              response: response || responseXML,\r\n              type: type\r\n            }\r\n            file_list_values.set(index, obj)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, $image_placeholder, index)\r\n        }\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, $image_placeholder, index)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image upload error.\r\n   */\r\n\r\n  function _fileUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * Image upload progress.\r\n   */\r\n\r\n  function _fileUploadProgress(e, index) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      updateFileUploadingProgress(complete, index, false)\r\n    }\r\n  }\r\n\r\n  function _addImage(link, data, loadCallback) {\r\n\r\n    // Build image data string.\r\n    let data_str = ''\r\n    let attr\r\n    const $img = $(document.createElement('img')).attr('src', link)\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2649\r\n            $img.attr(`data-${attr}`, data[attr])\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = (editor.opts.imageResizeWithPercent ? '100%' : `${width}px`)\r\n    }\r\n\r\n    // Create image object and set the load event.\r\n    $img.attr('style', (width ? `width: ${width};` : ''))\r\n    _setStyleImage($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n    $img.on('load', loadCallback)\r\n\r\n    // Image might be corrupted. Continue upload flow.\r\n    $img.on('error', loadCallback)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the image.\r\n    if (editor.opts.imageSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    if ($marker.length) {\r\n\r\n      // Do not insert image in HR.\r\n      if ($marker.parent().is('hr')) {\r\n        $marker.parent().after($marker)\r\n      }\r\n\r\n      // Do not insert image inside emoticon.\r\n      if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n        $marker.insertAfter($marker.parent())\r\n      }\r\n\r\n      $marker.replaceWith($img)\r\n    }\r\n    else {\r\n      editor.$el.append($img)\r\n    }\r\n\r\n    return $img\r\n  }\r\n\r\n  /**\r\n   * Image upload aborted.\r\n   */\r\n  function _fileUploadAborted(index, e) {\r\n    _throwError(UPLOAD_CANCEL, e, $current_image, index)\r\n  }\r\n\r\n  function _browserUpload(index, file, $image_placeholder) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert file to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: _getFileType(file)\r\n        }))\r\n\r\n        if (isImage(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            sanitize: false,\r\n            data: null,\r\n            $existing_img: $image_placeholder,\r\n            response: null,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n\r\n        if (isFile(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            text: file.name,\r\n            response: null,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n\r\n        if (isVideo(_getFileType(file)) || isAudio(_getFileType(file))) {\r\n          let obj = {\r\n            link: link,\r\n            sanitize: false,\r\n            data: null,\r\n            $existing_img: $image_placeholder,\r\n            type: _getFileType(file)\r\n          }\r\n          file_list_values.set(index, obj)\r\n        }\r\n      }\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function upload(file, files, $image_placeholder, index) {\r\n    if(unsupported_file_types.indexOf(_getFileType(file)) > -1 || !_getFileType(file)){\r\n\r\n      _throwError(BAD_FILE_TYPE, null, null, index)\r\n      return false\r\n    }\r\n    // Check if we should cancel the image upload.\r\n    if (editor.events.trigger('filesManager.beforeUpload', [files]) === false) {\r\n      return false\r\n    }\r\n\r\n    if ((editor.opts.filesManagerUploadURL === null || editor.opts.filesManagerUploadURL == DEFAULT_FILE_UPLOAD_URL) && !editor.opts.filesManagerUploadToS3 && !editor.opts.filesManagerUploadToAzure) {\r\n      _browserUpload(index, file)\r\n      return false\r\n    }\r\n\r\n    if(isImage(_getFileType(file))) {\r\n      if (!file.name) {\r\n        file.name = (new Date()).getTime() + '.' + (_getFileType(file) || 'image/jpeg').replace(/image\\//g, '')\r\n      }\r\n    }\r\n\r\n    if (file.size > editor.opts.filesManagerMaxSize) {\r\n      _throwError(MAX_SIZE_EXCEEDED, null, null, index)\r\n      return false\r\n    }\r\n\r\n    if (editor.opts.filesManagerAllowedTypes.indexOf('*') < 0 && editor.opts.filesManagerAllowedTypes.indexOf(_getFileType(file)) < 0) {\r\n      _throwError(BAD_FILE_TYPE, null, null, index)\r\n        return false\r\n    }\r\n\r\n    initialFileUploadStatus(index)\r\n    // Create form Data.\r\n    let form_data\r\n\r\n    if (editor.drag_support.formdata) {\r\n      form_data = editor.drag_support.formdata ? new FormData() : null\r\n    }\r\n\r\n    // Prepare form data for request.\r\n    if (form_data) {      \r\n      let key\r\n      // Upload to S3.\r\n      if (editor.opts.filesManagerUploadToS3 !== false) {\r\n        form_data.append('key', editor.opts.filesManagerUploadToS3.keyStart + (new Date()).getTime() + '-' + (file.name || 'untitled'))\r\n        form_data.append('success_action_status', '201')\r\n        form_data.append('X-Requested-With', 'xhr')\r\n        form_data.append('Content-Type', _getFileType(file))\r\n\r\n        for (key in editor.opts.filesManagerUploadToS3.params) {\r\n          if (editor.opts.filesManagerUploadToS3.params.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.filesManagerUploadToS3.params[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add upload params.\r\n      for (key in editor.opts.filesManagerUploadParams) {\r\n        if (editor.opts.filesManagerUploadParams.hasOwnProperty(key)) {\r\n          form_data.append(key, editor.opts.filesManagerUploadParams[key])\r\n        }\r\n      }\r\n\r\n      // Set the image in the request.\r\n      form_data.append(editor.opts.filesManagerUploadParam, file, file.name)\r\n     \r\n      // Create XHR request.\r\n      let url = editor.opts.filesManagerUploadURL\r\n      let fileURL\r\n      let azureKey\r\n\r\n      if (editor.opts.filesManagerUploadToS3) {\r\n        if (editor.opts.filesManagerUploadToS3.uploadURL) {\r\n          url = editor.opts.filesManagerUploadToS3.uploadURL\r\n        } else {\r\n          url = `https://${editor.opts.filesManagerUploadToS3.region}.amazonaws.com/${editor.opts.filesManagerUploadToS3.bucket}`\r\n        }\r\n      }\r\n      \r\n      if (editor.opts.filesManagerUploadToAzure) {\r\n        if (editor.opts.filesManagerUploadToAzure.uploadURL) {\r\n          url = `${editor.opts.filesManagerUploadToAzure.uploadURL}/${file.name}`\r\n        } else {\r\n          url = encodeURI(`https://${editor.opts.filesManagerUploadToAzure.account}.blob.core.windows.net/${editor.opts.filesManagerUploadToAzure.container}/${file.name}`)\r\n        }\r\n        fileURL = url\r\n        if (editor.opts.filesManagerUploadToAzure.SASToken) {\r\n          url += editor.opts.filesManagerUploadToAzure.SASToken\r\n        }\r\n        editor.opts.filesManagerUploadMethod = 'PUT'\r\n      }\r\n      \r\n      const xhr = editor.core.getXHR(url, editor.opts.filesManagerUploadMethod)\r\n\r\n      if (editor.opts.filesManagerUploadToAzure) {\r\n        let uploadDate = new Date().toUTCString()\r\n        if (!editor.opts.filesManagerUploadToAzure.SASToken && editor.opts.filesManagerUploadToAzure.accessKey) {\r\n          let azureAccount = editor.opts.filesManagerUploadToAzure.account\r\n          let azureContainer = editor.opts.filesManagerUploadToAzure.container\r\n          if(editor.opts.filesManagerUploadToAzure.uploadURL) {\r\n            let urls = editor.opts.filesManagerUploadToAzure.uploadURL.split('/')\r\n            azureContainer = urls.pop()\r\n            azureAccount = urls.pop().split('.')[0]\r\n          }\r\n          let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n          let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + file.name)\r\n          let stringToSign = editor.opts.filesManagerUploadMethod + '\\n\\n\\n' + file.size + '\\n\\n' + _getFileType(file) + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n          let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.filesManagerUploadToAzure.accessKey))\r\n          let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n          let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n          azureKey = signature\r\n          xhr.setRequestHeader(\"Authorization\", authHeader)\r\n        }\r\n        xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n        xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n        xhr.setRequestHeader(\"Content-Type\", _getFileType(file))\r\n        xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n        for (key in editor.opts.filesManagerUploadParams) {\r\n          if (editor.opts.filesManagerUploadParams.hasOwnProperty(key)) {\r\n            xhr.setRequestHeader(key, editor.opts.filesManagerUploadParams[key])\r\n          }\r\n        }\r\n        for (key in editor.opts.filesManagerUploadToAzure.params) {\r\n          if (editor.opts.filesManagerUploadToAzure.params.hasOwnProperty(key)) {\r\n            xhr.setRequestHeader(key, editor.opts.filesManagerUploadToAzure.params[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      xhr.onload = function () {\r\n        if (isFile(_getFileType(file))) {\r\n          _fileUploaded.call(xhr, file.name, index, _getFileType(file), fileURL, azureKey)        \r\n        } else {\r\n          _imageUploaded.call(xhr, $current_image, index, _getFileType(file), fileURL, azureKey)\r\n        }\r\n        if(!failedUploadFiles.has(index)){\r\n          updateFileUploadingProgress(100, index, true) \r\n        }\r\n      }\r\n      xhr.onerror =   function _fileUploadError() {\r\n        _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML, null, index)\r\n      }\r\n      xhr.upload.onprogress =  function (e) {\r\n        _fileUploadProgress(e, index)\r\n      }\r\n      xhr.onabort = function(e) {\r\n        _fileUploadAborted(index, e)\r\n      }\r\n      xhr.send(editor.opts.filesManagerUploadToAzure ? file : form_data)\r\n      XMLHttpRequests.set(index, xhr)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    //disable keypad launch on click in mobile\r\n    editor.events.$on($popup, 'click', '.fr-upload-progress-layer', function (e) {\r\n      if (editor.helpers.isMobile()) {\r\n        e.stopPropagation()\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    //preventing Drag over on file list in filesManager popup\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-upload-progress-layer', function (e) {\r\n      e.preventDefault()\r\n      for (var i = 0; i < e.originalEvent.dataTransfer.types.length; i++) {\r\n        if (e.originalEvent.dataTransfer.types[i] == \"Files\") {\r\n          e.originalEvent.dataTransfer.dropEffect = \"none\"\r\n        }\r\n    }      \r\n      return false\r\n    }, true)\r\n\r\n\r\n    //preventing Drag end on file list in filesManager popup\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-upload-progress-layer', function (e) {\r\n      e.preventDefault()\r\n      return false\r\n    }, true)\r\n\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-files-upload-layer', function (e) {\r\n      $(this).addClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-files-upload-layer', function (e) {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    editor.events.$on($popup, 'click', '.fr-insert-checkbox', function (e){\r\n      if(this.classList.contains('fr-checkbox-disabled')){\r\n        this.children['target'].disabled = true\r\n        this.children['target'].checked = false\r\n        return\r\n      }\r\n      let index = parseInt(this.id.split('-').pop())\r\n      checked_files.set(index,this.children['target'].checked)\r\n      let $btnInsert = $popup.find('.fr-command[data-cmd=\"insertAll\"]')\r\n      let $btnDelete = $popup.find('.fr-command[data-cmd=\"deleteAll\"]')\r\n      const check_inputs = $popup.find('input.fr-file-insert-check[type=\"checkbox\"]')\r\n      let size = check_inputs.length\r\n      let isDisabled = true\r\n      for(let i = 0; i< size; i++)\r\n      {\r\n        if(check_inputs[i].checked == true)\r\n        {\r\n          isDisabled=false\r\n        } \r\n      }\r\n      isDisabled?$btnInsert.addClass('fr-disabled'):$btnInsert.removeClass('fr-disabled')\r\n      isDisabled?$btnDelete.addClass('fr-disabled'):$btnDelete.removeClass('fr-disabled')\r\n\r\n      if(this.children['target'].checked){\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).setAttribute('draggable' , 'true')\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).classList.remove('fr-unchecked')\r\n      }\r\n      else{\r\n        let id = this.id.split('-').pop()\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).setAttribute('draggable' , 'false')\r\n        $popup.find(`.fr-file-` + this.id.split('-').pop()).get(0).classList.add('fr-unchecked')\r\n      }\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-insert-button', function (e){\r\n      if(this.classList.contains('fr-disabled')){\r\n        return\r\n      }\r\n      let index = parseInt(this.id.split('-').pop())\r\n      insert(index)\r\n    })\r\n    \r\n    editor.events.$on($popup, 'click', '.fr-file-autoplay-button', function (e){\r\n      if(this.parentNode.classList.contains('fr-checkbox-disabled')){\r\n        this.disabled = true\r\n        this.checked = false\r\n        return\r\n      }\r\n            let index = parseInt(this.id.split('-').pop())\r\n      checkAutoplay(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-edit-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      if(!$popup.find(`.fr-file-edit-button-${index}`).hasClass('fr-disabled'))\r\n          editImage(index);\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-view-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      if(!$popup.find(`.fr-file-view-button-${index}`).hasClass('fr-disabled'))\r\n          viewImage(index)\r\n      \r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-delete-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      deleteFile(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-cancel-upload-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      cancelFileUpload(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-upload-delete-button', function (e){\r\n      let index = parseInt(this.id.split('-').pop())\r\n      deleteFileUpload(index)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-file-view-close', function (e){\r\n      $popup.find('.fr-file-view-modal').get(0).outerHTML = ''\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-plugins-enable', function (e){\r\n      addPlugins()\r\n      loadPlugins(FE.PLUGINS)\r\n      editor.popups.get('filesManager.insert').get(0).outerHTML = ''\r\n      _initInsertPopup()\r\n      showInsertPopup(true)\r\n    })\r\n\r\n    editor.events.$on($popup, 'click', '.fr-plugins-cancel', function (e){\r\n      editor.popups.hide('filesManager.insert')\r\n    })\r\n\r\n    // preventing drop on file list in filesManager popup\r\n    editor.events.$on($popup, 'drop', '.fr-upload-progress', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    })\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-files-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      $(this).removeClass('fr-drop')\r\n      const dt = e.originalEvent.dataTransfer\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.events.disableBlur()\r\n        let indexes = []\r\n        for (let i = 0; i < dt.files.length; i++) {\r\n          let j = fileListIndex\r\n          file_list.set(j, dt.files[i])\r\n          showFileUploadProgressLayer(j)\r\n          checked_files.set(j,false)\r\n          indexes.push(j)\r\n          fileListIndex++\r\n        }\r\n        for(let i = 0 ; i < indexes.length ; i++){\r\n          inst.filesManager.upload(file_list.get(indexes[i]), dt.files, $current_image, indexes[i])\r\n        }\r\n        inst.events.enableBlur()\r\n      }\r\n      }, true)\r\n\r\n      if (editor.helpers.isIOS()) {\r\n        editor.events.$on($popup, 'touchstart', '.fr-files-upload-layer input[type=\"file\"]', function () {\r\n          $(this).trigger('click')\r\n        }, true)\r\n      }\r\n\r\n      editor.events.$on($popup, 'change', '.fr-files-upload-layer input[type=\"file\"]', function () {\r\n            if (this.files) {\r\n              const inst = $popup.data('instance') || editor\r\n\r\n              inst.events.disableBlur()\r\n              $popup.find('input:focus').blur()\r\n              inst.events.enableBlur()\r\n              let indexes = []\r\n              // Make sure we have what to upload.\r\n              if (typeof this.files != 'undefined' && this.files.length > 0) {\r\n                for (let i = 0; i < this.files.length; i++) {\r\n                  let j = fileListIndex\r\n                  file_list.set(j, this.files[i])\r\n                  showFileUploadProgressLayer(j)\r\n                  checked_files.set(j,false)\r\n                  ++fileListIndex\r\n                  indexes.push(j)\r\n                }\r\n                for(let i = 0 ; i < indexes.length ; i++){\r\n                  inst.filesManager.upload(file_list.get(indexes[i]), this.files, $current_image, indexes[i])\r\n                }\r\n              }\r\n\r\n            }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n  function checkAutoplay(index){\r\n    const checkbox=document.getElementById('fr-file-autoplay-button-' + index).checked\r\n    if(checkbox){\r\n      autoplayCheckbox.push(index)\r\n    }else {\r\n      autoplayCheckbox = autoplayCheckbox.filter(function (i){\r\n        return i!=index\r\n      })\r\n    }\r\n\r\n  }\r\n  function isImage(type)\r\n  {\r\n    return type && type.split('/')[0] === 'image';\r\n    \r\n  }\r\n\r\n  function isFile(type)\r\n  {\r\n    return (type && type.split('/')[0] != 'image')&&(type && type.split('/')[0] != 'video')&&(type && type.split('/')[0] != 'audio');\r\n  }\r\n\r\n  function isVideo(type)\r\n  {\r\n    return type && type.split('/')[0] === 'video';\r\n  }\r\n\r\n  function isAudio(type)\r\n  {\r\n    return type && type.split('/')[0] === 'audio';\r\n  }\r\n\r\n  function isFormatSupported(type)\r\n  {\r\n    let webp = 'image/webp'\r\n    let webm = 'video/webm'\r\n    let ogg = 'audio/ogg'\r\n    let ogv = 'video/ogg'\r\n    if(type == ogg || type == ogv || type == webp || type == webm) {\r\n      if(editor.browser.msie || editor.browser.edge || editor.browser.safari){  \r\n        return false\r\n      }\r\n      if(editor.helpers.isMobile()){\r\n        if(type == ogg || type == ogv){\r\n          return false\r\n        }\r\n        if(!editor.helpers.isAndroid() && !editor.browser.chrome){\r\n          return false\r\n        }\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  function _beforeElementDrop($el) {\r\n    if ($el.is('img') && $el.parents('.fr-img-caption').length > 0) {\r\n      return $el.parents('.fr-img-caption')\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n    // Mouse down on image. It might start move.\r\n    editor.events.$on(editor.$el, editor._mousedown, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (!editor.helpers.isMobile()) editor.selection.clear()\r\n\r\n      mousedown = true\r\n\r\n      if (editor.popups.areVisible()) editor.events.disableBlur()\r\n\r\n      // Prevent the image resizing.\r\n      if (editor.browser.msie) {\r\n        editor.events.disableBlur()\r\n        editor.$el.attr('contenteditable', false)\r\n      }\r\n\r\n      if (!editor.draggable && e.type != 'touchstart') e.preventDefault()\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, editor._mousedown, '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      if (!editor.core.hasFocus()) {\r\n        editor.events.focus()\r\n      }\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, 'paste', '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      editor.toolbar.hide()\r\n   \r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse up on an image prevent move.\r\n    editor.events.$on(editor.$el, editor._mouseup, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (mousedown) {\r\n        mousedown = false\r\n\r\n        // Remove moving class.\r\n        e.stopPropagation()\r\n\r\n        if (editor.browser.msie) {\r\n          editor.$el.attr('contenteditable', true)\r\n          editor.events.enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Show image popup when it was selected.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.shiftKey && editor.selection.text().replace(/\\n/g, '') === '' && editor.keys.isArrow(e.which)) {\r\n        const s_el = editor.selection.element()\r\n        const e_el = editor.selection.endElement()\r\n\r\n        if (s_el && s_el.tagName == 'IMG') {\r\n          _editImg($(s_el))\r\n        }\r\n        else if (e_el && e_el.tagName == 'IMG') {\r\n          _editImg($(e_el))\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n    editor.events.on('window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    editor.events.on('mouseup window.mouseup', function () {\r\n      if ($current_image) {\r\n        _exitEdit()\r\n\r\n        return false\r\n      }\r\n\r\n      _unmarkExit()\r\n    })\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit()\r\n      }\r\n    })\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.opts.iframe) {\r\n        editor.size.syncIframe()\r\n      }\r\n    })\r\n\r\n    editor.events.on('blur image.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      mousedown = false\r\n      _exitEdit(true)\r\n    })\r\n\r\n    editor.events.on('modals.hide', function () {\r\n      if ($current_image) {\r\n        editor.selection.clear()\r\n      }\r\n    })\r\n\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.win.getSelection) {\r\n        _editImg($current_image)\r\n      }\r\n    })\r\n\r\n    // Add new line after image is inserted.\r\n    if (editor.opts.imageAddNewLine) {\r\n      editor.events.on('image.inserted', function ($img) {\r\n        let lastNode = $img.get(0)\r\n\r\n        // Ignore first BR after image.\r\n        if (lastNode.nextSibling && lastNode.nextSibling.tagName === 'BR') lastNode = lastNode.nextSibling;\r\n\r\n        // Look upper nodes.\r\n        while (lastNode && !editor.node.isElement(lastNode)) {\r\n          if (!editor.node.isLastSibling(lastNode)) {\r\n            lastNode = null;\r\n          }\r\n          else {\r\n            lastNode = lastNode.parentNode;\r\n          }\r\n        }\r\n\r\n        // If node is element, then image is last element.\r\n        if (editor.node.isElement(lastNode)) {\r\n\r\n          // ENTER_BR mode.\r\n          if (editor.opts.enter === FE.ENTER_BR) {\r\n            $img.after('<br>');\r\n          }\r\n          else {\r\n            let $parent = $(editor.node.blockParent($img.get(0)));\r\n\r\n            $parent.after(`<${editor.html.defaultTag()}><br></${editor.html.defaultTag()}>`);\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('filesManager.insert', _refreshInsertPopup)\r\n      editor.popups.onHide('filesManager.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    let active\r\n    let $popup\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/2987\r\n\r\n    if (!editor.opts.imageUpload && editor.opts.filesInsertButtons.indexOf('filesUpload') !== -1) {\r\n      editor.opts.imageInsertButtons.splice(editor.opts.filesInsertButtons.indexOf('filesUpload'), 1)\r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.filesInsertButtons)\r\n    const buttonList2 = editor.button.buildList(editor.opts.filesInsertButtons2)\r\n\r\n    if (buttonList !== '') {\r\n      image_buttons = `<div class=\"fr-buttons fr-tabs\">${buttonList}<span class=\"fr-align-right\">${buttonList2}</span></div>`\r\n    }\r\n\r\n    const uploadIndex = editor.opts.filesInsertButtons.indexOf('filesUpload')\r\n    const urlIndex = editor.opts.filesInsertButtons.indexOf('filesByURL')\r\n    const embedIndex = editor.opts.filesInsertButtons.indexOf('filesEmbed')\r\n\r\n    // Image upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (urlIndex >= 0 && uploadIndex > urlIndex) {\r\n        active = ''\r\n      }\r\n       upload_layer = `<div class=\"fr-files-upload-layer${active} fr-layer \" id=\"fr-files-upload-layer-${editor.id}\"><div style=\"display:flex\"><div class=\"fr-upload-section\"><div class = 'fr-blue-decorator'><div class = 'fr-cloud-icon'><svg class = \"fr-svg\" focusable=\"false\" width=\"26px\" height=\"26px\" viewBox = \"0 0 24 24\" xlmns = \"http://w3.org/200/svg\"><path d = 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z'></path></svg></div>Drag & Drop One or More Files<br><div class=\"decorated\"><span> OR </span></div> Click Browse Files </div> </div><div class=\"fr-form\"><input type=\"file\" accept=\"${editor.opts.filesManagerAllowedTypes.join(',').toLowerCase()}\" tabIndex=\"-1\" aria - labelledby=\"fr-files-upload-layer-${editor.id}\"role=\"button\" multiple></div> </div></div>`    }\r\n\r\n    // File embed layer.\r\n    let embed_layer = ''\r\n    if (embedIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if ((embedIndex > uploadIndex && uploadIndex >= 0) || (embedIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n\r\n      embed_layer = `<div class=\"fr-files-embed-layer fr-layer${active}\" id=\"fr-files-embed-layer-${editor.id}\"><div class=\"fr-input-line padding-top-15\"><textarea data-gramm_editor=\"false\" style='height:60px' id=\"fr-files-embed-layer-text${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Embedded Code')}\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"insertEmbed\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n\r\n    }\r\n\r\n    // Image by url layer.\r\n    let by_url_layer = ''\r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (uploadIndex >= 0 && urlIndex > uploadIndex) {\r\n        active = ''\r\n      }\r\n\r\n      by_url_layer = `<div class=\"fr-files-by-url-layer${active} fr-layer\" id=\"fr-files-by-url-layer-${editor.id}\"><div class=\"fr-input-line fr-by-url-padding\"><input id=\"fr-files-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"http://\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"filesInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Add')}</button></div></div>`\r\n    }\r\n\r\n    let upload_progress_layer = ''\r\n    \r\n\r\n    upload_progress_layer = `<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-${editor.id}\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>`\r\n\r\n\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-files-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"filesDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      upload_layer: upload_layer,\r\n      by_url_layer: by_url_layer,\r\n      embed_layer: embed_layer,\r\n      upload_progress_layer: upload_progress_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    if (editor.opts.imageInsertButtons.length >= 1) {\r\n      $popup = editor.popups.create('filesManager.insert', template)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        if ($current_image && editor.popups.isVisible('filesManager.insert')) {\r\n          replace()\r\n        }\r\n      })\r\n    }\r\n\r\n    _bindInsertEvents($popup)\r\n    editor.popups.setPopupDimensions($popup)\r\n    return $popup\r\n  }\r\n\r\n  function _initPluginErrorPopup(){\r\n    const file_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.fileInsertButtons)}</div>`\r\n    const message_layer = `<div style= 'padding:10px'>\r\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>${editor.language.translate( getMissingPluginsText() + ' not enabled. Do you want to enable?')}</h3></div>\r\n    <div style='text-align:right;'>\r\n      <button class='fr-trim-button fr-plugins-enable'>${editor.language.translate('Enable')}</button>               \r\n      <button class='fr-trim-button fr-plugins-cancel'>${editor.language.translate('Cancel')}</button>\r\n    </div>`\r\n    const template = {\r\n      buttons: file_buttons,\r\n      upload_layer: message_layer,\r\n      by_url_layer: '',\r\n      embed_layer: '',\r\n      upload_progress_layer: '',\r\n      progress_bar: ''\r\n    }\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('filesManager.insert', template)\r\n    _bindInsertEvents($popup)\r\n    return $popup\r\n  }\r\n\r\n  function getMissingPluginsText() {\r\n    let missingPlugins = ''\r\n    let plugins = getMissingPlugins()\r\n    missingPlugins = plugins.join(', ')\r\n    if(plugins.length > 1){\r\n      missingPlugins += ' plugin are'\r\n    }\r\n    else{\r\n      missingPlugins += ' plugin is'\r\n    }\r\n    return missingPlugins\r\n  }\r\n\r\n  function getMissingPlugins() {\r\n    let files = []\r\n    requiredPlugins.forEach(function(file){\r\n      if(editor.opts.pluginsEnabled.indexOf(file) < 0){\r\n        files.push(file.charAt(0).toUpperCase() + file.slice(1))\r\n      }\r\n    })\r\n    return files\r\n  }\r\n\r\n  function getFileDescription(date) {\r\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n    let  dateFormat\r\n    try{\r\n      dateFormat = date.toLocaleDateString(editor.opts.language ? editor.opts.language : undefined, options)  \r\n    }\r\n    catch(err)\r\n    {\r\n      dateFormat = date.toLocaleDateString(undefined, options)  \r\n    } \r\n    return dateFormat+''\r\n  }\r\n\r\n  function getFileSize(size) {\r\n    if(size == 0)\r\n      return '0 Bytes'\r\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    var i = Math.floor(Math.log(size) / Math.log(1024));\r\n    return ' | ' + (size / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + sizes[i];\r\n  }\r\n\r\n // Get file name from url\r\nfunction getUrlFileName(url){\r\n  let fileName = url.split('/').pop()\r\n  if(fileName.split('.').length < 2){\r\n  let date = new Date()\r\n  return fileName + '-' + date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear()\r\n  }\r\n  return fileName\r\n  }\r\n\r\n\r\n  /**\r\n   * Refresh the ALT popup.\r\n   */\r\n\r\n  function _refreshAltPopup() {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $popup.find('input').val($current_image.attr('alt') || '').trigger('change')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the ALT popup.\r\n   */\r\n\r\n  function showAltPopup() {\r\n    let $popup = editor.popups.get('image.alt')\r\n\r\n    if (!$popup) $popup = _initAltPopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.alt')\r\n    editor.popups.setContainer('image.alt', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.alt', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initAltPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.alt', _refreshAltPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageAltButtons)}</div>`\r\n\r\n    // Image by url layer.\r\n    let alt_layer = ''\r\n    alt_layer = `<div class=\"fr-image-alt-layer fr-layer fr-active\" id=\"fr-image-alt-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-alt-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Alternative Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetAlt\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      alt_layer: alt_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.alt', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-alt', function () {\r\n        if ($current_image && editor.popups.isVisible('image.alt')) {\r\n          showAltPopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set ALT based on the values from the popup.\r\n   */\r\n\r\n  function setAlt(alt) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $current_image.attr('alt', alt || $popup.find('input').val() || '')\r\n      $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n\r\n  // Issue 2845\r\n\r\n  function _refreshSizePopup() {\r\n    const $popup = editor.popups.get('image.size')\r\n\r\n    if ($current_image) {\r\n\r\n      if (hasCaption()) {\r\n        let $el = $current_image.parent()\r\n\r\n        if (!($el.get(0).style.width)) {\r\n          $el = $current_image.parent().parent()\r\n        }\r\n        $popup.find('input[name=\"width\"]').val($el.get(0).style.width).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($el.get(0).style.height).trigger('change')\r\n      }\r\n      else {\r\n        $popup.find('input[name=\"width\"]').val($current_image.get(0).style.width).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($current_image.get(0).style.height).trigger('change')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('image.size')\r\n\r\n    if (!$popup) $popup = _initSizePopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.size')\r\n    editor.popups.setContainer('image.size', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.size', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.size', _refreshSizePopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageSizeButtons)}</div>`\r\n\r\n    // Size layer.\r\n    let size_layer = ''\r\n    size_layer = `<div class=\"fr-image-size-layer fr-layer fr-active\" id=\"fr-image-size-layer-${editor.id}\"><div class=\"fr-image-group\"><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-width-'${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-height${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.size', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-size', function () {\r\n        if ($current_image && editor.popups.isVisible('image.size')) {\r\n          showSizePopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current image size.\r\n   */\r\n\r\n  function setSize(width, height) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.size')\r\n      width = width || $popup.find('input[name=\"width\"]').val() || ''\r\n      height = height || $popup.find('input[name=\"height\"]').val() || ''\r\n      const regex = /^[\\d]+((px)|%)*$/g\r\n\r\n      $current_image.removeAttr('width').removeAttr('height')\r\n\r\n      if (width.match(regex)) $current_image.css('width', width)\r\n      else $current_image.css('width', '')\r\n\r\n      if (height.match(regex)) $current_image.css('height', height)\r\n      else $current_image.css('height', '')\r\n\r\n      if (hasCaption()) {\r\n        $current_image.parents('.fr-img-caption').removeAttr('width').removeAttr('height')\r\n\r\n        if (width.match(regex)) $current_image.parents('.fr-img-caption').css('width', width)\r\n        else $current_image.parents('.fr-img-caption').css('width', '')\r\n\r\n        if (height.match(regex)) $current_image.parents('.fr-img-caption').css('height', height)\r\n        else $current_image.parents('.fr-img-caption').css('height', '')\r\n      }\r\n\r\n      if ($popup) $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image upload layer.\r\n   */\r\n\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n\r\n    let left\r\n    let top\r\n\r\n    // Click on the button from the toolbar without image selected.\r\n    if (!$current_image && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertFiles\"]')\r\n      left = $btn.offset().left\r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10)\r\n    }\r\n\r\n    // Image is selected.\r\n    else if ($current_image) {\r\n\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      // Set the top to the bottom of the image.\r\n      top = $el.offset().top + $el.outerHeight()\r\n      left = $el.offset().left\r\n    }\r\n\r\n    // Image is selected and we are in inline mode.\r\n    if (!$current_image && editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top'))\r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight()\r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active')\r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active')\r\n    $popup.find(`.fr-upload-progress-layer`).addClass('fr-active')\r\n    editor.popups.show('filesManager.insert', left, top, ($current_image ? $current_image.outerHeight() : 0))\r\n    editor.accessibility.focusPopup($popup)\r\n  }\r\n\r\n  /**\r\n   * Refresh the upload image button.\r\n   */\r\n\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function _resizeImage(e, initPageX, direction, step) {\r\n    e.pageX = initPageX\r\n    _handlerMousedown.call(this, e)\r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step))\r\n    _handlerMousemove.call(this, e)\r\n    _handlerMouseup.call(this, e)\r\n\r\n    return ++step\r\n  }\r\n\r\n  /**\r\n   * Init image resizer.\r\n   */\r\n  function _initImageResizer() {\r\n    let doc\r\n\r\n    // No shared image resizer.\r\n    if (!editor.shared.$image_resizer) {\r\n\r\n      // Create shared image resizer.\r\n      editor.shared.$image_resizer = $(document.createElement('div')).attr('class', 'fr-image-resizer')\r\n      $image_resizer = editor.shared.$image_resizer\r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($image_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Image resize is enabled.\r\n      if (editor.opts.imageResize) {\r\n        $image_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se'))\r\n\r\n        // Add image resizer overlay and set it.\r\n        editor.shared.$img_overlay = $(document.createElement('div')).attr('class', 'fr-image-overlay')\r\n        $overlay = editor.shared.$img_overlay\r\n        doc = $image_resizer.get(0).ownerDocument\r\n        $(doc).find('body').first().append($overlay)\r\n      }\r\n    }\r\n    else {\r\n      $image_resizer = editor.shared.$image_resizer\r\n      $overlay = editor.shared.$img_overlay\r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($image_resizer.removeClass('fr-active'))\r\n      }, true)\r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $image_resizer.html('').removeData().remove()\r\n      $image_resizer = null\r\n\r\n      if (editor.opts.imageResize) {\r\n        $overlay.remove()\r\n        $overlay = null\r\n      }\r\n    }, true)\r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        if ($current_image && !$current_image.hasClass('fr-uploading')) {\r\n          _exitEdit(true)\r\n        }\r\n        else if ($current_image) {\r\n          _repositionResizer()\r\n          replace()\r\n          showProgressBar(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    // Image resize is enabled.\r\n    if (editor.opts.imageResize) {\r\n      doc = $image_resizer.get(0).ownerDocument\r\n      editor.events.$on($image_resizer, editor._mousedown, '.fr-handler', _handlerMousedown)\r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove)\r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup)\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup)\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1\r\n      let prevKey = null\r\n      let prevTimestamp = 0\r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_image) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey\r\n          const keycode = e.which\r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1\r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase image size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 1, 1, step)\r\n          }\r\n\r\n          // Decrease image size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 2, -1, step)\r\n          }\r\n          else if (!editor.keys.ctrlKey(e) && keycode == FE.KEYCODE.ENTER) {\r\n            $current_image.before('<br>')\r\n            _editImg($current_image)\r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode\r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp\r\n        }\r\n      }, true)\r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current image.\r\n   */\r\n  function remove($img) {\r\n    $img = $img || getEl()\r\n\r\n    if ($img) {\r\n      if (editor.events.trigger('image.beforeRemove', [$img]) !== false) {\r\n        editor.popups.hideAll()\r\n        _exitEdit(true)\r\n\r\n        if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n        if ($img.get(0) == editor.el) {\r\n          $img.removeAttr('src')\r\n        }\r\n        else {\r\n          if ($img.get(0).parentNode && $img.get(0).parentNode.tagName == 'A') {\r\n            editor.selection.setBefore($img.get(0).parentNode) || editor.selection.setAfter($img.get(0).parentNode) || $img.parent().after(FE.MARKERS)\r\n            $($img.get(0).parentNode).remove()\r\n          }\r\n          else {\r\n            editor.selection.setBefore($img.get(0)) || editor.selection.setAfter($img.get(0)) || $img.after(FE.MARKERS)\r\n            $img.remove()\r\n          }\r\n\r\n          editor.html.fillEmptyBlocks()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const key_code = e.which\r\n\r\n    if ($current_image && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      remove()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code == FE.KEYCODE.ESC) {\r\n      const $img = $current_image\r\n      _exitEdit(true)\r\n      editor.selection.setAfter($img.get(0))\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Move cursor if left and right arrows are used.\r\n    else if ($current_image && (key_code == FE.KEYCODE.ARROW_LEFT || key_code == FE.KEYCODE.ARROW_RIGHT)) {\r\n      const img = $current_image.get(0)\r\n      _exitEdit(true)\r\n\r\n      if (key_code == FE.KEYCODE.ARROW_LEFT) {\r\n        editor.selection.setBefore(img)\r\n      }\r\n      else {\r\n        editor.selection.setAfter(img)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code === FE.KEYCODE.TAB) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      _exitEdit(true)\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do some cleanup on images.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Tag is image.\r\n    if (el && el.tagName == 'IMG') {\r\n\r\n      // Remove element if it has class fr-uploading or fr-error.\r\n      if (editor.node.hasClass(el, 'fr-uploading') || editor.node.hasClass(el, 'fr-error')) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n\r\n      // Remove class if it is draggable.\r\n      else if (editor.node.hasClass(el, 'fr-draggable')) {\r\n        el.classList.remove('fr-draggable')\r\n      }\r\n\r\n      if (el.parentNode && el.parentNode.parentNode && editor.node.hasClass(el.parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = el.parentNode.parentNode\r\n        p_node.removeAttribute('contenteditable')\r\n        p_node.removeAttribute('draggable')\r\n        p_node.classList.remove('fr-draggable')\r\n\r\n        const n_node = el.nextSibling\r\n\r\n        if (n_node) {\r\n          n_node.removeAttribute('contenteditable')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Look for inner nodes that might be in a similar case.\r\n    else if (el && el.nodeType == Node.ELEMENT_NODE) {\r\n      const imgs = el.querySelectorAll('img.fr-uploading, img.fr-error, img.fr-draggable')\r\n\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        _cleanOnGet(imgs[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    // Init on image.\r\n    if (editor.el.tagName == 'IMG') {\r\n      editor.$el.addClass('fr-view')\r\n    }\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function () {\r\n        touchScroll = false\r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true\r\n      })\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('window.keydown keydown', _editorKeydownHandler, true)\r\n\r\n      editor.events.on('keyup', function (e) {\r\n        if ($current_image && e.which == FE.KEYCODE.ENTER) {\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Prevent typing in image caption DOM structure.\r\n      editor.events.$on(editor.$el, 'keydown', function () {\r\n        let el = editor.selection.element()\r\n\r\n        // Parent node of the current element.\r\n        if (el.nodeType === Node.TEXT_NODE || (el.tagName == 'BR' && editor.node.isLastSibling(el))) {\r\n          el = el.parentNode\r\n        }\r\n\r\n        if (!editor.node.hasClass(el, 'fr-inner')) {\r\n          if (!editor.node.hasClass(el, 'fr-img-caption')) {\r\n            el = $(el).parents('.fr-img-caption').get(0)\r\n          }\r\n\r\n          // Check if we are in image caption.\r\n          if (editor.node.hasClass(el, 'fr-img-caption')) {\r\n            $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS);\r\n            editor.selection.restore();\r\n          }\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler)\r\n    }\r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_image) {\r\n        if (editor.$wp) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        else {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_image) {\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // Copy/cut image.\r\n    editor.events.on('window.cut window.copy', function (e) {\r\n      // Do copy only if image.edit popups is visible and not focused.\r\n      if ($current_image && editor.popups.isVisible('image.edit') && !editor.popups.get('image.edit').find(':focus').length) {\r\n\r\n        const $el = getEl()\r\n\r\n        if (hasCaption()) {\r\n          $el.before(FE.START_MARKER)\r\n          $el.after(FE.END_MARKER)\r\n          editor.selection.restore()\r\n          editor.paste.saveCopiedText($el.get(0).outerHTML, $el.text())\r\n        }\r\n        else {\r\n          editor.paste.saveCopiedText($current_image.get(0).outerHTML, $current_image.attr('alt'))\r\n        }\r\n\r\n        if (e.type == 'copy') {\r\n          setTimeout(function () {\r\n            _editImg($current_image)\r\n          })\r\n        }\r\n        else {\r\n          _exitEdit(true)\r\n          editor.undo.saveStep()\r\n          setTimeout(function () {\r\n            editor.undo.saveStep()\r\n          }, 0)\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Fix IE copy not working when selection is collapsed.\r\n    if (editor.browser.msie) {\r\n      editor.events.on('keydown', function (e) {\r\n        // Selection is collapsed and we have an image.\r\n        if (!(editor.selection.isCollapsed() && $current_image)) return true\r\n\r\n        const key_code = e.which\r\n\r\n        // Copy.\r\n        if (key_code == FE.KEYCODE.C && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.copy')\r\n        }\r\n\r\n        // Cut.\r\n        else if (key_code == FE.KEYCODE.X && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.cut')\r\n        }\r\n      })\r\n    }\r\n\r\n    // Do not leave page while uploading.\r\n    editor.events.$on($(editor.o_win), 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && key_code == FE.KEYCODE.BACKSPACE) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Check if image is uploading to abort it.\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && $current_image.hasClass('fr-uploading') && key_code == FE.KEYCODE.ESC) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      if ($current_image && $current_image.hasClass('fr-uploading')) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('paste.before', _clipboardPaste)\r\n    editor.events.on('paste.beforeCleanup', _clipboardPasteCleanup)\r\n    editor.events.on('paste.after', _uploadPastedImages)\r\n\r\n    // Remove any fr-uploading / fr-error images.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n\r\n    if (editor.opts.imageOutputSize) {\r\n      let imgs\r\n\r\n      editor.events.on('html.beforeGet', function () {\r\n        imgs = editor.el.querySelectorAll('img')\r\n        for (let i = 0; i < imgs.length; i++) {\r\n          const width = imgs[i].style.width || $(imgs[i]).width()\r\n          const height = imgs[i].style.height || $(imgs[i]).height()\r\n\r\n          if (width) imgs[i].setAttribute('width', (`${width}`).replace(/px/, ''))\r\n\r\n          if (height) imgs[i].setAttribute('height', (`${height}`).replace(/px/, ''))\r\n        }\r\n      })\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.events.on('image.loaded', editor.size.syncIframe)\r\n    }\r\n\r\n    editor.events.$on($(editor.o_win), 'orientationchange.image', function () {\r\n      setTimeout(function () {\r\n        if ($current_image) {\r\n          _editImg($current_image)\r\n        }\r\n      }, 100)\r\n    })\r\n\r\n    _initEditPopup(true)\r\n    _initInsertPopup(true)\r\n    _initSizePopup(true)\r\n    _initAltPopup(true)\r\n\r\n    editor.events.on('node.remove', function ($node) {\r\n      if ($node.get(0).tagName == 'IMG') {\r\n        remove($node)\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    editor.events.on('popups.hide.filesManager.insert', function ($node) {\r\n      editor.filesManager.minimizePopup(current_index)\r\n    })\r\n  }\r\n\r\n  function _processPastedImage(img) {\r\n    if (editor.events.trigger('image.beforePasteUpload', [img]) === false) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Show the progress bar.\r\n    $current_image = $(img)\r\n    _repositionResizer()\r\n    showProgressBar()\r\n\r\n    $current_image.on('load', function () {\r\n      let loadEvents = []\r\n\r\n      _repositionResizer()\r\n      // https://github.com/froala/wysiwyg-editor/issues/3407\r\n      if ($(editor.popups.get('filesManager.insert').get(0)).find('div.fr-active.fr-error').length < 1) {\r\n        showProgressBar()\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1866\r\n      $(this).data('events').find(function(event) {\r\n        if (event[0] === 'load') {\r\n          loadEvents.push(event)\r\n        }\r\n      })\r\n      \r\n      // turn off the event if it is registered only once\r\n      loadEvents.length <= 1 && $(this).off('load')\r\n    })\r\n\r\n    const splitSrc = $(img).attr('src').split(',')\r\n\r\n    // Convert image to blob.\r\n    const binary = atob(splitSrc[1])\r\n    const array = []\r\n\r\n    for (let i = 0; i < binary.length; i++) {\r\n      array.push(binary.charCodeAt(i))\r\n    }\r\n\r\n    const upload_img = new Blob([new Uint8Array(array)], {\r\n      type: splitSrc[0].replace(/data\\:/g, '').replace(/;base64/g, '')\r\n    })\r\n\r\n    upload(upload_img, $current_image)\r\n  }\r\n\r\n  function _uploadPastedImages() {\r\n    if (!editor.opts.imagePaste) {\r\n      editor.$el.find('img[data-fr-image-pasted]').remove()\r\n    }\r\n    else {\r\n\r\n      // Safari won't work https://bugs.webkit.org/show_bug.cgi?id=49141\r\n      editor.$el.find('img[data-fr-image-pasted]').each(function (index, img) {\r\n        if (editor.opts.imagePasteProcess) {\r\n          let width = editor.opts.imageDefaultWidth\r\n\r\n          if (width && width != 'auto') {\r\n            width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n          }\r\n          $(img)\r\n            .css('width', width)\r\n            .removeClass('fr-dii fr-dib fr-fir fr-fil')\r\n\r\n          _setStyleImage($(img), editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n        }\r\n\r\n        // Data images.\r\n        if (img.src.indexOf('data:') === 0) {\r\n          _processPastedImage(img)\r\n        }\r\n\r\n        // New way Safari is pasting images.\r\n        else if (img.src.indexOf('blob:') === 0 || (img.src.indexOf('http') === 0 && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy)) {\r\n          const _img = new Image()\r\n          _img.crossOrigin = 'Anonymous'\r\n          _img.onload = function () {\r\n            // Create canvas.\r\n            const canvas = editor.o_doc.createElement('CANVAS')\r\n            const context = canvas.getContext('2d')\r\n\r\n            // Set height.\r\n            canvas.height = this.naturalHeight\r\n            canvas.width = this.naturalWidth\r\n\r\n            // Draw image.\r\n            context.drawImage(this, 0, 0)\r\n\r\n            // pushing the execution at end of the stack\r\n            setTimeout(function () {\r\n              _processPastedImage(img)\r\n            }, 0)\r\n\r\n            let imgExt\r\n\r\n            if (this.naturalWidth > 2000 || this.naturalHeight > 1500) {\r\n              imgExt = 'jpeg' // if images are too large\r\n            }\r\n            else {\r\n              imgExt = 'png'\r\n            }\r\n            // Update image and process it.\r\n            img.src = canvas.toDataURL(`image/${imgExt}`)\r\n          }\r\n          _img.src = (img.src.indexOf('blob:') === 0 ? '' : (`${editor.opts.imageCORSProxy}/`)) + img.src\r\n        }\r\n\r\n        // Images without http (Safari ones.).\r\n        else if (img.src.indexOf('http') !== 0 || img.src.indexOf('https://mail.google.com/mail') === 0) {\r\n          editor.selection.save()\r\n          $(img).remove()\r\n          editor.selection.restore()\r\n        }\r\n        else {\r\n          $(img).removeAttr('data-fr-image-pasted')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function _clipboardImageLoaded(e) {\r\n    const result = e.target.result\r\n\r\n    // Default width.\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    editor.html.insert(`<img data-fr-image-pasted=\"true\" src=\"${result}\"${(width ? ` style=\"width: ${width};\"` : '')}>`)\r\n\r\n    const $img = editor.$el.find('img[data-fr-image-pasted=\"true\"]')\r\n\r\n    if ($img) {\r\n      _setStyleImage($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n    }\r\n\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  function _processsClipboardPaste(file) {\r\n    const reader = new FileReader()\r\n    reader.onload = _clipboardImageLoaded\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function _clipboardPaste(e) {\r\n    if (e && e.clipboardData && e.clipboardData.items) {\r\n\r\n      let file = null\r\n\r\n      if (!((e.clipboardData.types && [].indexOf.call(e.clipboardData.types, 'text/rtf') != -1) || e.clipboardData.getData('text/rtf'))) {\r\n        for (let i = 0; i < e.clipboardData.items.length; i++) {\r\n          file = e.clipboardData.items[i].getAsFile()\r\n\r\n          if (file) {\r\n            break\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        file = e.clipboardData.items[0].getAsFile()\r\n      }\r\n\r\n      if (file) {\r\n        _processsClipboardPaste(file)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clipboardPasteCleanup(clipboard_html) {\r\n    clipboard_html = clipboard_html.replace(/<img /gi, '<img data-fr-image-pasted=\"true\" ')\r\n\r\n    return clipboard_html\r\n  }\r\n\r\n  /**\r\n   * Start edit.\r\n   */\r\n  let touchScroll\r\n\r\n  function _edit(e) {\r\n    if ($(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('image.hideResizer')\r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable()\r\n\r\n    if (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe()\r\n    }\r\n\r\n    // Store current image.\r\n    $current_image = $(this)\r\n\r\n    // Reposition resizer.\r\n    _repositionResizer()\r\n\r\n    // Issue 2801\r\n    if (editor.browser.msie) {\r\n      if (editor.popups.areVisible()) {\r\n        editor.events.disableBlur()\r\n      }\r\n\r\n      if (editor.win.getSelection) {\r\n        editor.win.getSelection().removeAllRanges()\r\n        editor.win.getSelection().addRange(editor.doc.createRange())\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    // Fix for image remaining selected.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    // Refresh buttons.\r\n    editor.button.bulkRefresh()\r\n    editor.events.trigger('video.hideResizer')\r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n\r\n  function _exitEdit(force_exit) {\r\n    if ($current_image && (_canExit() || force_exit === true)) {\r\n      editor.toolbar.enable()\r\n      $image_resizer && $image_resizer.removeClass('fr-active')\r\n      editor.popups.hide('image.edit')\r\n      $current_image = null\r\n      _unmarkExit()\r\n\r\n      $handler = null\r\n\r\n      if ($overlay) {\r\n        $overlay.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  let img_exit_flag = false\r\n\r\n  function _markExit() {\r\n    img_exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    img_exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return img_exit_flag\r\n  }\r\n\r\n  function _setStyleVideo($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Set style for image.\r\n   */\r\n  function _setStyleImage($img, _display, _align) {\r\n\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $img.removeClass('fr-fil fr-fir fr-dib fr-dii')\r\n\r\n      if (_align) {\r\n        $img.addClass(`fr-fi${_align[0]}`)\r\n      }\r\n\r\n      if (_display) {\r\n        $img.addClass(`fr-di${_display[0]}`)\r\n      }\r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $img.css({\r\n          display: 'inline-block',\r\n          verticalAlign: 'bottom',\r\n          margin: editor.opts.imageDefaultMargin\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $img.css({\r\n            'float': 'none',\r\n            marginBottom: '',\r\n            marginTop: '',\r\n            maxWidth: `calc(100% - ${(2 * editor.opts.imageDefaultMargin)}px)`,\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $img.css({\r\n            'float': 'left',\r\n            marginLeft: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else {\r\n          $img.css({\r\n            'float': 'right',\r\n            marginRight: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n      else if (_display == 'block') {\r\n        $img.css({\r\n          display: 'block',\r\n          'float': 'none',\r\n          verticalAlign: 'top',\r\n          margin: `${editor.opts.imageDefaultMargin}px auto`,\r\n          textAlign: 'center'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $img.css({\r\n            marginLeft: 0,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $img.css({\r\n            marginRight: 0,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n \r\n  /**\r\n   * Get the current image.\r\n   */\r\n\r\n  function get() {\r\n\r\n    return $current_image\r\n  }\r\n\r\n  function getEl() {\r\n    return hasCaption() ? $current_image.parents('.fr-img-caption').first() : $current_image\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n\r\n  function applyStyle(val, imageStyles, multipleStyles) {\r\n    if (typeof imageStyles == 'undefined') imageStyles = editor.opts.imageStyles\r\n\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.imageMultipleStyles\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $img = getEl()\r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(imageStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      $img.removeClass(styles.join(' '))\r\n    }\r\n\r\n    if (typeof imageStyles[val] == 'object') {\r\n      $img.removeAttr('style')\r\n      $img.css(imageStyles[val].style)\r\n    }\r\n    else {\r\n      $img.toggleClass(val)\r\n    }\r\n\r\n    _editImg($current_image)\r\n  }\r\n\r\n  function hasCaption() {\r\n    if ($current_image) {\r\n      return $current_image.parents('.fr-img-caption').length > 0\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function refreshEmbedButton($btn) {\r\n    const $popup = editor.popups.get('filesManager.insert')\r\n    if ($popup && $popup.find('.fr-files-embed-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function toggleCaption() {\r\n    let $el\r\n\r\n    if ($current_image && !hasCaption()) {\r\n      $el = $current_image\r\n\r\n      // Check if there is a link wrapping the image.\r\n      if ($current_image.parent().is('a')) {\r\n        $el = $current_image.parent()\r\n      }\r\n\r\n      // code start https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n\r\n      // check the li placement\r\n      var $listParent = $current_image.parents('ul') && $current_image.parents('ul').length > 0 ? $current_image.parents('ul') : $current_image.parents('ol') && $current_image.parents('ol').length > 0 ? $current_image.parents('ol') : [];\r\n      if ($listParent.length > 0) {\r\n        var totLi = $listParent.find('li').length,\r\n          $currLi = $current_image.parents('li'),\r\n          $newLi = document.createElement(\"li\");;\r\n        \r\n        if ((totLi - 1) === $currLi.index()) { // if li placement last then add one extra li\r\n          $listParent.append($newLi);\r\n          $newLi.innerHTML = '&nbsp;';\r\n        }\r\n      }\r\n\r\n      let splitAttrs\r\n      let oldWidth\r\n\r\n      if ($el.attr('style')) {\r\n        splitAttrs = $el.attr('style').split(':')\r\n        oldWidth = splitAttrs.indexOf('width') > -1 ? splitAttrs[splitAttrs.indexOf('width') + 1].replace(';', '') : ''\r\n      }\r\n\r\n      // Issue 2861\r\n      const current_width = editor.opts.imageResizeWithPercent ? (oldWidth.indexOf('px') > -1 ? null : oldWidth) || '100%' : $current_image.width() + 'px'\r\n  \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      $el.wrap('<div class=\"fr-img-space-wrap\"><span ' + (!editor.browser.mozilla ? 'contenteditable=\"false\"' : '') + 'class=\"fr-img-caption ' + $current_image.attr('class') + '\" style=\"' + (!editor.opts.useClasses ? $el.attr('style') : '') + '\" draggable=\"false\"></span><p class=\"fr-img-space-wrap2\">&nbsp;</p></div>')\r\n      $el.wrap('<span class=\"fr-img-wrap\"></span>')\r\n      $current_image.after(`<span class=\"fr-inner\"${(!editor.browser.mozilla ? ' contenteditable=\"true\"' : '')}>${FE.START_MARKER}${editor.language.translate('Image Caption')}${FE.END_MARKER}</span>`)\r\n      $current_image.removeAttr('class').removeAttr('style').removeAttr('width')\r\n\r\n      $current_image.parents('.fr-img-caption').css('width', current_width);\r\n\r\n      _exitEdit(true)\r\n\r\n      editor.selection.restore()\r\n    }\r\n    else {\r\n      $el = getEl()\r\n      $current_image.insertAfter($el)\r\n      $current_image\r\n        .attr('class', $el.attr('class').replace('fr-img-caption', ''))\r\n        .attr('style', $el.attr('style'))\r\n      $el.remove()\r\n\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshUploadButton: refreshUploadButton,\r\n    refreshByURLButton: refreshByURLButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    insertAllFiles: insertAllFiles,\r\n    deleteAllFiles: deleteAllFiles,\r\n    get: get,\r\n    getEl: getEl,\r\n    insert: insert,\r\n    showProgressBar: showProgressBar,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    applyStyle: applyStyle,\r\n    showAltPopup: showAltPopup,\r\n    showSizePopup: showSizePopup,\r\n    setAlt: setAlt,\r\n    setSize: setSize,\r\n    toggleCaption: toggleCaption,\r\n    refreshEmbedButton: refreshEmbedButton,\r\n    insertEmbed: insertEmbed,\r\n    hasCaption: hasCaption,\r\n    exitEdit: _exitEdit,\r\n    edit: _editImg,\r\n    cancelFileInsert: cancelFileInsert,\r\n    minimizePopup: minimizePopup,\r\n    editImage: editImage,\r\n    saveImage: saveImage,\r\n    _showErrorMessage: _showErrorMessage,\r\n    _showFileErrorMessage: _showFileErrorMessage,\r\n    getFileThumbnail: getFileThumbnail,\r\n    deleteFile:deleteFile,\r\n    checkAutoplay:checkAutoplay,\r\n    checkInsertAllState:checkInsertAllState,\r\n    _disableInsertCheckbox:_disableInsertCheckbox,\r\n    _getFileType: _getFileType,\r\n    isChildWindowOpen: isChildWindowOpen,\r\n    setChildWindowState: setChildWindowState,\r\n    resetAllFilesCheckbox: resetAllFilesCheckbox\r\n  }\r\n}\r\n\r\n// Insert image button.\r\nFE.DefineIcon('insertFiles', {\r\n  NAME: 'image',\r\n  SVG_KEY: 'fileManager'\r\n})\r\nFE.RegisterShortcut(FE.KEYCODE.P, 'insertFiles', null, 'P')\r\nFE.RegisterCommand('insertFiles', {\r\n  title: 'Insert Files',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('filesManager.insert')) {\r\n      this.filesManager.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('filesManager.insert')\r\n    }\r\n  },\r\n  plugin: 'filesManager'\r\n})\r\n\r\n\r\nFE.DefineIcon('cloudIcon', {\r\n  NAME: 'cloudIcon',\r\n  SVG_KEY: 'uploadFiles'\r\n})\r\n\r\n// Image upload button inside the insert image popup.\r\nFE.DefineIcon('filesUpload', {\r\n  NAME: 'uploadFiles',\r\n  SVG_KEY: 'uploadFiles'\r\n})\r\nFE.RegisterCommand('filesUpload', {\r\n  title: 'Upload Files',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-upload')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshUploadButton($btn)\r\n  }\r\n})\r\n\r\n// Image by URL button inside the insert image popup.\r\nFE.DefineIcon('filesByURL', {\r\n  NAME: 'link',\r\n  SVG_KEY: 'insertLink'\r\n})\r\nFE.RegisterCommand('filesByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-by-url')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshByURLButton($btn)\r\n  }\r\n})\r\n\r\n// image\r\n// Video embed button inside the insert video popup.\r\nFE.DefineIcon('filesEmbed', { NAME: 'code', SVG_KEY: 'codeView' })\r\nFE.RegisterCommand('filesEmbed', {\r\n  title: 'Embedded Code',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.showLayer('files-embed')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshEmbedButton($btn)\r\n  }\r\n})\r\n\r\nFE.DefineIcon('insertAll', { NAME: 'insertAll', SVG_KEY: 'fileInsert' })\r\nFE.RegisterCommand('insertAll', {\r\n  title: 'Insert',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  disabled: true,\r\n  callback: function () {\r\n    this.filesManager.insertAllFiles()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('deleteAll', { NAME: 'remove', SVG_KEY: 'remove' })\r\nFE.RegisterCommand('deleteAll', {\r\n  title: 'Delete',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  disabled: true,\r\n  callback: function () {\r\n    this.filesManager.deleteAllFiles()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('cancel', { NAME: 'cancel', SVG_KEY: 'cancel' })\r\nFE.RegisterCommand('cancel', {\r\n  title: 'Cancel',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.cancelFileInsert() \r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\nFE.DefineIcon('minimize', { NAME: 'minimize', SVG_KEY: 'minimize' })\r\nFE.RegisterCommand('minimize', {\r\n  title: 'Minimize',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.filesManager.minimizePopup(\"image.insert\", true);\r\n  },\r\n  refresh: function ($btn) {\r\n    this.filesManager.refreshEmbedButton($btn)\r\n  }\r\n})\r\n\r\n\r\n// Insert image button inside the insert by URL layer.\r\nFE.RegisterCommand('filesInsertByURL', {\r\n  title: 'Insert Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.filesManager.insertByURL()\r\n  },\r\n  refresh: function ($btn) {\r\n      $btn.text(this.language.translate('Add'))\r\n  }\r\n})\r\n\r\n// Insert image button inside the insert by upload layer.\r\nFE.RegisterCommand('imageInsertByUpload', {\r\n  title: 'Insert',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function (cmd, val) {\r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\n// View image\r\nFE.RegisterCommand('viewImage', {\r\n  title: 'View Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function (cmd, val) {\r\n    \r\n  },\r\n  refresh: function ($btn) {\r\n  }\r\n})\r\n\r\n// Embed Insert\r\nFE.RegisterCommand('insertEmbed', {\t\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.filesManager.insertEmbed()\r\n    this.popups.get('filesManager.insert').find('textarea')[0].value=''\r\n    this.popups.get('filesManager.insert').find('textarea').removeClass('fr-not-empty')\r\n  }\t\r\n})\r\n\r\nFE.RegisterCommand('filesDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\t\r\n    this.filesManager.hideProgressBar(true)\t\r\n  }\t\r\n})\r\n","import FE from '../index.js'\r\n/**\r\n * crypto-js\r\n *\r\n * LICENSE: The MIT License (MIT), https://github.com/brix/crypto-js/blob/develop/LICENSE\r\n *\r\n * Copyright (c) 2009-2013 Jeff Mott  \r\n * Copyright (c) 2013-2016 Evan Vosberg\r\n*/\r\nFE.PLUGINS.cryptoJSPlugin = function (editor) {\r\n    function init() {\r\n     \r\n    }\r\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\r\n\r\n\t    var crypto;\r\n\r\n\t    // Native crypto from window (Browser)\r\n\t    if (typeof window !== 'undefined' && window.crypto) {\r\n\t        crypto = window.crypto;\r\n\t    }\r\n\r\n\t    // Native (experimental IE 11) crypto from window (Browser)\r\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\r\n\t        crypto = window.msCrypto;\r\n\t    }\r\n\r\n\t    // Native crypto from global (NodeJS)\r\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\r\n\t        crypto = global.crypto;\r\n\t    }\r\n\r\n\t    // Native crypto import via require (NodeJS)\r\n\t    if (!crypto && typeof require === 'function') {\r\n\t        try {\r\n\t            crypto = require('crypto');\r\n\t        } catch (err) {}\r\n\t    }\r\n\r\n\t    /*\r\n\t     * Cryptographically secure pseudorandom number generator\r\n\t     *\r\n\t     * As Math.random() is cryptographically not safe to use\r\n\t     */\r\n\t    var cryptoSecureRandomInt = function () {\r\n\t        if (crypto) {\r\n\t            // Use getRandomValues method (Browser)\r\n\t            if (typeof crypto.getRandomValues === 'function') {\r\n\t                try {\r\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\r\n\t                } catch (err) {}\r\n\t            }\r\n\r\n\t            // Use randomBytes method (NodeJS)\r\n\t            if (typeof crypto.randomBytes === 'function') {\r\n\t                try {\r\n\t                    return crypto.randomBytes(4).readInt32LE();\r\n\t                } catch (err) {}\r\n\t            }\r\n\t        }\r\n\r\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\r\n\t    };\r\n\r\n\t    /*\r\n\t     * Local polyfill of Object.create\r\n\r\n\t     */\r\n\t    var create = Object.create || (function () {\r\n\t        function F() {}\r\n\r\n\t        return function (obj) {\r\n\t            var subtype;\r\n\r\n\t            F.prototype = obj;\r\n\r\n\t            subtype = new F();\r\n\r\n\t            F.prototype = null;\r\n\r\n\t            return subtype;\r\n\t        };\r\n\t    }())\r\n\r\n\t    /**\r\n\t     * CryptoJS namespace.\r\n\t     */\r\n\t    var C = {};\r\n\r\n\t    /**\r\n\t     * Library namespace.\r\n\t     */\r\n\t    var C_lib = C.lib = {};\r\n\r\n\t    /**\r\n\t     * Base object for prototypal inheritance.\r\n\t     */\r\n\t    var Base = C_lib.Base = (function () {\r\n\r\n\r\n\t        return {\r\n\t            /**\r\n\t             * Creates a new object that inherits from this object.\r\n\t             *\r\n\t             * @param {Object} overrides Properties to copy into the new object.\r\n\t             *\r\n\t             * @return {Object} The new object.\r\n\t             *\r\n\t             * @static\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var MyType = CryptoJS.lib.Base.extend({\r\n\t             *         field: 'value',\r\n\t             *\r\n\t             *         method: function () {\r\n\t             *         }\r\n\t             *     });\r\n\t             */\r\n\t            extend: function (overrides) {\r\n\t                // Spawn\r\n\t                var subtype = create(this);\r\n\r\n\t                // Augment\r\n\t                if (overrides) {\r\n\t                    subtype.mixIn(overrides);\r\n\t                }\r\n\r\n\t                // Create default initializer\r\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\r\n\t                    subtype.init = function () {\r\n\t                        subtype.$super.init.apply(this, arguments);\r\n\t                    };\r\n\t                }\r\n\r\n\t                // Initializer's prototype is the subtype object\r\n\t                subtype.init.prototype = subtype;\r\n\r\n\t                // Reference supertype\r\n\t                subtype.$super = this;\r\n\r\n\t                return subtype;\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Extends this object and runs the init method.\r\n\t             * Arguments to create() will be passed to init().\r\n\t             *\r\n\t             * @return {Object} The new object.\r\n\t             *\r\n\t             * @static\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var instance = MyType.create();\r\n\t             */\r\n\t            create: function () {\r\n\t                var instance = this.extend();\r\n\t                instance.init.apply(instance, arguments);\r\n\r\n\t                return instance;\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Initializes a newly created object.\r\n\t             * Override this method to add some logic when your objects are created.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var MyType = CryptoJS.lib.Base.extend({\r\n\t             *         init: function () {\r\n\t             *             // ...\r\n\t             *         }\r\n\t             *     });\r\n\t             */\r\n\t            init: function () {\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Copies properties into this object.\r\n\t             *\r\n\t             * @param {Object} properties The properties to mix in.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     MyType.mixIn({\r\n\t             *         field: 'value'\r\n\t             *     });\r\n\t             */\r\n\t            mixIn: function (properties) {\r\n\t                for (var propertyName in properties) {\r\n\t                    if (properties.hasOwnProperty(propertyName)) {\r\n\t                        this[propertyName] = properties[propertyName];\r\n\t                    }\r\n\t                }\r\n\r\n\t                // IE won't copy toString using the loop above\r\n\t                if (properties.hasOwnProperty('toString')) {\r\n\t                    this.toString = properties.toString;\r\n\t                }\r\n\t            },\r\n\r\n\t            /**\r\n\t             * Creates a copy of this object.\r\n\t             *\r\n\t             * @return {Object} The clone.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     var clone = instance.clone();\r\n\t             */\r\n\t            clone: function () {\r\n\t                return this.init.prototype.extend(this);\r\n\t            }\r\n\t        };\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * An array of 32-bit words.\r\n\t     *\r\n\t     * @property {Array} words The array of 32-bit words.\r\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\r\n\t     */\r\n\t    var WordArray = C_lib.WordArray = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created word array.\r\n\t         *\r\n\t         * @param {Array} words (Optional) An array of 32-bit words.\r\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\r\n\t         */\r\n\t        init: function (words, sigBytes) {\r\n\t            words = this.words = words || [];\r\n\r\n\t            if (sigBytes != undefined) {\r\n\t                this.sigBytes = sigBytes;\r\n\t            } else {\r\n\t                this.sigBytes = words.length * 4;\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this word array to a string.\r\n\t         *\r\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\r\n\t         *\r\n\t         * @return {string} The stringified word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var string = wordArray + '';\r\n\t         *     var string = wordArray.toString();\r\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\r\n\t         */\r\n\t        toString: function (encoder) {\r\n\t            return (encoder || Hex).stringify(this);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Concatenates a word array to this word array.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array to append.\r\n\t         *\r\n\t         * @return {WordArray} This word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     wordArray1.concat(wordArray2);\r\n\t         */\r\n\t        concat: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var thisWords = this.words;\r\n\t            var thatWords = wordArray.words;\r\n\t            var thisSigBytes = this.sigBytes;\r\n\t            var thatSigBytes = wordArray.sigBytes;\r\n\r\n\t            // Clamp excess bits\r\n\t            this.clamp();\r\n\r\n\t            // Concat\r\n\t            if (thisSigBytes % 4) {\r\n\t                // Copy one byte at a time\r\n\t                for (var i = 0; i < thatSigBytes; i++) {\r\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\r\n\t                }\r\n\t            } else {\r\n\t                // Copy one word at a time\r\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\r\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\r\n\t                }\r\n\t            }\r\n\t            this.sigBytes += thatSigBytes;\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Removes insignificant bits.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     wordArray.clamp();\r\n\t         */\r\n\t        clamp: function () {\r\n\t            // Shortcuts\r\n\t            var words = this.words;\r\n\t            var sigBytes = this.sigBytes;\r\n\r\n\t            // Clamp\r\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\r\n\t            words.length = Math.ceil(sigBytes / 4);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this word array.\r\n\t         *\r\n\t         * @return {WordArray} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = wordArray.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\t            clone.words = this.words.slice(0);\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a word array filled with random bytes.\r\n\t         *\r\n\t         * @param {number} nBytes The number of random bytes to generate.\r\n\t         *\r\n\t         * @return {WordArray} The random word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\r\n\t         */\r\n\t        random: function (nBytes) {\r\n\t            var words = [];\r\n\r\n\t            for (var i = 0; i < nBytes; i += 4) {\r\n\t                words.push(cryptoSecureRandomInt());\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, nBytes);\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Encoder namespace.\r\n\t     */\r\n\t    var C_enc = C.enc = {};\r\n\r\n\t    /**\r\n\t     * Hex encoding strategy.\r\n\t     */\r\n\t    var Hex = C_enc.Hex = {\r\n\t        /**\r\n\t         * Converts a word array to a hex string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The hex string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var hexChars = [];\r\n\t            for (var i = 0; i < sigBytes; i++) {\r\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                hexChars.push((bite >>> 4).toString(16));\r\n\t                hexChars.push((bite & 0x0f).toString(16));\r\n\t            }\r\n\r\n\t            return hexChars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a hex string to a word array.\r\n\t         *\r\n\t         * @param {string} hexStr The hex string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\r\n\t         */\r\n\t        parse: function (hexStr) {\r\n\t            // Shortcut\r\n\t            var hexStrLength = hexStr.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < hexStrLength; i += 2) {\r\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, hexStrLength / 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Latin1 encoding strategy.\r\n\t     */\r\n\t    var Latin1 = C_enc.Latin1 = {\r\n\t        /**\r\n\t         * Converts a word array to a Latin1 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The Latin1 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var latin1Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i++) {\r\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t                latin1Chars.push(String.fromCharCode(bite));\r\n\t            }\r\n\r\n\t            return latin1Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a Latin1 string to a word array.\r\n\t         *\r\n\t         * @param {string} latin1Str The Latin1 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\r\n\t         */\r\n\t        parse: function (latin1Str) {\r\n\t            // Shortcut\r\n\t            var latin1StrLength = latin1Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < latin1StrLength; i++) {\r\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\r\n\t            }\r\n\r\n\t            return new WordArray.init(words, latin1StrLength);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * UTF-8 encoding strategy.\r\n\t     */\r\n\t    var Utf8 = C_enc.Utf8 = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-8 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-8 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            try {\r\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\r\n\t            } catch (e) {\r\n\t                throw new Error('Malformed UTF-8 data');\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-8 string to a word array.\r\n\t         *\r\n\t         * @param {string} utf8Str The UTF-8 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\r\n\t         */\r\n\t        parse: function (utf8Str) {\r\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Abstract buffered block algorithm template.\r\n\t     *\r\n\t     * The property blockSize must be implemented in a concrete subtype.\r\n\t     *\r\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\r\n\t     */\r\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\r\n\t        /**\r\n\t         * Resets this block algorithm's data buffer to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     bufferedBlockAlgorithm.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Initial values\r\n\t            this._data = new WordArray.init();\r\n\t            this._nDataBytes = 0;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Adds new data to this block algorithm's buffer.\r\n\t         *\r\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     bufferedBlockAlgorithm._append('data');\r\n\t         *     bufferedBlockAlgorithm._append(wordArray);\r\n\t         */\r\n\t        _append: function (data) {\r\n\t            // Convert string to WordArray, else assume WordArray already\r\n\t            if (typeof data == 'string') {\r\n\t                data = Utf8.parse(data);\r\n\t            }\r\n\r\n\t            // Append\r\n\t            this._data.concat(data);\r\n\t            this._nDataBytes += data.sigBytes;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Processes available data blocks.\r\n\t         *\r\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\r\n\t         *\r\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\r\n\t         *\r\n\t         * @return {WordArray} The processed data.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var processedData = bufferedBlockAlgorithm._process();\r\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\r\n\t         */\r\n\t        _process: function (doFlush) {\r\n\t            var processedWords;\r\n\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\t            var dataSigBytes = data.sigBytes;\r\n\t            var blockSize = this.blockSize;\r\n\t            var blockSizeBytes = blockSize * 4;\r\n\r\n\t            // Count blocks ready\r\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\r\n\t            if (doFlush) {\r\n\t                // Round up to include partial blocks\r\n\t                nBlocksReady = Math.ceil(nBlocksReady);\r\n\t            } else {\r\n\t                // Round down to include only full blocks,\r\n\t                // less the number of blocks that must remain in the buffer\r\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\r\n\t            }\r\n\r\n\t            // Count words ready\r\n\t            var nWordsReady = nBlocksReady * blockSize;\r\n\r\n\t            // Count bytes ready\r\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\r\n\r\n\t            // Process blocks\r\n\t            if (nWordsReady) {\r\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\r\n\t                    // Perform concrete-algorithm logic\r\n\t                    this._doProcessBlock(dataWords, offset);\r\n\t                }\r\n\r\n\t                // Remove processed words\r\n\t                processedWords = dataWords.splice(0, nWordsReady);\r\n\t                data.sigBytes -= nBytesReady;\r\n\t            }\r\n\r\n\t            // Return processed words\r\n\t            return new WordArray.init(processedWords, nBytesReady);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this object.\r\n\t         *\r\n\t         * @return {Object} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = bufferedBlockAlgorithm.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\t            clone._data = this._data.clone();\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        _minBufferSize: 0\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Abstract hasher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\r\n\t     */\r\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         */\r\n\t        cfg: Base.extend(),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created hasher.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            // Apply config defaults\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this hasher to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hasher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Reset data buffer\r\n\t            BufferedBlockAlgorithm.reset.call(this);\r\n\r\n\t            // Perform concrete-hasher logic\r\n\t            this._doReset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Updates this hasher with a message.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate The message to append.\r\n\t         *\r\n\t         * @return {Hasher} This hasher.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hasher.update('message');\r\n\t         *     hasher.update(wordArray);\r\n\t         */\r\n\t        update: function (messageUpdate) {\r\n\t            // Append\r\n\t            this._append(messageUpdate);\r\n\r\n\t            // Update the hash\r\n\t            this._process();\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the hash computation.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t         *\r\n\t         * @return {WordArray} The hash.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hash = hasher.finalize();\r\n\t         *     var hash = hasher.finalize('message');\r\n\t         *     var hash = hasher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (messageUpdate) {\r\n\t            // Final message update\r\n\t            if (messageUpdate) {\r\n\t                this._append(messageUpdate);\r\n\t            }\r\n\r\n\t            // Perform concrete-hasher logic\r\n\t            var hash = this._doFinalize();\r\n\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        blockSize: 512/32,\r\n\r\n\t        /**\r\n\t         * Creates a shortcut function to a hasher's object interface.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hasher to create a helper for.\r\n\t         *\r\n\t         * @return {Function} The shortcut function.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\r\n\t         */\r\n\t        _createHelper: function (hasher) {\r\n\t            return function (message, cfg) {\r\n\t                return new hasher.init(cfg).finalize(message);\r\n\t            };\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a shortcut function to the HMAC's object interface.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\r\n\t         *\r\n\t         * @return {Function} The shortcut function.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\r\n\t         */\r\n\t        _createHmacHelper: function (hasher) {\r\n\t            return function (message, key) {\r\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\r\n\t            };\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Algorithm namespace.\r\n\t     */\r\n\t    var C_algo = C.algo = {};\r\n\r\n\t    return C;\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_enc = C.enc;\r\n\r\n\t    /**\r\n\t     * Base64 encoding strategy.\r\n\t     */\r\n\t    var Base64 = C_enc.Base64 = {\r\n\t        /**\r\n\t         * Converts a word array to a Base64 string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The Base64 string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\t            var map = this._map;\r\n\r\n\t            // Clamp excess bits\r\n\t            wordArray.clamp();\r\n\r\n\t            // Convert\r\n\t            var base64Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 3) {\r\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\r\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\r\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\r\n\r\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\r\n\r\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\r\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\r\n\t                }\r\n\t            }\r\n\r\n\t            // Add padding\r\n\t            var paddingChar = map.charAt(64);\r\n\t            if (paddingChar) {\r\n\t                while (base64Chars.length % 4) {\r\n\t                    base64Chars.push(paddingChar);\r\n\t                }\r\n\t            }\r\n\r\n\t            return base64Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a Base64 string to a word array.\r\n\t         *\r\n\t         * @param {string} base64Str The Base64 string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\r\n\t         */\r\n\t        parse: function (base64Str) {\r\n\t            // Shortcuts\r\n\t            var base64StrLength = base64Str.length;\r\n\t            var map = this._map;\r\n\t            var reverseMap = this._reverseMap;\r\n\r\n\t            if (!reverseMap) {\r\n\t                    reverseMap = this._reverseMap = [];\r\n\t                    for (var j = 0; j < map.length; j++) {\r\n\t                        reverseMap[map.charCodeAt(j)] = j;\r\n\t                    }\r\n\t            }\r\n\r\n\t            // Ignore padding\r\n\t            var paddingChar = map.charAt(64);\r\n\t            if (paddingChar) {\r\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\r\n\t                if (paddingIndex !== -1) {\r\n\t                    base64StrLength = paddingIndex;\r\n\t                }\r\n\t            }\r\n\r\n\t            // Convert\r\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\r\n\r\n\t        },\r\n\r\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\r\n\t    };\r\n\r\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\r\n\t      var words = [];\r\n\t      var nBytes = 0;\r\n\t      for (var i = 0; i < base64StrLength; i++) {\r\n\t          if (i % 4) {\r\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\r\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\r\n\t              var bitsCombined = bits1 | bits2;\r\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\r\n\t              nBytes++;\r\n\t          }\r\n\t      }\r\n\t      return WordArray.create(words, nBytes);\r\n\t    }\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants table\r\n\t    var T = [];\r\n\r\n\t    // Compute constants\r\n\t    (function () {\r\n\t        for (var i = 0; i < 64; i++) {\r\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * MD5 hash algorithm.\r\n\t     */\r\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0x67452301, 0xefcdab89,\r\n\t                0x98badcfe, 0x10325476\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                // Shortcuts\r\n\t                var offset_i = offset + i;\r\n\t                var M_offset_i = M[offset_i];\r\n\r\n\t                M[offset_i] = (\r\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var H = this._hash.words;\r\n\r\n\t            var M_offset_0  = M[offset + 0];\r\n\t            var M_offset_1  = M[offset + 1];\r\n\t            var M_offset_2  = M[offset + 2];\r\n\t            var M_offset_3  = M[offset + 3];\r\n\t            var M_offset_4  = M[offset + 4];\r\n\t            var M_offset_5  = M[offset + 5];\r\n\t            var M_offset_6  = M[offset + 6];\r\n\t            var M_offset_7  = M[offset + 7];\r\n\t            var M_offset_8  = M[offset + 8];\r\n\t            var M_offset_9  = M[offset + 9];\r\n\t            var M_offset_10 = M[offset + 10];\r\n\t            var M_offset_11 = M[offset + 11];\r\n\t            var M_offset_12 = M[offset + 12];\r\n\t            var M_offset_13 = M[offset + 13];\r\n\t            var M_offset_14 = M[offset + 14];\r\n\t            var M_offset_15 = M[offset + 15];\r\n\r\n\t            // Working varialbes\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\r\n\t            // Computation\r\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\r\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\r\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\r\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\r\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\r\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\r\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\r\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\r\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\r\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\r\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\r\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\r\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\r\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\r\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\r\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\r\n\r\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\r\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\r\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\r\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\r\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\r\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\r\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\r\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\r\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\r\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\r\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\r\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\r\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\r\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\r\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\r\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\r\n\r\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\r\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\r\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\r\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\r\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\r\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\r\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\r\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\r\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\r\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\r\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\r\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\r\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\r\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\r\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\r\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\r\n\r\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\r\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\r\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\r\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\r\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\r\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\r\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\r\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\r\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\r\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\r\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\r\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\r\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\r\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\r\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\r\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\r\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\r\n\t            var nBitsTotalL = nBitsTotal;\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\r\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\r\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\r\n\t            data.sigBytes = (dataWords.length + 1) * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var hash = this._hash;\r\n\t            var H = hash.words;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Shortcut\r\n\t                var H_i = H[i];\r\n\r\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\r\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    function FF(a, b, c, d, x, s, t) {\r\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function GG(a, b, c, d, x, s, t) {\r\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function HH(a, b, c, d, x, s, t) {\r\n\t        var n = a + (b ^ c ^ d) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    function II(a, b, c, d, x, s, t) {\r\n\t        var n = a + (c ^ (b | ~d)) + x + t;\r\n\t        return ((n << s) | (n >>> (32 - s))) + b;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.MD5('message');\r\n\t     *     var hash = CryptoJS.MD5(wordArray);\r\n\t     */\r\n\t    C.MD5 = Hasher._createHelper(MD5);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\r\n\t     */\r\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable object\r\n\t    var W = [];\r\n\r\n\t    /**\r\n\t     * SHA-1 hash algorithm.\r\n\t     */\r\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0x67452301, 0xefcdab89,\r\n\t                0x98badcfe, 0x10325476,\r\n\t                0xc3d2e1f0\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var H = this._hash.words;\r\n\r\n\t            // Working variables\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\t            var e = H[4];\r\n\r\n\t            // Computation\r\n\t            for (var i = 0; i < 80; i++) {\r\n\t                if (i < 16) {\r\n\t                    W[i] = M[offset + i] | 0;\r\n\t                } else {\r\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n\t                    W[i] = (n << 1) | (n >>> 31);\r\n\t                }\r\n\r\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\r\n\t                if (i < 20) {\r\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\r\n\t                } else if (i < 40) {\r\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\r\n\t                } else if (i < 60) {\r\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\r\n\t                } else /* if (i < 80) */ {\r\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\r\n\t                }\r\n\r\n\t                e = d;\r\n\t                d = c;\r\n\t                c = (b << 30) | (b >>> 2);\r\n\t                b = a;\r\n\t                a = t;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t            H[4] = (H[4] + e) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Return final computed hash\r\n\t            return this._hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA1('message');\r\n\t     *     var hash = CryptoJS.SHA1(wordArray);\r\n\t     */\r\n\t    C.SHA1 = Hasher._createHelper(SHA1);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\r\n\t     */\r\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Initialization and round constants tables\r\n\t    var H = [];\r\n\t    var K = [];\r\n\r\n\t    // Compute constants\r\n\t    (function () {\r\n\t        function isPrime(n) {\r\n\t            var sqrtN = Math.sqrt(n);\r\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\r\n\t                if (!(n % factor)) {\r\n\t                    return false;\r\n\t                }\r\n\t            }\r\n\r\n\t            return true;\r\n\t        }\r\n\r\n\t        function getFractionalBits(n) {\r\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\r\n\t        }\r\n\r\n\t        var n = 2;\r\n\t        var nPrime = 0;\r\n\t        while (nPrime < 64) {\r\n\t            if (isPrime(n)) {\r\n\t                if (nPrime < 8) {\r\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\r\n\t                }\r\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\r\n\r\n\t                nPrime++;\r\n\t            }\r\n\r\n\t            n++;\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Reusable object\r\n\t    var W = [];\r\n\r\n\t    /**\r\n\t     * SHA-256 hash algorithm.\r\n\t     */\r\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init(H.slice(0));\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var H = this._hash.words;\r\n\r\n\t            // Working variables\r\n\t            var a = H[0];\r\n\t            var b = H[1];\r\n\t            var c = H[2];\r\n\t            var d = H[3];\r\n\t            var e = H[4];\r\n\t            var f = H[5];\r\n\t            var g = H[6];\r\n\t            var h = H[7];\r\n\r\n\t            // Computation\r\n\t            for (var i = 0; i < 64; i++) {\r\n\t                if (i < 16) {\r\n\t                    W[i] = M[offset + i] | 0;\r\n\t                } else {\r\n\t                    var gamma0x = W[i - 15];\r\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\r\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\r\n\t                                   (gamma0x >>> 3);\r\n\r\n\t                    var gamma1x = W[i - 2];\r\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\r\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\r\n\t                                   (gamma1x >>> 10);\r\n\r\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\r\n\t                }\r\n\r\n\t                var ch  = (e & f) ^ (~e & g);\r\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\r\n\r\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\r\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\r\n\r\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\r\n\t                var t2 = sigma0 + maj;\r\n\r\n\t                h = g;\r\n\t                g = f;\r\n\t                f = e;\r\n\t                e = (d + t1) | 0;\r\n\t                d = c;\r\n\t                c = b;\r\n\t                b = a;\r\n\t                a = (t1 + t2) | 0;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H[0] = (H[0] + a) | 0;\r\n\t            H[1] = (H[1] + b) | 0;\r\n\t            H[2] = (H[2] + c) | 0;\r\n\t            H[3] = (H[3] + d) | 0;\r\n\t            H[4] = (H[4] + e) | 0;\r\n\t            H[5] = (H[5] + f) | 0;\r\n\t            H[6] = (H[6] + g) | 0;\r\n\t            H[7] = (H[7] + h) | 0;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Return final computed hash\r\n\t            return this._hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA256('message');\r\n\t     *     var hash = CryptoJS.SHA256(wordArray);\r\n\t     */\r\n\t    C.SHA256 = Hasher._createHelper(SHA256);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\r\n\t     */\r\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_enc = C.enc;\r\n\r\n\t    /**\r\n\t     * UTF-16 BE encoding strategy.\r\n\t     */\r\n\t    var Utf16BE = C_enc.Utf16 = C_enc.Utf16BE = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-16 BE string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-16 BE string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var utf16Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 2) {\r\n\t                var codePoint = (words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff;\r\n\t                utf16Chars.push(String.fromCharCode(codePoint));\r\n\t            }\r\n\r\n\t            return utf16Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-16 BE string to a word array.\r\n\t         *\r\n\t         * @param {string} utf16Str The UTF-16 BE string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);\r\n\t         */\r\n\t        parse: function (utf16Str) {\r\n\t            // Shortcut\r\n\t            var utf16StrLength = utf16Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < utf16StrLength; i++) {\r\n\t                words[i >>> 1] |= utf16Str.charCodeAt(i) << (16 - (i % 2) * 16);\r\n\t            }\r\n\r\n\t            return WordArray.create(words, utf16StrLength * 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * UTF-16 LE encoding strategy.\r\n\t     */\r\n\t    C_enc.Utf16LE = {\r\n\t        /**\r\n\t         * Converts a word array to a UTF-16 LE string.\r\n\t         *\r\n\t         * @param {WordArray} wordArray The word array.\r\n\t         *\r\n\t         * @return {string} The UTF-16 LE string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);\r\n\t         */\r\n\t        stringify: function (wordArray) {\r\n\t            // Shortcuts\r\n\t            var words = wordArray.words;\r\n\t            var sigBytes = wordArray.sigBytes;\r\n\r\n\t            // Convert\r\n\t            var utf16Chars = [];\r\n\t            for (var i = 0; i < sigBytes; i += 2) {\r\n\t                var codePoint = swapEndian((words[i >>> 2] >>> (16 - (i % 4) * 8)) & 0xffff);\r\n\t                utf16Chars.push(String.fromCharCode(codePoint));\r\n\t            }\r\n\r\n\t            return utf16Chars.join('');\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a UTF-16 LE string to a word array.\r\n\t         *\r\n\t         * @param {string} utf16Str The UTF-16 LE string.\r\n\t         *\r\n\t         * @return {WordArray} The word array.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);\r\n\t         */\r\n\t        parse: function (utf16Str) {\r\n\t            // Shortcut\r\n\t            var utf16StrLength = utf16Str.length;\r\n\r\n\t            // Convert\r\n\t            var words = [];\r\n\t            for (var i = 0; i < utf16StrLength; i++) {\r\n\t                words[i >>> 1] |= swapEndian(utf16Str.charCodeAt(i) << (16 - (i % 2) * 16));\r\n\t            }\r\n\r\n\t            return WordArray.create(words, utf16StrLength * 2);\r\n\t        }\r\n\t    };\r\n\r\n\t    function swapEndian(word) {\r\n\t        return ((word << 8) & 0xff00ff00) | ((word >>> 8) & 0x00ff00ff);\r\n\t    }\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Check if typed arrays are supported\r\n\t    if (typeof ArrayBuffer != 'function') {\r\n\t        return;\r\n\t    }\r\n\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\r\n\t    // Reference original init\r\n\t    var superInit = WordArray.init;\r\n\r\n\t    // Augment WordArray.init to handle typed arrays\r\n\t    var subInit = WordArray.init = function (typedArray) {\r\n\t        // Convert buffers to uint8\r\n\t        if (typedArray instanceof ArrayBuffer) {\r\n\t            typedArray = new Uint8Array(typedArray);\r\n\t        }\r\n\r\n\t        // Convert other array views to uint8\r\n\t        if (\r\n\t            typedArray instanceof Int8Array ||\r\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\r\n\t            typedArray instanceof Int16Array ||\r\n\t            typedArray instanceof Uint16Array ||\r\n\t            typedArray instanceof Int32Array ||\r\n\t            typedArray instanceof Uint32Array ||\r\n\t            typedArray instanceof Float32Array ||\r\n\t            typedArray instanceof Float64Array\r\n\t        ) {\r\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\r\n\t        }\r\n\r\n\t        // Handle Uint8Array\r\n\t        if (typedArray instanceof Uint8Array) {\r\n\t            // Shortcut\r\n\t            var typedArrayByteLength = typedArray.byteLength;\r\n\r\n\t            // Extract bytes\r\n\t            var words = [];\r\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\r\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\r\n\t            }\r\n\r\n\t            // Initialize this word array\r\n\t            superInit.call(this, words, typedArrayByteLength);\r\n\t        } else {\r\n\t            // Else call normal init\r\n\t            superInit.apply(this, arguments);\r\n\t        }\r\n\t    };\r\n\r\n\t    subInit.prototype = WordArray;\r\n\t}());\r\n\r\n\r\n\t/** @preserve\r\n\t(c) 2012 by Cédric Mesnil. All rights reserved.\r\n\r\n\tRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\r\n\r\n\t    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\n\t    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\r\n\r\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\t*/\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants table\r\n\t    var _zl = WordArray.create([\r\n\t        0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\r\n\t        7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\r\n\t        3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\r\n\t        1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\r\n\t        4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13]);\r\n\t    var _zr = WordArray.create([\r\n\t        5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\r\n\t        6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\r\n\t        15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\r\n\t        8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\r\n\t        12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11]);\r\n\t    var _sl = WordArray.create([\r\n\t         11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\r\n\t        7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\r\n\t        11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\r\n\t          11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\r\n\t        9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ]);\r\n\t    var _sr = WordArray.create([\r\n\t        8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\r\n\t        9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\r\n\t        9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\r\n\t        15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\r\n\t        8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ]);\r\n\r\n\t    var _hl =  WordArray.create([ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E]);\r\n\t    var _hr =  WordArray.create([ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000]);\r\n\r\n\t    /**\r\n\t     * RIPEMD160 hash algorithm.\r\n\t     */\r\n\t    var RIPEMD160 = C_algo.RIPEMD160 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash  = WordArray.create([0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                // Shortcuts\r\n\t                var offset_i = offset + i;\r\n\t                var M_offset_i = M[offset_i];\r\n\r\n\t                // Swap\r\n\t                M[offset_i] = (\r\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t            }\r\n\t            // Shortcut\r\n\t            var H  = this._hash.words;\r\n\t            var hl = _hl.words;\r\n\t            var hr = _hr.words;\r\n\t            var zl = _zl.words;\r\n\t            var zr = _zr.words;\r\n\t            var sl = _sl.words;\r\n\t            var sr = _sr.words;\r\n\r\n\t            // Working variables\r\n\t            var al, bl, cl, dl, el;\r\n\t            var ar, br, cr, dr, er;\r\n\r\n\t            ar = al = H[0];\r\n\t            br = bl = H[1];\r\n\t            cr = cl = H[2];\r\n\t            dr = dl = H[3];\r\n\t            er = el = H[4];\r\n\t            // Computation\r\n\t            var t;\r\n\t            for (var i = 0; i < 80; i += 1) {\r\n\t                t = (al +  M[offset+zl[i]])|0;\r\n\t                if (i<16){\r\n\t\t            t +=  f1(bl,cl,dl) + hl[0];\r\n\t                } else if (i<32) {\r\n\t\t            t +=  f2(bl,cl,dl) + hl[1];\r\n\t                } else if (i<48) {\r\n\t\t            t +=  f3(bl,cl,dl) + hl[2];\r\n\t                } else if (i<64) {\r\n\t\t            t +=  f4(bl,cl,dl) + hl[3];\r\n\t                } else {// if (i<80) {\r\n\t\t            t +=  f5(bl,cl,dl) + hl[4];\r\n\t                }\r\n\t                t = t|0;\r\n\t                t =  rotl(t,sl[i]);\r\n\t                t = (t+el)|0;\r\n\t                al = el;\r\n\t                el = dl;\r\n\t                dl = rotl(cl, 10);\r\n\t                cl = bl;\r\n\t                bl = t;\r\n\r\n\t                t = (ar + M[offset+zr[i]])|0;\r\n\t                if (i<16){\r\n\t\t            t +=  f5(br,cr,dr) + hr[0];\r\n\t                } else if (i<32) {\r\n\t\t            t +=  f4(br,cr,dr) + hr[1];\r\n\t                } else if (i<48) {\r\n\t\t            t +=  f3(br,cr,dr) + hr[2];\r\n\t                } else if (i<64) {\r\n\t\t            t +=  f2(br,cr,dr) + hr[3];\r\n\t                } else {// if (i<80) {\r\n\t\t            t +=  f1(br,cr,dr) + hr[4];\r\n\t                }\r\n\t                t = t|0;\r\n\t                t =  rotl(t,sr[i]) ;\r\n\t                t = (t+er)|0;\r\n\t                ar = er;\r\n\t                er = dr;\r\n\t                dr = rotl(cr, 10);\r\n\t                cr = br;\r\n\t                br = t;\r\n\t            }\r\n\t            // Intermediate hash value\r\n\t            t    = (H[1] + cl + dr)|0;\r\n\t            H[1] = (H[2] + dl + er)|0;\r\n\t            H[2] = (H[3] + el + ar)|0;\r\n\t            H[3] = (H[4] + al + br)|0;\r\n\t            H[4] = (H[0] + bl + cr)|0;\r\n\t            H[0] =  t;\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\r\n\t                (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\r\n\t                (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\r\n\t            );\r\n\t            data.sigBytes = (dataWords.length + 1) * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var hash = this._hash;\r\n\t            var H = hash.words;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 5; i++) {\r\n\t                // Shortcut\r\n\t                var H_i = H[i];\r\n\r\n\t                // Swap\r\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\r\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\r\n\t    function f1(x, y, z) {\r\n\t        return ((x) ^ (y) ^ (z));\r\n\r\n\t    }\r\n\r\n\t    function f2(x, y, z) {\r\n\t        return (((x)&(y)) | ((~x)&(z)));\r\n\t    }\r\n\r\n\t    function f3(x, y, z) {\r\n\t        return (((x) | (~(y))) ^ (z));\r\n\t    }\r\n\r\n\t    function f4(x, y, z) {\r\n\t        return (((x) & (z)) | ((y)&(~(z))));\r\n\t    }\r\n\r\n\t    function f5(x, y, z) {\r\n\t        return ((x) ^ ((y) |(~(z))));\r\n\r\n\t    }\r\n\r\n\t    function rotl(x,n) {\r\n\t        return (x<<n) | (x>>>(32-n));\r\n\t    }\r\n\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.RIPEMD160('message');\r\n\t     *     var hash = CryptoJS.RIPEMD160(wordArray);\r\n\t     */\r\n\t    C.RIPEMD160 = Hasher._createHelper(RIPEMD160);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacRIPEMD160(message, key);\r\n\t     */\r\n\t    C.HmacRIPEMD160 = Hasher._createHmacHelper(RIPEMD160);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var C_enc = C.enc;\r\n\t    var Utf8 = C_enc.Utf8;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    /**\r\n\t     * HMAC algorithm.\r\n\t     */\r\n\t    var HMAC = C_algo.HMAC = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created HMAC.\r\n\t         *\r\n\t         * @param {Hasher} hasher The hash algorithm to use.\r\n\t         * @param {WordArray|string} key The secret key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\r\n\t         */\r\n\t        init: function (hasher, key) {\r\n\t            // Init hasher\r\n\t            hasher = this._hasher = new hasher.init();\r\n\r\n\t            // Convert string to WordArray, else assume WordArray already\r\n\t            if (typeof key == 'string') {\r\n\t                key = Utf8.parse(key);\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var hasherBlockSize = hasher.blockSize;\r\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\r\n\r\n\t            // Allow arbitrary length keys\r\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\r\n\t                key = hasher.finalize(key);\r\n\t            }\r\n\r\n\t            // Clamp excess bits\r\n\t            key.clamp();\r\n\r\n\t            // Clone key for inner and outer pads\r\n\t            var oKey = this._oKey = key.clone();\r\n\t            var iKey = this._iKey = key.clone();\r\n\r\n\t            // Shortcuts\r\n\t            var oKeyWords = oKey.words;\r\n\t            var iKeyWords = iKey.words;\r\n\r\n\t            // XOR keys with pad constants\r\n\t            for (var i = 0; i < hasherBlockSize; i++) {\r\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\r\n\t                iKeyWords[i] ^= 0x36363636;\r\n\t            }\r\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this HMAC to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hmacHasher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Shortcut\r\n\t            var hasher = this._hasher;\r\n\r\n\t            // Reset\r\n\t            hasher.reset();\r\n\t            hasher.update(this._iKey);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Updates this HMAC with a message.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate The message to append.\r\n\t         *\r\n\t         * @return {HMAC} This HMAC instance.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     hmacHasher.update('message');\r\n\t         *     hmacHasher.update(wordArray);\r\n\t         */\r\n\t        update: function (messageUpdate) {\r\n\t            this._hasher.update(messageUpdate);\r\n\r\n\t            // Chainable\r\n\t            return this;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the HMAC computation.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t         *\r\n\t         * @return {WordArray} The HMAC.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hmac = hmacHasher.finalize();\r\n\t         *     var hmac = hmacHasher.finalize('message');\r\n\t         *     var hmac = hmacHasher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (messageUpdate) {\r\n\t            // Shortcut\r\n\t            var hasher = this._hasher;\r\n\r\n\t            // Compute HMAC\r\n\t            var innerHash = hasher.finalize(messageUpdate);\r\n\t            hasher.reset();\r\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\r\n\r\n\t            return hmac;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA1 = C_algo.SHA1;\r\n\t    var HMAC = C_algo.HMAC;\r\n\r\n\t    /**\r\n\t     * Password-Based Key Derivation Function 2 algorithm.\r\n\t     */\r\n\t    var PBKDF2 = C_algo.PBKDF2 = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\r\n\t         * @property {Hasher} hasher The hasher to use. Default: SHA1\r\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            keySize: 128/32,\r\n\t            hasher: SHA1,\r\n\t            iterations: 1\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created key derivation function.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create();\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });\r\n\t         *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Computes the Password-Based Key Derivation Function 2.\r\n\t         *\r\n\t         * @param {WordArray|string} password The password.\r\n\t         * @param {WordArray|string} salt A salt.\r\n\t         *\r\n\t         * @return {WordArray} The derived key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var key = kdf.compute(password, salt);\r\n\t         */\r\n\t        compute: function (password, salt) {\r\n\t            // Shortcut\r\n\t            var cfg = this.cfg;\r\n\r\n\t            // Init HMAC\r\n\t            var hmac = HMAC.create(cfg.hasher, password);\r\n\r\n\t            // Initial values\r\n\t            var derivedKey = WordArray.create();\r\n\t            var blockIndex = WordArray.create([0x00000001]);\r\n\r\n\t            // Shortcuts\r\n\t            var derivedKeyWords = derivedKey.words;\r\n\t            var blockIndexWords = blockIndex.words;\r\n\t            var keySize = cfg.keySize;\r\n\t            var iterations = cfg.iterations;\r\n\r\n\t            // Generate key\r\n\t            while (derivedKeyWords.length < keySize) {\r\n\t                var block = hmac.update(salt).finalize(blockIndex);\r\n\t                hmac.reset();\r\n\r\n\t                // Shortcuts\r\n\t                var blockWords = block.words;\r\n\t                var blockWordsLength = blockWords.length;\r\n\r\n\t                // Iterations\r\n\t                var intermediate = block;\r\n\t                for (var i = 1; i < iterations; i++) {\r\n\t                    intermediate = hmac.finalize(intermediate);\r\n\t                    hmac.reset();\r\n\r\n\t                    // Shortcut\r\n\t                    var intermediateWords = intermediate.words;\r\n\r\n\t                    // XOR intermediate with block\r\n\t                    for (var j = 0; j < blockWordsLength; j++) {\r\n\t                        blockWords[j] ^= intermediateWords[j];\r\n\t                    }\r\n\t                }\r\n\r\n\t                derivedKey.concat(block);\r\n\t                blockIndexWords[0]++;\r\n\t            }\r\n\t            derivedKey.sigBytes = keySize * 4;\r\n\r\n\t            return derivedKey;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Computes the Password-Based Key Derivation Function 2.\r\n\t     *\r\n\t     * @param {WordArray|string} password The password.\r\n\t     * @param {WordArray|string} salt A salt.\r\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\r\n\t     *\r\n\t     * @return {WordArray} The derived key.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt);\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8 });\r\n\t     *     var key = CryptoJS.PBKDF2(password, salt, { keySize: 8, iterations: 1000 });\r\n\t     */\r\n\t    C.PBKDF2 = function (password, salt, cfg) {\r\n\t        return PBKDF2.create(cfg).compute(password, salt);\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var MD5 = C_algo.MD5;\r\n\r\n\t    /**\r\n\t     * This key derivation function is meant to conform with EVP_BytesToKey.\r\n\t     * www.openssl.org/docs/crypto/EVP_BytesToKey.html\r\n\t     */\r\n\t    var EvpKDF = C_algo.EvpKDF = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\r\n\t         * @property {Hasher} hasher The hash algorithm to use. Default: MD5\r\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            keySize: 128/32,\r\n\t            hasher: MD5,\r\n\t            iterations: 1\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Initializes a newly created key derivation function.\r\n\t         *\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create();\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });\r\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });\r\n\t         */\r\n\t        init: function (cfg) {\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Derives a key from a password.\r\n\t         *\r\n\t         * @param {WordArray|string} password The password.\r\n\t         * @param {WordArray|string} salt A salt.\r\n\t         *\r\n\t         * @return {WordArray} The derived key.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var key = kdf.compute(password, salt);\r\n\t         */\r\n\t        compute: function (password, salt) {\r\n\t            var block;\r\n\r\n\t            // Shortcut\r\n\t            var cfg = this.cfg;\r\n\r\n\t            // Init hasher\r\n\t            var hasher = cfg.hasher.create();\r\n\r\n\t            // Initial values\r\n\t            var derivedKey = WordArray.create();\r\n\r\n\t            // Shortcuts\r\n\t            var derivedKeyWords = derivedKey.words;\r\n\t            var keySize = cfg.keySize;\r\n\t            var iterations = cfg.iterations;\r\n\r\n\t            // Generate key\r\n\t            while (derivedKeyWords.length < keySize) {\r\n\t                if (block) {\r\n\t                    hasher.update(block);\r\n\t                }\r\n\t                block = hasher.update(password).finalize(salt);\r\n\t                hasher.reset();\r\n\r\n\t                // Iterations\r\n\t                for (var i = 1; i < iterations; i++) {\r\n\t                    block = hasher.finalize(block);\r\n\t                    hasher.reset();\r\n\t                }\r\n\r\n\t                derivedKey.concat(block);\r\n\t            }\r\n\t            derivedKey.sigBytes = keySize * 4;\r\n\r\n\t            return derivedKey;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Derives a key from a password.\r\n\t     *\r\n\t     * @param {WordArray|string} password The password.\r\n\t     * @param {WordArray|string} salt A salt.\r\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\r\n\t     *\r\n\t     * @return {WordArray} The derived key.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt);\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });\r\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });\r\n\t     */\r\n\t    C.EvpKDF = function (password, salt, cfg) {\r\n\t        return EvpKDF.create(cfg).compute(password, salt);\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA256 = C_algo.SHA256;\r\n\r\n\t    /**\r\n\t     * SHA-224 hash algorithm.\r\n\t     */\r\n\t    var SHA224 = C_algo.SHA224 = SHA256.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new WordArray.init([\r\n\t                0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\r\n\t                0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var hash = SHA256._doFinalize.call(this);\r\n\r\n\t            hash.sigBytes -= 4;\r\n\r\n\t            return hash;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA224('message');\r\n\t     *     var hash = CryptoJS.SHA224(wordArray);\r\n\t     */\r\n\t    C.SHA224 = SHA256._createHelper(SHA224);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA224(message, key);\r\n\t     */\r\n\t    C.HmacSHA224 = SHA256._createHmacHelper(SHA224);\r\n\t}());\r\n\r\n\r\n\t(function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var X32WordArray = C_lib.WordArray;\r\n\r\n\t    /**\r\n\t     * x64 namespace.\r\n\t     */\r\n\t    var C_x64 = C.x64 = {};\r\n\r\n\t    /**\r\n\t     * A 64-bit word.\r\n\t     */\r\n\t    var X64Word = C_x64.Word = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created 64-bit word.\r\n\t         *\r\n\t         * @param {number} high The high 32 bits.\r\n\t         * @param {number} low The low 32 bits.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\r\n\t         */\r\n\t        init: function (high, low) {\r\n\t            this.high = high;\r\n\t            this.low = low;\r\n\t        }\r\n\r\n\t        /**\r\n\t         * Bitwise NOTs this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after negating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var negated = x64Word.not();\r\n\t         */\r\n\t        // not: function () {\r\n\t            // var high = ~this.high;\r\n\t            // var low = ~this.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise ANDs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to AND with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after ANDing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var anded = x64Word.and(anotherX64Word);\r\n\t         */\r\n\t        // and: function (word) {\r\n\t            // var high = this.high & word.high;\r\n\t            // var low = this.low & word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise ORs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to OR with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after ORing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ored = x64Word.or(anotherX64Word);\r\n\t         */\r\n\t        // or: function (word) {\r\n\t            // var high = this.high | word.high;\r\n\t            // var low = this.low | word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Bitwise XORs this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after XORing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var xored = x64Word.xor(anotherX64Word);\r\n\t         */\r\n\t        // xor: function (word) {\r\n\t            // var high = this.high ^ word.high;\r\n\t            // var low = this.low ^ word.low;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Shifts this word n bits to the left.\r\n\t         *\r\n\t         * @param {number} n The number of bits to shift.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after shifting.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var shifted = x64Word.shiftL(25);\r\n\t         */\r\n\t        // shiftL: function (n) {\r\n\t            // if (n < 32) {\r\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\r\n\t                // var low = this.low << n;\r\n\t            // } else {\r\n\t                // var high = this.low << (n - 32);\r\n\t                // var low = 0;\r\n\t            // }\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Shifts this word n bits to the right.\r\n\t         *\r\n\t         * @param {number} n The number of bits to shift.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after shifting.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var shifted = x64Word.shiftR(7);\r\n\t         */\r\n\t        // shiftR: function (n) {\r\n\t            // if (n < 32) {\r\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\r\n\t                // var high = this.high >>> n;\r\n\t            // } else {\r\n\t                // var low = this.high >>> (n - 32);\r\n\t                // var high = 0;\r\n\t            // }\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Rotates this word n bits to the left.\r\n\t         *\r\n\t         * @param {number} n The number of bits to rotate.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after rotating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var rotated = x64Word.rotL(25);\r\n\t         */\r\n\t        // rotL: function (n) {\r\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Rotates this word n bits to the right.\r\n\t         *\r\n\t         * @param {number} n The number of bits to rotate.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after rotating.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var rotated = x64Word.rotR(7);\r\n\t         */\r\n\t        // rotR: function (n) {\r\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\r\n\t        // },\r\n\r\n\t        /**\r\n\t         * Adds this word with the passed word.\r\n\t         *\r\n\t         * @param {X64Word} word The x64-Word to add with this word.\r\n\t         *\r\n\t         * @return {X64Word} A new x64-Word object after adding.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var added = x64Word.add(anotherX64Word);\r\n\t         */\r\n\t        // add: function (word) {\r\n\t            // var low = (this.low + word.low) | 0;\r\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\r\n\t            // var high = (this.high + word.high + carry) | 0;\r\n\r\n\t            // return X64Word.create(high, low);\r\n\t        // }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * An array of 64-bit words.\r\n\t     *\r\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\r\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\r\n\t     */\r\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created word array.\r\n\t         *\r\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\r\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\r\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\r\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\r\n\t         *     ]);\r\n\t         *\r\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\r\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\r\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\r\n\t         *     ], 10);\r\n\t         */\r\n\t        init: function (words, sigBytes) {\r\n\t            words = this.words = words || [];\r\n\r\n\t            if (sigBytes != undefined) {\r\n\t                this.sigBytes = sigBytes;\r\n\t            } else {\r\n\t                this.sigBytes = words.length * 8;\r\n\t            }\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this 64-bit word array to a 32-bit word array.\r\n\t         *\r\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var x32WordArray = x64WordArray.toX32();\r\n\t         */\r\n\t        toX32: function () {\r\n\t            // Shortcuts\r\n\t            var x64Words = this.words;\r\n\t            var x64WordsLength = x64Words.length;\r\n\r\n\t            // Convert\r\n\t            var x32Words = [];\r\n\t            for (var i = 0; i < x64WordsLength; i++) {\r\n\t                var x64Word = x64Words[i];\r\n\t                x32Words.push(x64Word.high);\r\n\t                x32Words.push(x64Word.low);\r\n\t            }\r\n\r\n\t            return X32WordArray.create(x32Words, this.sigBytes);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates a copy of this word array.\r\n\t         *\r\n\t         * @return {X64WordArray} The clone.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var clone = x64WordArray.clone();\r\n\t         */\r\n\t        clone: function () {\r\n\t            var clone = Base.clone.call(this);\r\n\r\n\t            // Clone \"words\" array\r\n\t            var words = clone.words = this.words.slice(0);\r\n\r\n\t            // Clone each X64Word object\r\n\t            var wordsLength = words.length;\r\n\t            for (var i = 0; i < wordsLength; i++) {\r\n\t                words[i] = words[i].clone();\r\n\t            }\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t(function (Math) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Constants tables\r\n\t    var RHO_OFFSETS = [];\r\n\t    var PI_INDEXES  = [];\r\n\t    var ROUND_CONSTANTS = [];\r\n\r\n\t    // Compute Constants\r\n\t    (function () {\r\n\t        // Compute rho offset constants\r\n\t        var x = 1, y = 0;\r\n\t        for (var t = 0; t < 24; t++) {\r\n\t            RHO_OFFSETS[x + 5 * y] = ((t + 1) * (t + 2) / 2) % 64;\r\n\r\n\t            var newX = y % 5;\r\n\t            var newY = (2 * x + 3 * y) % 5;\r\n\t            x = newX;\r\n\t            y = newY;\r\n\t        }\r\n\r\n\t        // Compute pi index constants\r\n\t        for (var x = 0; x < 5; x++) {\r\n\t            for (var y = 0; y < 5; y++) {\r\n\t                PI_INDEXES[x + 5 * y] = y + ((2 * x + 3 * y) % 5) * 5;\r\n\t            }\r\n\t        }\r\n\r\n\t        // Compute round constants\r\n\t        var LFSR = 0x01;\r\n\t        for (var i = 0; i < 24; i++) {\r\n\t            var roundConstantMsw = 0;\r\n\t            var roundConstantLsw = 0;\r\n\r\n\t            for (var j = 0; j < 7; j++) {\r\n\t                if (LFSR & 0x01) {\r\n\t                    var bitPosition = (1 << j) - 1;\r\n\t                    if (bitPosition < 32) {\r\n\t                        roundConstantLsw ^= 1 << bitPosition;\r\n\t                    } else /* if (bitPosition >= 32) */ {\r\n\t                        roundConstantMsw ^= 1 << (bitPosition - 32);\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Compute next LFSR\r\n\t                if (LFSR & 0x80) {\r\n\t                    // Primitive polynomial over GF(2): x^8 + x^6 + x^5 + x^4 + 1\r\n\t                    LFSR = (LFSR << 1) ^ 0x71;\r\n\t                } else {\r\n\t                    LFSR <<= 1;\r\n\t                }\r\n\t            }\r\n\r\n\t            ROUND_CONSTANTS[i] = X64Word.create(roundConstantMsw, roundConstantLsw);\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Reusable objects for temporary values\r\n\t    var T = [];\r\n\t    (function () {\r\n\t        for (var i = 0; i < 25; i++) {\r\n\t            T[i] = X64Word.create();\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * SHA-3 hash algorithm.\r\n\t     */\r\n\t    var SHA3 = C_algo.SHA3 = Hasher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} outputLength\r\n\t         *   The desired number of bits in the output hash.\r\n\t         *   Only values permitted are: 224, 256, 384, 512.\r\n\t         *   Default: 512\r\n\t         */\r\n\t        cfg: Hasher.cfg.extend({\r\n\t            outputLength: 512\r\n\t        }),\r\n\r\n\t        _doReset: function () {\r\n\t            var state = this._state = []\r\n\t            for (var i = 0; i < 25; i++) {\r\n\t                state[i] = new X64Word.init();\r\n\t            }\r\n\r\n\t            this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcuts\r\n\t            var state = this._state;\r\n\t            var nBlockSizeLanes = this.blockSize / 2;\r\n\r\n\t            // Absorb\r\n\t            for (var i = 0; i < nBlockSizeLanes; i++) {\r\n\t                // Shortcuts\r\n\t                var M2i  = M[offset + 2 * i];\r\n\t                var M2i1 = M[offset + 2 * i + 1];\r\n\r\n\t                // Swap endian\r\n\t                M2i = (\r\n\t                    (((M2i << 8)  | (M2i >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M2i << 24) | (M2i >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t                M2i1 = (\r\n\t                    (((M2i1 << 8)  | (M2i1 >>> 24)) & 0x00ff00ff) |\r\n\t                    (((M2i1 << 24) | (M2i1 >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\r\n\t                // Absorb message into state\r\n\t                var lane = state[i];\r\n\t                lane.high ^= M2i1;\r\n\t                lane.low  ^= M2i;\r\n\t            }\r\n\r\n\t            // Rounds\r\n\t            for (var round = 0; round < 24; round++) {\r\n\t                // Theta\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    // Mix column lanes\r\n\t                    var tMsw = 0, tLsw = 0;\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        var lane = state[x + 5 * y];\r\n\t                        tMsw ^= lane.high;\r\n\t                        tLsw ^= lane.low;\r\n\t                    }\r\n\r\n\t                    // Temporary values\r\n\t                    var Tx = T[x];\r\n\t                    Tx.high = tMsw;\r\n\t                    Tx.low  = tLsw;\r\n\t                }\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    // Shortcuts\r\n\t                    var Tx4 = T[(x + 4) % 5];\r\n\t                    var Tx1 = T[(x + 1) % 5];\r\n\t                    var Tx1Msw = Tx1.high;\r\n\t                    var Tx1Lsw = Tx1.low;\r\n\r\n\t                    // Mix surrounding columns\r\n\t                    var tMsw = Tx4.high ^ ((Tx1Msw << 1) | (Tx1Lsw >>> 31));\r\n\t                    var tLsw = Tx4.low  ^ ((Tx1Lsw << 1) | (Tx1Msw >>> 31));\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        var lane = state[x + 5 * y];\r\n\t                        lane.high ^= tMsw;\r\n\t                        lane.low  ^= tLsw;\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Rho Pi\r\n\t                for (var laneIndex = 1; laneIndex < 25; laneIndex++) {\r\n\t                    var tMsw;\r\n\t                    var tLsw;\r\n\r\n\t                    // Shortcuts\r\n\t                    var lane = state[laneIndex];\r\n\t                    var laneMsw = lane.high;\r\n\t                    var laneLsw = lane.low;\r\n\t                    var rhoOffset = RHO_OFFSETS[laneIndex];\r\n\r\n\t                    // Rotate lanes\r\n\t                    if (rhoOffset < 32) {\r\n\t                        tMsw = (laneMsw << rhoOffset) | (laneLsw >>> (32 - rhoOffset));\r\n\t                        tLsw = (laneLsw << rhoOffset) | (laneMsw >>> (32 - rhoOffset));\r\n\t                    } else /* if (rhoOffset >= 32) */ {\r\n\t                        tMsw = (laneLsw << (rhoOffset - 32)) | (laneMsw >>> (64 - rhoOffset));\r\n\t                        tLsw = (laneMsw << (rhoOffset - 32)) | (laneLsw >>> (64 - rhoOffset));\r\n\t                    }\r\n\r\n\t                    // Transpose lanes\r\n\t                    var TPiLane = T[PI_INDEXES[laneIndex]];\r\n\t                    TPiLane.high = tMsw;\r\n\t                    TPiLane.low  = tLsw;\r\n\t                }\r\n\r\n\t                // Rho pi at x = y = 0\r\n\t                var T0 = T[0];\r\n\t                var state0 = state[0];\r\n\t                T0.high = state0.high;\r\n\t                T0.low  = state0.low;\r\n\r\n\t                // Chi\r\n\t                for (var x = 0; x < 5; x++) {\r\n\t                    for (var y = 0; y < 5; y++) {\r\n\t                        // Shortcuts\r\n\t                        var laneIndex = x + 5 * y;\r\n\t                        var lane = state[laneIndex];\r\n\t                        var TLane = T[laneIndex];\r\n\t                        var Tx1Lane = T[((x + 1) % 5) + 5 * y];\r\n\t                        var Tx2Lane = T[((x + 2) % 5) + 5 * y];\r\n\r\n\t                        // Mix rows\r\n\t                        lane.high = TLane.high ^ (~Tx1Lane.high & Tx2Lane.high);\r\n\t                        lane.low  = TLane.low  ^ (~Tx1Lane.low  & Tx2Lane.low);\r\n\t                    }\r\n\t                }\r\n\r\n\t                // Iota\r\n\t                var lane = state[0];\r\n\t                var roundConstant = ROUND_CONSTANTS[round];\r\n\t                lane.high ^= roundConstant.high;\r\n\t                lane.low  ^= roundConstant.low;\r\n\t            }\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\t            var blockSizeBits = this.blockSize * 32;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x1 << (24 - nBitsLeft % 32);\r\n\t            dataWords[((Math.ceil((nBitsLeft + 1) / blockSizeBits) * blockSizeBits) >>> 5) - 1] |= 0x80;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Shortcuts\r\n\t            var state = this._state;\r\n\t            var outputLengthBytes = this.cfg.outputLength / 8;\r\n\t            var outputLengthLanes = outputLengthBytes / 8;\r\n\r\n\t            // Squeeze\r\n\t            var hashWords = [];\r\n\t            for (var i = 0; i < outputLengthLanes; i++) {\r\n\t                // Shortcuts\r\n\t                var lane = state[i];\r\n\t                var laneMsw = lane.high;\r\n\t                var laneLsw = lane.low;\r\n\r\n\t                // Swap endian\r\n\t                laneMsw = (\r\n\t                    (((laneMsw << 8)  | (laneMsw >>> 24)) & 0x00ff00ff) |\r\n\t                    (((laneMsw << 24) | (laneMsw >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\t                laneLsw = (\r\n\t                    (((laneLsw << 8)  | (laneLsw >>> 24)) & 0x00ff00ff) |\r\n\t                    (((laneLsw << 24) | (laneLsw >>> 8))  & 0xff00ff00)\r\n\t                );\r\n\r\n\t                // Squeeze state to retrieve hash\r\n\t                hashWords.push(laneLsw);\r\n\t                hashWords.push(laneMsw);\r\n\t            }\r\n\r\n\t            // Return final computed hash\r\n\t            return new WordArray.init(hashWords, outputLengthBytes);\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\r\n\t            var state = clone._state = this._state.slice(0);\r\n\t            for (var i = 0; i < 25; i++) {\r\n\t                state[i] = state[i].clone();\r\n\t            }\r\n\r\n\t            return clone;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA3('message');\r\n\t     *     var hash = CryptoJS.SHA3(wordArray);\r\n\t     */\r\n\t    C.SHA3 = Hasher._createHelper(SHA3);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA3(message, key);\r\n\t     */\r\n\t    C.HmacSHA3 = Hasher._createHmacHelper(SHA3);\r\n\t}(Math));\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Hasher = C_lib.Hasher;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var X64WordArray = C_x64.WordArray;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    function X64Word_create() {\r\n\t        return X64Word.create.apply(X64Word, arguments);\r\n\t    }\r\n\r\n\t    // Constants\r\n\t    var K = [\r\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\r\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\r\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\r\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\r\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\r\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\r\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\r\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\r\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\r\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\r\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\r\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\r\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\r\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\r\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\r\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\r\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\r\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\r\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\r\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\r\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\r\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\r\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\r\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\r\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\r\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\r\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\r\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\r\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\r\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\r\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\r\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\r\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\r\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\r\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\r\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\r\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\r\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\r\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\r\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\r\n\t    ];\r\n\r\n\t    // Reusable objects\r\n\t    var W = [];\r\n\t    (function () {\r\n\t        for (var i = 0; i < 80; i++) {\r\n\t            W[i] = X64Word_create();\r\n\t        }\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * SHA-512 hash algorithm.\r\n\t     */\r\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new X64WordArray.init([\r\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\r\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\r\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\r\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcuts\r\n\t            var H = this._hash.words;\r\n\r\n\t            var H0 = H[0];\r\n\t            var H1 = H[1];\r\n\t            var H2 = H[2];\r\n\t            var H3 = H[3];\r\n\t            var H4 = H[4];\r\n\t            var H5 = H[5];\r\n\t            var H6 = H[6];\r\n\t            var H7 = H[7];\r\n\r\n\t            var H0h = H0.high;\r\n\t            var H0l = H0.low;\r\n\t            var H1h = H1.high;\r\n\t            var H1l = H1.low;\r\n\t            var H2h = H2.high;\r\n\t            var H2l = H2.low;\r\n\t            var H3h = H3.high;\r\n\t            var H3l = H3.low;\r\n\t            var H4h = H4.high;\r\n\t            var H4l = H4.low;\r\n\t            var H5h = H5.high;\r\n\t            var H5l = H5.low;\r\n\t            var H6h = H6.high;\r\n\t            var H6l = H6.low;\r\n\t            var H7h = H7.high;\r\n\t            var H7l = H7.low;\r\n\r\n\t            // Working variables\r\n\t            var ah = H0h;\r\n\t            var al = H0l;\r\n\t            var bh = H1h;\r\n\t            var bl = H1l;\r\n\t            var ch = H2h;\r\n\t            var cl = H2l;\r\n\t            var dh = H3h;\r\n\t            var dl = H3l;\r\n\t            var eh = H4h;\r\n\t            var el = H4l;\r\n\t            var fh = H5h;\r\n\t            var fl = H5l;\r\n\t            var gh = H6h;\r\n\t            var gl = H6l;\r\n\t            var hh = H7h;\r\n\t            var hl = H7l;\r\n\r\n\t            // Rounds\r\n\t            for (var i = 0; i < 80; i++) {\r\n\t                var Wil;\r\n\t                var Wih;\r\n\r\n\t                // Shortcut\r\n\t                var Wi = W[i];\r\n\r\n\t                // Extend message\r\n\t                if (i < 16) {\r\n\t                    Wih = Wi.high = M[offset + i * 2]     | 0;\r\n\t                    Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\r\n\t                } else {\r\n\t                    // Gamma0\r\n\t                    var gamma0x  = W[i - 15];\r\n\t                    var gamma0xh = gamma0x.high;\r\n\t                    var gamma0xl = gamma0x.low;\r\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\r\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\r\n\r\n\t                    // Gamma1\r\n\t                    var gamma1x  = W[i - 2];\r\n\t                    var gamma1xh = gamma1x.high;\r\n\t                    var gamma1xl = gamma1x.low;\r\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\r\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\r\n\r\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\r\n\t                    var Wi7  = W[i - 7];\r\n\t                    var Wi7h = Wi7.high;\r\n\t                    var Wi7l = Wi7.low;\r\n\r\n\t                    var Wi16  = W[i - 16];\r\n\t                    var Wi16h = Wi16.high;\r\n\t                    var Wi16l = Wi16.low;\r\n\r\n\t                    Wil = gamma0l + Wi7l;\r\n\t                    Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\r\n\t                    Wil = Wil + gamma1l;\r\n\t                    Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\r\n\t                    Wil = Wil + Wi16l;\r\n\t                    Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\r\n\r\n\t                    Wi.high = Wih;\r\n\t                    Wi.low  = Wil;\r\n\t                }\r\n\r\n\t                var chh  = (eh & fh) ^ (~eh & gh);\r\n\t                var chl  = (el & fl) ^ (~el & gl);\r\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\r\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\r\n\r\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\r\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\r\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\r\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\r\n\r\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\r\n\t                var Ki  = K[i];\r\n\t                var Kih = Ki.high;\r\n\t                var Kil = Ki.low;\r\n\r\n\t                var t1l = hl + sigma1l;\r\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + chl;\r\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + Kil;\r\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\r\n\t                var t1l = t1l + Wil;\r\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\r\n\r\n\t                // t2 = sigma0 + maj\r\n\t                var t2l = sigma0l + majl;\r\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\r\n\r\n\t                // Update working variables\r\n\t                hh = gh;\r\n\t                hl = gl;\r\n\t                gh = fh;\r\n\t                gl = fl;\r\n\t                fh = eh;\r\n\t                fl = el;\r\n\t                el = (dl + t1l) | 0;\r\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\r\n\t                dh = ch;\r\n\t                dl = cl;\r\n\t                ch = bh;\r\n\t                cl = bl;\r\n\t                bh = ah;\r\n\t                bl = al;\r\n\t                al = (t1l + t2l) | 0;\r\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\r\n\t            }\r\n\r\n\t            // Intermediate hash value\r\n\t            H0l = H0.low  = (H0l + al);\r\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\r\n\t            H1l = H1.low  = (H1l + bl);\r\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\r\n\t            H2l = H2.low  = (H2l + cl);\r\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\r\n\t            H3l = H3.low  = (H3l + dl);\r\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\r\n\t            H4l = H4.low  = (H4l + el);\r\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\r\n\t            H5l = H5.low  = (H5l + fl);\r\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\r\n\t            H6l = H6.low  = (H6l + gl);\r\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\r\n\t            H7l = H7.low  = (H7l + hl);\r\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            // Shortcuts\r\n\t            var data = this._data;\r\n\t            var dataWords = data.words;\r\n\r\n\t            var nBitsTotal = this._nDataBytes * 8;\r\n\t            var nBitsLeft = data.sigBytes * 8;\r\n\r\n\t            // Add padding\r\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\r\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\r\n\t            data.sigBytes = dataWords.length * 4;\r\n\r\n\t            // Hash final blocks\r\n\t            this._process();\r\n\r\n\t            // Convert hash to 32-bit word array before returning\r\n\t            var hash = this._hash.toX32();\r\n\r\n\t            // Return final computed hash\r\n\t            return hash;\r\n\t        },\r\n\r\n\t        clone: function () {\r\n\t            var clone = Hasher.clone.call(this);\r\n\t            clone._hash = this._hash.clone();\r\n\r\n\t            return clone;\r\n\t        },\r\n\r\n\t        blockSize: 1024/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA512('message');\r\n\t     *     var hash = CryptoJS.SHA512(wordArray);\r\n\t     */\r\n\t    C.SHA512 = Hasher._createHelper(SHA512);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\r\n\t     */\r\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_x64 = C.x64;\r\n\t    var X64Word = C_x64.Word;\r\n\t    var X64WordArray = C_x64.WordArray;\r\n\t    var C_algo = C.algo;\r\n\t    var SHA512 = C_algo.SHA512;\r\n\r\n\t    /**\r\n\t     * SHA-384 hash algorithm.\r\n\t     */\r\n\t    var SHA384 = C_algo.SHA384 = SHA512.extend({\r\n\t        _doReset: function () {\r\n\t            this._hash = new X64WordArray.init([\r\n\t                new X64Word.init(0xcbbb9d5d, 0xc1059ed8), new X64Word.init(0x629a292a, 0x367cd507),\r\n\t                new X64Word.init(0x9159015a, 0x3070dd17), new X64Word.init(0x152fecd8, 0xf70e5939),\r\n\t                new X64Word.init(0x67332667, 0xffc00b31), new X64Word.init(0x8eb44a87, 0x68581511),\r\n\t                new X64Word.init(0xdb0c2e0d, 0x64f98fa7), new X64Word.init(0x47b5481d, 0xbefa4fa4)\r\n\t            ]);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var hash = SHA512._doFinalize.call(this);\r\n\r\n\t            hash.sigBytes -= 16;\r\n\r\n\t            return hash;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut function to the hasher's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     *\r\n\t     * @return {WordArray} The hash.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hash = CryptoJS.SHA384('message');\r\n\t     *     var hash = CryptoJS.SHA384(wordArray);\r\n\t     */\r\n\t    C.SHA384 = SHA512._createHelper(SHA384);\r\n\r\n\t    /**\r\n\t     * Shortcut function to the HMAC's object interface.\r\n\t     *\r\n\t     * @param {WordArray|string} message The message to hash.\r\n\t     * @param {WordArray|string} key The secret key.\r\n\t     *\r\n\t     * @return {WordArray} The HMAC.\r\n\t     *\r\n\t     * @static\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var hmac = CryptoJS.HmacSHA384(message, key);\r\n\t     */\r\n\t    C.HmacSHA384 = SHA512._createHmacHelper(SHA384);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Cipher core components.\r\n\t */\r\n\tCryptoJS.lib.Cipher || (function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var Base = C_lib.Base;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;\r\n\t    var C_enc = C.enc;\r\n\t    var Utf8 = C_enc.Utf8;\r\n\t    var Base64 = C_enc.Base64;\r\n\t    var C_algo = C.algo;\r\n\t    var EvpKDF = C_algo.EvpKDF;\r\n\r\n\t    /**\r\n\t     * Abstract base cipher template.\r\n\t     *\r\n\t     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)\r\n\t     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)\r\n\t     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.\r\n\t     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.\r\n\t     */\r\n\t    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {WordArray} iv The IV to use for this operation.\r\n\t         */\r\n\t        cfg: Base.extend(),\r\n\r\n\t        /**\r\n\t         * Creates this cipher in encryption mode.\r\n\t         *\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {Cipher} A cipher instance.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        createEncryptor: function (key, cfg) {\r\n\t            return this.create(this._ENC_XFORM_MODE, key, cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates this cipher in decryption mode.\r\n\t         *\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {Cipher} A cipher instance.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        createDecryptor: function (key, cfg) {\r\n\t            return this.create(this._DEC_XFORM_MODE, key, cfg);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Initializes a newly created cipher.\r\n\t         *\r\n\t         * @param {number} xformMode Either the encryption or decryption transormation mode constant.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });\r\n\t         */\r\n\t        init: function (xformMode, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            this.cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Store transform mode and key\r\n\t            this._xformMode = xformMode;\r\n\t            this._key = key;\r\n\r\n\t            // Set initial values\r\n\t            this.reset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Resets this cipher to its initial state.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     cipher.reset();\r\n\t         */\r\n\t        reset: function () {\r\n\t            // Reset data buffer\r\n\t            BufferedBlockAlgorithm.reset.call(this);\r\n\r\n\t            // Perform concrete-cipher logic\r\n\t            this._doReset();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Adds data to be encrypted or decrypted.\r\n\t         *\r\n\t         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.\r\n\t         *\r\n\t         * @return {WordArray} The data after processing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var encrypted = cipher.process('data');\r\n\t         *     var encrypted = cipher.process(wordArray);\r\n\t         */\r\n\t        process: function (dataUpdate) {\r\n\t            // Append\r\n\t            this._append(dataUpdate);\r\n\r\n\t            // Process available blocks\r\n\t            return this._process();\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Finalizes the encryption or decryption process.\r\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t         *\r\n\t         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.\r\n\t         *\r\n\t         * @return {WordArray} The data after final processing.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var encrypted = cipher.finalize();\r\n\t         *     var encrypted = cipher.finalize('data');\r\n\t         *     var encrypted = cipher.finalize(wordArray);\r\n\t         */\r\n\t        finalize: function (dataUpdate) {\r\n\t            // Final data update\r\n\t            if (dataUpdate) {\r\n\t                this._append(dataUpdate);\r\n\t            }\r\n\r\n\t            // Perform concrete-cipher logic\r\n\t            var finalProcessedData = this._doFinalize();\r\n\r\n\t            return finalProcessedData;\r\n\t        },\r\n\r\n\t        keySize: 128/32,\r\n\r\n\t        ivSize: 128/32,\r\n\r\n\t        _ENC_XFORM_MODE: 1,\r\n\r\n\t        _DEC_XFORM_MODE: 2,\r\n\r\n\t        /**\r\n\t         * Creates shortcut functions to a cipher's object interface.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher to create a helper for.\r\n\t         *\r\n\t         * @return {Object} An object with encrypt and decrypt shortcut functions.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);\r\n\t         */\r\n\t        _createHelper: (function () {\r\n\t            function selectCipherStrategy(key) {\r\n\t                if (typeof key == 'string') {\r\n\t                    return PasswordBasedCipher;\r\n\t                } else {\r\n\t                    return SerializableCipher;\r\n\t                }\r\n\t            }\r\n\r\n\t            return function (cipher) {\r\n\t                return {\r\n\t                    encrypt: function (message, key, cfg) {\r\n\t                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);\r\n\t                    },\r\n\r\n\t                    decrypt: function (ciphertext, key, cfg) {\r\n\t                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);\r\n\t                    }\r\n\t                };\r\n\t            };\r\n\t        }())\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Abstract base stream cipher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)\r\n\t     */\r\n\t    var StreamCipher = C_lib.StreamCipher = Cipher.extend({\r\n\t        _doFinalize: function () {\r\n\t            // Process partial blocks\r\n\t            var finalProcessedBlocks = this._process(!!'flush');\r\n\r\n\t            return finalProcessedBlocks;\r\n\t        },\r\n\r\n\t        blockSize: 1\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Mode namespace.\r\n\t     */\r\n\t    var C_mode = C.mode = {};\r\n\r\n\t    /**\r\n\t     * Abstract base block cipher mode template.\r\n\t     */\r\n\t    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({\r\n\t        /**\r\n\t         * Creates this mode for encryption.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);\r\n\t         */\r\n\t        createEncryptor: function (cipher, iv) {\r\n\t            return this.Encryptor.create(cipher, iv);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Creates this mode for decryption.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);\r\n\t         */\r\n\t        createDecryptor: function (cipher, iv) {\r\n\t            return this.Decryptor.create(cipher, iv);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Initializes a newly created mode.\r\n\t         *\r\n\t         * @param {Cipher} cipher A block cipher instance.\r\n\t         * @param {Array} iv The IV words.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);\r\n\t         */\r\n\t        init: function (cipher, iv) {\r\n\t            this._cipher = cipher;\r\n\t            this._iv = iv;\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Cipher Block Chaining mode.\r\n\t     */\r\n\t    var CBC = C_mode.CBC = (function () {\r\n\t        /**\r\n\t         * Abstract base CBC mode.\r\n\t         */\r\n\t        var CBC = BlockCipherMode.extend();\r\n\r\n\t        /**\r\n\t         * CBC encryptor.\r\n\t         */\r\n\t        CBC.Encryptor = CBC.extend({\r\n\t            /**\r\n\t             * Processes the data block at offset.\r\n\t             *\r\n\t             * @param {Array} words The data words to operate on.\r\n\t             * @param {number} offset The offset where the block starts.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     mode.processBlock(data.words, offset);\r\n\t             */\r\n\t            processBlock: function (words, offset) {\r\n\t                // Shortcuts\r\n\t                var cipher = this._cipher;\r\n\t                var blockSize = cipher.blockSize;\r\n\r\n\t                // XOR and encrypt\r\n\t                xorBlock.call(this, words, offset, blockSize);\r\n\t                cipher.encryptBlock(words, offset);\r\n\r\n\t                // Remember this block to use with next block\r\n\t                this._prevBlock = words.slice(offset, offset + blockSize);\r\n\t            }\r\n\t        });\r\n\r\n\t        /**\r\n\t         * CBC decryptor.\r\n\t         */\r\n\t        CBC.Decryptor = CBC.extend({\r\n\t            /**\r\n\t             * Processes the data block at offset.\r\n\t             *\r\n\t             * @param {Array} words The data words to operate on.\r\n\t             * @param {number} offset The offset where the block starts.\r\n\t             *\r\n\t             * @example\r\n\t             *\r\n\t             *     mode.processBlock(data.words, offset);\r\n\t             */\r\n\t            processBlock: function (words, offset) {\r\n\t                // Shortcuts\r\n\t                var cipher = this._cipher;\r\n\t                var blockSize = cipher.blockSize;\r\n\r\n\t                // Remember this block to use with next block\r\n\t                var thisBlock = words.slice(offset, offset + blockSize);\r\n\r\n\t                // Decrypt and XOR\r\n\t                cipher.decryptBlock(words, offset);\r\n\t                xorBlock.call(this, words, offset, blockSize);\r\n\r\n\t                // This block becomes the previous block\r\n\t                this._prevBlock = thisBlock;\r\n\t            }\r\n\t        });\r\n\r\n\t        function xorBlock(words, offset, blockSize) {\r\n\t            var block;\r\n\r\n\t            // Shortcut\r\n\t            var iv = this._iv;\r\n\r\n\t            // Choose mixing block\r\n\t            if (iv) {\r\n\t                block = iv;\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            } else {\r\n\t                block = this._prevBlock;\r\n\t            }\r\n\r\n\t            // XOR blocks\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= block[i];\r\n\t            }\r\n\t        }\r\n\r\n\t        return CBC;\r\n\t    }());\r\n\r\n\t    /**\r\n\t     * Padding namespace.\r\n\t     */\r\n\t    var C_pad = C.pad = {};\r\n\r\n\t    /**\r\n\t     * PKCS #5/7 padding strategy.\r\n\t     */\r\n\t    var Pkcs7 = C_pad.Pkcs7 = {\r\n\t        /**\r\n\t         * Pads data using the algorithm defined in PKCS #5/7.\r\n\t         *\r\n\t         * @param {WordArray} data The data to pad.\r\n\t         * @param {number} blockSize The multiple that the data should be padded to.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);\r\n\t         */\r\n\t        pad: function (data, blockSize) {\r\n\t            // Shortcut\r\n\t            var blockSizeBytes = blockSize * 4;\r\n\r\n\t            // Count padding bytes\r\n\t            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\r\n\r\n\t            // Create padding word\r\n\t            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;\r\n\r\n\t            // Create padding\r\n\t            var paddingWords = [];\r\n\t            for (var i = 0; i < nPaddingBytes; i += 4) {\r\n\t                paddingWords.push(paddingWord);\r\n\t            }\r\n\t            var padding = WordArray.create(paddingWords, nPaddingBytes);\r\n\r\n\t            // Add padding\r\n\t            data.concat(padding);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.\r\n\t         *\r\n\t         * @param {WordArray} data The data to unpad.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     CryptoJS.pad.Pkcs7.unpad(wordArray);\r\n\t         */\r\n\t        unpad: function (data) {\r\n\t            // Get number of padding bytes from last byte\r\n\t            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t            // Remove padding\r\n\t            data.sigBytes -= nPaddingBytes;\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * Abstract base block cipher template.\r\n\t     *\r\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)\r\n\t     */\r\n\t    var BlockCipher = C_lib.BlockCipher = Cipher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {Mode} mode The block mode to use. Default: CBC\r\n\t         * @property {Padding} padding The padding strategy to use. Default: Pkcs7\r\n\t         */\r\n\t        cfg: Cipher.cfg.extend({\r\n\t            mode: CBC,\r\n\t            padding: Pkcs7\r\n\t        }),\r\n\r\n\t        reset: function () {\r\n\t            var modeCreator;\r\n\r\n\t            // Reset cipher\r\n\t            Cipher.reset.call(this);\r\n\r\n\t            // Shortcuts\r\n\t            var cfg = this.cfg;\r\n\t            var iv = cfg.iv;\r\n\t            var mode = cfg.mode;\r\n\r\n\t            // Reset block mode\r\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\r\n\t                modeCreator = mode.createEncryptor;\r\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\r\n\t                modeCreator = mode.createDecryptor;\r\n\t                // Keep at least one block in the buffer for unpadding\r\n\t                this._minBufferSize = 1;\r\n\t            }\r\n\r\n\t            if (this._mode && this._mode.__creator == modeCreator) {\r\n\t                this._mode.init(this, iv && iv.words);\r\n\t            } else {\r\n\t                this._mode = modeCreator.call(mode, this, iv && iv.words);\r\n\t                this._mode.__creator = modeCreator;\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (words, offset) {\r\n\t            this._mode.processBlock(words, offset);\r\n\t        },\r\n\r\n\t        _doFinalize: function () {\r\n\t            var finalProcessedBlocks;\r\n\r\n\t            // Shortcut\r\n\t            var padding = this.cfg.padding;\r\n\r\n\t            // Finalize\r\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\r\n\t                // Pad data\r\n\t                padding.pad(this._data, this.blockSize);\r\n\r\n\t                // Process final blocks\r\n\t                finalProcessedBlocks = this._process(!!'flush');\r\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\r\n\t                // Process final blocks\r\n\t                finalProcessedBlocks = this._process(!!'flush');\r\n\r\n\t                // Unpad data\r\n\t                padding.unpad(finalProcessedBlocks);\r\n\t            }\r\n\r\n\t            return finalProcessedBlocks;\r\n\t        },\r\n\r\n\t        blockSize: 128/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * A collection of cipher parameters.\r\n\t     *\r\n\t     * @property {WordArray} ciphertext The raw ciphertext.\r\n\t     * @property {WordArray} key The key to this ciphertext.\r\n\t     * @property {WordArray} iv The IV used in the ciphering operation.\r\n\t     * @property {WordArray} salt The salt used with a key derivation function.\r\n\t     * @property {Cipher} algorithm The cipher algorithm.\r\n\t     * @property {Mode} mode The block mode used in the ciphering operation.\r\n\t     * @property {Padding} padding The padding scheme used in the ciphering operation.\r\n\t     * @property {number} blockSize The block size of the cipher.\r\n\t     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.\r\n\t     */\r\n\t    var CipherParams = C_lib.CipherParams = Base.extend({\r\n\t        /**\r\n\t         * Initializes a newly created cipher params object.\r\n\t         *\r\n\t         * @param {Object} cipherParams An object with any of the possible cipher parameters.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.lib.CipherParams.create({\r\n\t         *         ciphertext: ciphertextWordArray,\r\n\t         *         key: keyWordArray,\r\n\t         *         iv: ivWordArray,\r\n\t         *         salt: saltWordArray,\r\n\t         *         algorithm: CryptoJS.algo.AES,\r\n\t         *         mode: CryptoJS.mode.CBC,\r\n\t         *         padding: CryptoJS.pad.PKCS7,\r\n\t         *         blockSize: 4,\r\n\t         *         formatter: CryptoJS.format.OpenSSL\r\n\t         *     });\r\n\t         */\r\n\t        init: function (cipherParams) {\r\n\t            this.mixIn(cipherParams);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts this cipher params object to a string.\r\n\t         *\r\n\t         * @param {Format} formatter (Optional) The formatting strategy to use.\r\n\t         *\r\n\t         * @return {string} The stringified cipher params.\r\n\t         *\r\n\t         * @throws Error If neither the formatter nor the default formatter is set.\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var string = cipherParams + '';\r\n\t         *     var string = cipherParams.toString();\r\n\t         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);\r\n\t         */\r\n\t        toString: function (formatter) {\r\n\t            return (formatter || this.formatter).stringify(this);\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Format namespace.\r\n\t     */\r\n\t    var C_format = C.format = {};\r\n\r\n\t    /**\r\n\t     * OpenSSL formatting strategy.\r\n\t     */\r\n\t    var OpenSSLFormatter = C_format.OpenSSL = {\r\n\t        /**\r\n\t         * Converts a cipher params object to an OpenSSL-compatible string.\r\n\t         *\r\n\t         * @param {CipherParams} cipherParams The cipher params object.\r\n\t         *\r\n\t         * @return {string} The OpenSSL-compatible string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);\r\n\t         */\r\n\t        stringify: function (cipherParams) {\r\n\t            var wordArray;\r\n\r\n\t            // Shortcuts\r\n\t            var ciphertext = cipherParams.ciphertext;\r\n\t            var salt = cipherParams.salt;\r\n\r\n\t            // Format\r\n\t            if (salt) {\r\n\t                wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);\r\n\t            } else {\r\n\t                wordArray = ciphertext;\r\n\t            }\r\n\r\n\t            return wordArray.toString(Base64);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts an OpenSSL-compatible string to a cipher params object.\r\n\t         *\r\n\t         * @param {string} openSSLStr The OpenSSL-compatible string.\r\n\t         *\r\n\t         * @return {CipherParams} The cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);\r\n\t         */\r\n\t        parse: function (openSSLStr) {\r\n\t            var salt;\r\n\r\n\t            // Parse base64\r\n\t            var ciphertext = Base64.parse(openSSLStr);\r\n\r\n\t            // Shortcut\r\n\t            var ciphertextWords = ciphertext.words;\r\n\r\n\t            // Test for salt\r\n\t            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {\r\n\t                // Extract salt\r\n\t                salt = WordArray.create(ciphertextWords.slice(2, 4));\r\n\r\n\t                // Remove salt from ciphertext\r\n\t                ciphertextWords.splice(0, 4);\r\n\t                ciphertext.sigBytes -= 16;\r\n\t            }\r\n\r\n\t            return CipherParams.create({ ciphertext: ciphertext, salt: salt });\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * A cipher wrapper that returns ciphertext as a serializable cipher params object.\r\n\t     */\r\n\t    var SerializableCipher = C_lib.SerializableCipher = Base.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL\r\n\t         */\r\n\t        cfg: Base.extend({\r\n\t            format: OpenSSLFormatter\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Encrypts a message.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {WordArray|string} message The message to encrypt.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        encrypt: function (cipher, message, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Encrypt\r\n\t            var encryptor = cipher.createEncryptor(key, cfg);\r\n\t            var ciphertext = encryptor.finalize(message);\r\n\r\n\t            // Shortcut\r\n\t            var cipherCfg = encryptor.cfg;\r\n\r\n\t            // Create and return serializable cipher params\r\n\t            return CipherParams.create({\r\n\t                ciphertext: ciphertext,\r\n\t                key: key,\r\n\t                iv: cipherCfg.iv,\r\n\t                algorithm: cipher,\r\n\t                mode: cipherCfg.mode,\r\n\t                padding: cipherCfg.padding,\r\n\t                blockSize: cipher.blockSize,\r\n\t                formatter: cfg.format\r\n\t            });\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Decrypts serialized ciphertext.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\r\n\t         * @param {WordArray} key The key.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {WordArray} The plaintext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        decrypt: function (cipher, ciphertext, key, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Convert string to CipherParams\r\n\t            ciphertext = this._parse(ciphertext, cfg.format);\r\n\r\n\t            // Decrypt\r\n\t            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);\r\n\r\n\t            return plaintext;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts serialized ciphertext to CipherParams,\r\n\t         * else assumed CipherParams already and returns ciphertext unchanged.\r\n\t         *\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext.\r\n\t         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.\r\n\t         *\r\n\t         * @return {CipherParams} The unserialized ciphertext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);\r\n\t         */\r\n\t        _parse: function (ciphertext, format) {\r\n\t            if (typeof ciphertext == 'string') {\r\n\t                return format.parse(ciphertext, this);\r\n\t            } else {\r\n\t                return ciphertext;\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Key derivation function namespace.\r\n\t     */\r\n\t    var C_kdf = C.kdf = {};\r\n\r\n\t    /**\r\n\t     * OpenSSL key derivation function.\r\n\t     */\r\n\t    var OpenSSLKdf = C_kdf.OpenSSL = {\r\n\t        /**\r\n\t         * Derives a key and IV from a password.\r\n\t         *\r\n\t         * @param {string} password The password to derive from.\r\n\t         * @param {number} keySize The size in words of the key to generate.\r\n\t         * @param {number} ivSize The size in words of the IV to generate.\r\n\t         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object with the key, IV, and salt.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);\r\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');\r\n\t         */\r\n\t        execute: function (password, keySize, ivSize, salt) {\r\n\t            // Generate random salt\r\n\t            if (!salt) {\r\n\t                salt = WordArray.random(64/8);\r\n\t            }\r\n\r\n\t            // Derive key and IV\r\n\t            var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);\r\n\r\n\t            // Separate key and IV\r\n\t            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);\r\n\t            key.sigBytes = keySize * 4;\r\n\r\n\t            // Return params\r\n\t            return CipherParams.create({ key: key, iv: iv, salt: salt });\r\n\t        }\r\n\t    };\r\n\r\n\t    /**\r\n\t     * A serializable cipher wrapper that derives the key from a password,\r\n\t     * and returns ciphertext as a serializable cipher params object.\r\n\t     */\r\n\t    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL\r\n\t         */\r\n\t        cfg: SerializableCipher.cfg.extend({\r\n\t            kdf: OpenSSLKdf\r\n\t        }),\r\n\r\n\t        /**\r\n\t         * Encrypts a message using a password.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {WordArray|string} message The message to encrypt.\r\n\t         * @param {string} password The password.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {CipherParams} A cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');\r\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        encrypt: function (cipher, message, password, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Derive key and other params\r\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize);\r\n\r\n\t            // Add IV to config\r\n\t            cfg.iv = derivedParams.iv;\r\n\r\n\t            // Encrypt\r\n\t            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);\r\n\r\n\t            // Mix in derived params\r\n\t            ciphertext.mixIn(derivedParams);\r\n\r\n\t            return ciphertext;\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Decrypts serialized ciphertext using a password.\r\n\t         *\r\n\t         * @param {Cipher} cipher The cipher algorithm to use.\r\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\r\n\t         * @param {string} password The password.\r\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\r\n\t         *\r\n\t         * @return {WordArray} The plaintext.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });\r\n\t         */\r\n\t        decrypt: function (cipher, ciphertext, password, cfg) {\r\n\t            // Apply config defaults\r\n\t            cfg = this.cfg.extend(cfg);\r\n\r\n\t            // Convert string to CipherParams\r\n\t            ciphertext = this._parse(ciphertext, cfg.format);\r\n\r\n\t            // Derive key and other params\r\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt);\r\n\r\n\t            // Add IV to config\r\n\t            cfg.iv = derivedParams.iv;\r\n\r\n\t            // Decrypt\r\n\t            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);\r\n\r\n\t            return plaintext;\r\n\t        }\r\n\t    });\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Cipher Feedback block mode.\r\n\t */\r\n\tCryptoJS.mode.CFB = (function () {\r\n\t    var CFB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    CFB.Encryptor = CFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher;\r\n\t            var blockSize = cipher.blockSize;\r\n\r\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\r\n\r\n\t            // Remember this block to use with next block\r\n\t            this._prevBlock = words.slice(offset, offset + blockSize);\r\n\t        }\r\n\t    });\r\n\r\n\t    CFB.Decryptor = CFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher;\r\n\t            var blockSize = cipher.blockSize;\r\n\r\n\t            // Remember this block to use with next block\r\n\t            var thisBlock = words.slice(offset, offset + blockSize);\r\n\r\n\t            generateKeystreamAndEncrypt.call(this, words, offset, blockSize, cipher);\r\n\r\n\t            // This block becomes the previous block\r\n\t            this._prevBlock = thisBlock;\r\n\t        }\r\n\t    });\r\n\r\n\t    function generateKeystreamAndEncrypt(words, offset, blockSize, cipher) {\r\n\t        var keystream;\r\n\r\n\t        // Shortcut\r\n\t        var iv = this._iv;\r\n\r\n\t        // Generate keystream\r\n\t        if (iv) {\r\n\t            keystream = iv.slice(0);\r\n\r\n\t            // Remove IV for subsequent blocks\r\n\t            this._iv = undefined;\r\n\t        } else {\r\n\t            keystream = this._prevBlock;\r\n\t        }\r\n\t        cipher.encryptBlock(keystream, 0);\r\n\r\n\t        // Encrypt\r\n\t        for (var i = 0; i < blockSize; i++) {\r\n\t            words[offset + i] ^= keystream[i];\r\n\t        }\r\n\t    }\r\n\r\n\t    return CFB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Electronic Codebook block mode.\r\n\t */\r\n\tCryptoJS.mode.ECB = (function () {\r\n\t    var ECB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    ECB.Encryptor = ECB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            this._cipher.encryptBlock(words, offset);\r\n\t        }\r\n\t    });\r\n\r\n\t    ECB.Decryptor = ECB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            this._cipher.decryptBlock(words, offset);\r\n\t        }\r\n\t    });\r\n\r\n\t    return ECB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * ANSI X.923 padding strategy.\r\n\t */\r\n\tCryptoJS.pad.AnsiX923 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcuts\r\n\t        var dataSigBytes = data.sigBytes;\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Count padding bytes\r\n\t        var nPaddingBytes = blockSizeBytes - dataSigBytes % blockSizeBytes;\r\n\r\n\t        // Compute last byte position\r\n\t        var lastBytePos = dataSigBytes + nPaddingBytes - 1;\r\n\r\n\t        // Pad\r\n\t        data.clamp();\r\n\t        data.words[lastBytePos >>> 2] |= nPaddingBytes << (24 - (lastBytePos % 4) * 8);\r\n\t        data.sigBytes += nPaddingBytes;\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Get number of padding bytes from last byte\r\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t        // Remove padding\r\n\t        data.sigBytes -= nPaddingBytes;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * ISO 10126 padding strategy.\r\n\t */\r\n\tCryptoJS.pad.Iso10126 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcut\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Count padding bytes\r\n\t        var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\r\n\r\n\t        // Pad\r\n\t        data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes - 1)).\r\n\t             concat(CryptoJS.lib.WordArray.create([nPaddingBytes << 24], 1));\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Get number of padding bytes from last byte\r\n\t        var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\r\n\r\n\t        // Remove padding\r\n\t        data.sigBytes -= nPaddingBytes;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * ISO/IEC 9797-1 Padding Method 2.\r\n\t */\r\n\tCryptoJS.pad.Iso97971 = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Add 0x80 byte\r\n\t        data.concat(CryptoJS.lib.WordArray.create([0x80000000], 1));\r\n\r\n\t        // Zero pad the rest\r\n\t        CryptoJS.pad.ZeroPadding.pad(data, blockSize);\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Remove zero padding\r\n\t        CryptoJS.pad.ZeroPadding.unpad(data);\r\n\r\n\t        // Remove one more byte -- the 0x80 byte\r\n\t        data.sigBytes--;\r\n\t    }\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Output Feedback block mode.\r\n\t */\r\n\tCryptoJS.mode.OFB = (function () {\r\n\t    var OFB = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    var Encryptor = OFB.Encryptor = OFB.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var keystream = this._keystream;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                keystream = this._keystream = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    OFB.Decryptor = Encryptor;\r\n\r\n\t    return OFB;\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * A noop padding strategy.\r\n\t */\r\n\tCryptoJS.pad.NoPadding = {\r\n\t    pad: function () {\r\n\t    },\r\n\r\n\t    unpad: function () {\r\n\t    }\r\n\t};\r\n\r\n\r\n\t(function (undefined) {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var CipherParams = C_lib.CipherParams;\r\n\t    var C_enc = C.enc;\r\n\t    var Hex = C_enc.Hex;\r\n\t    var C_format = C.format;\r\n\r\n\t    var HexFormatter = C_format.Hex = {\r\n\t        /**\r\n\t         * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.\r\n\t         *\r\n\t         * @param {CipherParams} cipherParams The cipher params object.\r\n\t         *\r\n\t         * @return {string} The hexadecimally encoded string.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);\r\n\t         */\r\n\t        stringify: function (cipherParams) {\r\n\t            return cipherParams.ciphertext.toString(Hex);\r\n\t        },\r\n\r\n\t        /**\r\n\t         * Converts a hexadecimally encoded ciphertext string to a cipher params object.\r\n\t         *\r\n\t         * @param {string} input The hexadecimally encoded string.\r\n\t         *\r\n\t         * @return {CipherParams} The cipher params object.\r\n\t         *\r\n\t         * @static\r\n\t         *\r\n\t         * @example\r\n\t         *\r\n\t         *     var cipherParams = CryptoJS.format.Hex.parse(hexString);\r\n\t         */\r\n\t        parse: function (input) {\r\n\t            var ciphertext = Hex.parse(input);\r\n\t            return CipherParams.create({ ciphertext: ciphertext });\r\n\t        }\r\n\t    };\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var BlockCipher = C_lib.BlockCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Lookup tables\r\n\t    var SBOX = [];\r\n\t    var INV_SBOX = [];\r\n\t    var SUB_MIX_0 = [];\r\n\t    var SUB_MIX_1 = [];\r\n\t    var SUB_MIX_2 = [];\r\n\t    var SUB_MIX_3 = [];\r\n\t    var INV_SUB_MIX_0 = [];\r\n\t    var INV_SUB_MIX_1 = [];\r\n\t    var INV_SUB_MIX_2 = [];\r\n\t    var INV_SUB_MIX_3 = [];\r\n\r\n\t    // Compute lookup tables\r\n\t    (function () {\r\n\t        // Compute double table\r\n\t        var d = [];\r\n\t        for (var i = 0; i < 256; i++) {\r\n\t            if (i < 128) {\r\n\t                d[i] = i << 1;\r\n\t            } else {\r\n\t                d[i] = (i << 1) ^ 0x11b;\r\n\t            }\r\n\t        }\r\n\r\n\t        // Walk GF(2^8)\r\n\t        var x = 0;\r\n\t        var xi = 0;\r\n\t        for (var i = 0; i < 256; i++) {\r\n\t            // Compute sbox\r\n\t            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\r\n\t            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\r\n\t            SBOX[x] = sx;\r\n\t            INV_SBOX[sx] = x;\r\n\r\n\t            // Compute multiplication\r\n\t            var x2 = d[x];\r\n\t            var x4 = d[x2];\r\n\t            var x8 = d[x4];\r\n\r\n\t            // Compute sub bytes, mix columns tables\r\n\t            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);\r\n\t            SUB_MIX_0[x] = (t << 24) | (t >>> 8);\r\n\t            SUB_MIX_1[x] = (t << 16) | (t >>> 16);\r\n\t            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);\r\n\t            SUB_MIX_3[x] = t;\r\n\r\n\t            // Compute inv sub bytes, inv mix columns tables\r\n\t            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\r\n\t            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);\r\n\t            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);\r\n\t            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);\r\n\t            INV_SUB_MIX_3[sx] = t;\r\n\r\n\t            // Compute next counter\r\n\t            if (!x) {\r\n\t                x = xi = 1;\r\n\t            } else {\r\n\t                x = x2 ^ d[d[d[x8 ^ x2]]];\r\n\t                xi ^= d[d[xi]];\r\n\t            }\r\n\t        }\r\n\t    }());\r\n\r\n\t    // Precomputed Rcon lookup\r\n\t    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\r\n\r\n\t    /**\r\n\t     * AES block cipher algorithm.\r\n\t     */\r\n\t    var AES = C_algo.AES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            var t;\r\n\r\n\t            // Skip reset of nRounds has been set before and key did not change\r\n\t            if (this._nRounds && this._keyPriorReset === this._key) {\r\n\t                return;\r\n\t            }\r\n\r\n\t            // Shortcuts\r\n\t            var key = this._keyPriorReset = this._key;\r\n\t            var keyWords = key.words;\r\n\t            var keySize = key.sigBytes / 4;\r\n\r\n\t            // Compute number of rounds\r\n\t            var nRounds = this._nRounds = keySize + 6;\r\n\r\n\t            // Compute number of key schedule rows\r\n\t            var ksRows = (nRounds + 1) * 4;\r\n\r\n\t            // Compute key schedule\r\n\t            var keySchedule = this._keySchedule = [];\r\n\t            for (var ksRow = 0; ksRow < ksRows; ksRow++) {\r\n\t                if (ksRow < keySize) {\r\n\t                    keySchedule[ksRow] = keyWords[ksRow];\r\n\t                } else {\r\n\t                    t = keySchedule[ksRow - 1];\r\n\r\n\t                    if (!(ksRow % keySize)) {\r\n\t                        // Rot word\r\n\t                        t = (t << 8) | (t >>> 24);\r\n\r\n\t                        // Sub word\r\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\r\n\r\n\t                        // Mix Rcon\r\n\t                        t ^= RCON[(ksRow / keySize) | 0] << 24;\r\n\t                    } else if (keySize > 6 && ksRow % keySize == 4) {\r\n\t                        // Sub word\r\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\r\n\t                    }\r\n\r\n\t                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;\r\n\t                }\r\n\t            }\r\n\r\n\t            // Compute inv key schedule\r\n\t            var invKeySchedule = this._invKeySchedule = [];\r\n\t            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {\r\n\t                var ksRow = ksRows - invKsRow;\r\n\r\n\t                if (invKsRow % 4) {\r\n\t                    var t = keySchedule[ksRow];\r\n\t                } else {\r\n\t                    var t = keySchedule[ksRow - 4];\r\n\t                }\r\n\r\n\t                if (invKsRow < 4 || ksRow <= 4) {\r\n\t                    invKeySchedule[invKsRow] = t;\r\n\t                } else {\r\n\t                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^\r\n\t                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            // Swap 2nd and 4th rows\r\n\t            var t = M[offset + 1];\r\n\t            M[offset + 1] = M[offset + 3];\r\n\t            M[offset + 3] = t;\r\n\r\n\t            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);\r\n\r\n\t            // Inv swap 2nd and 4th rows\r\n\t            var t = M[offset + 1];\r\n\t            M[offset + 1] = M[offset + 3];\r\n\t            M[offset + 3] = t;\r\n\t        },\r\n\r\n\t        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {\r\n\t            // Shortcut\r\n\t            var nRounds = this._nRounds;\r\n\r\n\t            // Get input, add round key\r\n\t            var s0 = M[offset]     ^ keySchedule[0];\r\n\t            var s1 = M[offset + 1] ^ keySchedule[1];\r\n\t            var s2 = M[offset + 2] ^ keySchedule[2];\r\n\t            var s3 = M[offset + 3] ^ keySchedule[3];\r\n\r\n\t            // Key schedule row counter\r\n\t            var ksRow = 4;\r\n\r\n\t            // Rounds\r\n\t            for (var round = 1; round < nRounds; round++) {\r\n\t                // Shift rows, sub bytes, mix columns, add round key\r\n\t                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];\r\n\t                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];\r\n\r\n\t                // Update state\r\n\t                s0 = t0;\r\n\t                s1 = t1;\r\n\t                s2 = t2;\r\n\t                s3 = t3;\r\n\t            }\r\n\r\n\t            // Shift rows, sub bytes, add round key\r\n\t            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\r\n\t            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\r\n\r\n\t            // Set output\r\n\t            M[offset]     = t0;\r\n\t            M[offset + 1] = t1;\r\n\t            M[offset + 2] = t2;\r\n\t            M[offset + 3] = t3;\r\n\t        },\r\n\r\n\t        keySize: 256/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.AES = BlockCipher._createHelper(AES);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var WordArray = C_lib.WordArray;\r\n\t    var BlockCipher = C_lib.BlockCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Permuted Choice 1 constants\r\n\t    var PC1 = [\r\n\t        57, 49, 41, 33, 25, 17, 9,  1,\r\n\t        58, 50, 42, 34, 26, 18, 10, 2,\r\n\t        59, 51, 43, 35, 27, 19, 11, 3,\r\n\t        60, 52, 44, 36, 63, 55, 47, 39,\r\n\t        31, 23, 15, 7,  62, 54, 46, 38,\r\n\t        30, 22, 14, 6,  61, 53, 45, 37,\r\n\t        29, 21, 13, 5,  28, 20, 12, 4\r\n\t    ];\r\n\r\n\t    // Permuted Choice 2 constants\r\n\t    var PC2 = [\r\n\t        14, 17, 11, 24, 1,  5,\r\n\t        3,  28, 15, 6,  21, 10,\r\n\t        23, 19, 12, 4,  26, 8,\r\n\t        16, 7,  27, 20, 13, 2,\r\n\t        41, 52, 31, 37, 47, 55,\r\n\t        30, 40, 51, 45, 33, 48,\r\n\t        44, 49, 39, 56, 34, 53,\r\n\t        46, 42, 50, 36, 29, 32\r\n\t    ];\r\n\r\n\t    // Cumulative bit shift constants\r\n\t    var BIT_SHIFTS = [1,  2,  4,  6,  8,  10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28];\r\n\r\n\t    // SBOXes and round permutation constants\r\n\t    var SBOX_P = [\r\n\t        {\r\n\t            0x0: 0x808200,\r\n\t            0x10000000: 0x8000,\r\n\t            0x20000000: 0x808002,\r\n\t            0x30000000: 0x2,\r\n\t            0x40000000: 0x200,\r\n\t            0x50000000: 0x808202,\r\n\t            0x60000000: 0x800202,\r\n\t            0x70000000: 0x800000,\r\n\t            0x80000000: 0x202,\r\n\t            0x90000000: 0x800200,\r\n\t            0xa0000000: 0x8200,\r\n\t            0xb0000000: 0x808000,\r\n\t            0xc0000000: 0x8002,\r\n\t            0xd0000000: 0x800002,\r\n\t            0xe0000000: 0x0,\r\n\t            0xf0000000: 0x8202,\r\n\t            0x8000000: 0x0,\r\n\t            0x18000000: 0x808202,\r\n\t            0x28000000: 0x8202,\r\n\t            0x38000000: 0x8000,\r\n\t            0x48000000: 0x808200,\r\n\t            0x58000000: 0x200,\r\n\t            0x68000000: 0x808002,\r\n\t            0x78000000: 0x2,\r\n\t            0x88000000: 0x800200,\r\n\t            0x98000000: 0x8200,\r\n\t            0xa8000000: 0x808000,\r\n\t            0xb8000000: 0x800202,\r\n\t            0xc8000000: 0x800002,\r\n\t            0xd8000000: 0x8002,\r\n\t            0xe8000000: 0x202,\r\n\t            0xf8000000: 0x800000,\r\n\t            0x1: 0x8000,\r\n\t            0x10000001: 0x2,\r\n\t            0x20000001: 0x808200,\r\n\t            0x30000001: 0x800000,\r\n\t            0x40000001: 0x808002,\r\n\t            0x50000001: 0x8200,\r\n\t            0x60000001: 0x200,\r\n\t            0x70000001: 0x800202,\r\n\t            0x80000001: 0x808202,\r\n\t            0x90000001: 0x808000,\r\n\t            0xa0000001: 0x800002,\r\n\t            0xb0000001: 0x8202,\r\n\t            0xc0000001: 0x202,\r\n\t            0xd0000001: 0x800200,\r\n\t            0xe0000001: 0x8002,\r\n\t            0xf0000001: 0x0,\r\n\t            0x8000001: 0x808202,\r\n\t            0x18000001: 0x808000,\r\n\t            0x28000001: 0x800000,\r\n\t            0x38000001: 0x200,\r\n\t            0x48000001: 0x8000,\r\n\t            0x58000001: 0x800002,\r\n\t            0x68000001: 0x2,\r\n\t            0x78000001: 0x8202,\r\n\t            0x88000001: 0x8002,\r\n\t            0x98000001: 0x800202,\r\n\t            0xa8000001: 0x202,\r\n\t            0xb8000001: 0x808200,\r\n\t            0xc8000001: 0x800200,\r\n\t            0xd8000001: 0x0,\r\n\t            0xe8000001: 0x8200,\r\n\t            0xf8000001: 0x808002\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x40084010,\r\n\t            0x1000000: 0x4000,\r\n\t            0x2000000: 0x80000,\r\n\t            0x3000000: 0x40080010,\r\n\t            0x4000000: 0x40000010,\r\n\t            0x5000000: 0x40084000,\r\n\t            0x6000000: 0x40004000,\r\n\t            0x7000000: 0x10,\r\n\t            0x8000000: 0x84000,\r\n\t            0x9000000: 0x40004010,\r\n\t            0xa000000: 0x40000000,\r\n\t            0xb000000: 0x84010,\r\n\t            0xc000000: 0x80010,\r\n\t            0xd000000: 0x0,\r\n\t            0xe000000: 0x4010,\r\n\t            0xf000000: 0x40080000,\r\n\t            0x800000: 0x40004000,\r\n\t            0x1800000: 0x84010,\r\n\t            0x2800000: 0x10,\r\n\t            0x3800000: 0x40004010,\r\n\t            0x4800000: 0x40084010,\r\n\t            0x5800000: 0x40000000,\r\n\t            0x6800000: 0x80000,\r\n\t            0x7800000: 0x40080010,\r\n\t            0x8800000: 0x80010,\r\n\t            0x9800000: 0x0,\r\n\t            0xa800000: 0x4000,\r\n\t            0xb800000: 0x40080000,\r\n\t            0xc800000: 0x40000010,\r\n\t            0xd800000: 0x84000,\r\n\t            0xe800000: 0x40084000,\r\n\t            0xf800000: 0x4010,\r\n\t            0x10000000: 0x0,\r\n\t            0x11000000: 0x40080010,\r\n\t            0x12000000: 0x40004010,\r\n\t            0x13000000: 0x40084000,\r\n\t            0x14000000: 0x40080000,\r\n\t            0x15000000: 0x10,\r\n\t            0x16000000: 0x84010,\r\n\t            0x17000000: 0x4000,\r\n\t            0x18000000: 0x4010,\r\n\t            0x19000000: 0x80000,\r\n\t            0x1a000000: 0x80010,\r\n\t            0x1b000000: 0x40000010,\r\n\t            0x1c000000: 0x84000,\r\n\t            0x1d000000: 0x40004000,\r\n\t            0x1e000000: 0x40000000,\r\n\t            0x1f000000: 0x40084010,\r\n\t            0x10800000: 0x84010,\r\n\t            0x11800000: 0x80000,\r\n\t            0x12800000: 0x40080000,\r\n\t            0x13800000: 0x4000,\r\n\t            0x14800000: 0x40004000,\r\n\t            0x15800000: 0x40084010,\r\n\t            0x16800000: 0x10,\r\n\t            0x17800000: 0x40000000,\r\n\t            0x18800000: 0x40084000,\r\n\t            0x19800000: 0x40000010,\r\n\t            0x1a800000: 0x40004010,\r\n\t            0x1b800000: 0x80010,\r\n\t            0x1c800000: 0x0,\r\n\t            0x1d800000: 0x4010,\r\n\t            0x1e800000: 0x40080010,\r\n\t            0x1f800000: 0x84000\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x104,\r\n\t            0x100000: 0x0,\r\n\t            0x200000: 0x4000100,\r\n\t            0x300000: 0x10104,\r\n\t            0x400000: 0x10004,\r\n\t            0x500000: 0x4000004,\r\n\t            0x600000: 0x4010104,\r\n\t            0x700000: 0x4010000,\r\n\t            0x800000: 0x4000000,\r\n\t            0x900000: 0x4010100,\r\n\t            0xa00000: 0x10100,\r\n\t            0xb00000: 0x4010004,\r\n\t            0xc00000: 0x4000104,\r\n\t            0xd00000: 0x10000,\r\n\t            0xe00000: 0x4,\r\n\t            0xf00000: 0x100,\r\n\t            0x80000: 0x4010100,\r\n\t            0x180000: 0x4010004,\r\n\t            0x280000: 0x0,\r\n\t            0x380000: 0x4000100,\r\n\t            0x480000: 0x4000004,\r\n\t            0x580000: 0x10000,\r\n\t            0x680000: 0x10004,\r\n\t            0x780000: 0x104,\r\n\t            0x880000: 0x4,\r\n\t            0x980000: 0x100,\r\n\t            0xa80000: 0x4010000,\r\n\t            0xb80000: 0x10104,\r\n\t            0xc80000: 0x10100,\r\n\t            0xd80000: 0x4000104,\r\n\t            0xe80000: 0x4010104,\r\n\t            0xf80000: 0x4000000,\r\n\t            0x1000000: 0x4010100,\r\n\t            0x1100000: 0x10004,\r\n\t            0x1200000: 0x10000,\r\n\t            0x1300000: 0x4000100,\r\n\t            0x1400000: 0x100,\r\n\t            0x1500000: 0x4010104,\r\n\t            0x1600000: 0x4000004,\r\n\t            0x1700000: 0x0,\r\n\t            0x1800000: 0x4000104,\r\n\t            0x1900000: 0x4000000,\r\n\t            0x1a00000: 0x4,\r\n\t            0x1b00000: 0x10100,\r\n\t            0x1c00000: 0x4010000,\r\n\t            0x1d00000: 0x104,\r\n\t            0x1e00000: 0x10104,\r\n\t            0x1f00000: 0x4010004,\r\n\t            0x1080000: 0x4000000,\r\n\t            0x1180000: 0x104,\r\n\t            0x1280000: 0x4010100,\r\n\t            0x1380000: 0x0,\r\n\t            0x1480000: 0x10004,\r\n\t            0x1580000: 0x4000100,\r\n\t            0x1680000: 0x100,\r\n\t            0x1780000: 0x4010004,\r\n\t            0x1880000: 0x10000,\r\n\t            0x1980000: 0x4010104,\r\n\t            0x1a80000: 0x10104,\r\n\t            0x1b80000: 0x4000004,\r\n\t            0x1c80000: 0x4000104,\r\n\t            0x1d80000: 0x4010000,\r\n\t            0x1e80000: 0x4,\r\n\t            0x1f80000: 0x10100\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x80401000,\r\n\t            0x10000: 0x80001040,\r\n\t            0x20000: 0x401040,\r\n\t            0x30000: 0x80400000,\r\n\t            0x40000: 0x0,\r\n\t            0x50000: 0x401000,\r\n\t            0x60000: 0x80000040,\r\n\t            0x70000: 0x400040,\r\n\t            0x80000: 0x80000000,\r\n\t            0x90000: 0x400000,\r\n\t            0xa0000: 0x40,\r\n\t            0xb0000: 0x80001000,\r\n\t            0xc0000: 0x80400040,\r\n\t            0xd0000: 0x1040,\r\n\t            0xe0000: 0x1000,\r\n\t            0xf0000: 0x80401040,\r\n\t            0x8000: 0x80001040,\r\n\t            0x18000: 0x40,\r\n\t            0x28000: 0x80400040,\r\n\t            0x38000: 0x80001000,\r\n\t            0x48000: 0x401000,\r\n\t            0x58000: 0x80401040,\r\n\t            0x68000: 0x0,\r\n\t            0x78000: 0x80400000,\r\n\t            0x88000: 0x1000,\r\n\t            0x98000: 0x80401000,\r\n\t            0xa8000: 0x400000,\r\n\t            0xb8000: 0x1040,\r\n\t            0xc8000: 0x80000000,\r\n\t            0xd8000: 0x400040,\r\n\t            0xe8000: 0x401040,\r\n\t            0xf8000: 0x80000040,\r\n\t            0x100000: 0x400040,\r\n\t            0x110000: 0x401000,\r\n\t            0x120000: 0x80000040,\r\n\t            0x130000: 0x0,\r\n\t            0x140000: 0x1040,\r\n\t            0x150000: 0x80400040,\r\n\t            0x160000: 0x80401000,\r\n\t            0x170000: 0x80001040,\r\n\t            0x180000: 0x80401040,\r\n\t            0x190000: 0x80000000,\r\n\t            0x1a0000: 0x80400000,\r\n\t            0x1b0000: 0x401040,\r\n\t            0x1c0000: 0x80001000,\r\n\t            0x1d0000: 0x400000,\r\n\t            0x1e0000: 0x40,\r\n\t            0x1f0000: 0x1000,\r\n\t            0x108000: 0x80400000,\r\n\t            0x118000: 0x80401040,\r\n\t            0x128000: 0x0,\r\n\t            0x138000: 0x401000,\r\n\t            0x148000: 0x400040,\r\n\t            0x158000: 0x80000000,\r\n\t            0x168000: 0x80001040,\r\n\t            0x178000: 0x40,\r\n\t            0x188000: 0x80000040,\r\n\t            0x198000: 0x1000,\r\n\t            0x1a8000: 0x80001000,\r\n\t            0x1b8000: 0x80400040,\r\n\t            0x1c8000: 0x1040,\r\n\t            0x1d8000: 0x80401000,\r\n\t            0x1e8000: 0x400000,\r\n\t            0x1f8000: 0x401040\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x80,\r\n\t            0x1000: 0x1040000,\r\n\t            0x2000: 0x40000,\r\n\t            0x3000: 0x20000000,\r\n\t            0x4000: 0x20040080,\r\n\t            0x5000: 0x1000080,\r\n\t            0x6000: 0x21000080,\r\n\t            0x7000: 0x40080,\r\n\t            0x8000: 0x1000000,\r\n\t            0x9000: 0x20040000,\r\n\t            0xa000: 0x20000080,\r\n\t            0xb000: 0x21040080,\r\n\t            0xc000: 0x21040000,\r\n\t            0xd000: 0x0,\r\n\t            0xe000: 0x1040080,\r\n\t            0xf000: 0x21000000,\r\n\t            0x800: 0x1040080,\r\n\t            0x1800: 0x21000080,\r\n\t            0x2800: 0x80,\r\n\t            0x3800: 0x1040000,\r\n\t            0x4800: 0x40000,\r\n\t            0x5800: 0x20040080,\r\n\t            0x6800: 0x21040000,\r\n\t            0x7800: 0x20000000,\r\n\t            0x8800: 0x20040000,\r\n\t            0x9800: 0x0,\r\n\t            0xa800: 0x21040080,\r\n\t            0xb800: 0x1000080,\r\n\t            0xc800: 0x20000080,\r\n\t            0xd800: 0x21000000,\r\n\t            0xe800: 0x1000000,\r\n\t            0xf800: 0x40080,\r\n\t            0x10000: 0x40000,\r\n\t            0x11000: 0x80,\r\n\t            0x12000: 0x20000000,\r\n\t            0x13000: 0x21000080,\r\n\t            0x14000: 0x1000080,\r\n\t            0x15000: 0x21040000,\r\n\t            0x16000: 0x20040080,\r\n\t            0x17000: 0x1000000,\r\n\t            0x18000: 0x21040080,\r\n\t            0x19000: 0x21000000,\r\n\t            0x1a000: 0x1040000,\r\n\t            0x1b000: 0x20040000,\r\n\t            0x1c000: 0x40080,\r\n\t            0x1d000: 0x20000080,\r\n\t            0x1e000: 0x0,\r\n\t            0x1f000: 0x1040080,\r\n\t            0x10800: 0x21000080,\r\n\t            0x11800: 0x1000000,\r\n\t            0x12800: 0x1040000,\r\n\t            0x13800: 0x20040080,\r\n\t            0x14800: 0x20000000,\r\n\t            0x15800: 0x1040080,\r\n\t            0x16800: 0x80,\r\n\t            0x17800: 0x21040000,\r\n\t            0x18800: 0x40080,\r\n\t            0x19800: 0x21040080,\r\n\t            0x1a800: 0x0,\r\n\t            0x1b800: 0x21000000,\r\n\t            0x1c800: 0x1000080,\r\n\t            0x1d800: 0x40000,\r\n\t            0x1e800: 0x20040000,\r\n\t            0x1f800: 0x20000080\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x10000008,\r\n\t            0x100: 0x2000,\r\n\t            0x200: 0x10200000,\r\n\t            0x300: 0x10202008,\r\n\t            0x400: 0x10002000,\r\n\t            0x500: 0x200000,\r\n\t            0x600: 0x200008,\r\n\t            0x700: 0x10000000,\r\n\t            0x800: 0x0,\r\n\t            0x900: 0x10002008,\r\n\t            0xa00: 0x202000,\r\n\t            0xb00: 0x8,\r\n\t            0xc00: 0x10200008,\r\n\t            0xd00: 0x202008,\r\n\t            0xe00: 0x2008,\r\n\t            0xf00: 0x10202000,\r\n\t            0x80: 0x10200000,\r\n\t            0x180: 0x10202008,\r\n\t            0x280: 0x8,\r\n\t            0x380: 0x200000,\r\n\t            0x480: 0x202008,\r\n\t            0x580: 0x10000008,\r\n\t            0x680: 0x10002000,\r\n\t            0x780: 0x2008,\r\n\t            0x880: 0x200008,\r\n\t            0x980: 0x2000,\r\n\t            0xa80: 0x10002008,\r\n\t            0xb80: 0x10200008,\r\n\t            0xc80: 0x0,\r\n\t            0xd80: 0x10202000,\r\n\t            0xe80: 0x202000,\r\n\t            0xf80: 0x10000000,\r\n\t            0x1000: 0x10002000,\r\n\t            0x1100: 0x10200008,\r\n\t            0x1200: 0x10202008,\r\n\t            0x1300: 0x2008,\r\n\t            0x1400: 0x200000,\r\n\t            0x1500: 0x10000000,\r\n\t            0x1600: 0x10000008,\r\n\t            0x1700: 0x202000,\r\n\t            0x1800: 0x202008,\r\n\t            0x1900: 0x0,\r\n\t            0x1a00: 0x8,\r\n\t            0x1b00: 0x10200000,\r\n\t            0x1c00: 0x2000,\r\n\t            0x1d00: 0x10002008,\r\n\t            0x1e00: 0x10202000,\r\n\t            0x1f00: 0x200008,\r\n\t            0x1080: 0x8,\r\n\t            0x1180: 0x202000,\r\n\t            0x1280: 0x200000,\r\n\t            0x1380: 0x10000008,\r\n\t            0x1480: 0x10002000,\r\n\t            0x1580: 0x2008,\r\n\t            0x1680: 0x10202008,\r\n\t            0x1780: 0x10200000,\r\n\t            0x1880: 0x10202000,\r\n\t            0x1980: 0x10200008,\r\n\t            0x1a80: 0x2000,\r\n\t            0x1b80: 0x202008,\r\n\t            0x1c80: 0x200008,\r\n\t            0x1d80: 0x0,\r\n\t            0x1e80: 0x10000000,\r\n\t            0x1f80: 0x10002008\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x100000,\r\n\t            0x10: 0x2000401,\r\n\t            0x20: 0x400,\r\n\t            0x30: 0x100401,\r\n\t            0x40: 0x2100401,\r\n\t            0x50: 0x0,\r\n\t            0x60: 0x1,\r\n\t            0x70: 0x2100001,\r\n\t            0x80: 0x2000400,\r\n\t            0x90: 0x100001,\r\n\t            0xa0: 0x2000001,\r\n\t            0xb0: 0x2100400,\r\n\t            0xc0: 0x2100000,\r\n\t            0xd0: 0x401,\r\n\t            0xe0: 0x100400,\r\n\t            0xf0: 0x2000000,\r\n\t            0x8: 0x2100001,\r\n\t            0x18: 0x0,\r\n\t            0x28: 0x2000401,\r\n\t            0x38: 0x2100400,\r\n\t            0x48: 0x100000,\r\n\t            0x58: 0x2000001,\r\n\t            0x68: 0x2000000,\r\n\t            0x78: 0x401,\r\n\t            0x88: 0x100401,\r\n\t            0x98: 0x2000400,\r\n\t            0xa8: 0x2100000,\r\n\t            0xb8: 0x100001,\r\n\t            0xc8: 0x400,\r\n\t            0xd8: 0x2100401,\r\n\t            0xe8: 0x1,\r\n\t            0xf8: 0x100400,\r\n\t            0x100: 0x2000000,\r\n\t            0x110: 0x100000,\r\n\t            0x120: 0x2000401,\r\n\t            0x130: 0x2100001,\r\n\t            0x140: 0x100001,\r\n\t            0x150: 0x2000400,\r\n\t            0x160: 0x2100400,\r\n\t            0x170: 0x100401,\r\n\t            0x180: 0x401,\r\n\t            0x190: 0x2100401,\r\n\t            0x1a0: 0x100400,\r\n\t            0x1b0: 0x1,\r\n\t            0x1c0: 0x0,\r\n\t            0x1d0: 0x2100000,\r\n\t            0x1e0: 0x2000001,\r\n\t            0x1f0: 0x400,\r\n\t            0x108: 0x100400,\r\n\t            0x118: 0x2000401,\r\n\t            0x128: 0x2100001,\r\n\t            0x138: 0x1,\r\n\t            0x148: 0x2000000,\r\n\t            0x158: 0x100000,\r\n\t            0x168: 0x401,\r\n\t            0x178: 0x2100400,\r\n\t            0x188: 0x2000001,\r\n\t            0x198: 0x2100000,\r\n\t            0x1a8: 0x0,\r\n\t            0x1b8: 0x2100401,\r\n\t            0x1c8: 0x100401,\r\n\t            0x1d8: 0x400,\r\n\t            0x1e8: 0x2000400,\r\n\t            0x1f8: 0x100001\r\n\t        },\r\n\t        {\r\n\t            0x0: 0x8000820,\r\n\t            0x1: 0x20000,\r\n\t            0x2: 0x8000000,\r\n\t            0x3: 0x20,\r\n\t            0x4: 0x20020,\r\n\t            0x5: 0x8020820,\r\n\t            0x6: 0x8020800,\r\n\t            0x7: 0x800,\r\n\t            0x8: 0x8020000,\r\n\t            0x9: 0x8000800,\r\n\t            0xa: 0x20800,\r\n\t            0xb: 0x8020020,\r\n\t            0xc: 0x820,\r\n\t            0xd: 0x0,\r\n\t            0xe: 0x8000020,\r\n\t            0xf: 0x20820,\r\n\t            0x80000000: 0x800,\r\n\t            0x80000001: 0x8020820,\r\n\t            0x80000002: 0x8000820,\r\n\t            0x80000003: 0x8000000,\r\n\t            0x80000004: 0x8020000,\r\n\t            0x80000005: 0x20800,\r\n\t            0x80000006: 0x20820,\r\n\t            0x80000007: 0x20,\r\n\t            0x80000008: 0x8000020,\r\n\t            0x80000009: 0x820,\r\n\t            0x8000000a: 0x20020,\r\n\t            0x8000000b: 0x8020800,\r\n\t            0x8000000c: 0x0,\r\n\t            0x8000000d: 0x8020020,\r\n\t            0x8000000e: 0x8000800,\r\n\t            0x8000000f: 0x20000,\r\n\t            0x10: 0x20820,\r\n\t            0x11: 0x8020800,\r\n\t            0x12: 0x20,\r\n\t            0x13: 0x800,\r\n\t            0x14: 0x8000800,\r\n\t            0x15: 0x8000020,\r\n\t            0x16: 0x8020020,\r\n\t            0x17: 0x20000,\r\n\t            0x18: 0x0,\r\n\t            0x19: 0x20020,\r\n\t            0x1a: 0x8020000,\r\n\t            0x1b: 0x8000820,\r\n\t            0x1c: 0x8020820,\r\n\t            0x1d: 0x20800,\r\n\t            0x1e: 0x820,\r\n\t            0x1f: 0x8000000,\r\n\t            0x80000010: 0x20000,\r\n\t            0x80000011: 0x800,\r\n\t            0x80000012: 0x8020020,\r\n\t            0x80000013: 0x20820,\r\n\t            0x80000014: 0x20,\r\n\t            0x80000015: 0x8020000,\r\n\t            0x80000016: 0x8000000,\r\n\t            0x80000017: 0x8000820,\r\n\t            0x80000018: 0x8020820,\r\n\t            0x80000019: 0x8000020,\r\n\t            0x8000001a: 0x8000800,\r\n\t            0x8000001b: 0x0,\r\n\t            0x8000001c: 0x20800,\r\n\t            0x8000001d: 0x820,\r\n\t            0x8000001e: 0x20020,\r\n\t            0x8000001f: 0x8020800\r\n\t        }\r\n\t    ];\r\n\r\n\t    // Masks that select the SBOX input\r\n\t    var SBOX_MASK = [\r\n\t        0xf8000001, 0x1f800000, 0x01f80000, 0x001f8000,\r\n\t        0x0001f800, 0x00001f80, 0x000001f8, 0x8000001f\r\n\t    ];\r\n\r\n\t    /**\r\n\t     * DES block cipher algorithm.\r\n\t     */\r\n\t    var DES = C_algo.DES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\r\n\t            // Select 56 bits according to PC1\r\n\t            var keyBits = [];\r\n\t            for (var i = 0; i < 56; i++) {\r\n\t                var keyBitPos = PC1[i] - 1;\r\n\t                keyBits[i] = (keyWords[keyBitPos >>> 5] >>> (31 - keyBitPos % 32)) & 1;\r\n\t            }\r\n\r\n\t            // Assemble 16 subkeys\r\n\t            var subKeys = this._subKeys = [];\r\n\t            for (var nSubKey = 0; nSubKey < 16; nSubKey++) {\r\n\t                // Create subkey\r\n\t                var subKey = subKeys[nSubKey] = [];\r\n\r\n\t                // Shortcut\r\n\t                var bitShift = BIT_SHIFTS[nSubKey];\r\n\r\n\t                // Select 48 bits according to PC2\r\n\t                for (var i = 0; i < 24; i++) {\r\n\t                    // Select from the left 28 key bits\r\n\t                    subKey[(i / 6) | 0] |= keyBits[((PC2[i] - 1) + bitShift) % 28] << (31 - i % 6);\r\n\r\n\t                    // Select from the right 28 key bits\r\n\t                    subKey[4 + ((i / 6) | 0)] |= keyBits[28 + (((PC2[i + 24] - 1) + bitShift) % 28)] << (31 - i % 6);\r\n\t                }\r\n\r\n\t                // Since each subkey is applied to an expanded 32-bit input,\r\n\t                // the subkey can be broken into 8 values scaled to 32-bits,\r\n\t                // which allows the key to be used without expansion\r\n\t                subKey[0] = (subKey[0] << 1) | (subKey[0] >>> 31);\r\n\t                for (var i = 1; i < 7; i++) {\r\n\t                    subKey[i] = subKey[i] >>> ((i - 1) * 4 + 3);\r\n\t                }\r\n\t                subKey[7] = (subKey[7] << 5) | (subKey[7] >>> 27);\r\n\t            }\r\n\r\n\t            // Compute inverse subkeys\r\n\t            var invSubKeys = this._invSubKeys = [];\r\n\t            for (var i = 0; i < 16; i++) {\r\n\t                invSubKeys[i] = subKeys[15 - i];\r\n\t            }\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._subKeys);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            this._doCryptBlock(M, offset, this._invSubKeys);\r\n\t        },\r\n\r\n\t        _doCryptBlock: function (M, offset, subKeys) {\r\n\t            // Get input\r\n\t            this._lBlock = M[offset];\r\n\t            this._rBlock = M[offset + 1];\r\n\r\n\t            // Initial permutation\r\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\r\n\t            exchangeLR.call(this, 16, 0x0000ffff);\r\n\t            exchangeRL.call(this, 2,  0x33333333);\r\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\r\n\t            exchangeLR.call(this, 1,  0x55555555);\r\n\r\n\t            // Rounds\r\n\t            for (var round = 0; round < 16; round++) {\r\n\t                // Shortcuts\r\n\t                var subKey = subKeys[round];\r\n\t                var lBlock = this._lBlock;\r\n\t                var rBlock = this._rBlock;\r\n\r\n\t                // Feistel function\r\n\t                var f = 0;\r\n\t                for (var i = 0; i < 8; i++) {\r\n\t                    f |= SBOX_P[i][((rBlock ^ subKey[i]) & SBOX_MASK[i]) >>> 0];\r\n\t                }\r\n\t                this._lBlock = rBlock;\r\n\t                this._rBlock = lBlock ^ f;\r\n\t            }\r\n\r\n\t            // Undo swap from last round\r\n\t            var t = this._lBlock;\r\n\t            this._lBlock = this._rBlock;\r\n\t            this._rBlock = t;\r\n\r\n\t            // Final permutation\r\n\t            exchangeLR.call(this, 1,  0x55555555);\r\n\t            exchangeRL.call(this, 8,  0x00ff00ff);\r\n\t            exchangeRL.call(this, 2,  0x33333333);\r\n\t            exchangeLR.call(this, 16, 0x0000ffff);\r\n\t            exchangeLR.call(this, 4,  0x0f0f0f0f);\r\n\r\n\t            // Set output\r\n\t            M[offset] = this._lBlock;\r\n\t            M[offset + 1] = this._rBlock;\r\n\t        },\r\n\r\n\t        keySize: 64/32,\r\n\r\n\t        ivSize: 64/32,\r\n\r\n\t        blockSize: 64/32\r\n\t    });\r\n\r\n\t    // Swap bits across the left and right words\r\n\t    function exchangeLR(offset, mask) {\r\n\t        var t = ((this._lBlock >>> offset) ^ this._rBlock) & mask;\r\n\t        this._rBlock ^= t;\r\n\t        this._lBlock ^= t << offset;\r\n\t    }\r\n\r\n\t    function exchangeRL(offset, mask) {\r\n\t        var t = ((this._rBlock >>> offset) ^ this._lBlock) & mask;\r\n\t        this._lBlock ^= t;\r\n\t        this._rBlock ^= t << offset;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.DES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.DES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.DES = BlockCipher._createHelper(DES);\r\n\r\n\t    /**\r\n\t     * Triple-DES block cipher algorithm.\r\n\t     */\r\n\t    var TripleDES = C_algo.TripleDES = BlockCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\t            // Make sure the key length is valid (64, 128 or >= 192 bit)\r\n\t            if (keyWords.length !== 2 && keyWords.length !== 4 && keyWords.length < 6) {\r\n\t                throw new Error('Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.');\r\n\t            }\r\n\r\n\t            // Extend the key according to the keying options defined in 3DES standard\r\n\t            var key1 = keyWords.slice(0, 2);\r\n\t            var key2 = keyWords.length < 4 ? keyWords.slice(0, 2) : keyWords.slice(2, 4);\r\n\t            var key3 = keyWords.length < 6 ? keyWords.slice(0, 2) : keyWords.slice(4, 6);\r\n\r\n\t            // Create DES instances\r\n\t            this._des1 = DES.createEncryptor(WordArray.create(key1));\r\n\t            this._des2 = DES.createEncryptor(WordArray.create(key2));\r\n\t            this._des3 = DES.createEncryptor(WordArray.create(key3));\r\n\t        },\r\n\r\n\t        encryptBlock: function (M, offset) {\r\n\t            this._des1.encryptBlock(M, offset);\r\n\t            this._des2.decryptBlock(M, offset);\r\n\t            this._des3.encryptBlock(M, offset);\r\n\t        },\r\n\r\n\t        decryptBlock: function (M, offset) {\r\n\t            this._des3.decryptBlock(M, offset);\r\n\t            this._des2.encryptBlock(M, offset);\r\n\t            this._des1.decryptBlock(M, offset);\r\n\t        },\r\n\r\n\t        keySize: 192/32,\r\n\r\n\t        ivSize: 64/32,\r\n\r\n\t        blockSize: 64/32\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.TripleDES.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.TripleDES.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.TripleDES = BlockCipher._createHelper(TripleDES);\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    /**\r\n\t     * RC4 stream cipher algorithm.\r\n\t     */\r\n\t    var RC4 = C_algo.RC4 = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var key = this._key;\r\n\t            var keyWords = key.words;\r\n\t            var keySigBytes = key.sigBytes;\r\n\r\n\t            // Init sbox\r\n\t            var S = this._S = [];\r\n\t            for (var i = 0; i < 256; i++) {\r\n\t                S[i] = i;\r\n\t            }\r\n\r\n\t            // Key setup\r\n\t            for (var i = 0, j = 0; i < 256; i++) {\r\n\t                var keyByteIndex = i % keySigBytes;\r\n\t                var keyByte = (keyWords[keyByteIndex >>> 2] >>> (24 - (keyByteIndex % 4) * 8)) & 0xff;\r\n\r\n\t                j = (j + S[i] + keyByte) % 256;\r\n\r\n\t                // Swap\r\n\t                var t = S[i];\r\n\t                S[i] = S[j];\r\n\t                S[j] = t;\r\n\t            }\r\n\r\n\t            // Counters\r\n\t            this._i = this._j = 0;\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            M[offset] ^= generateKeystreamWord.call(this);\r\n\t        },\r\n\r\n\t        keySize: 256/32,\r\n\r\n\t        ivSize: 0\r\n\t    });\r\n\r\n\t    function generateKeystreamWord() {\r\n\t        // Shortcuts\r\n\t        var S = this._S;\r\n\t        var i = this._i;\r\n\t        var j = this._j;\r\n\r\n\t        // Generate keystream word\r\n\t        var keystreamWord = 0;\r\n\t        for (var n = 0; n < 4; n++) {\r\n\t            i = (i + 1) % 256;\r\n\t            j = (j + S[i]) % 256;\r\n\r\n\t            // Swap\r\n\t            var t = S[i];\r\n\t            S[i] = S[j];\r\n\t            S[j] = t;\r\n\r\n\t            keystreamWord |= S[(S[i] + S[j]) % 256] << (24 - n * 8);\r\n\t        }\r\n\r\n\t        // Update counters\r\n\t        this._i = i;\r\n\t        this._j = j;\r\n\r\n\t        return keystreamWord;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RC4.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RC4.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RC4 = StreamCipher._createHelper(RC4);\r\n\r\n\t    /**\r\n\t     * Modified RC4 stream cipher algorithm.\r\n\t     */\r\n\t    var RC4Drop = C_algo.RC4Drop = RC4.extend({\r\n\t        /**\r\n\t         * Configuration options.\r\n\t         *\r\n\t         * @property {number} drop The number of keystream words to drop. Default 192\r\n\t         */\r\n\t        cfg: RC4.cfg.extend({\r\n\t            drop: 192\r\n\t        }),\r\n\r\n\t        _doReset: function () {\r\n\t            RC4._doReset.call(this);\r\n\r\n\t            // Drop\r\n\t            for (var i = this.cfg.drop; i > 0; i--) {\r\n\t                generateKeystreamWord.call(this);\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RC4Drop.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RC4Drop.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RC4Drop = StreamCipher._createHelper(RC4Drop);\r\n\t}());\r\n\r\n\r\n\t/** @preserve\r\n\t * Counter block mode compatible with  Dr Brian Gladman fileenc.c\r\n\t * derived from CryptoJS.mode.CTR\r\n\t * Jan Hruby jhruby.web@gmail.com\r\n\t */\r\n\tCryptoJS.mode.CTRGladman = (function () {\r\n\t    var CTRGladman = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t\tfunction incWord(word)\r\n\t\t{\r\n\t\t\tif (((word >> 24) & 0xff) === 0xff) { //overflow\r\n\t\t\tvar b1 = (word >> 16)&0xff;\r\n\t\t\tvar b2 = (word >> 8)&0xff;\r\n\t\t\tvar b3 = word & 0xff;\r\n\r\n\t\t\tif (b1 === 0xff) // overflow b1\r\n\t\t\t{\r\n\t\t\tb1 = 0;\r\n\t\t\tif (b2 === 0xff)\r\n\t\t\t{\r\n\t\t\t\tb2 = 0;\r\n\t\t\t\tif (b3 === 0xff)\r\n\t\t\t\t{\r\n\t\t\t\t\tb3 = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t++b3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t++b2;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t++b1;\r\n\t\t\t}\r\n\r\n\t\t\tword = 0;\r\n\t\t\tword += (b1 << 16);\r\n\t\t\tword += (b2 << 8);\r\n\t\t\tword += b3;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\tword += (0x01 << 24);\r\n\t\t\t}\r\n\t\t\treturn word;\r\n\t\t}\r\n\r\n\t\tfunction incCounter(counter)\r\n\t\t{\r\n\t\t\tif ((counter[0] = incWord(counter[0])) === 0)\r\n\t\t\t{\r\n\t\t\t\t// encr_data in fileenc.c from  Dr Brian Gladman's counts only with DWORD j < 8\r\n\t\t\t\tcounter[1] = incWord(counter[1]);\r\n\t\t\t}\r\n\t\t\treturn counter;\r\n\t\t}\r\n\r\n\t    var Encryptor = CTRGladman.Encryptor = CTRGladman.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var counter = this._counter;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                counter = this._counter = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\r\n\t\t\t\tincCounter(counter);\r\n\r\n\t\t\t\tvar keystream = counter.slice(0);\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    CTRGladman.Decryptor = Encryptor;\r\n\r\n\t    return CTRGladman;\r\n\t}());\r\n\r\n\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable objects\r\n\t    var S  = [];\r\n\t    var C_ = [];\r\n\t    var G  = [];\r\n\r\n\t    /**\r\n\t     * Rabbit stream cipher algorithm\r\n\t     */\r\n\t    var Rabbit = C_algo.Rabbit = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var K = this._key.words;\r\n\t            var iv = this.cfg.iv;\r\n\r\n\t            // Swap endian\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                K[i] = (((K[i] << 8)  | (K[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((K[i] << 24) | (K[i] >>> 8))  & 0xff00ff00);\r\n\t            }\r\n\r\n\t            // Generate initial state values\r\n\t            var X = this._X = [\r\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\r\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\r\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\r\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\r\n\t            ];\r\n\r\n\t            // Generate initial counter values\r\n\t            var C = this._C = [\r\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\r\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\r\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\r\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\r\n\t            ];\r\n\r\n\t            // Carry bit\r\n\t            this._b = 0;\r\n\r\n\t            // Iterate the system four times\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                nextState.call(this);\r\n\t            }\r\n\r\n\t            // Modify the counters\r\n\t            for (var i = 0; i < 8; i++) {\r\n\t                C[i] ^= X[(i + 4) & 7];\r\n\t            }\r\n\r\n\t            // IV setup\r\n\t            if (iv) {\r\n\t                // Shortcuts\r\n\t                var IV = iv.words;\r\n\t                var IV_0 = IV[0];\r\n\t                var IV_1 = IV[1];\r\n\r\n\t                // Generate four subvectors\r\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\r\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\r\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\r\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\r\n\r\n\t                // Modify counter values\r\n\t                C[0] ^= i0;\r\n\t                C[1] ^= i1;\r\n\t                C[2] ^= i2;\r\n\t                C[3] ^= i3;\r\n\t                C[4] ^= i0;\r\n\t                C[5] ^= i1;\r\n\t                C[6] ^= i2;\r\n\t                C[7] ^= i3;\r\n\r\n\t                // Iterate the system four times\r\n\t                for (var i = 0; i < 4; i++) {\r\n\t                    nextState.call(this);\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var X = this._X;\r\n\r\n\t            // Iterate the system\r\n\t            nextState.call(this);\r\n\r\n\t            // Generate four keystream words\r\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\r\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\r\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\r\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\r\n\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Swap endian\r\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\r\n\r\n\t                // Encrypt\r\n\t                M[offset + i] ^= S[i];\r\n\t            }\r\n\t        },\r\n\r\n\t        blockSize: 128/32,\r\n\r\n\t        ivSize: 64/32\r\n\t    });\r\n\r\n\t    function nextState() {\r\n\t        // Shortcuts\r\n\t        var X = this._X;\r\n\t        var C = this._C;\r\n\r\n\t        // Save old counter values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            C_[i] = C[i];\r\n\t        }\r\n\r\n\t        // Calculate new counter values\r\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\r\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\r\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\r\n\r\n\t        // Calculate the g-values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            var gx = X[i] + C[i];\r\n\r\n\t            // Construct high and low argument for squaring\r\n\t            var ga = gx & 0xffff;\r\n\t            var gb = gx >>> 16;\r\n\r\n\t            // Calculate high and low result of squaring\r\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\r\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\r\n\r\n\t            // High XOR low\r\n\t            G[i] = gh ^ gl;\r\n\t        }\r\n\r\n\t        // Calculate new state values\r\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\r\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\r\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\r\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\r\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\r\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\r\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\r\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.Rabbit.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.Rabbit.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.Rabbit = StreamCipher._createHelper(Rabbit);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Counter block mode.\r\n\t */\r\n\tCryptoJS.mode.CTR = (function () {\r\n\t    var CTR = CryptoJS.lib.BlockCipherMode.extend();\r\n\r\n\t    var Encryptor = CTR.Encryptor = CTR.extend({\r\n\t        processBlock: function (words, offset) {\r\n\t            // Shortcuts\r\n\t            var cipher = this._cipher\r\n\t            var blockSize = cipher.blockSize;\r\n\t            var iv = this._iv;\r\n\t            var counter = this._counter;\r\n\r\n\t            // Generate keystream\r\n\t            if (iv) {\r\n\t                counter = this._counter = iv.slice(0);\r\n\r\n\t                // Remove IV for subsequent blocks\r\n\t                this._iv = undefined;\r\n\t            }\r\n\t            var keystream = counter.slice(0);\r\n\t            cipher.encryptBlock(keystream, 0);\r\n\r\n\t            // Increment counter\r\n\t            counter[blockSize - 1] = (counter[blockSize - 1] + 1) | 0\r\n\r\n\t            // Encrypt\r\n\t            for (var i = 0; i < blockSize; i++) {\r\n\t                words[offset + i] ^= keystream[i];\r\n\t            }\r\n\t        }\r\n\t    });\r\n\r\n\t    CTR.Decryptor = Encryptor;\r\n\r\n\t    return CTR;\r\n\t}());\r\n\r\n\r\n\t(function () {\r\n\t    // Shortcuts\r\n\t    var C = CryptoJS;\r\n\t    var C_lib = C.lib;\r\n\t    var StreamCipher = C_lib.StreamCipher;\r\n\t    var C_algo = C.algo;\r\n\r\n\t    // Reusable objects\r\n\t    var S  = [];\r\n\t    var C_ = [];\r\n\t    var G  = [];\r\n\r\n\t    /**\r\n\t     * Rabbit stream cipher algorithm.\r\n\t     *\r\n\t     * This is a legacy version that neglected to convert the key to little-endian.\r\n\t     * This error doesn't affect the cipher's security,\r\n\t     * but it does affect its compatibility with other implementations.\r\n\t     */\r\n\t    var RabbitLegacy = C_algo.RabbitLegacy = StreamCipher.extend({\r\n\t        _doReset: function () {\r\n\t            // Shortcuts\r\n\t            var K = this._key.words;\r\n\t            var iv = this.cfg.iv;\r\n\r\n\t            // Generate initial state values\r\n\t            var X = this._X = [\r\n\t                K[0], (K[3] << 16) | (K[2] >>> 16),\r\n\t                K[1], (K[0] << 16) | (K[3] >>> 16),\r\n\t                K[2], (K[1] << 16) | (K[0] >>> 16),\r\n\t                K[3], (K[2] << 16) | (K[1] >>> 16)\r\n\t            ];\r\n\r\n\t            // Generate initial counter values\r\n\t            var C = this._C = [\r\n\t                (K[2] << 16) | (K[2] >>> 16), (K[0] & 0xffff0000) | (K[1] & 0x0000ffff),\r\n\t                (K[3] << 16) | (K[3] >>> 16), (K[1] & 0xffff0000) | (K[2] & 0x0000ffff),\r\n\t                (K[0] << 16) | (K[0] >>> 16), (K[2] & 0xffff0000) | (K[3] & 0x0000ffff),\r\n\t                (K[1] << 16) | (K[1] >>> 16), (K[3] & 0xffff0000) | (K[0] & 0x0000ffff)\r\n\t            ];\r\n\r\n\t            // Carry bit\r\n\t            this._b = 0;\r\n\r\n\t            // Iterate the system four times\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                nextState.call(this);\r\n\t            }\r\n\r\n\t            // Modify the counters\r\n\t            for (var i = 0; i < 8; i++) {\r\n\t                C[i] ^= X[(i + 4) & 7];\r\n\t            }\r\n\r\n\t            // IV setup\r\n\t            if (iv) {\r\n\t                // Shortcuts\r\n\t                var IV = iv.words;\r\n\t                var IV_0 = IV[0];\r\n\t                var IV_1 = IV[1];\r\n\r\n\t                // Generate four subvectors\r\n\t                var i0 = (((IV_0 << 8) | (IV_0 >>> 24)) & 0x00ff00ff) | (((IV_0 << 24) | (IV_0 >>> 8)) & 0xff00ff00);\r\n\t                var i2 = (((IV_1 << 8) | (IV_1 >>> 24)) & 0x00ff00ff) | (((IV_1 << 24) | (IV_1 >>> 8)) & 0xff00ff00);\r\n\t                var i1 = (i0 >>> 16) | (i2 & 0xffff0000);\r\n\t                var i3 = (i2 << 16)  | (i0 & 0x0000ffff);\r\n\r\n\t                // Modify counter values\r\n\t                C[0] ^= i0;\r\n\t                C[1] ^= i1;\r\n\t                C[2] ^= i2;\r\n\t                C[3] ^= i3;\r\n\t                C[4] ^= i0;\r\n\t                C[5] ^= i1;\r\n\t                C[6] ^= i2;\r\n\t                C[7] ^= i3;\r\n\r\n\t                // Iterate the system four times\r\n\t                for (var i = 0; i < 4; i++) {\r\n\t                    nextState.call(this);\r\n\t                }\r\n\t            }\r\n\t        },\r\n\r\n\t        _doProcessBlock: function (M, offset) {\r\n\t            // Shortcut\r\n\t            var X = this._X;\r\n\r\n\t            // Iterate the system\r\n\t            nextState.call(this);\r\n\r\n\t            // Generate four keystream words\r\n\t            S[0] = X[0] ^ (X[5] >>> 16) ^ (X[3] << 16);\r\n\t            S[1] = X[2] ^ (X[7] >>> 16) ^ (X[5] << 16);\r\n\t            S[2] = X[4] ^ (X[1] >>> 16) ^ (X[7] << 16);\r\n\t            S[3] = X[6] ^ (X[3] >>> 16) ^ (X[1] << 16);\r\n\r\n\t            for (var i = 0; i < 4; i++) {\r\n\t                // Swap endian\r\n\t                S[i] = (((S[i] << 8)  | (S[i] >>> 24)) & 0x00ff00ff) |\r\n\t                       (((S[i] << 24) | (S[i] >>> 8))  & 0xff00ff00);\r\n\r\n\t                // Encrypt\r\n\t                M[offset + i] ^= S[i];\r\n\t            }\r\n\t        },\r\n\r\n\t        blockSize: 128/32,\r\n\r\n\t        ivSize: 64/32\r\n\t    });\r\n\r\n\t    function nextState() {\r\n\t        // Shortcuts\r\n\t        var X = this._X;\r\n\t        var C = this._C;\r\n\r\n\t        // Save old counter values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            C_[i] = C[i];\r\n\t        }\r\n\r\n\t        // Calculate new counter values\r\n\t        C[0] = (C[0] + 0x4d34d34d + this._b) | 0;\r\n\t        C[1] = (C[1] + 0xd34d34d3 + ((C[0] >>> 0) < (C_[0] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[2] = (C[2] + 0x34d34d34 + ((C[1] >>> 0) < (C_[1] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[3] = (C[3] + 0x4d34d34d + ((C[2] >>> 0) < (C_[2] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[4] = (C[4] + 0xd34d34d3 + ((C[3] >>> 0) < (C_[3] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[5] = (C[5] + 0x34d34d34 + ((C[4] >>> 0) < (C_[4] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[6] = (C[6] + 0x4d34d34d + ((C[5] >>> 0) < (C_[5] >>> 0) ? 1 : 0)) | 0;\r\n\t        C[7] = (C[7] + 0xd34d34d3 + ((C[6] >>> 0) < (C_[6] >>> 0) ? 1 : 0)) | 0;\r\n\t        this._b = (C[7] >>> 0) < (C_[7] >>> 0) ? 1 : 0;\r\n\r\n\t        // Calculate the g-values\r\n\t        for (var i = 0; i < 8; i++) {\r\n\t            var gx = X[i] + C[i];\r\n\r\n\t            // Construct high and low argument for squaring\r\n\t            var ga = gx & 0xffff;\r\n\t            var gb = gx >>> 16;\r\n\r\n\t            // Calculate high and low result of squaring\r\n\t            var gh = ((((ga * ga) >>> 17) + ga * gb) >>> 15) + gb * gb;\r\n\t            var gl = (((gx & 0xffff0000) * gx) | 0) + (((gx & 0x0000ffff) * gx) | 0);\r\n\r\n\t            // High XOR low\r\n\t            G[i] = gh ^ gl;\r\n\t        }\r\n\r\n\t        // Calculate new state values\r\n\t        X[0] = (G[0] + ((G[7] << 16) | (G[7] >>> 16)) + ((G[6] << 16) | (G[6] >>> 16))) | 0;\r\n\t        X[1] = (G[1] + ((G[0] << 8)  | (G[0] >>> 24)) + G[7]) | 0;\r\n\t        X[2] = (G[2] + ((G[1] << 16) | (G[1] >>> 16)) + ((G[0] << 16) | (G[0] >>> 16))) | 0;\r\n\t        X[3] = (G[3] + ((G[2] << 8)  | (G[2] >>> 24)) + G[1]) | 0;\r\n\t        X[4] = (G[4] + ((G[3] << 16) | (G[3] >>> 16)) + ((G[2] << 16) | (G[2] >>> 16))) | 0;\r\n\t        X[5] = (G[5] + ((G[4] << 8)  | (G[4] >>> 24)) + G[3]) | 0;\r\n\t        X[6] = (G[6] + ((G[5] << 16) | (G[5] >>> 16)) + ((G[4] << 16) | (G[4] >>> 16))) | 0;\r\n\t        X[7] = (G[7] + ((G[6] << 8)  | (G[6] >>> 24)) + G[5]) | 0;\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Shortcut functions to the cipher's object interface.\r\n\t     *\r\n\t     * @example\r\n\t     *\r\n\t     *     var ciphertext = CryptoJS.RabbitLegacy.encrypt(message, key, cfg);\r\n\t     *     var plaintext  = CryptoJS.RabbitLegacy.decrypt(ciphertext, key, cfg);\r\n\t     */\r\n\t    C.RabbitLegacy = StreamCipher._createHelper(RabbitLegacy);\r\n\t}());\r\n\r\n\r\n\t/**\r\n\t * Zero padding strategy.\r\n\t */\r\n\tCryptoJS.pad.ZeroPadding = {\r\n\t    pad: function (data, blockSize) {\r\n\t        // Shortcut\r\n\t        var blockSizeBytes = blockSize * 4;\r\n\r\n\t        // Pad\r\n\t        data.clamp();\r\n\t        data.sigBytes += blockSizeBytes - ((data.sigBytes % blockSizeBytes) || blockSizeBytes);\r\n\t    },\r\n\r\n\t    unpad: function (data) {\r\n\t        // Shortcut\r\n\t        var dataWords = data.words;\r\n\r\n\t        // Unpad\r\n\t        var i = data.sigBytes - 1;\r\n\t        for (var i = data.sigBytes - 1; i >= 0; i--) {\r\n\t            if (((dataWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff)) {\r\n\t                data.sigBytes = i + 1;\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t};\r\n\r\n\r\n    return {\r\n        init: init,\r\n        cryptoJS: CryptoJS\r\n      }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fontFamily: {\r\n    'Arial,Helvetica,sans-serif': 'Arial',\r\n    'Georgia,serif': 'Georgia',\r\n    'Impact,Charcoal,sans-serif': 'Impact',\r\n    'Tahoma,Geneva,sans-serif': 'Tahoma',\r\n    'Times New Roman,Times,serif,-webkit-standard': 'Times New Roman',\r\n    'Verdana,Geneva,sans-serif': 'Verdana'\r\n  },\r\n  fontFamilySelection: false,\r\n  fontFamilyDefaultSelection: 'Font Family'\r\n})\r\n\r\nFE.PLUGINS.fontFamily = function (editor) {\r\n  const { $ } = editor\r\n\r\n  function apply(val) {\r\n    editor.format.applyStyle('font-family', val)\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    $dropdown.find('.fr-command.fr-active').removeClass('fr-active').attr('aria-selected', false)\r\n    $dropdown.find(`.fr-command[data-param1=\"${_getSelection()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n\r\n  function _getArray(val) {\r\n    const font_array = val.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'| /g, '').split(',')\r\n\r\n    return $(this).grep(font_array, function (txt) { return txt.length > 0 })\r\n  }\r\n\r\n  /**\r\n   * Return first match position.\r\n   */\r\n  function _matches(array1, array2) {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      for (let j = 0; j < array2.length; j++) {\r\n        if (array1[i].toLowerCase() === array2[j].toLowerCase()) {\r\n          return [i, j]\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  function _getSelection() {\r\n    const val = $(editor.selection.element()).css('font-family')\r\n    const font_array = _getArray(val)\r\n\r\n    const font_matches = []\r\n\r\n    for (const key in editor.opts.fontFamily) {\r\n      if (editor.opts.fontFamily.hasOwnProperty(key)) {\r\n        const c_font_array = _getArray(key)\r\n\r\n        const match = _matches(font_array, c_font_array)\r\n\r\n        if (match) {\r\n          font_matches.push([key, match])\r\n        }\r\n      }\r\n    }\r\n\r\n    if (font_matches.length === 0) return null\r\n\r\n    // Sort matches by their position.\r\n    // Times,Arial should be detected as being Times, not Arial.\r\n    font_matches.sort(function (a, b) {\r\n      const f_diff = a[1][0] - b[1][0]\r\n\r\n      if (f_diff === 0) {\r\n        return a[1][1] - b[1][1]\r\n      }\r\n      else {\r\n        return f_diff\r\n      }\r\n    })\r\n\r\n    return font_matches[0][0]\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.fontFamilySelection) {\r\n      const val = $(editor.selection.element()).css('font-family').replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'|/g, '').split(',')\r\n\r\n      $btn.find('> span').text(editor.opts.fontFamily[_getSelection()] || val[0] || editor.language.translate(editor.opts.fontFamilyDefaultSelection))\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fontFamily', {\r\n  type: 'dropdown',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.fontFamilySelection\r\n  },\r\n  defaultSelection: function (editor) {\r\n    return editor.opts.fontFamilyDefaultSelection\r\n  },\r\n  displaySelectionWidth: 120,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.fontFamily\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontFamily\" data-param1=\"${val}\" \r\n        style=\"font-family: ${val}\" title=\"${options[val]}\">${options[val]}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Font Family',\r\n  callback: function (cmd, val) {\r\n    this.fontFamily.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fontFamily.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.fontFamily.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'fontFamily'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fontFamily', {\r\n  NAME: 'font',\r\n  SVG_KEY: 'fontFamily'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  fontSize: ['8', '9', '10', '11', '12', '14', '18', '24', '30', '36', '48', '60', '72', '96'],\r\n  fontSizeSelection: false,\r\n  fontSizeDefaultSelection: '12',\r\n  fontSizeUnit: 'px'\r\n})\r\n\r\nFE.PLUGINS.fontSize = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function apply(val) {\r\n    editor.format.applyStyle('font-size', val)\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    let val = $(editor.selection.element()).css('font-size')\r\n\r\n    if (editor.opts.fontSizeUnit === 'pt') {\r\n      val = `${Math.round(parseFloat(val, 10) * 72 / 96)}pt`\r\n    }\r\n\r\n    $dropdown.find('.fr-command.fr-active').removeClass('fr-active').attr('aria-selected', false)\r\n    $dropdown.find(`.fr-command[data-param1=\"${val}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.fontSizeSelection) {\r\n      let val = editor.helpers.getPX($(editor.selection.element()).css('font-size'))\r\n\r\n      if (editor.opts.fontSizeUnit === 'pt') {\r\n        val = `${Math.round(parseFloat(val, 10) * 72 / 96)}pt`\r\n      }\r\n\r\n      $btn.find('> span').text(val)\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fontSize', {\r\n  type: 'dropdown',\r\n  title: 'Font Size',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.fontSizeSelection\r\n  },\r\n  displaySelectionWidth: 30,\r\n  defaultSelection: function (editor) {\r\n    return editor.opts.fontSizeDefaultSelection\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { fontSize : options } = this.opts\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      const val = options[i]\r\n      c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontSize\" data-param1=\"${val}${this.opts.fontSizeUnit}\" title=\"${val}\">${val}</a></li>`\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.fontSize.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fontSize.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.fontSize.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'fontSize'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fontSize', {\r\n  NAME: 'text-height',\r\n  SVG_KEY: 'fontSize'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'forms.edit': '[_BUTTONS_]',\r\n  'forms.update': '[_BUTTONS_][_TEXT_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  formEditButtons: ['inputStyle', 'inputEdit'],\r\n  formStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-large': 'Large'\r\n  },\r\n  formMultipleStyles: true,\r\n  formUpdateButtons: ['inputBack', '|']\r\n})\r\n\r\n\r\n\r\nFE.PLUGINS.forms = function (editor) {\r\n  const { $ } = editor\r\n  let current_input \r\n\r\n  /**\r\n   * Input mousedown.\r\n   */\r\n  function _inputMouseDown(e) {\r\n    editor.selection.clear() \r\n    $(this).data('mousedown', true) \r\n  }\r\n\r\n  /**\r\n   * Mouseup on the input.\r\n   */\r\n  function _inputMouseUp(e) {\r\n\r\n    // Mousedown was made.\r\n    if ($(this).data('mousedown')) {\r\n      e.stopPropagation() \r\n      $(this).removeData('mousedown') \r\n\r\n      current_input = this \r\n\r\n      showEditPopup(this) \r\n    }\r\n\r\n    e.preventDefault() \r\n  }\r\n\r\n  /**\r\n   * Cancel if mousedown was made on any input.\r\n   */\r\n  function _cancelSelection() {\r\n    editor.$el.find('input, textarea, button').removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Touch move.\r\n   */\r\n  function _inputTouchMove() {\r\n    $(this).removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Assign the input events.\r\n   */\r\n  function _bindEvents() {\r\n    editor.events.$on(editor.$el, editor._mousedown, 'input, textarea, button', _inputMouseDown) \r\n    editor.events.$on(editor.$el, editor._mouseup, 'input, textarea, button', _inputMouseUp) \r\n    editor.events.$on(editor.$el, 'touchmove', 'input, textarea, button', _inputTouchMove) \r\n    editor.events.$on(editor.$el, editor._mouseup, _cancelSelection) \r\n    editor.events.$on(editor.$win, editor._mouseup, _cancelSelection) \r\n\r\n    _initUpdatePopup(true) \r\n  }\r\n\r\n  /**\r\n   * Get the current button.\r\n   */\r\n  function getInput() {\r\n    if (current_input) return current_input \r\n\r\n    return null \r\n  }\r\n\r\n  /**\r\n   * Init the edit button popup.\r\n   */\r\n  function _initEditPopup() {\r\n\r\n    // Button edit buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formEditButtons.length > 0) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formEditButtons)}</div>` \r\n    }\r\n\r\n    const template = {\r\n      buttons: buttons\r\n    } \r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.edit', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-edit', function () {\r\n        if (getInput() && editor.popups.isVisible('forms.edit')) {\r\n          showEditPopup(getInput()) \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the edit button popup.\r\n   */\r\n  function showEditPopup(input) {\r\n    const hideEditPopups = ['checkbox', 'radio']\r\n\r\n    if (hideEditPopups.indexOf(input.type) != -1) {\r\n      return\r\n    }\r\n\r\n    let $popup = editor.popups.get('forms.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    current_input = input \r\n    const $input = $(input) \r\n\r\n    editor.popups.refresh('forms.edit') \r\n\r\n    editor.popups.setContainer('forms.edit', editor.$sc) \r\n    let left = $input.offset().left + $input.outerWidth() / 2\r\n    let top = $input.offset().top + $input.outerHeight()\r\n\r\n    editor.popups.show('forms.edit', left, top, $input.outerHeight()) \r\n  }\r\n\r\n  /**\r\n   * Refresh update button popup callback.\r\n   */\r\n  function _refreshUpdateCallback() {\r\n    const $popup = editor.popups.get('forms.update') \r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n\r\n      if ($input.is('button')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.text()) \r\n      }\r\n      else if ($input.is('input[type=button]') || $input.is('input[type=submit]') || $input.is('input[type=reset]')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.val()) \r\n      }\r\n      else {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.attr('placeholder')) \r\n      }\r\n    }\r\n\r\n    $popup.find('input[type=\"text\"][name=\"text\"]').trigger('change') \r\n  }\r\n\r\n  /**\r\n   * Hide update button popup callback.\r\n   */\r\n  function _hideUpdateCallback() {\r\n    current_input = null \r\n  }\r\n\r\n  /**\r\n   * Init update button popup.\r\n   */\r\n  function _initUpdatePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('forms.update', _refreshUpdateCallback) \r\n      editor.popups.onHide('forms.update', _hideUpdateCallback) \r\n\r\n      return true \r\n    }\r\n\r\n    // Button update buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formUpdateButtons.length >= 1) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formUpdateButtons)}</div>` \r\n    }\r\n\r\n    let text_layer = '' \r\n    let tab_idx = 0 \r\n    text_layer = `<div class=\"fr-forms-text-layer fr-layer fr-active\"> \r\n    <div class=\"fr-input-line\"><input name=\"text\" type=\"text\" placeholder=\"Text\" tabIndex=\" ${(++tab_idx)} \"></div>\r\n    <div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" data-cmd=\"updateInput\" href=\"#\" tabIndex=\"${(++tab_idx)}\" type=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: buttons,\r\n      text_layer: text_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.update', template) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the button update popup.\r\n   */\r\n  function showUpdatePopup() {\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      let $popup = editor.popups.get('forms.update') \r\n\r\n      if (!$popup) $popup = _initUpdatePopup() \r\n\r\n      if (!editor.popups.isVisible('forms.update')) {\r\n        editor.popups.refresh('forms.update') \r\n      }\r\n\r\n      editor.popups.setContainer('forms.update', editor.$sc) \r\n      let left = $input.offset().left + $input.outerWidth() / 2\r\n      let top = $input.offset().top + $input.outerHeight()\r\n      \r\n      editor.popups.show('forms.update', left, top, $input.outerHeight()) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n  function applyStyle(val, formStyles, multipleStyles) {\r\n    if (typeof formStyles === 'undefined') formStyles = editor.opts.formStyles \r\n\r\n    if (typeof multipleStyles === 'undefined') multipleStyles = editor.opts.formMultipleStyles \r\n\r\n    const input = getInput() \r\n\r\n    if (!input) return false \r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(formStyles) \r\n      styles.splice(styles.indexOf(val), 1) \r\n      $(input).removeClass(styles.join(' ')) \r\n    }\r\n\r\n    $(input).toggleClass(val) \r\n  }\r\n\r\n  /**\r\n   * Back button in update button popup.\r\n   */\r\n  function back() {\r\n    editor.events.disableBlur() \r\n    editor.selection.restore() \r\n    editor.events.enableBlur() \r\n\r\n    const input = getInput() \r\n\r\n    if (input && editor.$wp) {\r\n      if (input.tagName === 'BUTTON') editor.selection.restore() \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hit the update button in the input popup.\r\n   */\r\n  function updateInput() {\r\n    const $popup = editor.popups.get('forms.update') \r\n\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n      const inputBtns = ['button', 'submit', 'reset'] \r\n      const val = $popup.find('input[type=\"text\"][name=\"text\"]').val() || '' \r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1988\r\n      // update the text content if input is a button\r\n      if ($input.is('button')) {\r\n        if (val.length) {\r\n          $input.text(val)\r\n        }\r\n        else {\r\n          // If tag is button, Update empty text.\r\n          $input.text('\\u200B')\r\n        }\r\n      }\r\n      else if (inputBtns.indexOf(input.type) != -1 ) {\r\n        $input.attr('value', val)\r\n      }\r\n\r\n      // update the place holder if input type is text\r\n      else {\r\n        $input.attr('placeholder', val) \r\n      }\r\n\r\n      editor.popups.hide('forms.update') \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Bind input events.\r\n    _bindEvents() \r\n\r\n    // Prevent form submit.\r\n    editor.events.$on(editor.$el, 'submit', 'form', function (e) {\r\n      e.preventDefault() \r\n\r\n      return false \r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    updateInput: updateInput,\r\n    getInput: getInput,\r\n    applyStyle: applyStyle,\r\n    showUpdatePopup: showUpdatePopup,\r\n    showEditPopup: showEditPopup,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Register command to update input.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n\r\n// Link styles.\r\nFE.DefineIcon('inputStyle', { NAME: 'magic', SVG_KEY: 'inlineStyle' })\r\nFE.RegisterCommand('inputStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\">'\r\n    const { formStyles : options } = this.opts \r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        c += `<li><a class=\"fr-command\" tabIndex=\"-1\" data-cmd=\"inputStyle\" data-param1=\"${cls}\">${this.language.translate(options[cls])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      this.forms.applyStyle(val) \r\n      this.forms.showEditPopup(input) \r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const { $ } = this\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1') \r\n        $(this).toggleClass('fr-active', $input.hasClass(cls)) \r\n      })\r\n    }\r\n  }\r\n}) \r\n\r\nFE.DefineIcon('inputEdit', { NAME: 'edit', SVG_KEY: 'edit' }) \r\nFE.RegisterCommand('inputEdit', {\r\n  title: 'Edit Button',\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.showUpdatePopup() \r\n  }\r\n})\r\n\r\nFE.DefineIcon('inputBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('inputBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.back() \r\n  }\r\n}) \r\n\r\n// Register command to update button.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.fullscreen = function (editor) {\r\n  const { $ } = editor\r\n  let old_scroll\r\n\r\n  /**\r\n   * Check if fullscreen mode is active.\r\n   */\r\n  const isActive = () => editor.$box.hasClass('fr-fullscreen')\r\n\r\n  /**\r\n   * Turn fullscreen on.\r\n   */\r\n  let height\r\n  let max_height\r\n  let z_index\r\n\r\n  function _on() {\r\n    if (editor.helpers.isIOS() && editor.core.hasFocus()) {\r\n      editor.$el.blur()\r\n\r\n      setTimeout(toggle, 250)\r\n\r\n      return false\r\n    }\r\n\r\n    old_scroll = editor.helpers.scrollTop()\r\n    editor.$box.toggleClass('fr-fullscreen')\r\n    $('body').first().toggleClass('fr-fullscreen')\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.$tb.data('parent', editor.$tb.parent())\r\n      editor.$box.prepend(editor.$tb)\r\n      if (editor.$tb.data('sticky-dummy')) {\r\n        editor.$tb.after(editor.$tb.data('sticky-dummy'))\r\n      }\r\n    }\r\n\r\n    ({ height } = editor.opts );\r\n    ({ heightMax: max_height } = editor.opts );\r\n    ({ z_index } = editor.opts );\r\n\r\n    // Take second toolbar into consideration when in fullscreen mode\r\n    editor.opts.height = editor.o_win.innerHeight - (editor.opts.toolbarInline ? 0 : editor.$tb.outerHeight() + (editor.$second_tb ? editor.$second_tb.outerHeight() : 0))\r\n    editor.opts.zIndex = 2147483641\r\n    editor.opts.heightMax = null\r\n    editor.size.refresh()\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.showInline()\r\n\r\n    let $parent_node = editor.$box.parent()\r\n\r\n    while (!$parent_node.first().is('body')) {\r\n      $parent_node.addClass('fr-fullscreen-wrapper')\r\n      $parent_node = $parent_node.parent()\r\n    }\r\n\r\n    if (editor.opts.toolbarContainer) {\r\n      editor.$box.prepend(editor.$tb)\r\n    }\r\n\r\n    editor.events.trigger('charCounter.update')\r\n    editor.events.trigger('codeView.update')\r\n    editor.$win.trigger('scroll')\r\n  }\r\n\r\n  /**\r\n   * Turn fullscreen off.\r\n   */\r\n  function _off() {\r\n    if (editor.helpers.isIOS() && editor.core.hasFocus()) {\r\n      editor.$el.blur()\r\n\r\n      setTimeout(toggle, 250)\r\n\r\n      return false\r\n    }\r\n\r\n    editor.$box.toggleClass('fr-fullscreen')\r\n    $('body').first().toggleClass('fr-fullscreen')\r\n\r\n    if(editor.$tb.data('parent')) {\r\n      editor.$tb.data('parent').prepend(editor.$tb)\r\n    }\r\n\r\n    if (editor.$tb.data('sticky-dummy')) {\r\n      editor.$tb.after(editor.$tb.data('sticky-dummy'))\r\n    }\r\n\r\n    editor.opts.height = height\r\n    editor.opts.heightMax = max_height\r\n    editor.opts.zIndex = z_index\r\n    editor.size.refresh()\r\n\r\n    $(editor.o_win).scrollTop(old_scroll)\r\n\r\n    if (editor.opts.toolbarInline) editor.toolbar.showInline()\r\n\r\n    editor.events.trigger('charCounter.update')\r\n\r\n    if (editor.opts.toolbarSticky) {\r\n      if (editor.opts.toolbarStickyOffset) {\r\n        if (editor.opts.toolbarBottom) {\r\n          editor.$tb\r\n            .css('bottom', editor.opts.toolbarStickyOffset)\r\n            .data('bottom', editor.opts.toolbarStickyOffset)\r\n        }\r\n        else {\r\n          editor.$tb\r\n            .css('top', editor.opts.toolbarStickyOffset)\r\n            .data('top', editor.opts.toolbarStickyOffset)\r\n        }\r\n      }\r\n    }\r\n\r\n    let $parent_node = editor.$box.parent()\r\n\r\n    while (!$parent_node.first().is('body')) {\r\n      $parent_node.removeClass('fr-fullscreen-wrapper')\r\n      $parent_node = $parent_node.parent()\r\n    }\r\n\r\n    if (editor.opts.toolbarContainer) {\r\n      $(editor.opts.toolbarContainer).append(editor.$tb)\r\n    }\r\n\r\n    $(editor.o_win).trigger('scroll')\r\n    editor.events.trigger('codeView.update')\r\n  }\r\n\r\n  /**\r\n   * Exec fullscreen.\r\n   */\r\n  function toggle() {\r\n    if (!isActive()) {\r\n      _on()\r\n    }\r\n    else {\r\n      _off()\r\n    }\r\n\r\n    refresh(editor.$tb.find('.fr-command[data-cmd=\"fullscreen\"]'))\r\n    const moreText = editor.$tb.find('.fr-command[data-cmd=\"moreText\"]')\r\n    const moreParagraph = editor.$tb.find('.fr-command[data-cmd=\"moreParagraph\"]')\r\n    const moreRich = editor.$tb.find('.fr-command[data-cmd=\"moreRich\"]')\r\n    const moreMisc = editor.$tb.find('.fr-command[data-cmd=\"moreMisc\"]')\r\n\r\n    // Refresh the more button toolbars on fullscreen toggle for repositioning \r\n    moreText.length && editor.refresh.moreText(moreText)\r\n    moreParagraph.length && editor.refresh.moreParagraph(moreParagraph)\r\n    moreRich.length && editor.refresh.moreRich(moreRich)\r\n    moreMisc.length && editor.refresh.moreMisc(moreMisc)\r\n  }\r\n\r\n  function refresh($btn) {\r\n    const active = isActive()\r\n\r\n    $btn.toggleClass('fr-active', active).attr('aria-pressed', active)\r\n    $btn.find('> *').not('.fr-sr-only').replaceWith(!active ? editor.icon.create('fullscreen') : editor.icon.create('fullscreenCompress'))\r\n  }\r\n\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    editor.events.$on($(editor.o_win), 'resize', function () {\r\n      if (isActive()) {\r\n        _off()\r\n        _on()\r\n      }\r\n    })\r\n\r\n    editor.events.on('toolbar.hide', function () {\r\n      if (isActive() && editor.helpers.isMobile()) return false\r\n    })\r\n\r\n    editor.events.on('position.refresh', function () {\r\n      if (editor.helpers.isIOS()) {\r\n        return !isActive()\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n\r\n      // Exit full screen.\r\n      if (isActive()) {\r\n        _off()\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    toggle: toggle,\r\n    refresh: refresh,\r\n    isActive: isActive\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('fullscreen', {\r\n  title: 'Fullscreen',\r\n  undo: false,\r\n  focus: false,\r\n  accessibilityFocus: true,\r\n  forcedRefresh: true,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.fullscreen.toggle()\r\n  },\r\n  refresh: function ($btn) {\r\n    this.fullscreen.refresh($btn)\r\n  },\r\n  plugin: 'fullscreen'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('fullscreen', {\r\n  NAME: 'expand',\r\n  SVG_KEY: 'fullscreen'\r\n})\r\n\r\nFE.DefineIcon('fullscreenCompress', {\r\n  NAME: 'compress',\r\n  SVG_KEY: 'exitFullscreen'\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  helpSets: [\r\n    {\r\n      title: 'Inline Editor',\r\n      commands: [\r\n        { val: 'OSkeyE', desc: 'Show the editor' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Common actions',\r\n      commands: [\r\n        { val: 'OSkeyC', desc: 'Copy' },\r\n        { val: 'OSkeyX', desc: 'Cut' },\r\n        { val: 'OSkeyV', desc: 'Paste' },\r\n        { val: 'OSkeyZ', desc: 'Undo' },\r\n        { val: 'OSkeyShift+Z', desc: 'Redo' },\r\n        { val: 'OSkeyK', desc: 'Insert Link' },\r\n        { val: 'OSkeyP', desc: 'Insert Image' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Basic Formatting',\r\n      commands: [\r\n        { val: 'OSkeyA', desc: 'Select All' },\r\n        { val: 'OSkeyB', desc: 'Bold' },\r\n        { val: 'OSkeyI', desc: 'Italic' },\r\n        { val: 'OSkeyU', desc: 'Underline' },\r\n        { val: 'OSkeyS', desc: 'Strikethrough' },\r\n        { val: 'OSkey]', desc: 'Increase Indent' },\r\n        { val: 'OSkey[', desc: 'Decrease Indent' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Quote',\r\n      commands: [\r\n        { val: 'OSkey\\'', desc: 'Increase quote level' },\r\n        { val: 'OSkeyShift+\\'', desc: 'Decrease quote level' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Image / Video',\r\n      commands: [\r\n        { val: 'OSkey+', desc: 'Resize larger' },\r\n        { val: 'OSkey-', desc: 'Resize smaller' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Table',\r\n      commands: [\r\n        { val: 'Alt+Space', desc: 'Select table cell' },\r\n        { val: 'Shift+Left/Right arrow', desc: 'Extend selection one cell' },\r\n        { val: 'Shift+Up/Down arrow', desc: 'Extend selection one row' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Navigation',\r\n      commands: [\r\n        { val: 'OSkey/', desc: 'Shortcuts' },\r\n        { val: 'Alt+F10', desc: 'Focus popup / toolbar' },\r\n        { val: 'Esc', desc: 'Return focus to previous position' }\r\n      ]\r\n    }\r\n  ]\r\n})\r\n\r\nFE.PLUGINS.help = function (editor) {\r\n  const { $ } = editor \r\n  let $modal\r\n  const modal_id = 'help'\r\n\r\n\r\n  /*\r\n   * Init Help.\r\n   */\r\n  const _init = () => {\r\n\r\n  }\r\n\r\n  /*\r\n   * Build html body.\r\n   */\r\n  function _buildBody() {\r\n\r\n    // Begin body.\r\n    let body = '<div class=\"fr-help-modal\">'\r\n\r\n    for (let i = 0; i < editor.opts.helpSets.length; i++) {\r\n      const set = editor.opts.helpSets[i]\r\n\r\n      // Set shortcuts table.\r\n      // Begin Table.\r\n      let group = '<table>'\r\n\r\n      // Set title.\r\n      group += `<thead><tr><th>${editor.language.translate(set.title)}</th></tr></thead>`\r\n      group += '<tbody>'\r\n\r\n      // Build commands table.\r\n      for (let j = 0; j < set.commands.length; j++) {\r\n        const command = set.commands[j]\r\n        group += '<tr>'\r\n\r\n        group += `<td>${editor.language.translate(command.desc)}</td>`\r\n        group += `<td>${command.val.replace('OSkey', editor.helpers.isMac() ? '&#8984;' : 'Ctrl+')}</td>`\r\n\r\n        group += '</tr>'\r\n      }\r\n\r\n      // End table.\r\n      group += '</tbody></table>'\r\n\r\n      // Append group to body.\r\n      body += group\r\n    }\r\n\r\n    // End body.\r\n    body += '</div>'\r\n\r\n    return body\r\n  }\r\n\r\n  /*\r\n   * Show help.\r\n   */\r\n  function show() {\r\n    if (!$modal) {\r\n      const head = `<h4>${editor.language.translate('Shortcuts')}</h4>`\r\n      const body = _buildBody()\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n      $modal = modalHash.$modal\r\n\r\n      // Resize help modal on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        editor.modals.resize(modal_id)\r\n      })\r\n    }\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    // Modal may not fit window size.\r\n    editor.modals.resize(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Hide help.\r\n   */\r\n  const hide = () => {\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    show: show,\r\n    hide: hide\r\n  }\r\n}\r\n\r\nFE.DefineIcon('help', { NAME: 'question', SVG_KEY: 'help' })\r\n\r\nFE.RegisterShortcut(FE.KEYCODE.SLASH, 'help', null, '/')\r\n\r\nFE.RegisterCommand('help', {\r\n  title: 'Help',\r\n  icon: 'help',\r\n  undo: false,\r\n  focus: false,\r\n  modal: true,\r\n  callback: function () {\r\n    this.help.show()\r\n  },\r\n  plugin: 'help',\r\n  showOnMobile: false\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'image.insert': '[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]',\r\n  'image.edit': '[_BUTTONS_]',\r\n  'image.alt': '[_BUTTONS_][_ALT_LAYER_]',\r\n  'image.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  imageInsertButtons: ['imageBack', '|', 'imageUpload', 'imageByURL'],\r\n  imageEditButtons: ['imageReplace', 'imageAlign', 'imageCaption', 'imageRemove', 'imageLink', 'linkOpen', 'linkEdit', 'linkRemove', '-', 'imageDisplay', 'imageStyle', 'imageAlt', 'imageSize'],\r\n  imageAltButtons: ['imageBack', '|'],\r\n  imageSizeButtons: ['imageBack', '|'],\r\n  imageUpload: true,\r\n  imageUploadURL: null,\r\n  imageCORSProxy: 'https://cors-anywhere.froala.com',\r\n  imageUploadRemoteUrls: true,\r\n  imageUploadParam: 'file',\r\n  imageUploadParams: {},\r\n  imageUploadToS3: false,\r\n  imageUploadToAzure: false,\r\n  imageUploadMethod: 'POST',\r\n  imageMaxSize: 10 * 1024 * 1024,\r\n  imageAllowedTypes: ['jpeg', 'jpg', 'png', 'gif', 'webp'],\r\n  imageResize: true,\r\n  imageResizeWithPercent: false,\r\n  imageRoundPercent: false,\r\n  imageDefaultWidth: 300,\r\n  imageDefaultAlign: 'center',\r\n  imageDefaultDisplay: 'block',\r\n  imageSplitHTML: false,\r\n  imageStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-bordered': 'Bordered',\r\n    'fr-shadow': 'Shadow'\r\n  },\r\n  imageMove: true,\r\n  imageMultipleStyles: true,\r\n  imageTextNear: true,\r\n  imagePaste: true,\r\n  imagePasteProcess: false,\r\n  imageMinWidth: 16,\r\n  imageOutputSize: false,\r\n  imageDefaultMargin: 5,\r\n  imageAddNewLine: false\r\n})\r\n\r\nFE.PLUGINS.image = function (editor) {\r\n  const { $ } = editor\r\n  const DEFAULT_IMAGE_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $current_image\r\n  let $image_resizer\r\n  let $handler\r\n  let $overlay\r\n  let mousedown = false\r\n\r\n  const BAD_LINK = 1\r\n  const MISSING_LINK = 2\r\n  const ERROR_DURING_UPLOAD = 3\r\n  const BAD_RESPONSE = 4\r\n  const MAX_SIZE_EXCEEDED = 5\r\n  const BAD_FILE_TYPE = 6\r\n  const NO_CORS_IE = 7\r\n  const CORRUPTED_IMAGE = 8\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Image cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'Image file type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n  error_messages[CORRUPTED_IMAGE] = 'Image file is corrupted.'\r\n\r\n  /**\r\n   * Refresh the image insert popup.\r\n   */\r\n\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    const $url_input = $popup.find('.fr-image-by-url-layer input')\r\n    $url_input.val('')\r\n\r\n    if ($current_image) {\r\n      $url_input.val($current_image.attr('src'))\r\n    }\r\n\r\n    $url_input.trigger('change')\r\n  }\r\n\r\n  /**\r\n   * Show the image upload popup.\r\n   */\r\n\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertImage\"]')\r\n    let $popup = editor.popups.get('image.insert')\r\n    if (!$popup) $popup = _initInsertPopup()\r\n    hideProgressBar()\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('image.insert')\r\n      editor.popups.setContainer('image.insert', editor.$tb)\r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('image.insert', left, top, $btn.outerHeight())\r\n      }\r\n      else {\r\n        editor.position.forSelection($popup)\r\n        editor.popups.show('image.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image edit popup.\r\n   */\r\n\r\n  function _showEditPopup() {\r\n    let $popup = editor.popups.get('image.edit')\r\n\r\n    if (!$popup) $popup = _initEditPopup()\r\n\r\n    if ($popup) {\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      editor.popups.setContainer('image.edit', editor.$sc)\r\n      editor.popups.refresh('image.edit')\r\n      let left = $el.offset().left + $el.outerWidth() / 2\r\n      const top = $el.offset().top + $el.outerHeight()\r\n\r\n      // Enhancement 2950\r\n      if ($current_image.hasClass('fr-uploading')) {\r\n        showProgressBar()\r\n      }\r\n      else {\r\n        editor.popups.show('image.edit', left, top, $el.outerHeight(), true)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar()\r\n  }\r\n\r\n  /**\r\n   * Convert style to classes.\r\n   */\r\n  function _convertStyleToClasses($img) {\r\n    if ($img.parents('.fr-img-caption').length > 0) {\r\n      $img = $img.parents('.fr-img-caption').first()\r\n    }\r\n\r\n    if (!$img.hasClass('fr-dii') && !$img.hasClass('fr-dib')) {\r\n      $img.addClass(`fr-fi${getAlign($img)[0]}`)\r\n      $img.addClass(`fr-di${getDisplay($img)[0]}`)\r\n\r\n      // Reset inline style.\r\n      $img.css('margin', '')\r\n      $img.css('float', '')\r\n      $img.css('display', '')\r\n      $img.css('z-index', '')\r\n      $img.css('position', '')\r\n      $img.css('overflow', '')\r\n      $img.css('vertical-align', '')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert classes to style.\r\n   */\r\n  function _convertClassesToStyle($img) {\r\n    if ($img.parents('.fr-img-caption').length > 0) {\r\n      $img = $img.parents('.fr-img-caption').first()\r\n    }\r\n\r\n    const d = $img.hasClass('fr-dib') ? 'block' : $img.hasClass('fr-dii') ? 'inline' : null\r\n    const a = $img.hasClass('fr-fil') ? 'left' : $img.hasClass('fr-fir') ? 'right' : getAlign($img)\r\n\r\n    _setStyle($img, d, a)\r\n\r\n    $img.removeClass('fr-dib fr-dii fr-fir fr-fil')\r\n  }\r\n\r\n  /**\r\n   * Refresh the image list.\r\n   */\r\n  function _refreshImageList() {\r\n    const images = editor.el.tagName == 'IMG' ? [editor.el] : editor.el.querySelectorAll('img')\r\n\r\n    for (let i = 0; i < images.length; i++) {\r\n      const $img = $(images[i])\r\n\r\n      if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n        if (editor.opts.imageDefaultAlign || editor.opts.imageDefaultDisplay) {\r\n          _convertStyleToClasses($img)\r\n        }\r\n\r\n        // Do not allow text near image.\r\n        if (!editor.opts.imageTextNear) {\r\n          if ($img.parents('.fr-img-caption').length > 0) {\r\n            $img.parents('.fr-img-caption').first().removeClass('fr-dii').addClass('fr-dib')\r\n          }\r\n          else {\r\n            $img.removeClass('fr-dii').addClass('fr-dib')\r\n          }\r\n        }\r\n      }\r\n      else if (!editor.opts.htmlUntouched && !editor.opts.useClasses) {\r\n        if (editor.opts.imageDefaultAlign || editor.opts.imageDefaultDisplay) {\r\n          _convertClassesToStyle($img)\r\n        }\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        $img.on('load', editor.size.syncIframe)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Keep images in sync when content changed.\r\n   */\r\n  let images\r\n\r\n  function _syncImages(loaded) {\r\n\r\n    if (typeof loaded === 'undefined') loaded = true\r\n\r\n    // Get current images.\r\n    const c_images = Array.prototype.slice.call(editor.el.querySelectorAll('img'))\r\n\r\n    // Current images src.\r\n    const image_srcs = []\r\n    let i\r\n\r\n    for (i = 0; i < c_images.length; i++) {\r\n      image_srcs.push(c_images[i].getAttribute('src'))\r\n\r\n      $(c_images[i]).toggleClass('fr-draggable', editor.opts.imageMove)\r\n\r\n      if (c_images[i].getAttribute('class') === '') c_images[i].removeAttribute('class')\r\n\r\n      if (c_images[i].getAttribute('style') === '') c_images[i].removeAttribute('style')\r\n\r\n      if (c_images[i].parentNode && c_images[i].parentNode.parentNode && editor.node.hasClass(c_images[i].parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = c_images[i].parentNode.parentNode\r\n\r\n        if (!editor.browser.mozilla) {\r\n          p_node.setAttribute('contenteditable', false)\r\n        }\r\n\r\n        p_node.setAttribute('draggable', false)\r\n        p_node.classList.add('fr-draggable')\r\n\r\n        const n_node = c_images[i].nextSibling\r\n\r\n        if (n_node && !editor.browser.mozilla) {\r\n          n_node.setAttribute('contenteditable', true)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Loop previous images and check their src.\r\n    if (images) {\r\n      for (i = 0; i < images.length; i++) {\r\n        if (image_srcs.indexOf(images[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('image.removed', [$(images[i])])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Loop new images and see which were not int the old ones.\r\n    if (images && loaded) {\r\n      const old_images_srcs = []\r\n\r\n      for (i = 0; i < images.length; i++) {\r\n        old_images_srcs.push(images[i].getAttribute('src'))\r\n      }\r\n\r\n      for (i = 0; i < c_images.length; i++) {\r\n        if (old_images_srcs.indexOf(c_images[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('image.loaded', [$(c_images[i])])\r\n        }\r\n      }\r\n    }\r\n\r\n    // Current images are the old ones.\r\n    images = c_images\r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n\r\n  function _repositionResizer() {\r\n    if (!$image_resizer) _initImageResizer()\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $container = editor.$wp || editor.$sc\r\n\r\n    $container.append($image_resizer)\r\n    $image_resizer.data('instance', editor)\r\n\r\n    let wrap_correction_top = $container.scrollTop() - (($container.css('position') != 'static' ? $container.offset().top : 0))\r\n    let wrap_correction_left = $container.scrollLeft() - (($container.css('position') != 'static' ? $container.offset().left : 0))\r\n\r\n    wrap_correction_left -= editor.helpers.getPX($container.css('border-left-width'))\r\n    wrap_correction_top -= editor.helpers.getPX($container.css('border-top-width'))\r\n\r\n    if (editor.$el.is('img') && editor.$sc.is('body')) {\r\n      wrap_correction_top = 0\r\n      wrap_correction_left = 0\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let iframePaddingTop = 0\r\n    let iframePaddingLeft = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $image_resizer\r\n      .css('top', (editor.opts.iframe ? $el.offset().top + iframePaddingTop : $el.offset().top + wrap_correction_top) - 1)\r\n      .css('left', (editor.opts.iframe ? $el.offset().left + iframePaddingLeft : $el.offset().left + wrap_correction_left) - 1)\r\n      .css('width', $el.get(0).getBoundingClientRect().width)\r\n      .css('height', $el.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active')\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>`\r\n  }\r\n\r\n  /**\r\n   * Set the image with\r\n   */\r\n  function _setWidth(width) {\r\n    if (hasCaption()) {\r\n      $current_image.parents('.fr-img-caption').css('width', width)\r\n    }\r\n    else {\r\n      $current_image.css('width', width)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.$el.find('img.fr-error').left) return false\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n    // Get offset.\r\n    let start_x = e.pageX || e.originalEvent.touches[0].pageX\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n      // See if the entire editor is inside iframe to adjust starting offset.\r\n      const oel = editor.$oel.get(0)\r\n      const doc = oel.ownerDocument\r\n      const win = doc.defaultView || doc.parentWindow\r\n      let editor_inside_iframe = false\r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE))\r\n      } catch (ex) { }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        start_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft\r\n      }\r\n    }\r\n\r\n    $handler = $(this)\r\n    $handler.data('start-x', start_x)\r\n    $handler.data('start-width', $current_image.width())\r\n    $handler.data('start-height', $current_image.height())\r\n\r\n    // Set current width.\r\n    let width = $current_image.width()\r\n\r\n    // Update width value if resizing with percent.\r\n    if (editor.opts.imageResizeWithPercent) {\r\n      const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n      width = (width / $(p_node).outerWidth() * 100).toFixed(2) + '%'\r\n    }\r\n\r\n    // Set the image width.\r\n    _setWidth(width)\r\n\r\n    $overlay.show()\r\n\r\n    editor.popups.hideAll()\r\n\r\n    _unmarkExit()\r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n    let real_image_size\r\n\r\n    if ($handler && $current_image) {\r\n      e.preventDefault()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null)\r\n\r\n      if (!c_x) return false\r\n\r\n      const s_x = $handler.data('start-x')\r\n      let diff_x = c_x - s_x\r\n      let width = $handler.data('start-width')\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x\r\n      }\r\n\r\n      if (editor.opts.imageResizeWithPercent) {\r\n        const p_node = $current_image.parentsUntil(editor.$el, editor.html.blockTagsQuery()).get(0) || editor.el\r\n        width = ((width + diff_x) / $(p_node).outerWidth() * 100).toFixed(2)\r\n\r\n        if (editor.opts.imageRoundPercent) width = Math.round(width)\r\n\r\n        // Set the image width.\r\n        _setWidth(`${width}%`)\r\n\r\n        // Get the real image width after resize.\r\n        if (hasCaption()) {\r\n          real_image_size = (editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n        else {\r\n          real_image_size = (editor.helpers.getPX($current_image.css('width')) / $(p_node).outerWidth() * 100).toFixed(2)\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width && !editor.opts.imageRoundPercent) {\r\n          _setWidth(`${real_image_size}%`)\r\n        }\r\n\r\n        $current_image.css('height', '').removeAttr('height')\r\n      }\r\n      else {\r\n        if (width + diff_x >= editor.opts.imageMinWidth) {\r\n          // Set width for image parent node as well.\r\n          _setWidth(width + diff_x)\r\n\r\n          // Get the real image width after resize.\r\n          if (hasCaption()) {\r\n            real_image_size = editor.helpers.getPX($current_image.parents('.fr-img-caption').css('width'))\r\n          }\r\n          else {\r\n            real_image_size = editor.helpers.getPX($current_image.css('width'))\r\n          }\r\n        }\r\n\r\n        // If the width is not contained within editor use the real image size.\r\n        if (real_image_size !== width + diff_x) {\r\n          _setWidth(real_image_size)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1963.\r\n        if (($current_image.attr('style') || '').match(/(^height:)|(; *height:)/) || $current_image.attr('height')) {\r\n          $current_image.css('height', $handler.data('start-height') * $current_image.width() / $handler.data('start-width'))\r\n          $current_image.removeAttr('height')\r\n        }\r\n      }\r\n\r\n      _repositionResizer()\r\n\r\n      editor.events.trigger('image.resize', [get()])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($image_resizer)) return true\r\n\r\n    if ($handler && $current_image) {\r\n      if (e) e.stopPropagation()\r\n\r\n      if (editor.$el.find('img.fr-error').left) return false\r\n\r\n      $handler = null\r\n      $overlay.hide()\r\n      _repositionResizer()\r\n      _showEditPopup()\r\n\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('image.resizeEnd', [get()])\r\n    }\r\n    else{ //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n      $image_resizer.removeClass('fr-active')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n\r\n  function _throwError(code, response, $img) {\r\n    editor.edit.on()\r\n\r\n    if ($current_image) $current_image.addClass('fr-error')\r\n    // https://github.com/froala/wysiwyg-editor/issues/3407\r\n    if (error_messages[code]) {\r\n      _showErrorMessage(editor.language.translate(error_messages[code]))\r\n    }\r\n    else {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'))\r\n    }\r\n\r\n    // Remove image if it exists.\r\n    if (!$current_image && $img) remove($img)\r\n\r\n    editor.events.trigger('image.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response,\r\n    $img\r\n    ])\r\n  }\r\n\r\n  /**\r\n   * Init the image edit popup.\r\n   */\r\n\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      if (editor.$wp) {\r\n        editor.events.$on(editor.$wp, 'scroll.image-edit', function () {\r\n          if ($current_image && editor.popups.isVisible('image.edit')) {\r\n            editor.events.disableBlur()\r\n            _showEditPopup()\r\n          }\r\n        })\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    if (editor.opts.imageEditButtons.length > 0) {\r\n\r\n      image_buttons += `<div class=\"fr-buttons\"> \r\n        ${editor.button.buildList(editor.opts.imageEditButtons)}\r\n        </div>`\r\n\r\n      const template = {\r\n        buttons: image_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('image.edit', template)\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('image.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive')\r\n    $popup.find('.fr-image-progress-bar-layer').addClass('fr-active')\r\n    $popup.find('.fr-buttons').hide()\r\n\r\n    if ($current_image) {\r\n      const $el = getEl()\r\n\r\n      editor.popups.setContainer('image.insert', editor.$sc)\r\n      const left = $el.offset().left\r\n      const top = $el.offset().top + $el.height()\r\n\r\n      editor.popups.show('image.insert', left, top, $el.outerHeight())\r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive')\r\n      $popup.find('.fr-image-progress-bar-layer').removeClass('fr-active')\r\n      $popup.find('.fr-buttons').show()\r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('img.fr-error').length) {\r\n        editor.events.focus()\r\n\r\n        if (editor.$el.find('img.fr-error').length) {\r\n          editor.$el.find('img.fr-error').remove()\r\n          editor.undo.saveStep()\r\n          editor.undo.run()\r\n          editor.undo.dropRedo()\r\n        }\r\n\r\n        if (!editor.$wp && $current_image) {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n        editor.popups.hide('image.insert')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-image-progress-bar-layer')\r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : ''))\r\n\r\n      $layer.removeClass('fr-error')\r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate')\r\n        $layer.find('div > span').css('width', `${progress}%`)\r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar()\r\n    const $popup = editor.popups.get('image.insert')\r\n    const $layer = $popup.find('.fr-image-progress-bar-layer')\r\n    $layer.addClass('fr-error')\r\n    const $message_header = $layer.find('h3')\r\n    $message_header.text(message)\r\n    editor.events.disableBlur()\r\n    $message_header.focus()\r\n  }\r\n\r\n  /**\r\n   * Insert image using URL callback.\r\n   */\r\n\r\n  function insertByURL() {\r\n    const $popup = editor.popups.get('image.insert')\r\n    const $input = $popup.find('.fr-image-by-url-layer input')\r\n\r\n    if ($input.val().length > 0) {\r\n      showProgressBar()\r\n      _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n      const img_url = $input.val().trim()\r\n\r\n      // Upload images if we should upload them.\r\n      if (editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy && editor.opts.imageUpload) {\r\n        const xhr = new XMLHttpRequest()\r\n        xhr.onload = function () {\r\n\r\n          if (this.status == 200) {\r\n\r\n            upload([new Blob([this.response], {\r\n              type: this.response.type || 'image/png'\r\n            })], $current_image)\r\n          }\r\n          else {\r\n            _throwError(BAD_LINK)\r\n          }\r\n        }\r\n\r\n        // If image couldn't be uploaded, insert as it is.\r\n        xhr.onerror = function () {\r\n          insert(img_url, true, [], $current_image)\r\n        }\r\n\r\n        xhr.open('GET', `${editor.opts.imageCORSProxy}/${img_url}`, true)\r\n        xhr.responseType = 'blob'\r\n\r\n        xhr.send()\r\n      }\r\n      else {\r\n        insert(img_url, true, [], $current_image)\r\n      }\r\n\r\n      $input.val('')\r\n      $input.blur()\r\n    }\r\n  }\r\n\r\n  function _editImg($img) {\r\n    _edit.call($img.get(0))\r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $img = $(this)\r\n\r\n    editor.popups.hide('image.insert')\r\n\r\n    $img.removeClass('fr-uploading')\r\n\r\n    // Select the image.\r\n    if ($img.next().is('br')) {\r\n      $img.next().remove()\r\n    }\r\n\r\n    _editImg($img)\r\n\r\n    editor.events.trigger('image.loaded', [$img])\r\n  }\r\n\r\n  /**\r\n   * Insert image into the editor.\r\n   */\r\n\r\n  function insert(link, sanitize, data, $existing_img, response) {\r\n\r\n    if ($existing_img && typeof $existing_img === 'string') {\r\n      $existing_img = editor.$($existing_img)\r\n    }\r\n\r\n    editor.edit.off()\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link)\r\n\r\n    const image = new Image()\r\n\r\n    image.onload = function () {\r\n      let $img\r\n      let attr\r\n\r\n      if ($existing_img) {\r\n        if (!editor.undo.canDo() && !$existing_img.hasClass('fr-uploading')) editor.undo.saveStep()\r\n\r\n        let old_src = $existing_img.data('fr-old-src')\r\n\r\n        if ($existing_img.data('fr-image-pasted')) {\r\n          old_src = null\r\n        }\r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing image.\r\n          $img = $existing_img.clone()\r\n            .removeData('fr-old-src')\r\n            .removeClass('fr-uploading')\r\n            .removeAttr('data-fr-image-pasted')\r\n\r\n          // Remove load event.\r\n          $img.off('load')\r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_img.attr('src', old_src)\r\n\r\n          // Replace existing image with its clone.\r\n          $existing_img.replaceWith($img)\r\n\r\n        }\r\n        else {\r\n          $img = $existing_img\r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $img.get(0).attributes\r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i]\r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n          // Remove any other property, if it is existing with new image also.\r\n\r\n          else if(data && data.hasOwnProperty(att.nodeName)) {\r\n            $img.removeAttr(att.nodeName)\r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n                $img.attr(`${attr}`, data[attr])\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $img.on('load', _loadedCallback)\r\n        $img.attr('src', link)\r\n        editor.edit.on()\r\n        _syncImages(false)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger(old_src ? 'image.replaced' : 'image.inserted', [$img, response])\r\n      }\r\n      else {\r\n        $img = _addImage(link, data, _loadedCallback)\r\n        _syncImages(false)\r\n        editor.undo.saveStep()\r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.events.disableBlur()\r\n        editor.$el.blur()\r\n        editor.events.trigger('image.inserted', [$img, response])\r\n      }\r\n    }\r\n\r\n    image.onerror = function () {\r\n      _throwError(BAD_LINK)\r\n    }\r\n\r\n    showProgressBar(editor.language.translate('Loading image'))\r\n\r\n    image.src = link\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('image.uploaded', [response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n      const resp = JSON.parse(response)\r\n\r\n      if (resp.link) {\r\n\r\n        return resp\r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response)\r\n\r\n        return false\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse image response.\r\n   */\r\n\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text()\r\n      const key = $(response).find('Key').text()\r\n\r\n      if (editor.events.trigger('image.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on()\r\n\r\n        return false\r\n      }\r\n\r\n      return link\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _imageUploaded($img, url, key) {\r\n    _setProgressMessage(editor.language.translate('Loading image'))\r\n    const { status } = this\r\n    const { response } = this\r\n    const { responseXML } = this\r\n    const { responseText } = this\r\n\r\n    try {\r\n      if (editor.opts.imageUploadToS3 || editor.opts.imageUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.imageUploadToAzure) {\r\n            if (editor.events.trigger('image.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          }\r\n\r\n          if (link) {\r\n            insert(link, false, [], $img, response || responseXML)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML, $img)\r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText)\r\n\r\n          if (resp) {\r\n            insert(resp.link, false, resp, $img, response || responseText)\r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText, $img)\r\n        }\r\n      }\r\n    } catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText, $img)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image upload error.\r\n   */\r\n\r\n  function _imageUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML)\r\n  }\r\n\r\n  /**\r\n   * Image upload progress.\r\n   */\r\n\r\n  function _imageUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0)\r\n      _setProgressMessage(editor.language.translate('Uploading'), complete)\r\n    }\r\n  }\r\n\r\n  function _addImage(link, data, loadCallback) {\r\n\r\n    // Build image data string.\r\n    let data_str = ''\r\n    let attr\r\n    const $img = $(document.createElement('img')).attr('src', link)\r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2649\r\n            $img.attr(`${attr}`, data[attr])\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = (editor.opts.imageResizeWithPercent ? '100%' : `${width}px`)\r\n    }\r\n\r\n    // Create image object and set the load event.\r\n    $img.attr('style', (width ? `width: ${width};` : ''))\r\n    _setStyle($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n\r\n    $img.on('load', loadCallback)\r\n\r\n    // Image might be corrupted. Continue upload flow.\r\n    $img.on('error', loadCallback)\r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on()\r\n    editor.events.focus(true)\r\n    editor.selection.restore()\r\n    editor.undo.saveStep()\r\n\r\n    // Insert marker and then replace it with the image.\r\n    if (editor.opts.imageSplitHTML) {\r\n      editor.markers.split()\r\n    }\r\n    else {\r\n      editor.markers.insert()\r\n    }\r\n\r\n    editor.html.wrap()\r\n    const $marker = editor.$el.find('.fr-marker')\r\n\r\n    if ($marker.length) {\r\n\r\n      // Do not insert image in HR.\r\n      if ($marker.parent().is('hr')) {\r\n        $marker.parent().after($marker)\r\n      }\r\n\r\n      // Do not insert image inside emoticon.\r\n      if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n        $marker.insertAfter($marker.parent())\r\n      }\r\n\r\n      $marker.replaceWith($img)\r\n    }\r\n    else {\r\n      editor.$el.append($img)\r\n    }\r\n\r\n    editor.selection.clear()\r\n\r\n    return $img\r\n  }\r\n\r\n  /**\r\n   * Image upload aborted.\r\n   */\r\n  function _imageUploadAborted() {\r\n    editor.edit.on()\r\n    hideProgressBar(true)\r\n  }\r\n\r\n  /**\r\n   * Start the uploading process.\r\n   */\r\n  function _startUpload(xhr, form_data, image, $image_placeholder, url, key) {\r\n    function _sendRequest() {\r\n      const $img = $(this)\r\n      $img.off('load')\r\n      $img.addClass('fr-uploading')\r\n\r\n      if ($img.next().is('br')) {\r\n        $img.next().remove()\r\n      }\r\n\r\n      editor.placeholder.refresh()\r\n\r\n      // Select the image.\r\n      _editImg($img)\r\n      _repositionResizer()\r\n      showProgressBar()\r\n      editor.edit.off()\r\n\r\n      // Set upload events.\r\n      xhr.onload = function () {\r\n        _imageUploaded.call(xhr, $img, url, key)\r\n      }\r\n      xhr.onerror = _imageUploadError\r\n      xhr.upload.onprogress = _imageUploadProgress\r\n      xhr.onabort = _imageUploadAborted\r\n\r\n      // Set abort event.\r\n      $($img.off('abortUpload')).on('abortUpload', function () {\r\n        if (xhr.readyState != 4) {\r\n          xhr.abort()\r\n\r\n          if (!$image_placeholder) {\r\n            $img.remove()\r\n          }\r\n          else {\r\n            $image_placeholder.attr('src', $image_placeholder.data('fr-old-src'))\r\n            $image_placeholder.removeClass('fr-uploading')\r\n          }\r\n          _exitEdit(true)\r\n        }\r\n      })\r\n\r\n      // Send data.\r\n      xhr.send(editor.opts.imageUploadToAzure ? image : form_data)\r\n    }\r\n\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert image to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: 'image/jpeg'\r\n        }))\r\n      }\r\n\r\n      // No image.\r\n      if (!$image_placeholder) {\r\n        _addImage(link, null, _sendRequest)\r\n      }\r\n      else {\r\n        $image_placeholder.on('load', _sendRequest)\r\n\r\n        // Image might be corrupted.\r\n        $image_placeholder.on('error', function () {\r\n          _sendRequest()\r\n          $(this).off('error')\r\n        })\r\n\r\n        editor.edit.on()\r\n        editor.undo.saveStep()\r\n        $image_placeholder.data('fr-old-src', $image_placeholder.attr('src'))\r\n        $image_placeholder.attr('src', link)\r\n      }\r\n    }\r\n\r\n    reader.readAsDataURL(image)\r\n  }\r\n\r\n  function _browserUpload(image, $image_placeholder) {\r\n    const reader = new FileReader()\r\n\r\n    reader.onload = function () {\r\n      let link = reader.result\r\n\r\n      if (reader.result.indexOf('svg+xml') < 0) {\r\n\r\n        // Convert image to local blob.\r\n        const binary = atob(reader.result.split(',')[1])\r\n        const array = []\r\n\r\n        for (let i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i))\r\n        }\r\n\r\n        // Get local image link.\r\n        link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n          type: image.type\r\n        }))\r\n\r\n        // If the $image_placeholder exists, set the data property 'fr-old-src' to identify/trigger the replace\r\n        if ($image_placeholder) {\r\n          $image_placeholder.data('fr-old-src', $image_placeholder.attr('src'))\r\n        }\r\n\r\n        editor.image.insert(link, false, null, $image_placeholder)\r\n      }\r\n    }\r\n\r\n    showProgressBar()\r\n\r\n    reader.readAsDataURL(image)\r\n  }\r\n\r\n  /**\r\n   * Do image upload.\r\n   */\r\n\r\n  function upload(images, $image_placeholder) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof images != 'undefined' && images.length > 0) {\r\n\r\n      // Check if we should cancel the image upload.\r\n      if (editor.events.trigger('image.beforeUpload', [images, $image_placeholder]) === false) {\r\n\r\n        return false\r\n      }\r\n      const image = images[0]\r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.imageUploadURL === null || editor.opts.imageUploadURL == DEFAULT_IMAGE_UPLOAD_URL) && !editor.opts.imageUploadToS3 && !editor.opts.imageUploadToAzure) {\r\n        _browserUpload(image, $image_placeholder || $current_image)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check if there is image name set.\r\n      if (!image.name) {\r\n        image.name = (new Date()).getTime() + '.' + (image.type || 'image/jpeg').replace(/image\\//g, '')\r\n      }\r\n\r\n      // Check image max size.\r\n      if (image.size > editor.opts.imageMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED)\r\n\r\n        return false\r\n      }\r\n\r\n      // Check image types.\r\n      if (editor.opts.imageAllowedTypes.indexOf(image.type.replace(/image\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE)\r\n\r\n        return false\r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data\r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null\r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key\r\n\r\n        // Upload to S3.\r\n        if (editor.opts.imageUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.imageUploadToS3.keyStart + (new Date()).getTime() + '-' + (image.name || 'untitled'))\r\n          form_data.append('success_action_status', '201')\r\n          form_data.append('X-Requested-With', 'xhr')\r\n          form_data.append('Content-Type', image.type)\r\n\r\n          for (key in editor.opts.imageUploadToS3.params) {\r\n            if (editor.opts.imageUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.imageUploadToS3.params[key])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.imageUploadParams) {\r\n          if (editor.opts.imageUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.imageUploadParams[key])\r\n          }\r\n        }\r\n\r\n        // Set the image in the request.\r\n        form_data.append(editor.opts.imageUploadParam, image, image.name)\r\n\r\n        // Create XHR request.\r\n        let url = editor.opts.imageUploadURL\r\n        let imageURL\r\n        let azureKey\r\n        let imageUploadMethod = editor.opts.imageUploadMethod\r\n        if (editor.opts.imageUploadToS3) {\r\n          if (editor.opts.imageUploadToS3.uploadURL) {\r\n            url = editor.opts.imageUploadToS3.uploadURL\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.imageUploadToS3.region}.amazonaws.com/${editor.opts.imageUploadToS3.bucket}`\r\n          }\r\n        }\r\n        if (editor.opts.imageUploadToAzure) {\r\n          if (editor.opts.imageUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.imageUploadToAzure.uploadURL}/${image.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.imageUploadToAzure.account}.blob.core.windows.net/${editor.opts.imageUploadToAzure.container}/${image.name}`)\r\n          }\r\n          imageURL = url\r\n          if (editor.opts.imageUploadToAzure.SASToken) {\r\n            url +=  editor.opts.imageUploadToAzure.SASToken\r\n          }\r\n          imageUploadMethod = 'PUT'\r\n        }\r\n        const xhr = editor.core.getXHR(url, imageUploadMethod)\r\n        if (editor.opts.imageUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.imageUploadToAzure.SASToken && editor.opts.imageUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.imageUploadToAzure.account\r\n            let azureContainer = editor.opts.imageUploadToAzure.container\r\n            if(editor.opts.imageUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.imageUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + image.name)\r\n            let stringToSign = imageUploadMethod + '\\n\\n\\n' + image.size + '\\n\\n' + image.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.imageUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", image.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.imageUploadParams) {\r\n            if (editor.opts.imageUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.imageUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.imageUploadToAzure.params) {\r\n            if (editor.opts.imageUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.imageUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        _startUpload(xhr, form_data, image, $image_placeholder || $current_image, imageURL, azureKey)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Image drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-image-upload-layer', function (e) {\r\n    $(this).addClass('fr-drop')\r\n\r\n    if (editor.browser.msie || editor.browser.edge) {\r\n      e.preventDefault()\r\n    }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-image-upload-layer', function (e) {\r\n      $(this).removeClass('fr-drop')\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      return false\r\n    }, true)\r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-image-upload-layer', function (e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      $(this).removeClass('fr-drop')\r\n      const dt = e.originalEvent.dataTransfer\r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor\r\n        inst.events.disableBlur()\r\n        inst.image.upload(dt.files)\r\n        inst.events.enableBlur()\r\n      }\r\n    }, true)\r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-image-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click')\r\n      }, true)\r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-image-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        inst.events.disableBlur()\r\n        $popup.find('input:focus').blur()\r\n        inst.events.enableBlur()\r\n\r\n        inst.image.upload(this.files, $current_image)\r\n      }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('')\r\n    }, true)\r\n  }\r\n\r\n  function _beforeElementDrop($el) {\r\n    if ($el.is('img') && $el.parents('.fr-img-caption').length > 0) {\r\n      return $el.parents('.fr-img-caption')\r\n    }\r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const dt = e.originalEvent.dataTransfer\r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const img = dt.files[0]\r\n\r\n      if (img && img.type && img.type.indexOf('image') !== -1 && editor.opts.imageAllowedTypes.indexOf(img.type.replace(/image\\//g, '')) >= 0) {\r\n        if (!editor.opts.imageUpload) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n\r\n        editor.markers.remove()\r\n        editor.markers.insertAtPoint(e.originalEvent)\r\n\r\n        editor.$el.find('.fr-marker').replaceWith(FE.MARKERS)\r\n\r\n        if (editor.$el.find('.fr-marker').length === 0) {\r\n          editor.selection.setAtEnd(editor.el)\r\n        }\r\n\r\n        // Hide popups.\r\n        editor.popups.hideAll()\r\n\r\n        // Show the image insert popup.\r\n        let $popup = editor.popups.get('image.insert')\r\n\r\n        if (!$popup) $popup = _initInsertPopup()\r\n        editor.popups.setContainer('image.insert', editor.$sc)\r\n\r\n        let left = e.originalEvent.pageX\r\n        let top = e.originalEvent.pageY\r\n\r\n        if (editor.opts.iframe) {\r\n          const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n          const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n          top += editor.$iframe.offset().top + iframePaddingTop\r\n          left += editor.$iframe.offset().left + iframePaddingLeft\r\n        }\r\n\r\n        editor.popups.show('image.insert', left, top)\r\n        showProgressBar()\r\n\r\n        // Dropped file is an image that we allow.\r\n        if (editor.opts.imageAllowedTypes.indexOf(img.type.replace(/image\\//g, '')) >= 0) {\r\n\r\n          // Image might be selected.\r\n          _exitEdit(true)\r\n\r\n          // Upload images.\r\n          upload(dt.files)\r\n        }\r\n        else {\r\n          _throwError(BAD_FILE_TYPE)\r\n        }\r\n\r\n        // Cancel anything else.\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initEvents() {\r\n\r\n    // Mouse down on image. It might start move.\r\n    editor.events.$on(editor.$el, editor._mousedown, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (!editor.helpers.isMobile()) editor.selection.clear()\r\n\r\n      mousedown = true\r\n\r\n      if (editor.popups.areVisible()) editor.events.disableBlur()\r\n\r\n      // Prevent the image resizing.\r\n      if (editor.browser.msie) {\r\n        editor.events.disableBlur()\r\n        editor.$el.attr('contenteditable', false)\r\n      }\r\n\r\n      if (!editor.draggable && e.type != 'touchstart') e.preventDefault()\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, editor._mousedown, '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      if (!editor.core.hasFocus()) {\r\n        editor.events.focus()\r\n      }\r\n\r\n      e.stopPropagation()\r\n    })\r\n    editor.events.$on(editor.$el, 'paste', '.fr-img-caption .fr-inner', function (e) {\r\n\r\n      editor.toolbar.hide()\r\n   \r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse up on an image prevent move.\r\n    editor.events.$on(editor.$el, editor._mouseup, editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function (e) {\r\n      if ($(this).parents('contenteditable').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      if (mousedown) {\r\n        mousedown = false\r\n\r\n        // Remove moving class.\r\n        e.stopPropagation()\r\n\r\n        if (editor.browser.msie) {\r\n          editor.$el.attr('contenteditable', true)\r\n          editor.events.enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Show image popup when it was selected.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.shiftKey && editor.selection.text().replace(/\\n/g, '') === '' && editor.keys.isArrow(e.which)) {\r\n        const s_el = editor.selection.element()\r\n        const e_el = editor.selection.endElement()\r\n\r\n        if (s_el && s_el.tagName == 'IMG') {\r\n          _editImg($(s_el))\r\n        }\r\n        else if (e_el && e_el.tagName == 'IMG') {\r\n          _editImg($(e_el))\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop)\r\n    editor.events.on('element.beforeDrop', _beforeElementDrop)\r\n\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1916\r\n    editor.events.on('mousedown window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    editor.events.on('mouseup window.mouseup', function () {\r\n      if ($current_image) {\r\n        _exitEdit()\r\n\r\n        return false\r\n      }\r\n\r\n      _unmarkExit()\r\n    })\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit()\r\n      }\r\n    })\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.opts.iframe) {\r\n        editor.size.syncIframe()\r\n      }\r\n    })\r\n\r\n    editor.events.on('blur image.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      mousedown = false\r\n      _exitEdit(true)\r\n    })\r\n\r\n    editor.events.on('modals.hide', function () {\r\n      if ($current_image) {\r\n        _selectImage()\r\n        editor.selection.clear()\r\n      }\r\n    })\r\n\r\n    editor.events.on('image.resizeEnd', function () {\r\n      if (editor.win.getSelection) {\r\n        _editImg($current_image)\r\n      }\r\n    })\r\n\r\n    // Add new line after image is inserted.\r\n    if (editor.opts.imageAddNewLine) {\r\n      editor.events.on('image.inserted', function ($img) {\r\n        let lastNode = $img.get(0)\r\n\r\n        // Ignore first BR after image.\r\n        if (lastNode.nextSibling && lastNode.nextSibling.tagName === 'BR') lastNode = lastNode.nextSibling;\r\n\r\n        // Look upper nodes.\r\n        while (lastNode && !editor.node.isElement(lastNode)) {\r\n          if (!editor.node.isLastSibling(lastNode)) {\r\n            lastNode = null;\r\n          }\r\n          else {\r\n            lastNode = lastNode.parentNode;\r\n          }\r\n        }\r\n\r\n        // If node is element, then image is last element.\r\n        if (editor.node.isElement(lastNode)) {\r\n\r\n          // ENTER_BR mode.\r\n          if (editor.opts.enter === FE.ENTER_BR) {\r\n            $img.after('<br>');\r\n          }\r\n          else {\r\n            let $parent = $(editor.node.blockParent($img.get(0)));\r\n\r\n            $parent.after(`<${editor.html.defaultTag()}><br></${editor.html.defaultTag()}>`);\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.insert', _refreshInsertPopup)\r\n      editor.popups.onHide('image.insert', _hideInsertPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    let active\r\n    let $popup\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/2987\r\n\r\n    if (!editor.opts.imageUpload && editor.opts.imageInsertButtons.indexOf('imageUpload') !== -1) {\r\n      editor.opts.imageInsertButtons.splice(editor.opts.imageInsertButtons.indexOf('imageUpload'), 1)\r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.imageInsertButtons)\r\n\r\n    if (buttonList !== '') {\r\n      image_buttons = `<div class=\"fr-buttons fr-tabs\">${buttonList}</div>`\r\n    }\r\n\r\n    const uploadIndex = editor.opts.imageInsertButtons.indexOf('imageUpload')\r\n    const urlIndex = editor.opts.imageInsertButtons.indexOf('imageByURL')\r\n\r\n    // Image upload layer.\r\n    let upload_layer = ''\r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (urlIndex >= 0 && uploadIndex > urlIndex) {\r\n        active = ''\r\n      }\r\n\r\n      upload_layer = `<div class=\"fr-image-upload-layer${active} fr-layer\" id=\"fr-image-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop image')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" accept=\"image/${editor.opts.imageAllowedTypes.join(', image/').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-image-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n    // Image by url layer.\r\n    let by_url_layer = ''\r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active'\r\n\r\n      if (uploadIndex >= 0 && urlIndex > uploadIndex) {\r\n        active = ''\r\n      }\r\n\r\n      by_url_layer = `<div class=\"fr-image-by-url-layer${active} fr-layer\" id=\"fr-image-by-url-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"http://\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = '<div class=\"fr-image-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"imageDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      upload_layer: upload_layer,\r\n      by_url_layer: by_url_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    if (editor.opts.imageInsertButtons.length >= 1) {\r\n      $popup = editor.popups.create('image.insert', template)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        if ($current_image && editor.popups.isVisible('image.insert')) {\r\n          replace()\r\n        }\r\n      })\r\n    }\r\n\r\n    _bindInsertEvents($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n\r\n  /**\r\n   * Refresh the ALT popup.\r\n   */\r\n\r\n  function _refreshAltPopup() {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $popup.find('input').val($current_image.attr('alt') || '').trigger('change')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the ALT popup.\r\n   */\r\n\r\n  function showAltPopup() {\r\n    let $popup = editor.popups.get('image.alt')\r\n\r\n    if (!$popup) $popup = _initAltPopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.alt')\r\n    editor.popups.setContainer('image.alt', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.alt', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initAltPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.alt', _refreshAltPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageAltButtons)}</div>`\r\n\r\n    // Image by url layer.\r\n    let alt_layer = ''\r\n    alt_layer = `<div class=\"fr-image-alt-layer fr-layer fr-active\" id=\"fr-image-alt-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-image-alt-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Alternative Text')}\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetAlt\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      alt_layer: alt_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.alt', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-alt', function () {\r\n        if ($current_image && editor.popups.isVisible('image.alt')) {\r\n          showAltPopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set ALT based on the values from the popup.\r\n   */\r\n\r\n  function setAlt(alt) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.alt')\r\n      $current_image.attr('alt', alt || $popup.find('input').val() || '')\r\n      $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n\r\n  // Issue 2845\r\n\r\n  function _refreshSizePopup() {\r\n    const $popup = editor.popups.get('image.size')\r\n    const $popup_height_val = $current_image.get(0).style.height ? $current_image.get(0).style.height : 'auto'\r\n    const $popup_width_val = $current_image.get(0).style.width ? $current_image.get(0).style.width : 'auto'\r\n    if ($current_image) {\r\n\r\n      if (hasCaption()) {\r\n        let $el = $current_image.parent()\r\n\r\n        if (!($el.get(0).style.width)) {\r\n          $el = $current_image.parent().parent()\r\n        }\r\n        $popup.find('input[name=\"width\"]').val($popup_width_val).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($popup_height_val).trigger('change')\r\n      }\r\n      else {\r\n        $popup.find('input[name=\"width\"]').val($popup_width_val).trigger('change')\r\n        $popup.find('input[name=\"height\"]').val($popup_height_val).trigger('change')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('image.size')\r\n\r\n    if (!$popup) $popup = _initSizePopup()\r\n    hideProgressBar()\r\n    editor.popups.refresh('image.size')\r\n    editor.popups.setContainer('image.size', editor.$sc)\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.size', left, top, $el.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the image upload popup.\r\n   */\r\n\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('image.size', _refreshSizePopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Image buttons.\r\n    let image_buttons = ''\r\n    image_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.imageSizeButtons)}</div>`\r\n\r\n    // Size layer.\r\n    let size_layer = ''\r\n    size_layer = `<div class=\"fr-image-size-layer fr-layer fr-active\" id=\"fr-image-size-layer-${editor.id}\"><div class=\"fr-image-group\"><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-width-'${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-image-size-layer-height${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"imageSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: image_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('image.size', template)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.image-size', function () {\r\n        if ($current_image && editor.popups.isVisible('image.size')) {\r\n          showSizePopup()\r\n        }\r\n      })\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current image size.\r\n   */\r\n\r\n  function setSize(width, height) {\r\n    if ($current_image) {\r\n      const $popup = editor.popups.get('image.size')\r\n      width = width || $popup.find('input[name=\"width\"]').val() || ''\r\n      height = height || $popup.find('input[name=\"height\"]').val() || ''\r\n      const regex = /^[\\d]+((px)|%)*$/g\r\n\r\n      $current_image.removeAttr('width').removeAttr('height')\r\n\r\n      if (width.match(regex)) $current_image.css('width', width)\r\n      else $current_image.css('width', '')\r\n\r\n      if (height.match(regex)) $current_image.css('height', height)\r\n      else $current_image.css('height', '')\r\n\r\n      if (hasCaption()) {\r\n        $current_image.parents('.fr-img-caption').removeAttr('width').removeAttr('height')\r\n\r\n        if (width.match(regex)) $current_image.parents('.fr-img-caption').css('width', width)\r\n        else $current_image.parents('.fr-img-caption').css('width', '')\r\n\r\n        if (height.match(regex)) $current_image.parents('.fr-img-caption').css('height', height)\r\n        else $current_image.parents('.fr-img-caption').css('height', '')\r\n      }\r\n\r\n      if ($popup) $popup.find('input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the image upload layer.\r\n   */\r\n\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('image.insert')\r\n\r\n    let left\r\n    let top\r\n\r\n    // Click on the button from the toolbar without image selected.\r\n    if (!$current_image && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertImage\"]')\r\n      left = $btn.offset().left\r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10)\r\n    }\r\n\r\n    // Image is selected.\r\n    else if ($current_image) {\r\n\r\n      let $el = getEl()\r\n\r\n      if (hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap')\r\n      }\r\n\r\n      // Set the top to the bottom of the image.\r\n      top = $el.offset().top + $el.outerHeight()\r\n      left = $el.offset().left\r\n    }\r\n\r\n    // Image is selected and we are in inline mode.\r\n    if (!$current_image && editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top'))\r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight()\r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active')\r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active')\r\n\r\n    editor.popups.show('image.insert', left, top, ($current_image ? $current_image.outerHeight() : 0))\r\n    editor.accessibility.focusPopup($popup)\r\n  }\r\n\r\n  /**\r\n   * Refresh the upload image button.\r\n   */\r\n\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('image.insert')\r\n    if ($popup && $popup.find('.fr-image-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('image.insert')\r\n    if ($popup && $popup.find('.fr-image-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true)\r\n    }\r\n  }\r\n\r\n  function _resizeImage(e, initPageX, direction, step) {\r\n    e.pageX = initPageX\r\n    _handlerMousedown.call(this, e)\r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step))\r\n    _handlerMousemove.call(this, e)\r\n    _handlerMouseup.call(this, e)\r\n\r\n    return ++step\r\n  }\r\n\r\n  /**\r\n   * Init image resizer.\r\n   */\r\n  function _initImageResizer() {\r\n    let doc\r\n\r\n    // No shared image resizer.\r\n    if (!editor.shared.$image_resizer) {\r\n\r\n      // Create shared image resizer.\r\n      editor.shared.$image_resizer = $(document.createElement('div')).attr('class', 'fr-image-resizer')\r\n      $image_resizer = editor.shared.$image_resizer\r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($image_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Image resize is enabled.\r\n      if (editor.opts.imageResize) {\r\n        $image_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se'))\r\n\r\n        // Add image resizer overlay and set it.\r\n        editor.shared.$img_overlay = $(document.createElement('div')).attr('class', 'fr-image-overlay')\r\n        $overlay = editor.shared.$img_overlay\r\n        doc = $image_resizer.get(0).ownerDocument\r\n        $(doc).find('body').first().append($overlay)\r\n      }\r\n    }\r\n    else {\r\n      $image_resizer = editor.shared.$image_resizer\r\n      $overlay = editor.shared.$img_overlay\r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($image_resizer.removeClass('fr-active'))\r\n      }, true)\r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $image_resizer.html('').removeData().remove()\r\n      $image_resizer = null\r\n\r\n      if (editor.opts.imageResize) {\r\n        $overlay.remove()\r\n        $overlay = null\r\n      }\r\n    }, true)\r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        if ($current_image && !$current_image.hasClass('fr-uploading')) {\r\n          _exitEdit(true)\r\n        }\r\n        else if ($current_image) {\r\n          _repositionResizer()\r\n          replace()\r\n          showProgressBar(false)\r\n        }\r\n      })\r\n    }\r\n\r\n    // Image resize is enabled.\r\n    if (editor.opts.imageResize) {\r\n      doc = $image_resizer.get(0).ownerDocument\r\n      editor.events.$on($image_resizer, editor._mousedown, '.fr-handler', _handlerMousedown)\r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove)\r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup)\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup)\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1\r\n      let prevKey = null\r\n      let prevTimestamp = 0\r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_image) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey\r\n          const keycode = e.which\r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1\r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase image size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 1, 1, step)\r\n          }\r\n\r\n          // Decrease image size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeImage.call(this, e, 2, -1, step)\r\n          }\r\n          else if (!editor.keys.ctrlKey(e) && keycode == FE.KEYCODE.ENTER) {\r\n            $current_image.before('<br>')\r\n            _editImg($current_image)\r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode\r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp\r\n        }\r\n      }, true)\r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current image.\r\n   */\r\n  function remove($img) {\r\n    $img = $img || getEl()\r\n\r\n    if ($img) {\r\n      if (editor.events.trigger('image.beforeRemove', [$img]) !== false) {\r\n        editor.popups.hideAll()\r\n        _selectImage()\r\n        _exitEdit(true)\r\n\r\n        if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n        if ($img.get(0) == editor.el) {\r\n          $img.removeAttr('src')\r\n        }\r\n        else {\r\n          if ($img.get(0).parentNode && $img.get(0).parentNode.tagName == 'A') {\r\n            editor.selection.setBefore($img.get(0).parentNode) || editor.selection.setAfter($img.get(0).parentNode) || $img.parent().after(FE.MARKERS)\r\n            $($img.get(0).parentNode).remove()\r\n          }\r\n          else {\r\n            editor.selection.setBefore($img.get(0)) || editor.selection.setAfter($img.get(0)) || $img.after(FE.MARKERS)\r\n            $img.remove()\r\n          }\r\n\r\n          editor.html.fillEmptyBlocks()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const key_code = e.which\r\n\r\n    if ($current_image && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      remove()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code == FE.KEYCODE.ESC) {\r\n      const $img = $current_image\r\n      _exitEdit(true)\r\n      editor.selection.setAfter($img.get(0))\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Move cursor if left and right arrows are used.\r\n    else if ($current_image && (key_code == FE.KEYCODE.ARROW_LEFT || key_code == FE.KEYCODE.ARROW_RIGHT)) {\r\n      const img = $current_image.get(0)\r\n      _exitEdit(true)\r\n\r\n      if (key_code == FE.KEYCODE.ARROW_LEFT) {\r\n        editor.selection.setBefore(img)\r\n      }\r\n      else {\r\n        editor.selection.setAfter(img)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code === FE.KEYCODE.TAB) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      _exitEdit(true)\r\n\r\n      return false\r\n    }\r\n    else if ($current_image && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do some cleanup on images.\r\n   */\r\n  function _cleanOnGet(el) {\r\n\r\n    // Tag is image.\r\n    if (el && el.tagName == 'IMG') {\r\n\r\n      // Remove element if it has class fr-uploading or fr-error.\r\n      if (editor.node.hasClass(el, 'fr-uploading') || editor.node.hasClass(el, 'fr-error')) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n\r\n      // Remove class if it is draggable.\r\n      else if (editor.node.hasClass(el, 'fr-draggable')) {\r\n        el.classList.remove('fr-draggable')\r\n      }\r\n\r\n      if (el.parentNode && el.parentNode.parentNode && editor.node.hasClass(el.parentNode.parentNode, 'fr-img-caption')) {\r\n        const p_node = el.parentNode.parentNode\r\n        p_node.removeAttribute('contenteditable')\r\n        p_node.removeAttribute('draggable')\r\n        p_node.classList.remove('fr-draggable')\r\n\r\n        const n_node = el.nextSibling\r\n\r\n        if (n_node) {\r\n          n_node.removeAttribute('contenteditable')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Look for inner nodes that might be in a similar case.\r\n    else if (el && el.nodeType == Node.ELEMENT_NODE) {\r\n      const imgs = el.querySelectorAll('img.fr-uploading, img.fr-error, img.fr-draggable')\r\n\r\n      for (let i = 0; i < imgs.length; i++) {\r\n        _cleanOnGet(imgs[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    _initEvents()\r\n\r\n    // Init on image.\r\n    if (editor.el.tagName == 'IMG') {\r\n      editor.$el.addClass('fr-view')\r\n    }\r\n\r\n    editor.events.$on(editor.$el, editor.helpers.isMobile() && !editor.helpers.isWindowsPhone() ? 'touchend' : 'click', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', _edit)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', editor.el.tagName == 'IMG' ? null : 'img:not([contenteditable=\"false\"])', function () {\r\n        touchScroll = false\r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true\r\n      })\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('window.keydown keydown', _editorKeydownHandler, true)\r\n\r\n      editor.events.on('keyup', function (e) {\r\n        if ($current_image && e.which == FE.KEYCODE.ENTER) {\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Prevent typing in image caption DOM structure.\r\n      editor.events.$on(editor.$el, 'keydown', function () {\r\n        let el = editor.selection.element()\r\n\r\n        // Parent node of the current element.\r\n        if (el.nodeType === Node.TEXT_NODE || (el.tagName == 'BR' && editor.node.isLastSibling(el))) {\r\n          el = el.parentNode\r\n        }\r\n\r\n        if (!editor.node.hasClass(el, 'fr-inner')) {\r\n          if (!editor.node.hasClass(el, 'fr-img-caption')) {\r\n            el = $(el).parents('.fr-img-caption').get(0)\r\n          }\r\n\r\n          // Check if we are in image caption.\r\n          if (editor.node.hasClass(el, 'fr-img-caption')) {\r\n            $(el).after(FE.INVISIBLE_SPACE + FE.MARKERS);\r\n            editor.selection.restore();\r\n          }\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler)\r\n    }\r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_image) {\r\n        if (editor.$wp) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        else {\r\n          const $img = $current_image\r\n          _exitEdit(true)\r\n          editor.selection.setAfter($img.get(0))\r\n          editor.selection.restore()\r\n        }\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_image) {\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // Copy/cut image.\r\n    editor.events.on('window.cut window.copy', function (e) {\r\n      // Do copy only if image.edit popups is visible and not focused.\r\n      if ($current_image && editor.popups.isVisible('image.edit') && !editor.popups.get('image.edit').find(':focus').length) {\r\n\r\n        const $el = getEl()\r\n\r\n        if (hasCaption()) {\r\n          $el.before(FE.START_MARKER)\r\n          $el.after(FE.END_MARKER)\r\n          editor.selection.restore()\r\n          editor.paste.saveCopiedText($el.get(0).outerHTML, $el.text())\r\n        }\r\n        else {\r\n          _selectImage()\r\n          editor.paste.saveCopiedText($current_image.get(0).outerHTML, $current_image.attr('alt'))\r\n        }\r\n\r\n        if (e.type == 'copy') {\r\n          setTimeout(function () {\r\n            _editImg($current_image)\r\n          })\r\n        }\r\n        else {\r\n          _exitEdit(true)\r\n          editor.undo.saveStep()\r\n          setTimeout(function () {\r\n            editor.undo.saveStep()\r\n          }, 0)\r\n        }\r\n      }\r\n    }, true)\r\n\r\n    // Fix IE copy not working when selection is collapsed.\r\n    if (editor.browser.msie) {\r\n      editor.events.on('keydown', function (e) {\r\n        // Selection is collapsed and we have an image.\r\n        if (!(editor.selection.isCollapsed() && $current_image)) return true\r\n\r\n        const key_code = e.which\r\n\r\n        // Copy.\r\n        if (key_code == FE.KEYCODE.C && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.copy')\r\n        }\r\n\r\n        // Cut.\r\n        else if (key_code == FE.KEYCODE.X && editor.keys.ctrlKey(e)) {\r\n          editor.events.trigger('window.cut')\r\n        }\r\n      })\r\n    }\r\n\r\n    // Do not leave page while uploading.\r\n    editor.events.$on($(editor.o_win), 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && key_code == FE.KEYCODE.BACKSPACE) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Check if image is uploading to abort it.\r\n    editor.events.$on(editor.$win, 'keydown', function (e) {\r\n      const key_code = e.which\r\n\r\n      if ($current_image && $current_image.hasClass('fr-uploading') && key_code == FE.KEYCODE.ESC) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('destroy', function () {\r\n      if ($current_image && $current_image.hasClass('fr-uploading')) {\r\n        $current_image.trigger('abortUpload')\r\n      }\r\n    })\r\n\r\n    editor.events.on('paste.before', _clipboardPaste)\r\n    editor.events.on('paste.beforeCleanup', _clipboardPasteCleanup)\r\n    editor.events.on('paste.after', _uploadPastedImages)\r\n    editor.events.on('html.set', _refreshImageList)\r\n    editor.events.on('html.inserted', _refreshImageList)\r\n    _refreshImageList()\r\n\r\n    editor.events.on('destroy', function () {\r\n      images = []\r\n    })\r\n\r\n    // Remove any fr-uploading / fr-error images.\r\n    editor.events.on('html.processGet', _cleanOnGet)\r\n\r\n    if (editor.opts.imageOutputSize) {\r\n      let imgs\r\n\r\n      editor.events.on('html.beforeGet', function () {\r\n        imgs = editor.el.querySelectorAll('img')\r\n        for (let i = 0; i < imgs.length; i++) {\r\n          const width = imgs[i].style.width || $(imgs[i]).width()\r\n          const height = imgs[i].style.height || $(imgs[i]).height()\r\n\r\n          if (width) imgs[i].setAttribute('width', (`${width}`).replace(/px/, ''))\r\n\r\n          if (height) imgs[i].setAttribute('height', (`${height}`).replace(/px/, ''))\r\n        }\r\n      })\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.events.on('image.loaded', editor.size.syncIframe)\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      _syncImages()\r\n      editor.events.on('contentChanged', _syncImages)\r\n    }\r\n\r\n    editor.events.$on($(editor.o_win), 'orientationchange.image', function () {\r\n      setTimeout(function () {\r\n        if ($current_image) {\r\n          _editImg($current_image)\r\n        }\r\n      }, 100)\r\n    })\r\n\r\n    _initEditPopup(true)\r\n    _initInsertPopup(true)\r\n    _initSizePopup(true)\r\n    _initAltPopup(true)\r\n\r\n    editor.events.on('node.remove', function ($node) {\r\n      if ($node.get(0).tagName == 'IMG') {\r\n        remove($node)\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  function _processPastedImage(img) {\r\n    if (editor.events.trigger('image.beforePasteUpload', [img]) === false) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Show the progress bar.\r\n    $current_image = $(img)\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    replace()\r\n    showProgressBar()\r\n\r\n    $current_image.on('load', function () {\r\n      let loadEvents = []\r\n\r\n      _repositionResizer()\r\n      // https://github.com/froala/wysiwyg-editor/issues/3407\r\n      if ($(editor.popups.get('image.insert').get(0)).find('div.fr-active.fr-error').length < 1) {\r\n        showProgressBar()\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1866\r\n      $(this).data('events').find(function(event) {\r\n        if (event[0] === 'load') {\r\n          loadEvents.push(event)\r\n        }\r\n      })\r\n      \r\n      // turn off the event if it is registered only once\r\n      loadEvents.length <= 1 && $(this).off('load')\r\n    })\r\n\r\n    const splitSrc = $(img).attr('src').split(',')\r\n\r\n    // Convert image to blob.\r\n    const binary = atob(splitSrc[1])\r\n    const array = []\r\n\r\n    for (let i = 0; i < binary.length; i++) {\r\n      array.push(binary.charCodeAt(i))\r\n    }\r\n\r\n    const upload_img = new Blob([new Uint8Array(array)], {\r\n      type: splitSrc[0].replace(/data\\:/g, '').replace(/;base64/g, '')\r\n    })\r\n\r\n    upload([upload_img], $current_image)\r\n  }\r\n\r\n  function _uploadPastedImages() {\r\n    if (!editor.opts.imagePaste) {\r\n      editor.$el.find('img[data-fr-image-pasted]').remove()\r\n    }\r\n    else {\r\n\r\n      // Safari won't work https://bugs.webkit.org/show_bug.cgi?id=49141\r\n      editor.$el.find('img[data-fr-image-pasted]').each(function (index, img) {\r\n        if (editor.opts.imagePasteProcess) {\r\n          let width = editor.opts.imageDefaultWidth\r\n\r\n          if (width && width != 'auto') {\r\n            width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n          }\r\n          $(img)\r\n            .css('width', width)\r\n            .removeClass('fr-dii fr-dib fr-fir fr-fil')\r\n\r\n          _setStyle($(img), editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n        }\r\n\r\n        // Data images.\r\n        if (img.src.indexOf('data:') === 0) {\r\n          _processPastedImage(img)\r\n        }\r\n\r\n        // New way Safari is pasting images.\r\n        else if (img.src.indexOf('blob:') === 0 || (img.src.indexOf('http') === 0 && editor.opts.imageUploadRemoteUrls && editor.opts.imageCORSProxy)) {\r\n          const _img = new Image()\r\n          _img.crossOrigin = 'Anonymous'\r\n          _img.onload = function () {\r\n            // Create canvas.\r\n            const canvas = editor.o_doc.createElement('CANVAS')\r\n            const context = canvas.getContext('2d')\r\n\r\n            // Set height.\r\n            canvas.height = this.naturalHeight\r\n            canvas.width = this.naturalWidth\r\n\r\n            // Draw image.\r\n            context.drawImage(this, 0, 0)\r\n\r\n            // pushing the execution at end of the stack\r\n            setTimeout(function () {\r\n              _processPastedImage(img)\r\n            }, 0)\r\n\r\n            let imgExt\r\n\r\n            if (this.naturalWidth > 2000 || this.naturalHeight > 1500) {\r\n              imgExt = 'jpeg' // if images are too large\r\n            }\r\n            else {\r\n              imgExt = 'png'\r\n            }\r\n\r\n            // Update image and process it.\r\n            img.src = canvas.toDataURL(`image/${imgExt}`)\r\n\r\n          }\r\n\r\n          _img.src = (img.src.indexOf('blob:') === 0 ? '' : (`${editor.opts.imageCORSProxy}/`)) + img.src\r\n        }\r\n\r\n        // Images without http (Safari ones.).\r\n        else if (img.src.indexOf('http') !== 0 || img.src.indexOf('https://mail.google.com/mail') === 0) {\r\n          editor.selection.save()\r\n          $(img).remove()\r\n          editor.selection.restore()\r\n        }\r\n        else {\r\n          $(img).removeAttr('data-fr-image-pasted')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function _clipboardImageLoaded(e) {\r\n    const result = e.target.result\r\n\r\n    // Default width.\r\n    let width = editor.opts.imageDefaultWidth\r\n\r\n    if (width && width != 'auto') {\r\n      width = width + (editor.opts.imageResizeWithPercent ? '%' : 'px')\r\n    }\r\n\r\n    editor.undo.saveStep()\r\n\r\n    editor.html.insert(`<img data-fr-image-pasted=\"true\" src=\"${result}\"${(width ? ` style=\"width: ${width};\"` : '')}>`)\r\n\r\n    const $img = editor.$el.find('img[data-fr-image-pasted=\"true\"]')\r\n\r\n    if ($img) {\r\n      _setStyle($img, editor.opts.imageDefaultDisplay, editor.opts.imageDefaultAlign)\r\n    }\r\n\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  function _processsClipboardPaste(file) {\r\n    const reader = new FileReader()\r\n    reader.onload = _clipboardImageLoaded\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  function _clipboardPaste(e) {\r\n    if (e && e.clipboardData && e.clipboardData.items) {\r\n\r\n      let file = null\r\n\r\n      if (!((e.clipboardData.types && [].indexOf.call(e.clipboardData.types, 'text/rtf') != -1) || e.clipboardData.getData('text/rtf'))) {\r\n        for (let i = 0; i < e.clipboardData.items.length; i++) {\r\n          file = e.clipboardData.items[i].getAsFile()\r\n\r\n          if (file) {\r\n            break\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        file = e.clipboardData.items[0].getAsFile()\r\n      }\r\n\r\n      if (file) {\r\n        _processsClipboardPaste(file)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clipboardPasteCleanup(clipboard_html) {\r\n    clipboard_html = clipboard_html.replace(/<img /gi, '<img data-fr-image-pasted=\"true\" ')\r\n\r\n    return clipboard_html\r\n  }\r\n\r\n  /**\r\n   * Start edit.\r\n   */\r\n  let touchScroll\r\n\r\n  function _edit(e) {\r\n    if ($(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('image.hideResizer')\r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable()\r\n\r\n    if (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe()\r\n    }\r\n\r\n    // Store current image.\r\n    $current_image = $(this)\r\n\r\n    // Select image.\r\n    _selectImage()\r\n\r\n    // Reposition resizer.\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n\r\n    // Issue 2801\r\n    if (editor.browser.msie) {\r\n      if (editor.popups.areVisible()) {\r\n        editor.events.disableBlur()\r\n      }\r\n\r\n      if (editor.win.getSelection) {\r\n        editor.win.getSelection().removeAllRanges()\r\n        editor.win.getSelection().addRange(editor.doc.createRange())\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.clear()\r\n    }\r\n\r\n    // Fix for image remaining selected.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.disableBlur()\r\n      editor.$el.blur()\r\n    }\r\n\r\n    // Refresh buttons.\r\n    editor.button.bulkRefresh()\r\n    editor.events.trigger('video.hideResizer')\r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n\r\n  function _exitEdit(force_exit) {\r\n    if ($current_image && (_canExit() || force_exit === true)) {\r\n      editor.toolbar.enable()\r\n      $image_resizer.removeClass('fr-active')\r\n      editor.popups.hideAll();\r\n      $current_image = null\r\n      _unmarkExit()\r\n\r\n      $handler = null\r\n\r\n      if ($overlay) {\r\n        $overlay.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  let img_exit_flag = false\r\n\r\n  function _markExit() {\r\n    img_exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    img_exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return img_exit_flag\r\n  }\r\n\r\n  /**\r\n   * Set style for image.\r\n   */\r\n  function _setStyle($img, _display, _align) {\r\n\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $img.removeClass('fr-fil fr-fir fr-dib fr-dii')\r\n\r\n      if (_align) {\r\n        $img.addClass(`fr-fi${_align[0]}`)\r\n      }\r\n\r\n      if (_display) {\r\n        $img.addClass(`fr-di${_display[0]}`)\r\n      }\r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $img.css({\r\n          display: 'inline-block',\r\n          verticalAlign: 'bottom',\r\n          margin: editor.opts.imageDefaultMargin\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $img.css({\r\n            'float': 'none',\r\n            marginBottom: '',\r\n            marginTop: '',\r\n            maxWidth: `calc(100% - ${(2 * editor.opts.imageDefaultMargin)}px)`,\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $img.css({\r\n            'float': 'left',\r\n            marginLeft: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else {\r\n          $img.css({\r\n            'float': 'right',\r\n            marginRight: 0,\r\n            maxWidth: `calc(100% - ${editor.opts.imageDefaultMargin}px)`,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n      else if (_display == 'block') {\r\n        $img.css({\r\n          display: 'block',\r\n          'float': 'none',\r\n          verticalAlign: 'top',\r\n          margin: `${editor.opts.imageDefaultMargin}px auto`,\r\n          textAlign: 'center'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $img.css({\r\n            marginLeft: 0,\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $img.css({\r\n            marginRight: 0,\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Align image.\r\n   */\r\n  function align(val) {\r\n    const $el = getEl()\r\n\r\n    $el.removeClass('fr-fir fr-fil')\r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'left') {\r\n        $el.addClass('fr-fil')\r\n      }\r\n      else if (val == 'right') {\r\n        $el.addClass('fr-fir')\r\n      }\r\n    }\r\n    else {\r\n      _setStyle($el, getDisplay(), val)\r\n    }\r\n\r\n    _selectImage()\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    editor.selection.clear()\r\n  }\r\n\r\n  /**\r\n   * Get image alignment.\r\n   */\r\n  function getAlign($img) {\r\n    if (typeof $img == 'undefined') $img = getEl()\r\n\r\n    if ($img) {\r\n\r\n      // Image has left class.\r\n      if ($img.hasClass('fr-fil')) {\r\n\r\n        return 'left'\r\n      }\r\n\r\n      // Image has right class.\r\n      else if ($img.hasClass('fr-fir')) {\r\n\r\n        return 'right'\r\n      }\r\n\r\n      // Image has display class set.\r\n      else if ($img.hasClass('fr-dib') || $img.hasClass('fr-dii')) {\r\n\r\n        return 'center'\r\n      }\r\n      else {\r\n        // Set float to none.\r\n        const flt = $img.css('float')\r\n\r\n        $img.css('float', 'none')\r\n\r\n        // Image has display block.\r\n        if ($img.css('display') == 'block') {\r\n\r\n          // Set float to the initial value.\r\n          $img.css('float', '')\r\n\r\n          if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n          // Margin left is 0.\r\n          // Margin right is auto.\r\n          if (parseInt($img.css('margin-left'), 10) === 0) {\r\n\r\n            return 'left'\r\n          }\r\n\r\n          // Margin left is auto.\r\n          // Margin right is 0.\r\n          else if (parseInt($img.css('margin-right'), 10) === 0) {\r\n\r\n            return 'right'\r\n          }\r\n        }\r\n\r\n        // Display inline.\r\n        else {\r\n\r\n          // Set float.\r\n          $img.css('float', '')\r\n\r\n          if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n          // Float left.\r\n          if ($img.css('float') == 'left') {\r\n\r\n            return 'left'\r\n          }\r\n\r\n          // Float right.\r\n          else if ($img.css('float') == 'right') {\r\n\r\n            return 'right'\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return 'center'\r\n  }\r\n\r\n  /**\r\n   * Get image display.\r\n   */\r\n  function getDisplay($img) {\r\n    if (typeof $img == 'undefined') $img = getEl()\r\n\r\n    // Set float to none.\r\n    const flt = $img.css('float')\r\n    $img.css('float', 'none')\r\n\r\n    // Image has display block.\r\n    if ($img.css('display') == 'block') {\r\n\r\n      // Set float to the initial value.\r\n      $img.css('float', '')\r\n\r\n      if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n      return 'block'\r\n    }\r\n\r\n    // Display inline.\r\n    else {\r\n\r\n      // Set float.\r\n      $img.css('float', '')\r\n\r\n      if ($img.css('float') != flt) $img.css('float', flt)\r\n\r\n      return 'inline'\r\n    }\r\n\r\n    return 'inline'\r\n  }\r\n\r\n  /**\r\n   * Refresh the align icon.\r\n   */\r\n  function refreshAlign($btn) {\r\n    if ($current_image) {\r\n      $btn.find('> *').first().replaceWith(editor.icon.create(`image-align-${getAlign()}`))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the align option from the dropdown.\r\n   */\r\n\r\n  function refreshAlignOnShow($btn, $dropdown) {\r\n    if ($current_image) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getAlign()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Align image.\r\n   */\r\n\r\n  function display(val) {\r\n    const $el = getEl()\r\n\r\n    $el.removeClass('fr-dii fr-dib')\r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'inline') {\r\n        $el.addClass('fr-dii')\r\n      }\r\n      else if (val == 'block') {\r\n        $el.addClass('fr-dib')\r\n      }\r\n    }\r\n    else {\r\n      _setStyle($el, val, getAlign())\r\n    }\r\n\r\n    _selectImage()\r\n    _repositionResizer()\r\n    _showEditPopup()\r\n    editor.selection.clear()\r\n  }\r\n\r\n  /**\r\n   * Refresh the image display selected option.\r\n   */\r\n\r\n  function refreshDisplayOnShow($btn, $dropdown) {\r\n    if ($current_image) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getDisplay()}\"]`).addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the replace popup.\r\n   */\r\n\r\n  function replace() {\r\n    let $popup = editor.popups.get('image.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    if (!editor.popups.isVisible('image.insert')) {\r\n      hideProgressBar()\r\n      editor.popups.refresh('image.insert')\r\n      editor.popups.setContainer('image.insert', editor.$sc)\r\n    }\r\n\r\n    let $el = getEl()\r\n\r\n    if (hasCaption()) {\r\n      $el = $el.find('.fr-img-wrap')\r\n    }\r\n\r\n    let left = $el.offset().left + $el.outerWidth() / 2\r\n    const top = $el.offset().top + $el.outerHeight()\r\n\r\n    editor.popups.show('image.insert', left, top, $el.outerHeight(true), true)\r\n  }\r\n\r\n  /**\r\n   * Place selection around current image.\r\n   */\r\n  function _selectImage() {\r\n    if ($current_image) {\r\n      editor.events.disableBlur()\r\n      editor.selection.clear()\r\n      const range = editor.doc.createRange()\r\n      range.selectNode($current_image.get(0))\r\n\r\n      // Collapse range in IE.\r\n      if (editor.browser.msie) range.collapse(true)\r\n\r\n      const selection = editor.selection.get()\r\n      selection.addRange(range)\r\n      editor.events.enableBlur()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to the image main popup.\r\n   */\r\n  function back() {\r\n    if ($current_image) {\r\n      editor.events.disableBlur()\r\n      $('.fr-popup input:focus').blur()\r\n      _editImg($current_image)\r\n    }\r\n    else {\r\n      editor.events.disableBlur()\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n\r\n      editor.popups.hide('image.insert')\r\n      editor.toolbar.showInline()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current image.\r\n   */\r\n\r\n  function get() {\r\n\r\n    return $current_image\r\n  }\r\n\r\n  function getEl() {\r\n    return hasCaption() ? $current_image.parents('.fr-img-caption').first() : $current_image\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n\r\n  function applyStyle(val, imageStyles, multipleStyles) {\r\n    if (typeof imageStyles == 'undefined') imageStyles = editor.opts.imageStyles\r\n\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.imageMultipleStyles\r\n\r\n    if (!$current_image) return false\r\n\r\n    const $img = getEl()\r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(imageStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      $img.removeClass(styles.join(' '))\r\n    }\r\n\r\n    if (typeof imageStyles[val] == 'object') {\r\n      $img.removeAttr('style')\r\n      $img.css(imageStyles[val].style)\r\n    }\r\n    else {\r\n      $img.toggleClass(val)\r\n    }\r\n\r\n    _editImg($current_image)\r\n  }\r\n\r\n  function hasCaption() {\r\n    if ($current_image) {\r\n      return $current_image.parents('.fr-img-caption').length > 0\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function toggleCaption() {\r\n    let $el\r\n\r\n    if ($current_image && !hasCaption()) {\r\n      $el = $current_image\r\n\r\n      // Check if there is a link wrapping the image.\r\n      if ($current_image.parent().is('a')) {\r\n        $el = $current_image.parent()\r\n      }\r\n\r\n      // code start https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n\r\n      // check the li placement\r\n      var $listParent = $current_image.parents('ul') && $current_image.parents('ul').length > 0 ? $current_image.parents('ul') : $current_image.parents('ol') && $current_image.parents('ol').length > 0 ? $current_image.parents('ol'): [];\r\n      if ($listParent.length > 0) {\r\n        var totLi = $listParent.find('li').length,\r\n          $currLi = $current_image.parents('li'),\r\n          $newLi = document.createElement(\"li\");;\r\n        \r\n        if ((totLi - 1) === $currLi.index()) { // if li placement last then add one extra li\r\n          $listParent.append($newLi);\r\n          $newLi.innerHTML = '&nbsp;';\r\n        }\r\n      }\r\n\r\n      let splitAttrs\r\n      let oldWidth\r\n\r\n      if ($el.attr('style')) {\r\n        splitAttrs = $el.attr('style').split(':')\r\n        oldWidth = splitAttrs.indexOf('width') > -1 ? splitAttrs[splitAttrs.indexOf('width') + 1].replace(';', '') : ''\r\n      } else if ($el.attr('width')) {\r\n        oldWidth = $el.attr('width');\r\n      }\r\n      \r\n      // Issue 2861\r\n      const current_width = editor.opts.imageResizeWithPercent ? (oldWidth.indexOf('px') > -1 ? null : oldWidth) || '100%' : $current_image.width() + 'px'\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      $el.wrap('<div class=\"fr-img-space-wrap\"><span ' + (!editor.browser.mozilla ? 'contenteditable=\"false\"' : '') + 'class=\"fr-img-caption ' + $current_image.attr('class') + '\" style=\"' + (!editor.opts.useClasses ? $el.attr('style') : '') + '\" draggable=\"false\"></span><p class=\"fr-img-space-wrap2\">&nbsp;</p></div>')\r\n      $el.wrap('<span class=\"fr-img-wrap\"></span>')\r\n      $current_image.after(`<span class=\"fr-inner\"${(!editor.browser.mozilla ? ' contenteditable=\"true\"' : '')}>${FE.START_MARKER}${editor.language.translate('Image Caption')}${FE.END_MARKER}</span>`)\r\n      //$current_image.removeAttr('class').removeAttr('style').removeAttr('width')\r\n\r\n      $current_image.parents('.fr-img-caption').css('width', current_width);\r\n      let imgLengthCaption = $current_image.parents('.fr-img-space-wrap').length;\r\n      if (imgLengthCaption > 1) {\r\n        unwrap(document.querySelector('.fr-img-space-wrap'));\r\n        unwrap(document.querySelector('.fr-img-space-wrap2'));\r\n      }\r\n      _exitEdit(true)\r\n\r\n      editor.selection.restore()\r\n    }\r\n    else {\r\n      $el = getEl()\r\n      $current_image.insertBefore($el);\r\n\r\n      if ($el[0].querySelector('a') !== null) {\r\n        let newTag = $el[0].querySelector('a');\r\n        \r\n        var ancorTag = document.createElement(\"a\");\r\n        for (var att, i = 0, atts = newTag.attributes, n = atts.length; i < n; i++) {\r\n          att = atts[i];\r\n          ancorTag.setAttribute(att.nodeName, att.nodeValue);\r\n        }\r\n        $current_image.wrap(ancorTag);\r\n      }\r\n      \r\n      $current_image\r\n        .attr('class', $el.attr('class').replace('fr-img-caption', ''))\r\n        .attr('style', $el.attr('style'))\r\n      $el.remove()\r\n      let imgElementLength = $current_image.parents('.fr-img-space-wrap').length;\r\n      if (imgElementLength > 1) {\r\n        unwrap(document.querySelector('.fr-img-space-wrap'));\r\n        unwrap(document.querySelector('.fr-img-space-wrap2'));\r\n      }\r\n      _editImg($current_image)\r\n    }\r\n  }\r\n\r\n  //return removed second wraping div\r\n  function unwrap(wrapper) {\r\n    // place childNodes in document fragment\r\n    var docFrag = document.createDocumentFragment();\r\n    while (wrapper.firstChild) {\r\n      var child = wrapper.removeChild(wrapper.firstChild);\r\n      docFrag.appendChild(child);\r\n    }\r\n\r\n    // replace wrapper with document fragment\r\n    wrapper.parentNode.replaceChild(docFrag, wrapper);\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshUploadButton: refreshUploadButton,\r\n    refreshByURLButton: refreshByURLButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    align: align,\r\n    refreshAlign: refreshAlign,\r\n    refreshAlignOnShow: refreshAlignOnShow,\r\n    display: display,\r\n    refreshDisplayOnShow: refreshDisplayOnShow,\r\n    replace: replace,\r\n    back: back,\r\n    get: get,\r\n    getEl: getEl,\r\n    insert: insert,\r\n    showProgressBar: showProgressBar,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    applyStyle: applyStyle,\r\n    showAltPopup: showAltPopup,\r\n    showSizePopup: showSizePopup,\r\n    setAlt: setAlt,\r\n    setSize: setSize,\r\n    toggleCaption: toggleCaption,\r\n    hasCaption: hasCaption,\r\n    exitEdit: _exitEdit,\r\n    edit: _editImg\r\n  }\r\n}\r\n\r\n// Insert image button.\r\nFE.DefineIcon('insertImage', {\r\n  NAME: 'image',\r\n  SVG_KEY: 'insertImage'\r\n})\r\nFE.RegisterShortcut(FE.KEYCODE.P, 'insertImage', null, 'P')\r\nFE.RegisterCommand('insertImage', {\r\n  title: 'Insert Image',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('image.insert')) {\r\n      this.image.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('image.insert')\r\n    }\r\n  },\r\n  plugin: 'image'\r\n})\r\n\r\n// Image upload button inside the insert image popup.\r\nFE.DefineIcon('imageUpload', {\r\n  NAME: 'upload',\r\n  SVG_KEY: 'upload'\r\n})\r\nFE.RegisterCommand('imageUpload', {\r\n  title: 'Upload Image',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.image.showLayer('image-upload')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshUploadButton($btn)\r\n  }\r\n})\r\n\r\n// Image by URL button inside the insert image popup.\r\nFE.DefineIcon('imageByURL', {\r\n  NAME: 'link',\r\n  SVG_KEY: 'insertLink'\r\n})\r\nFE.RegisterCommand('imageByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.image.showLayer('image-by-url')\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshByURLButton($btn)\r\n  }\r\n})\r\n\r\n// Insert image button inside the insert by URL layer.\r\nFE.RegisterCommand('imageInsertByURL', {\r\n  title: 'Insert Image',\r\n  undo: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.insertByURL()\r\n  },\r\n  refresh: function ($btn) {\r\n    const $current_image = this.image.get()\r\n\r\n    if (!$current_image) {\r\n      $btn.text(this.language.translate('Insert'))\r\n    }\r\n    else {\r\n      $btn.text(this.language.translate('Replace'))\r\n    }\r\n  }\r\n})\r\n\r\n// Image display.\r\nFE.DefineIcon('imageDisplay', {\r\n  NAME: 'star',\r\n  SVG_KEY: 'imageDisplay'\r\n})\r\nFE.RegisterCommand('imageDisplay', {\r\n  title: 'Display',\r\n  type: 'dropdown',\r\n  options: {\r\n    inline: 'Inline',\r\n    block: 'Break Text'\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.display(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.imageTextNear) $btn.addClass('fr-hidden')\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.image.refreshDisplayOnShow($btn, $dropdown)\r\n  }\r\n})\r\n\r\n// Image align.\r\nFE.DefineIcon('image-align', {\r\n  NAME: 'align-left',\r\n  SVG_KEY: 'alignLeft'\r\n})\r\nFE.DefineIcon('image-align-left', {\r\n  NAME: 'align-left',\r\n  SVG_KEY: 'alignLeft'\r\n})\r\nFE.DefineIcon('image-align-right', {\r\n  NAME: 'align-right',\r\n  SVG_KEY: 'alignRight'\r\n})\r\nFE.DefineIcon('image-align-center', {\r\n  NAME: 'align-justify',\r\n  SVG_KEY: 'alignCenter'\r\n})\r\n\r\nFE.DefineIcon('imageAlign', {\r\n  NAME: 'align-justify',\r\n  SVG_KEY: 'alignJustify'\r\n})\r\nFE.RegisterCommand('imageAlign', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'None',\r\n    right: 'Align Right'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { options } = FE.COMMANDS.imageAlign\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`image-align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.align(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.image.refreshAlign($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.image.refreshAlignOnShow($btn, $dropdown)\r\n  }\r\n})\r\n\r\n// Image replace.\r\nFE.DefineIcon('imageReplace', {\r\n  NAME: 'exchange',\r\n  FA5NAME: 'exchange-alt',\r\n  SVG_KEY: 'replaceImage'\r\n})\r\nFE.RegisterCommand('imageReplace', {\r\n  title: 'Replace',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.replace()\r\n  }\r\n})\r\n\r\n// Image remove.\r\nFE.DefineIcon('imageRemove', {\r\n  NAME: 'trash',\r\n  SVG_KEY: 'remove'\r\n})\r\nFE.RegisterCommand('imageRemove', {\r\n  title: 'Remove',\r\n  callback: function () {\r\n    this.image.remove()\r\n  }\r\n})\r\n\r\n// Image back.\r\nFE.DefineIcon('imageBack', {\r\n  NAME: 'arrow-left',\r\n  SVG_KEY: 'back'\r\n})\r\nFE.RegisterCommand('imageBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.image.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    const { $ } = this\r\n    const $current_image = this.image.get()\r\n\r\n    if (!$current_image && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\r\n    this.image.hideProgressBar(true)\r\n  }\r\n})\r\n\r\n// Image styles.\r\nFE.DefineIcon('imageStyle', {\r\n  NAME: 'magic',\r\n  SVG_KEY: 'imageClass'\r\n})\r\nFE.RegisterCommand('imageStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.imageStyles\r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        let val = options[cls]\r\n\r\n        if (typeof val == 'object') val = val.title\r\n\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"imageStyle\" data-param1=\"${cls}\">${this.language.translate(val)}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.image.applyStyle(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const { $ } = this\r\n    const $current_image = this.image.getEl()\r\n\r\n    if ($current_image) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $current_image.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// Image alt.\r\nFE.DefineIcon('imageAlt', {\r\n  NAME: 'info',\r\n  SVG_KEY: 'imageAltText'\r\n})\r\nFE.RegisterCommand('imageAlt', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Alternative Text',\r\n  callback: function () {\r\n    this.image.showAltPopup()\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageSetAlt', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.setAlt()\r\n  }\r\n})\r\n\r\n// Image size.\r\nFE.DefineIcon('imageSize', {\r\n  NAME: 'arrows-alt',\r\n  SVG_KEY: 'imageSize'\r\n})\r\nFE.RegisterCommand('imageSize', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Change Size',\r\n  callback: function () {\r\n    this.image.showSizePopup()\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('imageSetSize', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.image.setSize()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('imageCaption', {\r\n  NAME: 'commenting',\r\n  FA5NAME: 'comment-alt',\r\n  SVG_KEY: 'imageCaption'\r\n})\r\n\r\nFE.RegisterCommand('imageCaption', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Image Caption',\r\n  refreshAfterCallback: true,\r\n  callback: function () {\r\n    this.image.toggleCaption();\r\n  },\r\n  refresh: function ($btn) {\r\n    if (this.image.get()) {\r\n      $btn.toggleClass('fr-active', this.image.hasCaption())\r\n    }\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  imageManagerLoadURL: 'https://i.froala.com/load-files',\r\n  imageManagerLoadMethod: 'get',\r\n  imageManagerLoadParams: {},\r\n  imageManagerPreloader: null,\r\n  imageManagerDeleteURL: '',\r\n  imageManagerDeleteMethod: 'post',\r\n  imageManagerDeleteParams: {},\r\n  imageManagerPageSize: 12,\r\n  imageManagerScrollOffset: 20,\r\n  imageManagerToggleTags: true\r\n})\r\n\r\nFE.PLUGINS.imageManager = function (editor) {\r\n\r\n  const $ = editor.$\r\n  let $modal\r\n  const modal_id = 'image_manager'\r\n\r\n  let $head\r\n  let $body\r\n  let $preloader\r\n  let $media_files\r\n  let $image_tags\r\n  let images\r\n  let page\r\n  let image_count\r\n  let loaded_images\r\n  let column_number\r\n\r\n  // Load errors.\r\n  const BAD_LINK = 10\r\n  const ERROR_DURING_LOAD = 11\r\n  const MISSING_LOAD_URL_OPTION = 12\r\n  const LOAD_BAD_RESPONSE = 13\r\n  const MISSING_IMG_THUMB = 14\r\n  const MISSING_IMG_URL = 15\r\n\r\n  // Delete errors\r\n  const ERROR_DURING_DELETE = 21\r\n  const MISSING_DELETE_URL_OPTION = 22\r\n\r\n  // Error Messages\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Image cannot be loaded from the passed link.'\r\n  error_messages[ERROR_DURING_LOAD] = 'Error during load images request.'\r\n  error_messages[MISSING_LOAD_URL_OPTION] = 'Missing imageManagerLoadURL option.'\r\n  error_messages[LOAD_BAD_RESPONSE] = 'Parsing load response failed.'\r\n  error_messages[MISSING_IMG_THUMB] = 'Missing image thumb.'\r\n  error_messages[MISSING_IMG_URL] = 'Missing image URL.'\r\n  error_messages[ERROR_DURING_DELETE] = 'Error during delete image request.'\r\n  error_messages[MISSING_DELETE_URL_OPTION] = 'Missing imageManagerDeleteURL option.'\r\n\r\n  /*\r\n   * Show the image manager.\r\n   */\r\n  function show() {\r\n\r\n    // Build the image manager.\r\n    if (!$modal) {\r\n\r\n      // Build head.\r\n      let head = `<button class=\"fr-command fr-btn fr-modal-more fr-not-available\" id=\"fr-modal-more-${editor.sid}\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"\"><path d=\"${FE.SVG.tags}\"/></svg></button><h4 data-text=\"true\">${editor.language.translate('Manage Images')}</h4></div>\r\n      <div class=\"fr-modal-tags\" id=\"fr-modal-tags\">`\r\n\r\n      // Preloader.\r\n      let body\r\n\r\n      if (editor.opts.imageManagerPreloader) {\r\n        body = `<img class=\"fr-preloader\" id=\"fr-preloader\" alt=\"${editor.language.translate('Loading')}..\" src=\"${editor.opts.imageManagerPreloader}\" style=\"display: none;\">`\r\n      }\r\n      else {\r\n        body = `<span class=\"fr-preloader\" id=\"fr-preloader\" style=\"display: none;\">${editor.language.translate('Loading')}</span>`\r\n      }\r\n\r\n      // Image list.\r\n      body += '<div class=\"fr-image-list\" id=\"fr-image-list\"></div>'\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n      $modal = modalHash.$modal\r\n      $head = modalHash.$head\r\n      $body = modalHash.$body\r\n    }\r\n\r\n    // Set the current image (if modal is opened to replace an image).\r\n    $modal.data('current-image', editor.image.get())\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    if (!$preloader) {\r\n      _delayedInit()\r\n    }\r\n\r\n    // Load images.\r\n    _loadImages()\r\n  }\r\n\r\n  /*\r\n   * Hide the image manager.\r\n   */\r\n  function hide() {\r\n\r\n    // Hide modal.\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Get the number of columns based on window width.\r\n   */\r\n  function _columnNumber() {\r\n    const window_width = $(window).outerWidth()\r\n\r\n    // Screen XS.\r\n    if (window_width < 768) {\r\n      return 2\r\n    }\r\n\r\n    // Screen SM and MD.\r\n    else if (window_width < 1200) {\r\n      return 3\r\n    }\r\n\r\n    // Screen LG.\r\n    else {\r\n      return 4\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Add the correct number of columns.\r\n   */\r\n  function _buildColumns() {\r\n    $media_files.empty()\r\n\r\n    for (let i = 0; i < column_number; i++) {\r\n      $media_files.append('<div class=\"fr-list-column\"></div>')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load images from server.\r\n   */\r\n  function _loadImages() {\r\n    $preloader.show()\r\n    $media_files.find('.fr-list-column').empty()\r\n\r\n    // If the images load URL is set.\r\n    if (editor.opts.imageManagerLoadURL) {\r\n\r\n      // Make request to get list of images\r\n      $(this).ajax({\r\n        url: editor.opts.imageManagerLoadURL,\r\n        method: editor.opts.imageManagerLoadMethod,\r\n        data: editor.opts.imageManagerLoadParams,\r\n        crossDomain: editor.opts.requestWithCORS,\r\n        withCredentials: editor.opts.requestWithCredentials,\r\n        headers: editor.opts.requestHeaders,\r\n        // Success\r\n        done: function(data, status, xhr) {\r\n          editor.events.trigger('imageManager.imagesLoaded', [data])\r\n          _processLoadedImages(data, xhr.response)\r\n          $preloader.hide()\r\n        },\r\n        // Failure\r\n        fail: function(xhr) {\r\n          _throwError(ERROR_DURING_LOAD, xhr.response || xhr.responseText)\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    // Throw missing imageManagerLoadURL option error.\r\n    else {\r\n      _throwError(MISSING_LOAD_URL_OPTION)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Process loaded images.\r\n   */\r\n  function _processLoadedImages(imgs, response) {\r\n    try {\r\n      $media_files.find('.fr-list-column').empty()\r\n      page = 0\r\n      image_count = 0\r\n      loaded_images = 0\r\n      images = JSON.parse(imgs)\r\n\r\n      // Load files.\r\n      _infiniteScroll()\r\n    }\r\n\r\n    // Throw error while parsing the response.\r\n    catch (ex) {\r\n      _throwError(LOAD_BAD_RESPONSE, response)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load more images if necessary.\r\n   */\r\n  function _infiniteScroll() {\r\n\r\n    // If there aren't enough images in the modal or if the user scrolls down.\r\n    if (image_count < images.length &&\r\n      ($media_files.outerHeight() <= $body.outerHeight() + editor.opts.imageManagerScrollOffset ||\r\n        $body.scrollTop() + editor.opts.imageManagerScrollOffset > $media_files.outerHeight() - $body.outerHeight())) {\r\n\r\n      // Increase page number.\r\n      page++\r\n\r\n      // Load each image on this page.\r\n      for (let i = editor.opts.imageManagerPageSize * (page - 1); i < Math.min(images.length, editor.opts.imageManagerPageSize * page); i++) {\r\n        _loadImage(images[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Load file.\r\n   */\r\n  function _loadImage(image) {\r\n    const img = new Image()\r\n    const $img_container = $(document.createElement('div')).attr('class', 'fr-image-container fr-empty fr-image-' + (loaded_images++)).attr('data-loading', editor.language.translate('Loading') + '..').attr('data-deleting', editor.language.translate('Deleting') + '..')\r\n\r\n    // After adding image empty container modal might change its height.\r\n    _resizeModal(false)\r\n\r\n    // Image has been loaded.\r\n    img.onload = function () {\r\n\r\n      // Update image container height.\r\n      $img_container.height(Math.floor($img_container.width() / img.width * img.height))\r\n\r\n      // Create image HTML.\r\n      const $img = $(document.createElement('img'))\r\n\r\n      // Use image thumb in image manager.\r\n      if (image.thumb) {\r\n\r\n        // Set image src attribute/\r\n        $img.attr('src', image.thumb)\r\n      }\r\n\r\n      // Image does not have thumb.\r\n      else {\r\n\r\n        // Throw missing image thumb error.\r\n        _throwError(MISSING_IMG_THUMB, image)\r\n\r\n        // Set image URL as src attribute.\r\n        if (image.url) {\r\n          $img.attr('src', image.url)\r\n        }\r\n\r\n        // Missing image URL.\r\n        else {\r\n\r\n          // Throw missing image url error.\r\n          _throwError(MISSING_IMG_URL, image)\r\n\r\n          // Don't go further if image does not have a src attribute.\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Save image URL.\r\n      if (image.url) $img.attr('data-url', image.url)\r\n\r\n      // Image tags.\r\n      if (image.tag) {\r\n\r\n        // Show tags only if there are any.\r\n        $head.find('.fr-modal-more.fr-not-available').removeClass('fr-not-available')\r\n        $head.find('.fr-modal-tags').show()\r\n\r\n        // Image has more than one tag.\r\n        if (image.tag.indexOf(',') >= 0) {\r\n\r\n          // Add tags to the image manager tag list.\r\n          const tags = image.tag.split(',')\r\n\r\n          for (let i = 0; i < tags.length; i++) {\r\n\r\n            // Remove trailing spaces.\r\n            tags[i] = tags[i].trim()\r\n\r\n            // Add tag.\r\n            if ($image_tags.find(`a[title=\"${tags[i]}\"]`).length === 0) {\r\n              $image_tags.append(`<a role=\"button\" title=\"${tags[i]}\">${tags[i]}</a>`)\r\n            }\r\n          }\r\n\r\n          // Set img tag attribute.\r\n          $img.attr('data-tag', tags.join())\r\n        }\r\n\r\n        // Image has only one tag.\r\n        else {\r\n\r\n          // Add tag to the tag list.\r\n          if ($image_tags.find(`a[title=\"${image.tag.trim()}\"]`).length === 0) {\r\n            $image_tags.append(`<a role=\"button\" title=\"${image.tag.trim()}\">${image.tag.trim()}</a>`)\r\n          }\r\n\r\n          // Set img tag attribute.\r\n          $img.attr('data-tag', image.tag.trim())\r\n        }\r\n      }\r\n\r\n      // Image alt.\r\n      if (image.name) {\r\n        $img.attr('alt', image.name)\r\n      }\r\n\r\n      // Set image additional data.\r\n      for (const key in image) {\r\n        if (image.hasOwnProperty(key)) {\r\n          if (key !== 'thumb' && key !== 'url' && key !== 'tag') {\r\n            $img.attr(`data-${key}`, image[key])\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add image and insert and delete buttons to the image container.\r\n      $img_container\r\n        .append($img)\r\n        .append($(editor.icon.create('imageManagerDelete')).addClass('fr-delete-img').attr('title', editor.language.translate('Delete')))\r\n        .append($(editor.icon.create('imageManagerInsert')).addClass('fr-insert-img').attr('title', editor.language.translate('Insert')))\r\n\r\n      // Show image only if it has selected tags.\r\n      $image_tags.find('.fr-selected-tag').each(function (index, tag) {\r\n        if (!_imageHasTag($img, tag.text)) {\r\n          $img_container.hide()\r\n        }\r\n      })\r\n\r\n      // After an image is loaded the modal may need to be resized.\r\n      $img.on('load', function () {\r\n\r\n        // Image container is no longer empty.\r\n        $img_container.removeClass('fr-empty')\r\n        $img_container.height('auto')\r\n\r\n        // Increase image counter.\r\n        image_count++\r\n\r\n        // A loded image may break the images order. Reorder them starting with this image.\r\n        const imgs = _getImages(parseInt($img.parent().attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n        // Reorder images.\r\n        _reorderImages(imgs)\r\n\r\n        // Image modal may need resizing.\r\n        _resizeModal(false)\r\n\r\n        // If this was the last image on page then we might need to load more.\r\n        if (image_count % editor.opts.imageManagerPageSize === 0) {\r\n          _infiniteScroll()\r\n        }\r\n      })\r\n\r\n      // Trigger imageLoaded event.\r\n      editor.events.trigger('imageManager.imageLoaded', [$img])\r\n    }\r\n\r\n    // Error while loading the image.\r\n    img.onerror = function () {\r\n      image_count++\r\n      $img_container.remove()\r\n\r\n      // Removing an image container may break image order.\r\n      const imgs = _getImages(parseInt($img_container.attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n      // Reorder images.\r\n      _reorderImages(imgs)\r\n\r\n      _throwError(BAD_LINK, image)\r\n\r\n      // If this was the last image on page then we might need to load more.\r\n      if (image_count % editor.opts.imageManagerPageSize === 0) {\r\n        _infiniteScroll()\r\n      }\r\n    }\r\n\r\n    // Set the image object's src.\r\n    img.src = image.thumb || image.url\r\n\r\n    // Add loaded or empty image to the media manager image list on the shortest column.\r\n    _shortestColumn().append($img_container)\r\n  }\r\n\r\n  /*\r\n   * Get the shortest image column.\r\n   */\r\n  function _shortestColumn() {\r\n    let $col\r\n    let min_height\r\n\r\n    $media_files.find('.fr-list-column').each(function (index, col) {\r\n      const $column = $(col)\r\n\r\n      // Assume that the first column is the shortest.\r\n      if (index === 0) {\r\n        min_height = $column.outerHeight()\r\n        $col = $column\r\n      }\r\n\r\n      // Check if another column is shorter.\r\n      else {\r\n        if ($column.outerHeight() < min_height) {\r\n          min_height = $column.outerHeight()\r\n          $col = $column\r\n        }\r\n      }\r\n    })\r\n\r\n    return $col\r\n  }\r\n\r\n  /*\r\n   * Get all images from the image manager.\r\n   */\r\n  function _getImages(from) {\r\n    if (from === undefined) from = 0\r\n    const get_images = []\r\n\r\n    for (let i = loaded_images - 1; i >= from; i--) {\r\n      const $image = $media_files.find(`.fr-image-${i}`)\r\n\r\n      if ($image.length) {\r\n        get_images.push($image)\r\n\r\n        // Add images here before deleting them so the on load callback is triggered.\r\n        $(document.createElement('div')).attr('id', 'fr-image-hidden-container').append($image)\r\n        $media_files.find(`.fr-image-${i}`).remove()\r\n      }\r\n    }\r\n\r\n    return get_images\r\n  }\r\n\r\n  /*\r\n   * Add images back into the image manager.\r\n   */\r\n  function _reorderImages(imgs) {\r\n    for (let i = imgs.length - 1; i >= 0; i--) {\r\n      _shortestColumn().append(imgs[i])\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Resize the media manager modal if height changes.\r\n   */\r\n  function _resizeModal(infinite_scroll) {\r\n    if (infinite_scroll === undefined) infinite_scroll = true\r\n\r\n    if (!$modal.isVisible()) return true\r\n\r\n    // If width changes, the number of columns may change.\r\n    const cols = _columnNumber()\r\n\r\n    if (cols !== column_number) {\r\n      column_number = cols\r\n\r\n      // Get all images.\r\n      const imgs = _getImages()\r\n\r\n      // Remove current columns and add new ones.\r\n      _buildColumns()\r\n\r\n      // Reorder images.\r\n      _reorderImages(imgs)\r\n    }\r\n\r\n    editor.modals.resize(modal_id)\r\n\r\n    // Load more photos when window is resized if necessary.\r\n    if (infinite_scroll) {\r\n      _infiniteScroll()\r\n    }\r\n  }\r\n\r\n  function _getImageAttrs($img) {\r\n    var name,\r\n      attrs = $img[0].attributes,\r\n      i = attrs.length,\r\n      img_attributes = {}\r\n\r\n    while (i--) {\r\n      if (attrs[i]) {\r\n        name = attrs[i].name\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/2870\r\n        // Include all attributes from the image manager except 'src'\r\n        if(name !== 'src') {\r\n          img_attributes[name] = attrs[i].value\r\n        }\r\n      }\r\n    }\r\n\r\n    return img_attributes\r\n  }\r\n\r\n  /*\r\n   * Insert image into the editor.\r\n   */\r\n  function _insertImage(e) {\r\n\r\n    // Image to insert.\r\n    const $img = $(e.currentTarget).siblings('img')\r\n\r\n    const inst = $modal.data('instance') || editor\r\n    const $current_image = $modal.data('current-image')\r\n\r\n    editor.modals.hide(modal_id)\r\n    inst.image.showProgressBar()\r\n\r\n    if (!$current_image) {\r\n\r\n      // Make sure we have focus.\r\n      inst.events.focus(true)\r\n      inst.selection.restore()\r\n\r\n      const rect = inst.position.getBoundingRect()\r\n\r\n      const left = rect.left + rect.width / 2 + $(editor.doc).scrollLeft()\r\n      const top = rect.top + rect.height + $(editor.doc).scrollTop()\r\n\r\n      // Show the image insert popup.\r\n      inst.popups.setContainer('image.insert', editor.$sc)\r\n      inst.popups.show('image.insert', left, top)\r\n    }\r\n    else {\r\n      $current_image.data('fr-old-src', $current_image.attr('src'))\r\n      $current_image.trigger('click')\r\n    }\r\n\r\n    inst.image.insert($img.data('url'), false, _getImageAttrs($img), $current_image)\r\n  }\r\n\r\n  /*\r\n   * Update tags.\r\n   */\r\n  function _updateTags() {\r\n    $modal.find('#fr-modal-tags > a').each(function () {\r\n\r\n      if ($modal.find(`#fr-image-list [data-tag*=\"${$(this).text()}\"]`).length === 0) {\r\n        $(this).removeClass('fr-selected-tag').hide()\r\n      }\r\n    })\r\n\r\n    _showImagesByTags()\r\n  }\r\n\r\n  /*\r\n   * Delete image.\r\n   */\r\n  function _deleteImage(e) {\r\n\r\n    // Image to delete.\r\n    const $img = $(e.currentTarget).siblings('img')\r\n\r\n    // Confirmation message.\r\n    const message = editor.language.translate('Are you sure? Image will be deleted.')\r\n\r\n    // Ask for confirmation.\r\n    if (confirm(message)) {\r\n\r\n      // If the images delete URL is set.\r\n      if (editor.opts.imageManagerDeleteURL) {\r\n\r\n        // Before delete image event.\r\n        if (editor.events.trigger('imageManager.beforeDeleteImage', [$img]) !== false) {\r\n          $img.parent().addClass('fr-image-deleting')\r\n\r\n          // Make request to delete image from server.\r\n          $(this).ajax({\r\n            method: editor.opts.imageManagerDeleteMethod,\r\n            url: editor.opts.imageManagerDeleteURL,\r\n            data: Object.assign(Object.assign({ src: $img.attr('src') }, _getImageAttrs($img)), editor.opts.imageManagerDeleteParams),\r\n            crossDomain: editor.opts.requestWithCORS,\r\n            withCredentials: editor.opts.requestWithCredentials,\r\n            headers: editor.opts.requestHeaders,\r\n            // Success function\r\n            done: function (data, status, xhr) {\r\n              editor.events.trigger('imageManager.imageDeleted', [data])\r\n\r\n              // A deleted image may break the images order. Reorder them starting with this image.\r\n              const imgs = _getImages(parseInt($img.parent().attr('class').match(/fr-image-(\\d+)/)[1], 10) + 1)\r\n\r\n              // Remove the image.\r\n              $img.parent().remove()\r\n\r\n              // Reorder images.\r\n              _reorderImages(imgs)\r\n\r\n              // Update tags.\r\n              _updateTags()\r\n\r\n              // Modal needs resizing.\r\n              _resizeModal(true)\r\n            },\r\n            // Failure function\r\n            fail: function (xhr) {\r\n              _throwError(ERROR_DURING_DELETE, xhr.response || xhr.responseText)\r\n            }\r\n          })\r\n\r\n        }\r\n      }\r\n\r\n      // Throw missing imageManagerDeleteURL option error.\r\n      else {\r\n        _throwError(MISSING_DELETE_URL_OPTION)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Throw image manager errors.\r\n   */\r\n  function _throwError(code, response) {\r\n\r\n    // Load images error.\r\n    if (10 <= code && code < 20) {\r\n\r\n      // Hide preloader.\r\n      $preloader.hide()\r\n    }\r\n\r\n    // Delete image error.\r\n    else if (20 <= code && code < 30) {\r\n\r\n      // Remove deleting overlay.\r\n      $('.fr-image-deleting').removeClass('fr-image-deleting')\r\n    }\r\n\r\n    // Trigger error event.\r\n    editor.events.trigger('imageManager.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  /*\r\n   * Toogle (show or hide) image tags.\r\n   */\r\n  function _toggleTags() {\r\n    const title_height = $head.find('.fr-modal-head-line').outerHeight()\r\n    const tags_height = $image_tags.outerHeight()\r\n\r\n    // Use .fr-show-tags.\r\n    $head.toggleClass('fr-show-tags')\r\n\r\n    if ($head.hasClass('fr-show-tags')) {\r\n\r\n      // Show tags by changing height to have transition.\r\n      $head.css('height', title_height + tags_height)\r\n      // Shift the body by the same amount as the head\r\n      $body.css('marginTop', title_height + tags_height)\r\n      $image_tags.find('a').css('opacity', 1)\r\n    }\r\n\r\n    else {\r\n\r\n      // Hide tags by changing height to have transition.\r\n      $head.css('height', title_height)\r\n      $body.css('marginTop', title_height)\r\n      $image_tags.find('a').css('opacity', 0)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show only images with selected tags.\r\n   */\r\n  function _showImagesByTags() {\r\n\r\n    // Get all selected tags.\r\n    const $tags = $image_tags.find('.fr-selected-tag')\r\n\r\n    // Show only images with selected tags.\r\n    if ($tags.length > 0) {\r\n\r\n      // Hide all images.\r\n      $media_files.find('img').parents().show()\r\n\r\n      // Show only images with tag.\r\n      $tags.each(function (index, tag) {\r\n        $media_files.find('img').each(function (index, img) {\r\n          const $img = $(img)\r\n\r\n          if (!_imageHasTag($img, tag.text)) {\r\n            $img.parent().hide()\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // There are no more tags selected. Show all images.\r\n    else {\r\n      $media_files.find('img').parents().show()\r\n    }\r\n\r\n    // Rearrange images.\r\n    const imgs = _getImages()\r\n\r\n    // Reorder images.\r\n    _reorderImages(imgs)\r\n\r\n    // Load more images if necessary.\r\n    _infiniteScroll()\r\n  }\r\n\r\n  /*\r\n   * Select an image tag from the list.\r\n   */\r\n  function _selectTag(e) {\r\n    e.preventDefault()\r\n\r\n    // Toggle current tags class.\r\n    const $tag = $(e.currentTarget)\r\n    $tag.toggleClass('fr-selected-tag')\r\n\r\n    // Toggle selected tags.\r\n    if (editor.opts.imageManagerToggleTags) $tag.siblings('a').removeClass('fr-selected-tag')\r\n\r\n    // Change displayed images.\r\n    _showImagesByTags()\r\n  }\r\n\r\n  /*\r\n   * Method to check if an image has a specific tag.\r\n   */\r\n  function _imageHasTag($image, tag) {\r\n    const tags = ($image.attr('data-tag') || '').split(',')\r\n\r\n    for (let i = 0; i < tags.length; i++) {\r\n      if (tags[i] === tag) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function _delayedInit() {\r\n    $preloader = $modal.find('#fr-preloader')\r\n    $media_files = $modal.find('#fr-image-list')\r\n    $image_tags = $modal.find('#fr-modal-tags')\r\n\r\n    // Columns.\r\n    column_number = _columnNumber()\r\n    _buildColumns()\r\n\r\n    // Set height for title (we need this for show tags transition).\r\n    $head.css('height', $head.find('.fr-modal-head-line').outerHeight())\r\n\r\n    // Resize media manager modal on window resize.\r\n    editor.events.$on($(editor.o_win), 'resize', function () {\r\n\r\n      // Window resize with image manager opened.\r\n      if (images) {\r\n        _resizeModal(true)\r\n      }\r\n\r\n      // iOS window resize is triggered when modal first opens (no images loaded).\r\n      else {\r\n        _resizeModal(false)\r\n      }\r\n    })\r\n\r\n    // Insert image.\r\n    editor.events.bindClick($media_files, '.fr-insert-img', _insertImage)\r\n\r\n    // Delete image.\r\n    editor.events.bindClick($media_files, '.fr-delete-img', _deleteImage)\r\n\r\n    // Delete and insert buttons for mobile.\r\n    if (editor.helpers.isMobile()) {\r\n\r\n      // Show image buttons on mobile.\r\n      editor.events.bindClick($media_files, 'div.fr-image-container', function (e) {\r\n        $modal.find('.fr-mobile-selected').removeClass('fr-mobile-selected')\r\n        $(e.currentTarget).addClass('fr-mobile-selected')\r\n      })\r\n\r\n      // Hide image buttons if we click outside it.\r\n      $modal.on(editor._mousedown, function () {\r\n        $modal.find('.fr-mobile-selected').removeClass('fr-mobile-selected')\r\n      })\r\n    }\r\n\r\n    // Make sure we don't trigger blur.\r\n    $modal.on(editor._mousedown + ' ' + editor._mouseup, function (e) {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    // Mouse down on anything.\r\n    $modal.on(editor._mousedown, '*', function () {\r\n      editor.events.disableBlur()\r\n    })\r\n\r\n    // Infinite scroll\r\n    $body.on('scroll', _infiniteScroll)\r\n\r\n    // Click on image tags button.\r\n    editor.events.bindClick($modal, `button#fr-modal-more-${editor.sid}`, _toggleTags)\r\n\r\n    // Select an image tag.\r\n    editor.events.bindClick($image_tags, 'a', _selectTag)\r\n  }\r\n\r\n  /*\r\n   * Init media manager.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp && editor.el.tagName !== 'IMG') return false\r\n  }\r\n\r\n  return {\r\n    require: ['image'],\r\n    _init: _init,\r\n    show: show,\r\n    hide: hide\r\n  }\r\n}\r\n\r\nif (!FE.PLUGINS.image) {\r\n  throw new Error('Image manager plugin requires image plugin.')\r\n}\r\n\r\nFE.DEFAULTS.imageInsertButtons.push('imageManager')\r\n\r\nFE.RegisterCommand('imageManager', {\r\n  title: 'Browse',\r\n  undo: false,\r\n  focus: false,\r\n  modal: true,\r\n  callback: function () {\r\n    this.imageManager.show()\r\n  },\r\n  plugin: 'imageManager'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManager', {\r\n  NAME: 'folder',\r\n  SVG_KEY: 'imageManager'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManagerInsert', {\r\n  NAME: 'plus',\r\n  SVG_KEY: 'add'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('imageManagerDelete', {\r\n  NAME: 'trash',\r\n  SVG_KEY: 'remove'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  inlineClasses: {\r\n    'fr-class-code': 'Code',\r\n    'fr-class-highlighted': 'Highlighted',\r\n    'fr-class-transparency': 'Transparent'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.inlineClass = function (editor) {\r\n  const { $ } = editor\r\n  function apply(val) {\r\n    editor.format.toggle('span', { 'class': val })\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    $dropdown.find('.fr-command').each(function () {\r\n      const val = $(this).data('param1')\r\n      const active = editor.format.is('span', { 'class': val })\r\n      $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n    })\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the inlineClass size command.\r\nFE.RegisterCommand('inlineClass', {\r\n  type: 'dropdown',\r\n  title: 'Inline Class',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { inlineClasses : options } = this.opts\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"inlineClass\" data-param1=\"${val}\" title=\"${options[val]}\">${options[val]}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.inlineClass.apply(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.inlineClass.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'inlineClass'\r\n})\r\n\r\n// Add the inlineClass icon.\r\nFE.DefineIcon('inlineClass', {\r\n  NAME: 'tag',\r\n  SVG_KEY: 'inlineClass'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  inlineStyles: {\r\n    'Big Red': 'font-size: 20px; color: red;',\r\n    'Small Blue': 'font-size: 14px; color: blue;'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.inlineStyle = function (editor) {\r\n  function apply(val) {\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1934\r\n    const splits = val.split(';')\r\n\r\n    for (let i = 0; i < splits.length; i++) {\r\n      const new_split = splits[i].split(':')\r\n\r\n      if (splits[i].length && new_split.length == 2) {\r\n        editor.format.applyStyle(new_split[0].trim(), new_split[1].trim())\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply\r\n  }\r\n}\r\n\r\n// Register the inline style command.\r\nFE.RegisterCommand('inlineStyle', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.inlineStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        const inlineStyle = options[val] + (options[val].indexOf('display:block;') === -1 ? ' display:block;' : '')\r\n        c += `<li role=\"presentation\"><span style=\"${inlineStyle}\" role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"inlineStyle\" data-param1=\"${options[val]}\" title=\"${this.language.translate(val)}\">${this.language.translate(val)}</a></span></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Inline Style',\r\n  callback: function (cmd, val) {\r\n    this.inlineStyle.apply(val)\r\n  },\r\n  plugin: 'inlineStyle'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('inlineStyle', {\r\n  NAME: 'paint-brush',\r\n  SVG_KEY: 'inlineStyle'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  lineBreakerTags: ['table', 'hr', 'form', 'dl', 'span.fr-video', '.fr-embedly', 'img'],\r\n  lineBreakerOffset: 15,\r\n  lineBreakerHorizontalOffset: 10\r\n}) \r\n\r\nFE.PLUGINS.lineBreaker = function (editor) {\r\n  const $ = editor.$\r\n  let $line_breaker \r\n  let mouseDownFlag \r\n  let mouseMoveTimer \r\n\r\n  /*\r\n   * Show line breaker.\r\n   * Compute top, left, width and show the line breaker.\r\n   * tag1 and tag2 are the tags between which the line breaker must be showed.\r\n   * If tag1 is null then tag2 is the first tag in the editor.\r\n   * If tag2 is null then tag1 is the last tag in the editor.\r\n   */\r\n  function _show($tag1, $tag2) {\r\n    // Line breaker's possition and width.\r\n    let breakerTop \r\n    let breakerLeft \r\n    let breakerWidth \r\n    let parent_tag \r\n    let parent_top \r\n    let parent_bottom \r\n    let tag_top \r\n    let tag_bottom \r\n\r\n    // Mouse is over the first tag in the editor. Show line breaker above tag2.\r\n    if ($tag1 == null) {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag2.parent() \r\n      parent_top = parent_tag.offset().top \r\n      tag_top = $tag2.offset().top \r\n\r\n      breakerTop = tag_top - Math.min((tag_top - parent_top) / 2, editor.opts.lineBreakerOffset) \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    // Mouse is over the last tag in the editor. Show line breaker below tag1.\r\n    else if ($tag2 == null) {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag1.parent() \r\n      parent_bottom = parent_tag.offset().top + parent_tag.outerHeight() \r\n      tag_bottom = $tag1.offset().top + $tag1.outerHeight() \r\n\r\n      if (parent_bottom < tag_bottom) {\r\n        parent_tag = $(parent_tag).parent() \r\n        parent_bottom = parent_tag.offset().top + parent_tag.outerHeight() \r\n      }\r\n\r\n      breakerTop = tag_bottom + Math.min(Math.abs(parent_bottom - tag_bottom) / 2, editor.opts.lineBreakerOffset) \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    // Mouse is between the 2 tags.\r\n    else {\r\n      // Compute line breaker's possition and width.\r\n      parent_tag = $tag1.parent() \r\n      const tag1_bottom = $tag1.offset().top + $tag1.height() \r\n      const tag2_top = $tag2.offset().top \r\n\r\n      // Tags may be on the same line, so there is no need for line breaker.\r\n      if (tag1_bottom > tag2_top) {\r\n        return false \r\n      }\r\n\r\n      breakerTop = (tag1_bottom + tag2_top) / 2 \r\n      breakerWidth = parent_tag.outerWidth() \r\n      breakerLeft = parent_tag.offset().left \r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      breakerLeft += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      breakerTop += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    editor.$box.append($line_breaker) \r\n\r\n    // Set line breaker's top, left and width.\r\n    $line_breaker.css('top', breakerTop - editor.win.pageYOffset) \r\n    $line_breaker.css('left', breakerLeft - editor.win.pageXOffset) \r\n    $line_breaker.css('width', breakerWidth) \r\n    $line_breaker.data('tag1', $tag1) \r\n    $line_breaker.data('tag2', $tag2) \r\n\r\n    // Show the line breaker.\r\n    $line_breaker.addClass('fr-visible').data('instance', editor) \r\n  }\r\n\r\n  /*\r\n   * Check tag siblings.\r\n   * The line breaker hould appear if there is no sibling or if the sibling is also in the line breaker tags list.\r\n   */\r\n  function _checkTagSiblings($tag, mouseY) {\r\n\r\n    // Tag's Y top and bottom coordinate.\r\n    const tag_top = $tag.offset().top \r\n    const tag_bottom = $tag.offset().top + $tag.outerHeight() \r\n    let $sibling \r\n    let tag \r\n\r\n    // Only if the mouse is close enough to the bottom or top edges.\r\n    if (Math.abs(tag_bottom - mouseY) <= editor.opts.lineBreakerOffset ||\r\n      Math.abs(mouseY - tag_top) <= editor.opts.lineBreakerOffset) {\r\n\r\n      // Mouse is near bottom check for next sibling.\r\n      if (Math.abs(tag_bottom - mouseY) < Math.abs(mouseY - tag_top)) {\r\n        tag = $tag.get(0) \r\n        let next_node = null \r\n        if(tag.nextSibling)  {\r\n\r\n          // check for visible element\r\n          next_node = tag.nextSibling.offsetParent ? tag.nextSibling : null\r\n        }\r\n\r\n        while (next_node && next_node.nodeType == Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n          next_node = next_node.nextSibling \r\n        }\r\n\r\n        // Tag has next sibling.\r\n        if (next_node) {\r\n          $sibling = _checkTag(next_node) \r\n\r\n          // Sibling is in the line breaker tags list.\r\n          if ($sibling) {\r\n\r\n            // Show line breaker.\r\n            _show($tag, $sibling) \r\n\r\n            return true \r\n          }\r\n\r\n          // No next sibling.\r\n        }\r\n        else {\r\n\r\n          // Show line breaker\r\n          _show($tag, null) \r\n\r\n          return true \r\n        }\r\n      }\r\n\r\n      // Mouse is near top check for prev sibling.\r\n      else {\r\n        tag = $tag.get(0) \r\n\r\n        // No prev sibling.\r\n        if (!tag.previousSibling) {\r\n\r\n          // Show line breaker\r\n          _show(null, $tag) \r\n\r\n          return true \r\n\r\n          // Tag has prev sibling.\r\n        }\r\n        else {\r\n          $sibling = _checkTag(tag.previousSibling) \r\n\r\n          // Sibling is in the line breaker tags list.\r\n          if ($sibling) {\r\n\r\n            // Show line breaker.\r\n            _show($sibling, $tag) \r\n\r\n            return true \r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    $line_breaker.removeClass('fr-visible').removeData('instance') \r\n  }\r\n\r\n  /*\r\n   * Check if tag is in the line breaker list and in the editor as well.\r\n   * Returns the tag from the line breaker list or false if the tag is not in the list.\r\n   */\r\n  function _checkTag(tag) {\r\n    if (tag) {\r\n      const $tag = $(tag) \r\n\r\n      // Make sure tag is inside the editor.\r\n      if (editor.$el.find($tag).length === 0) return null \r\n\r\n      // Tag is in the line breaker tags list.\r\n      if (tag.nodeType != Node.TEXT_NODE && $tag.is(editor.opts.lineBreakerTags.join(','))) {\r\n\r\n        return $tag \r\n      }\r\n\r\n      // Tag's parent is in the line breaker tags list.\r\n      else if ($tag.parents(editor.opts.lineBreakerTags.join(',')).length > 0) {\r\n        tag = $tag.parents(editor.opts.lineBreakerTags.join(',')).get(0) \r\n\r\n        if (editor.$el.find($(tag)).length === 0 || !$(tag).is(editor.opts.lineBreakerTags.join(','))) return null \r\n\r\n        return $(tag) \r\n      }\r\n    }\r\n\r\n    return null \r\n  }\r\n\r\n  function _isInWp(tag) {\r\n    if (typeof tag.inFroalaWrapper != 'undefined') return tag.inFroalaWrapper \r\n    const o_tag = tag \r\n\r\n    while (tag.parentNode && tag.parentNode !== editor.$wp.get(0)) {\r\n      tag = tag.parentNode \r\n    }\r\n\r\n    o_tag.inFroalaWrapper = (tag.parentNode == editor.$wp.get(0)) \r\n\r\n    return o_tag.inFroalaWrapper \r\n  }\r\n\r\n  /*\r\n   * Look for tag at the specified coordinates.\r\n   */\r\n  function _tagAt(x, y) {\r\n    const tag = editor.doc.elementFromPoint(x, y) \r\n\r\n    // We found a tag.\r\n    if (tag && !$(tag).closest('.fr-line-breaker').length && !editor.node.isElement(tag) && tag != editor.$wp.get(0) && _isInWp(tag)) {\r\n      return tag \r\n    }\r\n\r\n    // No tag at x, y.\r\n    return null \r\n  }\r\n\r\n  /*\r\n   * Look for tags above and bellow the specificed point.\r\n   */\r\n  function _searchTagVertically(x, y, step) {\r\n    let i = step \r\n    let tag = null \r\n\r\n    // Look up and down until a tag is found or the line breaker offset is reached.\r\n    while (i <= editor.opts.lineBreakerOffset && !tag) {\r\n\r\n      // Look for tag above.\r\n      tag = _tagAt(x, y - i) \r\n\r\n      if (!tag) {\r\n\r\n        // Look for tag below.\r\n        tag = _tagAt(x, y + i) \r\n      }\r\n\r\n      i += step \r\n    }\r\n\r\n    return tag \r\n  }\r\n\r\n  /*\r\n   * Look for tag left and right, up and down for each point.\r\n   */\r\n  function _searchTagHorizontally(x, y, direction) {\r\n    let tag = null \r\n\r\n    // Do not check left / right too much.\r\n    let limit = 100 \r\n\r\n    // Look left / right until a tag is found or the editor margins are reached.\r\n    while (!tag && x > editor.$box.offset().left && x < editor.$box.offset().left + editor.$box.outerWidth() && limit > 0) {\r\n      tag = _tagAt(x, y) \r\n\r\n      // There's not tag here, look up and down.\r\n      if (!tag) {\r\n\r\n        // Look 5px up and 5 down.\r\n        tag = _searchTagVertically(x, y, 5) \r\n      }\r\n\r\n      // Move left or right.\r\n      if (direction == 'left') x -= editor.opts.lineBreakerHorizontalOffset \r\n      else x += editor.opts.lineBreakerHorizontalOffset \r\n\r\n      limit -= editor.opts.lineBreakerHorizontalOffset \r\n    }\r\n\r\n    return tag \r\n  }\r\n\r\n  /*\r\n   * Get the tag under the mouse cursor.\r\n   */\r\n  function _tagUnder(e) {\r\n    mouseMoveTimer = null \r\n\r\n    // The tag for which the line breaker should be showed.\r\n    let $tag = null \r\n    let tag = null \r\n\r\n    // The tag under the mouse cursor.\r\n    const tag_under = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset) \r\n\r\n    // Tag is the editor element. Look for closest tag above and bellow, left and right.\r\n    if (tag_under && (tag_under.tagName == 'HTML' || tag_under.tagName == 'BODY' || editor.node.isElement(tag_under) || (tag_under.getAttribute('class') || '').indexOf('fr-line-breaker') >= 0)) {\r\n\r\n      // Look 1px up and 1 down.\r\n      tag = _searchTagVertically(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset, 1) \r\n\r\n      // Stil haven't found a tag, look left.\r\n      if (!tag) {\r\n        tag = _searchTagHorizontally(e.pageX - editor.win.pageXOffset - editor.opts.lineBreakerHorizontalOffset, e.pageY - editor.win.pageYOffset, 'left') \r\n      }\r\n\r\n      // Stil haven't found a tag, look right.\r\n      if (!tag) {\r\n        tag = _searchTagHorizontally(e.pageX - editor.win.pageXOffset + editor.opts.lineBreakerHorizontalOffset, e.pageY - editor.win.pageYOffset, 'right') \r\n      }\r\n\r\n      $tag = _checkTag(tag) \r\n\r\n      // Tag is not the editor element.\r\n    }\r\n    else {\r\n\r\n      // Check if the tag is in the line breaker list.\r\n      $tag = _checkTag(tag_under) \r\n    }\r\n\r\n    // Check tag siblings.\r\n    if ($tag) {\r\n      _checkTagSiblings($tag, e.pageY) \r\n    }\r\n    else if (editor.core.sameInstance($line_breaker)) {\r\n      $line_breaker.removeClass('fr-visible').removeData('instance') \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Set mouse timer to improve performance.\r\n   */\r\n  function _mouseTimer(e) {\r\n    if ($line_breaker.hasClass('fr-visible') && !editor.core.sameInstance($line_breaker)) return false \r\n\r\n    if (editor.popups.areVisible() || editor.el.querySelector('.fr-selected-cell')) {\r\n      $line_breaker.removeClass('fr-visible') \r\n\r\n      return true \r\n    }\r\n\r\n    if (mouseDownFlag === false && !editor.edit.isDisabled()) {\r\n      if (mouseMoveTimer) {\r\n        clearTimeout(mouseMoveTimer) \r\n      }\r\n\r\n      mouseMoveTimer = setTimeout(_tagUnder, 30, e) \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hide line breaker and prevent timer from showing it again.\r\n   */\r\n  function _hide() {\r\n    if (mouseMoveTimer) {\r\n      clearTimeout(mouseMoveTimer) \r\n    }\r\n\r\n    if ($line_breaker && $line_breaker.hasClass('fr-visible')) {\r\n      $line_breaker.removeClass('fr-visible').removeData('instance') \r\n    }\r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is down and prevent line breaker from showing.\r\n   * This may happen either for selection or for drag.\r\n   */\r\n  const _mouseDown = () => {\r\n    mouseDownFlag = true \r\n    _hide() \r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is no longer pressed.\r\n   */\r\n  const _mouseUp = () => {\r\n    mouseDownFlag = false \r\n  }\r\n\r\n  /*\r\n   * Add new line between the tags.\r\n   */\r\n  function _doLineBreak(e) {\r\n    e.preventDefault() \r\n\r\n    const instance = $line_breaker.data('instance') || editor \r\n\r\n    // Hide the line breaker.\r\n    $line_breaker.removeClass('fr-visible').removeData('instance') \r\n\r\n    // Tags between which that line break needs to be done.\r\n    const $tag1 = $line_breaker.data('tag1') \r\n    const $tag2 = $line_breaker.data('tag2') \r\n\r\n    // P, DIV or none.\r\n    const default_tag = editor.html.defaultTag() \r\n\r\n    // The line break needs to be done before the first element in the editor.\r\n    if ($tag1 == null) {\r\n\r\n      // If the tag is in a TD tag then just add <br> no matter what the default_tag is.\r\n      if (default_tag && $tag2.parent().get(0).tagName != 'TD' && $tag2.parents(default_tag).length === 0) {\r\n        $tag2.before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $tag2.before(`${FE.MARKERS}<br>`) \r\n      }\r\n\r\n      // The line break needs to be done either after the last element in the editor or between the 2 tags.\r\n      // Either way the line break is after the first tag.\r\n    }\r\n    else {\r\n\r\n      // If the tag is in a TD tag then just add <br> no matter what the default_tag is.\r\n      if (default_tag && $tag1.parent().get(0).tagName != 'TD' && $tag1.parents(default_tag).length === 0) {\r\n        $tag1.after(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $tag1.after(`${FE.MARKERS}<br>`) \r\n      }\r\n    }\r\n\r\n    // Cursor is now at the beginning of the new line.\r\n    instance.selection.restore()\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n    // enable toolbar if it is disabled because of contenteditable=false\r\n    editor.toolbar.enable();\r\n  }\r\n\r\n  /*\r\n   * Initialize the line breaker.\r\n   */\r\n  function _initLineBreaker() {\r\n\r\n    // Append line breaker HTML to editor wrapper.\r\n    if (!editor.shared.$line_breaker) {\r\n      editor.shared.$line_breaker = $(document.createElement('div')).attr('class', 'fr-line-breaker').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Break')}\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><rect x=\"17\" y=\"7\" width=\"2\" height=\"8\"/><rect x=\"10\" y=\"13\" width=\"7\" height=\"2\"/><path d=\"M10.000,10.000 L10.000,18.013 L5.000,14.031 L10.000,10.000 Z\"/></svg></a>`)\r\n    }\r\n\r\n    $line_breaker = editor.shared.$line_breaker \r\n\r\n    // Editor shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $line_breaker.html('').removeData().remove() \r\n      $line_breaker = null \r\n    }, true) \r\n\r\n    // Editor destroy.\r\n    editor.events.on('destroy', function () {\r\n      $line_breaker.removeData('instance').removeClass('fr-visible')\r\n      $('body').first().append($line_breaker)\r\n      clearTimeout(mouseMoveTimer)\r\n    }, true)\r\n\r\n    editor.events.$on($line_breaker, 'mousemove', function (e) {\r\n      e.stopPropagation() \r\n    }, true)\r\n\r\n    // Add new line break.\r\n    editor.events.bindClick($line_breaker, 'a', _doLineBreak) \r\n  }\r\n\r\n  /*\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false \r\n\r\n    _initLineBreaker() \r\n\r\n    // Remember if mouse is clicked so the line breaker does not appear.\r\n    mouseDownFlag = false \r\n\r\n    // Check tags under the mouse to see if the line breaker needs to be shown.\r\n    editor.events.$on(editor.$win, 'mousemove', _mouseTimer) \r\n\r\n    // Hide the line breaker if the page is scrolled.\r\n    editor.events.$on($(editor.win), 'scroll', _hide) \r\n\r\n    // Hide the line breaker on cell edit.\r\n    editor.events.on('popups.show.table.edit', _hide) \r\n\r\n    // Hide the line breaker after command is ran.\r\n    editor.events.on('commands.after', _hide) \r\n\r\n    // Prevent line breaker from showing while selecting text or dragging images.\r\n    editor.events.$on($(editor.win), 'mousedown', _mouseDown) \r\n\r\n    // Mouse is not pressed anymore, line breaker may be shown.\r\n    editor.events.$on($(editor.win), 'mouseup', _mouseUp) \r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n} \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  lineHeights: {\r\n    Default: '',\r\n    Single: '1',\r\n    '1.15': '1.15',\r\n    '1.5': '1.5',\r\n    Double: '2'\r\n  }\r\n})\r\n\r\nFE.PLUGINS.lineHeight = function (editor) {\r\n  const { $ } = editor\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val) {\r\n    editor.selection.save() \r\n    editor.html.wrap(true, true, true, true) \r\n    editor.selection.restore() \r\n\r\n    const blocks = editor.selection.blocks() \r\n\r\n    if (blocks.length && $(blocks[0]).parent().is('td')) {\r\n      editor.format.applyStyle('line-height', val.toString())\r\n    }\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save() \r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      $(blocks[i]).css('line-height', val)\r\n\r\n      if ($(blocks[i]).attr('style') === '') {\r\n        $(blocks[i]).removeAttr('style') \r\n      }\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    // Restore selection.\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks() \r\n\r\n    if (blocks.length) {\r\n      const $blk = $(blocks[0]) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const lineH = $(this).data('param1')\r\n        const blkStyle = $blk.attr('style')\r\n        let active = (blkStyle || '').indexOf('line-height: ' + lineH + ';') >= 0\r\n        \r\n        // Check if style contains line-height property, when text is pasted from other sources\r\n        // If not make `default` text selected\r\n        if (blkStyle) {\r\n          const lineStyle = blkStyle.substring(blkStyle.indexOf('line-height'))\r\n          const value  = lineStyle.substr(0, lineStyle.indexOf(';'))\r\n\r\n          // get value of line-height\r\n          const lineHeight = value && value.split(':')[1]\r\n\r\n          if ((!lineHeight || !lineHeight.length) && $blk.text() === 'Default') {\r\n            active = true\r\n          }\r\n        }\r\n\r\n        // keep `default` text selected always\r\n        if((!blkStyle || blkStyle.indexOf('line-height') === -1) && lineH === '') {\r\n          active = true\r\n        }\r\n\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active) \r\n      })\r\n    }\r\n  }\r\n\r\n  const _init = () => {\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('lineHeight', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { lineHeights : options } = this.opts \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"lineHeight\" data-param1=\"${options[val]}\" title=\"${this.language.translate(val)}\">${this.language.translate(val)}</a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  title: 'Line Height',\r\n  callback: function (cmd, val) {\r\n    this.lineHeight.apply(val) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.lineHeight.refreshOnShow($btn, $dropdown) \r\n  },\r\n  plugin: 'lineHeight'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('lineHeight', {\r\n  NAME: 'arrows-v',\r\n  FA5NAME: 'arrows-alt-v',\r\n  SVG_KEY: 'lineHeight'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'link.edit': '[_BUTTONS_]',\r\n  'link.insert': '[_BUTTONS_][_INPUT_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  linkEditButtons: ['linkOpen', 'linkStyle', 'linkEdit', 'linkRemove'],\r\n  linkInsertButtons: ['linkBack', '|', 'linkList'],\r\n  linkAttributes: {},\r\n  linkAutoPrefix: 'http://',\r\n  linkStyles: {\r\n    'fr-green': 'Green',\r\n    'fr-strong': 'Thick'\r\n  },\r\n  linkMultipleStyles: true,\r\n  linkConvertEmailAddress: true,\r\n  linkAlwaysBlank: false,\r\n  linkAlwaysNoFollow: false,\r\n  linkNoOpener: true,\r\n  linkNoReferrer: true,\r\n  linkList: [\r\n    {\r\n      text: 'Froala',\r\n      href: 'https://froala.com',\r\n      target: '_blank'\r\n    },\r\n    {\r\n      text: 'Google',\r\n      href: 'https://google.com',\r\n      target: '_blank'\r\n    },\r\n    {\r\n      displayText: 'Facebook',\r\n      href: 'https://facebook.com'\r\n    }\r\n  ],\r\n  linkText: true\r\n})\r\n\r\nFE.PLUGINS.link = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function get() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image && editor.$wp) {\r\n      let c_el = editor.selection.ranges(0).commonAncestorContainer \r\n\r\n      try {\r\n        if (c_el && ((c_el.contains && c_el.contains(editor.el)) || !editor.el.contains(c_el) || editor.el == c_el)) c_el = null \r\n      }\r\n      catch (ex) {\r\n        c_el = null \r\n      }\r\n\r\n      if (c_el && c_el.tagName === 'A') return c_el \r\n      let s_el = editor.selection.element() \r\n      let e_el = editor.selection.endElement() \r\n\r\n      if (s_el.tagName != 'A' && !editor.node.isElement(s_el)) {\r\n        s_el = $(s_el).parentsUntil(editor.$el, 'a').first().get(0) \r\n      }\r\n\r\n      if (e_el.tagName != 'A' && !editor.node.isElement(e_el)) {\r\n        e_el = $(e_el).parentsUntil(editor.$el, 'a').first().get(0) \r\n      }\r\n\r\n      try {\r\n        if (e_el && ((e_el.contains && e_el.contains(editor.el)) || !editor.el.contains(e_el) || editor.el == e_el)) e_el = null \r\n      }\r\n      catch (ex) {\r\n        e_el = null \r\n      }\r\n\r\n      try {\r\n        if (s_el && ((s_el.contains && s_el.contains(editor.el)) || !editor.el.contains(s_el) || editor.el == s_el)) s_el = null \r\n      }\r\n      catch (ex) {\r\n        s_el = null \r\n      }\r\n\r\n      if (e_el && e_el == s_el && e_el.tagName == 'A') {\r\n\r\n        // We do not clicking at the end / input of links because in IE the selection is changing shortly after mouseup.\r\n        // https://jsfiddle.net/jredzam3/\r\n        if ((editor.browser.msie || editor.helpers.isMobile()) && (editor.selection.info(s_el).atEnd || editor.selection.info(s_el).atStart)) {\r\n          return null \r\n        }\r\n\r\n        return s_el \r\n      }\r\n\r\n      return null \r\n    }\r\n    else if (editor.el.tagName == 'A') {\r\n\r\n      return editor.el \r\n    }\r\n    else {\r\n      if ($current_image && $current_image.get(0).parentNode && $current_image.get(0).parentNode.tagName == 'A') {\r\n\r\n        return $current_image.get(0).parentNode \r\n      }\r\n    }\r\n  }\r\n\r\n  function allSelected() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n    const selectedLinks = [] \r\n\r\n    if ($current_image) {\r\n      if ($current_image.get(0).parentNode.tagName == 'A') {\r\n        selectedLinks.push($current_image.get(0).parentNode) \r\n      }\r\n    }\r\n    else {\r\n      let range \r\n      let containerEl \r\n      let links \r\n      let linkRange \r\n\r\n      if (editor.win.getSelection) {\r\n        const sel = editor.win.getSelection() \r\n\r\n        if (sel.getRangeAt && sel.rangeCount) {\r\n          linkRange = editor.doc.createRange() \r\n\r\n          for (let r = 0; r < sel.rangeCount; ++r) {\r\n            range = sel.getRangeAt(r) \r\n            containerEl = range.commonAncestorContainer \r\n\r\n            if (containerEl && containerEl.nodeType != 1) {\r\n              containerEl = containerEl.parentNode \r\n            }\r\n\r\n            if (containerEl && containerEl.nodeName.toLowerCase() == 'a') {\r\n              selectedLinks.push(containerEl) \r\n            }\r\n            else {\r\n              links = containerEl.getElementsByTagName('a') \r\n\r\n              for (let i = 0; i < links.length; ++i) {\r\n                linkRange.selectNodeContents(links[i]) \r\n\r\n                if (linkRange.compareBoundaryPoints(range.END_TO_START, range) < 1 && linkRange.compareBoundaryPoints(range.START_TO_END, range) > -1) {\r\n                  selectedLinks.push(links[i]) \r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // linkRange.detach() \r\n        }\r\n      }\r\n      else if (editor.doc.selection && editor.doc.selection.type != 'Control') {\r\n        range = editor.doc.selection.createRange() \r\n        containerEl = range.parentElement() \r\n\r\n        if (containerEl.nodeName.toLowerCase() == 'a') {\r\n          selectedLinks.push(containerEl) \r\n        }\r\n        else {\r\n          links = containerEl.getElementsByTagName('a') \r\n          linkRange = editor.doc.body.createTextRange() \r\n\r\n          for (let j = 0; j < links.length; ++j) {\r\n            linkRange.moveToElementText(links[j]) \r\n\r\n            if (linkRange.compareEndPoints('StartToEnd', range) > -1 && linkRange.compareEndPoints('EndToStart', range) < 1) {\r\n              selectedLinks.push(links[j]) \r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return selectedLinks \r\n  }\r\n\r\n  function _edit(e) {\r\n    if (editor.core.hasFocus()) {\r\n      _hideEditPopup() \r\n\r\n      // Do not show edit popup for link when ALT is hit.\r\n      if (e && e.type === 'keyup' && (e.altKey || e.which == FE.KEYCODE.ALT)) return true \r\n\r\n      setTimeout(function () {\r\n\r\n        // No event passed.\r\n        // Event passed and (left click or other event type).\r\n        if (!e || (e && (e.which == 1 || e.type != 'mouseup'))) {\r\n          const link = get() \r\n          const $current_image = editor.image ? editor.image.get() : null \r\n\r\n          if (link && !$current_image) {\r\n            if (editor.image) {\r\n              const contents = editor.node.contents(link) \r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1103\r\n              if (contents.length == 1 && contents[0].tagName == 'IMG') {\r\n                const range = editor.selection.ranges(0) \r\n\r\n                if (range.startOffset === 0 && range.endOffset === 0) {\r\n                  $(link).before(FE.MARKERS) \r\n                }\r\n                else {\r\n                  $(link).after(FE.MARKERS) \r\n                }\r\n\r\n                editor.selection.restore() \r\n\r\n                return false \r\n              }\r\n            }\r\n\r\n            if (e) {\r\n              e.stopPropagation() \r\n            }\r\n            _showEditPopup(link) \r\n          }\r\n        }\r\n      }, editor.helpers.isIOS() ? 100 : 0) \r\n    }\r\n  }\r\n\r\n  function _showEditPopup(link) {\r\n    let $popup = editor.popups.get('link.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    const $link = $(link) \r\n\r\n    if (!editor.popups.isVisible('link.edit')) {\r\n      editor.popups.refresh('link.edit') \r\n    }\r\n    editor.popups.setContainer('link.edit', editor.$sc) \r\n    const left = $link.offset().left + $link.outerWidth() / 2\r\n    const top = $link.offset().top + $link.outerHeight()\r\n\r\n    editor.popups.show('link.edit', left, top, $link.outerHeight(), true) \r\n  }\r\n\r\n  function _hideEditPopup() {\r\n    editor.popups.hide('link.edit') \r\n  }\r\n\r\n  function _initEditPopup() {\r\n\r\n    // Link buttons.\r\n    let link_buttons = '' \r\n\r\n    if (editor.opts.linkEditButtons.length >= 1) {\r\n      if (editor.el.tagName == 'A' && editor.opts.linkEditButtons.indexOf('linkRemove') >= 0) {\r\n        editor.opts.linkEditButtons.splice(editor.opts.linkEditButtons.indexOf('linkRemove'), 1) \r\n      }\r\n\r\n      link_buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.linkEditButtons)}</div>` \r\n    }\r\n\r\n    const template = {\r\n      buttons: link_buttons\r\n    } \r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('link.edit', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-edit', function () {\r\n        if (get() && editor.popups.isVisible('link.edit')) {\r\n          _showEditPopup(get()) \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Hide link insert popup.\r\n   */\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('link.insert') \r\n    const link = get() \r\n\r\n    if (link) {\r\n      const $link = $(link) \r\n      const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n      const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n      let i \r\n      let $input \r\n\r\n      for (i = 0; i < text_inputs.length; i++) {\r\n        $input = $(text_inputs[i]) \r\n        $input.val($link.attr($input.attr('name') || '')) \r\n      }\r\n\r\n      check_inputs.attr('checked', false) \r\n\r\n      for (i = 0; i < check_inputs.length; i++) {\r\n        $input = $(check_inputs[i]) \r\n\r\n        if ($link.attr($input.attr('name')) == $input.data('checked')) {\r\n          $input.attr('checked', true) \r\n        }\r\n      }\r\n\r\n      $popup.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val($link.text()) \r\n    }\r\n    else {\r\n      $popup.find('input.fr-link-attr[type=\"text\"]').val('') \r\n      $popup.find('input.fr-link-attr[type=\"checkbox\"]').attr('checked', false)\r\n      $popup.find('input.fr-link-attr[type=\"text\"][name=\"text\"]').val(editor.selection.text()) \r\n    }\r\n    $popup.find('input.fr-link-attr').trigger('change') \r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if ($current_image) {\r\n      $popup.find('.fr-link-attr[name=\"text\"]').parent().hide() \r\n    }\r\n    else {\r\n      $popup.find('.fr-link-attr[name=\"text\"]').parent().show() \r\n    }\r\n  }\r\n\r\n  function _showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertLink\"]') \r\n    let $popup = editor.popups.get('link.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('link.insert') \r\n      editor.popups.setContainer('link.insert', editor.$tb || editor.$sc) \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)      \r\n        editor.popups.show('link.insert', left, top, $btn.outerHeight()) \r\n      }\r\n      else {\r\n        editor.position.forSelection($popup) \r\n        editor.popups.show('link.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('link.insert', _refreshInsertPopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Image buttons.\r\n    let link_buttons = '' \r\n\r\n    if (editor.opts.linkInsertButtons.length >= 1) {\r\n      link_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.linkInsertButtons)}</div>` \r\n    }\r\n\r\n    const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>' \r\n\r\n    // Image by url layer.\r\n    let input_layer = '' \r\n    let tab_idx = 0 \r\n    input_layer = `<div class=\"fr-link-insert-layer fr-layer fr-active\" id=\"fr-link-insert-layer-${editor.id}\">` \r\n    input_layer += `<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-url-${editor.id}\" name=\"href\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate('URL')}\" tabIndex=\"${(++tab_idx)}\"></div>` \r\n\r\n    if (editor.opts.linkText) {\r\n      input_layer += `<div class=\"fr-input-line\"><input id=\"fr-link-insert-layer-text-${editor.id}\" name=\"text\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate('Text')}\" tabIndex=\"${(++tab_idx)}\"></div>`\r\n    }\r\n\r\n    // Add any additional fields.\r\n    for (const attr in editor.opts.linkAttributes) {\r\n      if (editor.opts.linkAttributes.hasOwnProperty(attr)) {\r\n        const placeholder = editor.opts.linkAttributes[attr] \r\n        input_layer += `<div class=\"fr-input-line\"><input name=\"${attr}\" type=\"text\" class=\"fr-link-attr\" placeholder=\"${editor.language.translate(placeholder)}\" tabIndex=\"${(++tab_idx)}\"></div>` \r\n      }\r\n    }\r\n\r\n    if (!editor.opts.linkAlwaysBlank) {\r\n      input_layer += `<div class=\"fr-checkbox-line\"><span class=\"fr-checkbox\"><input name=\"target\" class=\"fr-link-attr\" data-checked=\"_blank\" type=\"checkbox\" id=\"fr-link-target-${editor.id}\" tabIndex=\"${(++tab_idx)}\"><span>${checkmark}</span></span><label id=\"fr-label-target-${editor.id}\">${editor.language.translate('Open in new tab')}</label></div>`\r\n    }\r\n\r\n    input_layer += `<div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" role=\"button\" data-cmd=\"linkInsert\" href=\"#\" tabIndex=\"${(++tab_idx)}\" type=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: link_buttons,\r\n      input_layer: input_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('link.insert', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-insert', function () {\r\n        const $current_image = editor.image ? editor.image.get() : null \r\n\r\n        if ($current_image && editor.popups.isVisible('link.insert')) {\r\n          imageLink() \r\n        }\r\n\r\n        if (get && editor.popups.isVisible('link.insert')) {\r\n          update() \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  function remove() {\r\n    const link = get() \r\n\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (editor.events.trigger('link.beforeRemove', [link]) === false) return false\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/3110\r\n    // Check if image has caption and handle the unlink to retain caption\r\n    if ($current_image && link) {\r\n      if (editor.image.hasCaption()) {\r\n\r\n        $current_image.addClass('img-link-caption');\r\n        $(link).replaceWith($(link).html())\r\n        var newImg = document.querySelectorAll('img.img-link-caption')\r\n        editor.image.edit($(newImg[0]))\r\n        $(newImg[0]).removeClass('img-link-caption');\r\n\r\n      } else {\r\n        $current_image.unwrap()\r\n        editor.image.edit($current_image)\r\n      }\r\n    }\r\n    else if (link) {\r\n      editor.selection.save() \r\n      $(link).replaceWith($(link).html()) \r\n      editor.selection.restore() \r\n      _hideEditPopup() \r\n    }\r\n  }\r\n\r\n  function _init() {\r\n\r\n    // Edit on keyup.\r\n    editor.events.on('keyup', function (e) {\r\n      if (e.which != FE.KEYCODE.ESC) {\r\n        _edit(e) \r\n      }\r\n    }) \r\n\r\n    editor.events.on('window.mouseup', _edit) \r\n\r\n    // Do not follow links when edit is disabled.\r\n    editor.events.$on(editor.$el, 'click', 'a', function (e) {\r\n      if (editor.edit.isDisabled()) {\r\n        e.preventDefault() \r\n      }\r\n    }) \r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', _edit) \r\n    }\r\n\r\n    _initInsertPopup(true) \r\n\r\n    // Init on link.\r\n    if (editor.el.tagName == 'A') {\r\n      editor.$el.addClass('fr-view') \r\n    }\r\n\r\n    // Hit ESC when focus is in link edit popup.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if (editor.popups.isVisible('link.edit')) {\r\n        editor.events.disableBlur() \r\n        editor.events.focus() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n  }\r\n\r\n  function usePredefined(val) {\r\n    const link = editor.opts.linkList[val] \r\n    const $popup = editor.popups.get('link.insert') \r\n    const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n    const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n    let $input \r\n    let i \r\n\r\n    // Add rel attribute to the popup if it exists\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/831\r\n    if (link.rel) {\r\n      $popup.rel = link.rel\r\n    }\r\n\r\n    for (i = 0; i < text_inputs.length; i++) {\r\n      $input = $(text_inputs[i]) \r\n\r\n      if (link[$input.attr('name')]) {\r\n        $input.val(link[$input.attr('name')])\r\n        \r\n        // Mark the input box as non empty for transition\r\n        $input.toggleClass('fr-not-empty', true)\r\n      }\r\n      else if ($input.attr('name') != 'text') {\r\n        $input.val('') \r\n      }\r\n    }\r\n\r\n    for (i = 0; i < check_inputs.length; i++) {\r\n      $input = $(check_inputs[i]) \r\n      $input.attr('checked', $input.data('checked') == link[$input.attr('name')])\r\n    }\r\n    editor.accessibility.focusPopup($popup) \r\n  }\r\n\r\n  function insertCallback() {\r\n    const $popup = editor.popups.get('link.insert') \r\n    const text_inputs = $popup.find('input.fr-link-attr[type=\"text\"]') \r\n    const check_inputs = $popup.find('input.fr-link-attr[type=\"checkbox\"]') \r\n    const href = (text_inputs.filter('[name=\"href\"]').val() || '').trim() \r\n    const text = (editor.opts.linkText) ? text_inputs.filter('[name=\"text\"]').val() : \"\";\r\n    const attrs = {}\r\n    let $input \r\n    let i \r\n\r\n    for (i = 0; i < text_inputs.length; i++) {\r\n      $input = $(text_inputs[i]) \r\n\r\n      if (['href', 'text'].indexOf($input.attr('name')) < 0) {\r\n        attrs[$input.attr('name')] = $input.val() \r\n      }\r\n    }\r\n\r\n    for (i = 0; i < check_inputs.length; i++) {\r\n      $input = $(check_inputs[i]) \r\n\r\n      if ($input.is(':checked')) {\r\n        attrs[$input.attr('name')] = $input.data('checked') \r\n      }\r\n      else {\r\n        attrs[$input.attr('name')] = $input.data('unchecked') || null \r\n      }\r\n    }\r\n\r\n    // check for rel attritube here\r\n    $popup.rel ? attrs.rel = $popup.rel : ''\r\n\r\n    const t = editor.helpers.scrollTop() \r\n    insert(href, text, attrs) \r\n    $(editor.o_win).scrollTop(t) \r\n  }\r\n\r\n  function _split() {\r\n    if (!editor.selection.isCollapsed()) {\r\n      editor.selection.save() \r\n      let markers = editor.$el.find('.fr-marker').addClass('fr-unprocessed').toArray() \r\n\r\n      while (markers.length) {\r\n        const $marker = $(markers.pop()) \r\n        $marker.removeClass('fr-unprocessed') \r\n\r\n        // Get deepest parent.\r\n        const deep_parent = editor.node.deepestParent($marker.get(0)) \r\n\r\n        if (deep_parent) {\r\n          let node = $marker.get(0) \r\n          let close_str = '' \r\n          let open_str = '' \r\n\r\n          do {\r\n            node = node.parentNode \r\n\r\n            if (!editor.node.isBlock(node)) {\r\n              close_str = close_str + editor.node.closeTagString(node) \r\n              open_str = editor.node.openTagString(node) + open_str \r\n            }\r\n          } while (node != deep_parent) \r\n\r\n          const marker_str = editor.node.openTagString($marker.get(0)) + $marker.html() + editor.node.closeTagString($marker.get(0)) \r\n\r\n          $marker.replaceWith('<span id=\"fr-break\"></span>') \r\n          let { outerHTML : h } = deep_parent \r\n\r\n          //  https://github.com/froala/wysiwyg-editor/issues/3048\r\n\r\n          h = h.replace(/<span id=\"fr-break\"><\\/span>/g, close_str + marker_str + open_str) \r\n          h = h.replace(open_str + close_str, '') \r\n\r\n          deep_parent.outerHTML = h \r\n        }\r\n\r\n        markers = editor.$el.find('.fr-marker.fr-unprocessed').toArray() \r\n      }\r\n\r\n\r\n      editor.html.cleanEmptyTags() \r\n\r\n      editor.selection.restore() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert link into the editor.\r\n   */\r\n  function insert(href, text, attrs) {\r\n    if (typeof attrs == 'undefined') attrs = {} \r\n\r\n    if (editor.events.trigger('link.beforeInsert', [href, text, attrs]) === false) return false \r\n\r\n    // Get image if we have one selected.\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image && editor.el.tagName != 'A') {\r\n      editor.selection.restore() \r\n      editor.popups.hide('link.insert') \r\n    }\r\n    else if (editor.el.tagName == 'A') {\r\n      editor.$el.focus() \r\n    }\r\n\r\n    const original_href = href \r\n\r\n    // Convert email address.\r\n    if (editor.opts.linkConvertEmailAddress) {\r\n      if (editor.helpers.isEmail(href) && !/^mailto:.*/i.test(href)) {\r\n        href = `mailto:${href}` \r\n      }\r\n    }\r\n\r\n    // Check if is local path.\r\n    const local_path = /^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i \r\n\r\n    // Add autoprefix.\r\n    if (editor.opts.linkAutoPrefix !== '' && !new RegExp('^(' + FE.LinkProtocols.join('|') + '):.', 'i').test(href) && !/^data:image.*/i.test(href) && !/^(https?:|ftps?:|file:|)\\/\\//i.test(href) && !local_path.test(href)) {\r\n\r\n      // Do prefix only if starting character is not absolute.\r\n      if (['/', '{', '[', '#', '(', '.'].indexOf((href || '')[0]) < 0) {\r\n        href = editor.opts.linkAutoPrefix + href\r\n      }\r\n    }\r\n\r\n    // Sanitize the URL.\r\n    href = editor.helpers.sanitizeURL(href) \r\n\r\n    // Default attributs.\r\n    if (editor.opts.linkAlwaysBlank) attrs.target = '_blank' \r\n\r\n    if (editor.opts.linkAlwaysNoFollow) attrs.rel = 'nofollow' \r\n\r\n    if (editor.helpers.isEmail(original_href)) {\r\n      attrs.target = null \r\n      attrs.rel = null \r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1576.\r\n    if (attrs.target == '_blank') {\r\n      if (editor.opts.linkNoOpener) {\r\n        if (!attrs.rel) attrs.rel = 'noopener' \r\n        else attrs.rel += ' noopener' \r\n      }\r\n\r\n      if (editor.opts.linkNoReferrer) {\r\n        if (!attrs.rel) attrs.rel = 'noreferrer' \r\n        else attrs.rel += ' noreferrer' \r\n      }\r\n    }\r\n    else if (attrs.target == null) {\r\n      if (attrs.rel) {\r\n        attrs.rel = attrs.rel.replace(/noopener/, '').replace(/noreferrer/, '') \r\n      }\r\n      else {\r\n        attrs.rel = null \r\n      }\r\n    }\r\n\r\n    // Format text.\r\n    text = text || '' \r\n\r\n    if (href === editor.opts.linkAutoPrefix) {\r\n      const $popup = editor.popups.get('link.insert') \r\n      $popup.find('input[name=\"href\"]').addClass('fr-error') \r\n      editor.events.trigger('link.bad', [original_href]) \r\n\r\n      return false \r\n    }\r\n\r\n    // Check if we have selection only in one link.\r\n    const link = get() \r\n    let $link \r\n\r\n    if (link) {\r\n      $link = $(link) \r\n\r\n      $link.attr('href', href) \r\n\r\n      // Change text if it is different.\r\n      if (text.length > 0 && $link.text() != text && !$current_image) {\r\n        let child = $link.get(0) \r\n\r\n        while (child.childNodes.length === 1 && child.childNodes[0].nodeType == Node.ELEMENT_NODE) {\r\n          child = child.childNodes[0] \r\n        }\r\n\r\n        $(child).text(text) \r\n      }\r\n\r\n      if (!$current_image) {\r\n        $link\r\n          .prepend(FE.START_MARKER)\r\n          .append(FE.END_MARKER) \r\n      }\r\n\r\n      // Set attributes.\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2023\r\n      for (var prop in attrs) {\r\n        if (!attrs[prop]) {\r\n          $link.removeAttr(prop)\r\n        }\r\n        else {\r\n          $link.attr(prop, attrs[prop])\r\n        }\r\n      }\r\n\r\n      if (!$current_image) {\r\n        editor.selection.restore() \r\n      }\r\n    }\r\n    else {\r\n\r\n      // We don't have any image selected.\r\n      if (!$current_image) {\r\n\r\n        // Remove current links.\r\n        editor.format.remove('a') \r\n        // Nothing is selected.\r\n        if (editor.selection.isCollapsed()) {\r\n          text = (text.length === 0 ? original_href : text) \r\n          editor.html.insert(`<a href=\"${href}\">${FE.START_MARKER}${text.replace(/&/g, '&amp;').replace(/</, '&lt;', '>', '&gt;')}${FE.END_MARKER}</a>`) \r\n          editor.selection.restore() \r\n        }\r\n        else {\r\n          if (text.length > 0 && text != editor.selection.text().replace(/\\n/g, '')) {\r\n            editor.selection.remove() \r\n            editor.html.insert(`<a href=\"${href}\">${FE.START_MARKER}${text.replace(/&/g, '&amp;')}${FE.END_MARKER}</a>`) \r\n            editor.selection.restore() \r\n          }\r\n          else {\r\n            _split() \r\n\r\n            // Add link.\r\n            editor.format.apply('a', { href: href }) \r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Just wrap current image with a link.\r\n        $current_image.wrap(`<a href=\"${href}\"></a>`)\r\n\r\n        if (editor.image.hasCaption()) {\r\n          $current_image.parent().append($current_image.parents('.fr-img-caption').find('.fr-inner'))\r\n        }\r\n      }\r\n\r\n      // Set attributes.\r\n      const links = allSelected() \r\n\r\n      for (let i = 0; i < links.length; i++) {\r\n        $link = $(links[i]) \r\n        $link.attr(attrs) \r\n        $link.removeAttr('_moz_dirty') \r\n      }\r\n\r\n      // Show link edit if only one link.\r\n      if (links.length == 1 && editor.$wp && !$current_image) {\r\n        $(links[0])\r\n          .prepend(FE.START_MARKER)\r\n          .append(FE.END_MARKER) \r\n\r\n        editor.selection.restore() \r\n      }\r\n    }\r\n\r\n    // Hide popup and try to edit.\r\n    if (!$current_image) {\r\n      _edit() \r\n    }\r\n    else {\r\n      const $pop = editor.popups.get('link.insert') \r\n\r\n      if ($pop) {\r\n        $pop.find('input:focus').blur() \r\n      }\r\n\r\n      editor.image.edit($current_image) \r\n    }\r\n  }\r\n\r\n  function update() {\r\n    _hideEditPopup() \r\n\r\n    const link = get() \r\n\r\n    if (link) {\r\n      let $popup = editor.popups.get('link.insert') \r\n\r\n      if (!$popup) $popup = _initInsertPopup() \r\n\r\n      if (!editor.popups.isVisible('link.insert')) {\r\n        editor.popups.refresh('link.insert') \r\n        editor.selection.save() \r\n\r\n        if (editor.helpers.isMobile()) {\r\n          editor.events.disableBlur() \r\n          editor.$el.blur() \r\n          editor.events.enableBlur() \r\n        }\r\n      }\r\n\r\n      editor.popups.setContainer('link.insert', editor.$sc) \r\n      const $ref = (editor.image ? editor.image.get() : null) || $(link) \r\n      const left = $ref.offset().left + $ref.outerWidth() / 2\r\n      const top = $ref.offset().top + $ref.outerHeight()\r\n        \r\n      editor.popups.show('link.insert', left, top, $ref.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  function back() {\r\n    const $current_image = editor.image ? editor.image.get() : null \r\n\r\n    if (!$current_image) {\r\n      editor.events.disableBlur() \r\n      editor.selection.restore() \r\n      editor.events.enableBlur() \r\n\r\n      const link = get() \r\n\r\n      if (link && editor.$wp) {\r\n        editor.selection.restore() \r\n        _hideEditPopup() \r\n        _edit() \r\n      }\r\n      else if (editor.el.tagName == 'A') {\r\n        editor.$el.focus() \r\n        _edit() \r\n      }\r\n      else {\r\n        editor.popups.hide('link.insert') \r\n        editor.toolbar.showInline() \r\n      }\r\n    }\r\n    else {\r\n      editor.image.back() \r\n    }\r\n  }\r\n\r\n  function imageLink() {\r\n    let $el = editor.image ? editor.image.getEl() : null \r\n\r\n    if ($el) {\r\n      let $popup = editor.popups.get('link.insert') \r\n\r\n      if (editor.image.hasCaption()) {\r\n        $el = $el.find('.fr-img-wrap') \r\n      }\r\n\r\n      if (!$popup) $popup = _initInsertPopup() \r\n      _refreshInsertPopup(true) \r\n      editor.popups.setContainer('link.insert', editor.$sc) \r\n      const left = $el.offset().left + ($el.outerWidth()) / 2\r\n      const top = $el.offset().top + $el.outerHeight()\r\n\r\n      editor.popups.show('link.insert', left, top, $el.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n  function applyStyle(val, linkStyles, multipleStyles) {\r\n    if (typeof multipleStyles == 'undefined') multipleStyles = editor.opts.linkMultipleStyles \r\n\r\n    if (typeof linkStyles == 'undefined') linkStyles = editor.opts.linkStyles \r\n    const link = get() \r\n\r\n    if (!link) return false \r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(linkStyles) \r\n      styles.splice(styles.indexOf(val), 1) \r\n      $(link).removeClass(styles.join(' ')) \r\n    }\r\n\r\n    $(link).toggleClass(val) \r\n\r\n    _edit() \r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    remove: remove,\r\n    showInsertPopup: _showInsertPopup,\r\n    usePredefined: usePredefined,\r\n    insertCallback: insertCallback,\r\n    insert: insert,\r\n    update: update,\r\n    get: get,\r\n    allSelected: allSelected,\r\n    back: back,\r\n    imageLink: imageLink,\r\n    applyStyle: applyStyle\r\n  }\r\n}\r\n\r\n// Register the link command.\r\nFE.DefineIcon('insertLink', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterShortcut(FE.KEYCODE.K, 'insertLink', null, 'K') \r\nFE.RegisterCommand('insertLink', {\r\n  title: 'Insert Link',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('link.insert')) {\r\n      this.link.showInsertPopup() \r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur() \r\n        this.selection.restore() \r\n      }\r\n      this.popups.hide('link.insert') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkOpen', {\r\n  NAME: 'external-link',\r\n  FA5NAME: 'external-link-alt',\r\n  SVG_KEY: 'openLink'\r\n})\r\nFE.RegisterCommand('linkOpen', {\r\n  title: 'Open Link',\r\n  undo: false,\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  callback: function () {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n\r\n      if (link.href.indexOf('mailto:') !== -1) {\r\n        this.o_win.open(link.href).close() \r\n      }\r\n      else {\r\n        // Setting the context of the opening link to _self for opening it within window\r\n        if (!link.target) {\r\n          link.target = '_self'\r\n        }\r\n\r\n        if (this.browser.msie || this.browser.edge) {\r\n          // noopener is not supported in IE and EDGE\r\n          this.o_win.open(link.href, link.target)\r\n        }\r\n        else {\r\n          this.o_win.open(link.href, link.target, 'noopener')\r\n        }\r\n      }\r\n\r\n      this.popups.hide('link.edit') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkEdit', { NAME: 'edit', SVG_KEY: 'edit' })\r\nFE.RegisterCommand('linkEdit', {\r\n  title: 'Edit Link',\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.link.update() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkRemove', { NAME: 'unlink', SVG_KEY: 'unlink' })\r\nFE.RegisterCommand('linkRemove', {\r\n  title: 'Unlink',\r\n  callback: function () {\r\n    this.link.remove() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.DefineIcon('linkBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('linkBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.link.back() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() && this.doc.hasFocus() \r\n    const $current_image = this.image ? this.image.get() : null \r\n\r\n    if (!$current_image && !link && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden') \r\n      $btn.next('.fr-separator').addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden') \r\n      $btn.next('.fr-separator').removeClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n}) \r\n\r\nFE.DefineIcon('linkList', { NAME: 'search', SVG_KEY: 'search' })\r\nFE.RegisterCommand('linkList', {\r\n  title: 'Choose Link',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { linkList : options } = this.opts \r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkList\" data-param1=\"${i}\">${(options[i].displayText || options[i].text)}</a></li>`\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.link.usePredefined(val) \r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\nFE.RegisterCommand('linkInsert', {\r\n  focus: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.link.insertCallback() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.text(this.language.translate('Update')) \r\n    }\r\n    else {\r\n      $btn.text(this.language.translate('Insert')) \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\n// Image link.\r\nFE.DefineIcon('imageLink', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterCommand('imageLink', {\r\n  title: 'Insert Link',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.link.imageLink() \r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n    let $prev \r\n\r\n    if (link) {\r\n      $prev = $btn.prev() \r\n\r\n      if ($prev.hasClass('fr-separator')) {\r\n        $prev.removeClass('fr-hidden') \r\n      }\r\n\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $prev = $btn.prev() \r\n\r\n      if ($prev.hasClass('fr-separator')) {\r\n        $prev.addClass('fr-hidden') \r\n      }\r\n\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})\r\n\r\n// Link styles.\r\nFE.DefineIcon('linkStyle', { NAME: 'magic',  SVG_KEY: 'linkStyles' })\r\nFE.RegisterCommand('linkStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const options = this.opts.linkStyles \r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"linkStyle\" data-param1=\"${cls}\">${this.language.translate(options[cls])}</a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.link.applyStyle(val) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    const { $ } = this\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      const $link = $(link) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1') \r\n        const active = $link.hasClass(cls) \r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active) \r\n      })\r\n    }\r\n  },\r\n  refresh: function ($btn) {\r\n    const link = this.link.get() \r\n\r\n    if (link) {\r\n      $btn.removeClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.addClass('fr-hidden') \r\n    }\r\n  },\r\n  plugin: 'link'\r\n})","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  listAdvancedTypes: true\r\n})\r\n\r\nFE.PLUGINS.lists = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function _openFlag(tag_name) {\r\n    return `<span class=\"fr-open-${tag_name.toLowerCase()}\"></span>`\r\n  }\r\n\r\n  function _closeFlag(tag_name) {\r\n    return `<span class=\"fr-close-${tag_name.toLowerCase()}\"></span>`\r\n  }\r\n\r\n  /**\r\n   * Replace list type.\r\n   */\r\n  function _replace(blocks, tag_name) {\r\n    const lists = []\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      const { parentNode : parent_node } = blocks[i]\r\n\r\n      if (blocks[i].tagName == 'LI' && parent_node.tagName != tag_name && lists.indexOf(parent_node) < 0) {\r\n        lists.push(parent_node)\r\n      }\r\n    }\r\n\r\n    for (let i = lists.length - 1; i >= 0; i--) {\r\n      const $l = $(lists[i])\r\n      $l.replaceWith(`<${tag_name.toLowerCase()} ${editor.node.attributes($l.get(0))}>${$l.html()}</${tag_name.toLowerCase()}>`)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format blocks.\r\n   */\r\n  function _format(blocks, tag_name) {\r\n    _replace(blocks, tag_name)\r\n\r\n    // Format those blocks that are not LI.\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    let start_margin = null\r\n\r\n    let prop\r\n\r\n    if (blocks.length) prop = (editor.opts.direction == 'rtl' || $(blocks[0]).css('direction') == 'rtl') ? 'margin-right' : 'margin-left'\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // Ignore table tags.\r\n      if (blocks[i].tagName == 'TD' || blocks[i].tagName == 'TH') {\r\n        continue;\r\n      }\r\n\r\n      if (blocks[i].tagName != 'LI') {\r\n\r\n        // Get margin left and unset it.\r\n        let margin_left = editor.helpers.getPX($(blocks[i]).css(prop)) || 0\r\n        blocks[i].style.marginLeft = null\r\n\r\n        // Start indentation relative to the first element.\r\n        if (start_margin === null) start_margin = margin_left\r\n\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/2435\r\n        // Update open tag.\r\n        let open_tag = start_margin > 0 ? `<${tag_name} style=\"${prop}: ${start_margin}px \">` : `<${tag_name}>`\r\n        let end_tag = `</${tag_name}>`\r\n\r\n        // Subsctract starting.\r\n        margin_left = margin_left - start_margin\r\n\r\n        // Keep wrapping.\r\n        while (margin_left / editor.opts.indentMargin > 0) {\r\n          open_tag += `</${tag_name}>`\r\n          end_tag += end_tag\r\n          margin_left = margin_left - editor.opts.indentMargin\r\n        }\r\n\r\n        // Default tag.\r\n        if (default_tag && blocks[i].tagName.toLowerCase() == default_tag) {\r\n          $(blocks[i]).replaceWith(`${open_tag}<li${editor.node.attributes(blocks[i])}>${$(blocks[i]).html()}</li>${end_tag}`)\r\n        }\r\n        else {\r\n          $(blocks[i]).wrap(`${open_tag}<li></li>${end_tag}`)\r\n        }\r\n      }\r\n    }\r\n\r\n    editor.clean.lists()\r\n  }\r\n\r\n  /**\r\n   * Unformat.\r\n   */\r\n  function _unformat(blocks) {\r\n    let i\r\n    let j\r\n\r\n    // If there are LI that have parents selected, then remove them.\r\n    for (i = blocks.length - 1; i >= 0; i--) {\r\n      for (j = i - 1; j >= 0; j--) {\r\n        if ($(blocks[j]).find(blocks[i]).length || blocks[j] == blocks[i]) {\r\n          blocks.splice(i, 1)\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // Unwrap remaining LI.\r\n    const lists = []\r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      const $li = $(blocks[i])\r\n      let { parentNode : parent_node } = blocks[i]\r\n      const li_class = $li.attr('class')\r\n\r\n      $li.before(_closeFlag(parent_node.tagName))\r\n\r\n      // Nested case.\r\n      if (parent_node.parentNode.tagName == 'LI') {\r\n        $li.before(_closeFlag('LI'))\r\n        $li.after(_openFlag('LI'))\r\n      }\r\n      else {\r\n        let li_attrs = ''\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1765 .\r\n        if (li_class) {\r\n          li_attrs += ` class=\"${li_class}\"`\r\n        }\r\n\r\n        const prop = (editor.opts.direction == 'rtl' || $li.css('direction') == 'rtl') ? 'margin-right' : 'margin-left'\r\n\r\n        if (editor.helpers.getPX($(parent_node).css(prop)) && ($(parent_node).attr('style') || '').indexOf(`${prop}:`) >= 0) {\r\n          li_attrs += ` style=\"${prop}:${editor.helpers.getPX($(parent_node).css(prop))}px;\"`\r\n        }\r\n\r\n        // When we have a default tag.\r\n        if (editor.html.defaultTag()) {\r\n\r\n          // If there are no inner block tags, put everything in a default tag.\r\n          if ($li.find(editor.html.blockTagsQuery()).length === 0) {\r\n            $li.wrapInner(editor.html.defaultTag() + li_attrs)\r\n          }\r\n        }\r\n\r\n        // Append BR if the node is not empty.\r\n        if (!editor.node.isEmpty($li.get(0), true) && $li.find(editor.html.blockTagsQuery()).length === 0) {\r\n          $li.append('<br>')\r\n        }\r\n        $li.append(_openFlag('LI'))\r\n        $li.prepend(_closeFlag('LI'))\r\n      }\r\n\r\n      $li.after(_openFlag(parent_node.tagName))\r\n\r\n      // Nested case. We should look for an upper parent.\r\n      if (parent_node.parentNode.tagName == 'LI') {\r\n        ({ parentNode : parent_node } = parent_node.parentNode );\r\n      }\r\n\r\n      if (lists.indexOf(parent_node) < 0) {\r\n        lists.push(parent_node)\r\n      }\r\n    }\r\n\r\n    // Replace the open and close tags.\r\n    for (i = 0; i < lists.length; i++) {\r\n      const $l = $(lists[i])\r\n      let html = $l.html()\r\n      html = html.replace(/<span class=\"fr-close-([a-z]*)\"><\\/span>/g, '</$1>')\r\n      html = html.replace(/<span class=\"fr-open-([a-z]*)\"><\\/span>/g, '<$1>')\r\n      $l.replaceWith(editor.node.openTagString($l.get(0)) + html + editor.node.closeTagString($l.get(0)))\r\n    }\r\n\r\n    // Clean empty lists.\r\n    editor.$el.find('li:empty').remove()\r\n    editor.$el.find('ul:empty, ol:empty').remove()\r\n\r\n    editor.clean.lists()\r\n    editor.html.wrap()\r\n  }\r\n\r\n  /**\r\n   * Check if should unformat lists.\r\n   */\r\n  function _shouldUnformat(blocks, tag_name) {\r\n    let do_unformat = true\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // Something else than LI is selected.\r\n      if (blocks[i].tagName != 'LI') {\r\n        return false\r\n      }\r\n\r\n      // There is a different kind of list selected. Replace is the appropiate action.\r\n      if (blocks[i].parentNode.tagName != tag_name) {\r\n        do_unformat = false\r\n      }\r\n    }\r\n\r\n    return do_unformat\r\n  }\r\n\r\n  /**\r\n   * Call the list actions.\r\n   */\r\n  function format(tag_name, list_type) {\r\n    let i\r\n    let blocks\r\n\r\n    editor.html.syncInputs()\r\n    \r\n    // Wrap.\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    // Passing true to identify the call from list format\r\n    blocks = editor.selection.blocks(true)\r\n\r\n    // Normalize nodes by keeping the LI.\r\n    // <li><h1>foo<h1></li> will return h1.\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n        blocks[i] = blocks[i].parentNode\r\n      }\r\n    }\r\n\r\n    // Save selection so that we can play at wish.\r\n    editor.selection.save()\r\n\r\n    // Decide if to format or unformat list.\r\n    if (_shouldUnformat(blocks, tag_name)) {\r\n      if (!list_type) {\r\n        _unformat(blocks)\r\n      }\r\n    }\r\n    else {\r\n      _format(blocks, tag_name, list_type)\r\n    }\r\n\r\n    // Unwrap.\r\n    editor.html.unwrap()\r\n\r\n    // Restore the selection.\r\n    editor.selection.restore()\r\n\r\n    list_type = list_type || 'default'\r\n\r\n    if (list_type) {\r\n      blocks = editor.selection.blocks()\r\n\r\n      for (i = 0; i < blocks.length; i++) {\r\n        if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n          blocks[i] = blocks[i].parentNode\r\n        }\r\n      }\r\n\r\n      for (i = 0; i < blocks.length; i++) {\r\n        // Something else than LI is selected.\r\n        if (blocks[i].tagName != 'LI') {\r\n          continue\r\n        }\r\n\r\n        // There is a different kind of list selected. Replace is the appropiate action.\r\n        $(blocks[i].parentNode).css('list-style-type', list_type === 'default' ? '' : list_type)\r\n\r\n        if (($(blocks[i].parentNode).attr('style') || '').length === 0) {\r\n          $(blocks[i].parentNode).removeAttr('style')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh list buttons.\r\n   */\r\n  function refresh($btn, tag_name) {\r\n    const $el = $(editor.selection.element())\r\n\r\n    if ($el.get(0) != editor.el) {\r\n      let li = $el.get(0)\r\n\r\n      if (li.tagName != 'LI' && li.firstElementChild && li.firstElementChild.tagName != 'LI') {\r\n        li = $el.parents('li').get(0)\r\n      }\r\n      else if (li.tagName != 'LI' && !li.firstElementChild) {\r\n        li = $el.parents('li').get(0)\r\n      }\r\n      else if (li.firstElementChild && li.firstElementChild.tagName == 'LI') {\r\n        li = $el.get(0).firstChild\r\n      }\r\n      else {\r\n        li = $el.get(0)\r\n      }\r\n\r\n      if (li && li.parentNode.tagName == tag_name && editor.el.contains(li.parentNode)) {\r\n        $btn.addClass('fr-active')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Indent selected list items.\r\n   */\r\n  function _indent(blocks) {\r\n    editor.selection.save()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n\r\n      // There should be a previous li.\r\n      const prev_li = blocks[i].previousSibling\r\n\r\n      if (prev_li) {\r\n        const nl = $(blocks[i]).find('> ul, > ol').last().get(0)\r\n\r\n        // Current LI has a nested list.\r\n        if (nl) {\r\n\r\n          // Build a new list item and prepend it to the list.\r\n          const $li = $(document.createElement('li'))\r\n          $(nl).prepend($li)\r\n\r\n          // Get first node of the list item.\r\n          let node = editor.node.contents(blocks[i])[0]\r\n\r\n          // While node and it is not a list, append to the new list item.\r\n          while (node && !editor.node.isList(node)) {\r\n            const tmp = node.nextSibling\r\n            $li.append(node)\r\n            node = tmp\r\n          }\r\n\r\n          // Append current list to the previous node.\r\n          $(prev_li).append($(nl))\r\n          $(blocks[i]).remove()\r\n        }\r\n        else {\r\n          const prev_nl = $(prev_li).find('> ul, > ol').last().get(0)\r\n\r\n          if (prev_nl) {\r\n            $(prev_nl).append($(blocks[i]))\r\n          }\r\n          else {\r\n            const $new_nl = $(`<${blocks[i].parentNode.tagName}>`)\r\n            $(prev_li).append($new_nl)\r\n            $new_nl.append($(blocks[i]))\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Outdent selected list items.\r\n   */\r\n  function _outdent(blocks) {\r\n    editor.selection.save()\r\n    _unformat(blocks)\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * create a nested list when there is no previous sibling and make the liststyle as none\r\n   */\r\n  function _indentListStyleTypeNone(parentBlk) {\r\n    editor.selection.save()\r\n    const lst = parentBlk.tagName == 'OL' ? document.createElement('ol') : document.createElement('ul')\r\n    while(parentBlk.childNodes.length > 0) {\r\n      lst.append(parentBlk.childNodes[0])\r\n    }\r\n    const lst_parent = document.createElement('li')\r\n    lst_parent.style.listStyleType = 'none'\r\n    lst_parent.append(lst)\r\n    parentBlk.append(lst_parent)\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function _outdentListStyleTypeNone(parentBlk) {\r\n    editor.selection.save()\r\n    while(parentBlk.childNodes.length > 0) {\r\n      parentBlk.parentNode.parentNode.append(parentBlk.childNodes[0])\r\n    }\r\n    editor.clean.lists()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Hook into the indent/outdent events.\r\n   */\r\n  function _afterCommand(cmd) {\r\n    if (cmd == 'indent' || cmd == 'outdent') {\r\n      let do_indent = false\r\n      const blocks = editor.selection.blocks()\r\n      const blks = []\r\n      let parentBlk = blocks[0].previousSibling || blocks[0].parentElement\r\n\r\n      if (cmd == 'outdent') {\r\n        //Outend is not allowed if parent is not an list\r\n        if (parentBlk.parentNode.tagName != 'UL' && parentBlk.parentNode.tagName != 'OL' && parentBlk.parentNode.tagName != 'LI') {\r\n\r\n          return;\r\n        }\r\n        if (!blocks[0].previousSibling && parentBlk.parentNode.style.listStyleType == 'none') {\r\n          _outdentListStyleTypeNone(parentBlk)\r\n          return\r\n        }\r\n      }\r\n      else {\r\n\r\n        if (!blocks[0].previousSibling || blocks[0].previousSibling.tagName != 'LI') {\r\n          _indentListStyleTypeNone(parentBlk)\r\n          return;\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < blocks.length; i++) {\r\n        if (blocks[i].tagName == 'LI') {\r\n          do_indent = true\r\n          blks.push(blocks[i])\r\n        }\r\n        else if (blocks[i].parentNode.tagName == 'LI') {\r\n          do_indent = true\r\n          blks.push(blocks[i].parentNode)\r\n        }\r\n      }\r\n\r\n      if (do_indent) {\r\n        if (cmd == 'indent') _indent(blks)\r\n        else _outdent(blks)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init.\r\n   */\r\n  function _init() {\r\n    editor.events.on('commands.after', _afterCommand)\r\n\r\n    // TAB key in lists.\r\n    editor.events.on('keydown', function (e) {\r\n      if (e.which == FE.KEYCODE.TAB) {\r\n        const blocks = editor.selection.blocks()\r\n        const blks = []\r\n\r\n        for (let i = 0; i < blocks.length; i++) {\r\n          if (blocks[i].tagName == 'LI') {\r\n            blks.push(blocks[i])\r\n          }\r\n          else if (blocks[i].parentNode.tagName == 'LI') {\r\n            blks.push(blocks[i].parentNode)\r\n          }\r\n        }\r\n\r\n        // There is more than one list item selected.\r\n        // Selection is at the beginning of the selected list item.\r\n        if (blks.length > 1 || (blks.length && (editor.selection.info(blks[0]).atStart || editor.node.isEmpty(blks[0])))) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          if (!e.shiftKey) _indent(blks)\r\n          else _outdent(blks)\r\n\r\n          return false\r\n        }\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    format: format,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.DefineIcon('formatOLSimple', { NAME: 'list-ol', SVG_KEY: 'orderedList' })\r\nFE.RegisterCommand('formatOLSimple', {\r\n  title: 'Ordered List',\r\n  type: 'button',\r\n  options: {\r\n    'default': 'Default',\r\n    circle: 'Circle',\r\n    disc: 'Disc',\r\n    square: 'Square'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'OL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('OL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('formatUL', {\r\n  title: 'Unordered List',\r\n  type: 'button',\r\n  hasOptions: function () {\r\n    return this.opts.listAdvancedTypes\r\n  },\r\n  options: {\r\n    'default': 'Default',\r\n    circle: 'Circle',\r\n    disc: 'Disc',\r\n    square: 'Square'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'UL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('UL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('formatOL', {\r\n  title: 'Ordered List',\r\n  hasOptions: function () {\r\n    return this.opts.listAdvancedTypes\r\n  },\r\n  options: {\r\n    'default': 'Default',\r\n    'lower-alpha': 'Lower Alpha',\r\n    'lower-greek': 'Lower Greek',\r\n    'lower-roman': 'Lower Roman',\r\n    'upper-alpha': 'Upper Alpha',\r\n    'upper-roman': 'Upper Roman'\r\n  },\r\n  refresh: function ($btn) {\r\n    this.lists.refresh($btn, 'OL')\r\n  },\r\n  callback: function (cmd, param) {\r\n    this.lists.format('OL', param)\r\n  },\r\n  plugin: 'lists'\r\n})\r\n\r\n// Add the list icons.\r\nFE.DefineIcon('formatUL', {\r\n  NAME: 'list-ul',\r\n  SVG_KEY: 'unorderedList'\r\n})\r\n\r\nFE.DefineIcon('formatOL', {\r\n  NAME: 'list-ol',\r\n  SVG_KEY: 'orderedList'\r\n})\r\n","import FE from '../index.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  paragraphFormat: {\r\n    N: 'Normal',\r\n    H1: 'Heading 1',\r\n    H2: 'Heading 2',\r\n    H3: 'Heading 3',\r\n    H4: 'Heading 4',\r\n    PRE: 'Code'\r\n  },\r\n  paragraphFormatSelection: false,\r\n  paragraphDefaultSelection: 'Paragraph Format'\r\n})\r\n\r\nFE.PLUGINS.paragraphFormat = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Style content inside LI when LI is selected.\r\n   * This case happens only when the LI contains a nested list or when it has no block tag inside.\r\n   */\r\n  function _styleLiWithoutBlocks($li, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // If val is null or default tag already do nothing.\r\n    if (val && val.toLowerCase() != defaultTag) {\r\n\r\n      // Deal with nested lists.\r\n      if ($li.find('ul, ol').length > 0) {\r\n        const $el = $('<' + val + '>')\r\n        $li.prepend($el)\r\n        let node = editor.node.contents($li.get(0))[0]\r\n\r\n        while (node && ['UL', 'OL'].indexOf(node.tagName) < 0) {\r\n          const next_node = node.nextSibling\r\n          $el.append(node)\r\n          node = next_node\r\n        }\r\n      }\r\n\r\n      // Wrap list content.\r\n      else {\r\n        $li.html('<' + val + '>' + $li.html() + '</' + val + '>')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Style content inside LI.\r\n   */\r\n  function _styleLiWithBlocks($blk, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // Prepare a temp div.\r\n    if (!val || val.toLowerCase() == defaultTag) val = 'div class=\"fr-temp-div\"'\r\n\r\n    $blk.replaceWith($('<' + val + '>').html($blk.html()))\r\n  }\r\n\r\n  /**\r\n   * Style content inside TD.\r\n   */\r\n  function _styleTdWithBlocks($blk, val) {\r\n    const defaultTag = editor.html.defaultTag()\r\n\r\n    // Prepare a temp div.\r\n    if (!val) val = 'div class=\"fr-temp-div\"' + (editor.node.isEmpty($blk.get(0), true) ? ' data-empty=\"true\"' : '')\r\n\r\n    // Return to the regular case. We don't use P inside TD/TH.\r\n    if (val.toLowerCase() == defaultTag) {\r\n\r\n      // If node is not empty, then add a BR.\r\n      if (!editor.node.isEmpty($blk.get(0), true)) {\r\n        $blk.append('<br/>')\r\n      }\r\n\r\n      $blk.replaceWith($blk.html())\r\n    }\r\n\r\n    // Replace with the new tag.\r\n    else {\r\n      $blk.replaceWith($('<' + val + '>').html($blk.html()))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Basic style.\r\n   */\r\n  function _style($blk, val) {\r\n    if (!val) val = 'div class=\"fr-temp-div\"' + (editor.node.isEmpty($blk.get(0), true) ? ' data-empty=\"true\"' : '')\r\n    //1708 Paragraph Format\r\n    if(val==\"H1\"||val==\"H2\"||val==\"H3\"||val==\"H4\"||val==\"H5\")\r\n    {\r\n       let $checkstyle=editor.node.attributes($blk.get(0));  \r\n       if($checkstyle.includes(\"font-size:\"))\r\n      $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)).replace(/font-size:[0-9]+px;?/,\"\") + '>').html($blk.html()).removeAttr('data-empty'))\r\n       else\r\n       $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)) + '>').html($blk.html()).removeAttr('data-empty'))\r\n    }\r\n   else\r\n    $blk.replaceWith($('<' + val + ' ' + editor.node.attributes($blk.get(0)) + '>').html($blk.html()).removeAttr('data-empty'))\r\n  }\r\n\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val) {\r\n\r\n    // Normal.\r\n    if (val == 'N') val = editor.html.defaultTag()\r\n\r\n    // Wrap.\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, !editor.opts.paragraphFormat.BLOCKQUOTE, true, true)\r\n    editor.selection.restore()\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks()\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save()\r\n\r\n    editor.$el.find('pre').attr('skip', true)\r\n\r\n    // Go through each block and apply style to it.\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != val && !editor.node.isList(blocks[i])) {\r\n        const $blk = $(blocks[i])\r\n\r\n        // Style the content inside LI when there is selection right in LI.\r\n        if (blocks[i].tagName == 'LI') {\r\n          _styleLiWithoutBlocks($blk, val)\r\n        }\r\n\r\n        // Style the content inside LI when we have other tag in LI.\r\n        else if (blocks[i].parentNode.tagName == 'LI' && blocks[i]) {\r\n          _styleLiWithBlocks($blk, val)\r\n        }\r\n\r\n        // Style the content inside TD/TH.\r\n        else if (['TD', 'TH'].indexOf(blocks[i].parentNode.tagName) >= 0) {\r\n          _styleTdWithBlocks($blk, val)\r\n        }\r\n\r\n        // Regular case.\r\n        else {\r\n          _style($blk, val)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Join PRE together.\r\n    editor.$el.find('pre:not([skip=\"true\"]) + pre:not([skip=\"true\"])').each(function () {\r\n      $(this).prev().append('<br>' + $(this).html())\r\n      $(this).remove()\r\n    })\r\n    editor.$el.find('pre').removeAttr('skip')\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap()\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const blk = blocks[0]\r\n      let tag = 'N'\r\n      const default_tag = editor.html.defaultTag()\r\n\r\n      if (blk.tagName.toLowerCase() != default_tag && blk != editor.el) {\r\n        tag = blk.tagName\r\n      }\r\n\r\n      $dropdown.find('.fr-command[data-param1=\"' + tag + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n    else {\r\n      $dropdown.find('.fr-command[data-param1=\"N\"]').addClass('fr-active').attr('aria-selected', true)\r\n    }\r\n  }\r\n\r\n  function refresh($btn) {\r\n    if (editor.opts.paragraphFormatSelection) {\r\n      const blocks = editor.selection.blocks()\r\n\r\n      if (blocks.length) {\r\n        const blk = blocks[0]\r\n        let tag = 'N'\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (blk.tagName.toLowerCase() != default_tag && blk != editor.el) {\r\n          tag = blk.tagName\r\n        }\r\n\r\n        if (['LI', 'TD', 'TH'].indexOf(tag) >= 0) {\r\n          tag = 'N'\r\n        }\r\n\r\n        $btn.find('>span').text(editor.language.translate(editor.opts.paragraphFormat[tag]))\r\n      }\r\n      else {\r\n        $btn.find('>span').text(editor.language.translate(editor.opts.paragraphFormat.N))\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow,\r\n    refresh: refresh\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('paragraphFormat', {\r\n  type: 'dropdown',\r\n  displaySelection: function (editor) {\r\n    return editor.opts.paragraphFormatSelection\r\n  },\r\n  defaultSelection: function (editor) {\r\n    return editor.language.translate(editor.opts.paragraphDefaultSelection)\r\n  },\r\n  displaySelectionWidth: 80,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.paragraphFormat\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        let shortcut = this.shortcuts.get('paragraphFormat.' + val)\r\n\r\n        if (shortcut) {\r\n          shortcut = '<span class=\"fr-shortcut\">' + shortcut + '</span>'\r\n        }\r\n        else {\r\n          shortcut = ''\r\n        }\r\n\r\n        c += '<li role=\"presentation\"><' + (val == 'N' ? this.html.defaultTag() || 'DIV' : val) + ' style=\"padding: 0 !important; margin: 0 !important; border: 0 !important; background-color: transparent !important; ' +(val=='PRE' || val=='N' ? 'font-size: 15px' : 'font-weight: bold !important; ') + (val=='H1' ? 'font-size: 2em !important; ': '') +(val=='H2' ? 'font-size: 1.5em !important; ': '') + (val=='H3' ? 'font-size: 1.17em !important; ': '') + (val=='H4' ? 'font-size: 15px !important;': '') + '\"  role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"paragraphFormat\" data-param1=\"' + val + '\" title=\"' + this.language.translate(options[val]) + '\">' + this.language.translate(options[val]) + '</a></' + (val == 'N' ? this.html.defaultTag() || 'DIV' : val) + '></li>'\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Paragraph Format',\r\n  callback: function (cmd, val) {\r\n    this.paragraphFormat.apply(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    this.paragraphFormat.refresh($btn)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.paragraphFormat.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'paragraphFormat'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('paragraphFormat', {\r\n  NAME: 'paragraph',\r\n  SVG_KEY: 'paragraphFormat'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  paragraphStyles: {\r\n    'fr-text-gray': 'Gray',\r\n    'fr-text-bordered': 'Bordered',\r\n    'fr-text-spaced': 'Spaced',\r\n    'fr-text-uppercase': 'Uppercase'\r\n  },\r\n  paragraphMultipleStyles: true\r\n})\r\n\r\nFE.PLUGINS.paragraphStyle = function (editor) {\r\n  const { $ } = editor\r\n  /**\r\n   * Apply style.\r\n   */\r\n  function apply(val, paragraphStyles, paragraphMultipleStyles) {\r\n    if (typeof paragraphStyles === 'undefined') paragraphStyles = editor.opts.paragraphStyles\r\n\r\n    if (typeof paragraphMultipleStyles === 'undefined') paragraphMultipleStyles = editor.opts.paragraphMultipleStyles\r\n\r\n    let styles = ''\r\n\r\n    // Remove multiple styles.\r\n    if (!paragraphMultipleStyles) {\r\n      styles = Object.keys(paragraphStyles)\r\n      styles.splice(styles.indexOf(val), 1)\r\n      styles = styles.join(' ')\r\n    }\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save()\r\n\r\n    const hasClass = $(blocks[0]).hasClass(val)\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      $(blocks[i]).removeClass(styles).toggleClass(val, !hasClass)\r\n\r\n      if ($(blocks[i]).hasClass('fr-temp-div')) $(blocks[i]).removeClass('fr-temp-div')\r\n\r\n      if ($(blocks[i]).attr('class') === '') $(blocks[i]).removeAttr('class')\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap()\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function refreshOnShow($btn, $dropdown) {\r\n    const blocks = editor.selection.blocks()\r\n\r\n    if (blocks.length) {\r\n      const $blk = $(blocks[0])\r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $blk.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n\r\n  const _init = () => {\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    apply: apply,\r\n    refreshOnShow: refreshOnShow\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('paragraphStyle', {\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const { paragraphStyles : options } = this.opts\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"paragraphStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  title: 'Paragraph Style',\r\n  callback: function (cmd, val) {\r\n    this.paragraphStyle.apply(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.paragraphStyle.refreshOnShow($btn, $dropdown)\r\n  },\r\n  plugin: 'paragraphStyle'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('paragraphStyle', {\r\n  NAME: 'magic',\r\n  SVG_KEY: 'paragraphStyle'\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  html2pdf: window.html2pdf\r\n})\r\n\r\n\r\nFE.PLUGINS.print = function (editor) {\r\n  function _prepare(callback) {\r\n    // Get editor content for printing.\r\n    const contents = editor.html.get()\r\n\r\n    // Get or create the iframe for printing.\r\n    let print_iframe = null\r\n\r\n    if (editor.shared.print_iframe) {\r\n      ({ print_iframe } = editor.shared );\r\n    }\r\n    else {\r\n      print_iframe = document.createElement('iframe')\r\n      print_iframe.name = 'fr-print'\r\n      print_iframe.style.position = 'fixed'\r\n      print_iframe.style.top = '0'\r\n      print_iframe.style.left = '-9999px'\r\n      print_iframe.style.height = '100%'\r\n      print_iframe.style.width = '0'\r\n      print_iframe.style.overflow = 'hidden'\r\n      print_iframe.style['z-index'] = '2147483647'\r\n      print_iframe.style.tabIndex = '-1'\r\n\r\n      // Remove editor on shared destroy.\r\n      editor.events.on('shared.destroy', function () {\r\n        print_iframe.remove()\r\n      })\r\n\r\n      editor.shared.print_iframe = print_iframe\r\n    }\r\n\r\n    try {\r\n      document.body.removeChild(print_iframe)\r\n    }\r\n    catch (ex) {\r\n\r\n    }\r\n    document.body.appendChild(print_iframe)\r\n\r\n    // Iframe ready.\r\n    const listener = () => {\r\n      callback()\r\n      print_iframe.removeEventListener('load', listener)\r\n    }\r\n    print_iframe.addEventListener('load', listener)\r\n\r\n    // Build printing document.\r\n    const { contentWindow : frame_doc } = print_iframe\r\n    frame_doc.document.open()\r\n    frame_doc.document.write('<!DOCTYPE html><html ' + (editor.opts.documentReady ? 'style=\"margin: 0; padding: 0;\"' : '') + '><head><title>' + document.title + '</title>')\r\n\r\n    // Add styles.\r\n    Array.prototype.forEach.call(document.querySelectorAll('style'), function (style_el) {\r\n      style_el = style_el.cloneNode(true)\r\n      frame_doc.document.write(style_el.outerHTML)\r\n    })\r\n\r\n    // Add css links.\r\n    const style_elements = document.querySelectorAll('link[rel=stylesheet]')\r\n\r\n    Array.prototype.forEach.call(style_elements, function (link_el) {\r\n      const new_link_el = document.createElement('link')\r\n      new_link_el.rel = link_el.rel\r\n      new_link_el.href = link_el.href\r\n      new_link_el.media = 'print'\r\n      new_link_el.type = 'text/css'\r\n      new_link_el.media = 'all'\r\n      frame_doc.document.write(new_link_el.outerHTML)\r\n    })\r\n\r\n    frame_doc.document.write('</head><body style=\"height:auto;text-align: ' + (editor.opts.direction == 'rtl' ? 'right' : 'left') + '; direction: ' + editor.opts.direction + '; ' + (editor.opts.documentReady ? ' padding: 2cm; width: 17cm; margin: 0;' : '') + '\"><div class=\"fr-view\">')\r\n\r\n    // Add editor contents.\r\n    frame_doc.document.write(contents)\r\n    frame_doc.document.write('</div></body></html>')\r\n    frame_doc.document.close()\r\n  }\r\n\r\n  function run() {\r\n    _prepare(function () {\r\n      setTimeout(function () {\r\n\r\n        // Focus iframe window.\r\n        editor.events.disableBlur()\r\n        window.frames['fr-print'].focus()\r\n\r\n        // Open printing window.\r\n        window.frames['fr-print'].print()\r\n\r\n        // Refocus editor's window.\r\n        editor.$win.get(0).focus()\r\n\r\n        // Focus editor.\r\n        editor.events.disableBlur()\r\n        editor.events.focus()\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  function toPDF() {\r\n    if (editor.opts.html2pdf) {\r\n      editor.$el.css('text-align', 'left')\r\n\r\n      editor.opts.html2pdf()\r\n        .set({\r\n          margin: [10, 20],\r\n          html2canvas: {\r\n            useCORS: true\r\n          }\r\n        })\r\n        .from(editor.el)\r\n        .save()\r\n\r\n      setTimeout(function () {\r\n        editor.$el.css('text-align', '')\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n  return {\r\n    run: run,\r\n    toPDF: toPDF\r\n  }\r\n}\r\n\r\nFE.DefineIcon('print', { NAME: 'print', SVG_KEY: 'print' })\r\nFE.RegisterCommand('print', {\r\n  title: 'Print',\r\n  undo: false,\r\n  focus: false,\r\n  plugin: 'print',\r\n  callback: function () {\r\n    this.print.run()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('getPDF', {\r\n  NAME: 'file-pdf-o',\r\n  FA5NAME: 'file-pdf',\r\n  SVG_KEY: 'pdfExport'\r\n})\r\nFE.RegisterCommand('getPDF', {\r\n  title: 'Download PDF',\r\n  type: 'button',\r\n  focus: false,\r\n  undo: false,\r\n  callback: function () {\r\n    this.print.toPDF()\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  quickInsertButtons: ['image', 'video', 'embedly', 'table', 'ul', 'ol', 'hr'],\r\n  quickInsertTags: ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'pre', 'blockquote'],\r\n  quickInsertEnabled: true\r\n})\r\n\r\nFE.QUICK_INSERT_BUTTONS = {}\r\n\r\nFE.DefineIcon('quickInsert', {\r\n  SVG_KEY: 'add',\r\n  template: 'svg'\r\n})\r\n\r\nFE.RegisterQuickInsertButton = function (name, data) {\r\n  FE.QUICK_INSERT_BUTTONS[name] = Object.assign({\r\n    undo: true\r\n  }, data)\r\n}\r\n\r\nFE.RegisterQuickInsertButton('image', {\r\n  icon: 'insertImage',\r\n  requiredPlugin: 'image',\r\n  title: 'Insert Image',\r\n  undo: false,\r\n  callback: function () {\r\n    const editor = this\r\n    const { $ } = editor\r\n\r\n    if (!editor.shared.$qi_image_input) {\r\n      editor.shared.$qi_image_input = $(document.createElement('input')).attr('accept', 'image/' + editor.opts.imageAllowedTypes.join(', image/').toLowerCase()).attr('name', `quickInsertImage${this.id}`).attr('style', 'display: none;').attr('type', 'file')\r\n\r\n      $('body').first().append(editor.shared.$qi_image_input)\r\n\r\n      editor.events.$on(editor.shared.$qi_image_input, 'change', function () {\r\n        const inst = $(this).data('inst')\r\n\r\n        if (this.files) {\r\n          inst.quickInsert.hide()\r\n          inst.image.upload(this.files)\r\n        }\r\n\r\n        // Chrome fix.\r\n        $(this).val('')\r\n      }, true)\r\n    }\r\n\r\n    editor.$qi_image_input = editor.shared.$qi_image_input\r\n\r\n    if (editor.helpers.isMobile()) editor.selection.save()\r\n    editor.events.disableBlur()\r\n    editor.$qi_image_input.data('inst', editor)[0].click()\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('video', {\r\n  icon: 'insertVideo',\r\n  requiredPlugin: 'video',\r\n  title: 'Insert Video',\r\n  undo: false,\r\n  callback: function () {\r\n    const res = prompt(this.language.translate('Paste the URL of the video you want to insert.'))\r\n\r\n    if (res) {\r\n      this.video.insertByURL(res)\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('embedly', {\r\n  icon: 'embedly',\r\n  requiredPlugin: 'embedly',\r\n  title: 'Embed URL',\r\n  undo: false,\r\n  callback: function () {\r\n    const res = prompt(this.language.translate('Paste the URL of any web content you want to insert.'))\r\n\r\n    if (res) {\r\n      this.embedly.add(res)\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('table', {\r\n  icon: 'insertTable',\r\n  requiredPlugin: 'table',\r\n  title: 'Insert Table',\r\n  callback: function () {\r\n    this.table.insert(2, 2)\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('ol', {\r\n  icon: 'formatOL',\r\n  requiredPlugin: 'lists',\r\n  title: 'Ordered List',\r\n  callback: function () {\r\n    this.lists.format('OL')\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('ul', {\r\n  icon: 'formatUL',\r\n  requiredPlugin: 'lists',\r\n  title: 'Unordered List',\r\n  callback: function () {\r\n    this.lists.format('UL')\r\n  }\r\n})\r\n\r\nFE.RegisterQuickInsertButton('hr', {\r\n  icon: 'insertHR',\r\n  title: 'Insert Horizontal Line',\r\n  callback: function () {\r\n    this.commands.insertHR()\r\n  }\r\n})\r\n\r\nFE.PLUGINS.quickInsert = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  let $quick_insert\r\n\r\n  /*\r\n   * Set the quick insert button left and top.\r\n   */\r\n  function _place($tag) {\r\n\r\n    // Quick insert's possition.\r\n    let qiTop\r\n    let qiLeft\r\n    let qiTagAlign\r\n\r\n    qiTop = $tag.offset().top - editor.$box.offset().top\r\n\r\n    if ((((editor.$iframe && editor.$iframe.offset().left) || 0) + $tag.offset().left - $tag.position().left - 4) < $quick_insert.outerWidth()) {\r\n      qiLeft = $tag.offset().left + $quick_insert.outerWidth();\r\n    }\r\n    else {\r\n      qiLeft = 0 - $quick_insert.outerWidth();\r\n    }\r\n\r\n    if (editor.opts.enter != FE.ENTER_BR) {\r\n      qiTagAlign = ($quick_insert.outerHeight() - $tag.outerHeight()) / 2\r\n    }\r\n\r\n    // Enter key is BR. Insert an empty SPAN to get line height.\r\n    else {\r\n      const $span = $(document.createElement('span')).html(FE.INVISIBLE_SPACE)\r\n      $span.insertAfter($tag)\r\n      qiTagAlign = ($quick_insert.outerHeight() - $tag.next().outerHeight()) / 2\r\n      $tag.next().remove()\r\n    }\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      qiTop += editor.$iframe.offset().top + iframePaddingTop\r\n    }\r\n\r\n    // Reposition QI helper if visible.\r\n    if ($quick_insert.hasClass('fr-on')) {\r\n      if (qiTop >= 0) {\r\n        $helper.css('top', qiTop - qiTagAlign)\r\n      }\r\n    }\r\n\r\n    // Set quick insert's top and left.\r\n    if (qiTop >= 0 && qiTop - Math.abs(qiTagAlign) <= editor.$box.outerHeight() - $tag.outerHeight()) {\r\n      if ($quick_insert.hasClass('fr-hidden')) {\r\n        if ($quick_insert.hasClass('fr-on')) _showQIHelper()\r\n        $quick_insert.removeClass('fr-hidden')\r\n      }\r\n      else if ($quick_insert.hasClass('fr-visible')) {\r\n        $quick_insert.addClass('fr-hidden')\r\n        _hideHelper()\r\n      }\r\n\r\n      $quick_insert.css('top', qiTop - qiTagAlign)\r\n    }\r\n    else {\r\n      $quick_insert.css('top',  qiTagAlign)\r\n      \r\n    }\r\n   \r\n    $quick_insert.css('left', qiLeft)\r\n  }\r\n\r\n  /*\r\n   * Show quick insert.\r\n   * Compute top, left, width and show the quick insert.\r\n   */\r\n  function _show($tag) {\r\n    if (!$quick_insert) _initquickInsert()\r\n\r\n    // Hide the quick insert helper if visible.\r\n    if ($quick_insert.hasClass('fr-on')) {\r\n      _hideHelper()\r\n    }\r\n\r\n    editor.$box.append($quick_insert)\r\n\r\n    // Quick insert's possition.\r\n    _place($tag)\r\n\r\n    $quick_insert.data('tag', $tag)\r\n\r\n    // Show the quick insert.\r\n    $quick_insert.addClass('fr-visible')\r\n  }\r\n\r\n  /*\r\n   * Check the tag where the cursor is.\r\n   */\r\n  function _checkTag() {\r\n    // If editor has focus.\r\n    if (editor.core.hasFocus()) {\r\n      let tag = editor.selection.element()\r\n\r\n      // Get block tag if Enter key is not BR.\r\n      if (editor.opts.enter != FE.ENTER_BR && !editor.node.isBlock(tag)) {\r\n        tag = editor.node.blockParent(tag)\r\n      }\r\n\r\n      if (editor.opts.enter == FE.ENTER_BR && !editor.node.isBlock(tag)) {\r\n        const deep_tag = editor.node.deepestParent(tag)\r\n\r\n        if (deep_tag) tag = deep_tag\r\n      }\r\n\r\n      const _enterInBR = function () {\r\n        return (editor.opts.enter != FE.ENTER_BR && editor.node.isEmpty(tag) && editor.opts.quickInsertTags.indexOf(tag.tagName.toLowerCase()) >= 0)\r\n      }\r\n\r\n      const _enterInP = function () {\r\n        return (\r\n          editor.opts.enter == FE.ENTER_BR &&\r\n          ((tag.tagName == 'BR' && (!tag.previousSibling || tag.previousSibling.tagName == 'BR' || editor.node.isBlock(tag.previousSibling))) ||\r\n            (editor.node.isEmpty(tag) && (!tag.previousSibling || tag.previousSibling.tagName == 'BR' || editor.node.isBlock(tag.previousSibling)) && (!tag.nextSibling || tag.nextSibling.tagName == 'BR' || editor.node.isBlock(tag.nextSibling))))\r\n        )\r\n      }\r\n\r\n      if (tag && (_enterInBR() || _enterInP())) {\r\n        // If the quick insert is not repositioned, just close the helper.\r\n        if ($quick_insert && $quick_insert.data('tag').is($(tag)) && $quick_insert.hasClass('fr-on')) {\r\n          _hideHelper()\r\n        }\r\n\r\n        // If selection is collapsed.\r\n        else if (editor.selection.isCollapsed()) {\r\n          _show($(tag))\r\n        }\r\n      }\r\n\r\n      // Quick insert should not be visible.\r\n      else {\r\n        hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hide quick insert.\r\n   */\r\n  function hide() {\r\n    if ($quick_insert) {\r\n      // Hide the quick insert helper if visible.\r\n      if ($quick_insert.hasClass('fr-on')) {\r\n        _hideHelper()\r\n      }\r\n\r\n      // Hide the quick insert.\r\n      $quick_insert.removeClass('fr-visible fr-on')\r\n      $quick_insert.css('left', -9999).css('top', -9999)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the quick insert helper.\r\n   */\r\n  let $helper\r\n\r\n  function _showQIHelper(e) {\r\n    if (e) e.preventDefault()\r\n\r\n    // Hide helper.\r\n    if ($quick_insert.hasClass('fr-on') && !$quick_insert.hasClass('fr-hidden')) {\r\n      _hideHelper()\r\n    }\r\n\r\n    else {\r\n      if (!editor.shared.$qi_helper) {\r\n        const { quickInsertButtons : btns } = editor.opts\r\n        let btns_html = '<div class=\"fr-qi-helper\">'\r\n        let idx = 0\r\n\r\n        for (let i = 0; i < btns.length; i++) {\r\n          const info = FE.QUICK_INSERT_BUTTONS[btns[i]]\r\n\r\n          if (info) {\r\n            if (!info.requiredPlugin || (FE.PLUGINS[info.requiredPlugin] && editor.opts.pluginsEnabled.indexOf(info.requiredPlugin) >= 0)) {\r\n              btns_html += `<a class=\"fr-btn fr-floating-btn\" role=\"button\" title=\"${editor.language.translate(info.title)}\" tabIndex=\"-1\" data-cmd=\"${btns[i]}\" style=\"transition-delay: ${(0.025 * (idx++))}s;\">${editor.icon.create(info.icon)}</a>`\r\n            }\r\n          }\r\n        }\r\n\r\n        btns_html += '</div>'\r\n        editor.shared.$qi_helper = $(btns_html)\r\n\r\n        // Quick insert helper tooltip.\r\n        editor.tooltip.bind(editor.shared.$qi_helper, 'a.fr-btn')\r\n\r\n        editor.events.$on(editor.shared.$qi_helper, 'mousedown', function (e) {\r\n          e.preventDefault()\r\n        }, true)\r\n      }\r\n\r\n      ({ $qi_helper : $helper } = editor.shared );\r\n      editor.$box.append($helper)\r\n\r\n      // Show the quick insert helper.\r\n      setTimeout(function () {\r\n        $helper.css('top', parseFloat($quick_insert.css('top')))\r\n        $helper.css('left', parseFloat($quick_insert.css('left')) + $quick_insert.outerWidth())\r\n        $helper.find('a').addClass('fr-size-1')\r\n        $quick_insert.addClass('fr-on')\r\n      }, 10)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Hides the quick insert helper and places the cursor.\r\n   */\r\n  function _hideHelper() {\r\n    const $helper = editor.$box.find('.fr-qi-helper')\r\n    const transition_delay = 25 //transition delay on fade in was set 0.025s\r\n\r\n    if ($helper.length) {\r\n      //set transition effect for quick insert link items on hide starting from last child\r\n      let childItems = $helper.find('a'); //get all the buttons from quick insert menu\r\n      let index = 0;\r\n      //hide the quick insert buttons starting from lefmost button with increase in delay to the righmost button\r\n      for (; index < childItems.length; index++) (function(index) {\r\n        setTimeout(function() {\r\n          $helper.children().eq(childItems.length-1-index).removeClass('fr-size-1'); //removing class to hide the button\r\n        }, transition_delay*index); //set the increasing transition delay\r\n      })(index);\r\n\r\n      //remove on button and set back add button\r\n      setTimeout(function() {\r\n        $helper.css('left', -9999)\r\n        if ($quick_insert && !$quick_insert.hasClass('fr-hidden')) $quick_insert.removeClass('fr-on') //show Add button\r\n      }, transition_delay*index); //set the transition delay for Add button\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize the quick insert.\r\n   */\r\n  function _initquickInsert() {\r\n    if (!editor.shared.$quick_insert) {\r\n      // Append quick insert HTML to editor wrapper.\r\n      editor.shared.$quick_insert = $(document.createElement('div')).attr('class', 'fr-quick-insert').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Quick Insert')}\">${editor.icon.create('quickInsert')}</a>`)//'<div class=\"fr-quick-insert\"><a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"' + editor.language.translate('Quick Insert') + '\">' + editor.icon.create('quickInsert') + '</a></div>')\r\n    }\r\n\r\n    ({ $quick_insert } = editor.shared );\r\n\r\n    // Quick Insert tooltip.\r\n    editor.tooltip.bind(editor.$box, '.fr-quick-insert > a.fr-floating-btn')\r\n\r\n    // Editor destroy.\r\n    editor.events.on('destroy', function () {\r\n      $('body').first().append($quick_insert.removeClass('fr-on'))\r\n      if ($helper) {\r\n        _hideHelper()\r\n        $('body').first().append($helper.css('left', -9999).css('top', -9999))\r\n      }\r\n    }, true)\r\n\r\n    editor.events.on('shared.destroy', function () {\r\n      $quick_insert.html('').removeData().remove()\r\n      $quick_insert = null\r\n\r\n      if ($helper) {\r\n        $helper.html('').removeData().remove()\r\n        $helper = null\r\n      }\r\n    }, true)\r\n\r\n    // Hide before a command is executed.\r\n    editor.events.on('commands.before', hide)\r\n\r\n    // Check if the quick insert should be shown after a command has been executed.\r\n    editor.events.on('commands.after', function () {\r\n      if (!editor.popups.areVisible()) {\r\n        _checkTag()\r\n      }\r\n    })\r\n\r\n    // User clicks on the quick insert.\r\n    editor.events.bindClick(editor.$box, '.fr-quick-insert > a', _showQIHelper)\r\n\r\n    // User clicks on a button from the quick insert helper.\r\n    editor.events.bindClick(editor.$box, '.fr-qi-helper > a.fr-btn', function (e) {\r\n      const cmd = $(e.currentTarget).data('cmd')\r\n\r\n      // Trigger commands.before.\r\n      if (editor.events.trigger('quickInsert.commands.before', [cmd]) === false) {\r\n        return false\r\n      }\r\n\r\n      FE.QUICK_INSERT_BUTTONS[cmd].callback.apply(editor, [e.currentTarget])\r\n\r\n      if (FE.QUICK_INSERT_BUTTONS[cmd].undo) {\r\n        editor.undo.saveStep()\r\n      }\r\n\r\n      // Trigger commands.after.\r\n      editor.events.trigger('quickInsert.commands.after', [cmd])\r\n\r\n      editor.quickInsert.hide()\r\n    })\r\n\r\n    // Scroll in editor wrapper. Quick insert buttons should scroll along\r\n    editor.events.$on(editor.$wp, 'scroll', _repositionQIButton)\r\n\r\n    // Re-position the quick insert button when more toolbar is expanded completely\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', _repositionQIButton)\r\n  }\r\n\r\n  /**\r\n   * Reposition the quick insert button\r\n   */\r\n  function _repositionQIButton() {\r\n    if ($quick_insert.hasClass('fr-visible')) {\r\n      _place($quick_insert.data('tag'))\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp || !editor.opts.quickInsertEnabled) return false\r\n\r\n    // Hide the quick insert if user click on an image.\r\n    editor.popups.onShow('image.edit', hide)\r\n\r\n    // Check tag where cursor is to see if the quick insert needs to be shown.\r\n    editor.events.on('mouseup', _checkTag)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_doc), 'selectionchange', _checkTag)\r\n    }\r\n\r\n    // Hide the quick insert when editor loses focus.\r\n    editor.events.on('blur', hide)\r\n\r\n    // Check if the quick insert should be shown after a key was pressed.\r\n    editor.events.on('keyup', _checkTag)\r\n\r\n    // Hide quick insert on keydown.\r\n    editor.events.on('keydown', function () {\r\n      setTimeout(function () {\r\n        _checkTag()\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    hide: hide\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.PLUGINS.quote = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  function _deepestParent(node) {\r\n    while (node.parentNode && node.parentNode != editor.el) {\r\n      node = node.parentNode \r\n    }\r\n\r\n    return node \r\n  }\r\n\r\n  function _increase() {\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks() \r\n    let i \r\n\r\n    // Normalize blocks.\r\n    for (i = 0; i < blocks.length; i++) {\r\n      blocks[i] = _deepestParent(blocks[i]) \r\n    }\r\n\r\n    // Save selection to restore it later.\r\n    editor.selection.save() \r\n\r\n    const $quote = $(document.createElement('blockquote')) \r\n    $quote.insertBefore(blocks[0]) \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      $quote.append(blocks[i]) \r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function _decrease() {\r\n\r\n    // Get blocks.\r\n    const blocks = editor.selection.blocks() \r\n    let i \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName != 'BLOCKQUOTE') {\r\n        blocks[i] = $(blocks[i]).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0) \r\n      }\r\n    }\r\n\r\n    editor.selection.save() \r\n\r\n    for (i = 0; i < blocks.length; i++) {\r\n      if (blocks[i]) {\r\n        $(blocks[i]).replaceWith(blocks[i].innerHTML) \r\n      }\r\n    }\r\n\r\n    // Unwrap temp divs.\r\n    editor.html.unwrap() \r\n\r\n    editor.selection.restore() \r\n  }\r\n\r\n  function apply(val) {\r\n\r\n    // Wrap.\r\n    editor.selection.save() \r\n    editor.html.wrap(true, true, true, true) \r\n    editor.selection.restore() \r\n\r\n    if (val == 'increase') {\r\n      _increase() \r\n    }\r\n    else if (val == 'decrease') {\r\n      _decrease() \r\n    }\r\n\r\n\r\n  }\r\n\r\n  return {\r\n    apply: apply\r\n  }\r\n}\r\n\r\n// Register the quote command.\r\nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'increase', '\\'') \r\nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'decrease', '\\'', true) \r\nFE.RegisterCommand('quote', {\r\n  title: 'Quote',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const options = {\r\n      increase: 'Increase',\r\n      decrease: 'Decrease'\r\n    } \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        const shortcut = this.shortcuts.get(`quote.${val}`) \r\n\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-active ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"quote\" data-param1=\"${val}\" title=\"${options[val]}\">${this.language.translate(options[val])}${(shortcut ? `<span class=\"fr-shortcut\">${shortcut}</span>`: '')}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.quote.apply(val) \r\n  },\r\n  plugin: 'quote'\r\n})\r\n\r\n// Add the quote icon.\r\nFE.DefineIcon('quote', {\r\n  NAME: 'quote-left',\r\n  SVG_KEY: 'blockquote'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  saveInterval: 10000,\r\n  saveURL: null,\r\n  saveParams: {},\r\n  saveParam: 'body',\r\n  saveMethod: 'POST'\r\n})\r\n\r\nFE.PLUGINS.save = function (editor) {\r\n  const { $ } = editor\r\n  let _timeout = null\r\n  let _last_html = null\r\n  let _force = false\r\n\r\n  const BAD_LINK = 1\r\n  const ERROR_ON_SERVER = 2\r\n\r\n  const error_messages = {}\r\n  error_messages[BAD_LINK] = 'Missing saveURL option.'\r\n  error_messages[ERROR_ON_SERVER] = 'Something went wrong during save.'\r\n\r\n  /**\r\n   * Throw an image error.\r\n   */\r\n  function _throwError(code, response) {\r\n    editor.events.trigger('save.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    }, response])\r\n  }\r\n\r\n  function save(html) {\r\n    if (typeof html == 'undefined') html = editor.html.get()\r\n\r\n    const original_html = html\r\n\r\n    // Trigger before save event.\r\n    const event_returned_value = editor.events.trigger('save.before', [html])\r\n\r\n    if (event_returned_value === false) return false\r\n    else if (typeof event_returned_value == 'string') html = event_returned_value\r\n\r\n    if (editor.opts.saveURL) {\r\n      const params = {}\r\n\r\n      for (const key in editor.opts.saveParams) {\r\n        if (editor.opts.saveParams.hasOwnProperty(key)) {\r\n          const param = editor.opts.saveParams[key]\r\n\r\n          if (typeof (param) == 'function') {\r\n            params[key] = param.call(this)\r\n          }\r\n          else {\r\n            params[key] = param\r\n          }\r\n        }\r\n      }\r\n\r\n      const dt = {}\r\n      dt[editor.opts.saveParam] = html\r\n\r\n      // Make request to save\r\n      $(this).ajax({\r\n        method: editor.opts.saveMethod,\r\n        url: editor.opts.saveURL,\r\n        data: Object.assign(dt, params),\r\n        crossDomain: editor.opts.requestWithCORS,\r\n        withCredentials: editor.opts.requestWithCredentials,\r\n        headers: editor.opts.requestHeaders,\r\n        done: function (data, status, xhr) {\r\n          _last_html = original_html\r\n\r\n          // data\r\n          editor.events.trigger('save.after', [data])\r\n        },\r\n        fail: function (xhr) {\r\n          // (error)\r\n          _throwError(ERROR_ON_SERVER, xhr.response || xhr.responseText)\r\n        }\r\n      })\r\n      \r\n    }\r\n    else {\r\n\r\n      // (error)\r\n      _throwError(BAD_LINK)\r\n    }\r\n  }\r\n\r\n  function _mightSave() {\r\n    clearTimeout(_timeout)\r\n\r\n    // Added 0 seconds as to get the timeoutid so that for if there is another request the previous pending request will get cleared out. \r\n    _timeout = setTimeout(function () {\r\n      const html = editor.html.get()\r\n\r\n      if (_last_html != html || _force) {\r\n        _last_html = html\r\n        _force = false\r\n\r\n        save(html)\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  /**\r\n   * Reset the saving interval.\r\n   */\r\n  function reset() {\r\n    _mightSave()\r\n    _force = false\r\n  }\r\n\r\n  /**\r\n   * Force saving at the end of the current interval.\r\n   */\r\n  function force() {\r\n    _force = true\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    if(editor.opts.letteringClass)\r\n    {\r\n      let selectionClass = editor.opts.letteringClass\r\n      let length = editor.$el.find(`.${selectionClass}`).length\r\n      for( let i = 0; i < length; i++){\r\n        editor.$el.find(`.${selectionClass}`)[i].innerHTML = editor.$el.find(`.${selectionClass}`)[i].innerText.replace(/([\\w'-]+|[?.\",])/g, `<span class = 'fr-word-select'>$1</span>`)\r\n      }\r\n    }\r\n    if (editor.opts.saveInterval) {\r\n      _last_html = editor.html.get()\r\n      editor.events.on('contentChanged', function () {\r\n        // Added timeinterval which user has entered else default will be 10000ms. \r\n        setTimeout(_mightSave, editor.opts.saveInterval)\r\n      })\r\n      editor.events.on('keydown destroy', function () {\r\n        clearTimeout(_timeout)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    save: save,\r\n    reset: reset,\r\n    force: force\r\n  }\r\n}\r\n\r\nFE.DefineIcon('save', {\r\n  NAME: 'floppy-o',\r\n  FA5NAME: 'save'\r\n})\r\nFE.RegisterCommand('save', {\r\n  title: 'Save',\r\n  undo: false,\r\n  focus: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.save.save()\r\n  },\r\n  plugin: 'save'\r\n}) \r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  specialCharactersSets: [\r\n    {\r\n      title: 'Latin',\r\n      char: '&iexcl;',\r\n      list: [\r\n        { 'char': '&iexcl;', desc: 'INVERTED EXCLAMATION MARK' },\r\n        { 'char': '&cent;', desc: 'CENT SIGN' },\r\n        { 'char': '&pound;', desc: 'POUND SIGN' },\r\n        { 'char': '&curren;', desc: 'CURRENCY SIGN' },\r\n        { 'char': '&yen;', desc: 'YEN SIGN' },\r\n        { 'char': '&brvbar;', desc: 'BROKEN BAR' },\r\n        { 'char': '&sect;', desc: 'SECTION SIGN' },\r\n        { 'char': '&uml;', desc: 'DIAERESIS' },\r\n        { 'char': '&copy;', desc: 'COPYRIGHT SIGN' },\r\n        { 'char': '&trade;', desc: 'TRADEMARK SIGN' },\r\n        { 'char': '&ordf;', desc: 'FEMININE ORDINAL INDICATOR' },\r\n        { 'char': '&laquo;', desc: 'LEFT-POINTING DOUBLE ANGLE QUOTATION MARK' },\r\n        { 'char': '&not;', desc: 'NOT SIGN' },\r\n        { 'char': '&reg;', desc: 'REGISTERED SIGN' },\r\n        { 'char': '&macr;', desc: 'MACRON' },\r\n        { 'char': '&deg;', desc: 'DEGREE SIGN' },\r\n        { 'char': '&plusmn;', desc: 'PLUS-MINUS SIGN' },\r\n        { 'char': '&sup2;', desc: 'SUPERSCRIPT TWO' },\r\n        { 'char': '&sup3;', desc: 'SUPERSCRIPT THREE' },\r\n        { 'char': '&acute;', desc: 'ACUTE ACCENT' },\r\n        { 'char': '&micro;', desc: 'MICRO SIGN' },\r\n        { 'char': '&para;', desc: 'PILCROW SIGN' },\r\n        { 'char': '&middot;', desc: 'MIDDLE DOT' },\r\n        { 'char': '&cedil;', desc: 'CEDILLA' },\r\n        { 'char': '&sup1;', desc: 'SUPERSCRIPT ONE' },\r\n        { 'char': '&ordm;', desc: 'MASCULINE ORDINAL INDICATOR' },\r\n        { 'char': '&raquo;', desc: 'RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK' },\r\n        { 'char': '&frac14;', desc: 'VULGAR FRACTION ONE QUARTER' },\r\n        { 'char': '&frac12;', desc: 'VULGAR FRACTION ONE HALF' },\r\n        { 'char': '&frac34;', desc: 'VULGAR FRACTION THREE QUARTERS' },\r\n        { 'char': '&iquest;', desc: 'INVERTED QUESTION MARK' },\r\n        { 'char': '&Agrave;', desc: 'LATIN CAPITAL LETTER A WITH GRAVE' },\r\n        { 'char': '&Aacute;', desc: 'LATIN CAPITAL LETTER A WITH ACUTE' },\r\n        { 'char': '&Acirc;', desc: 'LATIN CAPITAL LETTER A WITH CIRCUMFLEX' },\r\n        { 'char': '&Atilde;', desc: 'LATIN CAPITAL LETTER A WITH TILDE' },\r\n        { 'char': '&Auml;', desc: 'LATIN CAPITAL LETTER A WITH DIAERESIS ' },\r\n        { 'char': '&Aring;', desc: 'LATIN CAPITAL LETTER A WITH RING ABOVE' },\r\n        { 'char': '&AElig;', desc: 'LATIN CAPITAL LETTER AE' },\r\n        { 'char': '&Ccedil;', desc: 'LATIN CAPITAL LETTER C WITH CEDILLA' },\r\n        { 'char': '&Egrave;', desc: 'LATIN CAPITAL LETTER E WITH GRAVE' },\r\n        { 'char': '&Eacute;', desc: 'LATIN CAPITAL LETTER E WITH ACUTE' },\r\n        { 'char': '&Ecirc;', desc: 'LATIN CAPITAL LETTER E WITH CIRCUMFLEX' },\r\n        { 'char': '&Euml;', desc: 'LATIN CAPITAL LETTER E WITH DIAERESIS' },\r\n        { 'char': '&Igrave;', desc: 'LATIN CAPITAL LETTER I WITH GRAVE' },\r\n        { 'char': '&Iacute;', desc: 'LATIN CAPITAL LETTER I WITH ACUTE' },\r\n        { 'char': '&Icirc;', desc: 'LATIN CAPITAL LETTER I WITH CIRCUMFLEX' },\r\n        { 'char': '&Iuml;', desc: 'LATIN CAPITAL LETTER I WITH DIAERESIS' },\r\n        { 'char': '&ETH;', desc: 'LATIN CAPITAL LETTER ETH' },\r\n        { 'char': '&Ntilde;', desc: 'LATIN CAPITAL LETTER N WITH TILDE' },\r\n        { 'char': '&Ograve;', desc: 'LATIN CAPITAL LETTER O WITH GRAVE' },\r\n        { 'char': '&Oacute;', desc: 'LATIN CAPITAL LETTER O WITH ACUTE' },\r\n        { 'char': '&Ocirc;', desc: 'LATIN CAPITAL LETTER O WITH CIRCUMFLEX' },\r\n        { 'char': '&Otilde;', desc: 'LATIN CAPITAL LETTER O WITH TILDE' },\r\n        { 'char': '&Ouml;', desc: 'LATIN CAPITAL LETTER O WITH DIAERESIS' },\r\n        { 'char': '&times;', desc: 'MULTIPLICATION SIGN' },\r\n        { 'char': '&Oslash;', desc: 'LATIN CAPITAL LETTER O WITH STROKE' },\r\n        { 'char': '&Ugrave;', desc: 'LATIN CAPITAL LETTER U WITH GRAVE' },\r\n        { 'char': '&Uacute;', desc: 'LATIN CAPITAL LETTER U WITH ACUTE' },\r\n        { 'char': '&Ucirc;', desc: 'LATIN CAPITAL LETTER U WITH CIRCUMFLEX' },\r\n        { 'char': '&Uuml;', desc: 'LATIN CAPITAL LETTER U WITH DIAERESIS' },\r\n        { 'char': '&Yacute;', desc: 'LATIN CAPITAL LETTER Y WITH ACUTE' },\r\n        { 'char': '&THORN;', desc: 'LATIN CAPITAL LETTER THORN' },\r\n        { 'char': '&szlig;', desc: 'LATIN SMALL LETTER SHARP S' },\r\n        { 'char': '&agrave;', desc: 'LATIN SMALL LETTER A WITH GRAVE' },\r\n        { 'char': '&aacute;', desc: 'LATIN SMALL LETTER A WITH ACUTE ' },\r\n        { 'char': '&acirc;', desc: 'LATIN SMALL LETTER A WITH CIRCUMFLEX' },\r\n        { 'char': '&atilde;', desc: 'LATIN SMALL LETTER A WITH TILDE' },\r\n        { 'char': '&auml;', desc: 'LATIN SMALL LETTER A WITH DIAERESIS' },\r\n        { 'char': '&aring;', desc: 'LATIN SMALL LETTER A WITH RING ABOVE' },\r\n        { 'char': '&aelig;', desc: 'LATIN SMALL LETTER AE' },\r\n        { 'char': '&ccedil;', desc: 'LATIN SMALL LETTER C WITH CEDILLA' },\r\n        { 'char': '&egrave;', desc: 'LATIN SMALL LETTER E WITH GRAVE' },\r\n        { 'char': '&eacute;', desc: 'LATIN SMALL LETTER E WITH ACUTE' },\r\n        { 'char': '&ecirc;', desc: 'LATIN SMALL LETTER E WITH CIRCUMFLEX' },\r\n        { 'char': '&euml;', desc: 'LATIN SMALL LETTER E WITH DIAERESIS' },\r\n        { 'char': '&igrave;', desc: 'LATIN SMALL LETTER I WITH GRAVE' },\r\n        { 'char': '&iacute;', desc: 'LATIN SMALL LETTER I WITH ACUTE' },\r\n        { 'char': '&icirc;', desc: 'LATIN SMALL LETTER I WITH CIRCUMFLEX' },\r\n        { 'char': '&iuml;', desc: 'LATIN SMALL LETTER I WITH DIAERESIS' },\r\n        { 'char': '&eth;', desc: 'LATIN SMALL LETTER ETH' },\r\n        { 'char': '&ntilde;', desc: 'LATIN SMALL LETTER N WITH TILDE' },\r\n        { 'char': '&ograve;', desc: 'LATIN SMALL LETTER O WITH GRAVE' },\r\n        { 'char': '&oacute;', desc: 'LATIN SMALL LETTER O WITH ACUTE' },\r\n        { 'char': '&ocirc;', desc: 'LATIN SMALL LETTER O WITH CIRCUMFLEX' },\r\n        { 'char': '&otilde;', desc: 'LATIN SMALL LETTER O WITH TILDE' },\r\n        { 'char': '&ouml;', desc: 'LATIN SMALL LETTER O WITH DIAERESIS' },\r\n        { 'char': '&divide;', desc: 'DIVISION SIGN' },\r\n        { 'char': '&oslash;', desc: 'LATIN SMALL LETTER O WITH STROKE' },\r\n        { 'char': '&ugrave;', desc: 'LATIN SMALL LETTER U WITH GRAVE' },\r\n        { 'char': '&uacute;', desc: 'LATIN SMALL LETTER U WITH ACUTE' },\r\n        { 'char': '&ucirc;', desc: 'LATIN SMALL LETTER U WITH CIRCUMFLEX' },\r\n        { 'char': '&uuml;', desc: 'LATIN SMALL LETTER U WITH DIAERESIS' },\r\n        { 'char': '&yacute;', desc: 'LATIN SMALL LETTER Y WITH ACUTE' },\r\n        { 'char': '&thorn;', desc: 'LATIN SMALL LETTER THORN' },\r\n        { 'char': '&yuml;', desc: 'LATIN SMALL LETTER Y WITH DIAERESIS' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Greek',\r\n      char: '&Alpha;',\r\n      list: [\r\n        { 'char': '&Alpha;', desc: 'GREEK CAPITAL LETTER ALPHA' },\r\n        { 'char': '&Beta;', desc: 'GREEK CAPITAL LETTER BETA' },\r\n        { 'char': '&Gamma;', desc: 'GREEK CAPITAL LETTER GAMMA' },\r\n        { 'char': '&Delta;', desc: 'GREEK CAPITAL LETTER DELTA' },\r\n        { 'char': '&Epsilon;', desc: 'GREEK CAPITAL LETTER EPSILON' },\r\n        { 'char': '&Zeta;', desc: 'GREEK CAPITAL LETTER ZETA' },\r\n        { 'char': '&Eta;', desc: 'GREEK CAPITAL LETTER ETA' },\r\n        { 'char': '&Theta;', desc: 'GREEK CAPITAL LETTER THETA' },\r\n        { 'char': '&Iota;', desc: 'GREEK CAPITAL LETTER IOTA' },\r\n        { 'char': '&Kappa;', desc: 'GREEK CAPITAL LETTER KAPPA' },\r\n        { 'char': '&Lambda;', desc: 'GREEK CAPITAL LETTER LAMBDA' },\r\n        { 'char': '&Mu;', desc: 'GREEK CAPITAL LETTER MU' },\r\n        { 'char': '&Nu;', desc: 'GREEK CAPITAL LETTER NU' },\r\n        { 'char': '&Xi;', desc: 'GREEK CAPITAL LETTER XI' },\r\n        { 'char': '&Omicron;', desc: 'GREEK CAPITAL LETTER OMICRON' },\r\n        { 'char': '&Pi;', desc: 'GREEK CAPITAL LETTER PI' },\r\n        { 'char': '&Rho;', desc: 'GREEK CAPITAL LETTER RHO' },\r\n        { 'char': '&Sigma;', desc: 'GREEK CAPITAL LETTER SIGMA' },\r\n        { 'char': '&Tau;', desc: 'GREEK CAPITAL LETTER TAU' },\r\n        { 'char': '&Upsilon;', desc: 'GREEK CAPITAL LETTER UPSILON' },\r\n        { 'char': '&Phi;', desc: 'GREEK CAPITAL LETTER PHI' },\r\n        { 'char': '&Chi;', desc: 'GREEK CAPITAL LETTER CHI' },\r\n        { 'char': '&Psi;', desc: 'GREEK CAPITAL LETTER PSI' },\r\n        { 'char': '&Omega;', desc: 'GREEK CAPITAL LETTER OMEGA' },\r\n        { 'char': '&alpha;', desc: 'GREEK SMALL LETTER ALPHA' },\r\n        { 'char': '&beta;', desc: 'GREEK SMALL LETTER BETA' },\r\n        { 'char': '&gamma;', desc: 'GREEK SMALL LETTER GAMMA' },\r\n        { 'char': '&delta;', desc: 'GREEK SMALL LETTER DELTA' },\r\n        { 'char': '&epsilon;', desc: 'GREEK SMALL LETTER EPSILON' },\r\n        { 'char': '&zeta;', desc: 'GREEK SMALL LETTER ZETA' },\r\n        { 'char': '&eta;', desc: 'GREEK SMALL LETTER ETA' },\r\n        { 'char': '&theta;', desc: 'GREEK SMALL LETTER THETA' },\r\n        { 'char': '&iota;', desc: 'GREEK SMALL LETTER IOTA' },\r\n        { 'char': '&kappa;', desc: 'GREEK SMALL LETTER KAPPA' },\r\n        { 'char': '&lambda;', desc: 'GREEK SMALL LETTER LAMBDA' },\r\n        { 'char': '&mu;', desc: 'GREEK SMALL LETTER MU' },\r\n        { 'char': '&nu;', desc: 'GREEK SMALL LETTER NU' },\r\n        { 'char': '&xi;', desc: 'GREEK SMALL LETTER XI' },\r\n        { 'char': '&omicron;', desc: 'GREEK SMALL LETTER OMICRON' },\r\n        { 'char': '&pi;', desc: 'GREEK SMALL LETTER PI' },\r\n        { 'char': '&rho;', desc: 'GREEK SMALL LETTER RHO' },\r\n        { 'char': '&sigmaf;', desc: 'GREEK SMALL LETTER FINAL SIGMA' },\r\n        { 'char': '&sigma;', desc: 'GREEK SMALL LETTER SIGMA' },\r\n        { 'char': '&tau;', desc: 'GREEK SMALL LETTER TAU' },\r\n        { 'char': '&upsilon;', desc: 'GREEK SMALL LETTER UPSILON' },\r\n        { 'char': '&phi;', desc: 'GREEK SMALL LETTER PHI' },\r\n        { 'char': '&chi;', desc: 'GREEK SMALL LETTER CHI' },\r\n        { 'char': '&psi;', desc: 'GREEK SMALL LETTER PSI' },\r\n        { 'char': '&omega;', desc: 'GREEK SMALL LETTER OMEGA' },\r\n        { 'char': '&thetasym;', desc: 'GREEK THETA SYMBOL' },\r\n        { 'char': '&upsih;', desc: 'GREEK UPSILON WITH HOOK SYMBOL' },\r\n        { 'char': '&straightphi;', desc: 'GREEK PHI SYMBOL' },\r\n        { 'char': '&piv;', desc: 'GREEK PI SYMBOL' },\r\n        { 'char': '&Gammad;', desc: 'GREEK LETTER DIGAMMA' },\r\n        { 'char': '&gammad;', desc: 'GREEK SMALL LETTER DIGAMMA' },\r\n        { 'char': '&varkappa;', desc: 'GREEK KAPPA SYMBOL' },\r\n        { 'char': '&varrho;', desc: 'GREEK RHO SYMBOL' },\r\n        { 'char': '&straightepsilon;', desc: 'GREEK LUNATE EPSILON SYMBOL' },\r\n        { 'char': '&backepsilon;', desc: 'GREEK REVERSED LUNATE EPSILON SYMBOL' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Cyrillic',\r\n      char: '&#x400',\r\n      list: [\r\n        { 'char': '&#x400', desc: 'CYRILLIC CAPITAL LETTER IE WITH GRAVE' },\r\n        { 'char': '&#x401', desc: 'CYRILLIC CAPITAL LETTER IO' },\r\n        { 'char': '&#x402', desc: 'CYRILLIC CAPITAL LETTER DJE' },\r\n        { 'char': '&#x403', desc: 'CYRILLIC CAPITAL LETTER GJE' },\r\n        { 'char': '&#x404', desc: 'CYRILLIC CAPITAL LETTER UKRAINIAN IE' },\r\n        { 'char': '&#x405', desc: 'CYRILLIC CAPITAL LETTER DZE' },\r\n        { 'char': '&#x406', desc: 'CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I' },\r\n        { 'char': '&#x407', desc: 'CYRILLIC CAPITAL LETTER YI' },\r\n        { 'char': '&#x408', desc: 'CYRILLIC CAPITAL LETTER JE' },\r\n        { 'char': '&#x409', desc: 'CYRILLIC CAPITAL LETTER LJE' },\r\n        { 'char': '&#x40A', desc: 'CYRILLIC CAPITAL LETTER NJE' },\r\n        { 'char': '&#x40B', desc: 'CYRILLIC CAPITAL LETTER TSHE' },\r\n        { 'char': '&#x40C', desc: 'CYRILLIC CAPITAL LETTER KJE' },\r\n        { 'char': '&#x40D', desc: 'CYRILLIC CAPITAL LETTER I WITH GRAVE' },\r\n        { 'char': '&#x40E', desc: 'CYRILLIC CAPITAL LETTER SHORT U' },\r\n        { 'char': '&#x40F', desc: 'CYRILLIC CAPITAL LETTER DZHE' },\r\n        { 'char': '&#x410', desc: 'CYRILLIC CAPITAL LETTER A' },\r\n        { 'char': '&#x411', desc: 'CYRILLIC CAPITAL LETTER BE' },\r\n        { 'char': '&#x412', desc: 'CYRILLIC CAPITAL LETTER VE' },\r\n        { 'char': '&#x413', desc: 'CYRILLIC CAPITAL LETTER GHE' },\r\n        { 'char': '&#x414', desc: 'CYRILLIC CAPITAL LETTER DE' },\r\n        { 'char': '&#x415', desc: 'CYRILLIC CAPITAL LETTER IE' },\r\n        { 'char': '&#x416', desc: 'CYRILLIC CAPITAL LETTER ZHE' },\r\n        { 'char': '&#x417', desc: 'CYRILLIC CAPITAL LETTER ZE' },\r\n        { 'char': '&#x418', desc: 'CYRILLIC CAPITAL LETTER I' },\r\n        { 'char': '&#x419', desc: 'CYRILLIC CAPITAL LETTER SHORT I' },\r\n        { 'char': '&#x41A', desc: 'CYRILLIC CAPITAL LETTER KA' },\r\n        { 'char': '&#x41B', desc: 'CYRILLIC CAPITAL LETTER EL' },\r\n        { 'char': '&#x41C', desc: 'CYRILLIC CAPITAL LETTER EM' },\r\n        { 'char': '&#x41D', desc: 'CYRILLIC CAPITAL LETTER EN' },\r\n        { 'char': '&#x41E', desc: 'CYRILLIC CAPITAL LETTER O' },\r\n        { 'char': '&#x41F', desc: 'CYRILLIC CAPITAL LETTER PE' },\r\n        { 'char': '&#x420', desc: 'CYRILLIC CAPITAL LETTER ER' },\r\n        { 'char': '&#x421', desc: 'CYRILLIC CAPITAL LETTER ES' },\r\n        { 'char': '&#x422', desc: 'CYRILLIC CAPITAL LETTER TE' },\r\n        { 'char': '&#x423', desc: 'CYRILLIC CAPITAL LETTER U' },\r\n        { 'char': '&#x424', desc: 'CYRILLIC CAPITAL LETTER EF' },\r\n        { 'char': '&#x425', desc: 'CYRILLIC CAPITAL LETTER HA' },\r\n        { 'char': '&#x426', desc: 'CYRILLIC CAPITAL LETTER TSE' },\r\n        { 'char': '&#x427', desc: 'CYRILLIC CAPITAL LETTER CHE' },\r\n        { 'char': '&#x428', desc: 'CYRILLIC CAPITAL LETTER SHA' },\r\n        { 'char': '&#x429', desc: 'CYRILLIC CAPITAL LETTER SHCHA' },\r\n        { 'char': '&#x42A', desc: 'CYRILLIC CAPITAL LETTER HARD SIGN' },\r\n        { 'char': '&#x42B', desc: 'CYRILLIC CAPITAL LETTER YERU' },\r\n        { 'char': '&#x42C', desc: 'CYRILLIC CAPITAL LETTER SOFT SIGN' },\r\n        { 'char': '&#x42D', desc: 'CYRILLIC CAPITAL LETTER E' },\r\n        { 'char': '&#x42E', desc: 'CYRILLIC CAPITAL LETTER YU' },\r\n        { 'char': '&#x42F', desc: 'CYRILLIC CAPITAL LETTER YA' },\r\n        { 'char': '&#x430', desc: 'CYRILLIC SMALL LETTER A' },\r\n        { 'char': '&#x431', desc: 'CYRILLIC SMALL LETTER BE' },\r\n        { 'char': '&#x432', desc: 'CYRILLIC SMALL LETTER VE' },\r\n        { 'char': '&#x433', desc: 'CYRILLIC SMALL LETTER GHE' },\r\n        { 'char': '&#x434', desc: 'CYRILLIC SMALL LETTER DE' },\r\n        { 'char': '&#x435', desc: 'CYRILLIC SMALL LETTER IE' },\r\n        { 'char': '&#x436', desc: 'CYRILLIC SMALL LETTER ZHE' },\r\n        { 'char': '&#x437', desc: 'CYRILLIC SMALL LETTER ZE' },\r\n        { 'char': '&#x438', desc: 'CYRILLIC SMALL LETTER I' },\r\n        { 'char': '&#x439', desc: 'CYRILLIC SMALL LETTER SHORT I' },\r\n        { 'char': '&#x43A', desc: 'CYRILLIC SMALL LETTER KA' },\r\n        { 'char': '&#x43B', desc: 'CYRILLIC SMALL LETTER EL' },\r\n        { 'char': '&#x43C', desc: 'CYRILLIC SMALL LETTER EM' },\r\n        { 'char': '&#x43D', desc: 'CYRILLIC SMALL LETTER EN' },\r\n        { 'char': '&#x43E', desc: 'CYRILLIC SMALL LETTER O' },\r\n        { 'char': '&#x43F', desc: 'CYRILLIC SMALL LETTER PE' },\r\n        { 'char': '&#x440', desc: 'CYRILLIC SMALL LETTER ER' },\r\n        { 'char': '&#x441', desc: 'CYRILLIC SMALL LETTER ES' },\r\n        { 'char': '&#x442', desc: 'CYRILLIC SMALL LETTER TE' },\r\n        { 'char': '&#x443', desc: 'CYRILLIC SMALL LETTER U' },\r\n        { 'char': '&#x444', desc: 'CYRILLIC SMALL LETTER EF' },\r\n        { 'char': '&#x445', desc: 'CYRILLIC SMALL LETTER HA' },\r\n        { 'char': '&#x446', desc: 'CYRILLIC SMALL LETTER TSE' },\r\n        { 'char': '&#x447', desc: 'CYRILLIC SMALL LETTER CHE' },\r\n        { 'char': '&#x448', desc: 'CYRILLIC SMALL LETTER SHA' },\r\n        { 'char': '&#x449', desc: 'CYRILLIC SMALL LETTER SHCHA' },\r\n        { 'char': '&#x44A', desc: 'CYRILLIC SMALL LETTER HARD SIGN' },\r\n        { 'char': '&#x44B', desc: 'CYRILLIC SMALL LETTER YERU' },\r\n        { 'char': '&#x44C', desc: 'CYRILLIC SMALL LETTER SOFT SIGN' },\r\n        { 'char': '&#x44D', desc: 'CYRILLIC SMALL LETTER E' },\r\n        { 'char': '&#x44E', desc: 'CYRILLIC SMALL LETTER YU' },\r\n        { 'char': '&#x44F', desc: 'CYRILLIC SMALL LETTER YA' },\r\n        { 'char': '&#x450', desc: 'CYRILLIC SMALL LETTER IE WITH GRAVE' },\r\n        { 'char': '&#x451', desc: 'CYRILLIC SMALL LETTER IO' },\r\n        { 'char': '&#x452', desc: 'CYRILLIC SMALL LETTER DJE' },\r\n        { 'char': '&#x453', desc: 'CYRILLIC SMALL LETTER GJE' },\r\n        { 'char': '&#x454', desc: 'CYRILLIC SMALL LETTER UKRAINIAN IE' },\r\n        { 'char': '&#x455', desc: 'CYRILLIC SMALL LETTER DZE' },\r\n        { 'char': '&#x456', desc: 'CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I' },\r\n        { 'char': '&#x457', desc: 'CYRILLIC SMALL LETTER YI' },\r\n        { 'char': '&#x458', desc: 'CYRILLIC SMALL LETTER JE' },\r\n        { 'char': '&#x459', desc: 'CYRILLIC SMALL LETTER LJE' },\r\n        { 'char': '&#x45A', desc: 'CYRILLIC SMALL LETTER NJE' },\r\n        { 'char': '&#x45B', desc: 'CYRILLIC SMALL LETTER TSHE' },\r\n        { 'char': '&#x45C', desc: 'CYRILLIC SMALL LETTER KJE' },\r\n        { 'char': '&#x45D', desc: 'CYRILLIC SMALL LETTER I WITH GRAVE' },\r\n        { 'char': '&#x45E', desc: 'CYRILLIC SMALL LETTER SHORT U' },\r\n        { 'char': '&#x45F', desc: 'CYRILLIC SMALL LETTER DZHE' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Punctuation',\r\n      char: '&ndash;',\r\n      list: [\r\n        { 'char': '&ndash;', desc: 'EN DASH' },\r\n        { 'char': '&mdash;', desc: 'EM DASH' },\r\n        { 'char': '&lsquo;', desc: 'LEFT SINGLE QUOTATION MARK' },\r\n        { 'char': '&rsquo;', desc: 'RIGHT SINGLE QUOTATION MARK' },\r\n        { 'char': '&sbquo;', desc: 'SINGLE LOW-9 QUOTATION MARK' },\r\n        { 'char': '&ldquo;', desc: 'LEFT DOUBLE QUOTATION MARK' },\r\n        { 'char': '&rdquo;', desc: 'RIGHT DOUBLE QUOTATION MARK' },\r\n        { 'char': '&bdquo;', desc: 'DOUBLE LOW-9 QUOTATION MARK' },\r\n        { 'char': '&dagger;', desc: 'DAGGER' },\r\n        { 'char': '&Dagger;', desc: 'DOUBLE DAGGER' },\r\n        { 'char': '&bull;', desc: 'BULLET' },\r\n        { 'char': '&hellip;', desc: 'HORIZONTAL ELLIPSIS' },\r\n        { 'char': '&permil;', desc: 'PER MILLE SIGN' },\r\n        { 'char': '&prime;', desc: 'PRIME' },\r\n        { 'char': '&Prime;', desc: 'DOUBLE PRIME' },\r\n        { 'char': '&lsaquo;', desc: 'SINGLE LEFT-POINTING ANGLE QUOTATION MARK' },\r\n        { 'char': '&rsaquo;', desc: 'SINGLE RIGHT-POINTING ANGLE QUOTATION MARK' },\r\n        { 'char': '&oline;', desc: 'OVERLINE' },\r\n        { 'char': '&frasl;', desc: 'FRACTION SLASH' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Currency',\r\n      char: '&#x20A0',\r\n      list: [\r\n        { 'char': '&#x20A0', desc: 'EURO-CURRENCY SIGN' },\r\n        { 'char': '&#x20A1', desc: 'COLON SIGN' },\r\n        { 'char': '&#x20A2', desc: 'CRUZEIRO SIGN' },\r\n        { 'char': '&#x20A3', desc: 'FRENCH FRANC SIGN' },\r\n        { 'char': '&#x20A4', desc: 'LIRA SIGN' },\r\n        { 'char': '&#x20A5', desc: 'MILL SIGN' },\r\n        { 'char': '&#x20A6', desc: 'NAIRA SIGN' },\r\n        { 'char': '&#x20A7', desc: 'PESETA SIGN' },\r\n        { 'char': '&#x20A8', desc: 'RUPEE SIGN' },\r\n        { 'char': '&#x20A9', desc: 'WON SIGN' },\r\n        { 'char': '&#x20AA', desc: 'NEW SHEQEL SIGN' },\r\n        { 'char': '&#x20AB', desc: 'DONG SIGN' },\r\n        { 'char': '&#x20AC', desc: 'EURO SIGN' },\r\n        { 'char': '&#x20AD', desc: 'KIP SIGN' },\r\n        { 'char': '&#x20AE', desc: 'TUGRIK SIGN' },\r\n        { 'char': '&#x20AF', desc: 'DRACHMA SIGN' },\r\n        { 'char': '&#x20B0', desc: 'GERMAN PENNY SYMBOL' },\r\n        { 'char': '&#x20B1', desc: 'PESO SIGN' },\r\n        { 'char': '&#x20B2', desc: 'GUARANI SIGN' },\r\n        { 'char': '&#x20B3', desc: 'AUSTRAL SIGN' },\r\n        { 'char': '&#x20B4', desc: 'HRYVNIA SIGN' },\r\n        { 'char': '&#x20B5', desc: 'CEDI SIGN' },\r\n        { 'char': '&#x20B6', desc: 'LIVRE TOURNOIS SIGN' },\r\n        { 'char': '&#x20B7', desc: 'SPESMILO SIGN' },\r\n        { 'char': '&#x20B8', desc: 'TENGE SIGN' },\r\n        { 'char': '&#x20B9', desc: 'INDIAN RUPEE SIGN' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Arrows',\r\n      char: '&#x2190',\r\n      list: [\r\n        { 'char': '&#x2190', desc: 'LEFTWARDS ARROW' },\r\n        { 'char': '&#x2191', desc: 'UPWARDS ARROW' },\r\n        { 'char': '&#x2192', desc: 'RIGHTWARDS ARROW' },\r\n        { 'char': '&#x2193', desc: 'DOWNWARDS ARROW' },\r\n        { 'char': '&#x2194', desc: 'LEFT RIGHT ARROW' },\r\n        { 'char': '&#x2195', desc: 'UP DOWN ARROW' },\r\n        { 'char': '&#x2196', desc: 'NORTH WEST ARROW' },\r\n        { 'char': '&#x2197', desc: 'NORTH EAST ARROW' },\r\n        { 'char': '&#x2198', desc: 'SOUTH EAST ARROW' },\r\n        { 'char': '&#x2199', desc: 'SOUTH WEST ARROW' },\r\n        { 'char': '&#x219A', desc: 'LEFTWARDS ARROW WITH STROKE' },\r\n        { 'char': '&#x219B', desc: 'RIGHTWARDS ARROW WITH STROKE' },\r\n        { 'char': '&#x219C', desc: 'LEFTWARDS WAVE ARROW' },\r\n        { 'char': '&#x219D', desc: 'RIGHTWARDS WAVE ARROW' },\r\n        { 'char': '&#x219E', desc: 'LEFTWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x219F', desc: 'UPWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A0', desc: 'RIGHTWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A1', desc: 'DOWNWARDS TWO HEADED ARROW' },\r\n        { 'char': '&#x21A2', desc: 'LEFTWARDS ARROW WITH TAIL' },\r\n        { 'char': '&#x21A3', desc: 'RIGHTWARDS ARROW WITH TAIL' },\r\n        { 'char': '&#x21A4', desc: 'LEFTWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A5', desc: 'UPWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A6', desc: 'RIGHTWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A7', desc: 'DOWNWARDS ARROW FROM BAR' },\r\n        { 'char': '&#x21A8', desc: 'UP DOWN ARROW WITH BASE' },\r\n        { 'char': '&#x21A9', desc: 'LEFTWARDS ARROW WITH HOOK' },\r\n        { 'char': '&#x21AA', desc: 'RIGHTWARDS ARROW WITH HOOK' },\r\n        { 'char': '&#x21AB', desc: 'LEFTWARDS ARROW WITH LOOP' },\r\n        { 'char': '&#x21AC', desc: 'RIGHTWARDS ARROW WITH LOOP' },\r\n        { 'char': '&#x21AD', desc: 'LEFT RIGHT WAVE ARROW' },\r\n        { 'char': '&#x21AE', desc: 'LEFT RIGHT ARROW WITH STROKE' },\r\n        { 'char': '&#x21AF', desc: 'DOWNWARDS ZIGZAG ARROW' },\r\n        { 'char': '&#x21B0', desc: 'UPWARDS ARROW WITH TIP LEFTWARDS' },\r\n        { 'char': '&#x21B1', desc: 'UPWARDS ARROW WITH TIP RIGHTWARDS' },\r\n        { 'char': '&#x21B2', desc: 'DOWNWARDS ARROW WITH TIP LEFTWARDS' },\r\n        { 'char': '&#x21B3', desc: 'DOWNWARDS ARROW WITH TIP RIGHTWARDS' },\r\n        { 'char': '&#x21B4', desc: 'RIGHTWARDS ARROW WITH CORNER DOWNWARDS' },\r\n        { 'char': '&#x21B5', desc: 'DOWNWARDS ARROW WITH CORNER LEFTWARDS' },\r\n        { 'char': '&#x21B6', desc: 'ANTICLOCKWISE TOP SEMICIRCLE ARROW' },\r\n        { 'char': '&#x21B7', desc: 'CLOCKWISE TOP SEMICIRCLE ARROW' },\r\n        { 'char': '&#x21B8', desc: 'NORTH WEST ARROW TO LONG BAR' },\r\n        { 'char': '&#x21B9', desc: 'LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21BA', desc: 'ANTICLOCKWISE OPEN CIRCLE ARROW' },\r\n        { 'char': '&#x21BB', desc: 'CLOCKWISE OPEN CIRCLE ARROW' },\r\n        { 'char': '&#x21BC', desc: 'LEFTWARDS HARPOON WITH BARB UPWARDS' },\r\n        { 'char': '&#x21BD', desc: 'LEFTWARDS HARPOON WITH BARB DOWNWARDS' },\r\n        { 'char': '&#x21BE', desc: 'UPWARDS HARPOON WITH BARB RIGHTWARDS' },\r\n        { 'char': '&#x21BF', desc: 'UPWARDS HARPOON WITH BARB LEFTWARDS' },\r\n        { 'char': '&#x21C0', desc: 'RIGHTWARDS HARPOON WITH BARB UPWARDS' },\r\n        { 'char': '&#x21C1', desc: 'RIGHTWARDS HARPOON WITH BARB DOWNWARDS' },\r\n        { 'char': '&#x21C2', desc: 'DOWNWARDS HARPOON WITH BARB RIGHTWARDS' },\r\n        { 'char': '&#x21C3', desc: 'DOWNWARDS HARPOON WITH BARB LEFTWARDS' },\r\n        { 'char': '&#x21C4', desc: 'RIGHTWARDS ARROW OVER LEFTWARDS ARROW' },\r\n        { 'char': '&#x21C5', desc: 'UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW' },\r\n        { 'char': '&#x21C6', desc: 'LEFTWARDS ARROW OVER RIGHTWARDS ARROW' },\r\n        { 'char': '&#x21C7', desc: 'LEFTWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21C8', desc: 'UPWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21C9', desc: 'RIGHTWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21CA', desc: 'DOWNWARDS PAIRED ARROWS' },\r\n        { 'char': '&#x21CB', desc: 'LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON' },\r\n        { 'char': '&#x21CC', desc: 'RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON' },\r\n        { 'char': '&#x21CD', desc: 'LEFTWARDS DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21CE', desc: 'LEFT RIGHT DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21CF', desc: 'RIGHTWARDS DOUBLE ARROW WITH STROKE' },\r\n        { 'char': '&#x21D0', desc: 'LEFTWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D1', desc: 'UPWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D2', desc: 'RIGHTWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D3', desc: 'DOWNWARDS DOUBLE ARROW' },\r\n        { 'char': '&#x21D4', desc: 'LEFT RIGHT DOUBLE ARROW' },\r\n        { 'char': '&#x21D5', desc: 'UP DOWN DOUBLE ARROW' },\r\n        { 'char': '&#x21D6', desc: 'NORTH WEST DOUBLE ARROW' },\r\n        { 'char': '&#x21D7', desc: 'NORTH EAST DOUBLE ARROW' },\r\n        { 'char': '&#x21D8', desc: 'SOUTH EAST DOUBLE ARROW' },\r\n        { 'char': '&#x21D9', desc: 'SOUTH WEST DOUBLE ARROW' },\r\n        { 'char': '&#x21DA', desc: 'LEFTWARDS TRIPLE ARROW' },\r\n        { 'char': '&#x21DB', desc: 'RIGHTWARDS TRIPLE ARROW' },\r\n        { 'char': '&#x21DC', desc: 'LEFTWARDS SQUIGGLE ARROW' },\r\n        { 'char': '&#x21DD', desc: 'RIGHTWARDS SQUIGGLE ARROW' },\r\n        { 'char': '&#x21DE', desc: 'UPWARDS ARROW WITH DOUBLE STROKE' },\r\n        { 'char': '&#x21DF', desc: 'DOWNWARDS ARROW WITH DOUBLE STROKE' },\r\n        { 'char': '&#x21E0', desc: 'LEFTWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E1', desc: 'UPWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E2', desc: 'RIGHTWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E3', desc: 'DOWNWARDS DASHED ARROW' },\r\n        { 'char': '&#x21E4', desc: 'LEFTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21E5', desc: 'RIGHTWARDS ARROW TO BAR' },\r\n        { 'char': '&#x21E6', desc: 'LEFTWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E7', desc: 'UPWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E8', desc: 'RIGHTWARDS WHITE ARROW' },\r\n        { 'char': '&#x21E9', desc: 'DOWNWARDS WHITE ARROW' },\r\n        { 'char': '&#x21EA', desc: 'UPWARDS WHITE ARROW FROM BAR' },\r\n        { 'char': '&#x21EB', desc: 'UPWARDS WHITE ARROW ON PEDESTAL' },\r\n        { 'char': '&#x21EC', desc: 'UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR' },\r\n        { 'char': '&#x21ED', desc: 'UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR' },\r\n        { 'char': '&#x21EE', desc: 'UPWARDS WHITE DOUBLE ARROW' },\r\n        { 'char': '&#x21EF', desc: 'UPWARDS WHITE DOUBLE ARROW ON PEDESTAL' },\r\n        { 'char': '&#x21F0', desc: 'RIGHTWARDS WHITE ARROW FROM WALL' },\r\n        { 'char': '&#x21F1', desc: 'NORTH WEST ARROW TO CORNER' },\r\n        { 'char': '&#x21F2', desc: 'SOUTH EAST ARROW TO CORNER' },\r\n        { 'char': '&#x21F3', desc: 'UP DOWN WHITE ARROW' },\r\n        { 'char': '&#x21F4', desc: 'RIGHT ARROW WITH SMALL CIRCLE' },\r\n        { 'char': '&#x21F5', desc: 'DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW' },\r\n        { 'char': '&#x21F6', desc: 'THREE RIGHTWARDS ARROWS' },\r\n        { 'char': '&#x21F7', desc: 'LEFTWARDS ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21F8', desc: 'RIGHTWARDS ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21F9', desc: 'LEFT RIGHT ARROW WITH VERTICAL STROKE' },\r\n        { 'char': '&#x21FA', desc: 'LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FB', desc: 'RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FC', desc: 'LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE' },\r\n        { 'char': '&#x21FD', desc: 'LEFTWARDS OPEN-HEADED ARROW' },\r\n        { 'char': '&#x21FE', desc: 'RIGHTWARDS OPEN-HEADED ARROW' },\r\n        { 'char': '&#x21FF', desc: 'LEFT RIGHT OPEN-HEADED ARROW' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Math',\r\n      char: '&forall;',\r\n      list: [\r\n        { 'char': '&forall;', desc: 'FOR ALL' },\r\n        { 'char': '&part;', desc: 'PARTIAL DIFFERENTIAL' },\r\n        { 'char': '&exist;', desc: 'THERE EXISTS' },\r\n        { 'char': '&empty;', desc: 'EMPTY SET' },\r\n        { 'char': '&nabla;', desc: 'NABLA' },\r\n        { 'char': '&isin;', desc: 'ELEMENT OF' },\r\n        { 'char': '&notin;', desc: 'NOT AN ELEMENT OF' },\r\n        { 'char': '&ni;', desc: 'CONTAINS AS MEMBER' },\r\n        { 'char': '&prod;', desc: 'N-ARY PRODUCT' },\r\n        { 'char': '&sum;', desc: 'N-ARY SUMMATION' },\r\n        { 'char': '&minus;', desc: 'MINUS SIGN' },\r\n        { 'char': '&lowast;', desc: 'ASTERISK OPERATOR' },\r\n        { 'char': '&radic;', desc: 'SQUARE ROOT' },\r\n        { 'char': '&prop;', desc: 'PROPORTIONAL TO' },\r\n        { 'char': '&infin;', desc: 'INFINITY' },\r\n        { 'char': '&ang;', desc: 'ANGLE' },\r\n        { 'char': '&and;', desc: 'LOGICAL AND' },\r\n        { 'char': '&or;', desc: 'LOGICAL OR' },\r\n        { 'char': '&cap;', desc: 'INTERSECTION' },\r\n        { 'char': '&cup;', desc: 'UNION' },\r\n        { 'char': '&int;', desc: 'INTEGRAL' },\r\n        { 'char': '&there4;', desc: 'THEREFORE' },\r\n        { 'char': '&sim;', desc: 'TILDE OPERATOR' },\r\n        { 'char': '&cong;', desc: 'APPROXIMATELY EQUAL TO' },\r\n        { 'char': '&asymp;', desc: 'ALMOST EQUAL TO' },\r\n        { 'char': '&ne;', desc: 'NOT EQUAL TO' },\r\n        { 'char': '&equiv;', desc: 'IDENTICAL TO' },\r\n        { 'char': '&le;', desc: 'LESS-THAN OR EQUAL TO' },\r\n        { 'char': '&ge;', desc: 'GREATER-THAN OR EQUAL TO' },\r\n        { 'char': '&sub;', desc: 'SUBSET OF' },\r\n        { 'char': '&sup;', desc: 'SUPERSET OF' },\r\n        { 'char': '&nsub;', desc: 'NOT A SUBSET OF' },\r\n        { 'char': '&sube;', desc: 'SUBSET OF OR EQUAL TO' },\r\n        { 'char': '&supe;', desc: 'SUPERSET OF OR EQUAL TO' },\r\n        { 'char': '&oplus;', desc: 'CIRCLED PLUS' },\r\n        { 'char': '&otimes;', desc: 'CIRCLED TIMES' },\r\n        { 'char': '&perp;', desc: 'UP TACK' }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Misc',\r\n      char: '&spades;',\r\n      list: [\r\n        { 'char': '&spades;', desc: 'BLACK SPADE SUIT' },\r\n        { 'char': '&clubs;', desc: 'BLACK CLUB SUIT' },\r\n        { 'char': '&hearts;', desc: 'BLACK HEART SUIT' },\r\n        { 'char': '&diams;', desc: 'BLACK DIAMOND SUIT' },\r\n        { 'char': '&#x2669', desc: 'QUARTER NOTE' },\r\n        { 'char': '&#x266A', desc: 'EIGHTH NOTE' },\r\n        { 'char': '&#x266B', desc: 'BEAMED EIGHTH NOTES' },\r\n        { 'char': '&#x266C', desc: 'BEAMED SIXTEENTH NOTES' },\r\n        { 'char': '&#x266D', desc: 'MUSIC FLAT SIGN' },\r\n        { 'char': '&#x266E', desc: 'MUSIC NATURAL SIGN' },\r\n        { 'char': '&#x2600', desc: 'BLACK SUN WITH RAYS' },\r\n        { 'char': '&#x2601', desc: 'CLOUD' },\r\n        { 'char': '&#x2602', desc: 'UMBRELLA' },\r\n        { 'char': '&#x2603', desc: 'SNOWMAN' },\r\n        { 'char': '&#x2615', desc: 'HOT BEVERAGE' },\r\n        { 'char': '&#x2618', desc: 'SHAMROCK' },\r\n        { 'char': '&#x262F', desc: 'YIN YANG' },\r\n        { 'char': '&#x2714', desc: 'HEAVY CHECK MARK' },\r\n        { 'char': '&#x2716', desc: 'HEAVY MULTIPLICATION X' },\r\n        { 'char': '&#x2744', desc: 'SNOWFLAKE' },\r\n        { 'char': '&#x275B', desc: 'HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275C', desc: 'HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275D', desc: 'HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x275E', desc: 'HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT' },\r\n        { 'char': '&#x2764', desc: 'HEAVY BLACK HEART' }\r\n      ]\r\n    }\r\n  ],\r\n  specialCharButtons: ['specialCharBack', '|'],\r\n})\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'specialCharacters': '[_BUTTONS_][_CUSTOM_LAYER_]'\r\n})\r\n\r\nFE.PLUGINS.specialCharacters = function (editor) {\r\n\r\n  const { $ } = editor\r\n\r\n  // Load categories with special characters data\r\n  let selectedCategory = editor.opts.specialCharactersSets[0]\r\n  let { specialCharactersSets : categories } = editor.opts\r\n  let specialCharButtons = ''\r\n\r\n  /** \r\n   * Display the special characters popup \r\n   */\r\n  function _showSpecialChars() {\r\n    let $popup = editor.popups.get('specialCharacters')\r\n\r\n    if (!$popup) $popup = _initSpecialChars()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      editor.popups.refresh('specialCharacters')\r\n      editor.popups.setContainer('specialCharacters', editor.$tb)\r\n\r\n      // Special characters popup left and top position.\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"specialCharacters\"]')\r\n      const { left, top } = editor.button.getPosition($btn)\r\n\r\n      editor.popups.show('specialCharacters', left, top, outerHeight)\r\n    }\r\n  }\r\n\r\n  /** \r\n   * Initialize the special characters popup\r\n   */\r\n  function _initSpecialChars() {\r\n\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // If toolbar is inline then load special character buttons\r\n      if (editor.opts.specialCharButtons.length > 0) {\r\n        specialCharButtons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.specialCharButtons)}</div>`\r\n      }\r\n    }\r\n\r\n    // Template for popup\r\n    const template = {\r\n      buttons: specialCharButtons,\r\n      custom_layer: _specialCharsHTML()\r\n    }\r\n\r\n    // Create popup.\r\n    const $popup = editor.popups.create('specialCharacters', template)\r\n\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /** \r\n   * HTML for the special characters popup. \r\n   */\r\n  function _specialCharsHTML() {\r\n    // Create special characters html.\r\n    return `\r\n        <div class=\"fr-buttons fr-tabs fr-tabs-scroll\">\r\n          ${_renderSplCharsCategory(categories, selectedCategory)}\r\n        </div>\r\n        <div class=\"fr-icon-container fr-sc-container\">\r\n          ${_renderSpanSplCharsHtml(selectedCategory)}\r\n        </div>`\r\n  }\r\n\r\n  /** \r\n   * Refresh the Popup \r\n   */\r\n  function _refreshPopup() {\r\n    editor.popups.get('specialCharacters').html(specialCharButtons + _specialCharsHTML())\r\n  }\r\n\r\n  /** \r\n   * Set the current selected special character category and update the popup \r\n   */\r\n  function setSpecialCharacterCategory(categoryId) {\r\n    selectedCategory = categories.filter(category => {\r\n      return category.title === categoryId\r\n    })[0]\r\n\r\n    _refreshPopup()\r\n  }\r\n\r\n  /** \r\n   * Register keyboard events. \r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('specialCharacters') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n      let index\r\n      let $el\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n\r\n        // Extremities reached.\r\n        if (($focused_item.is('span.fr-icon') && e.shiftKey) || ($focused_item.is('a') && !e.shiftKey)) {\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          // Focus back the popup's toolbar if exists.\r\n          status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n        }\r\n\r\n        if (status !== false) {\r\n\r\n          // Build elements that should be focused next.\r\n          let $tabElements = $popup.find('span.fr-icon:focus').first().concat($popup.findVisible(' span.fr-icon').first().concat($popup.find('a')))\r\n\r\n          if ($focused_item.is('span.fr-icon')) {\r\n            $tabElements = $tabElements.not('span.fr-icon:not(:focus)')\r\n          }\r\n\r\n          // Get focused item position.\r\n          index = $tabElements.index($focused_item)\r\n\r\n          // Backwards.\r\n          if (e.shiftKey) {\r\n            index = (((index - 1) % $tabElements.length) + $tabElements.length) % $tabElements.length\r\n\r\n            // Javascript negative modulo bug.\r\n            // Forward.\r\n          }\r\n          else {\r\n            index = (index + 1) % $tabElements.length\r\n          }\r\n\r\n          // Find next element to focus.\r\n          $el = $tabElements.get(index)\r\n\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-icon')) {\r\n\r\n          // Get all current icons.\r\n          const $icons = $focused_item.parent().find('span.fr-icon')\r\n\r\n          // Get focused item position.\r\n          index = $icons.index($focused_item)\r\n\r\n          // Get icons matrix dimensions.\r\n          const columns = 11\r\n          const lines = Math.floor($icons.length / columns)\r\n\r\n          // Get focused item coordinates.\r\n          const column = index % columns\r\n          const line = Math.floor(index / columns)\r\n\r\n          let nextIndex = line * columns + column\r\n          const dimension = lines * columns\r\n\r\n          // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          // Up/Down: Traverse matrix lines.\r\n          // Left/Right: Traverse the matrix as it is a vector.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            nextIndex = (nextIndex + columns) % dimension\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            nextIndex = (nextIndex + 1) % dimension\r\n          }\r\n\r\n          // Get the next element based on the new index.\r\n          $el = $($icons.get(nextIndex))\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n        if ($focused_item.is('a')) {\r\n          $focused_item[0].click()\r\n        }\r\n        else {\r\n          editor.button.exec($focused_item)\r\n        }\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Render special characters category and update the popup\r\n   */\r\n  function _renderSplCharsCategory(categories, selectedCategory) {\r\n    let buttonHtml = ''\r\n    \r\n    categories.forEach(category => {\r\n      const buttonMap = {\r\n        elementClass: category.title === selectedCategory.title ? 'fr-active fr-active-tab' : '',\r\n        title: category.title,\r\n        dataParam1: category.title,\r\n        desc: category.char\r\n      }\r\n\r\n      buttonHtml += `<button class=\"fr-command fr-btn fr-special-character-category ${buttonMap.elementClass}\" title=\"${buttonMap.title}\" data-cmd=\"setSpecialCharacterCategory\" data-param1=\"${buttonMap.dataParam1}\"><span>${buttonMap.desc}</span></button>`\r\n    })\r\n    \r\n    return buttonHtml\r\n  }\r\n\r\n  /**\r\n   * Render special character\r\n   */\r\n  function _renderSpanSplCharsHtml(selectedCategory) {\r\n    let splChars_html = ''\r\n    \r\n    let i = 0\r\n    selectedCategory.list.forEach(splChar => {\r\n      \r\n      const splCharMap = { dataParam1: splChar.char, title: splChar.desc, splCharValue: splChar.char }\r\n      \r\n      splChars_html += `<span class=\"fr-command fr-special-character fr-icon\" role=\"button\" \r\n      data-cmd=\"insertSpecialCharacter\" data-param1=\"${splCharMap.dataParam1}\" \r\n      title=\"${splCharMap.title}\">${splCharMap.splCharValue}</span>`\r\n      i++\r\n    })\r\n    \r\n    return splChars_html\r\n  }\r\n\r\n   /*\r\n    * Go back to the inline editor.\r\n  */\r\n function back() {\r\n  editor.popups.hide('specialCharacters')\r\n  editor.toolbar.showInline()\r\n}\r\n\r\n  return {\r\n    setSpecialCharacterCategory: setSpecialCharacterCategory,\r\n    showSpecialCharsPopup: _showSpecialChars,\r\n    back: back\r\n  }\r\n}\r\n\r\nFE.DefineIcon('specialCharacters', { NAME: 'dollar-sign', SVG_KEY: 'symbols' })\r\n\r\nFE.RegisterCommand('specialCharacters', {\r\n  title: 'Special Characters',\r\n  icon: 'specialCharacters',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  plugin: 'specialCharacters',\r\n  showOnMobile: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('specialCharacters')) {\r\n      this.specialCharacters.showSpecialCharsPopup()\r\n    } else {\r\n      if (this.$el.find('.fr-marker')) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n\r\n      this.popups.hide('specialCharacters')\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('insertSpecialCharacter', {\r\n  callback(cmd, specialCharacter) {\r\n\r\n    // Insert special characters\r\n    this.undo.saveStep()\r\n    this.html.insert(specialCharacter)\r\n    this.undo.saveStep()\r\n\r\n    this.popups.hide('specialCharacters')\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('setSpecialCharacterCategory', {\r\n  undo: false,\r\n  focus: false,\r\n  callback(cmd, category) {\r\n    this.specialCharacters.setSpecialCharacterCategory(category)\r\n  }\r\n})\r\n\r\nFE.DefineIcon('specialCharBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('specialCharBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.specialCharacters.back()\r\n  }\r\n})\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'table.insert': '[_BUTTONS_][_ROWS_COLUMNS_]',\r\n  'table.edit': '[_BUTTONS_]',\r\n  'table.colors': '[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  tableInsertMaxSize: 10,\r\n  tableEditButtons: ['tableHeader', 'tableRemove', 'tableRows', 'tableColumns', 'tableStyle', '-', 'tableCells', 'tableCellBackground', 'tableCellVerticalAlign', 'tableCellHorizontalAlign', 'tableCellStyle'],\r\n  tableInsertButtons: ['tableBack', '|'],\r\n  tableResizer: true,\r\n  tableDefaultWidth: '100%',\r\n  tableResizerOffset: 5,\r\n  tableResizingLimit: 30,\r\n  tableColorsButtons: ['tableBack', '|'],\r\n  tableColors: [\r\n    '#61BD6D', '#1ABC9C', '#54ACD2', '#2C82C9', '#9365B8', '#475577', '#CCCCCC',\r\n    '#41A85F', '#00A885', '#3D8EB9', '#2969B0', '#553982', '#28324E', '#000000',\r\n    '#F7DA64', '#FBA026', '#EB6B56', '#E25041', '#A38F84', '#EFEFEF', '#FFFFFF',\r\n    '#FAC51C', '#F37934', '#D14841', '#B8312F', '#7C706B', '#D1D5D8', 'REMOVE'\r\n  ],\r\n  tableColorsStep: 7,\r\n  tableCellStyles: {\r\n    'fr-highlighted': 'Highlighted',\r\n    'fr-thick': 'Thick'\r\n  },\r\n  tableStyles: {\r\n    'fr-dashed-borders': 'Dashed Borders',\r\n    'fr-alternate-rows': 'Alternate Rows'\r\n  },\r\n  tableCellMultipleStyles: true,\r\n  tableMultipleStyles: true,\r\n  tableInsertHelper: true,\r\n  tableInsertHelperOffset: 15\r\n})\r\n\r\nFE.PLUGINS.table = function (editor) {\r\n  const { $ } = editor\r\n  let $resizer\r\n  let $insert_helper\r\n  let mouseDownCellFlag\r\n  let mouseDownFlag\r\n  let mouseDownCell\r\n  let mouseMoveTimer\r\n  let resizingFlag\r\n\r\n  /*\r\n   * Show the insert table popup.\r\n   */\r\n  function _showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertTable\"]')\r\n     \r\n    let $popup = editor.popups.get('table.insert')\r\n\r\n    if (!$popup) $popup = _initInsertPopup()\r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n\r\n      // Insert table popup\r\n      editor.popups.refresh('table.insert')\r\n      editor.popups.setContainer('table.insert', editor.$tb)\r\n\r\n      // Insert table left and top position.\r\n      const { left, top } = editor.button.getPosition($btn)\r\n      editor.popups.show('table.insert', left, top, $btn.outerHeight())\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the table edit popup.\r\n   */\r\n  function _showEditPopup() {\r\n    // Set popup position.\r\n    const map = _tableMap()\r\n    if (map) {\r\n      let $popup = editor.popups.get('table.edit')\r\n\r\n      if (!$popup) $popup = _initEditPopup()\r\n\r\n      if ($popup) {\r\n        editor.popups.setContainer('table.edit', editor.$sc)\r\n        const offset = _selectionOffset(map)\r\n        let left = offset.left + (offset.right - offset.left) / 2\r\n        let top = offset.bottom\r\n\r\n        editor.popups.show('table.edit', left, top, offset.bottom - offset.top, true)\r\n\r\n        // Disable toolbar buttons only if there are more than one cells selected.\r\n        if (editor.edit.isDisabled()) {\r\n\r\n          // Disable toolbar.\r\n          if (selectedCells().length > 1) {\r\n            editor.toolbar.disable()\r\n          }\r\n\r\n          // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n\r\n          editor.button.bulkRefresh()\r\n\r\n          // https://github.com/froala/wysiwyg-editor/issues/1851.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/314.\r\n          // https://github.com/froala/wysiwyg-editor/issues/1656.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/294.\r\n\r\n          // Place selection in last selected table cell.\r\n          editor.selection.setAtEnd(editor.$el.find('.fr-selected-cell').last().get(0))\r\n          editor.selection.restore()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the table colors popup.\r\n   */\r\n  function _showColorsPopup() {\r\n\r\n    // Set popup position.\r\n    const map = _tableMap()\r\n\r\n    if (map) {\r\n      let $popup = editor.popups.get('table.colors')\r\n\r\n      if (!$popup) $popup = _initColorsPopup()\r\n\r\n      editor.popups.setContainer('table.colors', editor.$sc)\r\n      const offset = _selectionOffset(map)\r\n      let left = (offset.left + offset.right) / 2\r\n      let top = offset.bottom\r\n\r\n      // Refresh selected color.\r\n      _refreshColor()\r\n\r\n      editor.popups.show('table.colors', left, top, offset.bottom - offset.top, true)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Called on table edit popup hide.\r\n   */\r\n  function _hideEditPopup() {\r\n\r\n    // Enable toolbar.\r\n    if (selectedCells().length === 0) {\r\n      editor.toolbar.enable()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the insert table popup.\r\n   */\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('table.insert', function () {\r\n\r\n        // Clear previous cell selection.\r\n        editor.popups.get('table.insert').find('.fr-table-size .fr-select-table-size > span[data-row=\"1\"][data-col=\"1\"]').trigger('mouseover')\r\n      })\r\n\r\n      return true\r\n    }\r\n\r\n    // Table buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableInsertButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.tableInsertButtons)}</div>`\r\n    }\r\n\r\n    const template = {\r\n      buttons: table_buttons,\r\n      rows_columns: _insertTableHtml()\r\n    }\r\n\r\n    const $popup = editor.popups.create('table.insert', template)\r\n\r\n    // Initialize insert table grid events.\r\n    editor.events.$on($popup, 'mouseover', '.fr-table-size .fr-select-table-size .fr-table-cell', function (e) {\r\n      _hoverCell($(e.currentTarget))\r\n    }, true)\r\n\r\n    _addAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * Hover table cell.\r\n   */\r\n  function _hoverCell($table_cell) {\r\n    let row = $table_cell.data('row')\r\n    if(row !== null) {\r\n      row = parseInt(row)\r\n    }\r\n\r\n    let col = $table_cell.data('col')\r\n    if(col !== null) {\r\n      col = parseInt(col)\r\n    }\r\n    \r\n    const $select_size = $table_cell.parent()\r\n\r\n    // Update size in title.\r\n    $select_size.siblings('.fr-table-size-info').html(`${row} &times; ${col}`)\r\n\r\n    // Remove hover and fr-active-item class from all cells.\r\n    $select_size.find('> span').removeClass('hover fr-active-item')\r\n\r\n    // Add hover class only to the correct cells.\r\n    for (let i = 1; i <= editor.opts.tableInsertMaxSize; i++) {\r\n      for (let j = 0; j <= editor.opts.tableInsertMaxSize; j++) {\r\n        const $cell = $select_size.find(`> span[data-row=\"${i}\"][data-col=\"${j}\"]`)\r\n\r\n        if (i <= row && j <= col) {\r\n          $cell.addClass('hover')\r\n        }\r\n        else if ((i <= row + 1 || (i <= 2 && !editor.helpers.isMobile()))) {\r\n          $cell.css('display', 'inline-block')\r\n        }\r\n        else if (i > 2 && !editor.helpers.isMobile()) {\r\n          $cell.css('display', 'none')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Mark table cell as the active item.\r\n    $table_cell.addClass('fr-active-item')\r\n  }\r\n\r\n  /*\r\n   * The HTML for insert table grid.\r\n   */\r\n  function _insertTableHtml() {\r\n\r\n    // Grid html\r\n    let rows_columns = '<div class=\"fr-table-size\"><div class=\"fr-table-size-info\">1 &times; 1</div><div class=\"fr-select-table-size\">'\r\n\r\n    for (let i = 1; i <= editor.opts.tableInsertMaxSize; i++) {\r\n      for (let j = 1; j <= editor.opts.tableInsertMaxSize; j++) {\r\n        let display = 'inline-block'\r\n\r\n        // Display only first 2 rows.\r\n        if (i > 2 && !editor.helpers.isMobile()) {\r\n          display = 'none'\r\n        }\r\n\r\n        let cls = 'fr-table-cell '\r\n\r\n        if (i == 1 && j == 1) {\r\n          cls += ' hover'\r\n        }\r\n\r\n        rows_columns += `<span class=\"fr-command ${cls}\" tabIndex=\"-1\" data-cmd=\"tableInsert\" data-row=\"${i}\" data-col=\"${j}\" data-param1=\"${i}\" data-param2=\"${j}\" style=\"display: ${display};\" role=\"button\"><span></span><span class=\"fr-sr-only\">${i} &times; ${j}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n      rows_columns += '<div class=\"new-line\"></div>'\r\n    }\r\n\r\n    rows_columns += '</div></div>'\r\n\r\n    return rows_columns\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events.\r\n   */\r\n  function _addAccessibility($popup) {\r\n\r\n    // Hover cell when table.insert cells are focused.\r\n    editor.events.$on($popup, 'focus', '[tabIndex]', function (e) {\r\n      const $focused_el = $(e.currentTarget)\r\n      _hoverCell($focused_el)\r\n    })\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('table.insert') || !$focused_item.is('span, a')) {\r\n        return true\r\n      }\r\n\r\n      const key_code = e.which\r\n      let status\r\n\r\n      if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if ($focused_item.is('span.fr-table-cell')) {\r\n\r\n          // Get all current cells.\r\n          const $cells = $focused_item.parent().find('span.fr-table-cell')\r\n\r\n          // Get focused item position.\r\n          const index = $cells.index($focused_item)\r\n\r\n          // Get cell matrix dimensions.\r\n          const columns = editor.opts.tableInsertMaxSize\r\n\r\n          // Get focused item coordinates.\r\n          let column = index % columns\r\n          let line = Math.floor(index / columns)\r\n\r\n          // Calculate next coordinates. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n          if (FE.KEYCODE.ARROW_UP == key_code) {\r\n            line = Math.max(0, line - 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            line = Math.min(editor.opts.tableInsertMaxSize - 1, line + 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n            column = Math.max(0, column - 1)\r\n          }\r\n          else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n            column = Math.min(editor.opts.tableInsertMaxSize - 1, column + 1)\r\n          }\r\n\r\n          // Get the next element based on the new coordinates.\r\n          const nextIndex = line * columns + column\r\n          const $el = $($cells.get(nextIndex))\r\n\r\n          // Hover cell\r\n          _hoverCell($el)\r\n\r\n          // Focus.\r\n          editor.events.disableBlur()\r\n          $el.focus()\r\n\r\n          status = false\r\n        }\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Init the table edit popup.\r\n   */\r\n  function _initEditPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onHide('table.edit', _hideEditPopup)\r\n\r\n      return true\r\n    }\r\n\r\n    // Table buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableEditButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.tableEditButtons)}</div>`\r\n\r\n      const template = {\r\n        buttons: table_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('table.edit', template)\r\n\r\n      editor.events.$on(editor.$wp, 'scroll.table-edit', function () {\r\n        if (editor.popups.isVisible('table.edit')) {\r\n          _showEditPopup()\r\n        }\r\n      })\r\n\r\n      return $popup\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /*\r\n   * Init the table cell background popup.\r\n   */\r\n  function _initColorsPopup() {\r\n\r\n    // Table colors buttons.\r\n    let table_buttons = ''\r\n\r\n    if (editor.opts.tableColorsButtons.length > 0) {\r\n      table_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.tableColorsButtons)}</div>`\r\n    }\r\n\r\n    // Custom HEX.\r\n    let custom_color = ''\r\n\r\n    if (editor.opts.colorsHEXInput) {\r\n      custom_color = `<div class=\"fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer\" id=\"fr-table-colors-hex-layer-${editor.id}\"><div class=\"fr-input-line\"><input maxlength=\"7\" id=\"fr-table-colors-hex-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('HEX Color')}\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"tableCellBackgroundCustomColor\" tabIndex=\"2\" role=\"button\">${editor.language.translate('OK')}</button></div></div>`\r\n    }\r\n\r\n    const template = {\r\n      buttons: table_buttons,\r\n      colors: _colorsHTML(),\r\n      custom_color: custom_color\r\n    }\r\n\r\n    const $popup = editor.popups.create('table.colors', template)\r\n\r\n    editor.events.$on(editor.$wp, 'scroll.table-colors', function () {\r\n      if (editor.popups.isVisible('table.colors')) {\r\n        _showColorsPopup()\r\n      }\r\n    })\r\n\r\n    _addColorsAccessibility($popup)\r\n\r\n    return $popup\r\n  }\r\n\r\n  /*\r\n   * HTML for the table colors.\r\n   */\r\n  function _colorsHTML() {\r\n\r\n    // Create colors html.\r\n    let colors_html = '<div class=\"fr-color-set fr-table-colors\">'\r\n\r\n    // Add colors.\r\n    for (let i = 0; i < editor.opts.tableColors.length; i++) {\r\n      if (i !== 0 && i % editor.opts.tableColorsStep === 0) {\r\n        colors_html += '<br>'\r\n      }\r\n\r\n      if (editor.opts.tableColors[i] != 'REMOVE') {\r\n        colors_html += `<span class=\"fr-command\" style=\"background: ${editor.opts.tableColors[i]};\" tabIndex=\"-1\" role=\"button\" data-cmd=\"tableCellBackgroundColor\" data-param1=\"${editor.opts.tableColors[i]}\"><span class=\"fr-sr-only\">${editor.language.translate('Color')} ${editor.opts.tableColors[i]}&nbsp;&nbsp;&nbsp;</span></span>`\r\n      }\r\n\r\n      else {\r\n        colors_html += `<span class=\"fr-command\" data-cmd=\"tableCellBackgroundColor\" tabIndex=\"-1\" role=\"button\" data-param1=\"REMOVE\" title=\"${editor.language.translate('Clear Formatting')}\">${editor.icon.create('tableColorRemove')}<span class=\"fr-sr-only\">${editor.language.translate('Clear Formatting')}</span></span>`\r\n      }\r\n    }\r\n\r\n    colors_html += '</div>'\r\n\r\n    return colors_html\r\n  }\r\n\r\n  /*\r\n   * Set custom color\r\n   */\r\n  function customColor() {\r\n    const $popup = editor.popups.get('table.colors')\r\n    const $input = $popup.find('.fr-table-colors-hex-layer input')\r\n\r\n    if ($input.length) {\r\n      setBackground($input.val())\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Register keyboard events for colors.\r\n   */\r\n  function _addColorsAccessibility($popup) {\r\n\r\n    // Register popup event.\r\n    editor.events.on('popup.tab', function (e) {\r\n      const $focused_item = $(e.currentTarget)\r\n\r\n      // Skip if popup is not visible or focus is elsewere.\r\n      if (!editor.popups.isVisible('table.colors') || !$focused_item.is('span')) {\r\n        return true\r\n      }\r\n      const key_code = e.which\r\n      let status = true\r\n\r\n      // Tabbing.\r\n      if (FE.KEYCODE.TAB == key_code) {\r\n        const $tb = $popup.find('.fr-buttons')\r\n\r\n        // Focus back the popup's toolbar if exists.\r\n        status = !editor.accessibility.focusToolbar($tb, (e.shiftKey ? true : false))\r\n      }\r\n\r\n      // Arrows.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code || FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n\r\n        // Get all current colors.\r\n        const $colors = $focused_item.parent().find('span.fr-command')\r\n\r\n        // Get focused item position.\r\n        const index = $colors.index($focused_item)\r\n\r\n        // Get color matrix dimensions.\r\n        const columns = editor.opts.colorsStep\r\n        const lines = Math.floor($colors.length / columns)\r\n\r\n        // Get focused item coordinates.\r\n        const column = index % columns\r\n        const line = Math.floor(index / columns)\r\n\r\n        let nextIndex = line * columns + column\r\n        const dimension = lines * columns\r\n\r\n        // Calculate next index. Go to the other opposite site of the matrix if there is no next adjacent element.\r\n        // Up/Down: Traverse matrix lines.\r\n        // Left/Right: Traverse the matrix as it is a vector.\r\n        if (FE.KEYCODE.ARROW_UP == key_code) {\r\n          nextIndex = (((nextIndex - columns) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n        }\r\n        else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n          nextIndex = (nextIndex + columns) % dimension\r\n        }\r\n        else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n          nextIndex = (((nextIndex - 1) % dimension) + dimension) % dimension // Javascript negative modulo bug.\r\n        }\r\n        else if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n          nextIndex = (nextIndex + 1) % dimension\r\n        }\r\n\r\n        // Get the next element based on the new index.\r\n        const $el = $($colors.get(nextIndex))\r\n\r\n        // Focus.\r\n        editor.events.disableBlur()\r\n        $el.focus()\r\n\r\n        status = false\r\n      }\r\n\r\n      // ENTER or SPACE.\r\n      else if (FE.KEYCODE.ENTER == key_code) {\r\n\r\n        editor.button.exec($focused_item)\r\n        status = false\r\n      }\r\n\r\n      // Prevent propagation.\r\n      if (status === false) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      return status\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Show the current selected color.\r\n   */\r\n  function _refreshColor() {\r\n    const $popup = editor.popups.get('table.colors')\r\n    const $cell = editor.$el.find('.fr-selected-cell').first()\r\n    const color = editor.helpers.RGBToHex($cell.css('background-color'))\r\n    const $input = $popup.find('.fr-table-colors-hex-layer input')\r\n\r\n    // Remove current color selection.\r\n    $popup.find('.fr-selected-color').removeClass('fr-selected-color fr-active-item')\r\n\r\n    // Find the selected color.\r\n    $popup.find(`span[data-param1=\"${color}\"]`).addClass('fr-selected-color fr-active-item')\r\n    $input.val(color).trigger('change')\r\n  }\r\n\r\n  /*\r\n   * Insert table method.\r\n   */\r\n  function insert(rows, cols) {\r\n\r\n    // Create table HTML.\r\n    let table = '<table ' + (!editor.opts.tableDefaultWidth ? '' : 'style=\"width: ' + editor.opts.tableDefaultWidth + ';\" ') + 'class=\"fr-inserted-table\"><tbody>'\r\n    const cell_width = 100 / cols\r\n    let i\r\n    let j\r\n\r\n    for (i = 0; i < rows; i++) {\r\n      table += '<tr>'\r\n\r\n      for (j = 0; j < cols; j++) {\r\n        table += '<td' + (!editor.opts.tableDefaultWidth ? '' : ' style=\"width: ' + cell_width.toFixed(4) + '%;\"') + '>'\r\n\r\n        if (i === 0 && j === 0) table += FE.MARKERS\r\n        table += '<br></td>'\r\n      }\r\n      table += '</tr>'\r\n    }\r\n    table += '</tbody></table>'\r\n\r\n    editor.html.insert(table)\r\n\r\n    // Update cursor position.\r\n    editor.selection.restore()\r\n\r\n    const $table = editor.$el.find('.fr-inserted-table')\r\n    $table.removeClass('fr-inserted-table')\r\n    editor.events.trigger('table.inserted', [$table.get(0)])\r\n  }\r\n\r\n  /*\r\n   * Delete table method.\r\n   */\r\n  function remove() {\r\n    if (selectedCells().length > 0) {\r\n      const $current_table = selectedTable()\r\n\r\n      // Update cursor position.\r\n      editor.selection.setBefore($current_table.get(0)) || editor.selection.setAfter($current_table.get(0))\r\n      editor.selection.restore()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n\r\n      // Delete table.\r\n      $current_table.remove()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Add table header.\r\n   */\r\n  function addHeader() {\r\n    const $table = selectedTable()\r\n\r\n    // If there is a selection in the table and the table doesn't have a header already.\r\n    if ($table.length > 0 && $table.find('th').length === 0) {\r\n\r\n      // Create header HTML.\r\n      let thead = '<thead><tr>'\r\n\r\n      let i\r\n      let col = 0\r\n\r\n      // Get first row and count table columns.\r\n      $table.find('tr').first().find('> td').each(function () {\r\n        const $td = $(this)\r\n\r\n        col += parseInt($td.attr('colspan'), 10) || 1\r\n      })\r\n\r\n      // Add cells.\r\n      for (i = 0; i < col; i++) {\r\n        thead += '<th><br></th>'\r\n      }\r\n\r\n      thead += '</tr></thead>'\r\n\r\n      $table.prepend(thead)\r\n\r\n      // Reposition table edit popup.\r\n      _showEditPopup()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove table header.\r\n   */\r\n  function removeHeader() {\r\n    const $current_table = selectedTable()\r\n    const $table_header = $current_table.find('thead')\r\n\r\n    // Table has a header.\r\n    if ($table_header.length > 0) {\r\n\r\n      // If table does not have any other rows then delete table.\r\n      if ($current_table.find('tbody tr').length === 0) {\r\n\r\n        // Remove table.\r\n        remove()\r\n      }\r\n\r\n      else {\r\n        $table_header.remove()\r\n\r\n        // Reposition table edit popup if there any more selected celss.\r\n        if (selectedCells().length > 0) {\r\n          _showEditPopup()\r\n        }\r\n        else {\r\n\r\n          // Hide popup.\r\n          editor.popups.hide('table.edit')\r\n\r\n          // Update cursor position.\r\n          //const td = $current_table.find('tbody tr:first td:first').get(0)\r\n          const td = $current_table.find('tbody tr').first().find('td').first().get(0)\r\n\r\n          if (td) {\r\n            editor.selection.setAtEnd(td)\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Insert row method.\r\n   */\r\n  function insertRow(position) {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n\r\n      // Cannot insert row above the table header.\r\n      if (editor.$el.find('th.fr-selected-cell').length > 0 && position == 'above') {\r\n        return\r\n      }\r\n\r\n      else {\r\n        let i\r\n        let ref_row\r\n        let $ref_row\r\n\r\n        // Create a table map.\r\n        const map = _tableMap()\r\n\r\n        // Get selected cells from the table.\r\n        const selection = _currentSelection(map)\r\n\r\n        // Return if no selected cell\r\n        if(selection == null) {\r\n          return\r\n        }\r\n\r\n        // Reference row.\r\n        if (position == 'above') {\r\n          ref_row = selection.min_i\r\n        }\r\n        else {\r\n          ref_row = selection.max_i\r\n        }\r\n\r\n        // Create row HTML.\r\n        let tr = '<tr>'\r\n\r\n        // Add cells.\r\n        for (i = 0; i < map[ref_row].length; i++) {\r\n\r\n          // If cell has rowspan we should increase it.\r\n          if ((position == 'below' && ref_row < map.length - 1 && map[ref_row][i] == map[ref_row + 1][i]) ||\r\n            (position == 'above' && ref_row > 0 && map[ref_row][i] == map[ref_row - 1][i])) {\r\n\r\n            // Don't increase twice for colspan.\r\n            if (i === 0 || (i > 0 && map[ref_row][i] != map[ref_row][i - 1])) {\r\n              const $cell = $(map[ref_row][i])\r\n              $cell.attr('rowspan', parseInt($cell.attr('rowspan'), 10) + 1)\r\n            }\r\n\r\n          }\r\n          else {\r\n            let $refCell = $(map[ref_row][i])\r\n            tr += '<td style=\"' + $refCell.attr('style') + '\" ><br></td>'\r\n          }\r\n        }\r\n\r\n        // Close row tag.\r\n        tr += '</tr>'\r\n\r\n        // Current selection is in header. Should insert in table body\r\n        if (editor.$el.find('th.fr-selected-cell').length > 0 && position == 'below') {\r\n          $ref_row = $($table.find('tbody').not($table.find('> table tbody')))\r\n        }\r\n\r\n        // Selection is in body\r\n        else {\r\n          $ref_row = $($table.find('tr').not($table.find('> table tr')).get(ref_row));\r\n        }\r\n\r\n        // Insert new row.\r\n        if (position == 'below') {\r\n          if ($ref_row.attr('tagName') == 'TBODY') {\r\n            $ref_row.prepend(tr)\r\n          }\r\n          else {\r\n            if ($ref_row[0].parentNode) {\r\n              $ref_row[0].insertAdjacentHTML('afterend', tr)\r\n            }\r\n          }\r\n        }\r\n        else if (position == 'above') {\r\n          $ref_row.before(tr)\r\n\r\n          // Reposition table edit popup.\r\n          if (editor.popups.isVisible('table.edit')) {\r\n            _showEditPopup()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Delete row method.\r\n   */\r\n  function deleteRow() {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n      let i\r\n      let j\r\n      let $row\r\n\r\n      // Create a table map.\r\n      let map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected cell\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      // If all the rows are selected then delete the entire table.\r\n      if (selection.min_i === 0 && selection.max_i == map.length - 1) {\r\n        remove()\r\n\r\n      }\r\n      else {\r\n\r\n        // We should delete selected rows.\r\n        for (i = selection.max_i; i >= selection.min_i; i--) {\r\n          // $row = $($table.find('tr').not($table.find('table tr')).get(i))\r\n          // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n          // therefore trying diff way to fetch the table's own rows\r\n          $row = $($table.find('tr').not($table.find('> table tr')).get(i));\r\n\r\n          // Go through the table map to check for rowspan on the row to delete.\r\n          for (j = 0; j < map[i].length; j++) {\r\n\r\n            // Don't do this twice if we have a colspan.\r\n            if (j === 0 || map[i][j] != map[i][j - 1]) {\r\n              const $cell = $(map[i][j])\r\n\r\n              // We should decrease rowspan.\r\n              if (parseInt($cell.attr('rowspan'), 10) > 1) {\r\n                const rowspan = parseInt($cell.attr('rowspan'), 10) - 1\r\n\r\n                if (rowspan == 1) {\r\n                  $cell.removeAttr('rowspan')\r\n                }\r\n                else {\r\n                  $cell.attr('rowspan', rowspan)\r\n                }\r\n              }\r\n\r\n              // We might need to move tds on the row below if we have a rowspan that starts here.\r\n              if (i < map.length - 1 && map[i][j] == map[i + 1][j] && (i === 0 || map[i][j] != map[i - 1][j])) {\r\n\r\n                // Move td to the row below.\r\n                const td = map[i][j]\r\n                let col = j\r\n\r\n                // Go back until we get the last element (we might have colspan).\r\n                while (col > 0 && map[i][col] == map[i][col - 1]) {\r\n                  col--\r\n                }\r\n\r\n                // Add td at the beginning of the row below.\r\n                if (col === 0) {\r\n                  // $($table.find('tr').not($table.find('table tr')).get(i + 1)).prepend(td)\r\n                  // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n                  // therefore trying diff way to fetch the table's own rows\r\n                  $($table.find('tr').not($table.find('> table tr')).get(i + 1)).prepend(td);\r\n\r\n                }\r\n                else {\r\n                  if($(map[i+1][col-1])[0].parentNode) {\r\n                    $(map[i+1][col-1])[0].insertAdjacentElement('afterend', td)\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          // Remove tbody or thead if there are no more rows.\r\n          const $row_parent = $row.parent()\r\n          $row.remove()\r\n\r\n          if ($row_parent.find('tr').length === 0) {\r\n            $row_parent.remove()\r\n          }\r\n\r\n          // Table has changed.\r\n          map = _tableMap($table)\r\n        }\r\n\r\n        _updateCellSpan(0, map.length - 1, 0, map[0].length - 1, $table)\r\n\r\n        // Update cursor position\r\n        if (selection.min_i > 0) {\r\n\r\n          // Place cursor in the row above selection.\r\n          editor.selection.setAtEnd(map[selection.min_i - 1][0])\r\n        }\r\n        else {\r\n\r\n          // Place cursor in the row below selection.\r\n          editor.selection.setAtEnd(map[0][0])\r\n        }\r\n        editor.selection.restore()\r\n\r\n        // Hide table edit popup.\r\n        editor.popups.hide('table.edit')\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Insert column method.\r\n   */\r\n  function insertColumn(position) {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Reference row.\r\n      let ref_col\r\n\r\n      if (position == 'before') {\r\n        ref_col = selection.min_j\r\n      }\r\n      else {\r\n        ref_col = selection.max_j\r\n      }\r\n\r\n      // Old and new column widths.\r\n      const old_width = 100 / map[0].length\r\n      const new_width = 100 / (map[0].length + 1)\r\n\r\n      // Go through all cells and get their initial (old) widths.\r\n      let $cell\r\n\r\n      $table.find('th, td').each(function () {\r\n        $cell = $(this)\r\n        $cell.data('old-width', $cell.outerWidth() / $table.outerWidth() * 100)\r\n      })\r\n\r\n      // Parse each row to insert a new td.\r\n      $table.find('tr').not($table.find('> table tr')).each(function (index) {\r\n        // Get the exact td index before / after which we have to add the new td.\r\n        // ref_col means the table column number, but this is not the same with the td number in a row.\r\n        // We might have colspan or rowspan greater than 1.\r\n        const $row = $(this)\r\n        let col_no = 0\r\n        let td_no = 0\r\n        let ref_td\r\n\r\n        // Start with the first td (td_no = 0) in the current row.\r\n        // Sum colspans (col_no) to see when we reach ref_col.\r\n        // Summing colspans we get the same number with the table column number.\r\n        while (col_no - 1 < ref_col) {\r\n\r\n          // Get current td.\r\n          ref_td = $row.find('> th, > td').get(td_no)\r\n\r\n          // There are no more tds in this row.\r\n          if (!ref_td) {\r\n            ref_td = null\r\n            break\r\n          }\r\n\r\n          // The current td is the same with the td from the table map.\r\n          if (ref_td == map[index][col_no]) {\r\n\r\n            // The current td might have colspan.\r\n            col_no += parseInt($(ref_td).attr('colspan'), 10) || 1\r\n\r\n            // Go to the next td on the current row.\r\n            td_no++\r\n          }\r\n\r\n          // If current td is not the same with the td from the table map.\r\n          // This means that this table cell (map[index][td_no]) has rowspan.\r\n          // There is at least one td less on this row due to rowspan (based on map[index][td_no] colspan value).\r\n          // We want to count this as a column as well.\r\n          else {\r\n            col_no += parseInt($(map[index][col_no]).attr('colspan'), 10) || 1\r\n\r\n            // ref_td is one td ahead. Get previous td if we want to insert column after.\r\n            if (position == 'after') {\r\n\r\n              // There is a rowspan and so ref_td is the first td, but it is not in the first column.\r\n              if (td_no === 0) {\r\n                ref_td = -1\r\n\r\n              }\r\n              else {\r\n                ref_td = $row.find('> th, > td').get(td_no - 1)\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        const $ref_td = $(ref_td)\r\n\r\n        // If the computed column number is higher than the reference number\r\n        // then on this row we have a colspan longer than the reference column.\r\n        // When adding a column after we should increase colspan on this row.\r\n        //\r\n        // If we want to add a column before, but the td on the reference column is\r\n        // the same with the previous one then we have a td with colspan that\r\n        // starts before the column reference number.\r\n        // When adding a column before we should increase colspan on this row.\r\n        if ((position == 'after' && col_no - 1 > ref_col) ||\r\n          (position == 'before' && ref_col > 0 && map[index][ref_col] == map[index][ref_col - 1])) {\r\n\r\n          // Don't increase twice for rowspan.\r\n          if (index === 0 || (index > 0 && map[index][ref_col] != map[index - 1][ref_col])) {\r\n            const colspan = parseInt($ref_td.attr('colspan'), 10) + 1\r\n\r\n            $ref_td.attr('colspan', colspan)\r\n\r\n            // Update this cell's width.\r\n            $ref_td.css('width', ($ref_td.data('old-width') * new_width / old_width + new_width).toFixed(4) + '%')\r\n            $ref_td.removeData('old-width')\r\n          }\r\n\r\n        }\r\n\r\n        else {\r\n\r\n          // Create HTML for a new cell.\r\n          let td\r\n\r\n          // Might be a td or a th.\r\n          if ($row.find('th').length > 0) {\r\n            td = `<th style=\"width: ${new_width.toFixed(4)}%;\"><br></th>`\r\n          }\r\n          else {\r\n            td = `<td style=\"width: ${new_width.toFixed(4)}%;\"><br></td>`\r\n          }\r\n\r\n          // Insert exactly at the beginning.\r\n          if (ref_td == -1) {\r\n            $row.prepend(td)\r\n\r\n            // Insert exactly at the end.\r\n          }\r\n          else if (ref_td == null) {\r\n            $row.append(td)\r\n\r\n            // Insert td on the current row.\r\n          }\r\n          else {\r\n            if (position == 'before') {\r\n              $ref_td.before(td)\r\n            }\r\n\r\n            else if (position == 'after') {\r\n              if($ref_td[0].parentNode) {\r\n                $ref_td[0].insertAdjacentHTML('afterend', td)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n      // Parse each row to update cells' width.\r\n      $table.find('th, td').each(function () {\r\n        $cell = $(this)\r\n\r\n        // Update width and remove data.\r\n        if ($cell.data('old-width')) {\r\n          $cell.css('width', ($cell.data('old-width') * new_width / old_width).toFixed(4) + '%')\r\n          $cell.removeData('old-width')\r\n        }\r\n      })\r\n\r\n      // Reposition table edit popup.\r\n      if (editor.popups.isVisible('table.edit')) {\r\n        _showEditPopup()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Delete column method.\r\n   */\r\n  function deleteColumn() {\r\n    const $table = selectedTable()\r\n\r\n    // We have selection in a table.\r\n    if ($table.length > 0) {\r\n      let i\r\n      let j\r\n      let $cell\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells from the table.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected column\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      // If all the rows are selected then delete the entire table.\r\n      if (selection.min_j === 0 && selection.max_j == map[0].length - 1) {\r\n        remove()\r\n      }\r\n      else {\r\n        // Old width of all the columns that remain afte the delete.\r\n        let old_width = 0\r\n\r\n        // Go through all cells and get their initial (old) widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          for (j = 0; j < map[0].length; j++) {\r\n            $cell = $(map[i][j])\r\n\r\n            if (!$cell.hasClass('fr-selected-cell')) {\r\n              $cell.data('old-width', $cell.outerWidth() / $table.outerWidth() * 100)\r\n\r\n              if (j < selection.min_j || j > selection.max_j) {\r\n                old_width += $cell.outerWidth() / $table.outerWidth() * 100\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        old_width /= map.length\r\n\r\n        // We should delete selected columns.\r\n        for (j = selection.max_j; j >= selection.min_j; j--) {\r\n\r\n          // Go through the table map to check for colspan.\r\n          for (i = 0; i < map.length; i++) {\r\n\r\n            // Don't do this twice if we have a rowspan.\r\n            if (i === 0 || map[i][j] != map[i - 1][j]) {\r\n\r\n              // We should decrease colspan.\r\n              $cell = $(map[i][j])\r\n\r\n              if ((parseInt($cell.attr('colspan'), 10) || 1) > 1) {\r\n                const colspan = parseInt($cell.attr('colspan'), 10) - 1\r\n\r\n                if (colspan == 1) {\r\n                  $cell.removeAttr('colspan')\r\n                }\r\n                else {\r\n                  $cell.attr('colspan', colspan)\r\n                }\r\n\r\n                // Update cell width.\r\n                $cell.css('width', (($cell.data('old-width') - _columnWidth(j, map)) * 100 / old_width).toFixed(4) + '%')\r\n                $cell.removeData('old-width')\r\n\r\n                // If there is no colspan delete the cell.\r\n              }\r\n              else {\r\n\r\n                // We might need to delete the row too if it is empty.\r\n                const $row = $($cell.parent().get(0))\r\n\r\n                $cell.remove()\r\n\r\n                // Check if there are any more tds in the current row.\r\n                if ($row.find('> th, > td').length === 0) {\r\n\r\n                  // Check if it is okay to delete the tr.\r\n                  if ($row.prev().length === 0 || $row.next().length === 0 ||\r\n                    $row.prev().find('> th[rowspan], > td[rowspan]').length < $row.prev().find('> th, > td').length) {\r\n                    $row.remove()\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        _updateCellSpan(0, map.length - 1, 0, map[0].length - 1, $table)\r\n\r\n        // Update cursor position\r\n        if (selection.min_j > 0) {\r\n          // Place cursor in the column before selection.\r\n          editor.selection.setAtEnd(map[selection.min_i][selection.min_j - 1])\r\n        }\r\n        else {\r\n          // Place cursor in the column after selection.\r\n          editor.selection.setAtEnd(map[selection.min_i][0])\r\n        }\r\n        editor.selection.restore()\r\n\r\n        // Hide table edit popup.\r\n        editor.popups.hide('table.edit')\r\n\r\n        // Scale current cells' width after column has been deleted.\r\n        $table.find('th, td').each(function () {\r\n          $cell = $(this)\r\n\r\n          // Update width and remove data.\r\n          if ($cell.data('old-width')) {\r\n            $cell.css('width', ($cell.data('old-width') * 100 / old_width).toFixed(4) + '%')\r\n            $cell.removeData('old-width')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove colspan attribute.\r\n   */\r\n  function _updateColspan(min_j, max_j, $table) {\r\n    let i\r\n    let j\r\n    let k\r\n    let first_span\r\n    let span\r\n    let decrease = 0\r\n\r\n    // Create a table map.\r\n    const map = _tableMap($table)\r\n\r\n    // A column might have been deleted.\r\n    max_j = Math.min(max_j, map[0].length - 1)\r\n\r\n    // If max_j and min_j are the same, then only one column is selected and colspan is preserved.\r\n    if (max_j > min_j) {\r\n      // Find out how much we should decrease colspan.\r\n      // Parsing only the first row is enough.\r\n      for (j = min_j; j <= max_j; j++) {\r\n\r\n        // This cell has colspan and has already been checked.\r\n        if (j > min_j && map[0][j] == map[0][j - 1]) {\r\n          continue\r\n        }\r\n\r\n        // Current cell colspan\r\n        first_span = Math.min(parseInt(map[0][j].getAttribute('colspan'), 10) || 1, max_j - min_j + 1)\r\n\r\n        // Cell has colspan between min_j and max_j.\r\n        /* j + 1 will never exceed the number of columns in a table.\r\n         * A colspan is detected before the last column and all next cells on that row are skipped.\r\n         */\r\n        if (first_span > 1 && map[0][j] == map[0][j + 1]) {\r\n\r\n          // The value we should decrease colspan with.\r\n          decrease = first_span - 1\r\n\r\n          // Check all columns on the current row.\r\n          // We found a colspan on the first row (i = 0), continue with second row (i = 1).\r\n          for (i = 1; i < map.length; i++) {\r\n\r\n            // This cell has rowspan and has already been checked.\r\n            if (map[i][j] == map[i - 1][j]) {\r\n              continue\r\n            }\r\n\r\n            // Look for a colspan on the same columns.\r\n            for (k = j; k < j + first_span; k++) {\r\n              span = parseInt(map[i][k].getAttribute('colspan'), 10) || 1\r\n\r\n              // There are other cells with colspan on this column.\r\n              /* k + 1 will never exceed the number of columns in a table.\r\n               * A colspan is detected before the last column and all next cells on that row are skipped.\r\n               */\r\n              if (span > 1 && map[i][k] == map[i][k + 1]) {\r\n                decrease = Math.min(decrease, span - 1)\r\n\r\n                // Skip colspan.\r\n                k += decrease\r\n              }\r\n              else {\r\n                decrease = Math.max(0, decrease - 1)\r\n\r\n                // Stop if decrease reaches 0.\r\n                if (!decrease) {\r\n                  break\r\n                }\r\n              }\r\n            }\r\n\r\n            // Stop looking on the next columns if decrease reaches 0.\r\n            if (!decrease) {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update colspan attribute.\r\n    if (decrease) {\r\n      _decreaseCellSpan(map, decrease, 'colspan', 0, map.length - 1, min_j, max_j)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove rowspan attribute.\r\n   */\r\n  function _updateRowspan(min_i, max_i, $table) {\r\n    let i\r\n    let j\r\n    let k\r\n    let first_span\r\n    let span\r\n    let decrease = 0\r\n\r\n    // Create a table map.\r\n    const map = _tableMap($table)\r\n\r\n    // A row might have been deleted.\r\n    max_i = Math.min(max_i, map.length - 1)\r\n\r\n    // If max_i and min_i are the same, then only one row is selected and rowspan is preserved.\r\n    if (max_i > min_i) {\r\n      // Find out how much we should decrease rowspan.\r\n      // Parsing only the first column is enough.\r\n      for (i = min_i; i <= max_i; i++) {\r\n\r\n        // This cell has rowspan and has already been checked.\r\n        if (i > min_i && map[i][0] == map[i - 1][0]) {\r\n          continue\r\n        }\r\n\r\n        // Current cell rowspan\r\n        first_span = Math.min(parseInt(map[i][0].getAttribute('rowspan'), 10) || 1, max_i - min_i + 1)\r\n\r\n        // Cell has rowspan between min_i and max_i.\r\n        /* i + 1 will never exceed the number of rows in a table.\r\n         * A rowspan is detected before the last row and all next cells on that column are skipped.\r\n         */\r\n        if (first_span > 1 && map[i][0] == map[i + 1][0]) {\r\n\r\n          // The value we should decrease rowspan with.\r\n          decrease = first_span - 1\r\n\r\n          // Check all columns on the current row.\r\n          // We found a rowspan on the first column (j = 0), continue with second column (j = 1).\r\n          for (j = 1; j < map[0].length; j++) {\r\n\r\n            // This cell has colspan and has already been checked.\r\n            if (map[i][j] == map[i][j - 1]) {\r\n              continue\r\n            }\r\n\r\n            // Look for a rowspan on the same rows.\r\n            for (k = i; k < i + first_span; k++) {\r\n              span = parseInt(map[k][j].getAttribute('rowspan'), 10) || 1\r\n\r\n              // There are other cells with rowspan on this row.\r\n              /* k + 1 will never exceed the number of rows in a table.\r\n               * A rowspan is detected before the last row and all next cells on that column are skipped.\r\n               */\r\n              if (span > 1 && map[k][j] == map[k + 1][j]) {\r\n                decrease = Math.min(decrease, span - 1)\r\n\r\n                // Skip rowspan.\r\n                k += decrease\r\n              }\r\n              else {\r\n                decrease = Math.max(0, decrease - 1)\r\n\r\n                // Stop if decrease reaches 0.\r\n                if (!decrease) {\r\n                  break\r\n                }\r\n              }\r\n            }\r\n\r\n            // Stop looking on the next columns if decrease reaches 0.\r\n            if (!decrease) {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update rowspan attribute.\r\n    if (decrease) {\r\n      _decreaseCellSpan(map, decrease, 'rowspan', min_i, max_i, 0, map[0].length - 1)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Decrease the colspan or rowspan with the amount specified.\r\n   */\r\n  function _decreaseCellSpan(map, decrease, span_type, min_i, max_i, min_j, max_j) {\r\n\r\n    // Update span attribute.\r\n    let i\r\n    let j\r\n    let span\r\n\r\n    // Go only through lines and columns that need to be updated.\r\n    for (i = min_i; i <= max_i; i++) {\r\n      for (j = min_j; j <= max_j; j++) {\r\n\r\n        // This cell has rowspan or colspan and has already been checked.\r\n        if ((i > min_i && map[i][j] == map[i - 1][j]) || (j > min_j && map[i][j] == map[i][j - 1])) {\r\n          continue\r\n        }\r\n\r\n        span = parseInt(map[i][j].getAttribute(span_type), 10) || 1\r\n\r\n        // Update cell span.\r\n        if (span > 1) {\r\n          if (span - decrease > 1) map[i][j].setAttribute(span_type, span - decrease)\r\n          else map[i][j].removeAttribute(span_type)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Update or remove colspan and rowspan attributes.\r\n   */\r\n  function _updateCellSpan(min_i, max_i, min_j, max_j, $table) {\r\n    _updateRowspan(min_i, max_i, $table)\r\n    _updateColspan(min_j, max_j, $table)\r\n  }\r\n\r\n  /*\r\n   * Merge selected cells method.\r\n   */\r\n  function mergeCells() {\r\n\r\n    // We have more than one cell selected in a table. Cannot merge td and th.\r\n    if (selectedCells().length > 1 && (editor.$el.find('th.fr-selected-cell').length === 0 || editor.$el.find('td.fr-selected-cell').length === 0)) {\r\n\r\n      _removeKeyboardSelectionHandlers()\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get selected cells.\r\n      const selection = _currentSelection(map)\r\n\r\n      // Return if no selected cells\r\n      if(selection == null) {\r\n        return\r\n      }\r\n\r\n      let i\r\n      let $cell\r\n      const cells = editor.$el.find('.fr-selected-cell')\r\n      const $first_cell = $(cells[0])\r\n      const $first_row = $first_cell.parent()\r\n      const first_row_cells = $first_row.find('.fr-selected-cell')\r\n      const $current_table = $first_cell.closest('table')\r\n      let content = $first_cell.html()\r\n      let width = 0\r\n\r\n      // Update cell width.\r\n      for (i = 0; i < first_row_cells.length; i++) {\r\n        width += $(first_row_cells[i]).outerWidth()\r\n      }\r\n\r\n      // Width might exceed 100% due to cell borders.\r\n      $first_cell.css('width', Math.min(100, (width / $current_table.outerWidth() * 100)).toFixed(4) + '%')\r\n\r\n      // Set the colspan for the merged cells.\r\n      if (selection.min_j < selection.max_j) {\r\n        $first_cell.attr('colspan', selection.max_j - selection.min_j + 1)\r\n      }\r\n\r\n      // Set the rowspan for the merged cells.\r\n      if (selection.min_i < selection.max_i) {\r\n        $first_cell.attr('rowspan', selection.max_i - selection.min_i + 1)\r\n      }\r\n\r\n      // Go through all selected cells to merge their content.\r\n      for (i = 1; i < cells.length; i++) {\r\n        $cell = $(cells[i])\r\n\r\n        // If cell is empty, don't add only <br> tags.\r\n        if ($cell.html() != '<br>' && $cell.html() !== '') {\r\n          content += `<br>${$cell.html()}`\r\n        }\r\n\r\n        // Remove cell.\r\n        $cell.remove()\r\n      }\r\n\r\n      // Set the HTML content.\r\n      $first_cell.html(content)\r\n      editor.selection.setAtEnd($first_cell.get(0))\r\n      editor.selection.restore()\r\n\r\n      // Enable toolbar.\r\n      editor.toolbar.enable()\r\n\r\n      // Update rowspan before removing empty rows (otherwise table map is not correct).\r\n      _updateRowspan(selection.min_i, selection.max_i, $current_table)\r\n\r\n      // Merge is done, check if we have empty trs to clean.\r\n      const empty_trs = $current_table.find('tr:empty')\r\n\r\n      for (i = empty_trs.length - 1; i >= 0; i--) {\r\n        $(empty_trs[i]).remove()\r\n      }\r\n\r\n      // Update colspan after removing empty rows and updating rowspan.\r\n      _updateColspan(selection.min_j, selection.max_j, $current_table)\r\n\r\n      // Reposition table edit popup.\r\n      _showEditPopup()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Split cell horizontally method.\r\n   */\r\n  function splitCellHorizontally() {\r\n\r\n    // We have only one cell selected in a table.\r\n    if (selectedCells().length == 1) {\r\n      const $selected_cell = editor.$el.find('.fr-selected-cell')\r\n      const $current_row = $selected_cell.parent()\r\n      const $current_table = $selected_cell.closest('table')\r\n      const current_rowspan = parseInt($selected_cell.attr('rowspan'), 10)\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n      const cell_origin = _cellOrigin($selected_cell.get(0), map)\r\n\r\n      // Create new td.\r\n      const $new_td = $selected_cell.clone().html('<br>')\r\n\r\n      // Cell has rowspan.\r\n      if (current_rowspan > 1) {\r\n\r\n        // Split current cell's rowspan.\r\n        const new_rowspan = Math.ceil(current_rowspan / 2)\r\n\r\n        if (new_rowspan > 1) {\r\n          $selected_cell.attr('rowspan', new_rowspan)\r\n        }\r\n        else {\r\n          $selected_cell.removeAttr('rowspan')\r\n        }\r\n\r\n        // Update new td's rowspan.\r\n        if (current_rowspan - new_rowspan > 1) {\r\n          $new_td.attr('rowspan', current_rowspan - new_rowspan)\r\n        }\r\n        else {\r\n          $new_td.removeAttr('rowspan')\r\n        }\r\n\r\n        // Find where we should insert the new td.\r\n        const row = cell_origin.row + new_rowspan\r\n        let col = cell_origin.col === 0 ? cell_origin.col : cell_origin.col - 1\r\n\r\n        // Go back until we find a td on this row. We might have colspans and rowspans.\r\n        while (col >= 0 && (map[row][col] == map[row][col - 1] || (row > 0 && map[row][col] == map[row - 1][col]))) {\r\n          col--\r\n        }\r\n\r\n        if (col == -1) {\r\n\r\n          // We couldn't find a previous td on this row. Prepend the new td.\r\n          // $($current_table.find('tr').not($current_table.find('table tr')).get(row)).prepend($new_td)\r\n          // querySelectorAll is returning incorrect result for $table.find('table tr'), it should only return any nested table tr but it is return own tr's as well. \r\n          // therefore trying diff way to fetch the table's own rows\r\n          $($current_table.find('tr').not($current_table.find('> table tr')).get(row)).prepend($new_td);\r\n\r\n\r\n        }\r\n        else {\r\n          if($(map[row][col])[0].parentNode) {\r\n            $(map[row][col])[0].insertAdjacentElement('afterend', $new_td[0])\r\n          }\r\n        }\r\n\r\n      }\r\n      else {\r\n\r\n        // Add new row bellow with only one cell.\r\n        const $row = $(document.createElement('tr')).append($new_td)\r\n        let i\r\n\r\n        // Increase rowspan for all cells on the current row.\r\n        for (i = 0; i < map[0].length; i++) {\r\n\r\n          // Don't do this twice if we have a colspan.\r\n          if (i === 0 || map[cell_origin.row][i] != map[cell_origin.row][i - 1]) {\r\n            const $cell = $(map[cell_origin.row][i])\r\n\r\n            if (!$cell.is($selected_cell)) {\r\n              $cell.attr('rowspan', (parseInt($cell.attr('rowspan'), 10) || 1) + 1)\r\n            }\r\n          }\r\n        }\r\n\r\n        if($current_row[0].parentNode) {\r\n          $current_row[0].insertAdjacentElement('afterend', $row[0])\r\n        }\r\n      }\r\n\r\n      // Remove selection\r\n      _removeSelection()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Split cell vertically method.\r\n   */\r\n  function splitCellVertically() {\r\n\r\n    // We have only one cell selected in a table.\r\n    if (selectedCells().length == 1) {\r\n      const $selected_cell = editor.$el.find('.fr-selected-cell')\r\n      const current_colspan = parseInt($selected_cell.attr('colspan'), 10) || 1\r\n      const parent_width = $selected_cell.parent().outerWidth()\r\n      let width = $selected_cell.outerWidth()\r\n\r\n      // Create new td.\r\n      const $new_td = $selected_cell.clone().html('<br>')\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n      const cell_origin = _cellOrigin($selected_cell.get(0), map)\r\n\r\n      if (current_colspan > 1) {\r\n\r\n        // Split current colspan.\r\n        const new_colspan = Math.ceil(current_colspan / 2)\r\n\r\n        width = _columnsWidth(cell_origin.col, cell_origin.col + new_colspan - 1, map) / parent_width * 100\r\n        const new_width = _columnsWidth(cell_origin.col + new_colspan, cell_origin.col + current_colspan - 1, map) / parent_width * 100\r\n\r\n        // Update colspan for current cell.\r\n        if (new_colspan > 1) {\r\n          $selected_cell.attr('colspan', new_colspan)\r\n        }\r\n        else {\r\n          $selected_cell.removeAttr('colspan')\r\n        }\r\n\r\n        // Update new td's colspan.\r\n        if (current_colspan - new_colspan > 1) {\r\n          $new_td.attr('colspan', current_colspan - new_colspan)\r\n        }\r\n        else {\r\n          $new_td.removeAttr('colspan')\r\n        }\r\n\r\n        // Update cell width.\r\n        $selected_cell.css('width', width.toFixed(4) + '%')\r\n        $new_td.css('width', new_width.toFixed(4) + '%')\r\n\r\n        // Increase colspan for all cells on the current column.\r\n      }\r\n      else {\r\n        let i\r\n\r\n        for (i = 0; i < map.length; i++) {\r\n\r\n          // Don't do this twice if we have a rowspan.\r\n          if (i === 0 || map[i][cell_origin.col] != map[i - 1][cell_origin.col]) {\r\n            const $cell = $(map[i][cell_origin.col])\r\n\r\n            if (!$cell.is($selected_cell)) {\r\n              const colspan = (parseInt($cell.attr('colspan'), 10) || 1) + 1\r\n              $cell.attr('colspan', colspan)\r\n            }\r\n          }\r\n        }\r\n\r\n        // Update cell width.\r\n        width = width / parent_width * 100 / 2\r\n\r\n        $selected_cell.css('width', `${width.toFixed(4)}%`)\r\n        $new_td.css('width', `${width.toFixed(4)}%`)\r\n      }\r\n\r\n      // Add a new td after the current one.\r\n      if($selected_cell[0].parentNode) {\r\n        $selected_cell[0].insertAdjacentElement('afterend', $new_td[0])\r\n      }\r\n\r\n      // Remove selection\r\n      _removeSelection()\r\n\r\n      // Hide table edit popup.\r\n      editor.popups.hide('table.edit')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Set background color to selected cells.\r\n   */\r\n  function setBackground(color) {\r\n    const $selected_cells = editor.$el.find('.fr-selected-cell')\r\n\r\n    // Set background  color.\r\n    if (color != 'REMOVE') {\r\n      $selected_cells.css('background-color', editor.helpers.HEXtoRGB(color))\r\n    }\r\n\r\n    // Remove background color.\r\n    else {\r\n      $selected_cells.css('background-color', '')\r\n    }\r\n\r\n    _showEditPopup()\r\n  }\r\n\r\n  /*\r\n   * Set vertical align to selected cells.\r\n   */\r\n  function verticalAlign(val) {\r\n    editor.$el.find('.fr-selected-cell').css('vertical-align', val)\r\n  }\r\n\r\n  /*\r\n   * Apply horizontal alignment to selected cells.\r\n   */\r\n  function horizontalAlign(val) {\r\n    editor.$el.find('.fr-selected-cell').css('text-align', val)\r\n  }\r\n\r\n  /**\r\n   * Apply specific style to selected table or selected cells.\r\n   * val              class to apply.\r\n   * obj              table or selected cells.\r\n   * multiple_styles  editor.opts.tableStyles or editor.opts.tableCellStyles.\r\n   * style            editor.opts.tableStyles or editor.opts.tableCellStyles\r\n   */\r\n  function applyStyle(val, obj, multiple_styles, styles) {\r\n    if (obj.length > 0) {\r\n\r\n      // Remove multiple styles.\r\n      if (!multiple_styles) {\r\n        const classes = Object.keys(styles)\r\n        classes.splice(classes.indexOf(val), 1)\r\n        obj.removeClass(classes.join(' '))\r\n      }\r\n\r\n      obj.toggleClass(val)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Create a table map.\r\n   */\r\n  function _tableMap($table) {\r\n    $table = $table || null\r\n\r\n    const map = []\r\n\r\n    if ($table == null && selectedCells().length > 0) {\r\n      $table = selectedTable()\r\n    }\r\n\r\n    if ($table) {\r\n      $table.findVisible('tr').not($table.find('> table tr')).each(function (row, tr) {\r\n        const $tr = $(tr)\r\n\r\n        let c_index = 0\r\n        $tr.find('> th, > td').each(function (col, td) {\r\n          const $td = $(td)\r\n          const cspan = parseInt($td.attr('colspan'), 10) || 1\r\n          const rspan = parseInt($td.attr('rowspan'), 10) || 1\r\n\r\n          for (let i = row; i < row + rspan; i++) {\r\n            for (let j = c_index; j < c_index + cspan; j++) {\r\n              if (!map[i]) map[i] = []\r\n\r\n              if (!map[i][j]) {\r\n                map[i][j] = td\r\n              }\r\n              else {\r\n                c_index++\r\n              }\r\n            }\r\n          }\r\n\r\n          c_index += cspan\r\n        })\r\n      })\r\n    }\r\n\r\n    return map\r\n  }\r\n\r\n  /*\r\n   * Get the i, j coordinates of a cell in the table map.\r\n   * These are the coordinates where the cell starts.\r\n   */\r\n  function _cellOrigin(td, map) {\r\n    for (let i = 0; i < map.length; i++) {\r\n      for (let j = 0; j < map[i].length; j++) {\r\n        if (map[i][j] == td) {\r\n          return {\r\n            row: i,\r\n            col: j\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the i, j coordinates where a cell ends in the table map.\r\n   */\r\n  function _cellEnds(origin_i, origin_j, map) {\r\n    let max_i = origin_i + 1\r\n    let max_j = origin_j + 1\r\n\r\n    // Compute max_i\r\n    while (max_i < map.length) {\r\n      if (map[max_i][origin_j] != map[origin_i][origin_j]) {\r\n        max_i--\r\n        break\r\n      }\r\n\r\n      max_i++\r\n    }\r\n\r\n    if (max_i == map.length) {\r\n      max_i--\r\n    }\r\n\r\n    // Compute max_j\r\n    while (max_j < map[origin_i].length) {\r\n      if (map[origin_i][max_j] != map[origin_i][origin_j]) {\r\n        max_j--\r\n        break\r\n      }\r\n\r\n      max_j++\r\n    }\r\n\r\n    if (max_j == map[origin_i].length) {\r\n      max_j--\r\n    }\r\n\r\n    return {\r\n      row: max_i,\r\n      col: max_j\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove handler classes that are used to select table cells with keyboard.\r\n   */\r\n  function _removeKeyboardSelectionHandlers() {\r\n    if (editor.el.querySelector('.fr-cell-fixed')) {\r\n      editor.el.querySelector('.fr-cell-fixed').classList.remove('fr-cell-fixed')\r\n    }\r\n\r\n    if (editor.el.querySelector('.fr-cell-handler')) {\r\n      editor.el.querySelector('.fr-cell-handler').classList.remove('fr-cell-handler')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Remove selection from cells.\r\n   */\r\n  function _removeSelection() {\r\n    const cells = editor.$el.find('.fr-selected-cell')\r\n\r\n    if (cells.length > 0) {\r\n\r\n      // Remove selection.\r\n      cells.each(function () {\r\n        const $cell = $(this)\r\n\r\n        $cell.removeClass('fr-selected-cell')\r\n\r\n        if ($cell.attr('class') === '') {\r\n          $cell.removeAttr('class')\r\n        }\r\n      })\r\n    }\r\n\r\n    _removeKeyboardSelectionHandlers()\r\n  }\r\n\r\n  /*\r\n   * Clear selection to prevent Firefox cell selection.\r\n   */\r\n  function _clearSelection() {\r\n    editor.events.disableBlur()\r\n    editor.selection.clear()\r\n\r\n    // Prevent text selection while selecting multiple cells.\r\n    // Happens in Chrome.\r\n    editor.$el.addClass('fr-no-selection')\r\n\r\n    // Cursor will not appear if we don't make blur.\r\n    editor.$el.blur()\r\n    editor.events.enableBlur()\r\n  }\r\n\r\n  /*\r\n   * Get current selected cells coordintates.\r\n   */\r\n  function _currentSelection(map) {\r\n    const cells = editor.$el.find('.fr-selected-cell')\r\n    if (cells.length > 0) {\r\n      let min_i = map.length\r\n      let max_i = 0\r\n      let min_j = map[0].length\r\n      let max_j = 0\r\n      let i\r\n\r\n      for (i = 0; i < cells.length; i++) {\r\n        const cellOrigin = _cellOrigin(cells[i], map)\r\n        const cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        min_i = Math.min(cellOrigin.row, min_i)\r\n        max_i = Math.max(cellEnd.row, max_i)\r\n        min_j = Math.min(cellOrigin.col, min_j)\r\n        max_j = Math.max(cellEnd.col, max_j)\r\n      }\r\n\r\n      return {\r\n        min_i: min_i,\r\n        max_i: max_i,\r\n        min_j: min_j,\r\n        max_j: max_j\r\n      }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Minimum and maximum coordinates for the selection in the table map.\r\n   */\r\n  function _selectionLimits(min_i, max_i, min_j, max_j, map) {\r\n    let first_i = min_i\r\n    let last_i = max_i\r\n    let first_j = min_j\r\n    let last_j = max_j\r\n    let i\r\n    let j\r\n    let cellOrigin\r\n    let cellEnd\r\n\r\n    // Go through first and last columns.\r\n    for (i = first_i; i <= last_i; i++) {\r\n\r\n      // First column.\r\n      if ((parseInt($(map[i][first_j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[i][first_j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[i][first_j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n\r\n      // Last column.\r\n      if ((parseInt($(map[i][last_j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[i][last_j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[i][last_j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n    }\r\n\r\n    // Go through first and last rows.\r\n    for (j = first_j; j <= last_j; j++) {\r\n\r\n      // First row.\r\n      if ((parseInt($(map[first_i][j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[first_i][j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[first_i][j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n\r\n      // Last column.\r\n      if ((parseInt($(map[last_i][j]).attr('rowspan'), 10) || 1) > 1 ||\r\n        (parseInt($(map[last_i][j]).attr('colspan'), 10) || 1) > 1) {\r\n        cellOrigin = _cellOrigin(map[last_i][j], map)\r\n        cellEnd = _cellEnds(cellOrigin.row, cellOrigin.col, map)\r\n\r\n        first_i = Math.min(cellOrigin.row, first_i)\r\n        last_i = Math.max(cellEnd.row, last_i)\r\n        first_j = Math.min(cellOrigin.col, first_j)\r\n        last_j = Math.max(cellEnd.col, last_j)\r\n      }\r\n    }\r\n\r\n    if (first_i == min_i && last_i == max_i && first_j == min_j && last_j == max_j) {\r\n      return {\r\n        min_i: min_i,\r\n        max_i: max_i,\r\n        min_j: min_j,\r\n        max_j: max_j\r\n      }\r\n\r\n    }\r\n    else {\r\n      return _selectionLimits(first_i, last_i, first_j, last_j, map)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the left and right offset position for the current selection.\r\n   */\r\n  function _selectionOffset(map) {\r\n    const selection = _currentSelection(map)\r\n\r\n    // Return if no selected item\r\n    if(selection == null) {\r\n      return\r\n    }\r\n    \r\n    // Top left cell.\r\n    const $tl = $(map[selection.min_i][selection.min_j])\r\n\r\n    // Top right cell.\r\n    const $tr = $(map[selection.min_i][selection.max_j])\r\n\r\n    // Bottom left cell.\r\n    const $bl = $(map[selection.max_i][selection.min_j])\r\n\r\n    const left = $tl.length && $tl.offset().left\r\n    const right = $tr.length && $tr.offset().left + $tr.outerWidth()\r\n    const top = $tl.length && $tl.offset().top\r\n    const bottom = $bl.length && $bl.offset().top + $bl.outerHeight()\r\n\r\n    return {\r\n      left: left,\r\n      right: right,\r\n      top: top,\r\n      bottom: bottom\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Select table cells.\r\n   * firstCell is either the top left corner or the fr-cell-fixed corner of the selection.\r\n   * lastCell is either the bottom right corner ot the fr-cell-handler of the selection.\r\n   */\r\n  function selectCells(firstCell, lastCell) {\r\n\r\n    // If the first and last cells are the same then just select it.\r\n    if ($(firstCell).is(lastCell)) {\r\n\r\n      // Remove previous selection.\r\n      _removeSelection()\r\n\r\n      $(firstCell).addClass('fr-selected-cell')\r\n    }\r\n\r\n    // Select multiple cells.\r\n    else {\r\n      // Prevent Firefox cell selection.\r\n      _clearSelection()\r\n\r\n      // Turn editor toolbar off.\r\n      editor.edit.off()\r\n\r\n      // Create a table map.\r\n      const map = _tableMap()\r\n\r\n      // Get first and last cell's i and j map coordinates.\r\n      const firstCellOrigin = _cellOrigin(firstCell, map)\r\n      const lastCellOrigin = _cellOrigin(lastCell, map)\r\n\r\n      // Some cells between these coordinates might have colspan or rowspan.\r\n      // The selected area exceeds first and last cells' coordinates.\r\n      const limits = _selectionLimits(Math.min(firstCellOrigin.row, lastCellOrigin.row),\r\n        Math.max(firstCellOrigin.row, lastCellOrigin.row),\r\n        Math.min(firstCellOrigin.col, lastCellOrigin.col),\r\n        Math.max(firstCellOrigin.col, lastCellOrigin.col),\r\n        map)\r\n\r\n      // Remove previous selection.\r\n      _removeSelection()\r\n\r\n      // We always need to set the selection handler classes as user may use keyboard to select at anytime.\r\n      firstCell.classList.add('fr-cell-fixed')\r\n      lastCell.classList.add('fr-cell-handler')\r\n\r\n      // Select all cells between the first and last cell.\r\n      for (let i = limits.min_i; i <= limits.max_i; i++) {\r\n        for (let j = limits.min_j; j <= limits.max_j; j++) {\r\n\r\n          // Skip the cell if it's parent table is different from first clicked cell's parent table\r\n          if (!$(firstCell).closest('table').is($(map[i][j]).closest('table'))) continue\r\n          $(map[i][j]).addClass('fr-selected-cell')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Get the cell under the mouse cursor.\r\n   */\r\n  function _getCellUnder(e) {\r\n    let cell = null\r\n    const $target = $(e.target)\r\n\r\n    if (e.target.tagName == 'TD' || e.target.tagName == 'TH') {\r\n      cell = e.target\r\n    }\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1779\r\n    else if ($target.closest('th', $target.closest('thead')[0]).length > 0) {\r\n      cell = $target.closest('th', $target.closest('thead')[0]).get(0)\r\n    }\r\n    else if ($target.closest('td', $target.closest('tr')[0]).length > 0) {\r\n      cell = $target.closest('td', $target.closest('tr')[0]).get(0)\r\n    }\r\n    \r\n\r\n    // Cell should reside inside editor.\r\n    if (editor.$el.html.toString().search(cell) === -1) return null\r\n\r\n    return cell\r\n  }\r\n\r\n  /*\r\n   * Stop table cell editing and allow text editing.\r\n   */\r\n  function _stopEdit() {\r\n\r\n    // Clear previous selection.\r\n    _removeSelection()\r\n\r\n    // Hide table edit popup.\r\n    editor.popups.hide('table.edit')\r\n  }\r\n\r\n  /*\r\n   * Mark that mouse is down.\r\n   */\r\n  function _mouseDown(e) {\r\n    const cell = _getCellUnder(e)\r\n\r\n    if ($(cell).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n    // Stop table editing if user clicks outside the table.\r\n    if (selectedCells().length > 0 && !cell) {\r\n      _stopEdit()\r\n    }\r\n\r\n    // Only do mouseDown if the editor is not disabled by user.\r\n    if (!editor.edit.isDisabled() || editor.popups.isVisible('table.edit')) {\r\n\r\n      // On left click.\r\n      if (e.which == 1 && !(e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) {\r\n        mouseDownFlag = true\r\n\r\n        // User clicked on a table cell.\r\n        if (cell) {\r\n\r\n          // We always have to clear previous selection except when using shift key to select multiple cells.\r\n          if (selectedCells().length > 0 && !e.shiftKey) {\r\n            _stopEdit()\r\n          }\r\n\r\n          e.stopPropagation()\r\n\r\n          editor.events.trigger('image.hideResizer')\r\n          editor.events.trigger('video.hideResizer')\r\n\r\n          // Keep record of left mouse click being down\r\n          mouseDownCellFlag = true\r\n\r\n          const tag_name = cell.tagName.toLowerCase()\r\n\r\n          // Select multiple cells using Shift key\r\n          if (e.shiftKey && editor.$el.find(`${tag_name}.fr-selected-cell`).length > 0) {\r\n\r\n            // Cells must be in the same table.\r\n            if ($(editor.$el.find(`${tag_name}.fr-selected-cell`).closest('table')).is($(cell).closest('table'))) {\r\n\r\n              // Select cells between.\r\n              selectCells(mouseDownCell, cell)\r\n\r\n              // Do nothing if cells are not in the same table.\r\n            }\r\n            else {\r\n\r\n              // Prevent Firefox selection.\r\n              _clearSelection()\r\n            }\r\n          }\r\n\r\n          else {\r\n\r\n            // Prevent Firefox selection for ctrl / cmd key.\r\n            // https://github.com/froala/wysiwyg-editor/issues/1323:\r\n            //  - we have more than one cell selected or\r\n            //  - selection is starting in another cell than the one we clicked on.\r\n            if ((editor.keys.ctrlKey(e) || e.shiftKey) && (selectedCells().length > 1 || ($(cell).find(editor.selection.element()).length === 0 && !$(cell).is(editor.selection.element())))) {\r\n              _clearSelection()\r\n            }\r\n\r\n            // Save cell where mouse has been clicked\r\n            mouseDownCell = cell\r\n\r\n            // Select cell.\r\n            if (editor.opts.tableEditButtons.length > 0) {\r\n              selectCells(mouseDownCell, mouseDownCell)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // On right click stop table editing.\r\n      else if ((e.which == 3 || (e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) && cell) {\r\n        _stopEdit()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Notify that mouse is no longer pressed.\r\n   */\r\n  function _mouseUp(e) {\r\n\r\n    // Mouse down started in a popup and ends in the editor.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3190\r\n    // Toolbar freezes with checkboxes inside table\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n    if (!editor.edit.isDisabled() && editor.popups.areVisible()) {\r\n      return true;\r\n    }\r\n\r\n    // User clicked somewhere else in the editor (except the toolbar).\r\n    // We need this because mouse down is not triggered outside the editor.\r\n    if (!mouseDownCellFlag && !editor.$tb.is(e.target) && !editor.$tb.is($(e.target).closest('.fr-toolbar'))) {\r\n      if (selectedCells().length > 0) {\r\n        editor.toolbar.enable()\r\n      }\r\n\r\n      _removeSelection()\r\n    }\r\n\r\n    // On left click.\r\n    if (e.which == 1 && !(e.which == 1 && editor.helpers.isMac() && e.ctrlKey)) {\r\n      mouseDownFlag = false\r\n\r\n      // Mouse down was in a table cell.\r\n      if (mouseDownCellFlag) {\r\n\r\n        // Left click is no longer pressed.\r\n        mouseDownCellFlag = false\r\n\r\n        const cell = _getCellUnder(e)\r\n\r\n        // If we have one selected cell and mouse is lifted somewhere else.\r\n        if (!cell && selectedCells().length == 1) {\r\n\r\n          // We have a text selection and not cell selection.\r\n          _removeSelection()\r\n        }\r\n\r\n        // If there are selected cells then show table edit popup.\r\n        else if (selectedCells().length > 0) {\r\n          if (editor.selection.isCollapsed()) {\r\n            _showEditPopup()\r\n          }\r\n\r\n          // No text selection.\r\n          else {\r\n            _removeSelection()\r\n            editor.edit.on();\r\n          }\r\n        }\r\n\r\n        // Enable editing if the mouse was clicked inside a cell but no cells selected.\r\n        else if (!selectedCells().length) {\r\n        // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n        }\r\n      }\r\n\r\n      // Resizing stops.\r\n      if (resizingFlag) {\r\n        resizingFlag = false\r\n\r\n        $resizer.removeClass('fr-moving')\r\n\r\n        // Allow text selection.\r\n        editor.$el.removeClass('fr-no-selection')\r\n        editor.edit.on()\r\n\r\n        // Set release Y coordinate.\r\n        let left = parseFloat($resizer.css('left')) + editor.opts.tableResizerOffset + editor.$wp.offset().left\r\n\r\n        if (editor.opts.iframe) {\r\n          left -= editor.$iframe.offset().left\r\n        }\r\n        $resizer.data('release-position', left)\r\n\r\n        // Clear resizing limits.\r\n        $resizer.removeData('max-left')\r\n        $resizer.removeData('max-right')\r\n\r\n        // Resize.\r\n        _resize(e)\r\n\r\n        // Hide resizer.\r\n        _hideResizer()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * User drags mouse over multiple cells to select them.\r\n   */\r\n  function _mouseEnter(e) {\r\n\r\n    // Check if the mouse is moving inside the same cell only and return control as it cannot be considered as mouse enter.\r\n    if ($(e.currentTarget).is($(e.originalEvent.relatedTarget)) ||\r\n      e.currentTarget.contains(e.originalEvent.relatedTarget) ||\r\n      (e.originalEvent.relatedTarget && e.originalEvent.relatedTarget.contains(e.currentTarget))) {\r\n      return\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n    editor.events.$on($('input'), 'click',_inputOnClick)\r\n    if (mouseDownCellFlag === true && editor.opts.tableEditButtons.length > 0) {\r\n      const $cell = $(e.currentTarget)\r\n\r\n      // Cells should be in the same table.\r\n      if ($cell.closest('table').is(selectedTable())) {\r\n\r\n        // Don't select both ths and tds.\r\n        if (e.currentTarget.tagName == 'TD' && editor.$el.find('th.fr-selected-cell').length === 0) {\r\n\r\n          // Select cells between.\r\n          selectCells(mouseDownCell, e.currentTarget)\r\n\r\n          return\r\n        }\r\n\r\n        else if (e.currentTarget.tagName == 'TH' && editor.$el.find('td.fr-selected-cell').length === 0) {\r\n\r\n          // Select cells between.\r\n          selectCells(mouseDownCell, e.currentTarget)\r\n\r\n          return\r\n        }\r\n      }\r\n\r\n      // Prevent firefox selection.\r\n      _clearSelection()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor in a nested table.\r\n   */\r\n  function _moveInNestedTable(cell, direction) {\r\n    let table = cell\r\n\r\n    // Get parent table (editor might be initialized inside cell).\r\n    while (table && table.tagName != 'TABLE' && table.parentNode != editor.el) {\r\n      table = table.parentNode\r\n    }\r\n\r\n    if (table && table.tagName == 'TABLE') {\r\n      const new_map = _tableMap($(table))\r\n\r\n      // Move up in the parent table.\r\n      if (direction == 'up') _moveUp(_cellOrigin(cell, new_map), table, new_map)\r\n      else if (direction == 'down') _moveDown(_cellOrigin(cell, new_map), table, new_map)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor up or down outside table.\r\n   */\r\n  function _moveWithArrows(origin, table, map, direction) {\r\n    let up = table\r\n    let sibling\r\n\r\n    // Look up in DOM for the previous or next element.\r\n    while (up != editor.el) {\r\n\r\n      // Nested table.\r\n      if (up.tagName == 'TD' || up.tagName == 'TH') {\r\n        break\r\n      }\r\n\r\n      // The table has a sibling element.\r\n      if (direction == 'up') sibling = up.previousElementSibling\r\n      else if (direction == 'down') sibling = up.nextElementSibling\r\n\r\n      if (sibling) {\r\n        break\r\n      }\r\n\r\n      // Table might be in a block tag.\r\n      up = up.parentNode\r\n    }\r\n\r\n    // We have another table (nested).\r\n    if (up.tagName == 'TD' || up.tagName == 'TH') {\r\n      _moveInNestedTable(up, direction)\r\n    }\r\n\r\n    // Table has a sibling.\r\n    else if (sibling) {\r\n      if (direction == 'up') editor.selection.setAtEnd(sibling)\r\n\r\n      if (direction == 'down') editor.selection.setAtStart(sibling)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor up while in table cell.\r\n   */\r\n  function _moveUp(origin, table, map) {\r\n    // If tribute container is opened, then cancel cursor movement on cells\r\n    if ($('.tribute-container').length > 0 && $('.tribute-container').css('display') != 'none'){\r\n      return\r\n    }\r\n\r\n    // Not the first line.\r\n    if (origin.row > 0) {\r\n      editor.selection.setAtEnd(map[origin.row - 1][origin.col])\r\n    }\r\n\r\n    // First line.\r\n    else {\r\n      _moveWithArrows(origin, table, map, 'up')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Move cursor down while in table cell.\r\n   */\r\n  function _moveDown(origin, table, map) {\r\n    // If tribute container is opened, then cancel cursor movement on cells\r\n    if ($('.tribute-container').length > 0 && $('.tribute-container').css('display') != 'none'){\r\n      return\r\n    }\r\n\r\n    // Cell might have rowspan.\r\n    const row = parseInt(map[origin.row][origin.col].getAttribute('rowspan'), 10) || 1\r\n\r\n    // Not the last line.\r\n    if (origin.row < map.length - row) {\r\n      editor.selection.setAtStart(map[origin.row + row][origin.col])\r\n    }\r\n\r\n    // Last line.\r\n    else {\r\n      _moveWithArrows(origin, table, map, 'down')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Using the arrow keys to move the cursor through the table will not select cells.\r\n   */\r\n  function _navigateWithArrows(e) {\r\n    const key_code = e.which\r\n\r\n    // Get current selection.\r\n    let sel = editor.selection.blocks()\r\n\r\n    if (sel.length) {\r\n      sel = sel[0]\r\n\r\n      // Selection should be in a table cell.\r\n      if (sel.tagName == 'TD' || sel.tagName == 'TH') {\r\n        let table = sel\r\n\r\n        // Get parent table (editor might be initialized inside cell).\r\n        while (table && table.tagName != 'TABLE' && table.parentNode != editor.el) {\r\n          table = table.parentNode\r\n        }\r\n\r\n        if (table && table.tagName == 'TABLE') {\r\n          if (FE.KEYCODE.ARROW_LEFT == key_code || FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_RIGHT == key_code || FE.KEYCODE.ARROW_DOWN == key_code) {\r\n            if (selectedCells().length > 0) {\r\n              _stopEdit()\r\n            }\r\n\r\n            // Up and down in Webkit.\r\n            if (editor.browser.webkit && (FE.KEYCODE.ARROW_UP == key_code || FE.KEYCODE.ARROW_DOWN == key_code)) {\r\n              const node = editor.selection.ranges(0).startContainer\r\n\r\n              if (node.nodeType == Node.TEXT_NODE &&\r\n                ((FE.KEYCODE.ARROW_UP == key_code && ((node.previousSibling && node.previousSibling.tagName !== 'BR') || (node.previousSibling && node.previousSibling.tagName === 'BR' && node.previousSibling.previousSibling)) ||\r\n                (FE.KEYCODE.ARROW_DOWN == key_code && ((node.nextSibling && node.nextSibling.tagName !== 'BR') || (node.nextSibling && node.nextSibling.tagName === 'BR' && node.nextSibling.nextSibling))\r\n                )))) {\r\n                return\r\n              }\r\n\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n\r\n              // Table map.\r\n              const map = _tableMap($(table))\r\n\r\n              // Current cell map coordinates.\r\n              const origin = _cellOrigin(sel, map)\r\n\r\n              // Arrow up\r\n              if (FE.KEYCODE.ARROW_UP == key_code) {\r\n                _moveUp(origin, table, map)\r\n              }\r\n\r\n              // Arrow down\r\n              else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n                _moveDown(origin, table, map)\r\n              }\r\n\r\n              // Update cursor position.\r\n              editor.selection.restore()\r\n\r\n              return false\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initilize table resizer.\r\n   */\r\n  function _initResizer() {\r\n\r\n    // Append resizer HTML to editor wrapper.\r\n    if (!editor.shared.$table_resizer) editor.shared.$table_resizer = $(document.createElement('div')).attr('class', 'fr-table-resizer').html('<div></div>')\r\n    $resizer = editor.shared.$table_resizer\r\n\r\n    // Resize table. Mousedown.\r\n    editor.events.$on($resizer, 'mousedown', function (e) {\r\n      if (!editor.core.sameInstance($resizer)) return true\r\n\r\n      // Stop table editing.\r\n      if (selectedCells().length > 0) {\r\n        _stopEdit()\r\n      }\r\n\r\n      // Resize table only using left click.\r\n      if (e.which == 1) {\r\n\r\n        // Save selection so that we can put cursor back at the end.\r\n        editor.selection.save()\r\n\r\n        resizingFlag = true\r\n\r\n        $resizer.addClass('fr-moving')\r\n\r\n        // Prevent text selection while dragging the table resizer.\r\n        _clearSelection()\r\n\r\n        // Turn editor toolbar off while resizing.\r\n        editor.edit.off()\r\n\r\n        // Show resizer.\r\n        $resizer.find('div').css('opacity', 1)\r\n\r\n        // Prevent selecting text when doing resize.\r\n        return false\r\n      }\r\n    })\r\n\r\n    // Mousemove on table resizer.\r\n    editor.events.$on($resizer, 'mousemove', function (e) {\r\n      if (!editor.core.sameInstance($resizer)) return true\r\n\r\n      if (resizingFlag) {\r\n        if (editor.opts.iframe) {\r\n          e.pageX -= editor.$iframe.offset().left\r\n        }\r\n\r\n        _mouseMove(e)\r\n      }\r\n    })\r\n\r\n    // Editor destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $resizer.html('').removeData().remove()\r\n      $resizer = null\r\n    }, true)\r\n\r\n    editor.events.on('destroy', function () {\r\n      editor.$el.find('.fr-selected-cell').removeClass('fr-selected-cell')\r\n      $('body').first().append($resizer.hide())\r\n    }, true)\r\n  }\r\n\r\n  /*\r\n   * Also clears top and left values, so it doesn't interfer with the insert helper.\r\n   */\r\n  function _hideResizer() {\r\n    if ($resizer) {\r\n      $resizer.find('div').css('opacity', 0)\r\n      $resizer.css('top', 0)\r\n      $resizer.css('left', 0)\r\n      $resizer.css('height', 0)\r\n      $resizer.find('div').css('height', 0)\r\n      $resizer.hide()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide the insert helper.\r\n   */\r\n  function _hideInsertHelper() {\r\n    if ($insert_helper) $insert_helper.removeClass('fr-visible').css('left', '-9999px')\r\n  }\r\n\r\n  /*\r\n   * Place the table resizer between the columns where the mouse is.\r\n   */\r\n  function _placeResizer(e, tag_under) {\r\n    let $tag_under = $(tag_under)\r\n    const $table = $tag_under.closest('table')\r\n    const $table_parent = $table.parent()\r\n\r\n    // We might have another tag inside the table cell.\r\n    if (tag_under && (tag_under.tagName != 'TD' && tag_under.tagName != 'TH')) {\r\n      if ($tag_under.closest('td').length > 0) {\r\n        tag_under = $tag_under.closest('td')\r\n      }\r\n      else if ($tag_under.closest('th').length > 0) {\r\n        tag_under = $tag_under.closest('th')\r\n      }\r\n    }\r\n\r\n    // The tag should be a table cell (TD or TH).\r\n    if (tag_under && (tag_under.tagName == 'TD' || tag_under.tagName == 'TH')) {\r\n      $tag_under = $(tag_under)\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/786.\r\n      if (editor.$el.find($tag_under).length === 0) return false\r\n\r\n      // Tag's left and right coordinate.\r\n      const tag_left = $tag_under.offset().left - 1\r\n      const tag_right = tag_left + $tag_under.outerWidth()\r\n\r\n      // Only if the mouse is close enough to the left or right edges.\r\n      if (Math.abs(e.pageX - tag_left) <= editor.opts.tableResizerOffset ||\r\n        Math.abs(tag_right - e.pageX) <= editor.opts.tableResizerOffset) {\r\n\r\n        // Create a table map.\r\n        const map = _tableMap($table)\r\n        const tag_origin = _cellOrigin(tag_under, map)\r\n\r\n        const tag_end = _cellEnds(tag_origin.row, tag_origin.col, map)\r\n\r\n        // The column numbers from the map that have to be resized.\r\n        let first\r\n        let second\r\n\r\n        // Table resizer position and height.\r\n        const resizer_top = $table.offset().top\r\n        const resizer_height = $table.outerHeight() - 1\r\n        let resizer_left\r\n\r\n        // The left and right limits between which the resizer can be moved.\r\n        let max_left\r\n        let max_right\r\n\r\n        if (editor.opts.direction != 'rtl') {\r\n\r\n          // Mouse is near the cells's left margin.\r\n          if (e.pageX - tag_left <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_left\r\n\r\n            // Resize cells.\r\n            if (tag_origin.col > 0) {\r\n\r\n              // Left limit.\r\n              max_left = tag_left - _columnWidth(tag_origin.col - 1, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_left + _columnWidth(tag_origin.col, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_origin.col - 1\r\n              second = tag_origin.col\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = null\r\n              second = 0\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left - 1 - parseInt($table.css('margin-left'), 10)\r\n              max_right = $table.offset().left - 1 + $table.width() - map[0].length * editor.opts.tableResizingLimit\r\n            }\r\n          }\r\n\r\n          // Mouse is near the cell's right margin.\r\n          else if (tag_right - e.pageX <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left possition.\r\n            resizer_left = tag_right\r\n\r\n            // Check for next td.\r\n            if (tag_end.col < map[tag_end.row].length && map[tag_end.row][tag_end.col + 1]) {\r\n\r\n              // Left limit.\r\n              max_left = tag_right - _columnWidth(tag_end.col, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_right + _columnWidth(tag_end.col + 1, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = tag_end.col + 1\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = null\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left - 1 + map[0].length * editor.opts.tableResizingLimit\r\n              max_right = $table_parent.offset().left - 1 + $table_parent.width() + parseFloat($table_parent.css('padding-left'))\r\n            }\r\n          }\r\n        }\r\n\r\n        // RTL\r\n        else {\r\n\r\n          // Mouse is near the cell's right margin.\r\n          if (tag_right - e.pageX <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_right\r\n\r\n            // Resize cells.\r\n            if (tag_origin.col > 0) {\r\n\r\n              // Left limit.\r\n              max_left = tag_right - _columnWidth(tag_origin.col, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_right + _columnWidth(tag_origin.col - 1, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_origin.col\r\n              second = tag_origin.col - 1\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n              first = null\r\n              second = 0\r\n\r\n              // Resizer limits.\r\n              max_left = $table.offset().left + map[0].length * editor.opts.tableResizingLimit\r\n              max_right = $table_parent.offset().left - 1 + $table_parent.width() + parseFloat($table_parent.css('padding-left'))\r\n            }\r\n          }\r\n\r\n          // Mouse is near the cell's left margin.\r\n          else if (e.pageX - tag_left <= editor.opts.tableResizerOffset) {\r\n\r\n            // Table resizer's left position.\r\n            resizer_left = tag_left\r\n\r\n            // Check for next td.\r\n            if (tag_end.col < map[tag_end.row].length && map[tag_end.row][tag_end.col + 1]) {\r\n\r\n              // Left limit.\r\n              max_left = tag_left - _columnWidth(tag_end.col + 1, map) + editor.opts.tableResizingLimit\r\n\r\n              // Right limit.\r\n              max_right = tag_left + _columnWidth(tag_end.col, map) - editor.opts.tableResizingLimit\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col + 1\r\n              second = tag_end.col\r\n            }\r\n\r\n            // Resize table.\r\n            else {\r\n\r\n              // Columns to resize.\r\n              first = tag_end.col\r\n              second = null\r\n\r\n              // Resizer limits.\r\n              max_left = $table_parent.offset().left + parseFloat($table_parent.css('padding-left'))\r\n              max_right = $table.offset().left - 1 + $table.width() - map[0].length * editor.opts.tableResizingLimit\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!$resizer) _initResizer()\r\n\r\n        // Save table.\r\n        $resizer.data('table', $table)\r\n\r\n        // Save columns to resize.\r\n        $resizer.data('first', first)\r\n        $resizer.data('second', second)\r\n\r\n        $resizer.data('instance', editor)\r\n        editor.$wp.append($resizer)\r\n\r\n        let left = resizer_left - editor.win.pageXOffset - editor.opts.tableResizerOffset - editor.$wp.offset().left\r\n        let top = resizer_top - editor.$wp.offset().top + editor.$wp.scrollTop()\r\n\r\n        if (editor.opts.iframe) {\r\n          const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n          const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n          left += editor.$iframe.offset().left + iframePaddingLeft\r\n          top += editor.$iframe.offset().top + iframePaddingTop\r\n\r\n          max_left += editor.$iframe.offset().left\r\n          max_right += editor.$iframe.offset().left\r\n        }\r\n\r\n        // Set resizing limits.\r\n        $resizer.data('max-left', max_left)\r\n        $resizer.data('max-right', max_right)\r\n\r\n        // Initial position of the resizer\r\n        $resizer.data('origin', resizer_left - editor.win.pageXOffset)\r\n\r\n        // Set table resizer's top, left and height.\r\n        $resizer.css('top', top)\r\n        $resizer.css('left', left)\r\n        $resizer.css('height', resizer_height)\r\n        $resizer.find('div').css('height', resizer_height)\r\n\r\n        // Set padding according to tableResizerOffset.\r\n        $resizer.css('padding-left', editor.opts.tableResizerOffset)\r\n        $resizer.css('padding-right', editor.opts.tableResizerOffset)\r\n\r\n        // Show table resizer.\r\n        $resizer.show()\r\n      }\r\n\r\n      // Hide resizer when the mouse moves away from the cell's border.\r\n      else {\r\n        if (editor.core.sameInstance($resizer)) _hideResizer()\r\n      }\r\n    }\r\n\r\n    // Hide resizer if mouse is no longer over it.\r\n    else if ($resizer && $tag_under.get(0) != $resizer.get(0) && $tag_under.parent().get(0) != $resizer.get(0)) {\r\n      if (editor.core.sameInstance($resizer)) _hideResizer()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Show the insert column helper button.\r\n   */\r\n  function _showInsertColHelper(e, table) {\r\n    if (editor.$box.find('.fr-line-breaker').isVisible()) return false\r\n\r\n    // Insert Helper.\r\n    if (!$insert_helper) _initInsertHelper()\r\n\r\n    editor.$box.append($insert_helper)\r\n    $insert_helper.data('instance', editor)\r\n    const $table = $(table)\r\n    const $row = $table.find('tr').first()\r\n    const mouseX = e.pageX\r\n    let left = 0\r\n    let top = 0\r\n    \r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      left += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    // Check where the column should be inserted.\r\n    let btn_width\r\n\r\n    $row.find('th, td').each(function () {\r\n      const $td = $(this)\r\n\r\n      // Insert before this td.\r\n      if ($td.offset().left <= mouseX && mouseX < $td.offset().left + $td.outerWidth() / 2) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n        $insert_helper.css('top', top + $td.offset().top - editor.$box.offset().top - btn_width - 5)\r\n        $insert_helper.css('left', left + $td.offset().left - editor.$box.offset().left - btn_width / 2)\r\n        $insert_helper.data('selected-cell', $td)\r\n        $insert_helper.data('position', 'before')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n\r\n        // Insert after this td.\r\n      }\r\n      else if ($td.offset().left + $td.outerWidth() / 2 <= mouseX && mouseX < $td.offset().left + $td.outerWidth()) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $td.offset().top - editor.$box.offset().top - btn_width - 5)\r\n        $insert_helper.css('left', left + $td.offset().left - editor.$box.offset().left + $td.outerWidth() - btn_width / 2)\r\n        $insert_helper.data('selected-cell', $td)\r\n        $insert_helper.data('position', 'after')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Show the insert row helper button.\r\n   */\r\n  function _showInsertRowHelper(e, table) {\r\n    if (editor.$box.find('.fr-line-breaker').isVisible()) return false\r\n\r\n    if (!$insert_helper) _initInsertHelper()\r\n\r\n    editor.$box.append($insert_helper)\r\n    $insert_helper.data('instance', editor)\r\n    const $table = $(table)\r\n    const mouseY = e.pageY\r\n    let left = 0\r\n    let top = 0\r\n\r\n    if (editor.opts.iframe) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      left += editor.$iframe.offset().left - editor.helpers.scrollLeft() + iframePaddingLeft\r\n      top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n    }\r\n\r\n    // Check where the row should be inserted.\r\n    let btn_width\r\n\r\n    $table.find('tr').each(function () {\r\n      const $tr = $(this)\r\n\r\n      // Insert above this tr.\r\n      if ($tr.offset().top <= mouseY && mouseY < $tr.offset().top + $tr.outerHeight() / 2) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $tr.offset().top - editor.$box.offset().top - btn_width / 2)\r\n        $insert_helper.css('left', left + $tr.offset().left - editor.$box.offset().left - btn_width - 5)\r\n        $insert_helper.data('selected-cell', $tr.find('td').first())\r\n        $insert_helper.data('position', 'above')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n\r\n        // Insert below this tr.\r\n      }\r\n      else if ($tr.offset().top + $tr.outerHeight() / 2 <= mouseY && mouseY < $tr.offset().top + $tr.outerHeight()) {\r\n        btn_width = parseInt($insert_helper.find('a').css('width'), 10)\r\n\r\n        $insert_helper.css('top', top + $tr.offset().top - editor.$box.offset().top + $tr.outerHeight() - btn_width / 2)\r\n        $insert_helper.css('left', left + $tr.offset().left - editor.$box.offset().left - btn_width - 5)\r\n        $insert_helper.data('selected-cell', $tr.find('td').first())\r\n        $insert_helper.data('position', 'below')\r\n        $insert_helper.addClass('fr-visible')\r\n\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Check if should show the insert column / row helper button.\r\n   */\r\n  function _insertHelper(e, tag_under) {\r\n\r\n    // Don't show the insert helper if there are table cells selected.\r\n    if (selectedCells().length === 0) {\r\n      let i\r\n      let tag_below\r\n      let tag_right\r\n\r\n      // Tag is the editor element or body (inline toolbar). Look for closest tag bellow and at the right.\r\n      if (tag_under && (tag_under.tagName == 'HTML' || tag_under.tagName == 'BODY' || editor.node.isElement(tag_under))) {\r\n\r\n        // Look 1px down until a table tag is found or the insert helper offset is reached.\r\n        for (i = 1; i <= editor.opts.tableInsertHelperOffset; i++) {\r\n\r\n          // Look for tag below.\r\n          tag_below = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset + i)\r\n\r\n          // We're on tooltip.\r\n          if ($(tag_below).hasClass('fr-tooltip')) return true\r\n\r\n          // We found a tag bellow.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n          // Condition added to avoid showing insert helper when the table has contenteditable:false\r\n          if (tag_below && ((tag_below.tagName == 'TH' || tag_below.tagName == 'TD' || tag_below.tagName == 'TABLE') && ($(tag_below).parents('.fr-wrapper').length || editor.opts.iframe) && $(tag_below).closest('table').attr('contenteditable') != 'false')) {\r\n\r\n            // Show the insert column helper button.\r\n            _showInsertColHelper(e, $(tag_below).closest('table'))\r\n\r\n            return true\r\n          }\r\n\r\n          // Look for tag at the right.\r\n          tag_right = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset + i, e.pageY - editor.win.pageYOffset)\r\n\r\n          // We're on tooltip.\r\n          if ($(tag_right).hasClass('fr-tooltip')) return true\r\n\r\n          // We found a tag at the right.\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n          // Condition added to avoid showing insert helper when the table has contenteditable:false\r\n          if (tag_right && ((tag_right.tagName == 'TH' || tag_right.tagName == 'TD' || tag_right.tagName == 'TABLE') && ($(tag_right).parents('.fr-wrapper').length || editor.opts.iframe)) && $(tag_right).closest('table').attr('contenteditable') != 'false') {\r\n\r\n            // Show the insert row helper button.\r\n            _showInsertRowHelper(e, $(tag_right).closest('table'))\r\n\r\n            return true\r\n          }\r\n        }\r\n      }\r\n\r\n      // Hide insert helper.\r\n      if (editor.core.sameInstance($insert_helper)) {\r\n        _hideInsertHelper()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Check tag under the mouse on mouse move.\r\n   */\r\n  function _tagUnder(e) {\r\n    mouseMoveTimer = null\r\n\r\n    // The tag under the mouse cursor.\r\n    const tag_under = editor.doc.elementFromPoint(e.pageX - editor.win.pageXOffset, e.pageY - editor.win.pageYOffset)\r\n\r\n    // Place table resizer if necessary.\r\n    if (editor.opts.tableResizer && (!editor.popups.areVisible() || (editor.popups.areVisible() && editor.popups.isVisible('table.edit')))) {\r\n      _placeResizer(e, tag_under)\r\n    }\r\n\r\n    // Show the insert column / row helper button.\r\n    if (editor.opts.tableInsertHelper && !editor.popups.areVisible() && !(editor.$tb.hasClass('fr-inline') && editor.$tb.isVisible())) {\r\n      _insertHelper(e, tag_under)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Repositon the resizer if the user scrolls while resizing.\r\n   */\r\n  function _repositionResizer() {\r\n    if (resizingFlag) {\r\n      const $table = $resizer.data('table')\r\n      let top = $table.offset().top - editor.win.pageYOffset\r\n\r\n      if (editor.opts.iframe) {\r\n        const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n        top += editor.$iframe.offset().top - editor.helpers.scrollTop() + iframePaddingTop\r\n      }\r\n\r\n      $resizer.css('top', top)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Resize table method.\r\n   */\r\n  function _resize() {\r\n\r\n    // Resizer initial position.\r\n    const initial_positon = $resizer.data('origin')\r\n\r\n    // Resizer release position.\r\n    const release_position = $resizer.data('release-position')\r\n\r\n    // Do resize only if the resizer's position has changed.\r\n    if (initial_positon !== release_position) {\r\n\r\n      // Columns that have to be resized.\r\n      const first = $resizer.data('first')\r\n      const second = $resizer.data('second')\r\n\r\n      const $table = $resizer.data('table')\r\n      const table_width = $table.outerWidth()\r\n\r\n      if (!editor.undo.canDo()) editor.undo.saveStep()\r\n\r\n      // Resize columns and not the table.\r\n      if (first != null && second != null) {\r\n\r\n        // Create a table map.\r\n        const map = _tableMap($table)\r\n\r\n        // Got through all cells on these columns and get their initial width.\r\n        const first_widths = []\r\n        const first_percentages = []\r\n        const second_widths = []\r\n        const second_percentages = []\r\n        let i\r\n        let $first_cell\r\n        let $second_cell\r\n\r\n        // We must do this before updating widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          $first_cell = $(map[i][first])\r\n          $second_cell = $(map[i][second])\r\n\r\n          // Widths in px.\r\n          first_widths[i] = $first_cell.outerWidth()\r\n          second_widths[i] = $second_cell.outerWidth()\r\n\r\n          // Widths in percentages.\r\n          first_percentages[i] = first_widths[i] / table_width * 100\r\n          second_percentages[i] = second_widths[i] / table_width * 100\r\n        }\r\n\r\n        // Got through all cells on these columns and update their widths.\r\n        for (i = 0; i < map.length; i++) {\r\n          $first_cell = $(map[i][first])\r\n          $second_cell = $(map[i][second])\r\n\r\n          // There is a colspan.\r\n          if (map[i][first] != map[i][second]) {\r\n            // New percentage for the first cell.\r\n            const first_cell_percentage = (first_percentages[i] * (first_widths[i] + release_position - initial_positon) / first_widths[i]).toFixed(4)\r\n\r\n            $first_cell.css('width', first_cell_percentage + '%')\r\n            $second_cell.css('width', (first_percentages[i] + second_percentages[i] - first_cell_percentage).toFixed(4) + '%')\r\n          }\r\n        }\r\n      }\r\n\r\n      // Resize the table.\r\n      else {\r\n        const $table_parent = $table.parent()\r\n        const table_percentage = table_width / $table_parent.width() * 100\r\n        const left_margin = (parseInt($table.css('margin-left'), 10) || 0) / $table_parent.width() * 100\r\n        const right_margin = (parseInt($table.css('margin-right'), 10) || 0) / $table_parent.width() * 100\r\n        let width\r\n\r\n        // Right border RTL or LTR.\r\n        if ((editor.opts.direction == 'rtl' && second === 0) || (editor.opts.direction != 'rtl' && second !== 0)) {\r\n          width = (table_width + release_position - initial_positon) / table_width * table_percentage\r\n          $table.css('margin-right', `calc(100% - ${Math.round(width).toFixed(4)}% - ${Math.round(left_margin).toFixed(4)}%)`)\r\n        }\r\n\r\n        // Left border RTL or LTR.\r\n        else if ((editor.opts.direction == 'rtl' && second !== 0) || (editor.opts.direction != 'rtl' && second === 0)) {\r\n          width = (table_width - release_position + initial_positon) / table_width * table_percentage\r\n          $table.css('margin-left', `calc(100% - ${Math.round(width).toFixed(4)}% - ${Math.round(right_margin).toFixed(4)}%)`)\r\n        }\r\n\r\n        // Update table width.\r\n        $table.css('width', `${Math.round(width).toFixed(4)}%`)\r\n      }\r\n\r\n      editor.selection.restore()\r\n      editor.undo.saveStep()\r\n\r\n      editor.events.trigger('table.resized', [$table.get(0)])\r\n    }\r\n\r\n    // Clear resizer data.\r\n    $resizer.removeData('origin')\r\n    $resizer.removeData('release-position')\r\n    $resizer.removeData('first')\r\n    $resizer.removeData('second')\r\n    $resizer.removeData('table')\r\n  }\r\n\r\n  /*\r\n   * Get the width of the column. (columns may have colspan)\r\n   */\r\n  function _columnWidth(col, map) {\r\n    let i\r\n    let width = $(map[0][col]).outerWidth()\r\n\r\n    for (i = 1; i < map.length; i++) {\r\n      width = Math.min(width, $(map[i][col]).outerWidth())\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  /*\r\n   * Get the width of the columns between specified indexes.\r\n   */\r\n  function _columnsWidth(col1, col2, map) {\r\n    let i\r\n    let width = 0\r\n\r\n    // Sum all columns widths.\r\n    for (i = col1; i <= col2; i++) {\r\n      width += _columnWidth(i, map)\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  /*\r\n   * Set mouse timer to improve performance.\r\n   */\r\n  function _mouseMove(e) {\r\n\r\n    // Prevent selecting text when we have cells selected.\r\n    if (selectedCells().length > 1 && mouseDownFlag) {\r\n      _clearSelection()\r\n    }\r\n\r\n    // Reset or set timer.\r\n    if (mouseDownFlag === false && mouseDownCellFlag === false && resizingFlag === false) {\r\n      if (mouseMoveTimer) {\r\n        clearTimeout(mouseMoveTimer)\r\n      }\r\n\r\n      // Only resize table if the editor is not disabled by user.\r\n      if (!editor.edit.isDisabled() || editor.popups.isVisible('table.edit')) {\r\n\r\n        // Check tag under in order to place the table resizer or insert helper button.\r\n        mouseMoveTimer = setTimeout(_tagUnder, 30, e)\r\n      }\r\n\r\n      // Move table resizer.\r\n    }\r\n    else if (resizingFlag) {\r\n\r\n      // Cursor position.\r\n      let pos = e.pageX - editor.win.pageXOffset\r\n\r\n      if (editor.opts.iframe) {\r\n        pos += editor.$iframe.offset().left\r\n      }\r\n\r\n      // Left and right limits.\r\n      const left_limit = $resizer.data('max-left')\r\n      const right_limit = $resizer.data('max-right')\r\n\r\n      // Cursor is between the left and right limits.\r\n      if (pos >= left_limit && pos <= right_limit) {\r\n        $resizer.css('left', pos - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n\r\n        // Cursor has exceeded the left limit. Don't update if it already has the correct value.\r\n      }\r\n      else if (pos < left_limit && parseFloat($resizer.css('left'), 10) > left_limit - editor.opts.tableResizerOffset) {\r\n        $resizer.css('left', left_limit - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n\r\n        // Cursor has exceeded the right limit. Don't update if it already has the correct value.\r\n      }\r\n      else if (pos > right_limit && parseFloat($resizer.css('left'), 10) < right_limit - editor.opts.tableResizerOffset) {\r\n        $resizer.css('left', right_limit - editor.opts.tableResizerOffset - editor.$wp.offset().left)\r\n      }\r\n    }\r\n    else if (mouseDownFlag) {\r\n      _hideInsertHelper()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Place selection markers in a table cell.\r\n   */\r\n  function _addMarkersInCell($cell) {\r\n    if (editor.node.isEmpty($cell.get(0))) {\r\n      $cell.prepend(FE.MARKERS)\r\n    }\r\n    else {\r\n      $cell.prepend(FE.START_MARKER).append(FE.END_MARKER)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Use TAB key to navigate through cells.\r\n   */\r\n  function _useTab(e) {\r\n    const key_code = e.which\r\n\r\n    if (key_code == FE.KEYCODE.TAB) {\r\n\r\n      // Get starting cell.\r\n      let $cell\r\n\r\n      if (selectedCells().length > 0) {\r\n        $cell = editor.$el.find('.fr-selected-cell').last()\r\n      }\r\n      else {\r\n        const cell = editor.selection.element()\r\n\r\n        if (cell.tagName == 'TD' || cell.tagName == 'TH') {\r\n          $cell = $(cell)\r\n        }\r\n        else if (cell != editor.el) {\r\n          if ($(cell).parentsUntil(editor.$el, 'td').length > 0) {\r\n            $cell = $(cell).parents('td').first()\r\n          }\r\n          else if ($(cell).parentsUntil(editor.$el, 'th').length > 0) {\r\n            $cell = $(cell).parents('th').first()\r\n          }\r\n        }\r\n      }\r\n\r\n      if ($cell) {\r\n        e.preventDefault()\r\n        let currentSelection =  editor.selection.get()\r\n\r\n        if (currentSelection.focusOffset === 0 && $(editor.selection.element()).parentsUntil(editor.$el, 'ol, ul').length > 0 && ($(editor.selection.element()).closest('li').prev().length > 0 || ($(editor.selection.element()).is('li') && $(editor.selection.element()).prev().length > 0))) {\r\n\r\n          return true\r\n        }\r\n\r\n        _stopEdit()\r\n\r\n        // Go backwards.\r\n        if (e.shiftKey) {\r\n\r\n          // Go to previous cell.\r\n          if ($cell.prev().length > 0) {\r\n            _addMarkersInCell($cell.prev())\r\n          }\r\n\r\n          // Go to prev row, last cell.\r\n          else if ($cell.closest('tr').length > 0 && $cell.closest('tr').prev().length > 0) {\r\n            _addMarkersInCell($cell.closest('tr').prev().find('td').last())\r\n          }\r\n\r\n          // Go in THEAD, last cell.\r\n          else if ($cell.closest('tbody').length > 0 && $cell.closest('table').find('thead tr').length > 0) {\r\n            _addMarkersInCell($cell.closest('table').find('thead tr th').last())\r\n          }\r\n        }\r\n\r\n        // Go forward.\r\n        else {\r\n\r\n          // Go to next cell.\r\n          if ($cell.next().length > 0) {\r\n            _addMarkersInCell($cell.next())\r\n          }\r\n\r\n          // Go to next row, first cell.\r\n          else if ($cell.closest('tr').length > 0 && $cell.closest('tr').next().length > 0) {\r\n            _addMarkersInCell($cell.closest('tr').next().find('td').first())\r\n          }\r\n\r\n          // Cursor is in THEAD. Go to next row in TBODY\r\n          else if ($cell.closest('thead').length > 0 && $cell.closest('table').find('tbody tr').length > 0) {\r\n            _addMarkersInCell($cell.closest('table').find('tbody tr td').first())\r\n          }\r\n\r\n          // Add new row.\r\n          else {\r\n            $cell.addClass('fr-selected-cell')\r\n            insertRow('below')\r\n            _removeSelection()\r\n            _addMarkersInCell($cell.closest('tr').next().find('td').first())\r\n          }\r\n        }\r\n\r\n        // Update cursor position.\r\n        editor.selection.restore()\r\n\r\n        // Prevent event propagation.\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initilize insert helper.\r\n   */\r\n  function _initInsertHelper() {\r\n\r\n    // Append insert helper HTML to editor wrapper.\r\n    if (!editor.shared.$ti_helper) {\r\n      editor.shared.$ti_helper = $(document.createElement('div')).attr('class', 'fr-insert-helper').html(`<a class=\"fr-floating-btn\" role=\"button\" tabIndex=\"-1\" title=\"${editor.language.translate('Insert')}\"><svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z\"/></svg></a>`)\r\n\r\n      // Click on insert helper.\r\n      editor.events.bindClick(editor.shared.$ti_helper, 'a', function () {\r\n        const $td = $insert_helper.data('selected-cell')\r\n        const position = $insert_helper.data('position')\r\n        const inst = $insert_helper.data('instance') || editor\r\n\r\n        if (position == 'before') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertColumn(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'after') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertColumn(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'above') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertRow(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n        else if (position == 'below') {\r\n          editor.undo.saveStep()\r\n\r\n          $td.addClass('fr-selected-cell')\r\n          inst.table.insertRow(position)\r\n          $td.removeClass('fr-selected-cell')\r\n\r\n          editor.undo.saveStep()\r\n        }\r\n\r\n        // Hide the insert helper so it will reposition.\r\n        _hideInsertHelper()\r\n      })\r\n\r\n      // Editor destroy.\r\n      editor.events.on('shared.destroy', function () {\r\n        editor.shared.$ti_helper.html('').removeData().remove()\r\n        editor.shared.$ti_helper = null\r\n      }, true)\r\n\r\n      // Prevent the insert helper hide when mouse is over it.\r\n      editor.events.$on(editor.shared.$ti_helper, 'mousemove', function (e) {\r\n        e.stopPropagation()\r\n      }, true)\r\n\r\n      // Hide the insert helper if the page is scrolled.\r\n      editor.events.$on($(editor.o_win), 'scroll', function () {\r\n        _hideInsertHelper()\r\n      }, true)\r\n\r\n      editor.events.$on(editor.$wp, 'scroll', function () {\r\n        _hideInsertHelper()\r\n      }, true)\r\n    }\r\n\r\n    $insert_helper = editor.shared.$ti_helper\r\n\r\n    editor.events.on('destroy', function () {\r\n      $insert_helper = null\r\n    })\r\n\r\n    // Table insert helper tooltip.\r\n    editor.tooltip.bind(editor.$box, '.fr-insert-helper > a.fr-floating-btn')\r\n  }\r\n\r\n  /**\r\n   * Destroy\r\n   */\r\n  function _destroy() {\r\n    mouseDownCell = null\r\n    clearTimeout(mouseMoveTimer)\r\n  }\r\n\r\n  /*\r\n   * Go back to the table edit popup.\r\n   */\r\n  function back() {\r\n    if (selectedCells().length > 0) {\r\n      _showEditPopup()\r\n    }\r\n    else {\r\n      editor.popups.hide('table.insert')\r\n      editor.toolbar.showInline()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return selected cells.\r\n   */\r\n  function selectedCells() {\r\n    return editor.el.querySelectorAll('.fr-selected-cell')\r\n  }\r\n\r\n  /**\r\n   * Return selected table.\r\n   */\r\n  function selectedTable() {\r\n    const cells = selectedCells()\r\n\r\n    if (cells.length) {\r\n      let cell = cells[0]\r\n\r\n      while (cell && cell.parentNode != editor.el) {\r\n        cell = cell.parentNode\r\n      }\r\n\r\n      if (cell && cell.tagName == 'TABLE') return $(cell)\r\n\r\n      return $([])\r\n    }\r\n\r\n    return $([])\r\n  }\r\n\r\n  /**\r\n   * Select table cell with alt + space.\r\n   */\r\n  function _selectCellWithKeyboard(e) {\r\n\r\n    // Alt+space was hit. Try to select cell.\r\n    if (e.altKey && e.which == FE.KEYCODE.SPACE) {\r\n      let cell\r\n      const el = editor.selection.element()\r\n\r\n      // Get cell where cursor is.\r\n      if (el.tagName == 'TD' || el.tagName == 'TH') {\r\n        cell = el\r\n      }\r\n      else if ($(el).closest('td').length > 0) {\r\n        cell = $(el).closest('td').get(0)\r\n      }\r\n      else if ($(el).closest('th').length > 0) {\r\n        cell = $(el).closest('th').get(0)\r\n      }\r\n\r\n      // Select this cell.\r\n      if (cell) {\r\n        e.preventDefault()\r\n        selectCells(cell, cell)\r\n        _showEditPopup()\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Select table cells using arrows.\r\n   */\r\n  function selectCellsWithKeyboard(e) {\r\n    const selection = selectedCells()\r\n\r\n    // Return if no selected cell\r\n    if(selection == null) {\r\n      return\r\n    }\r\n\r\n    // There are some selected cells.\r\n    if (selection.length > 0) {\r\n      const map = _tableMap()\r\n      const key_code = e.which\r\n      let fixedCell\r\n      let handlerCell\r\n\r\n      // Only one cell is selected.\r\n      if (selection.length == 1) {\r\n        fixedCell = selection[0]\r\n        handlerCell = fixedCell\r\n      }\r\n\r\n      else {\r\n        fixedCell = editor.el.querySelector('.fr-cell-fixed')\r\n        handlerCell = editor.el.querySelector('.fr-cell-handler')\r\n      }\r\n\r\n      const handlerOrigin = _cellOrigin(handlerCell, map)\r\n\r\n      // Select column at the right.\r\n      if (FE.KEYCODE.ARROW_RIGHT == key_code) {\r\n        if (handlerOrigin.col < map[0].length - 1) {\r\n          selectCells(fixedCell, map[handlerOrigin.row][handlerOrigin.col + 1])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select row below.\r\n      else if (FE.KEYCODE.ARROW_DOWN == key_code) {\r\n        if (handlerOrigin.row < map.length - 1) {\r\n          selectCells(fixedCell, map[handlerOrigin.row + 1][handlerOrigin.col])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select column at the left.\r\n      else if (FE.KEYCODE.ARROW_LEFT == key_code) {\r\n        if (handlerOrigin.col > 0) {\r\n          selectCells(fixedCell, map[handlerOrigin.row][handlerOrigin.col - 1])\r\n\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Select row above.\r\n      else if (FE.KEYCODE.ARROW_UP == key_code) {\r\n        if (handlerOrigin.row > 0) {\r\n          selectCells(fixedCell, map[handlerOrigin.row - 1][handlerOrigin.col])\r\n\r\n          return false\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n  *  Clicking inside an input element\r\n     https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n  */ \r\n function _inputOnClick(e){\r\n    mouseDownCellFlag = false;\r\n  }\r\n\r\n  /*\r\n   * Init table.\r\n   */\r\n  function _init() {\r\n    if (!editor.$wp) return false\r\n\r\n    // Do cell selection only on desktops (no touch devices)\r\n    if (!editor.helpers.isMobile()) {\r\n\r\n      // Remember if mouse is clicked.\r\n      mouseDownFlag = false\r\n      mouseDownCellFlag = false\r\n      resizingFlag = false\r\n\r\n      // Mouse is down in a table cell.\r\n      editor.events.$on(editor.$el, 'mousedown', _mouseDown)\r\n\r\n      // Deselect table cells when user clicks on an image.\r\n      editor.popups.onShow('image.edit', function () {\r\n        _removeSelection()\r\n        mouseDownFlag = false\r\n        mouseDownCellFlag = false\r\n      })\r\n\r\n      // Deselect table cells when user clicks on a link.\r\n      editor.popups.onShow('link.edit', function () {\r\n        _removeSelection()\r\n        mouseDownFlag = false\r\n        mouseDownCellFlag = false\r\n      })\r\n\r\n      // Deselect table cells when a command is run.\r\n      editor.events.on('commands.mousedown', function ($btn) {\r\n        if ($btn.parents('.fr-toolbar').length > 0) {\r\n          _removeSelection()\r\n        }\r\n      })\r\n\r\n      // Mouse enter's a table cell.\r\n      editor.events.$on(editor.$el, 'mouseover', 'th, td', _mouseEnter)\r\n\r\n      // Mouse is no longer pressed.\r\n      editor.events.$on(editor.$win, 'mouseup', _mouseUp)\r\n\r\n      // Iframe mouseup.\r\n      if (editor.opts.iframe) {\r\n        editor.events.$on($(editor.o_win), 'mouseup', _mouseUp)\r\n      }\r\n\r\n      // Check tags under the mouse to see if the resizer needs to be shown.\r\n      editor.events.$on(editor.$win, 'mousemove', _mouseMove)\r\n\r\n      // Update resizer's position on scroll.\r\n      editor.events.$on($(editor.o_win), 'scroll', _repositionResizer)\r\n\r\n      // Reposition table edit popup when table cell content changes.\r\n      editor.events.on('contentChanged', function () {\r\n        if (selectedCells().length > 0) {\r\n          _showEditPopup()\r\n\r\n          // Make sure we reposition on image load.\r\n          editor.$el.find('img').on('load.selected-cells', function () {\r\n            $(this).off('load.selected-cells')\r\n\r\n            if (selectedCells().length > 0) {\r\n              _showEditPopup()\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      // Reposition table edit popup on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        _removeSelection()\r\n      })\r\n\r\n      editor.events.on('toolbar.esc', function () {\r\n        if (selectedCells().length > 0) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n\r\n          return false\r\n        }\r\n      }, true)\r\n\r\n      // Allow keyboard while selecting table cells.\r\n      // https://github.com/froala/wysiwyg-editor/issues/2256\r\n      editor.events.$on($(editor.o_win), 'keydown', function () {\r\n        if (mouseDownFlag && mouseDownCellFlag) {\r\n          mouseDownFlag = false\r\n          mouseDownCellFlag = false\r\n\r\n          // Allow text selection.\r\n          editor.$el.removeClass('fr-no-selection')\r\n          editor.edit.on()\r\n\r\n          editor.selection.setAtEnd(editor.$el.find('.fr-selected-cell').last().get(0))\r\n          editor.selection.restore()\r\n\r\n          // Remove selected cells.\r\n          _removeSelection()\r\n        }\r\n      })\r\n\r\n      // Selecting cells with keyboard or moving cursor with arrow keys.\r\n      editor.events.$on(editor.$el, 'keydown', function (e) {\r\n        if (e.shiftKey) {\r\n          if (selectCellsWithKeyboard(e) === false) {\r\n\r\n            // Timeout needed due to clearSelection timeout.\r\n            setTimeout(function () {\r\n              _showEditPopup()\r\n            }, 0)\r\n          }\r\n        }\r\n        else {\r\n          _navigateWithArrows(e)\r\n        }\r\n      })\r\n\r\n      // Prevent backspace from doing browser back.\r\n      editor.events.on('keydown', function (e) {\r\n\r\n        // Tab in cell.\r\n        if (_useTab(e) === false) return false\r\n\r\n        let selected_cells = selectedCells()\r\n\r\n        if (selected_cells.length > 0) {\r\n\r\n          // CMD + A clear table cell selection and allow propagation.\r\n          if (selected_cells.length > 0 && editor.keys.ctrlKey(e) && e.which == FE.KEYCODE.A) {\r\n            _removeSelection()\r\n\r\n            if (editor.popups.isVisible('table.edit')) {\r\n              editor.popups.hide('table.edit')\r\n            }\r\n            selected_cells = []\r\n\r\n            return true\r\n          }\r\n\r\n          // ESC clear table cell selection.\r\n          if (e.which == FE.KEYCODE.ESC) {\r\n            if (editor.popups.isVisible('table.edit')) {\r\n              _removeSelection()\r\n              editor.popups.hide('table.edit')\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              e.stopImmediatePropagation()\r\n              selected_cells = []\r\n\r\n              return false\r\n            }\r\n          }\r\n\r\n          // Backspace clears selected cells content.\r\n          if (selected_cells.length > 1 && (e.which == FE.KEYCODE.BACKSPACE || e.which == FE.KEYCODE.DELETE)) {\r\n            editor.undo.saveStep()\r\n\r\n            for (let i = 0; i < selected_cells.length; i++) {\r\n              $(selected_cells[i]).html('<br>')\r\n\r\n              if (i == selected_cells.length - 1) {\r\n                $(selected_cells[i]).prepend(FE.MARKERS)\r\n              }\r\n            }\r\n\r\n            editor.selection.restore()\r\n            editor.undo.saveStep()\r\n            selected_cells = []\r\n\r\n            return false\r\n          }\r\n\r\n          // Prevent typing if cells are selected. (Allow browser refresh using keyboard)\r\n          if (selected_cells.length > 1 && e.which != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n            e.preventDefault()\r\n            selected_cells = []\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        // We may want to select a cell with keyboard.\r\n        else {\r\n\r\n          // Garbage collector.\r\n          selected_cells = []\r\n\r\n          if (_selectCellWithKeyboard(e) === false) return false\r\n        }\r\n      }, true)\r\n\r\n      // Clean selected cells.\r\n      let c_selected_cells = []\r\n      editor.events.on('html.beforeGet', function () {\r\n        c_selected_cells = selectedCells()\r\n\r\n        for (let i = 0; i < c_selected_cells.length; i++) {\r\n          c_selected_cells[i].className = (c_selected_cells[i].className || '').replace(/fr-selected-cell/g, '')\r\n        }\r\n      })\r\n\r\n      editor.events.on('html.afterGet', function () {\r\n        for (let i = 0; i < c_selected_cells.length; i++) {\r\n          c_selected_cells[i].className = (c_selected_cells[i].className ? c_selected_cells[i].className.trim() + ' ' : '') + 'fr-selected-cell'\r\n        }\r\n        c_selected_cells = []\r\n      })\r\n\r\n      _initInsertPopup(true)\r\n      _initEditPopup(true)\r\n    }\r\n\r\n    editor.events.on('destroy', _destroy)\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    insert: insert,\r\n    remove: remove,\r\n    insertRow: insertRow,\r\n    deleteRow: deleteRow,\r\n    insertColumn: insertColumn,\r\n    deleteColumn: deleteColumn,\r\n    mergeCells: mergeCells,\r\n    splitCellVertically: splitCellVertically,\r\n    splitCellHorizontally: splitCellHorizontally,\r\n    addHeader: addHeader,\r\n    removeHeader: removeHeader,\r\n    setBackground: setBackground,\r\n    showInsertPopup: _showInsertPopup,\r\n    showEditPopup: _showEditPopup,\r\n    showColorsPopup: _showColorsPopup,\r\n    back: back,\r\n    verticalAlign: verticalAlign,\r\n    horizontalAlign: horizontalAlign,\r\n    applyStyle: applyStyle,\r\n    selectedTable: selectedTable,\r\n    selectedCells: selectedCells,\r\n    customColor: customColor,\r\n    selectCells: selectCells\r\n  }\r\n}\r\n\r\n// Insert table button.\r\nFE.DefineIcon('insertTable', { NAME: 'table', SVG_KEY: 'insertTable' })\r\nFE.RegisterCommand('insertTable', {\r\n  title: 'Insert Table',\r\n  undo: false,\r\n  focus: true,\r\n  refreshOnCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('table.insert')) {\r\n      this.table.showInsertPopup()\r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur()\r\n        this.selection.restore()\r\n      }\r\n      this.popups.hide('table.insert')\r\n    }\r\n  },\r\n  plugin: 'table'\r\n})\r\n\r\nFE.RegisterCommand('tableInsert', {\r\n  callback: function (cmd, rows, cols) {\r\n    this.table.insert(rows, cols)\r\n    this.popups.hide('table.insert')\r\n  }\r\n})\r\n\r\n// Table header button.\r\nFE.DefineIcon('tableHeader', {\r\n  NAME: 'header',\r\n  FA5NAME: 'heading',\r\n  SVG_KEY: 'tableHeader'\r\n})\r\nFE.RegisterCommand('tableHeader', {\r\n  title: 'Table Header',\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    const $btn = this.popups.get('table.edit').find('.fr-command[data-cmd=\"tableHeader\"]')\r\n\r\n    // If button is active the table has a header,\r\n    if ($btn.hasClass('fr-active')) {\r\n      this.table.removeHeader()\r\n    }\r\n\r\n    // Add table header.\r\n    else {\r\n      this.table.addHeader()\r\n    }\r\n  },\r\n  refresh: function ($btn) {\r\n    const $table = this.table.selectedTable()\r\n\r\n    if ($table.length > 0) {\r\n\r\n      // If table doesn't have a header.\r\n      if ($table.find('th').length === 0) {\r\n        $btn.removeClass('fr-active').attr('aria-pressed', false)\r\n      }\r\n\r\n      // Header button is active if table has header.\r\n      else {\r\n        $btn.addClass('fr-active').attr('aria-pressed', true)\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// Table rows action dropdown.\r\nFE.DefineIcon('tableRows', { NAME: 'bars', SVG_KEY: 'row' })\r\nFE.RegisterCommand('tableRows', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Row',\r\n  options: {\r\n    above: 'Insert row above',\r\n    below: 'Insert row below',\r\n    'delete': 'Delete row'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableRows.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += '<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableRows\" data-param1=\"' + val + '\" title=\"' + this.language.translate(options[val]) + '\">' + this.language.translate(options[val]) + '</a></li>'\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'above' || val == 'below') {\r\n      this.table.insertRow(val)\r\n    }\r\n    else {\r\n      this.table.deleteRow()\r\n    }\r\n  }\r\n})\r\n\r\n// Table columns action dropdown.\r\nFE.DefineIcon('tableColumns', { NAME: 'bars fa-rotate-90', SVG_KEY: 'columns' })\r\nFE.RegisterCommand('tableColumns', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Column',\r\n  options: {\r\n    before: 'Insert column before',\r\n    after: 'Insert column after',\r\n    'delete': 'Delete column'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableColumns.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableColumns\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'before' || val == 'after') {\r\n      this.table.insertColumn(val)\r\n    }\r\n    else {\r\n      this.table.deleteColumn()\r\n    }\r\n  }\r\n})\r\n\r\n// Table cells action dropdown.\r\nFE.DefineIcon('tableCells', {\r\n  NAME: 'square-o',\r\n  FA5NAME: 'square',\r\n  SVG_KEY: 'cellOptions'\r\n})\r\nFE.RegisterCommand('tableCells', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Cell',\r\n  options: {\r\n    merge: 'Merge cells',\r\n    'vertical-split': 'Vertical split',\r\n    'horizontal-split': 'Horizontal split'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCells.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCells\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    if (val == 'merge') {\r\n      this.table.mergeCells()\r\n    }\r\n    else if (val == 'vertical-split') {\r\n      this.table.splitCellVertically()\r\n    }\r\n\r\n    // 'horizontal-split'\r\n    else {\r\n      this.table.splitCellHorizontally()\r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    // More than one cell selected.\r\n    if (this.$el.find('.fr-selected-cell').length > 1) {\r\n      $dropdown.find('a[data-param1=\"vertical-split\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"horizontal-split\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"merge\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n    }\r\n\r\n    // Only one selected cell.\r\n    else {\r\n      $dropdown.find('a[data-param1=\"merge\"]').addClass('fr-disabled').attr('aria-disabled', true)\r\n      $dropdown.find('a[data-param1=\"vertical-split\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n      $dropdown.find('a[data-param1=\"horizontal-split\"]').removeClass('fr-disabled').attr('aria-disabled', false)\r\n    }\r\n  }\r\n})\r\n\r\n// Remove table button.\r\nFE.DefineIcon('tableRemove', { NAME: 'trash', SVG_KEY: 'removeTable' })\r\nFE.RegisterCommand('tableRemove', {\r\n  title: 'Remove Table',\r\n  focus: false,\r\n  callback: function () {\r\n    this.table.remove()\r\n  }\r\n})\r\n\r\n// Table styles.\r\nFE.DefineIcon('tableStyle', { NAME: 'paint-brush', SVG_KEY: 'tableStyle' })\r\nFE.RegisterCommand('tableStyle', {\r\n  title: 'Table Style',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.tableStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.applyStyle(val, this.$el.find('.fr-selected-cell').closest('table'), this.opts.tableMultipleStyles, this.opts.tableStyles)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const $ = this.$\r\n    const $table = this.$el.find('.fr-selected-cell').closest('table')\r\n\r\n    if ($table) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $table.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\n// Table cell background color button.\r\nFE.DefineIcon('tableCellBackground', { NAME: 'tint', SVG_KEY: 'cellBackground' })\r\nFE.RegisterCommand('tableCellBackground', {\r\n  title: 'Cell Background',\r\n  focus: false,\r\n  popup: true,\r\n  callback: function () {\r\n    this.table.showColorsPopup()\r\n  }\r\n})\r\n\r\n// Select table cell background color command.\r\nFE.RegisterCommand('tableCellBackgroundColor', {\r\n  undo: true,\r\n  focus: false,\r\n  callback: function (cmd, val) {\r\n    this.table.setBackground(val)\r\n  }\r\n})\r\n\r\n// Table back.\r\nFE.DefineIcon('tableBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('tableBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.table.back()\r\n  },\r\n  refresh: function ($btn) {\r\n    if (this.table.selectedCells().length === 0 && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden')\r\n      $btn.next('.fr-separator').addClass('fr-hidden')\r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden')\r\n      $btn.next('.fr-separator').removeClass('fr-hidden')\r\n    }\r\n  }\r\n})\r\n\r\n// Table vertical align dropdown.\r\nFE.DefineIcon('tableCellVerticalAlign', {\r\n  NAME: 'arrows-v',\r\n  FA5NAME: 'arrows-alt-v',\r\n  SVG_KEY: 'verticalAlignMiddle'\r\n})\r\nFE.RegisterCommand('tableCellVerticalAlign', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Vertical Align',\r\n  options: {\r\n    Top: 'Align Top',\r\n    Middle: 'Align Middle',\r\n    Bottom: 'Align Bottom'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCellVerticalAlign.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellVerticalAlign\" data-param1=\"${val.toLowerCase()}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(val)}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.verticalAlign(val)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    $dropdown.find('.fr-command[data-param1=\"' + this.$el.find('.fr-selected-cell').css('vertical-align') + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n})\r\n\r\n// Table horizontal align dropdown.\r\nFE.DefineIcon('tableCellHorizontalAlign', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('align-center', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.DefineIcon('align-justify', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\nFE.RegisterCommand('tableCellHorizontalAlign', {\r\n  type: 'dropdown',\r\n  focus: false,\r\n  title: 'Horizontal Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'Align Center',\r\n    right: 'Align Right',\r\n    justify: 'Align Justify'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = FE.COMMANDS.tableCellHorizontalAlign.options\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellHorizontalAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.horizontalAlign(val)\r\n  },\r\n  refresh: function ($btn) {\r\n    const selected_cells = this.table.selectedCells()\r\n    const $ = this.$\r\n    if (selected_cells.length) {\r\n      $btn.find('> *').first().replaceWith(this.icon.create(`align-${this.helpers.getAlignment($(selected_cells[0]))}`))\r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    $dropdown.find('.fr-command[data-param1=\"' + this.helpers.getAlignment(this.$el.find('.fr-selected-cell').first()) + '\"]').addClass('fr-active').attr('aria-selected', true)\r\n  }\r\n})\r\n\r\n// Table cell styles.\r\nFE.DefineIcon('tableCellStyle', { NAME: 'magic', SVG_KEY: 'cellStyle' })\r\nFE.RegisterCommand('tableCellStyle', {\r\n  title: 'Cell Style',\r\n  type: 'dropdown',\r\n  focus: false,\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\r\n    const options = this.opts.tableCellStyles\r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"tableCellStyle\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.language.translate(options[val])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>'\r\n\r\n    return c\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.table.applyStyle(val, this.$el.find('.fr-selected-cell'), this.opts.tableCellMultipleStyles, this.opts.tableCellStyles)\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n\r\n    const $ = this.$\r\n    const $cell = this.$el.find('.fr-selected-cell').first()\r\n\r\n    if ($cell) {\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1')\r\n        const active = $cell.hasClass(cls)\r\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active)\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\nFE.RegisterCommand('tableCellBackgroundCustomColor', {\r\n  title: 'OK',\r\n  undo: true,\r\n  callback: function () {\r\n    this.table.customColor()\r\n  }\r\n})\r\n\r\nFE.DefineIcon('tableColorRemove', { NAME: 'eraser', SVG_KEY: 'remove' })\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nFE.URLRegEx = `(^| |\\\\u00A0)(${FE.LinkRegEx}|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\\\.[a-z0-9+\\-_]{1,}))$`\r\n\r\nFE.PLUGINS.url = function (editor) {\r\n\r\n  const { $ } = editor\r\n  let rel = null \r\n\r\n  /*\r\n   * Transform string into a hyperlink.\r\n   */\r\n  function _linkReplaceHandler(match, p1, p2) {\r\n    let dots = '' \r\n\r\n    while (p2.length && p2[p2.length - 1] == '.') {\r\n      dots += '.' \r\n      p2 = p2.substring(0, p2.length - 1) \r\n    }\r\n\r\n    let link = p2 \r\n\r\n    // Convert email.\r\n    if (editor.opts.linkConvertEmailAddress) {\r\n      if (editor.helpers.isEmail(link) && !/^mailto:.*/i.test(link)) {\r\n        link = `mailto:${link}` \r\n      }\r\n    }\r\n    else if (editor.helpers.isEmail(link)) {\r\n      return p1 + p2 \r\n    }\r\n\r\n    if (!/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\\:)/i.test(link)) {\r\n      link = `//${link}` \r\n    }\r\n\r\n    return (p1 ? p1 : '') + `<a${(editor.opts.linkAlwaysBlank ? ' target=\"_blank\"' : '')}${(rel ? (` rel=\"${rel}\"`) : '')} data-fr-linked=\"true\" href=\"${link}\">${p2.replace(/&amp;/g, '&').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}</a>${dots}`\r\n  }\r\n\r\n  const _getRegEx = () => new RegExp(FE.URLRegEx, 'gi')\r\n\r\n  /*\r\n   * Convert link paterns from html into hyperlinks.\r\n   */\r\n  function _convertToLink(html) {\r\n\r\n    if (editor.opts.linkAlwaysNoFollow) {\r\n      rel = 'nofollow' \r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1576.\r\n    if (editor.opts.linkAlwaysBlank) {\r\n      if (editor.opts.linkNoOpener) {\r\n        if (!rel) rel = 'noopener' \r\n        else rel += ' noopener' \r\n      }\r\n\r\n      if (editor.opts.linkNoReferrer) {\r\n        if (!rel) rel = 'noreferrer' \r\n        else rel += ' noreferrer' \r\n      }\r\n    }\r\n\r\n    return html.replace(_getRegEx(), _linkReplaceHandler) \r\n  }\r\n\r\n  function _isA(node) {\r\n    if (!node) return false \r\n\r\n    if (node.tagName === 'A') return true \r\n\r\n    if (node.parentNode && node.parentNode != editor.el) return _isA(node.parentNode) \r\n\r\n    return false \r\n  }\r\n\r\n  function _lastPart(text) {\r\n    const splits = text.split(' ') \r\n\r\n    return splits[splits.length - 1] \r\n  }\r\n\r\n  function _inlineType() {\r\n    const range = editor.selection.ranges(0) \r\n    const { startContainer : node } = range \r\n\r\n    if (!node || node.nodeType !== Node.TEXT_NODE || range.startOffset !== (node.textContent || '').length) return false \r\n\r\n    if (_isA(node)) return false \r\n\r\n    if (_getRegEx().test(_lastPart(node.textContent))) {\r\n      $(node).before(_convertToLink(node.textContent)) \r\n\r\n      // Get linked link.\r\n      const $link = $(node.parentNode).find('a[data-fr-linked]') \r\n      $link.removeAttr('data-fr-linked') \r\n\r\n      node.parentNode.removeChild(node) \r\n\r\n      // Trigger link event.\r\n      editor.events.trigger('url.linked', [$link.get(0)]) \r\n    }\r\n    else if (node.textContent.split(' ').length <= 2 && node.previousSibling && node.previousSibling.tagName === 'A') {\r\n      const text = node.previousSibling.innerText + node.textContent \r\n\r\n      if (_getRegEx().test(_lastPart(text))) {\r\n        /**\r\n         * Using DOMParser to parse and get the nodes from string data and replacing respective nodes in existing DOM.\r\n         */\r\n        const domParser = new DOMParser()\r\n        const childNodes = domParser.parseFromString(_convertToLink(text), 'text/html').body.childNodes\r\n\r\n        node.parentNode.replaceChild(childNodes[0], node.previousSibling)\r\n\r\n        //replacechild will change reference to the node so checking for length\r\n        if (childNodes.length) {\r\n          $(node).before(childNodes[0])\r\n        }\r\n\r\n        node.parentNode.removeChild(node)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    // Handle special keys.\r\n    editor.events.on('keypress', function (e) {\r\n      if (editor.selection.isCollapsed() && (e.key == '.' || e.key == ')' || e.key == '(')) {\r\n        _inlineType() \r\n      }\r\n    }, true) \r\n\r\n    // Handle ENTER and SPACE.\r\n    editor.events.on('keydown', function (e) {\r\n      const { which : keycode } = e \r\n\r\n      if (editor.selection.isCollapsed() && (keycode == FE.KEYCODE.ENTER || keycode == FE.KEYCODE.SPACE)) {\r\n        _inlineType() \r\n      }\r\n    }, true) \r\n\r\n    // Handle pasting.\r\n    editor.events.on('paste.beforeCleanup', function (html) {\r\n      if (editor.helpers.isURL(html)) {\r\n        let rel_attr = null \r\n\r\n        if (editor.opts.linkAlwaysBlank) {\r\n          if (editor.opts.linkNoOpener) {\r\n            if (!rel_attr) rel_attr = 'noopener' \r\n            else rel_attr += ' noopener' \r\n          }\r\n\r\n          if (editor.opts.linkNoReferrer) {\r\n            if (!rel_attr) rel_attr = 'noreferrer' \r\n            else rel_attr += ' noreferrer' \r\n          }\r\n        }\r\n\r\n        return `<a${(editor.opts.linkAlwaysBlank ? ' target=\"_blank\"' : '')}${(rel_attr ? (` rel=\"${rel_attr}\"`) : '')} href=\"${html}\" >${html}</a>` \r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init\r\n  }\r\n}\r\n","import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'video.insert': '[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]',\r\n  'video.edit': '[_BUTTONS_]',\r\n  'video.size': '[_BUTTONS_][_SIZE_LAYER_]'\r\n})\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  videoAllowedTypes: ['mp4', 'webm', 'ogg', 'mp3', 'mpeg', 'url'],\r\n  videoAllowedProviders: ['.*'],\r\n  videoDefaultAlign: 'center',\r\n  videoDefaultDisplay: 'block',\r\n  videoDefaultWidth: 600,\r\n  videoEditButtons: ['videoReplace', 'videoRemove', 'videoDisplay', 'videoAlign', 'videoSize','autoplay'],\r\n  videoInsertButtons: ['videoBack', '|', 'videoByURL', 'videoEmbed', 'videoUpload'],\r\n  videoMaxSize: 50 * 1024 * 1024,\r\n  videoMove: true,\r\n  videoResize: true,\r\n  videoResponsive: false,\r\n  videoSizeButtons: ['videoBack', '|'],\r\n  videoSplitHTML: false,\r\n  videoTextNear: true,\r\n  videoUpload: true,\r\n  videoUploadMethod: 'POST',\r\n  videoUploadParam: 'file',\r\n  videoUploadParams: {},\r\n  videoUploadToS3: false,\r\n  videoUploadToAzure: false,\r\n  videoUploadURL: null\r\n}) \r\n\r\nFE.VIDEO_PROVIDERS = [\r\n  {\r\n    test_regex: /^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,\r\n    url_text: 'https://www.youtube.com/embed/$1?$2',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque&rel=0\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'youtube'\r\n  },\r\n  {\r\n    test_regex: /^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/​\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,\r\n    url_text: 'https://player.vimeo.com/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vimeo'\r\n  },\r\n  {\r\n    test_regex: /^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,\r\n    url_text: 'https://www.dailymotion.com/embed/video/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'dailymotion'\r\n  },\r\n  {\r\n    test_regex: /^.+(screen.yahoo.com)\\/[^_&]+/,\r\n    url_regex: '',\r\n    url_text: '',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'yahoo'\r\n  },\r\n  {\r\n    test_regex: /^.+(rutube.ru)\\/[^_&]+/,\r\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,\r\n    url_text: 'https://rutube.ru/play/embed/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\r\n    provider: 'rutube'\r\n  },\r\n  {\r\n    test_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,\r\n    url_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,\r\n    url_text: 'https://play.vidyard.com/$1',\r\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    provider: 'vidyard'\r\n  }\r\n] \r\n\r\nFE.VIDEO_EMBED_REGEX = /^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i \r\n\r\nFE.PLUGINS.video = function (editor) {\r\n  const { $ } = editor;\r\n  const DEFAULT_VIDEO_UPLOAD_URL = 'https://i.froala.com/upload'\r\n\r\n  let $overlay \r\n  let $handler \r\n  let $video_resizer \r\n  let $current_video \r\n\r\n  const BAD_LINK = 1 \r\n  const MISSING_LINK = 2 \r\n  const ERROR_DURING_UPLOAD = 3 \r\n  const BAD_RESPONSE = 4 \r\n  const MAX_SIZE_EXCEEDED = 5 \r\n  const BAD_FILE_TYPE = 6 \r\n  const NO_CORS_IE = 7 \r\n\r\n  const error_messages = {} \r\n  error_messages[BAD_LINK] = 'Video cannot be loaded from the passed link.',\r\n  error_messages[MISSING_LINK] = 'No link in upload response.',\r\n  error_messages[ERROR_DURING_UPLOAD] = 'Error during file upload.',\r\n  error_messages[BAD_RESPONSE] = 'Parsing response failed.',\r\n  error_messages[MAX_SIZE_EXCEEDED] = 'File is too large.',\r\n  error_messages[BAD_FILE_TYPE] = 'Video file type is invalid.',\r\n  error_messages[NO_CORS_IE] = 'Files can be uploaded only to same domain in IE 8 and IE 9.'\r\n\r\n  /**\r\n   * Refresh the video insert popup.\r\n   */\r\n  function _refreshInsertPopup() {\r\n    const $popup = editor.popups.get('video.insert') \r\n    const $url_input = $popup.find('.fr-video-by-url-layer input') \r\n    $url_input.val('').trigger('change') \r\n\r\n    let $embed_area = $popup.find('.fr-video-embed-layer textarea') \r\n    $embed_area.val('').trigger('change') \r\n\r\n    $embed_area = $popup.find('.fr-video-upload-layer input') \r\n    $embed_area.val('').trigger('change') \r\n  }\r\n\r\n  /**\r\n   * Show the video insert popup.\r\n   */\r\n  function showInsertPopup() {\r\n    const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertVideo\"]') \r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    hideProgressBar() \r\n\r\n    if (!$popup.hasClass('fr-active')) {\r\n      editor.popups.refresh('video.insert') \r\n      editor.popups.setContainer('video.insert', editor.$tb) \r\n\r\n      if ($btn.isVisible()) {\r\n        const { left, top } = editor.button.getPosition($btn)\r\n        editor.popups.show('video.insert', left, top, $btn.outerHeight()) \r\n      }\r\n      else {\r\n        editor.position.forSelection($popup) \r\n        editor.popups.show('video.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the video edit popup.\r\n   */\r\n  function _showEditPopup() {\r\n    let $popup = editor.popups.get('video.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    if ($popup) {\r\n      editor.popups.setContainer('video.edit', editor.$sc) \r\n      editor.popups.refresh('video.edit') \r\n\r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      const left = $video_obj.offset().left + $video_obj.outerWidth() / 2\r\n      const top = $video_obj.offset().top + $video_obj.outerHeight()\r\n      let iframeURL =  $video_obj.get(0).src ?  $video_obj.get(0).src : null\r\n      iframeURL = iframeURL.split('.')\r\n      iframeURL = iframeURL[iframeURL.length-1]\r\n      let isFile = (iframeURL.includes('pdf') || iframeURL.includes('txt')) ? true : false\r\n      if($video_obj.hasClass('fr-file') || isFile || $current_video.find(`audio`).get(0))\r\n      {        \r\n        if(document.getElementById(`autoplay-${editor.id}`))\r\n          document.getElementById(`autoplay-${editor.id}`).style.display = 'none'\r\n        if(document.getElementById(`videoReplace-${editor.id}`))\r\n          document.getElementById(`videoReplace-${editor.id}`).style.display = 'none'\r\n      } else{\r\n        document.getElementById(`autoplay-${editor.id}`).style.display = ''\r\n        document.getElementById(`videoReplace-${editor.id}`).style.display = ''\r\n      }\r\n      editor.popups.show('video.edit', left, top, $video_obj.outerHeight(), true) \r\n    }\r\n  }\r\n\r\n  function _initInsertPopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('video.insert', _refreshInsertPopup) \r\n      editor.popups.onHide('video.insert', _hideInsertPopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n\r\n    if (!editor.opts.videoUpload  && editor.opts.videoInsertButtons.indexOf('videoUpload') !== -1) {\r\n      editor.opts.videoInsertButtons.splice(editor.opts.videoInsertButtons.indexOf('videoUpload'), 1) \r\n    }\r\n\r\n    const buttonList = editor.button.buildList(editor.opts.videoInsertButtons);\r\n\r\n    if (buttonList !== '') {\r\n      video_buttons = '<div class=\"fr-buttons\">' + buttonList + '</div>';\r\n    }\r\n\r\n    // Video by url layer.\r\n    let by_url_layer = '' \r\n\r\n    const uploadIndex = editor.opts.videoInsertButtons.indexOf('videoUpload') \r\n    const urlIndex = editor.opts.videoInsertButtons.indexOf('videoByURL') \r\n    const embedIndex = editor.opts.videoInsertButtons.indexOf('videoEmbed') \r\n\r\n    let active \r\n\r\n    if (urlIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((urlIndex > uploadIndex && uploadIndex >= 0) || (urlIndex > embedIndex && embedIndex >= 0)) {\r\n        active = ''\r\n      }\r\n      const checkmark = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" fill=\"#FFF\"></path></svg>' \r\n\r\n      by_url_layer = `<div class=\"fr-video-by-url-layer fr-layer${active}\" id=\"fr-video-by-url-layer-${editor.id}\"><div class=\"fr-input-line\"><input id=\"fr-video-by-url-layer-text-${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Paste in a video URL')}\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><span style='float:left'><div class=\"fr-checkbox-line fr-autoplay-margin\"><span class=\"fr-checkbox\"> <input id='videoPluginAutoplay' data-checked=\"_blank\" type=\"checkbox\"> <span>${checkmark}</span></span> <label id=\"fr-label-target-${editor.id}\">Autoplay</label></div> </span><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertByURL\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Video embed layer.\r\n    let embed_layer = '' \r\n\r\n    if (embedIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((embedIndex > uploadIndex && uploadIndex >= 0) || (embedIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n      embed_layer = `<div class=\"fr-video-embed-layer fr-layer${active}\" id=\"fr-video-embed-layer-${editor.id}\"><div class=\"fr-input-line\"><textarea id=\"fr-video-embed-layer-text${editor.id}\" type=\"text\" placeholder=\"${editor.language.translate('Embedded Code')}\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertEmbed\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Insert')}</button></div></div>`\r\n    }\r\n\r\n    // Video upload layer.\r\n    let upload_layer = '' \r\n\r\n    if (uploadIndex >= 0) {\r\n      active = ' fr-active' \r\n\r\n      if ((uploadIndex > embedIndex && embedIndex >= 0) || (uploadIndex > urlIndex && urlIndex >= 0)) {\r\n        active = ''\r\n      }\r\n\r\n      upload_layer = `<div class=\"fr-video-upload-layer fr-layer${active}\" id=\"fr-video-upload-layer-${editor.id}\"><strong>${editor.language.translate('Drop video')}</strong><br>(${editor.language.translate('or click')})<div class=\"fr-form\"><input type=\"file\" accept=\"video/${editor.opts.videoAllowedTypes.join(', video/').toLowerCase()}\" tabIndex=\"-1\" aria-labelledby=\"fr-video-upload-layer-${editor.id}\" role=\"button\"></div></div>`\r\n    }\r\n\r\n    // Progress bar.\r\n    const progress_bar_layer = `<div class=\"fr-video-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"videoDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>`\r\n\r\n\r\n    const template = {\r\n      buttons: video_buttons,\r\n      by_url_layer: by_url_layer,\r\n      embed_layer: embed_layer,\r\n      upload_layer: upload_layer,\r\n      progress_bar: progress_bar_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('video.insert', template) \r\n\r\n    _bindInsertEvents($popup) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the video upload layer.\r\n   */\r\n  function showLayer(name) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    let left \r\n    let top \r\n\r\n    if (!$current_video && !editor.opts.toolbarInline) {\r\n      const $btn = editor.$tb.find('.fr-command[data-cmd=\"insertVideo\"]') \r\n      left = $btn.offset().left \r\n      top = $btn.offset().top + (editor.opts.toolbarBottom ? 10 : $btn.outerHeight() - 10) \r\n    }\r\n\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Set top to the popup top.\r\n      top = $popup.offset().top - editor.helpers.getPX($popup.css('margin-top')) \r\n\r\n      // If the popup is above apply height correction.\r\n      if ($popup.hasClass('fr-above')) {\r\n        top += $popup.outerHeight() \r\n      }\r\n    }\r\n\r\n    // Show the new layer.\r\n    $popup.find('.fr-layer').removeClass('fr-active') \r\n    $popup.find(`.fr-${name}-layer`).addClass('fr-active') \r\n    editor.popups.show('video.insert', left, top, 0) \r\n    editor.accessibility.focusPopup($popup) \r\n  }\r\n\r\n  /**\r\n   * Refresh the insert by url button.\r\n   */\r\n  function refreshByURLButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-by-url-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert embed button.\r\n   */\r\n  function refreshEmbedButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-embed-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the insert upload button.\r\n   */\r\n  function refreshUploadButton($btn) {\r\n    const $popup = editor.popups.get('video.insert') \r\n    if ($popup && $popup.find('.fr-video-upload-layer').hasClass('fr-active')) {\r\n      $btn.addClass('fr-active').attr('aria-pressed', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert video embedded object.\r\n   */\r\n  function insert(embedded_code) {\r\n\r\n    // Make sure we have focus.\r\n    editor.events.focus(true) \r\n    editor.selection.restore() \r\n\r\n    // Flag to tell if the video is replaced.\r\n    let replaced = false \r\n\r\n    // If current video found we have to replace it.\r\n    if ($current_video) {\r\n\r\n      // Remove the old video.\r\n      remove() \r\n\r\n      // Mark that the video is replaced.\r\n      replaced = true \r\n    }\r\n\r\n    editor.html.insert(`<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video fr-deletable\">${embedded_code}</span>`, false, editor.opts.videoSplitHTML) \r\n\r\n    editor.popups.hide('video.insert') \r\n\r\n    const $video = editor.$el.find('.fr-jiv') \r\n    $video.removeClass('fr-jiv') \r\n    $video.toggleClass('fr-rv', editor.opts.videoResponsive) \r\n\r\n    _setStyle($video, editor.opts.videoDefaultDisplay, editor.opts.videoDefaultAlign) \r\n\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n    editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video]) \r\n  }\r\n\r\n  function _loadedCallback() {\r\n    const $video = $(this) \r\n\r\n    editor.popups.hide('video.insert') \r\n\r\n    $video.removeClass('fr-uploading') \r\n\r\n    // Select the video.\r\n    if ($video.parent().next().is('br')) {\r\n      $video.parent().next().remove() \r\n    }\r\n\r\n    _editVideo($video.parent()) \r\n\r\n    editor.events.trigger('video.loaded', [$video.parent()]) \r\n  }\r\n\r\n  /**\r\n   * Insert html video into the editor.\r\n   */\r\n\r\n  function insertHtmlVideo(link, sanitize, data, $existing_video, response) {\r\n    editor.edit.off() \r\n    _setProgressMessage('Loading video') \r\n\r\n    if (sanitize) link = editor.helpers.sanitizeURL(link) \r\n\r\n    const _add = function () {\r\n      let $video \r\n      let attr \r\n\r\n      if ($existing_video) {\r\n        if (!editor.undo.canDo() && !$existing_video.find('video').hasClass('fr-uploading')) editor.undo.saveStep() \r\n\r\n        const old_src = $existing_video.find('video').data('fr-old-src') \r\n\r\n        const replaced = $existing_video.data('fr-replaced') \r\n        $existing_video.data('fr-replaced', false) \r\n\r\n        if (editor.$wp) {\r\n\r\n          // Clone existing video.\r\n          $video = $existing_video.clone(true) \r\n          $video.find('video').removeData('fr-old-src').removeClass('fr-uploading') \r\n\r\n          // Remove load event.\r\n          $video.find('video').off('canplay') \r\n\r\n          // Set new SRC.\r\n          if (old_src) $existing_video.find('video').attr('src', old_src) \r\n\r\n          // Replace existing video with its clone.\r\n          $existing_video.replaceWith($video) \r\n        }\r\n        else {\r\n          $video = $existing_video \r\n        }\r\n\r\n        // Remove old data.\r\n        const atts = $video.find('video').get(0).attributes \r\n\r\n        for (let i = 0; i < atts.length; i++) {\r\n          const att = atts[i] \r\n\r\n          if (att.nodeName.indexOf('data-') === 0) {\r\n            $video.find('video').removeAttr(att.nodeName) \r\n          }\r\n        }\r\n\r\n        // Set new data.\r\n        if (typeof data != 'undefined') {\r\n          for (attr in data) {\r\n            if (data.hasOwnProperty(attr)) {\r\n              if (attr != 'link') {\r\n                $video.find('video').attr(`data-${attr}`, data[attr]) \r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        $video.find('video').on('canplay', _loadedCallback) \r\n        $video.find('video').attr('src', link) \r\n        editor.edit.on() \r\n        _syncVideos() \r\n        editor.undo.saveStep() \r\n\r\n        // Cursor will not appear if we don't make blur.\r\n        editor.$el.blur() \r\n\r\n        editor.events.trigger(replaced ? 'video.replaced' : 'video.inserted', [$video, response]) \r\n      }\r\n      else {\r\n        $video = _addVideo(link, data, _loadedCallback) \r\n        _syncVideos() \r\n        editor.undo.saveStep() \r\n        editor.events.trigger('video.inserted', [$video, response]) \r\n      }\r\n    }\r\n\r\n    showProgressBar('Loading video') \r\n\r\n    _add() \r\n  }\r\n\r\n  /**\r\n   * Show progress bar.\r\n   */\r\n\r\n  function showProgressBar(no_message) {\r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    $popup.find('.fr-layer.fr-active').removeClass('fr-active').addClass('fr-pactive') \r\n    $popup.find('.fr-video-progress-bar-layer').addClass('fr-active') \r\n    $popup.find('.fr-buttons').hide() \r\n\r\n    if ($current_video) {\r\n      const $current_video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      editor.popups.setContainer('video.insert', editor.$sc) \r\n      const left = $current_video_obj.offset().left\r\n      const top = $current_video_obj.offset().top + $current_video_obj.height()\r\n\r\n      editor.popups.show('video.insert', left, top, $current_video_obj.outerHeight()) \r\n    }\r\n\r\n    if (typeof no_message == 'undefined') {\r\n      _setProgressMessage(editor.language.translate('Uploading'), 0) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide progress bar.\r\n   */\r\n  function hideProgressBar(dismiss) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    if ($popup) {\r\n      $popup.find('.fr-layer.fr-pactive').addClass('fr-active').removeClass('fr-pactive') \r\n      $popup.find('.fr-video-progress-bar-layer').removeClass('fr-active') \r\n      $popup.find('.fr-buttons').show() \r\n\r\n      // Dismiss error message.\r\n      if (dismiss || editor.$el.find('video.fr-error').length) {\r\n        editor.events.focus() \r\n\r\n        if (editor.$el.find('video.fr-error').length) {\r\n          editor.$el.find('video.fr-error').parent().remove() \r\n          editor.undo.saveStep() \r\n          editor.undo.run() \r\n          editor.undo.dropRedo() \r\n        }\r\n\r\n        if (!editor.$wp && $current_video) {\r\n          const $video = $current_video \r\n          _exitEdit(true) \r\n          editor.selection.setAfter($video.find('video').get(0)) \r\n          editor.selection.restore() \r\n        }\r\n        editor.popups.hide('video.insert') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set a progress message.\r\n   */\r\n\r\n  function _setProgressMessage(message, progress) {\r\n    const $popup = editor.popups.get('video.insert') \r\n\r\n    if ($popup) {\r\n      const $layer = $popup.find('.fr-video-progress-bar-layer') \r\n      $layer.find('h3').text(message + (progress ? ` ${progress}%` : '')) \r\n\r\n      $layer.removeClass('fr-error') \r\n\r\n      if (progress) {\r\n        $layer.find('div').removeClass('fr-indeterminate') \r\n        $layer.find('div > span').css('width', `${progress}%`) \r\n      }\r\n      else {\r\n        $layer.find('div').addClass('fr-indeterminate') \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show error message to the user.\r\n   */\r\n\r\n  function _showErrorMessage(message) {\r\n    showProgressBar() \r\n    const $popup = editor.popups.get('video.insert') \r\n    const $layer = $popup.find('.fr-video-progress-bar-layer') \r\n    $layer.addClass('fr-error') \r\n    const $message_header = $layer.find('h3') \r\n    $message_header.text(message) \r\n    editor.events.disableBlur() \r\n    $message_header.focus() \r\n  }\r\n\r\n  /**\r\n   * Insert video by URL.\r\n   */\r\n  function insertByURL(link) {   \r\n    let autoPlayFlag = document.getElementById('videoPluginAutoplay') ? document.getElementById('videoPluginAutoplay').checked : false\r\n    if (typeof link == 'undefined') {\r\n      const $popup = editor.popups.get('video.insert') \r\n      link = ($popup.find('.fr-video-by-url-layer input[type=\"text\"]').val() || '').trim() \r\n    }\r\n\r\n    let video = null \r\n\r\n    if (!/^http/.test(link)) {\r\n      link = `https://${link}` \r\n    }\r\n\r\n    if (editor.helpers.isURL(link)) {\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        let vp = FE.VIDEO_PROVIDERS[i] \r\n        const addAutoplay = \"autoplay=1\";\r\n        if (vp.html.includes('autoplay=1') && (document.getElementById('videoPluginAutoplay').checked)){\r\n          vp.html=vp.html\r\n          document.getElementById('videoPluginAutoplay').checked=false       \r\n        }\r\n       else if(autoPlayFlag){\r\n          let indexofAutoplay=vp.html.indexOf('{url}') + 5\r\n           vp.html = [vp.html.slice(0, indexofAutoplay), addAutoplay, vp.html.slice(indexofAutoplay)].join('');        \r\n            autoPlayFlag=false\r\n           document.getElementById('videoPluginAutoplay').checked=false\r\n          }\r\n          else{\r\n            vp = FE.VIDEO_PROVIDERS[i] \r\n            vp.html= vp.html.replace(addAutoplay,'')\r\n          }\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n          video = link.replace(vp.url_regex, vp.url_text) \r\n          video = vp.html.replace(/\\{url\\}/, video) \r\n          break \r\n        }\r\n      }\r\n    }\r\n\r\n    if (video) {\r\n      insert(video) \r\n    }\r\n    else {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      editor.events.trigger('video.linkError', [link]) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert embedded video.\r\n   */\r\n  function insertEmbed(code) {\r\n    if (typeof code == 'undefined') {\r\n      const $popup = editor.popups.get('video.insert') \r\n      code = $popup.find('.fr-video-embed-layer textarea').val() || '' \r\n    }\r\n\r\n    if (code.length === 0 || !FE.VIDEO_EMBED_REGEX.test(code)) {\r\n      _showErrorMessage(editor.language.translate('Something went wrong. Please try again.'));\r\n      editor.events.trigger('video.codeError', [code]) \r\n    }\r\n    else {\r\n      insert(code) \r\n    }\r\n  }\r\n\r\n  function _editVideo($video) {\r\n    _edit.call($video.get(0)) \r\n  }\r\n\r\n  /**\r\n   * Parse video response.\r\n   */\r\n\r\n  function _parseResponse(response) {\r\n    try {\r\n      if (editor.events.trigger('video.uploaded', [response], true) === false) {\r\n        editor.edit.on() \r\n\r\n        return false \r\n      }\r\n\r\n      const resp = JSON.parse(response) \r\n\r\n      if (resp.link) {\r\n\r\n        return resp \r\n      }\r\n      else {\r\n\r\n        // No link in upload request.\r\n        _throwError(MISSING_LINK, response) \r\n\r\n        return false \r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response) \r\n\r\n      return false \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse video response.\r\n   */\r\n\r\n  function _parseXMLResponse(response) {\r\n    try {\r\n      const link = $(response).find('Location').text() \r\n      const key = $(response).find('Key').text() \r\n\r\n      if (editor.events.trigger('video.uploadedToS3', [link, key, response], true) === false) {\r\n        editor.edit.on() \r\n\r\n        return false \r\n      }\r\n\r\n      return link \r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response) \r\n\r\n      return false \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video was uploaded to the server and we have a response.\r\n   */\r\n\r\n  function _videoUploaded($video, url, key) {\r\n    _setProgressMessage('Loading video') \r\n\r\n    const { status } = this\r\n    const { response } = this \r\n    const { responseXML } = this \r\n    const { responseText } = this \r\n\r\n    try {\r\n      if (editor.opts.videoUploadToS3 || editor.opts.videoUploadToAzure) {\r\n        if (status == 201) {\r\n          let link\r\n          if(editor.opts.videoUploadToAzure) {\r\n            if (editor.events.trigger('video.uploadedToAzure', [this.responseURL, key, response], true) === false) {\r\n              editor.edit.on()\r\n              return false\r\n            }\r\n            link = url\r\n          } else {\r\n            link = _parseXMLResponse(responseXML)\r\n          } \r\n\r\n          if (link) {\r\n            insertHtmlVideo(link, false, [], $video, response || responseXML) \r\n          }\r\n        }\r\n        else {\r\n          _throwError(BAD_RESPONSE, response || responseXML) \r\n        }\r\n      }\r\n      else {\r\n        if (status >= 200 && status < 300) {\r\n          const resp = _parseResponse(responseText) \r\n\r\n          if (resp) {\r\n            insertHtmlVideo(resp.link, false, resp, $video, response || responseText) \r\n          }\r\n        }\r\n        else {\r\n          _throwError(ERROR_DURING_UPLOAD, response || responseText) \r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n\r\n      // Bad response.\r\n      _throwError(BAD_RESPONSE, response || responseText) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video upload error.\r\n   */\r\n\r\n  function _videoUploadError() {\r\n    _throwError(BAD_RESPONSE, this.response || this.responseText || this.responseXML) \r\n  }\r\n\r\n  /**\r\n   * Video upload progress.\r\n   */\r\n\r\n  function _videoUploadProgress(e) {\r\n    if (e.lengthComputable) {\r\n      const complete = (e.loaded / e.total * 100 | 0) \r\n      _setProgressMessage(editor.language.translate('Uploading'), complete) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video upload aborted.\r\n   */\r\n  function _videoUploadAborted() {\r\n    editor.edit.on() \r\n    hideProgressBar(true) \r\n  }\r\n\r\n  function _addVideo(link, data, loadCallback) {\r\n\r\n    // Build video data string.\r\n    let data_str = '' \r\n    let attr \r\n\r\n    if (data && typeof data != 'undefined') {\r\n      for (attr in data) {\r\n        if (data.hasOwnProperty(attr)) {\r\n          if (attr != 'link') {\r\n            data_str += ` data-${attr}=\"${data[attr]}\"`\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let { videoDefaultWidth : width } = editor.opts \r\n\r\n    if (width && width != 'auto') {\r\n      width = `${width}px` \r\n    }\r\n\r\n    // Create video object and set the load event.\r\n    const $video = $(document.createElement('span')).attr('contenteditable', 'false').attr('draggable', 'true').attr('class', 'fr-video fr-dv' + (editor.opts.videoDefaultDisplay[0]) + (editor.opts.videoDefaultAlign != 'center' ? ' fr-fv' + editor.opts.videoDefaultAlign[0] : '')).html('<video src=\"' + link + '\" ' + data_str + (width ? ' style=\"width: ' + width + ';\" ' : '') + ' controls>' + editor.language.translate('Your browser does not support HTML5 video.') + '</video>')\r\n    $video.toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n    // Make sure we have focus.\r\n    // Call the event.\r\n    editor.edit.on() \r\n    editor.events.focus(true) \r\n    editor.selection.restore() \r\n\r\n    editor.undo.saveStep() \r\n\r\n    // Insert marker and then replace it with the video.\r\n    if (editor.opts.videoSplitHTML) {\r\n      editor.markers.split() \r\n    }\r\n    else {\r\n      editor.markers.insert() \r\n    }\r\n\r\n    editor.html.wrap() \r\n    const $marker = editor.$el.find('.fr-marker') \r\n\r\n    // Do not insert video inside emoticon.\r\n    if (editor.node.isLastSibling($marker) && $marker.parent().hasClass('fr-deletable')) {\r\n\r\n      $marker.insertAfter($marker.parent()) \r\n    }\r\n\r\n    $marker.replaceWith($video) \r\n\r\n    editor.selection.clear() \r\n\r\n    if ($video.find('video').get(0).readyState > $video.find('video').get(0).HAVE_FUTURE_DATA || editor.helpers.isIOS()) {\r\n      loadCallback.call($video.find('video').get(0)) \r\n    }\r\n    else {\r\n      $video.find('video').on('canplaythrough load', loadCallback) \r\n    }\r\n\r\n    return $video \r\n  }\r\n\r\n  /**\r\n   * Mouse down to start resize.\r\n   */\r\n  function _handlerMousedown(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    e.preventDefault() \r\n    e.stopPropagation() \r\n\r\n    let c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null) \r\n    let c_y = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null) \r\n\r\n    if (!c_x || !c_y) {\r\n\r\n      return false \r\n    }\r\n\r\n    // Only on mousedown. This function could be called from keydown on accessibility.\r\n    if (e.type == 'mousedown') {\r\n\r\n      // See if the entire editor is inside iframe to adjust starting offsets.\r\n      const oel = editor.$oel.get(0) \r\n      const { ownerDocument : doc } = oel \r\n      const win = doc.defaultView || doc.parentWindow \r\n      let editor_inside_iframe = false \r\n\r\n      try {\r\n        editor_inside_iframe = (win.location != win.parent.location && !(win.$ && win.$.FE)) \r\n      }\r\n      catch (ex) {\r\n      }\r\n\r\n      if (editor_inside_iframe && win.frameElement) {\r\n        c_x += editor.helpers.getPX($(win.frameElement).offset().left) + win.frameElement.clientLeft \r\n\r\n        // Override c_y with clientY attribute.\r\n        c_y = e.clientY + editor.helpers.getPX($(win.frameElement).offset().top) + win.frameElement.clientTop \r\n      }\r\n    }\r\n\r\n    if (!editor.undo.canDo()) editor.undo.saveStep() \r\n\r\n    $handler = $(this) \r\n    $handler.data('start-x', c_x) \r\n    $handler.data('start-y', c_y) \r\n    $overlay.show() \r\n    editor.popups.hideAll() \r\n\r\n    _unmarkExit() \r\n  }\r\n\r\n  /**\r\n   * Do resize.\r\n   */\r\n  function _handlerMousemove(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    if ($handler) {\r\n      e.preventDefault()\r\n\r\n      const c_x = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null) \r\n      const c_y = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null) \r\n\r\n      if (!c_x || !c_y) {\r\n\r\n        return false \r\n      }\r\n\r\n      const s_x = $handler.data('start-x') \r\n      const s_y = $handler.data('start-y') \r\n\r\n      $handler.data('start-x', c_x) \r\n      $handler.data('start-y', c_y) \r\n\r\n      let diff_x = c_x - s_x \r\n      let diff_y = c_y - s_y \r\n\r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      const width = $video_obj.width() \r\n      const height = $video_obj.height() \r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hsw')) {\r\n        diff_x = 0 - diff_x \r\n      }\r\n\r\n      if ($handler.hasClass('fr-hnw') || $handler.hasClass('fr-hne')) {\r\n        diff_y = 0 - diff_y \r\n      }\r\n\r\n      $video_obj.css('width', width + diff_x) \r\n      $video_obj.css('height', height + diff_y) \r\n      $video_obj.removeAttr('width') \r\n      $video_obj.removeAttr('height') \r\n\r\n      _repositionResizer() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop resize.\r\n   */\r\n  function _handlerMouseup(e) {\r\n\r\n    // Check if resizer belongs to current instance.\r\n    if (!editor.core.sameInstance($video_resizer)) return true \r\n\r\n    if ($handler && $current_video) {\r\n      if (e) e.stopPropagation() \r\n      $handler = null \r\n      $overlay.hide() \r\n      _repositionResizer() \r\n      _showEditPopup() \r\n\r\n      editor.undo.saveStep() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create resize handler.\r\n   */\r\n  function _getHandler(pos) {\r\n\r\n    return `<div class=\"fr-handler fr-h${pos}\"></div>` \r\n  }\r\n\r\n  function _resizeVideo(e, initPageX, direction, step) {\r\n    e.pageX = initPageX \r\n    e.pageY = initPageX \r\n    _handlerMousedown.call(this, e) \r\n    e.pageX = e.pageX + direction * Math.floor(Math.pow(1.1, step)) \r\n    e.pageY = e.pageY + direction * Math.floor(Math.pow(1.1, step)) \r\n    _handlerMousemove.call(this, e) \r\n    _handlerMouseup.call(this, e) \r\n\r\n    return ++step \r\n  }\r\n\r\n  /**\r\n   * Init video resizer.\r\n   */\r\n  function _initResizer() {\r\n    let doc \r\n\r\n    // No shared video resizer.\r\n    if (!editor.shared.$video_resizer) {\r\n\r\n      // Create shared video resizer.\r\n      editor.shared.$video_resizer = $(document.createElement('div')).attr('class', 'fr-video-resizer')\r\n      $video_resizer = editor.shared.$video_resizer \r\n\r\n      // Bind mousedown event shared.\r\n      editor.events.$on($video_resizer, 'mousedown', function (e) {\r\n        e.stopPropagation() \r\n      }, true) \r\n\r\n      // video resize is enabled.\r\n      if (editor.opts.videoResize) {\r\n        $video_resizer.append(_getHandler('nw') + _getHandler('ne') + _getHandler('sw') + _getHandler('se')) \r\n\r\n        // Add video resizer overlay and set it.\r\n        editor.shared.$vid_overlay = $(document.createElement('div')).attr('class', 'fr-video-overlay')\r\n        $overlay = editor.shared.$vid_overlay \r\n        doc = $video_resizer.get(0).ownerDocument \r\n        $(doc).find('body').first().append($overlay) \r\n      }\r\n    }\r\n    else {\r\n      $video_resizer = editor.shared.$video_resizer \r\n      $overlay = editor.shared.$vid_overlay \r\n\r\n      editor.events.on('destroy', function () {\r\n        $('body').first().append($video_resizer.removeClass('fr-active'))\r\n      }, true) \r\n    }\r\n\r\n    // Shared destroy.\r\n    editor.events.on('shared.destroy', function () {\r\n      $video_resizer.html('').removeData().remove() \r\n      $video_resizer = null \r\n\r\n      if (editor.opts.videoResize) {\r\n        $overlay.remove() \r\n        $overlay = null \r\n      }\r\n    }, true) \r\n\r\n    // Window resize. Exit from edit.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.$on($(editor.o_win), 'resize.video', function () {\r\n        _exitEdit(true) \r\n      }) \r\n    }\r\n\r\n    // video resize is enabled.\r\n    if (editor.opts.videoResize) {\r\n      doc = $video_resizer.get(0).ownerDocument \r\n\r\n      editor.events.$on($video_resizer, editor._mousedown, '.fr-handler', _handlerMousedown) \r\n      editor.events.$on($(doc), editor._mousemove, _handlerMousemove) \r\n      editor.events.$on($(doc.defaultView || doc.parentWindow), editor._mouseup, _handlerMouseup) \r\n\r\n      editor.events.$on($overlay, 'mouseleave', _handlerMouseup) \r\n\r\n\r\n      // Accessibility.\r\n\r\n      // Used for keys holing.\r\n      let step = 1 \r\n      let prevKey = null \r\n      let prevTimestamp = 0 \r\n\r\n      // Keydown event.\r\n      editor.events.on('keydown', function (e) {\r\n        if ($current_video) {\r\n          const ctrlKey = navigator.userAgent.indexOf('Mac OS X') != -1 ? e.metaKey : e.ctrlKey \r\n          const keycode = e.which \r\n\r\n          if (keycode !== prevKey || e.timeStamp - prevTimestamp > 200) {\r\n            step = 1 \r\n\r\n            // Reset step. Known browser issue: Keyup does not trigger when ctrl is pressed.\r\n          }\r\n\r\n          // Increase video size.\r\n          if ((keycode == FE.KEYCODE.EQUALS || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_EQUALS)) && ctrlKey && !e.altKey) {\r\n            step = _resizeVideo.call(this, e, 1, 1, step) \r\n          }\r\n\r\n          // Decrease video size.\r\n          else if ((keycode == FE.KEYCODE.HYPHEN || (editor.browser.mozilla && keycode == FE.KEYCODE.FF_HYPHEN)) && ctrlKey && !e.altKey) {\r\n            step = _resizeVideo.call(this, e, 2, -1, step) \r\n          }\r\n\r\n          // Save key code.\r\n          prevKey = keycode \r\n\r\n          // Save timestamp.\r\n          prevTimestamp = e.timeStamp \r\n        }\r\n      }) \r\n\r\n      // Reset the step on key up event.\r\n      editor.events.on('keyup', function () {\r\n        step = 1 \r\n      }) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Keep videos in sync when content changed.\r\n   */\r\n  let videos \r\n\r\n  function _syncVideos() {\r\n\r\n    // Get current videos.\r\n    const c_videos = Array.prototype.slice.call(editor.el.querySelectorAll('video, .fr-video > *')) \r\n\r\n    // Current videos src.\r\n    const video_srcs = [] \r\n    let i \r\n\r\n    for (i = 0; i < c_videos.length; i++) {\r\n      video_srcs.push(c_videos[i].getAttribute('src')) \r\n\r\n      $(c_videos[i]).toggleClass('fr-draggable', editor.opts.videoMove) \r\n\r\n      if (c_videos[i].getAttribute('class') === '') c_videos[i].removeAttribute('class') \r\n\r\n      if (c_videos[i].getAttribute('style') === '') c_videos[i].removeAttribute('style') \r\n    }\r\n\r\n    // Loop previous videos and check their src.\r\n    if (videos) {\r\n      for (i = 0; i < videos.length; i++) {\r\n        if (video_srcs.indexOf(videos[i].getAttribute('src')) < 0) {\r\n          editor.events.trigger('video.removed', [$(videos[i])]) \r\n        }\r\n      }\r\n    }\r\n\r\n    // Current videos are the old ones.\r\n    videos = c_videos \r\n  }\r\n\r\n  /**\r\n   * Reposition resizer.\r\n   */\r\n  function _repositionResizer() {\r\n    if (!$video_resizer) _initResizer(); \r\n\r\n    (editor.$wp || editor.$sc).append($video_resizer) \r\n    $video_resizer.data('instance', editor) \r\n    const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`) \r\n   \r\n\r\n    let iframePaddingLeft = 0\r\n    let iframePaddingTop = 0\r\n    if (editor.opts.iframe) {\r\n      iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n    }\r\n\r\n    $video_resizer\r\n      .css('top', (editor.opts.iframe ? $video_obj.offset().top + iframePaddingTop - 1 : $video_obj.offset().top - editor.$wp.offset().top - 1) + editor.$wp.scrollTop())\r\n      .css('left', (editor.opts.iframe ? $video_obj.offset().left + iframePaddingLeft - 1 : $video_obj.offset().left - editor.$wp.offset().left - 1) + editor.$wp.scrollLeft())\r\n      .css('width', $video_obj.get(0).getBoundingClientRect().width)\r\n      .css('height', $video_obj.get(0).getBoundingClientRect().height)\r\n      .addClass('fr-active') \r\n  }\r\n\r\n  /**\r\n   * Edit video.\r\n   */\r\n  let touchScroll \r\n\r\n  function _edit(e) {\r\n    if (e && e.type == 'touchend' && touchScroll) {\r\n\r\n      return true \r\n    }\r\n\r\n    if (e && editor.edit.isDisabled()) {\r\n      e.stopPropagation() \r\n      e.preventDefault() \r\n\r\n      return false \r\n    }\r\n\r\n    if (editor.edit.isDisabled()) {\r\n\r\n      return false \r\n    }\r\n\r\n    // Hide resizer for other instances.\r\n    for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n      if (FE.INSTANCES[i] != editor) {\r\n        FE.INSTANCES[i].events.trigger('video.hideResizer') \r\n      }\r\n    }\r\n\r\n    editor.toolbar.disable() \r\n\r\n    // Hide keyboard.\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.disableBlur() \r\n      editor.$el.blur() \r\n      editor.events.enableBlur() \r\n    }\r\n\r\n    // Unselect all other videos.\r\n    editor.$el.find('.fr-video.fr-active').removeClass('fr-active') \r\n\r\n    $current_video = $(this) \r\n    $current_video.addClass('fr-active') \r\n\r\n    if (editor.opts.iframe) {\r\n      editor.size.syncIframe() \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n\r\n    editor.selection.clear() \r\n    editor.button.bulkRefresh() \r\n\r\n    editor.events.trigger('image.hideResizer') \r\n  }\r\n\r\n  /**\r\n   * Exit edit.\r\n   */\r\n  function _exitEdit(force_exit) {\r\n    if ($current_video && (_canExit() || force_exit === true)) {\r\n      $video_resizer.removeClass('fr-active') \r\n\r\n      editor.toolbar.enable() \r\n\r\n      $current_video.removeClass('fr-active') \r\n      $current_video = null \r\n\r\n      _unmarkExit() \r\n    }\r\n  }\r\n\r\n  editor.shared.vid_exit_flag = false \r\n\r\n  function _markExit() {\r\n    editor.shared.vid_exit_flag = true \r\n  }\r\n\r\n  function _unmarkExit() {\r\n    editor.shared.vid_exit_flag = false \r\n  }\r\n\r\n  function _canExit() {\r\n\r\n    return editor.shared.vid_exit_flag \r\n  }\r\n\r\n  function _drop(e) {\r\n\r\n    // Check if we are dropping files.\r\n    const { dataTransfer : dt } = e.originalEvent \r\n\r\n    if (dt && dt.files && dt.files.length) {\r\n      const vid = dt.files[0] \r\n\r\n      if (vid && vid.type && vid.type.indexOf('video') !== -1) {\r\n        if (!editor.opts.videoUpload) {\r\n          e.preventDefault() \r\n          e.stopPropagation() \r\n\r\n          return false \r\n        }\r\n\r\n\r\n        editor.markers.remove() \r\n        editor.markers.insertAtPoint(e.originalEvent) \r\n        editor.$el.find('.fr-marker').replaceWith(FE.MARKERS) \r\n\r\n        // Hide popups.\r\n        editor.popups.hideAll() \r\n\r\n        // Show the video insert popup.\r\n        let $popup = editor.popups.get('video.insert') \r\n\r\n        if (!$popup) $popup = _initInsertPopup() \r\n        editor.popups.setContainer('video.insert', editor.$sc) \r\n        editor.popups.show('video.insert', e.originalEvent.pageX, e.originalEvent.pageY) \r\n        showProgressBar() \r\n\r\n        // Dropped file is an video that we allow.\r\n        if (editor.opts.videoAllowedTypes.indexOf(vid.type.replace(/video\\//g, '')) >= 0) {\r\n\r\n          // Upload videos.\r\n          upload(dt.files) \r\n        }\r\n        else {\r\n          _throwError(BAD_FILE_TYPE) \r\n        }\r\n\r\n        // Cancel anything else.\r\n        e.preventDefault() \r\n        e.stopPropagation() \r\n\r\n        return false \r\n      }\r\n    }\r\n  }\r\n\r\n  function _browserUpload(video) {\r\n\r\n    // if current video is embedded video,remove it.\r\n    if ($current_video && $current_video.find('iframe') && $current_video.find('iframe').length) {\r\n      remove() \r\n    }\r\n    const reader = new FileReader() \r\n\r\n    reader.onload = function () {\r\n      let { result : link } = reader \r\n\r\n      // Convert image to local blob.\r\n      const binary = atob(reader.result.split(',')[1]) \r\n      const array = [] \r\n\r\n      for (let i = 0; i < binary.length; i++) {\r\n        array.push(binary.charCodeAt(i)) \r\n      }\r\n\r\n      // Get local image link.\r\n      link = window.URL.createObjectURL(new Blob([new Uint8Array(array)], {\r\n        type: video.type\r\n      })) \r\n\r\n      insertHtmlVideo(link, false, null, $current_video) \r\n    } \r\n\r\n    showProgressBar() \r\n\r\n    reader.readAsDataURL(video)\r\n  }\r\n\r\n  /**\r\n   * Do video upload.\r\n   */\r\n  function upload(videos) {\r\n\r\n    // Make sure we have what to upload.\r\n    if (typeof videos != 'undefined' && videos.length > 0) {\r\n\r\n      // Check if we should cancel the video upload.\r\n      if (editor.events.trigger('video.beforeUpload', [videos]) === false) {\r\n\r\n        return false \r\n      }\r\n\r\n      const video = videos[0] \r\n\r\n      // Upload as blob for testing purposes.\r\n      if ((editor.opts.videoUploadURL === null || editor.opts.videoUploadURL == DEFAULT_VIDEO_UPLOAD_URL) && !editor.opts.videoUploadToS3 && !editor.opts.videoUploadToAzure) {\r\n        _browserUpload(video)\r\n\r\n        return false \r\n      }\r\n\r\n      // Check video max size.\r\n      if (video.size > editor.opts.videoMaxSize) {\r\n        _throwError(MAX_SIZE_EXCEEDED) \r\n\r\n        return false \r\n      }\r\n\r\n      // Check video types.\r\n      if (editor.opts.videoAllowedTypes.indexOf(video.type.replace(/video\\//g, '')) < 0) {\r\n        _throwError(BAD_FILE_TYPE) \r\n\r\n        return false \r\n      }\r\n\r\n      // Create form Data.\r\n      let form_data \r\n\r\n      if (editor.drag_support.formdata) {\r\n        form_data = editor.drag_support.formdata ? new FormData() : null \r\n      }\r\n\r\n      // Prepare form data for request.\r\n      if (form_data) {\r\n        let key \r\n\r\n        // Upload to S3.\r\n        if (editor.opts.videoUploadToS3 !== false) {\r\n          form_data.append('key', editor.opts.videoUploadToS3.keyStart + (new Date()).getTime() + '-' + (video.name || 'untitled')) \r\n          form_data.append('success_action_status', '201') \r\n          form_data.append('X-Requested-With', 'xhr') \r\n          form_data.append('Content-Type', video.type) \r\n\r\n          for (key in editor.opts.videoUploadToS3.params) {\r\n            if (editor.opts.videoUploadToS3.params.hasOwnProperty(key)) {\r\n              form_data.append(key, editor.opts.videoUploadToS3.params[key]) \r\n            }\r\n          }\r\n        }\r\n\r\n        // Add upload params.\r\n        for (key in editor.opts.videoUploadParams) {\r\n          if (editor.opts.videoUploadParams.hasOwnProperty(key)) {\r\n            form_data.append(key, editor.opts.videoUploadParams[key]) \r\n          }\r\n        }\r\n\r\n        // Set the video in the request.\r\n        form_data.append(editor.opts.videoUploadParam, video) \r\n\r\n        // Create XHR request.\r\n        let { videoUploadURL : url } = editor.opts \r\n\r\n        if (editor.opts.videoUploadToS3) {\r\n          if (editor.opts.videoUploadToS3.uploadURL) {\r\n            ({ uploadURL : url } = editor.opts.videoUploadToS3 );\r\n          }\r\n          else {\r\n            url = `https://${editor.opts.videoUploadToS3.region}.amazonaws.com/${editor.opts.videoUploadToS3.bucket}` \r\n          }\r\n        }\r\n        let videoURL\r\n        let azureKey\r\n        let videoUploadMethod = editor.opts.videoUploadMethod\r\n        if (editor.opts.videoUploadToAzure) {\r\n          if (editor.opts.videoUploadToAzure.uploadURL) {\r\n            url = `${editor.opts.videoUploadToAzure.uploadURL}/${video.name}`\r\n          } else {\r\n            url = encodeURI(`https://${editor.opts.videoUploadToAzure.account}.blob.core.windows.net/${editor.opts.videoUploadToAzure.container}/${video.name}`)\r\n          }\r\n          videoURL = url\r\n          if (editor.opts.videoUploadToAzure.SASToken) {\r\n            url +=  editor.opts.videoUploadToAzure.SASToken\r\n          }\r\n          videoUploadMethod = 'PUT'\r\n        }\r\n\r\n        const xhr = editor.core.getXHR(url, videoUploadMethod) \r\n\r\n        if (editor.opts.videoUploadToAzure) {\r\n          let uploadDate = new Date().toUTCString()\r\n          if (!editor.opts.videoUploadToAzure.SASToken && editor.opts.videoUploadToAzure.accessKey) {\r\n            let azureAccount = editor.opts.videoUploadToAzure.account\r\n            let azureContainer = editor.opts.videoUploadToAzure.container\r\n            if(editor.opts.videoUploadToAzure.uploadURL) {\r\n              let urls = editor.opts.videoUploadToAzure.uploadURL.split('/')\r\n              azureContainer = urls.pop()\r\n              azureAccount = urls.pop().split('.')[0]\r\n            }\r\n            let headerResource = `x-ms-blob-type:BlockBlob\\nx-ms-date:${uploadDate}\\nx-ms-version:2019-07-07`\r\n            let urlResource = encodeURI('/' + azureAccount + '/' + azureContainer + '/' + video.name)\r\n            let stringToSign = videoUploadMethod + '\\n\\n\\n' + video.size + '\\n\\n' + video.type + '\\n\\n\\n\\n\\n\\n\\n' + headerResource + '\\n' + urlResource\r\n            let signatureBytes = editor.cryptoJSPlugin.cryptoJS.HmacSHA256(stringToSign, editor.cryptoJSPlugin.cryptoJS.enc.Base64.parse(editor.opts.videoUploadToAzure.accessKey))\r\n            let signature = signatureBytes.toString(editor.cryptoJSPlugin.cryptoJS.enc.Base64)\r\n            let authHeader = 'SharedKey ' + azureAccount + ':' + signature\r\n            azureKey = signature\r\n            xhr.setRequestHeader(\"Authorization\", authHeader)\r\n          }\r\n          xhr.setRequestHeader(\"x-ms-version\", \"2019-07-07\")\r\n          xhr.setRequestHeader(\"x-ms-date\", uploadDate)\r\n          xhr.setRequestHeader(\"Content-Type\", video.type)\r\n          xhr.setRequestHeader(\"x-ms-blob-type\", \"BlockBlob\")\r\n          for (key in editor.opts.videoUploadParams) {\r\n            if (editor.opts.videoUploadParams.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.videoUploadParams[key])\r\n            }\r\n          }\r\n          for (key in editor.opts.videoUploadToAzure.params) {\r\n            if (editor.opts.videoUploadToAzure.params.hasOwnProperty(key)) {\r\n              xhr.setRequestHeader(key, editor.opts.videoUploadToAzure.params[key])\r\n            }\r\n          }\r\n        }\r\n        // Set upload events.\r\n        xhr.onload = function () {\r\n          _videoUploaded.call(xhr, $current_video, videoURL, azureKey) \r\n        } \r\n        xhr.onerror = _videoUploadError \r\n        xhr.upload.onprogress = _videoUploadProgress \r\n        xhr.onabort = _videoUploadAborted \r\n\r\n        showProgressBar() \r\n        editor.events.disableBlur() \r\n        editor.edit.off() \r\n        editor.events.enableBlur() \r\n\r\n        const $popup = editor.popups.get('video.insert') \r\n\r\n        if ($popup) {\r\n          $($popup.off('abortUpload')).on('abortUpload', function () {\r\n            if (xhr.readyState != 4) {\r\n              xhr.abort() \r\n            }\r\n          })\r\n        }\r\n\r\n        // Send data.\r\n        xhr.send(editor.opts.videoUploadToAzure ? video : form_data)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Video drop inside the upload zone.\r\n   */\r\n\r\n  function _bindInsertEvents($popup) {\r\n\r\n    // Drag over the dropable area.\r\n    editor.events.$on($popup, 'dragover dragenter', '.fr-video-upload-layer', function () {\r\n      $(this).addClass('fr-drop') \r\n\r\n      return false \r\n    }, true) \r\n\r\n    // Drag end.\r\n    editor.events.$on($popup, 'dragleave dragend', '.fr-video-upload-layer', function () {\r\n      $(this).removeClass('fr-drop') \r\n\r\n      return false \r\n    }, true) \r\n\r\n    // Drop.\r\n    editor.events.$on($popup, 'drop', '.fr-video-upload-layer', function (e) {\r\n      e.preventDefault() \r\n      e.stopPropagation() \r\n\r\n      $(this).removeClass('fr-drop') \r\n\r\n      const { dataTransfer : dt } = e.originalEvent \r\n\r\n      if (dt && dt.files) {\r\n        const inst = $popup.data('instance') || editor \r\n        inst.events.disableBlur() \r\n        inst.video.upload(dt.files) \r\n        inst.events.enableBlur() \r\n      }\r\n    }, true) \r\n\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchstart', '.fr-video-upload-layer input[type=\"file\"]', function () {\r\n        $(this).trigger('click') \r\n      }, true) \r\n    }\r\n\r\n    editor.events.$on($popup, 'change', '.fr-video-upload-layer input[type=\"file\"]', function () {\r\n      if (this.files) {\r\n        const inst = $popup.data('instance') || editor \r\n        inst.events.disableBlur() \r\n        $popup.find('input:focus').blur() \r\n        inst.events.enableBlur() \r\n        inst.video.upload(this.files) \r\n      }\r\n\r\n      // Else IE 9 case.\r\n      // Chrome fix.\r\n      $(this).val('') \r\n    }, true) \r\n  }\r\n\r\n  /**\r\n   * Init the video events.\r\n   */\r\n  function _initEvents() {\r\n\r\n    // Drop inside the editor.\r\n    editor.events.on('drop', _drop, true) \r\n\r\n    editor.events.on('mousedown window.mousedown', _markExit) \r\n    editor.events.on('window.touchmove', _unmarkExit) \r\n    editor.events.on('mouseup window.mouseup', _exitEdit) \r\n\r\n    editor.events.on('commands.mousedown', function ($btn) {\r\n      if ($btn.parents('.fr-toolbar').length > 0) {\r\n        _exitEdit() \r\n      }\r\n    }) \r\n\r\n    editor.events.on('video.hideResizer commands.undo commands.redo element.dropped', function () {\r\n      _exitEdit(true) \r\n    }) \r\n  }\r\n\r\n  /**\r\n   * Throw a video error.\r\n   */\r\n\r\n  function _throwError(code, response) {\r\n    editor.edit.on() \r\n\r\n    if ($current_video) $current_video.find('video').addClass('fr-error') \r\n    _showErrorMessage(editor.language.translate('Something went wrong. Please try again.')) \r\n\r\n    editor.events.trigger('video.error', [{\r\n      code: code,\r\n      message: error_messages[code]\r\n    },\r\n    response\r\n    ]) \r\n  }\r\n\r\n  /**\r\n   * Init the video edit popup.\r\n   */\r\n  function _initEditPopup() {\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n\r\n    if (editor.opts.videoEditButtons.length > 0) {\r\n      if (editor.opts.videoResponsive) {\r\n        if (editor.opts.videoEditButtons.indexOf('videoSize') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoSize'), 1)\r\n        }\r\n        if (editor.opts.videoEditButtons.indexOf('videoDisplay') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoDisplay'), 1) \r\n        }\r\n        if (editor.opts.videoEditButtons.indexOf('videoAlign') > -1) {\r\n          editor.opts.videoEditButtons.splice(editor.opts.videoEditButtons.indexOf('videoAlign'), 1) \r\n        }\r\n      }\r\n\r\n      video_buttons += `<div class=\"fr-buttons\"> \r\n      ${editor.button.buildList(editor.opts.videoEditButtons)} \r\n      </div>` \r\n\r\n      const template = {\r\n        buttons: video_buttons\r\n      }\r\n\r\n      const $popup = editor.popups.create('video.edit', template) \r\n\r\n      editor.events.$on(editor.$wp, 'scroll.video-edit', function () {\r\n        if ($current_video && editor.popups.isVisible('video.edit')) {\r\n\r\n          editor.events.disableBlur() \r\n          _editVideo($current_video) \r\n        }\r\n      }) \r\n\r\n      return $popup \r\n    }\r\n\r\n    return false \r\n  }\r\n\r\n  /**\r\n   * Refresh the size popup.\r\n   */\r\n  function _refreshSizePopup() {\r\n    if ($current_video) {\r\n      const $popup = editor.popups.get('video.size') \r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n       \r\n      $popup.find('input[name=\"width\"]').val($video_obj.get(0).style.width || $video_obj.attr('width')).trigger('change') \r\n      $popup.find('input[name=\"height\"]').val($video_obj.get(0).style.height || $video_obj.attr('height')).trigger('change') \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the size popup.\r\n   */\r\n  function showSizePopup() {\r\n    let $popup = editor.popups.get('video.size') \r\n\r\n    if (!$popup) $popup = _initSizePopup() \r\n    hideProgressBar() \r\n    editor.popups.refresh('video.size') \r\n    editor.popups.setContainer('video.size', editor.$sc)\r\n    const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n    const left = $video_obj.offset().left + $video_obj.outerWidth() / 2\r\n    const top = $video_obj.offset().top + $video_obj.height()\r\n  \r\n    editor.popups.show('video.size', left, top, $video_obj.height(), true)\r\n  }\r\n\r\n  /**\r\n   * Init the video upload popup.\r\n   */\r\n  function _initSizePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('video.size', _refreshSizePopup) \r\n\r\n      return true \r\n    }\r\n\r\n    // Video buttons.\r\n    let video_buttons = '' \r\n    video_buttons = `<div class=\"fr-buttons fr-tabs\">${editor.button.buildList(editor.opts.videoSizeButtons)}</div>` \r\n\r\n    // Size layer.\r\n    let size_layer = '' \r\n    size_layer = `<div class=\"fr-video-size-layer fr-layer fr-active\" id=\"fr-video-size-layer-${editor.id}\"><div class=\"fr-video-group\"><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-width-${editor.id}\" type=\"text\" name=\"width\" placeholder=\"${editor.language.translate('Width')}\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-height-${editor.id}\" type=\"text\" name=\"height\" placeholder=\"${editor.language.translate('Height')}\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoSetSize\" tabIndex=\"2\" role=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: video_buttons,\r\n      size_layer: size_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('video.size', template) \r\n\r\n    editor.events.$on(editor.$wp, 'scroll', function () {\r\n      if ($current_video && editor.popups.isVisible('video.size')) {\r\n\r\n        editor.events.disableBlur() \r\n        _editVideo($current_video) \r\n      }\r\n    }) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Get video alignment.\r\n   */\r\n  function getAlign($video) {\r\n    if (typeof $video == 'undefined') $video = $current_video \r\n\r\n    if ($video) {\r\n\r\n      // Video has left class.\r\n      if ($video.hasClass('fr-fvl')) {\r\n\r\n        return 'left' \r\n      }\r\n\r\n      // Video has right class.\r\n      else if ($video.hasClass('fr-fvr')) {\r\n\r\n        return 'right' \r\n      }\r\n\r\n      // Video has display class set.\r\n      else if ($video.hasClass('fr-dvb') || $video.hasClass('fr-dvi')) {\r\n\r\n        return 'center' \r\n      }\r\n      else {\r\n\r\n        // Video has display block.\r\n        if ($video.css('display') == 'block') {\r\n\r\n          // Margin left is 0.\r\n          // Margin right is auto.\r\n          if ($video.css('text-algin') == 'left') {\r\n            return 'left' \r\n          }\r\n\r\n          // Margin left is auto.\r\n          // Margin right is 0.\r\n          else if ($video.css('text-align') == 'right') {\r\n            return 'right' \r\n          }\r\n        }\r\n\r\n        // Display inline.\r\n        else {\r\n\r\n          // Float left.\r\n          if ($video.css('float') == 'left') {\r\n            return 'left' \r\n          }\r\n\r\n          // Float right.\r\n          else if ($video.css('float') == 'right') {\r\n            return 'right' \r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return 'center' \r\n  }\r\n\r\n  /**\r\n   * Align video.\r\n   */\r\n  function align(val) {\r\n    $current_video.removeClass('fr-fvr fr-fvl') \r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'left') {\r\n        $current_video.addClass('fr-fvl') \r\n      }\r\n      else if (val == 'right') {\r\n        $current_video.addClass('fr-fvr') \r\n      }\r\n    }\r\n    else {\r\n      _setStyle($current_video, getDisplay(), val) \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n    editor.selection.clear() \r\n  }\r\n\r\n  /**\r\n   * Refresh the align icon.\r\n   */\r\n  function refreshAlign($btn) {\r\n    if (!$current_video) return false \r\n\r\n    $btn.find('>*').first().replaceWith(editor.icon.create(`video-align-${getAlign()}`)) \r\n  }\r\n\r\n  /**\r\n   * Refresh the align option from the dropdown.\r\n   */\r\n  function refreshAlignOnShow($btn, $dropdown) {\r\n    if ($current_video) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getAlign()}\"]`).addClass('fr-active').attr('aria-selected', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get video display.\r\n   */\r\n  function getDisplay($video) {\r\n    if (typeof $video == 'undefined') $video = $current_video \r\n\r\n    // Set float to none.\r\n    const flt = $video.css('float') \r\n    $video.css('float', 'none') \r\n\r\n    // Video has display block.\r\n    if ($video.css('display') == 'block') {\r\n\r\n      // Set float to the initial value.\r\n      $video.css('float', '') \r\n\r\n      if ($video.css('float') != flt) $video.css('float', flt) \r\n\r\n      return 'block' \r\n    }\r\n\r\n    // Display inline.\r\n    else {\r\n\r\n      // Set float.\r\n      $video.css('float', '') \r\n\r\n      if ($video.css('float') != flt) $video.css('float', flt) \r\n\r\n      return 'inline' \r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Set video display.\r\n   */\r\n  function display(val) {\r\n    $current_video.removeClass('fr-dvi fr-dvb') \r\n\r\n    // Easy case. Use classes.\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      if (val == 'inline') {\r\n        $current_video.addClass('fr-dvi') \r\n      }\r\n      else if (val == 'block') {\r\n        $current_video.addClass('fr-dvb') \r\n      }\r\n    }\r\n    else {\r\n      _setStyle($current_video, val, getAlign()) \r\n    }\r\n\r\n    _selectVideo()\r\n    _repositionResizer() \r\n    _showEditPopup() \r\n    editor.selection.clear() \r\n  }\r\n\r\n  /**\r\n   * Refresh the video display selected option.\r\n   */\r\n  function refreshDisplayOnShow($btn, $dropdown) {\r\n    if ($current_video) {\r\n      $dropdown.find(`.fr-command[data-param1=\"${getDisplay()}\"]`).addClass('fr-active').attr('aria-selected', true) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the replace popup.\r\n   */\r\n\r\n  function replace() {\r\n    let $popup = editor.popups.get('video.insert') \r\n\r\n    if (!$popup) $popup = _initInsertPopup() \r\n\r\n    if (!editor.popups.isVisible('video.insert')) {\r\n      hideProgressBar() \r\n      editor.popups.refresh('video.insert') \r\n      editor.popups.setContainer('video.insert', editor.$sc) \r\n    }\r\n\r\n    const left = $current_video.offset().left + ($current_video.outerWidth()) / 2\r\n    const top = $current_video.offset().top + $current_video.height()\r\n   \r\n    editor.popups.show('video.insert', left, top, $current_video.outerHeight(), true)\r\n  }\r\n\r\n  /**\r\n   * Remove current selected video.\r\n   */\r\n  function remove() {\r\n    if ($current_video) {\r\n      if (editor.events.trigger('video.beforeRemove', [$current_video]) !== false) {\r\n        const $video = $current_video \r\n        editor.popups.hideAll() \r\n        _exitEdit(true) \r\n\r\n        editor.selection.setBefore($video.get(0)) || editor.selection.setAfter($video.get(0)) \r\n        $video.remove() \r\n        editor.selection.restore() \r\n\r\n        editor.html.fillEmptyBlocks() \r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide image upload popup.\r\n   */\r\n\r\n  function _hideInsertPopup() {\r\n    hideProgressBar() \r\n  }\r\n\r\n  function _setStyle($video, _display, _align) {\r\n    if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n      $video.removeClass('fr-fvl fr-fvr fr-dvb fr-dvi') \r\n      $video.addClass(`fr-fv${_align[0]} fr-dv${_display[0]}`) \r\n    }\r\n    else {\r\n      if (_display == 'inline') {\r\n        $video.css({\r\n          display: 'inline-block'\r\n        })\r\n\r\n        if (_align == 'center') {\r\n          $video.css({\r\n            'float': 'none'\r\n          })\r\n        }\r\n        else if (_align == 'left') {\r\n          $video.css({\r\n            'float': 'left'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            'float': 'right'\r\n          })\r\n        }\r\n      }\r\n      else {\r\n        $video.css({\r\n          display: 'block',\r\n          clear: 'both'\r\n        })\r\n\r\n        if (_align == 'left') {\r\n          $video.css({\r\n            textAlign: 'left'\r\n          })\r\n        }\r\n        else if (_align == 'right') {\r\n          $video.css({\r\n            textAlign: 'right'\r\n          })\r\n        }\r\n        else {\r\n          $video.css({\r\n            textAlign: 'center'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert style to classes.\r\n   */\r\n  function _convertStyleToClasses($video) {\r\n    if (!$video.hasClass('fr-dvi') && !$video.hasClass('fr-dvb')) {\r\n      $video.addClass(`fr-fv${getAlign($video)[0]}`) \r\n      $video.addClass(`fr-dv${getDisplay($video)[0]}`) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert classes to style.\r\n   */\r\n  function _convertClassesToStyle($video) {\r\n    const d = $video.hasClass('fr-dvb') ? 'block' : $video.hasClass('fr-dvi') ? 'inline' : null \r\n    const a = $video.hasClass('fr-fvl') ? 'left' : $video.hasClass('fr-fvr') ? 'right' : getAlign($video) \r\n\r\n    _setStyle($video, d, a) \r\n\r\n    $video.removeClass('fr-dvb fr-dvi fr-fvr fr-fvl') \r\n  }\r\n\r\n  /**\r\n   * Refresh video list.\r\n   */\r\n  function _refreshVideoList() {\r\n\r\n    // Find possible candidates that are not wrapped.\r\n    const candidates = editor.$el.find('video').filter(function () {\r\n\r\n      return $(this).parents('span.fr-video').length === 0 \r\n    })\r\n    \r\n    if(candidates.length == 0){\r\n      return\r\n    }\r\n\r\n    candidates.wrap($(document.createElement('span')).attr('class', 'fr-video fr-deletable').attr('contenteditable', 'false')) \r\n\r\n    editor.$el.find('embed, iframe').filter(function () {\r\n      if (editor.browser.safari && this.getAttribute('src')) {\r\n        this.setAttribute('src', this.src) \r\n      }\r\n\r\n      if ($(this).parents('span.fr-video').length > 0) return false \r\n\r\n      const link = $(this).attr('src') \r\n\r\n      for (let i = 0; i < FE.VIDEO_PROVIDERS.length; i++) {\r\n        const vp = FE.VIDEO_PROVIDERS[i] \r\n\r\n        // Check if video provider is allowed.\r\n        if (vp.test_regex.test(link) && (new RegExp(editor.opts.videoAllowedProviders.join('|'))).test(vp.provider)) {\r\n\r\n          return true \r\n        }\r\n      }\r\n\r\n      return false \r\n    }).map(function () {\r\n      return $(this).parents('object').length === 0 ? this : $(this).parents('object').get(0) \r\n    }).wrap($(document.createElement('span')).attr('class', 'fr-video').attr('contenteditable','false')) \r\n\r\n    const videos = editor.$el.find('span.fr-video, video') \r\n\r\n    for (let i = 0; i < videos.length; i++) {\r\n      const $video = $(videos[i]) \r\n\r\n      if (!editor.opts.htmlUntouched && editor.opts.useClasses) {\r\n        _convertStyleToClasses($video) \r\n\r\n        if (!editor.opts.videoTextNear) {\r\n          $video.removeClass('fr-dvi').addClass('fr-dvb') \r\n        }\r\n      }\r\n      else if (!editor.opts.htmlUntouched && !editor.opts.useClasses) {\r\n        _convertClassesToStyle($video) \r\n      }\r\n    }\r\n\r\n    videos.toggleClass('fr-draggable', editor.opts.videoMove) \r\n  }\r\n\r\n  function _init() {\r\n    if (editor.opts.videoResponsive) {\r\n      editor.opts.videoResize = false \r\n    }\r\n\r\n    _initEvents() \r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$el, 'touchstart', 'span.fr-video', function () {\r\n        touchScroll = false \r\n      })\r\n\r\n      editor.events.$on(editor.$el, 'touchmove', function () {\r\n        touchScroll = true \r\n      }) \r\n    }\r\n\r\n    editor.events.on('html.set', _refreshVideoList) \r\n    _refreshVideoList() \r\n\r\n    editor.events.$on(editor.$el, 'mousedown', 'span.fr-video', function (e) {\r\n      e.stopPropagation() \r\n\r\n      // initialize drag and drop on blocks for traditional browsers\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        // https://github.com/froala/wysiwyg-editor/issues/3608\r\n        if (!e.target.innerText) {\r\n          e.target.dragDrop()\r\n          _edit.call(this, e)\r\n        }\r\n      }\r\n    })\r\n    editor.events.$on(editor.$el, 'click touchend', 'span.fr-video', function (e) {\r\n      // https://github.com/froala/wysiwyg-editor/issues/3608\r\n      // When contenteditable attribute is not allowed, user will be able press enter,\r\n      // which will copy fr-video class within p tag causes #3608\r\n      if (e.target.innerText.length || $(this).parents('[contenteditable]').not('.fr-element').not('.fr-img-caption').not('body').first().attr('contenteditable') == 'false') return true\r\n\r\n      _edit.call(this, e)\r\n    }) \r\n\r\n    editor.events.on('keydown', function (e) {\r\n      const key_code = e.which \r\n\r\n      if ($current_video && (key_code == FE.KEYCODE.BACKSPACE || key_code == FE.KEYCODE.DELETE)) {\r\n        e.preventDefault() \r\n        remove() \r\n        editor.undo.saveStep() \r\n\r\n        return false \r\n      }\r\n\r\n      if ($current_video && key_code == FE.KEYCODE.ESC) {\r\n        _exitEdit(true) \r\n        e.preventDefault() \r\n\r\n        return false \r\n      }\r\n\r\n      if ($current_video && key_code != FE.KEYCODE.F10 && !editor.keys.isBrowserAction(e)) {\r\n        e.preventDefault() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // ESC from accessibility.\r\n    editor.events.on('toolbar.esc', function () {\r\n      if ($current_video) {\r\n        editor.events.disableBlur() \r\n        editor.events.focus() \r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // focusEditor from accessibility.\r\n    editor.events.on('toolbar.focusEditor', function () {\r\n      if ($current_video) {\r\n\r\n        return false \r\n      }\r\n    }, true) \r\n\r\n    // Make sure we don't leave empty tags.\r\n    editor.events.on('keydown', function () {\r\n      editor.$el.find('span.fr-video:empty').remove() \r\n    })\r\n\r\n    if (editor.$wp) {\r\n      _syncVideos() \r\n      editor.events.on('contentChanged', _syncVideos) \r\n    }\r\n\r\n    _initInsertPopup(true) \r\n    _initSizePopup(true) \r\n  }\r\n  function toggleAutoplayStyle(color){\r\n    document.getElementById(`autoplay-${editor.id}`).style.cssText=`background:${color}`\r\n\r\n  }\r\n  /**\r\n   * Autoplay video after insert\r\n   */\r\n  function setAutoplay(){\r\n    \r\n    let $video_obj\r\n    if ($current_video.find('iframe, embed, audio').get(0)) {\r\n      $video_obj = $current_video.find('iframe, embed, audio')\r\n      if($video_obj.get(0).src.includes('autoplay=1')){\r\n        toggleAutoplayStyle('#FFFFFF')\r\n        $video_obj.get(0).src= $video_obj.get(0).src.replace('&autoplay=1','')\r\n       }else{\r\n        toggleAutoplayStyle('#D6D6D6')\r\n        $video_obj.get(0).src=$video_obj.get(0).src + '&autoplay=1'\r\n       }\r\n    } \r\n    else {\r\n      const addAutoplay = \"autoplay\";\r\n      $video_obj = $current_video.find('iframe, embed, video')\r\n      if($video_obj.get(0).outerHTML.includes('autoplay')){\r\n        toggleAutoplayStyle('#FFFFFF')\r\n        $video_obj.get(0).outerHTML= $video_obj.get(0).outerHTML.replace('autoplay','')\r\n       }else{\r\n        toggleAutoplayStyle('#D6D6D6')\r\n          let indexofAutoplay=$video_obj.get(0).outerHTML.indexOf('class') -1\r\n          $video_obj.get(0).outerHTML = [$video_obj.get(0).outerHTML.slice(0, indexofAutoplay), addAutoplay, $video_obj.get(0).outerHTML.slice(indexofAutoplay)].join('');\r\n        }\r\n    }\r\n  }\r\n  /**\r\n   * Place selection around current video.\r\n   */\r\n  function _selectVideo() {\r\n    if ($current_video) {\r\n      editor.selection.clear() \r\n      const range = editor.doc.createRange() \r\n      range.selectNode($current_video.get(0)) \r\n      const selection = editor.selection.get() \r\n      selection.addRange(range) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get back to the video main popup.\r\n   */\r\n  function back() {\r\n    if ($current_video) {\r\n      editor.events.disableBlur() \r\n      $current_video[0].click() \r\n    }\r\n    else {\r\n      editor.events.disableBlur() \r\n      editor.selection.restore() \r\n      editor.events.enableBlur() \r\n\r\n      editor.popups.hide('video.insert') \r\n      editor.toolbar.showInline() \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set size based on the current video size.\r\n   */\r\n  function setSize(width, height) {\r\n    if ($current_video) {\r\n      const $popup = editor.popups.get('video.size') \r\n      const $video_obj = $current_video.find(`iframe, embed, ${$current_video.find('iframe, embed, audio').get(0) ? 'audio' : 'video'}`)\r\n      \r\n      $video_obj.css('width', width || $popup.find('input[name=\"width\"]').val()) \r\n      $video_obj.css('height', height || $popup.find('input[name=\"height\"]').val()) \r\n\r\n      if ($video_obj.get(0).style.width) $video_obj.removeAttr('width') \r\n\r\n      if ($video_obj.get(0).style.height) $video_obj.removeAttr('height') \r\n\r\n      $popup.find('input:focus').blur() \r\n      setTimeout(function () {\r\n        $current_video.trigger('click') \r\n      }, editor.helpers.isAndroid() ? 50 : 0) \r\n    }\r\n  }\r\n\r\n  function get() {\r\n\r\n    return $current_video \r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    showInsertPopup: showInsertPopup,\r\n    showLayer: showLayer,\r\n    refreshByURLButton: refreshByURLButton,\r\n    refreshEmbedButton: refreshEmbedButton,\r\n    refreshUploadButton: refreshUploadButton,\r\n    upload: upload,\r\n    insertByURL: insertByURL,\r\n    insertEmbed: insertEmbed,\r\n    insert: insert,\r\n    align: align,\r\n    refreshAlign: refreshAlign,\r\n    refreshAlignOnShow: refreshAlignOnShow,\r\n    display: display,\r\n    refreshDisplayOnShow: refreshDisplayOnShow,\r\n    remove: remove,\r\n    hideProgressBar: hideProgressBar,\r\n    showSizePopup: showSizePopup,\r\n    replace: replace,\r\n    back: back,\r\n    setSize: setSize,\r\n    get: get,\r\n    showProgressBar: showProgressBar,\r\n    _editVideo: _editVideo,\r\n    setAutoplay:setAutoplay\r\n  }\r\n}\r\n\r\n// Register the font size command.\r\nFE.RegisterCommand('insertVideo', {\r\n  title: 'Insert Video',\r\n  undo: false,\r\n  focus: true,\r\n  refreshAfterCallback: false,\r\n  popup: true,\r\n  callback: function () {\r\n    if (!this.popups.isVisible('video.insert')) {\r\n      this.video.showInsertPopup() \r\n    }\r\n    else {\r\n      if (this.$el.find('.fr-marker').length) {\r\n        this.events.disableBlur() \r\n        this.selection.restore() \r\n      }\r\n      this.popups.hide('video.insert') \r\n    }\r\n  },\r\n  plugin: 'video'\r\n})\r\n\r\n// Add the font size icon.\r\nFE.DefineIcon('insertVideo', {\r\n  NAME: 'video-camera',\r\n  FA5NAME: 'camera',\r\n  SVG_KEY: 'insertVideo'\r\n})\r\n\r\n// Video by URL button inside the insert video popup.\r\nFE.DefineIcon('videoByURL', { NAME: 'link', SVG_KEY: 'insertLink' })\r\nFE.RegisterCommand('videoByURL', {\r\n  title: 'By URL',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-by-url') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshByURLButton($btn) \r\n  }\r\n})\r\n\r\n// Video embed button inside the insert video popup.\r\nFE.DefineIcon('videoEmbed', { NAME: 'code', SVG_KEY: 'codeView' })\r\nFE.RegisterCommand('videoEmbed', {\r\n  title: 'Embedded Code',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-embed') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshEmbedButton($btn) \r\n  }\r\n})\r\n\r\n// Video upload button inside the insert video popup.\r\nFE.DefineIcon('videoUpload', { NAME: 'upload', SVG_KEY: 'upload' })\r\nFE.RegisterCommand('videoUpload', {\r\n  title: 'Upload Video',\r\n  undo: false,\r\n  focus: false,\r\n  toggle: true,\r\n  callback: function () {\r\n    this.video.showLayer('video-upload') \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshUploadButton($btn) \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoInsertByURL', {\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.video.insertByURL() \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoInsertEmbed', {\r\n  undo: true,\r\n  focus: true,\r\n  callback: function () {\r\n    this.video.insertEmbed() \r\n  }\r\n})\r\n\r\n// Video display.\r\nFE.DefineIcon('videoDisplay', { NAME: 'star', SVG_KEY: 'star' })\r\nFE.RegisterCommand('videoDisplay', {\r\n  title: 'Display',\r\n  type: 'dropdown',\r\n  options: {\r\n    inline: 'Inline',\r\n    block: 'Break Text'\r\n  },\r\n  callback: function (cmd, val) {\r\n    this.video.display(val) \r\n  },\r\n  refresh: function ($btn) {\r\n    if (!this.opts.videoTextNear) $btn.addClass('fr-hidden') \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.video.refreshDisplayOnShow($btn, $dropdown) \r\n  }\r\n})\r\n\r\n// Video align.\r\nFE.DefineIcon('video-align', { NAME: 'align-left', SVG_KEY: 'align Left' })\r\nFE.DefineIcon('video-align-left', { NAME: 'align-left', SVG_KEY: 'alignLeft' })\r\nFE.DefineIcon('video-align-right', { NAME: 'align-right', SVG_KEY: 'alignRight' })\r\nFE.DefineIcon('video-align-center', { NAME: 'align-justify', SVG_KEY: 'alignJustify' })\r\n\r\n// Video align.\r\nFE.DefineIcon('videoAlign', { NAME: 'align-center', SVG_KEY: 'alignCenter' })\r\nFE.RegisterCommand('videoAlign', {\r\n  type: 'dropdown',\r\n  title: 'Align',\r\n  options: {\r\n    left: 'Align Left',\r\n    center: 'None',\r\n    right: 'Align Right'\r\n  },\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \r\n    const { options } = FE.COMMANDS.videoAlign \r\n\r\n    for (const val in options) {\r\n      if (options.hasOwnProperty(val)) {\r\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"videoAlign\" data-param1=\"${val}\" title=\"${this.language.translate(options[val])}\">${this.icon.create(`video-align-${val}`)}<span class=\"fr-sr-only\">${this.language.translate(options[val])}</span></a></li>` \r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    this.video.align(val) \r\n  },\r\n  refresh: function ($btn) {\r\n    this.video.refreshAlign($btn) \r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    this.video.refreshAlignOnShow($btn, $dropdown) \r\n  }\r\n})\r\n\r\n// Video replace.\r\nFE.DefineIcon('videoReplace', {\r\n  NAME: 'exchange',\r\n  FA5NAME: 'exchange-alt',\r\n  SVG_KEY: 'replaceImage'\r\n})\r\nFE.RegisterCommand('videoReplace', {\r\n  title: 'Replace',\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.video.replace() \r\n  }\r\n})\r\n\r\n// Video remove.\r\nFE.DefineIcon('videoRemove', { NAME: 'trash', SVG_KEY: 'remove' })\r\nFE.RegisterCommand('videoRemove', {\r\n  title: 'Remove',\r\n  callback: function () {\r\n    this.video.remove() \r\n  }\r\n})\r\nFE.DefineIcon('autoplay', { NAME: 'autoplay', SVG_KEY: 'autoplay' })\r\nFE.RegisterCommand('autoplay', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Autoplay',\r\n  callback: function () {\r\n    this.video.setAutoplay()\r\n  } \r\n})\r\n// Video size.\r\nFE.DefineIcon('videoSize', { NAME: 'arrows-alt', SVG_KEY: 'imageSize' })\r\nFE.RegisterCommand('videoSize', {\r\n  undo: false,\r\n  focus: false,\r\n  popup: true,\r\n  title: 'Change Size',\r\n  callback: function () {\r\n    this.video.showSizePopup() \r\n  }\r\n}) \r\n\r\n// Video back.\r\nFE.DefineIcon('videoBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('videoBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  callback: function () {\r\n    this.video.back() \r\n  },\r\n  refresh: function ($btn) {\r\n    const $current_video = this.video.get() \r\n\r\n    if (!$current_video && !this.opts.toolbarInline) {\r\n      $btn.addClass('fr-hidden') \r\n      $btn.next('.fr-separator').addClass('fr-hidden') \r\n    }\r\n    else {\r\n      $btn.removeClass('fr-hidden') \r\n      $btn.next('.fr-separator').removeClass('fr-hidden') \r\n    }\r\n  }\r\n}) \r\n\r\nFE.RegisterCommand('videoDismissError', {\r\n  title: 'OK',\r\n  undo: false,\r\n  callback: function () {\r\n    this.video.hideProgressBar(true) \r\n  }\r\n})\r\n\r\nFE.RegisterCommand('videoSetSize', {\r\n  undo: true,\r\n  focus: false,\r\n  title: 'Update',\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.video.setSize() \r\n  }\r\n})\r\n","import FE from '../index.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  wordDeniedTags: [],\r\n  wordDeniedAttrs: [],\r\n  wordAllowedStyleProps: ['font-family', 'font-size', 'background', 'color', 'width', 'text-align', 'vertical-align', 'background-color', 'padding', 'margin', 'height', 'margin-top', 'margin-left', 'margin-right', 'margin-bottom', 'text-decoration', 'font-weight', 'font-style', 'text-indent', 'border', 'border-.*', 'line-height', 'list-style-type'],\r\n  wordPasteModal: true,\r\n  wordPasteKeepFormatting: true\r\n})\r\n\r\nFE.PLUGINS.wordPaste = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let $modal\r\n  const modal_id = 'word_paste'\r\n  let clipboard_html\r\n  const _v_shapes_map = {}\r\n\r\n  /*\r\n   * Init Word Paste.\r\n   */\r\n  function _init() {\r\n    editor.events.on('paste.wordPaste', function (html) {\r\n      clipboard_html = html\r\n\r\n      if (editor.opts.wordPasteModal) {\r\n        _showModal()\r\n      }\r\n      else {\r\n        clean(editor.opts.wordPasteKeepFormatting)\r\n      }\r\n\r\n      return false\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Build html body.\r\n   */\r\n  function _buildModalBody() {\r\n\r\n    // Begin body.\r\n    let body = '<div class=\"fr-word-paste-modal\" style=\"padding: 20px 20px 10px 20px;\">'\r\n    body += '<p style=\"text-align: left;\">' + editor.language.translate('The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?') + '</p>'\r\n    body += '<div style=\"text-align: right; margin-top: 50px;\"><button class=\"fr-remove-word fr-command\">' + editor.language.translate('Clean') + '</button> <button class=\"fr-keep-word fr-command\">' + editor.language.translate('Keep') + '</button></div>'\r\n\r\n    // End body.\r\n    body += '</div>'\r\n\r\n    return body\r\n  }\r\n\r\n  /*\r\n   * Show modal.\r\n   */\r\n  function _showModal() {\r\n    if (!$modal) {\r\n      const head = '<h4><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.95 73.23\" style=\"height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block\"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class=\"a\" d=\"M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z\" transform=\"translate(-575.97 -827.22)\"/><path class=\"b\" d=\"M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z\" transform=\"translate(-575.97 -827.22)\"/></svg> ' + editor.language.translate('Word Paste Detected') + '</h4>'\r\n      const body = _buildModalBody()\r\n\r\n      const modalHash = editor.modals.create(modal_id, head, body)\r\n\r\n      const $body = modalHash.$body\r\n      $modal = modalHash.$modal\r\n\r\n      modalHash.$modal.addClass('fr-middle')\r\n\r\n      editor.events.bindClick($body, 'button.fr-remove-word', function () {\r\n        const inst = $modal.data('instance') || editor\r\n        inst.wordPaste.clean()\r\n      })\r\n\r\n      editor.events.bindClick($body, 'button.fr-keep-word', function () {\r\n        const inst = $modal.data('instance') || editor\r\n\r\n        inst.wordPaste.clean(true)\r\n      })\r\n\r\n      // Resize help modal on window resize.\r\n      editor.events.$on($(editor.o_win), 'resize', function () {\r\n        editor.modals.resize(modal_id)\r\n      })\r\n    }\r\n\r\n    // Show modal.\r\n    editor.modals.show(modal_id)\r\n\r\n    // Modal may not fit window size.\r\n    editor.modals.resize(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Hide modal.\r\n   */\r\n  function _hideModal() {\r\n    editor.modals.hide(modal_id)\r\n  }\r\n\r\n  /*\r\n   * Word paste cleanup.\r\n   */\r\n  function clean(keep_formatting) {\r\n    const wordAllowedStylePropsBackup = editor.opts.wordAllowedStyleProps\r\n\r\n    if (!keep_formatting) {\r\n      editor.opts.wordAllowedStyleProps = []\r\n    }\r\n\r\n    // Firefox paste.\r\n    if (clipboard_html.indexOf('<colgroup>') === 0) {\r\n      clipboard_html = '<table>' + clipboard_html + '</table>'\r\n    }\r\n\r\n    // Replace spaces.\r\n    clipboard_html = clipboard_html.replace(/<span[\\n\\r ]*style='mso-spacerun:yes'>([\\r\\n\\u00a0 ]*)<\\/span>/g, function (str, match) {\r\n      let spaces = ''\r\n      let i = 0\r\n\r\n      while (i++ < match.length) {\r\n        spaces += '&nbsp;'\r\n      }\r\n\r\n      return spaces\r\n    })\r\n\r\n    \r\n    clipboard_html = _wordClean(clipboard_html, editor.paste.getRtfClipboard())\r\n    \r\n   \r\n\r\n    // Remove unwanted spaces.\r\n    const div = editor.doc.createElement('DIV')\r\n    div.innerHTML = clipboard_html\r\n    editor.html.cleanBlankSpaces(div)\r\n    clipboard_html = div.innerHTML\r\n\r\n    clipboard_html = editor.paste.cleanEmptyTagsAndDivs(clipboard_html)\r\n\r\n    // Remove invisible space.\r\n    clipboard_html = clipboard_html.replace(/\\u200b/g, '')\r\n\r\n    _hideModal()\r\n\r\n    // Clean the processed clipboard_html.\r\n    editor.paste.clean(clipboard_html, true, true)\r\n\r\n    editor.opts.wordAllowedStyleProps = wordAllowedStylePropsBackup\r\n  }\r\n\r\n  /**\r\n   * Remove a node. IE conpatible.\r\n   */\r\n  function _removeNode(node) {\r\n\r\n    const parent = node.parentNode\r\n\r\n    if (!parent) {\r\n\r\n      return\r\n    }\r\n\r\n    node.parentNode.removeChild(node)\r\n  }\r\n\r\n  /*\r\n   * Depth-first search traversing of the DOM.\r\n   */\r\n  function _traverse(node, callback) {\r\n\r\n    // Process node.\r\n    if (!callback(node)) {\r\n\r\n      return\r\n    }\r\n\r\n    // Expand node. Take its first child.\r\n    let child = node.firstChild\r\n\r\n    // While all childs are traversed.\r\n    while (child) {\r\n\r\n      // Store the current child.\r\n      const current_child = child\r\n\r\n      // Store the previous child.\r\n      const previous_child = child.previousSibling\r\n\r\n      // Take next child.\r\n      child = child.nextSibling\r\n\r\n      // Expand the current child.\r\n      _traverse(current_child, callback)\r\n\r\n\r\n      // An unwrap was made. Need to calculate again the next child.\r\n      if ((!current_child.previousSibling && !current_child.nextSibling && !current_child.parentNode) && child && (previous_child !== child.previousSibling) && child.parentNode) {\r\n        if (previous_child) {\r\n          child = previous_child.nextSibling\r\n        }\r\n        else {\r\n          child = node.firstChild\r\n        }\r\n      }\r\n\r\n      // A list was created. Need to calculate again the next child.\r\n      else if ((!current_child.previousSibling && !current_child.nextSibling && !current_child.parentNode) && child && (!child.previousSibling && !child.nextSibling && !child.parentNode)) {\r\n        if (previous_child) {\r\n          if (previous_child.nextSibling) {\r\n            child = previous_child.nextSibling.nextSibling\r\n          }\r\n          else {\r\n            child = null\r\n          }\r\n        }\r\n        else {\r\n          if (node.firstChild) {\r\n            child = node.firstChild.nextSibling\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Check if a node is a list. TODO: use Regex.\r\n   */\r\n  function _isList(node) {\r\n    // Check if it has mso-list:l in its style attribute.\r\n    if (!(node.getAttribute('style') && /mso-list:[\\s]*l/gi.test(node.getAttribute('style').replace(/\\n/gi, '')))) {\r\n\r\n      return false\r\n    }\r\n\r\n    // Using try-catch to skip undefined checking.\r\n    try {\r\n      // Check mso-list.\r\n      if (!node.querySelector('[style=\"mso-list:Ignore\"]')) {\r\n        if (node.outerHTML && node.outerHTML.indexOf('<!--[if !supportLists]-->') >= 0) {\r\n          return true;\r\n        }\r\n        return false\r\n      }\r\n    }\r\n    catch (e) {\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Get list level based on level attribute from node style.\r\n   */\r\n  function _getListLevel(node) {\r\n\r\n    return node.getAttribute('style').replace(/\\n/gi, '').replace(/.*level([0-9]+?).*/gi, '$1')\r\n  }\r\n\r\n  /*\r\n   * Get list content.\r\n   */\r\n  function _getListContent(node, head_style_hash) {\r\n\r\n    const cloned_node = node.cloneNode(true)\r\n\r\n    // Some lists might be wrapped in a link. So we need to unwrap.\r\n    // if (cloned_node.firstElementChild && cloned_node.firstElementChild.tagName === 'A') {\r\n    //   cloned_node = cloned_node.firstElementChild\r\n    // }\r\n\r\n    // Heading list.\r\n    if (['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].indexOf(node.tagName) !== -1) {\r\n      const heading = document.createElement(node.tagName.toLowerCase())\r\n      heading.setAttribute('style', node.getAttribute('style'))\r\n      heading.innerHTML = cloned_node.innerHTML\r\n      cloned_node.innerHTML = heading.outerHTML\r\n    }\r\n\r\n    // Clean node recursively.\r\n    _traverse(cloned_node, function (node) {\r\n      if (node.nodeType == Node.COMMENT_NODE && (editor.browser.msie || editor.browser.safari || editor.browser.edge)) {\r\n        try {\r\n          if (node.data === '[if !supportLists]') {\r\n            node = node.nextSibling;\r\n\r\n            while (node && node.nodeType !== Node.COMMENT_NODE) {\r\n              var tmp = node.nextSibling;\r\n              node.parentNode.removeChild(node);\r\n              node = tmp;\r\n            }\r\n\r\n            if (node && node.nodeType == Node.COMMENT_NODE) {\r\n              node.parentNode.removeChild(node);\r\n            }\r\n          }\r\n        }\r\n        catch (ex) {\r\n\r\n        }\r\n      }\r\n      \r\n      if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n        // Skip the first child which is an mso-list:Ignore node.\r\n\r\n        // 1854 For handling extra characters \r\n        if (node.getAttribute('style') === 'mso-list:\\nIgnore')\r\n          node.setAttribute(\"style\",\"mso-list:Ignore\")\r\n\r\n        if (node.getAttribute('style') === 'mso-list:Ignore') {\r\n          node.parentNode.removeChild(node)\r\n        }\r\n        node.setAttribute('style', _getAllowedListStyles(node));\r\n        _cleanElement(node, head_style_hash)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Take content.\r\n    let content = cloned_node.innerHTML\r\n\r\n    // Replace comments.\r\n    content = content.replace(/<!--[\\s\\S]*?-->/gi, '')\r\n\r\n    return content\r\n  }\r\n\r\n  /*\r\n   * Build ol/ul list.\r\n   */\r\n  function _buildList(node, head_style_hash, level,prev_margin) {\r\n\r\n    // Check ol/ul.\r\n    \r\n    const order_regex = /[0-9a-zA-Z]./gi\r\n    let is_ordered = false\r\n    let prev_order;\r\n    let previous_element_sibling\r\n\r\n    let browser = navigator.userAgent.toLowerCase();\r\n    \r\n    if (browser.indexOf('safari') != -1) { \r\n      if (browser.indexOf('chrome') > -1) {\r\n        browser = 1 // Chrome\r\n      } \r\n      else {\r\n        browser = 'safari' // Safari\r\n      }\r\n    }\r\n    \r\n    if(node.innerHTML.includes('mso-list:\\nIgnore'))\r\n    {\r\n      node.innerHTML=node.innerHTML.replace(/mso-list:\\nIgnore/gi,'mso-list:Ignore')\r\n    }\r\n    \r\n    let list_type_node = node.querySelector('span[style=\"mso-list:Ignore\"]');\r\n    \r\n    //this is added to check the browser is safari as we are not getting html same as chrome\r\n    if(list_type_node == null && browser == 'safari'){\r\n      list_type_node = node.querySelector('span[lang=\"PT-BR\"]');\r\n    }\r\n    \r\n    let contents;\r\n    let listObj;\r\n    let list_tag;\r\n    let listStyle;\r\n    let startIndexUpperAlpha= 64;\r\n    let startIndexLowerAlpha=96;\r\n\r\n    // Checking the list is ordered or unordered\r\n \r\n    if (list_type_node) {\r\n      is_ordered = is_ordered || order_regex.test(list_type_node.textContent);\r\n    }\r\n    \r\n    let listType\r\n    if(list_type_node!== null)\r\n      listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n    // Get the list type\r\n    // const list_tag = is_ordered ? 'ol' : 'ul'\r\n    if (is_ordered == true) {\r\n      listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n      if (listType == '1') {\r\n        listStyle = 'decimal;'\r\n      }\r\n      else if (listType == 'i') {\r\n        listStyle = 'lower-roman;'\r\n      }\r\n      else if (listType == 'I') {\r\n        listStyle = 'upper-roman;'\r\n      }\r\n      else if (listType == 'o') {\r\n        listStyle = 'circle;'\r\n      }\r\n      //https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      // to check the bullet lists\r\n      else if(!listType.match(/^v$/)) {\r\n        if(listType.match(/^[a-z]$/) || listType.match(/^[a-z]\\)$/)){\r\n          listStyle = 'lower-alpha;'\r\n        }\r\n        else if(listType.match(/^[A-Z]$/) || listType.match(/^[A-Z]\\)$/)){\r\n          listStyle = 'upper-alpha;'\r\n        }\r\n      }\r\n\r\n      listStyle = 'list-style-type: ' + listStyle;\r\n      list_tag = 'ol'\r\n    }\r\n    else {\r\n      if(list_type_node!=null)\r\n        listType = list_type_node.textContent.trim().split('.')[0];\r\n\r\n      if(listType=='§')\r\n      {\r\n        listStyle='square;'\r\n      }\r\n      else if(listType== \"·\")\r\n      {\r\n        listStyle='disc;'\r\n      }\r\n\r\n      listStyle = 'list-style-type: ' + listStyle;\r\n      list_tag = 'ul';\r\n    }\r\n\r\n    // creating new list\r\n    let classType = ''\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1860\r\n    if(list_type_node != undefined && list_type_node.textContent != undefined && !isNaN(parseInt(list_type_node.textContent.trim().split('.')[1], 10))){\r\n      classType = ' class=\"decimal_type\" '\r\n    }\r\n    let s \r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n    const next_level = _getListLevel(node);\r\n    let margin = node.style.marginLeft\r\n    let size\r\n    if(margin.includes('in')){\r\n      size = 'in'\r\n      margin = parseFloat(margin) - 0.5\r\n    }\r\n    else if(margin.includes('pt')){\r\n      size = 'px'\r\n      margin = parseFloat(margin) - 10\r\n    }\r\n\r\n    if(next_level==1){\r\n\r\n      s = listStyle ? '<' + list_tag + ' style = \"' + listStyle +'; margin-left:'+ margin+ size + ';\">' : '<' + list_tag  +' style=\"margin-left:'+margin+size+';\"'+ '>';\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      if(listStyle == 'list-style-type: upper-alpha;'){\r\n        let index= listType.charCodeAt(0) - startIndexUpperAlpha;\r\n        s = listStyle ? '<' + list_tag + classType +' start=\"'+index+'\"' + ' style = \"' + listStyle +' margin-left:'+ margin+ size + ';\">' : '<' + list_tag  + '>';\r\n      }\r\n      else if(listStyle == 'list-style-type: lower-alpha;'){  \r\n        let index= listType.charCodeAt(0) - startIndexLowerAlpha;\r\n        s = listStyle ? '<' + list_tag +  classType+' start=\"'+index+'\"' + ' style = \"' + listStyle +'margin-left:'+ margin+ size + ';\">' : '<' + list_tag  + '>'; \r\n      }\r\n      else{\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle +';margin-left:'+ margin+ size + ';\">' : '<' + list_tag  +' style=\"margin-left:'+margin+size+';\"'+ '>';\r\n      }\r\n    }\r\n    else{\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1887\r\n      if(listStyle == 'list-style-type: upper-alpha;'){\r\n        let index= listType.charCodeAt(0) - startIndexUpperAlpha;\r\n        s = listStyle ? '<' + list_tag + classType + ' style = \"' + listStyle + ' start=\"'+index+'\">' : '<' + list_tag  + '>';\r\n      }\r\n      else if(listStyle == 'list-style-type: lower-alpha;'){  \r\n        let index= listType.charCodeAt(0) - startIndexLowerAlpha;\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle + ' start=\"'+index+'\">' : '<' + list_tag  + '>'; \r\n      }\r\n      else{\r\n        s = listStyle ? '<' + list_tag +  classType + ' style = \"' + listStyle + '\">' : '<' + list_tag  + '>';\r\n      }\r\n    }\r\n\r\n    let tagClosedFlag = false\r\n    while (node) {\r\n      // Stop at first sibling that is not a list.\r\n      if (!_isList(node)) {\r\n\r\n        // Skip bookmarks.\r\n        if (node.outerHTML && node.outerHTML.indexOf('mso-bookmark') > 0 && (node.textContent || '').length == 0) {\r\n          node = node.nextElementSibling;\r\n          continue\r\n        }\r\n\r\n        break\r\n      }\r\n\r\n      // getting level of next node\r\n      const next_level = _getListLevel(node);\r\n\r\n      // Set the level if it's the first level or use the same\r\n      level = level || next_level;\r\n\r\n      // Create new list if next node level is greater than current one\r\n      if (next_level > level) {\r\n        listObj = _buildList(node, head_style_hash, next_level, node.style.marginLeft);\r\n        s += listObj.el.outerHTML;\r\n\r\n        // Getting the subsequent node after creating new list\r\n        node = listObj.currentNode;\r\n        // Need to start over to check if next node might be on same level\r\n        continue;\r\n      }\r\n      else if (next_level < level) {\r\n        // Lower level found. Current list is done.\r\n        break\r\n      }\r\n      else {\r\n\r\n        // Checked list tag if levels are same.(https://github.com/froala/wysiwyg-editor/issues/3088)\r\n        // Checking the order of next element.\r\n        if (node.firstElementChild && node.firstElementChild.firstElementChild && node.firstElementChild.firstElementChild.firstChild) {\r\n          order_regex.lastIndex = 0\r\n        }\r\n\r\n        // Checking the order of current element.\r\n        if (previous_element_sibling && previous_element_sibling.firstElementChild && previous_element_sibling.firstElementChild.firstElementChild && previous_element_sibling.firstElementChild.firstElementChild.firstChild) {\r\n          order_regex.lastIndex = 0\r\n          prev_order = order_regex.test(previous_element_sibling.firstElementChild.firstElementChild.firstChild.data || (previous_element_sibling.firstElementChild.firstElementChild.firstChild.firstChild && previous_element_sibling.firstElementChild.firstElementChild.firstChild.firstChild.data) || '')\r\n        }\r\n        // If levels are same,we are comparing the order of the next element.\r\n        // If the order is same it will append the element in existing list else will create a new list.\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n        // Added condition for ul and ol lists to differentiate the behavior of the list with different type of lists.\r\n        let isMarginEqual = false\r\n        if(!prev_margin && !node.style.marginLeft || (prev_margin && node.style.marginLeft && prev_margin === node.style.marginLeft)){\r\n          isMarginEqual = true\r\n        }\r\n        prev_margin = node.style.marginLeft\r\n\r\n        if (isMarginEqual || prev_order === undefined) {\r\n          contents = _getListContent(node, head_style_hash)\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1860\r\n          if(node.nextSibling.innerText != undefined && node.nextSibling.innerText != undefined && !s.includes('class=\"decimal_type\"')){\r\n            if(!isNaN(parseInt(node.nextSibling.innerText.trim().split('.')[1], 10))){\r\n              s = s.substring(3, 0) + ' class=\"decimal_type\"' + s.substring(3, s.length)\r\n            }\r\n          }\r\n\r\n          s += '<li>' + contents + '</li>'\r\n        }\r\n        else {\r\n          // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n          if(next_level==1){\r\n            s += '</' + list_tag + '>'\r\n            tagClosedFlag =true\r\n            previous_element_sibling = null\r\n          }\r\n          listObj = _buildList(node, head_style_hash, next_level,node.style.marginLeft)\r\n          s += listObj.el.outerHTML\r\n          node = listObj.currentNode\r\n        }\r\n      }\r\n\r\n      // Storing the next sibling in temporary variable\r\n      let tmp = node && node.nextElementSibling;\r\n\r\n      // Check if node is there get the previous element sibling\r\n      if (tmp) {\r\n        previous_element_sibling = tmp.previousElementSibling\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1854\r\n      if (node && !_isList(node)) {\r\n        // Skip bookmarks.\r\n        if (node.outerHTML && node.outerHTML.indexOf('mso-bookmark') > 0 && (node.textContent || '').length == 0) {\r\n          node = node.nextElementSibling;\r\n          continue\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      // Remove the used node\r\n      node && node.parentNode && node.parentNode.removeChild(node)\r\n\r\n      // Restore the next sibling to node\r\n      node = tmp\r\n\r\n    }\r\n\r\n    // Finish list\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1861\r\n    if(!tagClosedFlag)\r\n      s += '</' + list_tag + '>'\r\n\r\n    // Convert string to node element.\r\n    const div = document.createElement('div')\r\n    div.innerHTML = s\r\n    const element = div\r\n\r\n    // Returning list element and current node\r\n    return {\r\n      el: element,\r\n      currentNode: node\r\n    }\r\n  }\r\n\r\n  function _getAllowedListStyles(node) {\r\n    let styles = ''\r\n    let allowedStyles = ['line-height', 'font-family', 'font-size', 'color', 'background']\r\n    let parentStyles = node.getAttribute('style')\r\n\r\n    if (parentStyles) {\r\n      allowedStyles.forEach(function (style) {\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/1852\r\n        let foundVal = parentStyles.match(new RegExp(style + ':.*(;|)'))\r\n\r\n        if (foundVal) {\r\n          styles += foundVal[0] + ';'\r\n        }\r\n      })\r\n    }\r\n\r\n    return styles\r\n\r\n  }\r\n\r\n  /*\r\n   * Change tag name of an element.\r\n   */\r\n  function _changeTagName(old_node, tag_name) {\r\n\r\n    const new_node = document.createElement(tag_name)\r\n\r\n    for (let i = 0; i < old_node.attributes.length; i++) {\r\n      const attribute = old_node.attributes[i].name\r\n      new_node.setAttribute(attribute, old_node.getAttribute(attribute))\r\n    }\r\n\r\n    new_node.innerHTML = old_node.innerHTML\r\n\r\n    old_node.parentNode.replaceChild(new_node, old_node)\r\n\r\n    return new_node\r\n  }\r\n\r\n  /*\r\n   * Clean tr element.\r\n   */\r\n  function _cleanTr(tr, head_style_hash) {\r\n\r\n    // Clean tr attributes.\r\n    editor.node.clearAttributes(tr)\r\n\r\n    // Get first child.\r\n    let child = tr.firstElementChild\r\n\r\n    // Total table width.\r\n    let total_width = 0\r\n\r\n    // Tell if at least one child has a missing width.\r\n    let missing_width = false\r\n\r\n    // Width attribute.\r\n    let width_attr = null\r\n\r\n    // Clean td childs and calculate total table width.\r\n    while (child) {\r\n\r\n      // Cleanup w: tags.\r\n      if (child.firstElementChild && child.firstElementChild.tagName.indexOf('W:') !== -1) {\r\n        child.innerHTML = child.firstElementChild.innerHTML\r\n      }\r\n\r\n      // Add width to total.\r\n      width_attr = child.getAttribute('width')\r\n\r\n      if (!width_attr && !missing_width) {\r\n        missing_width = true\r\n      }\r\n      total_width += parseInt(width_attr, 10)\r\n\r\n      // Replace to <br> childs that are empty or &nbsp.\r\n      if (!child.firstChild || (child.firstChild && child.firstChild.data === FE.UNICODE_NBSP)) {\r\n        if (child.firstChild) {\r\n          _removeNode(child.firstChild)\r\n        }\r\n        child.innerHTML = '<br>'\r\n      }\r\n\r\n      let td_child = child.firstElementChild\r\n\r\n      // If child has more than one children, it means that every child has its own alignment.\r\n      const has_single_child = child.children.length === 1\r\n\r\n      // Change p to span or div and clean alignment on every element child.\r\n      while (td_child) {\r\n\r\n        if (td_child.tagName === 'P' && !_isList(td_child)) {\r\n          // Set alignment to td parent.\r\n          if (has_single_child) {\r\n            _cleanAlignment(td_child)\r\n          }\r\n        }\r\n\r\n        // Move to next element sibling.\r\n        td_child = td_child.nextElementSibling\r\n      }\r\n\r\n      // Add styles from head.\r\n      if (head_style_hash) {\r\n\r\n        // Style from .xl classes.\r\n        // Get class from child.\r\n        let class_attr = child.getAttribute('class')\r\n\r\n        if (class_attr) {\r\n          class_attr = _normalizeAttribute(class_attr)\r\n\r\n          // Match xl class.\r\n          const class_matches = class_attr.match(/xl[0-9]+/gi)\r\n\r\n          if (class_matches) {\r\n            const xl_class = class_matches[0]\r\n            const dot_xl_class = '.' + xl_class\r\n\r\n            if (head_style_hash[dot_xl_class]) {\r\n              _appendStyle(child, head_style_hash[dot_xl_class])\r\n            }\r\n          }\r\n        }\r\n\r\n        // Style from td.\r\n        if (head_style_hash.td) {\r\n          _appendStyle(child, head_style_hash.td)\r\n        }\r\n      }\r\n\r\n      let style = child.getAttribute('style')\r\n\r\n      if (style) {\r\n        style = _normalizeAttribute(style)\r\n\r\n        // Add semicolon, if it is missing, to the end of current style.\r\n        if (style && style.slice(-1) !== ';') {\r\n          style += ';'\r\n        }\r\n      }\r\n\r\n      // Store valign attribute.\r\n      let valign = child.getAttribute('valign')\r\n\r\n      if (!valign && style) {\r\n        const valign_matches = style.match(/vertical-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (valign_matches) {\r\n          valign = valign_matches[valign_matches.length - 1].replace(/vertical-align:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n      }\r\n\r\n      // Store text-align style attribute.\r\n      let halign = null\r\n\r\n      if (style) {\r\n        const halign_matches = style.match(/text-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (halign_matches) {\r\n          halign = halign_matches[halign_matches.length - 1].replace(/text-align:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n\r\n        if (halign === 'general') {\r\n          halign = null\r\n        }\r\n      }\r\n\r\n      // Store background color style attribute.\r\n      let background_color = null\r\n\r\n      if (style) {\r\n        const background_matches = style.match(/background:.+?[; \"]{1,1}/gi)\r\n\r\n        if (background_matches) {\r\n          background_color = background_matches[background_matches.length - 1].replace(/background:(.+?)[; \"]{1,1}/gi, '$1')\r\n        }\r\n      }\r\n\r\n      // Store colspan.\r\n      const colspan = child.getAttribute('colspan')\r\n\r\n      // Store rowspan.\r\n      const rowspan = child.getAttribute('rowspan')\r\n\r\n      // Restore colspan.\r\n      if (colspan) {\r\n        child.setAttribute('colspan', colspan)\r\n      }\r\n\r\n      // Restore rowspan.\r\n      if (rowspan) {\r\n        child.setAttribute('rowspan', rowspan)\r\n      }\r\n\r\n      // Add valign to style.\r\n      if (valign) {\r\n        child.style['vertical-align'] = valign\r\n      }\r\n\r\n      // Add horizontal align to style.\r\n      if (halign) {\r\n        child.style['text-align'] = halign\r\n      }\r\n\r\n      // Add background color to style.\r\n      if (background_color) {\r\n        child.style['background-color'] = background_color\r\n      }\r\n\r\n      // Set the width again.\r\n      if (width_attr) {\r\n        child.setAttribute('width', width_attr)\r\n      }\r\n\r\n      // Move to next sibling.\r\n      child = child.nextElementSibling\r\n\r\n    }\r\n\r\n    // Get first child again.\r\n    child = tr.firstElementChild\r\n\r\n    // Set the width in percentage to every child.\r\n    while (child) {\r\n      width_attr = child.getAttribute('width')\r\n\r\n      if (missing_width) {\r\n\r\n        // Remove width.\r\n        child.removeAttribute('width')\r\n      }\r\n      else {\r\n\r\n        // Set the width considering that every child has equal widths.\r\n        child.setAttribute('width', (parseInt(width_attr, 10) * 100) / total_width + '%')\r\n      }\r\n\r\n      // Move to next sibling.\r\n      child = child.nextElementSibling\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean align attribute.\r\n   */\r\n  function _cleanAlignment(el) {\r\n\r\n    const align = el.getAttribute('align')\r\n\r\n    if (align) {\r\n      el.style['text-align'] = align\r\n      el.removeAttribute('align')\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean up atribute.\r\n   */\r\n  function _normalizeAttribute(attribute) {\r\n\r\n    return attribute.replace(/\\n|\\r|\\n\\r|&quot;/g, '')\r\n  }\r\n\r\n  /*\r\n   * Append style to element.\r\n   */\r\n  function _appendStyle(el, style, last) {\r\n\r\n    if (!style) {\r\n      return\r\n    }\r\n\r\n    // Get current element style.\r\n    let old_style = el.getAttribute('style')\r\n\r\n    // Add semicolon, if it is missing, to the end of current style.\r\n    if (old_style && old_style.slice(-1) !== ';') {\r\n      old_style += ';'\r\n    }\r\n\r\n    // Add semicolon, if it is missing, to the end of current style.\r\n    if (style && style.slice(-1) !== ';') {\r\n      style += ';'\r\n    }\r\n\r\n    // Remove newlines.\r\n    style = style.replace(/\\n/gi, '')\r\n\r\n    // Append at the begining or at the end.\r\n    let new_style = null\r\n\r\n    if (last) {\r\n      new_style = (old_style || '') + style\r\n    }\r\n    else {\r\n      new_style = style + (old_style || '')\r\n    }\r\n    el.setAttribute('style', new_style)\r\n  }\r\n\r\n  /*\r\n   * Delete duplicate attributes found on style. Keep the last one.\r\n   */\r\n  function _cleanStyleDuplicates(el) {\r\n    let style = el.getAttribute('style')\r\n\r\n    if (!style) {\r\n\r\n      return\r\n    }\r\n\r\n    style = _normalizeAttribute(style)\r\n\r\n    // Add semicolon, if it is missing, to the end of style.\r\n    if (style && style.slice(-1) !== ';') {\r\n      style += ';'\r\n    }\r\n\r\n    // Get styles: attr:value\r\n    const style_list = style.match(/(^|\\S+?):.+?;{1,1}/gi)\r\n\r\n    if (!style_list) {\r\n      return\r\n    }\r\n\r\n    // Key = attribute. Value = attribute's value. Duplicate keys will be overrided.\r\n    const style_hash = {}\r\n\r\n    for (let i = 0; i < style_list.length; i++) {\r\n      const style_list_item = style_list[i]\r\n\r\n      const splited_style = style_list_item.split(':')\r\n\r\n      if (splited_style.length !== 2) {\r\n        continue\r\n      }\r\n\r\n      // Add style to hash without text-align on span.\r\n      if (!(splited_style[0] === 'text-align' && el.tagName === 'SPAN')) {\r\n        style_hash[splited_style[0]] = splited_style[1]\r\n      }\r\n    }\r\n\r\n    // Create the new style without duplicates.\r\n    let new_style = ''\r\n\r\n    for (const attr in style_hash) {\r\n      if (style_hash.hasOwnProperty(attr)) {\r\n\r\n        // Change font-size form pt to px\r\n        if (attr === 'font-size' && style_hash[attr].slice(-3) === 'pt;') {\r\n          let number = null\r\n\r\n          try {\r\n            number = parseFloat(style_hash[attr].slice(0, -3), 10)\r\n          }\r\n          catch (e) {\r\n            number = null\r\n          }\r\n\r\n          if (number) {\r\n            number = Math.round(1.33 * number)\r\n            style_hash[attr] = number + 'px;'\r\n          }\r\n        }\r\n\r\n        new_style += attr + ':' + style_hash[attr]\r\n      }\r\n    }\r\n\r\n    if (new_style) {\r\n      el.setAttribute('style', new_style)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Convert a hex string to base64.\r\n   */\r\n  function _hexToBase64(hex) {\r\n    const hexa_chars = hex.match(/[0-9a-f]{2}/gi)\r\n\r\n    const dec_chars = []\r\n\r\n    for (let i = 0; i < hexa_chars.length; i++) {\r\n      dec_chars.push(String.fromCharCode(parseInt(hexa_chars[i], 16)))\r\n    }\r\n\r\n    const dec = dec_chars.join('')\r\n\r\n    return btoa(dec)\r\n  }\r\n\r\n  let _rtf_map = null\r\n\r\n  function _getRtfData(rtf, letter, p_type) {\r\n    const imgs = rtf.split(p_type)\r\n\r\n    for (let i = 1; i < imgs.length; i++) {\r\n      let img_data = imgs[i]\r\n\r\n      img_data = img_data.split('shplid')\r\n\r\n      if (img_data.length > 1) {\r\n\r\n        img_data = img_data[1]\r\n\r\n        let id = ''\r\n        let t = 0\r\n\r\n        while (t < img_data.length) {\r\n          if (img_data[t] === '\\\\' || img_data[t] === '{' || img_data[t] === ' ' || img_data[t] === '\\r' || img_data[t] === '\\n') {\r\n            break\r\n          }\r\n\r\n          id += img_data[t]\r\n\r\n          t++\r\n        }\r\n\r\n        const bliptab_split = img_data.split('bliptag')\r\n\r\n        if (bliptab_split && bliptab_split.length < 2) {\r\n\r\n          continue\r\n        }\r\n\r\n        let image_type = null\r\n\r\n        if (bliptab_split[0].indexOf('pngblip') !== -1) {\r\n          image_type = 'image/png'\r\n        }\r\n        else if (bliptab_split[0].indexOf('jpegblip') !== -1) {\r\n          image_type = 'image/jpeg'\r\n        }\r\n\r\n        if (!image_type) {\r\n\r\n          continue\r\n        }\r\n\r\n        const bracket_split = bliptab_split[1].split('}')\r\n\r\n        if (bracket_split && bracket_split.length < 2) {\r\n\r\n          continue\r\n        }\r\n\r\n        let space_split\r\n\r\n        if (bracket_split.length > 2 && bracket_split[0].indexOf('blipuid') !== -1) {\r\n          space_split = bracket_split[1].split(' ')\r\n        }\r\n        else {\r\n          space_split = bracket_split[0].split(' ')\r\n\r\n          if (space_split && space_split.length < 2) {\r\n\r\n            continue\r\n          }\r\n\r\n          space_split.shift()\r\n        }\r\n\r\n        const image_hex = space_split.join('')\r\n\r\n        _rtf_map[letter + id] = {\r\n          image_hex: image_hex,\r\n          image_type: image_type\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _buildRtfMap(rtf) {\r\n    _rtf_map = {}\r\n\r\n    _getRtfData(rtf, 'i', '\\\\shppict')\r\n    _getRtfData(rtf, 's', '\\\\shp{')\r\n  }\r\n\r\n  /*\r\n   * Clean HTML Image.\r\n   */\r\n  function _cleanImage(el, rtf) {\r\n\r\n    if (!rtf) {\r\n\r\n      return\r\n    }\r\n\r\n    // vshapes_tag will identify the image in rtf.\r\n    let vshapes_tag\r\n\r\n    // Image case.\r\n    if (el.tagName === 'IMG') {\r\n      // Get src.\r\n      const src = el.getAttribute('src')\r\n\r\n      if (!src || src.indexOf('file://') === -1) {\r\n        return\r\n      }\r\n\r\n      else if (src.indexOf('file://') === 0) {\r\n        if (editor.helpers.isURL(el.getAttribute('alt'))) {\r\n          el.setAttribute('src', el.getAttribute('alt'))\r\n\r\n          return\r\n        }\r\n      }\r\n\r\n      // vshapes_tag will identify the image in rtf.\r\n      vshapes_tag = _v_shapes_map[el.getAttribute('v:shapes')]\r\n\r\n      if (!vshapes_tag) {\r\n        vshapes_tag = el.getAttribute('v:shapes')\r\n        // Disregard formulas.\r\n        if (el.parentNode && el.parentNode.parentNode && el.parentNode.parentNode.innerHTML.indexOf('msEquation') >= 0) {\r\n          vshapes_tag = null\r\n        }\r\n      }\r\n\r\n    }\r\n    else {\r\n      vshapes_tag = el.parentNode.getAttribute('o:spid')\r\n    }\r\n\r\n    el.removeAttribute('height')\r\n\r\n    if (!vshapes_tag) {\r\n\r\n      return\r\n    }\r\n\r\n    _buildRtfMap(rtf)\r\n\r\n    const img_data = _rtf_map[vshapes_tag.substring(7)]\r\n\r\n    if (img_data) {\r\n\r\n      // Convert image hex to base64.\r\n      const image_base64 = _hexToBase64(img_data.image_hex)\r\n\r\n      // Build data uri.\r\n      const data_uri = 'data:' + img_data.image_type + ';base64,' + image_base64\r\n\r\n      if (el.tagName === 'IMG') {\r\n        el.src = data_uri\r\n        el.setAttribute('data-fr-image-pasted', true)\r\n      }\r\n      else {\r\n        $(el.parentNode).before('<img data-fr-image-pasted=\"true\" src=\"' + data_uri + '\" style=\"' + el.parentNode.getAttribute('style') + '\">').remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean element.\r\n   */\r\n  function _cleanElement(el, head_style_hash) {\r\n\r\n    const tag_name = el.tagName\r\n    const tag_name_lower_case = tag_name.toLowerCase()\r\n\r\n    // Check if we need to change a tag. Tags should be changed only from parent.\r\n    if (el.firstElementChild) {\r\n\r\n      // Change i to em.\r\n      if (el.firstElementChild.tagName === 'I') {\r\n        _changeTagName(el.firstElementChild, 'em')\r\n\r\n        // Change b to strong.\r\n      }\r\n      else if (el.firstElementChild.tagName === 'B') {\r\n        _changeTagName(el.firstElementChild, 'strong')\r\n      }\r\n    }\r\n\r\n    // Remove no needed tags.\r\n    const word_tags = ['SCRIPT', 'APPLET', 'EMBED', 'NOFRAMES', 'NOSCRIPT']\r\n\r\n    if (word_tags.indexOf(tag_name) !== -1) {\r\n      _removeNode(el)\r\n\r\n      return false\r\n    }\r\n\r\n    // Check single spaces.\r\n    // if (tag_name === 'O:P' && el.innerHTML === '&nbsp') {\r\n    //   el.innerHTML = FE.INVISIBLE_SPACE\r\n    // }\r\n\r\n    // Remove tags but keep content.\r\n    const ignore_tags = ['META', 'LINK', 'XML', 'ST1:', 'O:', 'W:', 'FONT']\r\n\r\n    for (let i = 0; i < ignore_tags.length; i++) {\r\n      if (tag_name.indexOf(ignore_tags[i]) !== -1) {\r\n        if (el.innerHTML) {\r\n          el.outerHTML = el.innerHTML\r\n          _removeNode(el)\r\n\r\n          return false\r\n        }\r\n        else {\r\n\r\n          // Remove if does not have content.\r\n          _removeNode(el)\r\n\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add class style from head.\r\n    if (tag_name !== 'TD') {\r\n\r\n      let class_attr = el.getAttribute('class') || 'MsoNormal'\r\n\r\n      if (head_style_hash && class_attr) {\r\n        class_attr = _normalizeAttribute(class_attr)\r\n        const class_contents = class_attr.split(' ')\r\n\r\n        // All classes.\r\n        for (let i = 0; i < class_contents.length; i++) {\r\n          const class_content = class_contents[i]\r\n\r\n          // Create style attributes list.\r\n          const style_attrs = []\r\n\r\n          // Only classes.\r\n          let style_attr = '.' + class_content\r\n          style_attrs.push(style_attr)\r\n\r\n          // Classes under tag.\r\n          style_attr = tag_name_lower_case + style_attr\r\n          style_attrs.push(style_attr)\r\n\r\n          for (let j = 0; j < style_attrs.length; j++) {\r\n            if (head_style_hash[style_attrs[j]]) {\r\n              _appendStyle(el, head_style_hash[style_attrs[j]])\r\n            }\r\n          }\r\n        }\r\n\r\n        el.removeAttribute('class')\r\n      }\r\n\r\n      // Add tag style from head.\r\n      if (head_style_hash && head_style_hash[tag_name_lower_case]) {\r\n        _appendStyle(el, head_style_hash[tag_name_lower_case])\r\n      }\r\n    }\r\n\r\n    // Wrap paragraphs inner html in a span.\r\n    const paragraph_tag_list = ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'PRE']\r\n\r\n    if (paragraph_tag_list.indexOf(tag_name) !== -1) {\r\n\r\n      // Set style from head.\r\n      const el_class = el.getAttribute('class')\r\n\r\n      if (el_class) {\r\n        if (head_style_hash && head_style_hash[tag_name.toLowerCase() + '.' + el_class]) {\r\n          _appendStyle(el, head_style_hash[tag_name.toLowerCase() + '.' + el_class])\r\n        }\r\n\r\n        // Remove mso values from class.\r\n        if (el_class.toLowerCase().indexOf('mso') !== -1) {\r\n          let cleaned_class = _normalizeAttribute(el_class)\r\n          cleaned_class = cleaned_class.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi, '')\r\n\r\n          if (cleaned_class) {\r\n            el.setAttribute('class', cleaned_class)\r\n          }\r\n          else {\r\n            el.removeAttribute('class')\r\n          }\r\n        }\r\n      }\r\n\r\n      // keep only text-align in style.\r\n      const paragraph_style = el.getAttribute('style')\r\n\r\n      if (paragraph_style) {\r\n        const paragraph_style_matches = paragraph_style.match(/text-align:.+?[; \"]{1,1}/gi)\r\n\r\n        if (paragraph_style_matches) {\r\n          paragraph_style_matches[paragraph_style_matches.length - 1].replace(/(text-align:.+?[; \"]{1,1})/gi, '$1')\r\n        }\r\n      }\r\n\r\n      _cleanAlignment(el)\r\n    }\r\n\r\n    // Clean tr.\r\n    if (tag_name === 'TR') {\r\n      _cleanTr(el, head_style_hash)\r\n    }\r\n\r\n    // Clean empty links.\r\n    if (tag_name === 'A' && !el.attributes.getNamedItem('href') && !el.attributes.getNamedItem('name') && el.innerHTML) {\r\n      el.outerHTML = el.innerHTML\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3272\r\n    if (tag_name == 'A' &&  el.getAttribute('href') && el.querySelector('img')) {\r\n      // removing empty span tags\r\n      let spanTags = el.querySelectorAll('span')\r\n\r\n      for (let i = 0; i < spanTags.length; i++) {\r\n\r\n        if (!spanTags[i].innerText) {\r\n          spanTags[i].outerHTML = spanTags[i].innerHTML\r\n        }\r\n      }\r\n    }\r\n\r\n    // Keep empty TH and TD.\r\n    if ((tag_name === 'TD' || tag_name === 'TH') && !el.innerHTML) {\r\n      el.innerHTML = '<br>'\r\n    }\r\n\r\n    // Clean table.\r\n    if (tag_name === 'TABLE') {\r\n      el.style.width = el.style.width\r\n    }\r\n\r\n    // Remove lang attribute.\r\n    if (el.getAttribute('lang')) {\r\n      el.removeAttribute('lang')\r\n    }\r\n\r\n    // Remove mso values from style.\r\n    if (el.getAttribute('style') && el.getAttribute('style').toLowerCase().indexOf('mso') !== -1) {\r\n      let cleaned_style = _normalizeAttribute(el.getAttribute('style'))\r\n      cleaned_style = cleaned_style.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi, '')\r\n\r\n      if (cleaned_style) {\r\n        el.setAttribute('style', cleaned_style)\r\n      }\r\n      else {\r\n        el.removeAttribute('style')\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Parse styles from head and return them into a hash.\r\n   */\r\n  function _parseHeadStyle(head) {\r\n\r\n    const head_style_hash = {}\r\n\r\n    const head_styles = head.getElementsByTagName('style')\r\n\r\n    if (head_styles.length) {\r\n      const head_style = head_styles[0]\r\n\r\n      // Match styles.\r\n      const style_list = head_style.innerHTML.match(/[\\S ]+\\s+{[\\s\\S]+?}/gi)\r\n\r\n      if (style_list) {\r\n        for (let i = 0; i < style_list.length; i++) {\r\n          const style = style_list[i]\r\n\r\n          // Get style attributes.\r\n          let style_attrs = style.replace(/([\\S ]+\\s+){[\\s\\S]+?}/gi, '$1')\r\n\r\n          // Get style definitions.\r\n          let style_definitions = style.replace(/[\\S ]+\\s+{([\\s\\S]+?)}/gi, '$1')\r\n\r\n          // Trim whitespaces.\r\n          style_attrs = style_attrs.replace(/^[\\s]|[\\s]$/gm, '')\r\n          style_definitions = style_definitions.replace(/^[\\s]|[\\s]$/gm, '')\r\n\r\n          // Trim new lines.\r\n          style_attrs = style_attrs.replace(/\\n|\\r|\\n\\r/g, '')\r\n          style_definitions = style_definitions.replace(/\\n|\\r|\\n\\r/g, '')\r\n\r\n          const style_attrs_array = style_attrs.split(', ')\r\n\r\n          // Add every attribute to hash.\r\n          for (let j = 0; j < style_attrs_array.length; j++) {\r\n            head_style_hash[style_attrs_array[j]] = style_definitions\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return head_style_hash\r\n  }\r\n\r\n  /**\r\n   * Create a map with the ID for images.\r\n   */\r\n  function _getVShapes(html) {\r\n    const splits = html.split('v:shape')\r\n\r\n    for (let i = 1; i < splits.length; i++) {\r\n      const split = splits[i]\r\n      let id = split.split(' id=\"')[1]\r\n\r\n      if (id && id.length > 1) {\r\n        id = id.split('\"')[0]\r\n\r\n        let oid = split.split(' o:spid=\"')[1]\r\n\r\n        if (oid && oid.length > 1) {\r\n          oid = oid.split('\"')[0]\r\n\r\n          _v_shapes_map[id] = oid\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Clean HTML that was pasted from Word.\r\n   */\r\n  function _wordClean(html, rtf) {\r\n    // Remove junk from outside html.\r\n    if (html.indexOf('<html') >= 0) {\r\n      html = html.replace(/[.\\s\\S\\w\\W<>]*(<html[^>]*>[.\\s\\S\\w\\W<>]*<\\/html>)[.\\s\\S\\w\\W<>]*/i, '$1')\r\n    }\r\n\r\n    // Get the vshapes for images.\r\n    _getVShapes(html)\r\n\r\n    // Convert string into document.\r\n    const parser = new DOMParser()\r\n    const word_doc = parser.parseFromString(html, 'text/html')\r\n\r\n    const head = word_doc.head\r\n    const body = word_doc.body\r\n    // Create style attrs hash.\r\n    const head_style_hash = _parseHeadStyle(head)\r\n\r\n    // Remove text nodes that do not contain non-whitespace characters and has new lines in them.\r\n    _traverse(body, function (node) {\r\n      if (node.nodeType === Node.TEXT_NODE && /\\n|\\u00a0|\\r/.test(node.data)) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3298\r\n        // https://github.com/froala/wysiwyg-editor/issues/3327\r\n        // if has no breaking space keep it\r\n        // 2nd condition to check no break spaces\r\n        if (!/\\S| /.test(node.data) && !/[\\u00a0]+/.test(node.data)) {\r\n          // Keep single &nbsp\r\n          if (node.data === FE.UNICODE_NBSP) {\r\n            node.data = '\\u200b'\r\n\r\n            return true\r\n          }\r\n\r\n          if (node.data.length === 1 && node.data.charCodeAt(0) === 10) {\r\n            node.data = ' '\r\n\r\n            return true\r\n          }\r\n\r\n          _removeNode(node)\r\n\r\n          return false\r\n        }\r\n\r\n        // Remove newlines.\r\n        else {\r\n          node.data = node.data.replace(/\\n|\\r/gi, ' ')\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Process images.\r\n    _traverse(body, function (node) {\r\n\r\n      // Element node.\r\n      if (node.nodeType === Node.ELEMENT_NODE && (node.tagName === 'V:IMAGEDATA' || node.tagName === 'IMG')) {\r\n        _cleanImage(node, rtf)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Process lists.\r\n    const lists = body.querySelectorAll('ul > ul, ul > ol, ol > ul, ol > ol')\r\n\r\n    for (let i = lists.length - 1; i >= 0; i--) {\r\n      if (lists[i].previousElementSibling && lists[i].previousElementSibling.tagName === 'LI') {\r\n        lists[i].previousElementSibling.appendChild(lists[i])\r\n      }\r\n    }\r\n\r\n    // Clean the body.\r\n    _traverse(body, function (node) {\r\n\r\n      // Text node.\r\n      if (node.nodeType === Node.TEXT_NODE) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1364.\r\n        node.data = node.data.replace(/<br>(\\n|\\r)/gi, '<br>')\r\n\r\n        return false\r\n      }\r\n\r\n      // Element node.\r\n      else if (node.nodeType === Node.ELEMENT_NODE) {\r\n        // List found.\r\n        if (_isList(node)) {\r\n          // Keep the parent node and previous sibling because the node could be deleted in the list building.\r\n          const parent_node = node.parentNode\r\n          const previous_sibling = node.previousSibling\r\n\r\n          // Get list element.\r\n          const list_element = _buildList(node, head_style_hash).el\r\n\r\n          // Find the element to insert the new list before it.\r\n          let before_element = null\r\n\r\n          // Current node was not the first.\r\n          if (previous_sibling) {\r\n            before_element = previous_sibling.nextSibling\r\n          }\r\n          else {\r\n            before_element = parent_node.firstChild\r\n          }\r\n\r\n          // Insert before.\r\n          if (before_element) {\r\n            parent_node.insertBefore(list_element, before_element)\r\n          }\r\n\r\n          // Push to the end.\r\n          else {\r\n            parent_node.appendChild(list_element)\r\n          }\r\n\r\n          return false\r\n        }\r\n        else {\r\n\r\n          if (node.tagName === 'FONT' && head_style_hash['.' + node.getAttribute('class')]) {\r\n            node = _changeTagName(node, 'span')\r\n          }\r\n\r\n          return _cleanElement(node, head_style_hash)\r\n        }\r\n      }\r\n\r\n      // Comment node.\r\n      else if (node.nodeType === Node.COMMENT_NODE) {\r\n\r\n        // removing the extra line breaks in comments\r\n        if (node.data.indexOf('[if !supportLineBreakNewLine]') > -1) {\r\n          var nextNode = node.nextSibling;\r\n\r\n          while (nextNode) {\r\n            nextNode = node.nextSibling;\r\n            nextNode && _removeNode(nextNode);\r\n\r\n            if (nextNode.data && nextNode.data.indexOf('[endif]') > -1) {\r\n              nextNode = null;\r\n            }\r\n          }\r\n        }\r\n\r\n        //https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n        if (node.data.indexOf('[if supportFields]') > -1) {\r\n          if(node.data.indexOf('FORMCHECKBOX')>-1){\r\n                 let checkbox = document.createElement('input'); \r\n                     checkbox.type = \"checkbox\"; \r\n                     node.parentNode.insertBefore(checkbox, node.nextSibling);\r\n          }\r\n        }\r\n        _removeNode(node)\r\n\r\n        return false\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Remove empty tags and clean duplicate styles.\r\n    _traverse(body, function (node) {\r\n\r\n      // Element node.\r\n      if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n        const tag_name = node.tagName\r\n\r\n        // Empty. Skip br tag.\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1859\r\n        if (!node.innerHTML && ['BR', 'IMG', 'INPUT'].indexOf(tag_name) === -1) {\r\n          let parent = node.parentNode\r\n\r\n          // Remove recursively.\r\n          while (parent) {\r\n            _removeNode(node)\r\n            node = parent\r\n\r\n            // Stop when non-empty element is found.\r\n            if (node.innerHTML) {\r\n              break\r\n            }\r\n            parent = node.parentNode\r\n          }\r\n\r\n          return false\r\n        }\r\n        else {\r\n          _cleanStyleDuplicates(node)\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3098, Remove empty anchor tags\r\n    _traverse(body, function (node) {\r\n\r\n      // remove anchor tag if it doesn't have url\r\n      if (node && node.nodeName === 'A' && node.href === '') {\r\n\r\n        // replace parent a tag with its child nodes\r\n        const fragment = document.createDocumentFragment()\r\n\r\n        while (node.firstChild) {\r\n          fragment.appendChild(node.firstChild)\r\n        }\r\n        node.parentNode.replaceChild(fragment, node)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    // Converd document to string.\r\n    let word_doc_string = body.outerHTML\r\n\r\n    // Clean HTML.\r\n    const htmlAllowedStylePropsCopy = editor.opts.htmlAllowedStyleProps\r\n    editor.opts.htmlAllowedStyleProps = editor.opts.wordAllowedStyleProps\r\n\r\n    word_doc_string = editor.clean.html(word_doc_string, editor.opts.wordDeniedTags, editor.opts.wordDeniedAttrs, false)\r\n\r\n    editor.opts.htmlAllowedStyleProps = htmlAllowedStylePropsCopy\r\n\r\n    return word_doc_string\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    clean: clean,\r\n    _wordClean: _wordClean\r\n  }\r\n}\r\n\r\n","// Plugins\r\nimport './plugins/align.js';\r\nimport './plugins/char_counter.js'\r\nimport './plugins/code_beautifier.js';\r\nimport './plugins/code_view.js';\r\nimport  './plugins/colors.js'\r\nimport './plugins/draggable.js'\r\nimport './plugins/edit_in_popup.js';\r\nimport './plugins/emoticons.js';\r\nimport './plugins/entities.js';\r\nimport './plugins/file.js';\r\nimport './plugins/files_manager.js';\r\nimport './plugins/cryptojs.js';\r\nimport './plugins/font_family.js'\r\nimport './plugins/font_size.js'\r\nimport './plugins/forms.js';\r\nimport './plugins/fullscreen.js';\r\nimport './plugins/help.js'\r\nimport './plugins/image.js'\r\nimport './plugins/image_manager.js'\r\nimport './plugins/inline_class.js'\r\nimport './plugins/inline_style.js'\r\nimport './plugins/line_breaker.js'\r\nimport './plugins/line_height.js'\r\nimport './plugins/link.js'\r\nimport './plugins/lists.js'\r\nimport './plugins/paragraph_format.js'\r\nimport './plugins/paragraph_style.js'\r\nimport './plugins/print.js'\r\nimport './plugins/quick_insert.js'\r\nimport './plugins/quote.js'\r\nimport './plugins/save.js'\r\nimport './plugins/special_characters.js'\r\nimport './plugins/table.js'\r\nimport './plugins/url.js'\r\nimport './plugins/video.js'\r\nimport './plugins/word_paste.js';\r\n\r\nimport FroalaEditor from './index.js';\r\n\r\nexport default FroalaEditor;\r\n"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","document","documentElement","contains","parentElement","parentNode","nodeType","matchesSelector","mozMatchesSelector","oMatchesSelector","ownerDocument","querySelectorAll","i","length","item","Array","isArray","arg","Object","toString","call","assign","defineProperty","value","target","varArgs","TypeError","to","index","arguments","nextSource","nextKey","hasOwnProperty","writable","configurable","_scopeShim","scopeRE","scopeREComma","container","createElement","overrideNodeMethod","methodName","oldMethod","query","nodeList","gaveId","gaveContainer","match","appendChild","id","Date","getTime","replace","removeChild","nodeColl","e","HTMLElement","self","createElementNS","t","n","r","String","trim","o","indexOf","c","name","code","DOMException","message","a","test","l","getAttribute","split","push","_updateClassName","setAttribute","u","h","Error","add","remove","splice","toggle","join","f","get","enumerable","p","number","__defineGetter__","classList","DOMTokenList","slice","apply","DEFAULTS","initOnClick","pluginsEnabled","MODULES","PLUGINS","VERSION","INSTANCES","OPTS_MAPPING","SHARED","ID","FroalaEditor","selector","options","initCallback","els","iframe_document","inst","existing_instance","console","warn","Bootstrap","RegisterPlugins","plgList","defaults","FE","node","editor","$","getContents","tagName","childNodes","isBlock","Node","ELEMENT_NODE","BLOCK_TAGS","toLowerCase","isLink","isEmpty","ignore_markers","querySelector","contents","has_br","hasClass","TEXT_NODE","textContent","VOID_ELEMENTS","opts","htmlAllowedEmptyTags","htmlDoNotWrapTags","blockParent","deepestParent","until","simple_enter","SIMPLE_ENTER_TAGS","rawAttributes","attrs","atts","attributes","att","nodeName","str","keys","sort","clearAttributes","removeAttribute","openTagString","closeTagString","isFirstSibling","sibling","previousSibling","isLastSibling","nextSibling","isVoid","isList","isElement","isDeletable","hasFocus","doc","activeElement","Boolean","type","href","tabIndex","isEditable","cls","filter","callback","browser","msie","acceptNode","htmlAllowedTags","htmlRemoveTags","htmlAllowedAttrs","htmlAllowedStyleProps","htmlAllowComments","htmlUntouched","fullPage","HTML5Map","B","I","STRIKE","clean","allowedTagsRE","removeTagsRE","allowedAttrsRE","allowedStylePropsRE","_removeInvisible","markers","normalize","insertBefore","cloneNode","_toHTML","is_pre","COMMENT_NODE","nodeValue","outerHTML","temp","node_clone","innerHTML","scripts","_encode","dirty_html","_decode","a1","parseInt","nonscriptBlock","$nonscriptBlock","sanitizedHtml","_process","html","_run","_cleanStyle","style","cleaned_style","charAt","_cleanAttrs","nm","is_attr_allowed","allowed_style_props_matches","_rebuild","body_html","head_html","original_html","doctype","extractDoctype","html_attrs","extractNodeAttrs","extractNode","head_attrs","body_attrs","func","implementation","createHTMLDocument","append","new_html","exec","parse_head","b_html","h_html","invisibleSpaces","toHTML5","sel_saved","selection","save","replaceWith","restore","_convertHref","div","innerText","_node","_cleanPre","helpers","sanitizeURL","pasteAllowLocalImages","tg","new_node","insertAdjacentHTML","data","isMac","styleString","classValues","rxp","curMatch","className","substring","forEach","safari","attr","pre","content","denied_tags","denied_attrs","full_page","allowed_tags","merge","allowed_attrs","RegExp","_tablesWrapTHEAD","trs","children","ok","j","tr","thead","firstChild","tables","_listsWrapMissplacedLI","lis","filterListItem","li","ul","tmp","li_sel","_listsJoinSiblings","sibling_lists","k","list","childs","_listsRemoveEmpty","do_remove","removeEmptyList","lst","empty_lis","remaining_lists","_listsWrapLists","direct_lists","prev_li","wrap","_listsNoTagAfterNested","nested_lists","_listsTypeInNested","listStyleType","before","prev_node","_listsRemoveEmptyLI","_listsFindMissplacedText","lists","$li","prepend","_init","XS","SM","MD","LG","screenSm","screenMd","screenLg","x","LinkRegExCommon","LinkRegExEnd","LinkRegExTLD","LinkRegExHTTP","LinkRegExAuth","LinkRegExWWW","LinkRegEx","LinkProtocols","MAIL_REGEX","_ieVersion","rv","ua","re","navigator","appName","userAgent","parseFloat","$1","_browser","ie_version","matched","version","chrome","webkit","isIOS","isWindowsPhone","isAndroid","isBlackberry","isMobile","requestAnimationFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","getPX","val","screenSize","isBox","width","$box","$sc","ex","isTouch","DocumentTouch","isURL","url","test_reg","isEmail","local_path","encodeURIComponent","obj","propertyIsEnumerable","RGBToHex","rgb","hex","toUpperCase","HEXtoRGB","shorthandRegex","m","g","b","result","default_alignment","getAlignment","$block","css","alignment","$div","direction","$el","first","l1","find","getBoundingClientRect","left","l2","is_mac","platform","scrollTop","o_win","pageYOffset","o_doc","body","scrollLeft","pageXOffset","isInViewPort","rect","top","Math","round","bottom","innerHeight","clientHeight","events","_events","_do_blur","_assignEvent","evs","handler","$on","_forPaste","trigger","_forElement","on","popups","areVisible","_forKeys","_forWindow","$win","_mousedown","enableBlur","_mouseup","_forDocument","$doc","focus","do_focus","info","$wp","core","isCollapsed","set","MARKERS","st","disableBlur","atStart","defaultTag","marker","insert","element","blockTagsQuery","focused","_forFocus","blurActive","blur","_forMouse","_move","_mousemove","_buttonMouseDown","$btn","currentTarget","edit","isDisabled","preventDefault","which","parents","stopPropagation","addClass","_buttonMouseUp","button","getButtons","stopImmediatePropagation","removeClass","removeData","timeout","clearTimeout","bindClick","$element","prev","next","names","callbacks","shared","unshift","$_events","ary","sid","eventName","_$off","off","$off","count","args","force","chainTrigger","param","resp","_destroy","_sharedDestroy","indentMargin","COMMANDS","bold","title","refresh","format","is","toggleClass","italic","underline","strikeThrough","subscript","superscript","outdent","indent","undo","forcedRefresh","disabled","redo","insertHR","clearFormatting","selectAll","moreText","moreParagraph","moreRich","moreMisc","RegisterCommand","commands","_createDefaultTag","empty","mapping","_execCommand","run","_processIndent","show","toolbarInline","toolbar","showInline","$hr","removeAttr","check","default_tag","after","setAfter","setBefore","execCommand","cmd","_moreExec","$tb","_toggleMoreButton","setMoreToolbarsHeight","$buttonGroup","not","params","accessibilityFocus","accessibility","saveStep","tag","blocks","prop","margin_left","max","unwrap","callExec","isArrow","KEYCODE","ARROW_LEFT","ARROW_UP","setAtEnd","ARROW_RIGHT","ARROW_DOWN","setAtStart","s_el","e_el","endElement","cursorLists","_firstParentLI","p_node","_firstParentList","_startEnter","next_li","o_str","c_str","br_str","nd","new_str","ndx","_middleEnter","add_invisible","cursor","isAtEnd","INVISIBLE_SPACE","clone","keepFormatOnDelete","_endEnter","end_str","start_str","_backspace","each","_del","last_node","next_node","NO_DELETE_TAGS","_atEnd","_atStart","_isAtStart","_isAtEnd","_inLi","parentsUntil","_getExtremityCharacterLength","text","special_chars_regex","_startBackspace","quote","deep_parent","current_block","m_parent","last","prev_children","_middleBackspace","emptyTagsOpt","prevNodeTagname","lastChild","txt","len","tabSpaces","tab_str","substr","UNICODE_NBSP","deleted","isEmptyATag","previous_node","c_node","copy_node","backspace","do_default","charCodeAt","_cleanEmptyBlockquotes","fillEmptyBlocks","cleanEmptyTags","spaces","normalizeAroundCursor","_endDel","_middleDel","del","blks","_cleanNodesToRemove","shift","open_default_tag","close_default_tag","nextElementSibling","enter","windowHeight","$oel","offsetHeight","scrollPosition","offsetTop","scroll","isAtStart","A","D","C","abs","w","G","E","endsWith","d","F","H","parent","key","Image","src","domain","cookie","disableDesign","mozilla","addEventListener","srcElement","_openTag","_closeTag","_query","_matches","_processNodeFormat","start_node","$span","selections","$marker","start_marker","inner_spans","$mk","_split","$node","collapsed","changed","close_str","open_str","$p_node","p_html","node_str","_processNodeRemove","should_remove","toLocaleLowerCase","nodes","reassess","$clone","anchorNode","win","getSelection","multiSelection","getRangeAt","startOffset","endOffset","removeZeroWidth","range","newOffset","search","tmprange","createRange","removeAllRanges","setStart","setEnd","addRange","txtNodeToFocus","tmpNode","tmpIndex","tmpContents","compareNode","isSameNode","_cleanFormat","elem","$elem","_filterSpans","applyStyle","$parent","_splitParents","$child","_normalize","$outer_span","to_remove","ic_str","io_str","$spans","msp","just_spans","$x","$p","removeStyle","ranges","startContainer","f_child","_normalizeNode","browser_way","n_node","parent_node","enterTags","tagOptsValues","ENTER_P","ENTER_DIV","ENTER_BR","isPreformatted","new_text","getComputedStyle","display","walker","createTreeWalker","NodeFilter","SHOW_TEXT","temp_node","nextNode","currentNode","START_MARKER","END_MARKER","_build","place","mk","boundary","cloneRange","collapse","insertNode","dom_marker","commonAncestorContainer","original_range","clear","firstElementChild","insertAtPoint","clientX","y","clientY","start","caretPositionFromPoint","offsetNode","offset","caretRangeFromPoint","sel","createTextRange","moveToPoint","end_range","duplicate","setEndPoint","select","rangeCount","child","node_found","endContainer","rangeElement","rangeContainer","toggleList","block_parent","inEditor","rngs","end_node","was_into","rgs","new_ranges","start_m","end_m","setStartAfter","setEndBefore","edge","end_marker","ghost","special_case","s_node","e_node","first_node","createTextNode","_normalizedMarker","setStartBefore","setEndAfter","_canDelete","atEnd","selRange","testRange","selectNodeContents","moveToElementText","isFull","full","inf","_emptyInnerNodes","span","_filterFrInner","_processNodeDelete","should_delete","_prevSibling","_nextSibling","start_markers","sm","end_markers","em","$first_node","start_parent","end_parent","list_start","list_end","tmp_node","last_marker","first_marker","deep","getElementsByClassName","use_current_node","language","LANGUAGE","lang","translate","translation","placeholderText","placeholder","$placeholder","_add","margin_offset","iframe","$iframe","outerHeight","margin_top","margin_right","padding_top","padding_left","padding_right","ready","marginTop","paddingTop","paddingLeft","marginLeft","paddingRight","marginRight","textAlign","hide","isVisible","fromCharCode","htmlSimpleAmpersand","htmlIgnoreCSSProperties","htmlExecuteScripts","look_up","emptyBlocks","around_markers","empty_blocks","qr","found","emptyBlockTagsQuery","remove_blocks","elms","_wrapElement","main_doc","createDocumentFragment","anchor","_wrapElements","_wrap","blockquote","inner","wp_st","block","cleanBlankSpaces","is_block_or_element","_extractMatch","reg_exp","_newDoctype","string","createDocumentType","getDoctype","publicId","systemId","_processBR","br","cleanBRs","brs","getElementsByTagName","checkIfEmpty","$dv","_setHtml","cleaned_html","clean_html","head_bad_html","map","toArray","spellcheck","$head","$html","replaceChild","injectStyle","iframeDefaultStyle","iframeStyle","useClasses","_specifity","idRegex","attributeRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","regex","_processOnGet","_el","_sortElementsBySpec","syncInputs","inputs","checked","keep_markers","keep_classes","updated_elms","elms_info","elems_specs","ignoreRegEx","styleSheets","rules","head_style","cssRules","ownerNode","idx","selectorText","cssText","spec","css_text","rule","specs_elem","original_rules","splits","original_rule","heightMin","height","heightMax","size","getSelected","wrapSelection","wrapInner","selectionParent","cloneContents","htmlText","_hasBlockTags","_setCursorAtEnd","escapeEntities","_unwrapForLists","default_tag_els","insertAfter","do_split","positionCaret","cleanWhiteTags","ignore_selection","current_el","current_white","total_white","possible_elements","removed","_cleanTags","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","ESC","SPACE","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","FF_SEMICOLON","FF_EQUALS","QUESTION_MARK","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","META","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","FF_HYPHEN","SEMICOLON","DASH","EQUALS","COMMA","HYPHEN","PERIOD","SLASH","APOSTROPHE","TILDE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","IME","multiLine","_enter","_shiftEnter","_ctlBackspace","deleteContents","modify","_space","_input","start_container","start_offset","_cut","bulkRefresh","_tab","shiftKey","_mapKeyPress","_clearIME","isIME","key_down_code","_empty","ImageCaptionSpace","sel_el","strHTML","orgStr","_mapKeyDown","key_code","char_key","isCharacter","ctrlKey","altKey","del_key","metaKey","_replaceU200B","position","getBoundingRect","toolbarBottom","toolbarStickyOffset","_mapKeyUp","has_invisible","ios_CJK","CJKRegEx","_typing_timeout","_temp_snapshot","_typingKeyDown","keycode","snapshot","canDo","typingTimer","_typingKeyUp","forceUndo","isBrowserAction","_isEmpty","_allowTypingOnEdges","dt","undefined","disable","enable","offsetY","_clearTypingTimer","pastePlain","pasteDeniedTags","pasteDeniedAttrs","pasteAllowedStyleProps","paste","clipboard_html","clipboard_rtf","clipboard_txt","$paste_div","saveCopiedText","plain","localStorage","setItem","_handleCopy","copied_html","stop_paste","_handlePaste","isContetnEditable","originalEvent","clipboardData","getData","types","clipboard_types","_processPaste","_beforePaste","contentEditable","_dropPaste","dataTransfer","_wordClean","word_tags","oldHTML","p_li","previousElementSibling","_plainPasteClean","cleanComments","is_word","response","_isFromEditor","possible_text","getItem","_buildTabs","tabs","keep_formatting","is_gdocs","is_editor_content","htmlAllowedStylePropsCopy","cleanEmptyTagsAndDivs","wordPaste","spans","linkAlwaysBlank","aTags","aTag","selection_el","in_list","removeEmptyTags","_afterPaste","getRtfClipboard","_filterNoAttrs","arry","divs","dv","empty_tags","capture","removeEventListener","shortcutsEnabled","shortcutsHint","SHORTCUTS_MAP","RegisterShortcut","letter","option","shortcuts","inverse_map","srct","active","map_key","_getNodeIndex","prevNode","isEmptyText","twoTexts","emptyPrevNode","_getNodeLocation","loc","reverse","_getRealNodeOffset","_getRange","scLoc","scOffset","ecLoc","ecOffset","_getNodeByLocation","_restoreRange","range_snapshot","startNode","endNode","equal","s1","s2","JSON","stringify","_disableBrowserUndo","keyCode","undo_stack","undo_index","canRedo","last_html","undoing","dropRedo","pop","_do","_content_changed_timer","hideAll","_redo","reset","syncIframe","documentReady","editorClass","requestWithCORS","requestWithCredentials","requestHeaders","iframeStyleFiles","zIndex","disableRightClick","scrollableContainer","theme","$link","_initElementStyle","_initStyle","_initDrag","drag_support","filereader","FileReader","formdata","FormData","progress","XMLHttpRequest","getXHR","method","xhr","open","withCredentials","header","setRequestHeader","sameInstance","$obj","_original_html","autofocus","destroy","POPUP_TEMPLATES","RegisterTemplate","template","screenHeightofBrowser","$btnActivePopups","setContainer","$container","setFileListHeight","$popup","activeLayerIndex","prevHeight","setPopupDimensions","isDelete","innerWidth","refreshContainer","_inputRefreshEmptyOnFocus","_inputRefreshEmptyOnBlur","$elm","_addLabel","$inputElms","elm","$label","obj_height","applyLeftOffset","$active_dropdowns","is_visible","outerWidth","iframePaddingTop","iframePaddingLeft","at","content_parent","parentContent","focusPopup","_repositionPopup","_unmarkExit","onShow","new_instance","filesManager","isChildWindowOpen","onHide","ev","_bindInstanceEvents","onRefresh","btns","except","exit_flag","_markExit","_canExit","_buildTemplate","editInPopup","$colorHexLayer","spanWidth","colorsStep","bindCommands","_windowResize","_inputFocus","$target","_inputBlur","_editorKeydown","findVisible","_preventFocus","originalTarget","hideActiveDropdowns","input_selector","_editorMouseup","_windowMouseup","_windowKeydown","focusPopupButton","p_top","w_height","_checkboxLabelClick","$checkbox","create","$labelElms","registerPopup","can_blur","focusToolbarElement","contenteditableEl","focusedEditableEl","ind","$f_el","focusToolbar","_reorderToolbarButtons","_getVisibleToolbarButtons","focusContentElement","saveSelection","focusContent","$content","backward","$first_input","with_kb","$active_item","$first_tab_index","restoreSelection","$popup_content","$focused_item","focusModal","$modal","focusToolbars","_getActiveFocusedDropdown","$activeDropdown","$buttons","moreBtnIndex","firstMoreToolbarBtnIndex","$moreToolbarBtns","right","btn","$moreToolbar","_moveHorizontally","tab_key","forward","click","status","moveForward","moveBackward","_moveVertically","down","$destination","nextAllVisible","prevAllVisible","moveDown","moveUp","$visible_popup","$visible_modal","modals","focusEditor","esc","registerToolbar","$hovered_el","_getPopupEvents","_tiMouseenter","_tiKeydown","$active_button","_clearPopupButton","$popup_button","focusModalButton","$modal_button","_editorKeydownHandler","focused_content","tooltips","tooltip","$tooltip","above","ceil","bind","TOOLBAR_VISIBLE_BUTTONS","buttons","toolbarContainer","popup_buttons","addButtons","$btns","_filterButtons","butons_list","search_dropdowns","$filtered_buttons","$button","$dropdown_menu_items","$popup_buttons","$modal_hash","$modal_buttons","getPosition","toolbarBottomOffset","topOffset","_expandDropdown","$dropdownWrapper","maxHeight","min","_dropdownButtonClick","$dropdown","ht","dropdownMaxHeight","refreshOnShow","dropdownOffsetTop","moreToolbarHeight","$prevBtn","$active_element","_commandButtonClick","refreshAfterCallback","_click","_dropdownMenuClick","_dropdownWrapperClick","tooltipAbove","_document","_window","defaultView","parentWindow","hideDropdowns","_content","command","shortcut","build","visible","showOnMobile","display_selection","displaySelection","icon","default_selection","defaultSelection","displaySelectionWidth","popup","modal","button_id","dropdown_id","more_btn","back","dropdown","hasOptions","buildList","visible_buttons","cmd_name","cmd_info","plugin","buildGroup","buttonGroups","mainToolbarGroupsHTML","moreToolbarGroupsHTML","groupName","buttonGroup","mainToolbarButtonsHTML","moreToolbarButtonsHTML","buttonCount","visibleButtons","cmdName","cmdInfo","align","buttonsVisible","showMoreButtons","_bulkRefresh","refresh_timeout","delayedBulkRefresh","ICON_TEMPLATES","font_awesome","font_awesome_5","font_awesome_5r","font_awesome_5l","font_awesome_5b","image","svg","ICONS","NAME","SVG_KEY","cancel","color","FA5NAME","insertAll","minimize","DefineIconTemplate","DefineIcon","iconsTemplate","ICON_DEFAULT_TEMPLATE","PATH","SVG","getTemplate","getFileIcon","FILEICONS","advancedImageEditor","alignCenter","alignJustify","alignLeft","alignRight","anchors","autoplay","backgroundColor","cellBackground","cellBorderColor","cellOptions","cellStyle","close","codeView","cogs","columns","exitFullscreen","fileInsert","fileManager","fontAwesome","fontFamily","fontSize","fullscreen","help","horizontalLine","imageAltText","imageCaption","imageClass","imageDisplay","imageManager","imageSize","inlineClass","inlineStyle","insertEmbed","insertFile","insertImage","insertLink","insertMore","insertTable","insertVideo","upload","uploadFiles","lineHeight","linkStyles","mention","more","openLink","orderedList","pageBreaker","paragraphFormat","paragraphMore","paragraphStyle","pdfExport","print","removeTable","replaceImage","row","smile","star","symbols","tags","tableHeader","tableStyle","textColor","textMore","unlink","unorderedList","verticalAlignBottom","verticalAlignMiddle","verticalAlignTop","docIcon","extension","path","gifIcon","jpegIcon","logIcon","movIcon","ogvIcon","pngIcon","txtIcon","webmIcon","webpIcon","wmvIcon","xlsIcon","xlsxIcon","zipIcon","docxIcon","jpgIcon","mp3Icon","mp4Icon","oggIcon","pdfIcon","defaultIcon","$overlay","_modalHTML","head","close_button","$tmp","$body","modalHash","init","resize","$wrapper","allWrapperHeight","exteriorBodyHeight","body_content_height","scrollHeight","newHeight","boundingRect","_topNormalized","p_offset","new_top","s_height","_leftNormalized","clientWidth","forSelection","selection_rect","offsetWidth","new_left","_updateIOSSticky","is_on","prev_top","scheduled_top","$dummy","x_scroll","x_top","c_scroll","c_top","parentBorderWidth","_updateSticky","viewport_height","scrollable_top","scrollable_bottom","offset_top","parent_top","parent_height","skip_setting_fixed","el_top","el_bottom","isFixedToTop","isFixedToBottom","at_top","at_bottom","_testSticky","animate","_stickyElements","_initSticky","addSticky","_setDisabled","parentBlk","$moreButton","_computeMoreToolbarPosition","totalButtonWidth","buttonMarginLeft","buttonMarginRight","attribution","toolbarButtons","toolbarButtonsXS","toolbarButtonsSM","toolbarButtonsMD","toolbarSticky","toolbarVisibleWithoutSelection","TOOLBAR_BUTTONS","TOOLBAR_BUTTONS_MD","TOOLBAR_BUTTONS_SM","TOOLBAR_BUTTONS_XS","POWERED_BY","_buttons_map","_normalizeButtons","previousScreenSize","toolbarButtonGroups","currentButtonGroup","_addButtons","buttons_list","_screenButtons","screen_size","_removeButtonGroupWrappers","$buttonGroups","$moreToolbars","toolbarPaddingBottom","moreToolbarWidth","$moreToolbarBtn","buttonMarginTop","buttonMarginBottom","toolbarWidth","moreToolbarRows","floor","childElementCount","_showScreenButtons","mainToolbarButtonGroups","moreToolbarButtonGroups","moreToolbarButtons","mainToolbarButtons","_setVisibility","tm","_showInlineWithTimeout","_initInlineBehavior","setInterval","_initPositioning","$second_tb","_setDefaults","_initShortcuts","passiveEvents","eventPrefixes","irregularEvents","stylesList","cssPrefixes","cssShow","visibility","specialEvents","correctStyleName","_getEvent","bubbles","cancelable","changedTouches","detail","eventPhase","pageX","pageY","view","offsetX","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","isPartOfDOM","_getDelegator","fn","_normalizeSelector","jQuery","context","isFunction","constructor","isEqualNode","$els","formatParams","formattedParams","ajax","request","crossDomain","headers","dataType","onload","responseText","parse","done","fail","send","prevAll","res","getClientRects","num","pushStack","elems","ret","prevObject","wrapAll","eq","wrapper","wrapperProps","htmlIsFunction","grep","invert","callbackInverse","callbackExpect","cldrn","getCorrectStyleName","finalName","capName","isNaN","getClass","stripAndCollapse","rnothtmlwhite","tokens","scrollTo","eventHandlers","domEvent","passive","eventHandler","event","Event","MouseEvent","createEvent","initMouseEvent","initEvent","dispatchEvent","triggerHandler","new_val","siblings","clst","script","margin","old","newWidth","HTMLDocument","matchesFn","offsetLeft","extend","new_obj","second","concat","load","that","doInit","presets","initialized","paragraphFormatSelection","fontFamilySelection","fontSizeSelection","quickInsertEnabled","charCounterCount","opts_string","tag_name","initOnDefault","contentWindow","write","initOnTextarea","initOnA","initOnImg","module_list","m_name","destrying","refreshForToolbar","center","justify","charCounterMax","charCounter","$counter","_checkCharNumber","_checkCharNumberOnPaste","_updateCharNumber","chars","scroll_size","codeBeautifier","acorn","exports","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","nonASCIIidentifier","newline","lineBreak","source","allLineBreaks","isIdentifierStart","isIdentifierChar","html_source","ltrim","rtrim","multi_parser","indent_inner_html","indent_size","indent_character","wrap_line_length","brace_style","unformatted","preserve_newlines","max_preserve_newlines","indent_handlebars","wrap_attributes","wrap_attributes_indent_size","end_with_newline","extra_liners","max_char","indent_char","indent_with_tabs","Parser","pos","token","current_mode","parentcount","parent1","tag_type","token_text","last_token","last_text","token_type","newlines","indent_content","Utils","whitespace","single_token","in_array","what","arr","is_whitespace","traverse_whitespace","input_char","input","space_or_wrap","line_char_count","print_newline","print_indentation","get_content","peek3","get_tag","get_contents_to","reg_match","lastIndex","reg_array","end_script","record_tag","indent_level","retrieve_tag","temp_parent","indent_to_tag","peek","comment","space","first_attr","tag_start","tag_end","tag_start_char","orig_pos","orig_line_char_count","get_unformatted","get_comment","tag_complete","tag_index","tag_offset","tag_check","is_unformatted","output","start_pos","delimiter","orig_tag","min_index","get_token","tag_name_type","get_full_indent","level","indent_string","next_tag","printer","js_source","print_token","print_token_raw","unindent","tag_extracted_from_last_output","_beautifier","script_indent_level","js_beautify","css_beautify","indent_scripts","indentation","white","_level","reindent","sweet_code","source_text","NESTED_AT_RULE","CONDITIONAL_GROUP_RULE","indentSize","indentCharacter","selectorSeparatorNewline","selector_separator_newline","newline_between_rules","eol","whiteRe","ch","parenLevel","skipWhitespace","prev_pos","eatWhitespace","eatString","endChars","peekString","endChar","eatComment","singleLine","lookBack","foundNestedPseudoClass","openParen","basebaseIndentString","singleIndent","indentLevel","nestedLevel","singleSpace","newLine","_lastCharWhitespace","keepWhitespace","preserveSingleSpace","isAfterSpace","insideRule","insidePropertyValue","enteringConditionalGroup","top_ch","last_top_ch","isAfterNewline","variableOrRule","sweetCode","js_source_text","beautifier","Beautifier","beautify","MODE","BlockStatement","Statement","ObjectLiteral","ArrayLiteral","ForInitializer","Conditional","Expression","token_pos","Tokenizer","current_token","last_type","last_last_text","flags","previous_flags","flag_store","prefix","handlers","opt","baseIndentString","handle_start_expr","handle_end_expr","handle_start_block","handle_end_block","handle_word","handle_semicolon","handle_string","handle_equals","handle_operator","handle_comma","handle_block_comment","handle_comment","handle_dot","handle_unknown","handle_eof","create_flags","flags_base","mode","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","last_word","declaration_statement","declaration_assignment","multiline_frame","if_block","else_block","do_block","do_while","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","braces_on_own_line","break_chained_methods","space_in_paren","space_in_empty_paren","jslint_happy","space_after_anon_function","keep_array_indentation","space_before_conditional","unescape_strings","e4x","comma_first","test_output_raw","preindent_index","Output","raw","set_mode","local_token","tokenizer","tokenize","comments_before","handle_token","get_code","keep_whitespace","is_array","split_newlines","out","allow_wrap_or_preserved_newline","force_linewrap","wanted_newline","proposed_line_length","current_line","get_character_count","space_before_token","force_newline","preserve_statement_flags","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","printable_token","add_raw_token","previous_line","add_token","deindent","is_expression","remove_redundant_indentation","start_of_object_property","start_of_statement","all_lines_start_with","lines","line","each_line_matches_indent","is_special_word","word","next_mode","line_starters","next_token","second_token","empty_braces","empty_anonymous_function","just_added_blankline","space_before","space_after","directives","javadoc","starless","lastIndent","lastIndentLength","OutputLine","_character_count","_indent_count","_items","baseIndentLength","indent_length","is_empty","remove_indent","indent_cache","add_outputline","add_space_before_token","frame","output_length","eat_newlines","Token","digit","digit_oct","digit_hex","punct","reserved_words","block_comment_pattern","comment_pattern","directives_block_pattern","directive_pattern","directives_end_ignore_pattern","template_pattern","n_newlines","whitespace_before_token","in_html_comment","parser_pos","input_length","token_values","open_stack","comments","tokenize_next","get_directives","directive_match","resulting_string","whitespace_on_this_line","allow_decimal","allow_e","local_digit","comment_match","sep","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","depth","isEndTag","isSingletonTag","xmlLength","unescape_string","sharp","template_match","s_hex","escaped","codeMirror","CodeMirror","codeMirrorOptions","lineNumbers","tabMode","indentWithTabs","lineWrapping","tabSize","codeBeautifierOptions","codeViewKeepActiveButtons","$html_area","code_mirror","isActive","getValue","setSize","_showText","_can_focus","_blur","_focus","_showHTML","_initArea","fromTextArea","rows","was_focused","includes","s_index","e_index","s_line","e_line","lastIndexOf","setValue","setSelection","clearHistory","scroll_top","setSelectionRange","toTextArea","$back_button","_refreshToolbar","colorsText","colorsBackground","colorsHEXInput","colorsButtons","colors","custom_color_template","_showColorsPopup","cmd_type","_initColorsPopup","_refreshColor","colors_buttons","custom_color","text_colors","_colorPickerHTML","background_colors","_addAccessibility","tab","colors_html","popupName","$colors","column","nextIndex","dimension","color_type","$current_color","$select_color","_updateColor","$selectionColor","$input","background","customColor","showColorsPopup","refreshOnCallback","dragInline","draggable","_dragStart","setData","_tagOK","tag_under","_setHelperSize","$draggable_helper","_positionHelper","elementFromPoint","top_offset","top_tag","bottom_offset","bottom_tag","mouse_y","$tag_under","_dragOver","dropEffect","_getDraggedEl","_dragEnter","_documentDragEnd","$draggedEl","_drop","$droppedEl","_cleanOnGet","_initPopup","_showPopup","_initEvents","update","emoticons","emoticonsSet","desc","uCode","emoticonsButtons","emoticonsUseImage","categories","selectedCategory","_showEmoticonsPopup","_initEmoticonsPopup","custom_layer","_emoticonsHTML","_inEmoticon","addEmoticon","emoticon","img","_load","setDeletable","emtcs","emoticons_html","_renderCategoryHtml","_renderEmoticonHtml","_renderUseImage","_refreshPopup","setEmoticonCategory","categoryId","category","categoryHtml","_renderCategory","emoticonHtml","_renderEmoticon","$tabElements","$emoticons","emoticonsStep","emoticon_html","compiledCode","reduce","imageMap","emoticonMap","dataParam1","dataParam2","buttonHtml","buttonMap","elementClass","emoticonsUnicodeClass","dataCmd","showEmoticonsPopup","entities","_reg_exp","_map","_encodeEntities","entities_text","entities_array","chr","fileUpload","fileUploadURL","fileUploadParam","fileUploadParams","fileUploadToS3","fileUploadToAzure","fileUploadMethod","fileMaxSize","fileAllowedTypes","fileInsertButtons","fileUseSelectedText","file","DEFAULT_FILE_UPLOAD_URL","BAD_LINK","MISSING_LINK","ERROR_DURING_UPLOAD","BAD_RESPONSE","MAX_SIZE_EXCEEDED","BAD_FILE_TYPE","NO_CORS_IE","error_messages","showInsertPopup","_initInsertPopup","hideProgressBar","showProgressBar","_setProgressMessage","dismiss","$layer","_showErrorMessage","$message_header","link","$file","_syncFiles","_parseResponse","_throwError","_parseXMLResponse","_fileUploaded","responseXML","responseURL","_fileUploadError","_fileUploadProgress","lengthComputable","complete","loaded","total","_fileUploadAborted","_browserUpload","reader","binary","atob","array","URL","createObjectURL","Blob","Uint8Array","readAsDataURL","files","form_data","keyStart","uploadURL","region","bucket","fileURL","azureKey","encodeURI","account","SASToken","uploadDate","toUTCString","accessKey","azureAccount","azureContainer","urls","headerResource","urlResource","stringToSign","signatureBytes","cryptoJSPlugin","cryptoJS","HmacSHA256","enc","Base64","signature","authHeader","onerror","onprogress","onabort","readyState","abort","_bindInsertEvents","_hideInsertPopup","delayed","file_buttons","upload_layer","progress_bar_layer","progress_bar","_onRemove","c_files","file_srcs","filesInsertButtons","filesInsertButtons2","imageEditButtons","imageAltButtons","imageSizeButtons","imageUpload","filesManagerUploadURL","imageCORSProxy","imageUploadRemoteUrls","filesManagerUploadParam","filesManagerUploadParams","googleOptions","filesManagerUploadToS3","filesManagerUploadToAzure","filesManagerUploadMethod","filesManagerMaxSize","filesManagerAllowedTypes","imageResize","imageResizeWithPercent","imageRoundPercent","imageDefaultWidth","imageDefaultAlign","imageDefaultDisplay","imageSplitHTML","imageStyles","imageMove","imageMultipleStyles","imageTextNear","imagePaste","imagePasteProcess","imageMinWidth","imageOutputSize","imageDefaultMargin","imageAddNewLine","VIDEO_PROVIDERS","test_regex","url_regex","url_text","provider","VIDEO_EMBED_REGEX","IMAGE_EMBED_REGEX","$current_image","$current_image_index","current_index","$child_window_open","$image_resizer","$handler","disableEdit","mousedown","file_list","Map","file_list_values","XMLHttpRequests","fileUploads","checked_files","failedUploadFiles","completedUploads","fileKeys","imageEditIndex","editImageValue","autoplayCheckbox","fileListIndex","requiredPlugins","CORRUPTED_IMAGE","ERROR_LINK","UPLOAD_CANCEL","unsupported_file_types","_refreshInsertPopup","$url_input","$embed_area","rerender","isImage","errorMessage","deleteFile","checkRequiredPlugins","_initPluginErrorPopup","resetAllFilesCheckbox","plugins","addPlugins","loadPlugins","_repositionResizer","_initImageResizer","wrap_correction_top","wrap_correction_left","getEl","hasCaption","_getHandler","_setWidth","_handlerMousedown","start_x","oel","editor_inside_iframe","location","frameElement","clientLeft","toFixed","insertEmbeddedFile","_handlerMousemove","real_image_size","c_x","s_x","diff_x","_handlerMouseup","_disableInsertCheckbox","getElementById","_disableFileIcons","$img","updateFileUploadingProgress","_showFileErrorMessage","_initEditPopup","image_buttons","cancelFileInsert","file_manager_dialog_open","req","cancelFileUpload","getFileActionButtons","updateProgressBar","deleteFileUpload","checkInsertAllState","$btnInsert","$btnDelete","addCheck","minimizePopup","no_message","_exitEdit","$row","globalListClass","sortableLists","globalX","globalY","enableDragSort","listClass","enableDragItem","scrollBy","sourceElement","hoveredItem","elementsWithHoverClass","ondrag","handleDrag","ondragend","handleDrop","selectedItem","selectedLocX","selectedLocY","droppedItem","swapItem","swapNodes","n1","n2","p1","p2","i1","i2","showFileUploadProgressLayer","description","getFileDescription","checkedClass","checkmark","upload_progress_layer","text_truncate","getFileSize","getFileThumbnail","ending","getFileThumbnailSrc","thumbnail","_getFileType","localName","thumbnailLink","thumbnailImage","oldImage","onloadend","fileActionButtons","isVideo","disableAutoplay","disableAutoplayCheckBox","isFormatSupported","pdf","docx","xlsx","xls","log","disbleView","isAudio","isFile","API_KEY","CLIENT_ID","percent","progressCircle","initialFileUploadStatus","totalUploadPercent","validURL","pattern","insertByURL","$urls","files_index","initial_index","validUrls","addFilesToList","file_url","video","getVideoByURL","getUrlFileName","sanitize","existing_image","file_index","responseType","vp","videoAllowedProviders","_editImg","_edit","viewImage","msSaveBlob","download","viewImages","imageView","videoIframe","autoplayURL","_loadedCallback","insertFiles","videos","_syncVideos","c_videos","video_srcs","videoMove","insertAllFiles","insertMapElements","deleteAllFiles","deleteMapElements","fileIndex","has","_editVideo","setChildWindowState","childWindowState","docEditor","loadScripts","loader","handleClientLoad","onreadystatechange","editImage","isChildWindowTriggered","trimVideoPlugin","trimVideo","imageTUI","launch","apiKey","clientId","authorizeButton","signoutButton","userArea","fileInput","fileContainer","loadingText","onInvalidFile","onError","error","googleDocEditor","DISCOVERY_DOCS","SCOPES","DEFAULT_FIELDS","BOUNDARY","DELIMITER","CLOSE_DELIMITER","responseFileId","initClient","gapi","client","discoveryDocs","scope","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","handleAuthClick","auth","getToken","access_token","Promise","resolve","signIn","handleFileUpload","handleSignoutClick","accessToken","currentFile","lastModified","lastModifiedDate","closeEditDocContainer","disableOnEdit","saveSingleFile","showEditableDoc","googleDocUrl","editDocContainer","onclick","signOut","enableAfterEdit","readAsArrayBuffer","contentType","metadata","bytes","byteLength","base64Data","btoa","multipartRequestBody","Length","execute","saveImage","fileTypeMap","ext","fileType","$existing_img","old_src","_addImage","video_autoplay","appendSymbol","videoSplitHTML","$video","videoResponsive","_setVideoStyle","videoDefaultDisplay","videoDefaultAlign","$existing_video","replaced","_addVideo","_display","_align","embedded_code","fileSplitHTML","_setStyleVideo","_setStyleImage","loadCallback","data_str","videoDefaultWidth","typeVar","HAVE_FUTURE_DATA","_imageUploaded","$image_placeholder","check_inputs","checkAutoplay","indexes","checkbox","webp","webm","ogg","ogv","lastNode","imageInsertButtons","buttonList","buttonList2","uploadIndex","urlIndex","embedIndex","embed_layer","by_url_layer","message_layer","getMissingPluginsText","missingPlugins","getMissingPlugins","date","weekday","year","month","day","dateFormat","toLocaleDateString","err","sizes","pow","fileName","getDate","getMonth","getFullYear","_refreshAltPopup","showAltPopup","_initAltPopup","alt_layer","setAlt","alt","_refreshSizePopup","showSizePopup","_initSizePopup","size_layer","showLayer","refreshUploadButton","refreshByURLButton","_resizeImage","initPageX","step","$img_overlay","prevKey","prevTimestamp","timeStamp","imgs","touchScroll","_clipboardPaste","_clipboardPasteCleanup","_uploadPastedImages","_processPastedImage","loadEvents","splitSrc","upload_img","_img","crossOrigin","canvas","getContext","naturalHeight","naturalWidth","drawImage","imgExt","toDataURL","_clipboardImageLoaded","_processsClipboardPaste","items","getAsFile","force_exit","img_exit_flag","verticalAlign","marginBottom","maxWidth","multipleStyles","styles","refreshEmbedButton","toggleCaption","$listParent","totLi","$currLi","$newLi","splitAttrs","oldWidth","current_width","exitEdit","CryptoJS","crypto","msCrypto","global","require","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","subtype","C_lib","lib","Base","overrides","mixIn","$super","instance","properties","propertyName","WordArray","words","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","random","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","_data","_nDataBytes","_append","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","_minBufferSize","nWordsReady","nBytesReady","_doProcessBlock","Hasher","cfg","_doReset","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","_createHmacHelper","C_algo","HMAC","algo","base64Chars","byte1","byte2","byte3","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","parseLoop","bits1","bits2","bitsCombined","sin","MD5","_hash","offset_i","M_offset_i","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","FF","GG","HH","II","nBitsTotal","nBitsLeft","nBitsTotalH","nBitsTotalL","H_i","HmacMD5","SHA1","HmacSHA1","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","SHA256","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","sigma1","t1","t2","Utf16BE","Utf16","utf16Chars","codePoint","utf16Str","utf16StrLength","Utf16LE","swapEndian","ArrayBuffer","superInit","subInit","typedArray","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Float32Array","Float64Array","buffer","byteOffset","typedArrayByteLength","_zl","_zr","_sl","_sr","_hl","_hr","RIPEMD160","hl","hr","zl","zr","sl","sr","al","bl","cl","dl","ar","cr","dr","er","f1","f2","f3","f4","f5","rotl","z","HmacRIPEMD160","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","PBKDF2","keySize","iterations","compute","password","salt","derivedKey","blockIndex","derivedKeyWords","blockIndexWords","blockWords","blockWordsLength","intermediate","intermediateWords","EvpKDF","SHA224","HmacSHA224","X32WordArray","C_x64","x64","X64Word","Word","high","low","X64WordArray","toX32","x64Words","x64WordsLength","x32Words","x64Word","wordsLength","RHO_OFFSETS","PI_INDEXES","ROUND_CONSTANTS","newX","newY","LFSR","roundConstantMsw","roundConstantLsw","bitPosition","SHA3","outputLength","state","_state","nBlockSizeLanes","M2i","M2i1","lane","tMsw","tLsw","Tx","Tx4","Tx1","Tx1Msw","Tx1Lsw","laneIndex","laneMsw","laneLsw","rhoOffset","TPiLane","T0","state0","TLane","Tx1Lane","Tx2Lane","roundConstant","blockSizeBits","outputLengthBytes","outputLengthLanes","hashWords","HmacSHA3","X64Word_create","SHA512","H0","H1","H2","H3","H4","H5","H6","H7","H0h","H0l","H1h","H1l","H2h","H2l","H3h","H3l","H4h","H4l","H5h","H5l","H6h","H6l","H7h","H7l","ah","bh","dh","eh","fh","fl","gh","gl","hh","Wil","Wih","Wi","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1xh","gamma1xl","gamma1h","gamma1l","Wi7","Wi7h","Wi7l","Wi16","Wi16h","Wi16l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kih","Kil","t1l","t1h","t2l","t2h","HmacSHA512","SHA384","HmacSHA384","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","xformMode","_xformMode","_key","process","dataUpdate","finalProcessedData","ivSize","selectCipherStrategy","PasswordBasedCipher","SerializableCipher","cipher","encrypt","decrypt","ciphertext","StreamCipher","finalProcessedBlocks","C_mode","BlockCipherMode","iv","Encryptor","Decryptor","_cipher","_iv","CBC","processBlock","xorBlock","encryptBlock","_prevBlock","thisBlock","decryptBlock","C_pad","pad","Pkcs7","nPaddingBytes","paddingWord","paddingWords","padding","unpad","BlockCipher","modeCreator","_mode","__creator","CipherParams","cipherParams","formatter","C_format","OpenSSLFormatter","OpenSSL","openSSLStr","ciphertextWords","encryptor","cipherCfg","algorithm","_parse","plaintext","C_kdf","kdf","OpenSSLKdf","derivedParams","CFB","generateKeystreamAndEncrypt","keystream","ECB","AnsiX923","lastBytePos","Iso10126","Iso97971","ZeroPadding","OFB","_keystream","NoPadding","HexFormatter","SBOX","INV_SBOX","SUB_MIX_0","SUB_MIX_1","SUB_MIX_2","SUB_MIX_3","INV_SUB_MIX_0","INV_SUB_MIX_1","INV_SUB_MIX_2","INV_SUB_MIX_3","xi","sx","x2","x4","x8","RCON","AES","_nRounds","_keyPriorReset","keyWords","nRounds","ksRows","keySchedule","_keySchedule","ksRow","invKeySchedule","_invKeySchedule","invKsRow","_doCryptBlock","s0","s3","t0","t3","PC1","PC2","BIT_SHIFTS","SBOX_P","SBOX_MASK","DES","keyBits","keyBitPos","subKeys","_subKeys","nSubKey","subKey","bitShift","invSubKeys","_invSubKeys","_lBlock","_rBlock","exchangeLR","exchangeRL","lBlock","rBlock","mask","TripleDES","key1","key2","key3","_des1","_des2","_des3","RC4","keySigBytes","_S","keyByteIndex","keyByte","_i","_j","generateKeystreamWord","keystreamWord","RC4Drop","drop","CTRGladman","incWord","b1","b2","b3","incCounter","counter","_counter","C_","Rabbit","_X","_C","_b","nextState","IV","IV_0","IV_1","i0","i3","gx","ga","gb","CTR","RabbitLegacy","fontFamilyDefaultSelection","_getSelection","_getArray","font_array","array1","array2","font_matches","c_font_array","f_diff","fontSizeDefaultSelection","fontSizeUnit","formEditButtons","formStyles","formMultipleStyles","formUpdateButtons","forms","current_input","_inputMouseDown","_inputMouseUp","showEditPopup","_cancelSelection","_inputTouchMove","_bindEvents","_initUpdatePopup","getInput","hideEditPopups","_refreshUpdateCallback","_hideUpdateCallback","text_layer","tab_idx","showUpdatePopup","updateInput","inputBtns","old_scroll","max_height","z_index","_on","$parent_node","_off","helpSets","modal_id","_buildBody","group","imageUploadURL","imageUploadParam","imageUploadParams","imageUploadToS3","imageUploadToAzure","imageUploadMethod","imageMaxSize","imageAllowedTypes","DEFAULT_IMAGE_UPLOAD_URL","_showEditPopup","_convertStyleToClasses","getAlign","getDisplay","_convertClassesToStyle","_setStyle","_refreshImageList","images","_syncImages","c_images","image_srcs","old_images_srcs","img_url","_imageUploadError","_imageUploadProgress","_imageUploadAborted","_startUpload","_sendRequest","imageURL","_beforeElementDrop","_selectImage","$popup_height_val","$popup_width_val","flt","refreshAlign","refreshAlignOnShow","refreshDisplayOnShow","selectNode","imgLengthCaption","newTag","ancorTag","imgElementLength","docFrag","inline","imageAlign","imageManagerLoadURL","imageManagerLoadMethod","imageManagerLoadParams","imageManagerPreloader","imageManagerDeleteURL","imageManagerDeleteMethod","imageManagerDeleteParams","imageManagerPageSize","imageManagerScrollOffset","imageManagerToggleTags","$preloader","$media_files","$image_tags","page","image_count","loaded_images","column_number","ERROR_DURING_LOAD","MISSING_LOAD_URL_OPTION","LOAD_BAD_RESPONSE","MISSING_IMG_THUMB","MISSING_IMG_URL","ERROR_DURING_DELETE","MISSING_DELETE_URL_OPTION","_delayedInit","_loadImages","_columnNumber","window_width","_buildColumns","_processLoadedImages","_infiniteScroll","_loadImage","$img_container","_resizeModal","thumb","_imageHasTag","_getImages","_reorderImages","_shortestColumn","$col","min_height","col","$column","from","get_images","$image","infinite_scroll","cols","_getImageAttrs","img_attributes","_insertImage","_updateTags","_showImagesByTags","_deleteImage","confirm","_toggleTags","title_height","tags_height","$tags","_selectTag","$tag","inlineClasses","inlineStyles","new_split","lineBreakerTags","lineBreakerOffset","lineBreakerHorizontalOffset","lineBreaker","$line_breaker","mouseDownFlag","mouseMoveTimer","_show","$tag1","$tag2","breakerTop","breakerLeft","breakerWidth","parent_tag","parent_bottom","tag_top","tag_bottom","tag1_bottom","tag2_top","_checkTagSiblings","mouseY","$sibling","offsetParent","_checkTag","_isInWp","inFroalaWrapper","o_tag","_tagAt","_searchTagVertically","_searchTagHorizontally","limit","_tagUnder","_mouseTimer","_hide","_mouseDown","_mouseUp","_doLineBreak","_initLineBreaker","lineHeights","Default","Single","Double","$blk","lineH","blkStyle","lineStyle","linkEditButtons","linkInsertButtons","linkAttributes","linkAutoPrefix","linkMultipleStyles","linkConvertEmailAddress","linkAlwaysNoFollow","linkNoOpener","linkNoReferrer","linkList","displayText","linkText","c_el","allSelected","selectedLinks","containerEl","links","linkRange","compareBoundaryPoints","END_TO_START","START_TO_END","compareEndPoints","_hideEditPopup","link_buttons","text_inputs","_showInsertPopup","input_layer","imageLink","newImg","usePredefined","rel","insertCallback","marker_str","original_href","$pop","$ref","$prev","listAdvancedTypes","_openFlag","_closeFlag","_replace","$l","_format","start_margin","open_tag","end_tag","_unformat","li_class","li_attrs","_shouldUnformat","do_unformat","list_type","_indent","nl","prev_nl","$new_nl","_outdent","_indentListStyleTypeNone","lst_parent","_outdentListStyleTypeNone","_afterCommand","do_indent","circle","disc","square","PRE","paragraphDefaultSelection","_styleLiWithoutBlocks","_styleLiWithBlocks","_styleTdWithBlocks","_style","$checkstyle","BLOCKQUOTE","blk","paragraphStyles","paragraphMultipleStyles","html2pdf","_prepare","print_iframe","overflow","listener","frame_doc","style_el","style_elements","link_el","new_link_el","media","frames","toPDF","html2canvas","useCORS","quickInsertButtons","quickInsertTags","QUICK_INSERT_BUTTONS","RegisterQuickInsertButton","requiredPlugin","$qi_image_input","quickInsert","prompt","embedly","table","$quick_insert","_place","qiTop","qiLeft","qiTagAlign","$helper","_showQIHelper","_hideHelper","_initquickInsert","deep_tag","_enterInBR","_enterInP","$qi_helper","btns_html","transition_delay","childItems","_repositionQIButton","_deepestParent","_increase","$quote","_decrease","increase","decrease","saveInterval","saveURL","saveParams","saveParam","saveMethod","_timeout","_last_html","_force","ERROR_ON_SERVER","event_returned_value","_mightSave","letteringClass","selectionClass","specialCharactersSets","specialCharButtons","specialCharacters","_showSpecialChars","_initSpecialChars","_specialCharsHTML","_renderSplCharsCategory","_renderSpanSplCharsHtml","setSpecialCharacterCategory","$icons","splChars_html","splChar","splCharMap","splCharValue","showSpecialCharsPopup","specialCharacter","tableInsertMaxSize","tableEditButtons","tableInsertButtons","tableResizer","tableDefaultWidth","tableResizerOffset","tableResizingLimit","tableColorsButtons","tableColors","tableColorsStep","tableCellStyles","tableStyles","tableCellMultipleStyles","tableMultipleStyles","tableInsertHelper","tableInsertHelperOffset","$resizer","$insert_helper","mouseDownCellFlag","mouseDownCell","resizingFlag","_tableMap","_selectionOffset","selectedCells","table_buttons","rows_columns","_insertTableHtml","_hoverCell","$table_cell","$select_size","$cell","$focused_el","$cells","_colorsHTML","_addColorsAccessibility","setBackground","cell_width","$table","$current_table","selectedTable","addHeader","$td","removeHeader","$table_header","td","insertRow","ref_row","$ref_row","_currentSelection","min_i","max_i","$refCell","deleteRow","rowspan","insertAdjacentElement","$row_parent","_updateCellSpan","insertColumn","ref_col","min_j","max_j","old_width","new_width","col_no","td_no","ref_td","$ref_td","colspan","deleteColumn","_columnWidth","_updateColspan","first_span","_decreaseCellSpan","_updateRowspan","span_type","mergeCells","_removeKeyboardSelectionHandlers","cells","$first_cell","$first_row","first_row_cells","empty_trs","splitCellHorizontally","$selected_cell","$current_row","current_rowspan","cell_origin","_cellOrigin","$new_td","new_rowspan","_removeSelection","splitCellVertically","current_colspan","parent_width","new_colspan","_columnsWidth","$selected_cells","horizontalAlign","multiple_styles","classes","$tr","c_index","cspan","rspan","_cellEnds","origin_i","origin_j","_clearSelection","cellOrigin","cellEnd","_selectionLimits","first_i","last_i","first_j","last_j","$tl","$bl","selectCells","firstCell","lastCell","firstCellOrigin","lastCellOrigin","limits","_getCellUnder","cell","_stopEdit","_resize","_hideResizer","_mouseEnter","relatedTarget","_inputOnClick","_moveInNestedTable","new_map","_moveUp","_moveDown","_moveWithArrows","origin","up","_navigateWithArrows","_initResizer","$table_resizer","_mouseMove","_hideInsertHelper","_placeResizer","$table_parent","tag_left","tag_right","tag_origin","resizer_top","resizer_height","resizer_left","max_left","max_right","_showInsertColHelper","_initInsertHelper","mouseX","btn_width","_showInsertRowHelper","_insertHelper","tag_below","initial_positon","release_position","table_width","first_widths","first_percentages","second_widths","second_percentages","$second_cell","first_cell_percentage","table_percentage","left_margin","right_margin","col1","col2","left_limit","right_limit","_addMarkersInCell","_useTab","currentSelection","focusOffset","$ti_helper","_selectCellWithKeyboard","selectCellsWithKeyboard","fixedCell","handlerCell","handlerOrigin","selected_cells","c_selected_cells","below","tableRows","tableColumns","tableCells","Top","Middle","Bottom","tableCellVerticalAlign","tableCellHorizontalAlign","URLRegEx","_linkReplaceHandler","dots","_getRegEx","_convertToLink","_isA","_lastPart","_inlineType","domParser","DOMParser","parseFromString","rel_attr","videoAllowedTypes","videoEditButtons","videoInsertButtons","videoMaxSize","videoResize","videoSizeButtons","videoTextNear","videoUpload","videoUploadMethod","videoUploadParam","videoUploadParams","videoUploadToS3","videoUploadToAzure","videoUploadURL","DEFAULT_VIDEO_UPLOAD_URL","$video_resizer","$current_video","$video_obj","iframeURL","video_buttons","insertHtmlVideo","$current_video_obj","autoPlayFlag","addAutoplay","indexofAutoplay","_videoUploaded","_videoUploadError","_videoUploadProgress","_videoUploadAborted","c_y","clientTop","s_y","diff_y","_resizeVideo","$vid_overlay","_selectVideo","vid_exit_flag","vid","videoURL","_refreshVideoList","candidates","dragDrop","toggleAutoplayStyle","setAutoplay","videoAlign","wordDeniedTags","wordDeniedAttrs","wordAllowedStyleProps","wordPasteModal","wordPasteKeepFormatting","_v_shapes_map","_showModal","_buildModalBody","_hideModal","wordAllowedStylePropsBackup","_removeNode","_traverse","current_child","previous_child","_isList","_getListLevel","_getListContent","head_style_hash","cloned_node","heading","_getAllowedListStyles","_cleanElement","_buildList","prev_margin","order_regex","is_ordered","prev_order","previous_element_sibling","list_type_node","listObj","list_tag","listStyle","startIndexUpperAlpha","startIndexLowerAlpha","listType","classType","next_level","tagClosedFlag","isMarginEqual","allowedStyles","parentStyles","foundVal","_changeTagName","old_node","attribute","_cleanTr","total_width","missing_width","width_attr","td_child","has_single_child","_cleanAlignment","class_attr","_normalizeAttribute","class_matches","xl_class","dot_xl_class","_appendStyle","valign","valign_matches","halign","halign_matches","background_color","background_matches","old_style","new_style","_cleanStyleDuplicates","style_list","style_hash","style_list_item","splited_style","_hexToBase64","hexa_chars","dec_chars","dec","_rtf_map","_getRtfData","rtf","p_type","img_data","bliptab_split","image_type","bracket_split","space_split","image_hex","_buildRtfMap","_cleanImage","vshapes_tag","image_base64","data_uri","tag_name_lower_case","ignore_tags","class_contents","class_content","style_attrs","style_attr","paragraph_tag_list","el_class","cleaned_class","paragraph_style","paragraph_style_matches","getNamedItem","spanTags","_parseHeadStyle","head_styles","style_definitions","style_attrs_array","_getVShapes","oid","parser","word_doc","previous_sibling","list_element","before_element","fragment","word_doc_string"],"mappings":"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;EAdsC,KAAd,CAA7B;EAiBA;EACL;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACKjxE,IAAAA,CAAC,CAACs6E,MAAF,GAAWvF,MAAM,CAAC5D,aAAP,CAAqBmJ,MAArB,CAAX;EAEA;EACL;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACKt6E,IAAAA,CAAC,CAACu6E,UAAF,GAAexF,MAAM,CAAC1D,iBAAP,CAAyBiJ,MAAzB,CAAf;EACH,GA3DA,GAAD;;EA8DC,aAAUt8D,SAAV,EAAqB;EAClB;EACA,QAAIhe,CAAC,GAAG6sE,QAAR;EACA,QAAIW,KAAK,GAAGxtE,CAAC,CAACytE,GAAd;EACA,QAAIC,IAAI,GAAGF,KAAK,CAACE,IAAjB;EACA,QAAI8M,YAAY,GAAGhN,KAAK,CAACS,SAAzB;EAEA;EACL;EACA;;EACK,QAAIwM,KAAK,GAAGz6E,CAAC,CAAC06E,GAAF,GAAQ,EAApB;EAEA;EACL;EACA;;EACK,QAAIC,OAAO,GAAGF,KAAK,CAACG,IAAN,GAAalN,IAAI,CAACvjC,MAAL,CAAY;EACnC;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACSxM,MAAAA,IAAI,EAAE,cAAUk9C,IAAV,EAAgBC,GAAhB,EAAqB;EACvB,aAAKD,IAAL,GAAYA,IAAZ;EACA,aAAKC,GAAL,GAAWA,GAAX;EACH;EAED;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACI;EACA;EACJ;EACI;EACA;EACJ;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACI;EACA;EACJ;EACI;EACA;EACJ;EAEA;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACJ;;EAEA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS;EACI;EACA;EACA;EAEA;EACJ;;EAnLmC,KAAZ,CAA3B;EAsLA;EACL;EACA;EACA;EACA;EACA;;EACK,QAAIC,YAAY,GAAGN,KAAK,CAACxM,SAAN,GAAkBP,IAAI,CAACvjC,MAAL,CAAY;EAC7C;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACSxM,MAAAA,IAAI,EAAE,cAAUuwC,KAAV,EAAiBC,QAAjB,EAA2B;EAC7BD,QAAAA,KAAK,GAAG,KAAKA,KAAL,GAAaA,KAAK,IAAI,EAA9B;;EAEA,YAAIC,QAAQ,IAAInwD,SAAhB,EAA2B;EACvB,eAAKmwD,QAAL,GAAgBA,QAAhB;EACH,SAFD,MAEO;EACH,eAAKA,QAAL,GAAgBD,KAAK,CAACj4F,MAAN,GAAe,CAA/B;EACH;EACJ,OA7B4C;;EA+B7C;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACS+kG,MAAAA,KAAK,EAAE,iBAAY;EACf;EACA,YAAIC,QAAQ,GAAG,KAAK/M,KAApB;EACA,YAAIgN,cAAc,GAAGD,QAAQ,CAAChlG,MAA9B,CAHe;;EAMf,YAAIklG,QAAQ,GAAG,EAAf;;EACA,aAAK,IAAInlG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGklG,cAApB,EAAoCllG,CAAC,EAArC,EAAyC;EACrC,cAAIolG,OAAO,GAAGH,QAAQ,CAACjlG,CAAD,CAAtB;EA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"}