/*!
 * froala_editor v3.2.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2021 Froala Labs
 */

{"version":3,"file":"forms.js","sources":["../../../src/js/plugins/forms.js"],"sourcesContent":["import FE from '../index.js'\r\n'use strict';\r\n\r\nObject.assign(FE.POPUP_TEMPLATES, {\r\n  'forms.edit': '[_BUTTONS_]',\r\n  'forms.update': '[_BUTTONS_][_TEXT_LAYER_]'\r\n})\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  formEditButtons: ['inputStyle', 'inputEdit'],\r\n  formStyles: {\r\n    'fr-rounded': 'Rounded',\r\n    'fr-large': 'Large'\r\n  },\r\n  formMultipleStyles: true,\r\n  formUpdateButtons: ['inputBack', '|']\r\n})\r\n\r\n\r\n\r\nFE.PLUGINS.forms = function (editor) {\r\n  const { $ } = editor\r\n  let current_input \r\n\r\n  /**\r\n   * Input mousedown.\r\n   */\r\n  function _inputMouseDown(e) {\r\n    editor.selection.clear() \r\n    $(this).data('mousedown', true) \r\n  }\r\n\r\n  /**\r\n   * Mouseup on the input.\r\n   */\r\n  function _inputMouseUp(e) {\r\n\r\n    // Mousedown was made.\r\n    if ($(this).data('mousedown')) {\r\n      e.stopPropagation() \r\n      $(this).removeData('mousedown') \r\n\r\n      current_input = this \r\n\r\n      showEditPopup(this) \r\n    }\r\n\r\n    e.preventDefault() \r\n  }\r\n\r\n  /**\r\n   * Cancel if mousedown was made on any input.\r\n   */\r\n  function _cancelSelection() {\r\n    editor.$el.find('input, textarea, button').removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Touch move.\r\n   */\r\n  function _inputTouchMove() {\r\n    $(this).removeData('mousedown') \r\n  }\r\n\r\n  /**\r\n   * Assign the input events.\r\n   */\r\n  function _bindEvents() {\r\n    editor.events.$on(editor.$el, editor._mousedown, 'input, textarea, button', _inputMouseDown) \r\n    editor.events.$on(editor.$el, editor._mouseup, 'input, textarea, button', _inputMouseUp) \r\n    editor.events.$on(editor.$el, 'touchmove', 'input, textarea, button', _inputTouchMove) \r\n    editor.events.$on(editor.$el, editor._mouseup, _cancelSelection) \r\n    editor.events.$on(editor.$win, editor._mouseup, _cancelSelection) \r\n\r\n    _initUpdatePopup(true) \r\n  }\r\n\r\n  /**\r\n   * Get the current button.\r\n   */\r\n  function getInput() {\r\n    if (current_input) return current_input \r\n\r\n    return null \r\n  }\r\n\r\n  /**\r\n   * Init the edit button popup.\r\n   */\r\n  function _initEditPopup() {\r\n\r\n    // Button edit buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formEditButtons.length > 0) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formEditButtons)}</div>` \r\n    }\r\n\r\n    const template = {\r\n      buttons: buttons\r\n    } \r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.edit', template) \r\n\r\n    if (editor.$wp) {\r\n      editor.events.$on(editor.$wp, 'scroll.link-edit', function () {\r\n        if (getInput() && editor.popups.isVisible('forms.edit')) {\r\n          showEditPopup(getInput()) \r\n        }\r\n      }) \r\n    }\r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the edit button popup.\r\n   */\r\n  function showEditPopup(input) {\r\n    const hideEditPopups = ['checkbox', 'radio']\r\n\r\n    if (hideEditPopups.indexOf(input.type) != -1) {\r\n      return\r\n    }\r\n\r\n    let $popup = editor.popups.get('forms.edit') \r\n\r\n    if (!$popup) $popup = _initEditPopup() \r\n\r\n    current_input = input \r\n    const $input = $(input) \r\n\r\n    editor.popups.refresh('forms.edit') \r\n\r\n    editor.popups.setContainer('forms.edit', editor.$sc) \r\n    let left = $input.offset().left + $input.outerWidth() / 2\r\n    let top = $input.offset().top + $input.outerHeight()\r\n\r\n    editor.popups.show('forms.edit', left, top, $input.outerHeight()) \r\n  }\r\n\r\n  /**\r\n   * Refresh update button popup callback.\r\n   */\r\n  function _refreshUpdateCallback() {\r\n    const $popup = editor.popups.get('forms.update') \r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n\r\n      if ($input.is('button')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.text()) \r\n      }\r\n      else if ($input.is('input[type=button]') || $input.is('input[type=submit]') || $input.is('input[type=reset]')) {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.val()) \r\n      }\r\n      else {\r\n        $popup.find('input[type=\"text\"][name=\"text\"]').val($input.attr('placeholder')) \r\n      }\r\n    }\r\n\r\n    $popup.find('input[type=\"text\"][name=\"text\"]').trigger('change') \r\n  }\r\n\r\n  /**\r\n   * Hide update button popup callback.\r\n   */\r\n  function _hideUpdateCallback() {\r\n    current_input = null \r\n  }\r\n\r\n  /**\r\n   * Init update button popup.\r\n   */\r\n  function _initUpdatePopup(delayed) {\r\n    if (delayed) {\r\n      editor.popups.onRefresh('forms.update', _refreshUpdateCallback) \r\n      editor.popups.onHide('forms.update', _hideUpdateCallback) \r\n\r\n      return true \r\n    }\r\n\r\n    // Button update buttons.\r\n    let buttons = '' \r\n\r\n    if (editor.opts.formUpdateButtons.length >= 1) {\r\n      buttons = `<div class=\"fr-buttons\">${editor.button.buildList(editor.opts.formUpdateButtons)}</div>` \r\n    }\r\n\r\n    let text_layer = '' \r\n    let tab_idx = 0 \r\n    text_layer = `<div class=\"fr-forms-text-layer fr-layer fr-active\"> \r\n    <div class=\"fr-input-line\"><input name=\"text\" type=\"text\" placeholder=\"Text\" tabIndex=\" ${(++tab_idx)} \"></div>\r\n    <div class=\"fr-action-buttons\"><button class=\"fr-command fr-submit\" data-cmd=\"updateInput\" href=\"#\" tabIndex=\"${(++tab_idx)}\" type=\"button\">${editor.language.translate('Update')}</button></div></div>`\r\n\r\n    const template = {\r\n      buttons: buttons,\r\n      text_layer: text_layer\r\n    }\r\n\r\n    // Set the template in the popup.\r\n    const $popup = editor.popups.create('forms.update', template) \r\n\r\n    return $popup \r\n  }\r\n\r\n  /**\r\n   * Show the button update popup.\r\n   */\r\n  function showUpdatePopup() {\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      let $popup = editor.popups.get('forms.update') \r\n\r\n      if (!$popup) $popup = _initUpdatePopup() \r\n\r\n      if (!editor.popups.isVisible('forms.update')) {\r\n        editor.popups.refresh('forms.update') \r\n      }\r\n\r\n      editor.popups.setContainer('forms.update', editor.$sc) \r\n      let left = $input.offset().left + $input.outerWidth() / 2\r\n      let top = $input.offset().top + $input.outerHeight()\r\n      \r\n      editor.popups.show('forms.update', left, top, $input.outerHeight()) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply specific style.\r\n   */\r\n  function applyStyle(val, formStyles, multipleStyles) {\r\n    if (typeof formStyles === 'undefined') formStyles = editor.opts.formStyles \r\n\r\n    if (typeof multipleStyles === 'undefined') multipleStyles = editor.opts.formMultipleStyles \r\n\r\n    const input = getInput() \r\n\r\n    if (!input) return false \r\n\r\n    // Remove multiple styles.\r\n    if (!multipleStyles) {\r\n      const styles = Object.keys(formStyles) \r\n      styles.splice(styles.indexOf(val), 1) \r\n      $(input).removeClass(styles.join(' ')) \r\n    }\r\n\r\n    $(input).toggleClass(val) \r\n  }\r\n\r\n  /**\r\n   * Back button in update button popup.\r\n   */\r\n  function back() {\r\n    editor.events.disableBlur() \r\n    editor.selection.restore() \r\n    editor.events.enableBlur() \r\n\r\n    const input = getInput() \r\n\r\n    if (input && editor.$wp) {\r\n      if (input.tagName === 'BUTTON') editor.selection.restore() \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hit the update button in the input popup.\r\n   */\r\n  function updateInput() {\r\n    const $popup = editor.popups.get('forms.update') \r\n\r\n    const input = getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input)\r\n      const inputBtns = ['button', 'submit', 'reset'] \r\n      const val = $popup.find('input[type=\"text\"][name=\"text\"]').val() || '' \r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1988\r\n      // update the text content if input is a button\r\n      if ($input.is('button')) {\r\n        if (val.length) {\r\n          $input.text(val)\r\n        }\r\n        else {\r\n          // If tag is button, Update empty text.\r\n          $input.text('\\u200B')\r\n        }\r\n      }\r\n      else if (inputBtns.indexOf(input.type) != -1 ) {\r\n        $input.attr('value', val)\r\n      }\r\n\r\n      // update the place holder if input type is text\r\n      else {\r\n        $input.attr('placeholder', val) \r\n      }\r\n\r\n      editor.popups.hide('forms.update') \r\n      showEditPopup(input) \r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Bind input events.\r\n    _bindEvents() \r\n\r\n    // Prevent form submit.\r\n    editor.events.$on(editor.$el, 'submit', 'form', function (e) {\r\n      e.preventDefault() \r\n\r\n      return false \r\n    })\r\n  }\r\n\r\n  return {\r\n    _init: _init,\r\n    updateInput: updateInput,\r\n    getInput: getInput,\r\n    applyStyle: applyStyle,\r\n    showUpdatePopup: showUpdatePopup,\r\n    showEditPopup: showEditPopup,\r\n    back: back\r\n  }\r\n}\r\n\r\n// Register command to update input.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n\r\n// Link styles.\r\nFE.DefineIcon('inputStyle', { NAME: 'magic', SVG_KEY: 'inlineStyle' })\r\nFE.RegisterCommand('inputStyle', {\r\n  title: 'Style',\r\n  type: 'dropdown',\r\n  html: function () {\r\n    let c = '<ul class=\"fr-dropdown-list\">'\r\n    const { formStyles : options } = this.opts \r\n\r\n    for (const cls in options) {\r\n      if (options.hasOwnProperty(cls)) {\r\n        c += `<li><a class=\"fr-command\" tabIndex=\"-1\" data-cmd=\"inputStyle\" data-param1=\"${cls}\">${this.language.translate(options[cls])}</a></li>`\r\n      }\r\n    }\r\n    c += '</ul>' \r\n\r\n    return c \r\n  },\r\n  callback: function (cmd, val) {\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      this.forms.applyStyle(val) \r\n      this.forms.showEditPopup(input) \r\n    }\r\n  },\r\n  refreshOnShow: function ($btn, $dropdown) {\r\n    const { $ } = this\r\n    const input = this.forms.getInput() \r\n\r\n    if (input) {\r\n      const $input = $(input) \r\n\r\n      $dropdown.find('.fr-command').each(function () {\r\n        const cls = $(this).data('param1') \r\n        $(this).toggleClass('fr-active', $input.hasClass(cls)) \r\n      })\r\n    }\r\n  }\r\n}) \r\n\r\nFE.DefineIcon('inputEdit', { NAME: 'edit', SVG_KEY: 'edit' }) \r\nFE.RegisterCommand('inputEdit', {\r\n  title: 'Edit Button',\r\n  undo: false,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.showUpdatePopup() \r\n  }\r\n})\r\n\r\nFE.DefineIcon('inputBack', { NAME: 'arrow-left', SVG_KEY: 'back' })\r\nFE.RegisterCommand('inputBack', {\r\n  title: 'Back',\r\n  undo: false,\r\n  focus: false,\r\n  back: true,\r\n  refreshAfterCallback: false,\r\n  callback: function () {\r\n    this.forms.back() \r\n  }\r\n}) \r\n\r\n// Register command to update button.\r\nFE.RegisterCommand('updateInput', {\r\n  undo: false,\r\n  focus: false,\r\n  title: 'Update',\r\n  callback: function () {\r\n    this.forms.updateInput() \r\n  }\r\n}) \r\n"],"names":["Object","assign","FE","POPUP_TEMPLATES","DEFAULTS","formEditButtons","formStyles","formMultipleStyles","formUpdateButtons","PLUGINS","forms","editor","$","current_input","_inputMouseDown","e","selection","clear","data","_inputMouseUp","stopPropagation","removeData","showEditPopup","preventDefault","_cancelSelection","$el","find","_inputTouchMove","_bindEvents","events","$on","_mousedown","_mouseup","$win","_initUpdatePopup","getInput","_initEditPopup","buttons","opts","length","button","buildList","template","$popup","popups","create","$wp","isVisible","input","hideEditPopups","indexOf","type","get","$input","refresh","setContainer","$sc","left","offset","outerWidth","top","outerHeight","show","_refreshUpdateCallback","is","val","text","attr","trigger","_hideUpdateCallback","delayed","onRefresh","onHide","text_layer","tab_idx","language","translate","showUpdatePopup","applyStyle","multipleStyles","styles","keys","splice","removeClass","join","toggleClass","back","disableBlur","restore","enableBlur","tagName","updateInput","inputBtns","hide","_init","RegisterCommand","undo","focus","title","callback","DefineIcon","NAME","SVG_KEY","html","c","options","cls","hasOwnProperty","cmd","refreshOnShow","$btn","$dropdown","each","hasClass","refreshAfterCallback"],"mappings":";;;;;;;;EAGAA,MAAM,CAACC,MAAP,CAAcC,EAAE,CAACC,eAAjB,EAAkC;EAChC,gBAAc,aADkB;EAEhC,kBAAgB;EAFgB,CAAlC;;EAMAH,MAAM,CAACC,MAAP,CAAcC,EAAE,CAACE,QAAjB,EAA2B;EACzBC,EAAAA,eAAe,EAAE,CAAC,YAAD,EAAe,WAAf,CADQ;EAEzBC,EAAAA,UAAU,EAAE;EACV,kBAAc,SADJ;EAEV,gBAAY;EAFF,GAFa;EAMzBC,EAAAA,kBAAkB,EAAE,IANK;EAOzBC,EAAAA,iBAAiB,EAAE,CAAC,WAAD,EAAc,GAAd;EAPM,CAA3B;;EAYAN,EAAE,CAACO,OAAH,CAAWC,KAAX,GAAmB,UAAUC,MAAV,EAAkB;EAAA,MAC3BC,CAD2B,GACrBD,MADqB,CAC3BC,CAD2B;EAEnC,MAAIC,aAAJ;EAEA;EACF;EACA;;EACE,WAASC,eAAT,CAAyBC,CAAzB,EAA4B;EAC1BJ,IAAAA,MAAM,CAACK,SAAP,CAAiBC,KAAjB;EACAL,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,WAAb,EAA0B,IAA1B;EACD;EAED;EACF;EACA;;;EACE,WAASC,aAAT,CAAuBJ,CAAvB,EAA0B;EAExB;EACA,QAAIH,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,WAAb,CAAJ,EAA+B;EAC7BH,MAAAA,CAAC,CAACK,eAAF;EACAR,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQS,UAAR,CAAmB,WAAnB;EAEAR,MAAAA,aAAa,GAAG,IAAhB;EAEAS,MAAAA,aAAa,CAAC,IAAD,CAAb;EACD;;EAEDP,IAAAA,CAAC,CAACQ,cAAF;EACD;EAED;EACF;EACA;;;EACE,WAASC,gBAAT,GAA4B;EAC1Bb,IAAAA,MAAM,CAACc,GAAP,CAAWC,IAAX,CAAgB,yBAAhB,EAA2CL,UAA3C,CAAsD,WAAtD;EACD;EAED;EACF;EACA;;;EACE,WAASM,eAAT,GAA2B;EACzBf,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQS,UAAR,CAAmB,WAAnB;EACD;EAED;EACF;EACA;;;EACE,WAASO,WAAT,GAAuB;EACrBjB,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACc,GAAzB,EAA8Bd,MAAM,CAACoB,UAArC,EAAiD,yBAAjD,EAA4EjB,eAA5E;EACAH,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACc,GAAzB,EAA8Bd,MAAM,CAACqB,QAArC,EAA+C,yBAA/C,EAA0Eb,aAA1E;EACAR,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACc,GAAzB,EAA8B,WAA9B,EAA2C,yBAA3C,EAAsEE,eAAtE;EACAhB,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACc,GAAzB,EAA8Bd,MAAM,CAACqB,QAArC,EAA+CR,gBAA/C;EACAb,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACsB,IAAzB,EAA+BtB,MAAM,CAACqB,QAAtC,EAAgDR,gBAAhD;;EAEAU,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;EACD;EAED;EACF;EACA;;;EACE,WAASC,QAAT,GAAoB;EAClB,QAAItB,aAAJ,EAAmB,OAAOA,aAAP;EAEnB,WAAO,IAAP;EACD;EAED;EACF;EACA;;;EACE,WAASuB,cAAT,GAA0B;EAExB;EACA,QAAIC,OAAO,GAAG,EAAd;;EAEA,QAAI1B,MAAM,CAAC2B,IAAP,CAAYjC,eAAZ,CAA4BkC,MAA5B,GAAqC,CAAzC,EAA4C;EAC1CF,MAAAA,OAAO,uCAA8B1B,MAAM,CAAC6B,MAAP,CAAcC,SAAd,CAAwB9B,MAAM,CAAC2B,IAAP,CAAYjC,eAApC,CAA9B,WAAP;EACD;;EAED,QAAMqC,QAAQ,GAAG;EACfL,MAAAA,OAAO,EAAEA;EADM,KAAjB,CATwB;;EAcxB,QAAMM,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcC,MAAd,CAAqB,YAArB,EAAmCH,QAAnC,CAAf;;EAEA,QAAI/B,MAAM,CAACmC,GAAX,EAAgB;EACdnC,MAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACmC,GAAzB,EAA8B,kBAA9B,EAAkD,YAAY;EAC5D,YAAIX,QAAQ,MAAMxB,MAAM,CAACiC,MAAP,CAAcG,SAAd,CAAwB,YAAxB,CAAlB,EAAyD;EACvDzB,UAAAA,aAAa,CAACa,QAAQ,EAAT,CAAb;EACD;EACF,OAJD;EAKD;;EAED,WAAOQ,MAAP;EACD;EAED;EACF;EACA;;;EACE,WAASrB,aAAT,CAAuB0B,KAAvB,EAA8B;EAC5B,QAAMC,cAAc,GAAG,CAAC,UAAD,EAAa,OAAb,CAAvB;;EAEA,QAAIA,cAAc,CAACC,OAAf,CAAuBF,KAAK,CAACG,IAA7B,KAAsC,CAAC,CAA3C,EAA8C;EAC5C;EACD;;EAED,QAAIR,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcQ,GAAd,CAAkB,YAAlB,CAAb;EAEA,QAAI,CAACT,MAAL,EAAaA,MAAM,GAAGP,cAAc,EAAvB;EAEbvB,IAAAA,aAAa,GAAGmC,KAAhB;EACA,QAAMK,MAAM,GAAGzC,CAAC,CAACoC,KAAD,CAAhB;EAEArC,IAAAA,MAAM,CAACiC,MAAP,CAAcU,OAAd,CAAsB,YAAtB;EAEA3C,IAAAA,MAAM,CAACiC,MAAP,CAAcW,YAAd,CAA2B,YAA3B,EAAyC5C,MAAM,CAAC6C,GAAhD;EACA,QAAIC,IAAI,GAAGJ,MAAM,CAACK,MAAP,GAAgBD,IAAhB,GAAuBJ,MAAM,CAACM,UAAP,KAAsB,CAAxD;EACA,QAAIC,GAAG,GAAGP,MAAM,CAACK,MAAP,GAAgBE,GAAhB,GAAsBP,MAAM,CAACQ,WAAP,EAAhC;EAEAlD,IAAAA,MAAM,CAACiC,MAAP,CAAckB,IAAd,CAAmB,YAAnB,EAAiCL,IAAjC,EAAuCG,GAAvC,EAA4CP,MAAM,CAACQ,WAAP,EAA5C;EACD;EAED;EACF;EACA;;;EACE,WAASE,sBAAT,GAAkC;EAChC,QAAMpB,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcQ,GAAd,CAAkB,cAAlB,CAAf;EACA,QAAMJ,KAAK,GAAGb,QAAQ,EAAtB;;EAEA,QAAIa,KAAJ,EAAW;EACT,UAAMK,MAAM,GAAGzC,CAAC,CAACoC,KAAD,CAAhB;;EAEA,UAAIK,MAAM,CAACW,EAAP,CAAU,QAAV,CAAJ,EAAyB;EACvBrB,QAAAA,MAAM,CAACjB,IAAP,CAAY,iCAAZ,EAA+CuC,GAA/C,CAAmDZ,MAAM,CAACa,IAAP,EAAnD;EACD,OAFD,MAGK,IAAIb,MAAM,CAACW,EAAP,CAAU,oBAAV,KAAmCX,MAAM,CAACW,EAAP,CAAU,oBAAV,CAAnC,IAAsEX,MAAM,CAACW,EAAP,CAAU,mBAAV,CAA1E,EAA0G;EAC7GrB,QAAAA,MAAM,CAACjB,IAAP,CAAY,iCAAZ,EAA+CuC,GAA/C,CAAmDZ,MAAM,CAACY,GAAP,EAAnD;EACD,OAFI,MAGA;EACHtB,QAAAA,MAAM,CAACjB,IAAP,CAAY,iCAAZ,EAA+CuC,GAA/C,CAAmDZ,MAAM,CAACc,IAAP,CAAY,aAAZ,CAAnD;EACD;EACF;;EAEDxB,IAAAA,MAAM,CAACjB,IAAP,CAAY,iCAAZ,EAA+C0C,OAA/C,CAAuD,QAAvD;EACD;EAED;EACF;EACA;;;EACE,WAASC,mBAAT,GAA+B;EAC7BxD,IAAAA,aAAa,GAAG,IAAhB;EACD;EAED;EACF;EACA;;;EACE,WAASqB,gBAAT,CAA0BoC,OAA1B,EAAmC;EACjC,QAAIA,OAAJ,EAAa;EACX3D,MAAAA,MAAM,CAACiC,MAAP,CAAc2B,SAAd,CAAwB,cAAxB,EAAwCR,sBAAxC;EACApD,MAAAA,MAAM,CAACiC,MAAP,CAAc4B,MAAd,CAAqB,cAArB,EAAqCH,mBAArC;EAEA,aAAO,IAAP;EACD,KANgC;;;EASjC,QAAIhC,OAAO,GAAG,EAAd;;EAEA,QAAI1B,MAAM,CAAC2B,IAAP,CAAY9B,iBAAZ,CAA8B+B,MAA9B,IAAwC,CAA5C,EAA+C;EAC7CF,MAAAA,OAAO,uCAA8B1B,MAAM,CAAC6B,MAAP,CAAcC,SAAd,CAAwB9B,MAAM,CAAC2B,IAAP,CAAY9B,iBAApC,CAA9B,WAAP;EACD;;EAED,QAAIiE,UAAU,GAAG,EAAjB;EACA,QAAIC,OAAO,GAAG,CAAd;EACAD,IAAAA,UAAU,2KACiF,EAAEC,OADnF,oJAEuG,EAAEA,OAFzG,gCAEoI/D,MAAM,CAACgE,QAAP,CAAgBC,SAAhB,CAA0B,QAA1B,CAFpI,0BAAV;EAIA,QAAMlC,QAAQ,GAAG;EACfL,MAAAA,OAAO,EAAEA,OADM;EAEfoC,MAAAA,UAAU,EAAEA;EAFG,KAAjB,CArBiC;;EA2BjC,QAAM9B,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcC,MAAd,CAAqB,cAArB,EAAqCH,QAArC,CAAf;EAEA,WAAOC,MAAP;EACD;EAED;EACF;EACA;;;EACE,WAASkC,eAAT,GAA2B;EACzB,QAAM7B,KAAK,GAAGb,QAAQ,EAAtB;;EAEA,QAAIa,KAAJ,EAAW;EACT,UAAMK,MAAM,GAAGzC,CAAC,CAACoC,KAAD,CAAhB;EAEA,UAAIL,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcQ,GAAd,CAAkB,cAAlB,CAAb;EAEA,UAAI,CAACT,MAAL,EAAaA,MAAM,GAAGT,gBAAgB,EAAzB;;EAEb,UAAI,CAACvB,MAAM,CAACiC,MAAP,CAAcG,SAAd,CAAwB,cAAxB,CAAL,EAA8C;EAC5CpC,QAAAA,MAAM,CAACiC,MAAP,CAAcU,OAAd,CAAsB,cAAtB;EACD;;EAED3C,MAAAA,MAAM,CAACiC,MAAP,CAAcW,YAAd,CAA2B,cAA3B,EAA2C5C,MAAM,CAAC6C,GAAlD;EACA,UAAIC,IAAI,GAAGJ,MAAM,CAACK,MAAP,GAAgBD,IAAhB,GAAuBJ,MAAM,CAACM,UAAP,KAAsB,CAAxD;EACA,UAAIC,GAAG,GAAGP,MAAM,CAACK,MAAP,GAAgBE,GAAhB,GAAsBP,MAAM,CAACQ,WAAP,EAAhC;EAEAlD,MAAAA,MAAM,CAACiC,MAAP,CAAckB,IAAd,CAAmB,cAAnB,EAAmCL,IAAnC,EAAyCG,GAAzC,EAA8CP,MAAM,CAACQ,WAAP,EAA9C;EACD;EACF;EAED;EACF;EACA;;;EACE,WAASiB,UAAT,CAAoBb,GAApB,EAAyB3D,UAAzB,EAAqCyE,cAArC,EAAqD;EACnD,QAAI,OAAOzE,UAAP,KAAsB,WAA1B,EAAuCA,UAAU,GAAGK,MAAM,CAAC2B,IAAP,CAAYhC,UAAzB;EAEvC,QAAI,OAAOyE,cAAP,KAA0B,WAA9B,EAA2CA,cAAc,GAAGpE,MAAM,CAAC2B,IAAP,CAAY/B,kBAA7B;EAE3C,QAAMyC,KAAK,GAAGb,QAAQ,EAAtB;EAEA,QAAI,CAACa,KAAL,EAAY,OAAO,KAAP,CAPuC;;EAUnD,QAAI,CAAC+B,cAAL,EAAqB;EACnB,UAAMC,MAAM,GAAGhF,MAAM,CAACiF,IAAP,CAAY3E,UAAZ,CAAf;EACA0E,MAAAA,MAAM,CAACE,MAAP,CAAcF,MAAM,CAAC9B,OAAP,CAAee,GAAf,CAAd,EAAmC,CAAnC;EACArD,MAAAA,CAAC,CAACoC,KAAD,CAAD,CAASmC,WAAT,CAAqBH,MAAM,CAACI,IAAP,CAAY,GAAZ,CAArB;EACD;;EAEDxE,IAAAA,CAAC,CAACoC,KAAD,CAAD,CAASqC,WAAT,CAAqBpB,GAArB;EACD;EAED;EACF;EACA;;;EACE,WAASqB,IAAT,GAAgB;EACd3E,IAAAA,MAAM,CAACkB,MAAP,CAAc0D,WAAd;EACA5E,IAAAA,MAAM,CAACK,SAAP,CAAiBwE,OAAjB;EACA7E,IAAAA,MAAM,CAACkB,MAAP,CAAc4D,UAAd;EAEA,QAAMzC,KAAK,GAAGb,QAAQ,EAAtB;;EAEA,QAAIa,KAAK,IAAIrC,MAAM,CAACmC,GAApB,EAAyB;EACvB,UAAIE,KAAK,CAAC0C,OAAN,KAAkB,QAAtB,EAAgC/E,MAAM,CAACK,SAAP,CAAiBwE,OAAjB;EAChClE,MAAAA,aAAa,CAAC0B,KAAD,CAAb;EACD;EACF;EAED;EACF;EACA;;;EACE,WAAS2C,WAAT,GAAuB;EACrB,QAAMhD,MAAM,GAAGhC,MAAM,CAACiC,MAAP,CAAcQ,GAAd,CAAkB,cAAlB,CAAf;EAEA,QAAMJ,KAAK,GAAGb,QAAQ,EAAtB;;EAEA,QAAIa,KAAJ,EAAW;EACT,UAAMK,MAAM,GAAGzC,CAAC,CAACoC,KAAD,CAAhB;EACA,UAAM4C,SAAS,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,OAArB,CAAlB;EACA,UAAM3B,GAAG,GAAGtB,MAAM,CAACjB,IAAP,CAAY,iCAAZ,EAA+CuC,GAA/C,MAAwD,EAApE,CAHS;EAMT;;EACA,UAAIZ,MAAM,CAACW,EAAP,CAAU,QAAV,CAAJ,EAAyB;EACvB,YAAIC,GAAG,CAAC1B,MAAR,EAAgB;EACdc,UAAAA,MAAM,CAACa,IAAP,CAAYD,GAAZ;EACD,SAFD,MAGK;EACH;EACAZ,UAAAA,MAAM,CAACa,IAAP,CAAY,QAAZ;EACD;EACF,OARD,MASK,IAAI0B,SAAS,CAAC1C,OAAV,CAAkBF,KAAK,CAACG,IAAxB,KAAiC,CAAC,CAAtC,EAA0C;EAC7CE,QAAAA,MAAM,CAACc,IAAP,CAAY,OAAZ,EAAqBF,GAArB;EACD,OAFI;EAAA,WAKA;EACHZ,UAAAA,MAAM,CAACc,IAAP,CAAY,aAAZ,EAA2BF,GAA3B;EACD;;EAEDtD,MAAAA,MAAM,CAACiC,MAAP,CAAciD,IAAd,CAAmB,cAAnB;EACAvE,MAAAA,aAAa,CAAC0B,KAAD,CAAb;EACD;EACF;EAED;EACF;EACA;;;EACE,WAAS8C,KAAT,GAAiB;EAEf;EACAlE,IAAAA,WAAW,GAHI;;;EAMfjB,IAAAA,MAAM,CAACkB,MAAP,CAAcC,GAAd,CAAkBnB,MAAM,CAACc,GAAzB,EAA8B,QAA9B,EAAwC,MAAxC,EAAgD,UAAUV,CAAV,EAAa;EAC3DA,MAAAA,CAAC,CAACQ,cAAF;EAEA,aAAO,KAAP;EACD,KAJD;EAKD;;EAED,SAAO;EACLuE,IAAAA,KAAK,EAAEA,KADF;EAELH,IAAAA,WAAW,EAAEA,WAFR;EAGLxD,IAAAA,QAAQ,EAAEA,QAHL;EAIL2C,IAAAA,UAAU,EAAEA,UAJP;EAKLD,IAAAA,eAAe,EAAEA,eALZ;EAMLvD,IAAAA,aAAa,EAAEA,aANV;EAOLgE,IAAAA,IAAI,EAAEA;EAPD,GAAP;EASD,CA1TD;;;EA6TApF,EAAE,CAAC6F,eAAH,CAAmB,aAAnB,EAAkC;EAChCC,EAAAA,IAAI,EAAE,KAD0B;EAEhCC,EAAAA,KAAK,EAAE,KAFyB;EAGhCC,EAAAA,KAAK,EAAE,QAHyB;EAIhCC,EAAAA,QAAQ,EAAE,oBAAY;EACpB,SAAKzF,KAAL,CAAWiF,WAAX;EACD;EAN+B,CAAlC;;EAUAzF,EAAE,CAACkG,UAAH,CAAc,YAAd,EAA4B;EAAEC,EAAAA,IAAI,EAAE,OAAR;EAAiBC,EAAAA,OAAO,EAAE;EAA1B,CAA5B;EACApG,EAAE,CAAC6F,eAAH,CAAmB,YAAnB,EAAiC;EAC/BG,EAAAA,KAAK,EAAE,OADwB;EAE/B/C,EAAAA,IAAI,EAAE,UAFyB;EAG/BoD,EAAAA,IAAI,EAAE,gBAAY;EAChB,QAAIC,CAAC,GAAG,+BAAR;EADgB,QAEKC,OAFL,GAEiB,KAAKnE,IAFtB,CAERhC,UAFQ;;EAIhB,SAAK,IAAMoG,GAAX,IAAkBD,OAAlB,EAA2B;EACzB,UAAIA,OAAO,CAACE,cAAR,CAAuBD,GAAvB,CAAJ,EAAiC;EAC/BF,QAAAA,CAAC,gGAAkFE,GAAlF,gBAA0F,KAAK/B,QAAL,CAAcC,SAAd,CAAwB6B,OAAO,CAACC,GAAD,CAA/B,CAA1F,cAAD;EACD;EACF;;EACDF,IAAAA,CAAC,IAAI,OAAL;EAEA,WAAOA,CAAP;EACD,GAf8B;EAgB/BL,EAAAA,QAAQ,EAAE,kBAAUS,GAAV,EAAe3C,GAAf,EAAoB;EAC5B,QAAMjB,KAAK,GAAG,KAAKtC,KAAL,CAAWyB,QAAX,EAAd;;EAEA,QAAIa,KAAJ,EAAW;EACT,WAAKtC,KAAL,CAAWoE,UAAX,CAAsBb,GAAtB;EACA,WAAKvD,KAAL,CAAWY,aAAX,CAAyB0B,KAAzB;EACD;EACF,GAvB8B;EAwB/B6D,EAAAA,aAAa,EAAE,uBAAUC,IAAV,EAAgBC,SAAhB,EAA2B;EAAA,QAChCnG,CADgC,GAC1B,IAD0B,CAChCA,CADgC;EAExC,QAAMoC,KAAK,GAAG,KAAKtC,KAAL,CAAWyB,QAAX,EAAd;;EAEA,QAAIa,KAAJ,EAAW;EACT,UAAMK,MAAM,GAAGzC,CAAC,CAACoC,KAAD,CAAhB;EAEA+D,MAAAA,SAAS,CAACrF,IAAV,CAAe,aAAf,EAA8BsF,IAA9B,CAAmC,YAAY;EAC7C,YAAMN,GAAG,GAAG9F,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,QAAb,CAAZ;EACAN,QAAAA,CAAC,CAAC,IAAD,CAAD,CAAQyE,WAAR,CAAoB,WAApB,EAAiChC,MAAM,CAAC4D,QAAP,CAAgBP,GAAhB,CAAjC;EACD,OAHD;EAID;EACF;EApC8B,CAAjC;EAuCAxG,EAAE,CAACkG,UAAH,CAAc,WAAd,EAA2B;EAAEC,EAAAA,IAAI,EAAE,MAAR;EAAgBC,EAAAA,OAAO,EAAE;EAAzB,CAA3B;EACApG,EAAE,CAAC6F,eAAH,CAAmB,WAAnB,EAAgC;EAC9BG,EAAAA,KAAK,EAAE,aADuB;EAE9BF,EAAAA,IAAI,EAAE,KAFwB;EAG9BkB,EAAAA,oBAAoB,EAAE,KAHQ;EAI9Bf,EAAAA,QAAQ,EAAE,oBAAY;EACpB,SAAKzF,KAAL,CAAWmE,eAAX;EACD;EAN6B,CAAhC;EASA3E,EAAE,CAACkG,UAAH,CAAc,WAAd,EAA2B;EAAEC,EAAAA,IAAI,EAAE,YAAR;EAAsBC,EAAAA,OAAO,EAAE;EAA/B,CAA3B;EACApG,EAAE,CAAC6F,eAAH,CAAmB,WAAnB,EAAgC;EAC9BG,EAAAA,KAAK,EAAE,MADuB;EAE9BF,EAAAA,IAAI,EAAE,KAFwB;EAG9BC,EAAAA,KAAK,EAAE,KAHuB;EAI9BX,EAAAA,IAAI,EAAE,IAJwB;EAK9B4B,EAAAA,oBAAoB,EAAE,KALQ;EAM9Bf,EAAAA,QAAQ,EAAE,oBAAY;EACpB,SAAKzF,KAAL,CAAW4E,IAAX;EACD;EAR6B,CAAhC;;EAYApF,EAAE,CAAC6F,eAAH,CAAmB,aAAnB,EAAkC;EAChCC,EAAAA,IAAI,EAAE,KAD0B;EAEhCC,EAAAA,KAAK,EAAE,KAFyB;EAGhCC,EAAAA,KAAK,EAAE,QAHyB;EAIhCC,EAAAA,QAAQ,EAAE,oBAAY;EACpB,SAAKzF,KAAL,CAAWiF,WAAX;EACD;EAN+B,CAAlC;;;;"}